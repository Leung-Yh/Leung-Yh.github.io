<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ä¸ªäººåšå®¢æ­å»º</title>
    <link href="/2023/07/06/blog-build/"/>
    <url>/2023/07/06/blog-build/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸ªäººåšå®¢æ­å»º"><a href="#ä¸ªäººåšå®¢æ­å»º" class="headerlink" title="ä¸ªäººåšå®¢æ­å»º"></a>ä¸ªäººåšå®¢æ­å»º</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="cnpm-command-not-found"><a href="#cnpm-command-not-found" class="headerlink" title="cnpm command not found"></a>cnpm command not found</h3><ul><li><p>é—®é¢˜å‡ºç°ï¼šå®‰è£…cnpmå‡ºé”™</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs node-repl"><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">$ npm install -g cnpm --registry=<span class="hljs-attr">https</span>:<span class="hljs-comment">//registry.npm.taobao.org</span></span><br></code></pre></td></tr></table></figure></li><li><p>æŒ‰ç…§<a href="https://npm.taobao.org/">æ·˜å® NPM é•œåƒ</a>å®‰è£…ï¼Œ<code>cnpm -v</code>å‘½ä»¤ä¸å¥½ä½¿,å‡ºç°å¦‚ä¸‹ï¼š</p><p>  <img src="/2023/07/06/blog-build/o_190716-cnpm-command-not-found-1.png" alt="image"></p></li><li><p>æ‰¾åˆ°cnpmæœ¬åœ°è·¯å¾„</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">cnpm`å‘½ä»¤çš„ä¸€èˆ¬åœ°å€ä¸ºï¼š`<span class="hljs-name">C</span>:\Users\Administrator\AppData\Roaming\npm<br></code></pre></td></tr></table></figure><p> <img src="/2023/07/06/blog-build/o_190716-cnpm-command-not-found-2.png" alt="image"></p></li><li><p><code>cd</code>åˆ°è¿™ä¸ªè·¯å¾„ä¸‹ï¼Œæ‰§è¡Œ<code>cnpm -v</code> å‘½ä»¤ä¼šå‡ºç°å¦‚ä¸‹ï¼Œè¯´æ˜cnpmå‘½ä»¤æ˜¯å¯ç”¨çš„ï¼Œéœ€è¦é…ç½®ç³»ç»Ÿç¯å¢ƒã€‚</p><p>  <img src="/2023/07/06/blog-build/o_190716-cnpm-command-not-found-3.png" alt="image"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong>gitçš„bashå’Œpower shellæ‰§è¡Œ<code>cnpm -v</code> æ˜¯ä¸å¯ç”¨,ä¸€å®šæ˜¯cmdï¼Œ</p></blockquote></li><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><p>å°†è¿™ä¸ªè·¯å¾„åŠ åˆ°<code>Path</code>å˜é‡ä¸‹ï¼Œç¡®å®šååœ¨gitçš„bashè¿˜æ˜¯cmdï¼Œpowershell éƒ½å¯ä»¥ä½¿ç”¨cnpmå‘½ä»¤äº†ã€‚</p> <img src="o_190716-cnpm-command-not-found-4.png" alt="image" style="zoom:80%;" /></li></ul><blockquote><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_36499016/article/details/100108797">cnpm command not found</a></p></blockquote><h3 id="hexo-command-not-found"><a href="#hexo-command-not-found" class="headerlink" title="hexo command not found"></a>hexo command not found</h3><p>è§£å†³æ–¹æ³•åŒ <code>cnpm command not found</code>ï¼Œåœ¨ç”µè„‘ä¸Šæ‰¾åˆ° hexo.cmd çš„è·¯å¾„ï¼Œç„¶åæ·»åŠ åˆ°pathå˜é‡é‡Œé¢</p><h3 id="ä¿®æ”¹-npm-ä¸‹è½½-amp-å®‰è£…è·¯å¾„"><a href="#ä¿®æ”¹-npm-ä¸‹è½½-amp-å®‰è£…è·¯å¾„" class="headerlink" title="ä¿®æ”¹ npm ä¸‹è½½&amp;å®‰è£…è·¯å¾„"></a>ä¿®æ”¹ npm ä¸‹è½½&amp;å®‰è£…è·¯å¾„</h3><ul><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®‰è£… Node.jsç¯å¢ƒï¼Œç¨‹åºä¼šè‡ªåŠ¨æŠŠ NPMå…¨å±€æ¨¡å—çš„è·¯å¾„è®¾ç½®åœ¨ç³»ç»Ÿç›˜ï¼ˆé€šå¸¸æ˜¯åœ¨ cç›˜ä¸‹ï¼‰ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘é˜¶æ®µä¸å»ºè®®å…¨å±€è·¯å¾„è®¾ç½®åœ¨ç³»ç»Ÿç›˜ï¼Œä¸ä½†ä¼šå½±å“åˆ°ç”µè„‘çš„æ€§èƒ½ï¼Œè€Œä¸”è¿˜å¾ˆä¸å®‰å…¨ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥è®¾ç½®ä¸‹è½½çš„å…¨å±€è·¯å¾„ç›®å½•:<br>è¾“å…¥å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰é…ç½®ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">npm config ls<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p> <img src="/2023/07/06/blog-build/image-20230706111939223.png" alt="image-20230706111939223"></p></li><li><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨NPMå®‰è£…åŒ…çš„è¯ï¼Œåœ¨é…ç½®ä¸­åªä¼šçœ‹åˆ°prefixçš„é€‰é¡¹ï¼Œå°±æ˜¯NPMé»˜è®¤çš„å…¨å±€å®‰è£…ç›®å½•ã€‚ä½†æ˜¯å¦‚æœæœ‰å¤šæ¬¡ä½¿ç”¨NPMå®‰è£…åŒ…çš„è¯ï¼Œå°±ä¼šçœ‹åˆ°cacheå’Œprefixä¸¤ä¸ªè·¯å¾„ï¼Œå¦‚ä¸‹å›¾</p><pre><code class="hljs">![image-20230706112016512](image-20230706112016512.png)</code></pre></li><li><p>ç¬¬ä¸€æ­¥ï¼šæ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹</p><p>åœ¨æ¬²æ›´æ”¹çš„ç›®å½•ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«æ˜¯ï¼šnode_global å’Œnode_cacheï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><p> <img src="/2023/07/06/blog-build/image-20230706112114693.png" alt="image-20230706112114693"></p></li><li><p>ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤</p><p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">npm<span class="hljs-built_in"> config </span><span class="hljs-built_in">set</span><span class="hljs-built_in"> prefix </span><span class="hljs-string">&quot;E:\nodejs\node_global&quot;</span><br>npm<span class="hljs-built_in"> config </span><span class="hljs-built_in">set</span> cache <span class="hljs-string">&quot;E:\nodejs\node_cache&quot;</span><br></code></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨npm config lså‘½ä»¤æŸ¥çœ‹é…ç½®çš„ç»“æœï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><p> <img src="/2023/07/06/blog-build/image-20230706112209149.png" alt="image-20230706112209149"></p></li><li><p>ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡</p><p>éªŒè¯é…ç½®æˆåŠŸåï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œæ–°å»ºä¸€ä¸ªç³»ç»Ÿå˜é‡ï¼Œå˜é‡åNODE_HOME,å˜é‡å€¼ï¼šE:\nodejsï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><p> <img src="/2023/07/06/blog-build/image-20230706112325539.png" alt="image-20230706112325539"></p><p>åœ¨pathå˜é‡åä¸­ï¼Œæ–°å»ºå˜é‡å€¼ï¼š</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">NODE_HOME</span></span>%<br><span class="hljs-tag">%<span class="hljs-selector-tag">NODE_HOME</span></span>%\node_modules<br><span class="hljs-tag">%<span class="hljs-selector-tag">NODE_HOME</span></span>%\node_global\<br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚å›¾ï¼š</p><p> <img src="/2023/07/06/blog-build/image-20230706112526973.png" alt="image-20230706112526973"></p></li><li><p>ç¬¬å››æ­¥ï¼šå®‰è£…CNPM</p><p>å®‰è£…CNPM:</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tcl">npm install -g cnpm --<span class="hljs-keyword">registry</span>=<span class="hljs-keyword">http</span>://<span class="hljs-keyword">registry</span>.npm.taobao.org<br></code></pre></td></tr></table></figure><p>å®‰è£…å¥½åæ•ˆæœå¦‚å›¾:</p><p> <img src="/2023/07/06/blog-build/image-20230706112651205.png" alt="image-20230706112651205"></p><p>node_globalæ–‡ä»¶ä¸­ä¼šå‡ºç°</p><p> <img src="/2023/07/06/blog-build/image-20230706112720558.png" alt="image-20230706112720558"></p><p>è¡¨ç¤ºcnpmä¸‹è½½è·¯å¾„æˆåŠŸã€‚</p></li><li><p>ç¬¬äº”æ­¥ï¼šè®¾ç½®npmæºï¼ˆé€‰åšï¼‰</p><p>è®¾ç½®npmæºï¼ŒæŠŠé»˜è®¤æºè®¾ç½®ä¸ºæ·˜å®é•œåƒï¼š</p><p>æ‰“å¼€å‘½ä»¤æŒ‡ç¤ºç¬¦ï¼Œè¾“å…¥ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">npm config set registry https:<span class="hljs-comment">//registry.npm.taobao.org</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®å®Œæˆåï¼Œè¾“å…¥npm config lsæ£€æŸ¥ï¼Œå‡ºç°ä¸‹å›¾è¡¨ç¤ºä¿®æ”¹æˆåŠŸã€‚</p><p> <img src="/2023/07/06/blog-build/image-20230706112839731.png" alt="image-20230706112839731"></p></li></ul><blockquote><p>å‚è€ƒ <a href="https://blog.csdn.net/qq_48230583/article/details/111181081">ä¿®æ”¹NPMé»˜è®¤å®‰è£…è·¯å¾„ï¼Œä¸‹è½½cnpmåŠè®¾ç½®npmæº_cnpm æŒ‡å®šæº_  é˜¿è‰¯è‰¯æœ¨æ‰£æ‚ ç±³çš„åšå®¢-CSDNåšå®¢</a></p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨æˆ·ä¸­å¿ƒé¡¹ç›®</title>
    <link href="/2023/07/05/%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83%E9%A1%B9%E7%9B%AE/"/>
    <url>/2023/07/05/%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h1><h2 id="Resource-ä¸-Autowired-çš„åŒºåˆ«"><a href="#Resource-ä¸-Autowired-çš„åŒºåˆ«" class="headerlink" title="@Resource ä¸ @Autowired çš„åŒºåˆ«"></a>@Resource ä¸ @Autowired çš„åŒºåˆ«</h2><p><code>@Resource</code> ä¼šé»˜è®¤æŒ‰ç…§ Java çš„åç§°å»æ³¨å…¥å±æ€§ï¼Œå¦‚æœæ˜¯ <code>@Autowired</code> çš„è¯ï¼Œåªä¼šæŒ‰ç…§ç±»å‹å»æ³¨å…¥å±æ€§ï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨ @Resource æ¥è‡ªåŠ¨æ³¨å…¥</p><h2 id="SpringBootæµ‹è¯•ç±»ä¸­çš„è‡ªåŠ¨æ³¨å…¥"><a href="#SpringBootæµ‹è¯•ç±»ä¸­çš„è‡ªåŠ¨æ³¨å…¥" class="headerlink" title="SpringBootæµ‹è¯•ç±»ä¸­çš„è‡ªåŠ¨æ³¨å…¥"></a>SpringBootæµ‹è¯•ç±»ä¸­çš„è‡ªåŠ¨æ³¨å…¥</h2><p>å¦‚æœæµ‹è¯•ç±»ä¸mainä¸­çš„ç±»çš„åç§°å­˜åœ¨å¯¹åº”å…³ç³»ï¼Œå¯ä»¥ä¸åŠ  <code>@RunWith</code> æ³¨è§£ï¼Œå¦åˆ™ï¼ˆå¦‚ä¸‹ï¼‰</p><p>éœ€è¦åœ¨ç±»çš„ä¸Šé¢åŠ ä¸Š <code>@RunWith(SpringRunner.class)</code>ï¼Œä¸ç„¶ä¸ä¼šè‡ªåŠ¨æ³¨å…¥</p><h2 id="ç®€å•è¯´æ˜-Cookie-å’Œ-Session"><a href="#ç®€å•è¯´æ˜-Cookie-å’Œ-Session" class="headerlink" title="ç®€å•è¯´æ˜ Cookie å’Œ Session"></a>ç®€å•è¯´æ˜ Cookie å’Œ Session</h2><p>Cookie æ˜¯ä¸€ç§ç¼“å­˜æœºåˆ¶ï¼ŒSession æ˜¯ä¼šè¯æœºåˆ¶</p><ul><li><p>ä»¥æœ€å¸¸è§çš„ç™»å½•æ¡ˆä¾‹è®²è§£ cookie çš„ä½¿ç”¨è¿‡ç¨‹ï¼š</p><ul><li>é¦–å…ˆç”¨æˆ·åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å‘æœåŠ¡å™¨é¦–æ¬¡å‘èµ·ç™»å½•è¯·æ±‚</li><li>ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šæŠŠç™»å½•çš„ç”¨æˆ·ä¿¡æ¯è®¾ç½®åœ¨ cookie ä¸­ï¼Œå¹¶å°† cookie è¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨</li><li>å®¢æˆ·ç«¯æµè§ˆå™¨æ¥æ”¶åˆ° cookie è¯·æ±‚åï¼Œä¼šæŠŠ cookie ä¿å­˜åˆ°æœ¬åœ°ï¼ˆå¯èƒ½æ˜¯å†…å­˜ï¼Œä¹Ÿå¯èƒ½æ˜¯ç£ç›˜ï¼‰</li><li>ä»¥åå†æ¬¡è®¿é—®è¯¥ web åº”ç”¨æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨å°±ä¼šæŠŠæœ¬åœ°çš„ cookie å¸¦ä¸Šï¼Œè¿™æ ·æœåŠ¡ç«¯å°±èƒ½æ ¹æ® cookie è·å¾—ç”¨æˆ·ä¿¡æ¯äº†</li></ul></li><li><p>åŒæ ·ä»¥ç™»å½•æ¡ˆä¾‹ä¸ºä¾‹å­è®²è§£ session çš„ä½¿ç”¨è¿‡ç¨‹</p><ul><li>é¦–å…ˆç”¨æˆ·åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å‘èµ·ç™»å½•è¯·æ±‚</li><li>ç™»é™†æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šæŠŠç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡ç«¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªå”¯ä¸€çš„ session è¡¨ç¤ºç»™å®¢æˆ·ç«¯æµè§ˆå™¨</li><li>å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªå”¯ä¸€çš„ session æ ‡è¯†ä¿å­˜èµ·æ¥</li><li>ä»¥åå†æ¬¡è®¿é—® web åº”ç”¨æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªå”¯ä¸€çš„ session æ ‡è¯†å¸¦ä¸Šï¼Œè¿™æ ·æœåŠ¡ç«¯å°±èƒ½æ ¹æ®è¿™ä¸ªå”¯ä¸€æ ‡è¯†æ‰¾åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚</li></ul></li><li><p>ç–‘é—®1ï¼šæŠŠå”¯ä¸€çš„ session æ ‡è¯†è¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œç„¶åä¿å­˜èµ·æ¥ï¼Œä»¥åè®¿é—®æ—¶å¸¦ä¸Šï¼Œè¿™éš¾é“ä¸æ˜¯cookieå—</p><p>è§£ç­”ï¼šæ²¡é”™ï¼Œsession åªæ˜¯ä¸€ç§ä¼šè¯æœºåˆ¶ï¼Œåœ¨è®¸ web åº”ç”¨ä¸­ï¼Œsession æœºåˆ¶å°±æ˜¯é€šè¿‡ cookie æ¥å®ç°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒåªæ˜¯ä½¿ç”¨äº† cookie çš„åŠŸèƒ½ï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨ cookie å®Œæˆä¼šè¯ä¿å­˜ã€‚ä¸ cookie åœ¨å®¢æˆ·ç«¯ä¿å­˜ä¼šè¯çš„æœºåˆ¶ç›¸åï¼Œsession é€šè¿‡ cookie çš„åŠŸèƒ½æŠŠä¼šè¯ä¿¡æ¯ä¿å­˜åˆ°äº†æœåŠ¡ç«¯</p></li><li><p>ç–‘é—®2ï¼šsession å’Œ cookie æœ‰ä»€ä¹ˆåŒºåˆ«</p><ul><li>ï¼ˆ1ï¼‰cookie æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ç§ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå¯ä»¥ç”¨æˆ·ç»´æŒå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç›´æ¥çš„ä¼šè¯</li><li>ï¼ˆ2ï¼‰session æŒ‡çš„æ˜¯ç»´æŒå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¼šè¯çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå¯ä»¥é€šè¿‡ cookie å®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆ«çš„æœ‰æ®µå®ç°</li><li>ï¼ˆ3ï¼‰å¦‚æœç”¨ cookie å®ç°ä¼šè¯ï¼Œé‚£ä¹ˆä¼šè¯ä¼šä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­</li><li>ï¼ˆ4ï¼‰è€Œ session æœºåˆ¶æä¾›çš„ä¼šè¯æ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯çš„</li></ul></li></ul><h2 id="æ¨è-Maven-åº“"><a href="#æ¨è-Maven-åº“" class="headerlink" title="æ¨è Maven åº“"></a>æ¨è Maven åº“</h2><p>Apache commons langï¼šStringUtils </p><h2 id="æ¨èæ’ä»¶"><a href="#æ¨èæ’ä»¶" class="headerlink" title="æ¨èæ’ä»¶"></a>æ¨èæ’ä»¶</h2><p>MybatisXï¼šä¸ç”¨å¤šè¯´</p><p>GenerateAllSetterï¼šä¸€é”®è°ƒç”¨å¯¹è±¡æ‰€æœ‰çš„setæ–¹æ³•å¹¶è‡ªåŠ¨å¡«å……å‡æ•°æ®</p><h1 id="æŠ¥é”™ä¸é—®é¢˜è§£å†³"><a href="#æŠ¥é”™ä¸é—®é¢˜è§£å†³" class="headerlink" title="æŠ¥é”™ä¸é—®é¢˜è§£å†³"></a>æŠ¥é”™ä¸é—®é¢˜è§£å†³</h1><h2 id="yarnæ— æ³•å¸è½½"><a href="#yarnæ— æ³•å¸è½½" class="headerlink" title="yarnæ— æ³•å¸è½½"></a>yarnæ— æ³•å¸è½½</h2><p>æŠŠ Node.js ä¸€èµ·åˆ é™¤ï¼Œç„¶åä¸‹è½½å®‰è£…ç‰ˆ yarn</p><h2 id="ä½¿ç”¨yarnå®‰è£…ç›¸å…³ä¾èµ–æ—¶æŠ¥é”™"><a href="#ä½¿ç”¨yarnå®‰è£…ç›¸å…³ä¾èµ–æ—¶æŠ¥é”™" class="headerlink" title="ä½¿ç”¨yarnå®‰è£…ç›¸å…³ä¾èµ–æ—¶æŠ¥é”™"></a>ä½¿ç”¨yarnå®‰è£…ç›¸å…³ä¾èµ–æ—¶æŠ¥é”™</h2><p>æŠ¥é”™ä¿¡æ¯æŒ‡å‘è·¯å¾„é—®é¢˜</p><p><a href="https://zhuanlan.zhihu.com/p/148188987">Node.jsçš„å®‰è£…ä»¥åŠé…ç½®npmå…¨å±€æ¨¡å—è·¯å¾„å’Œç¼“å­˜è·¯å¾„ - çŸ¥ä¹ (zhihu.com)</a></p><h2 id="åˆå§‹åŒ–ç›¸å…³é—®é¢˜"><a href="#åˆå§‹åŒ–ç›¸å…³é—®é¢˜" class="headerlink" title="åˆå§‹åŒ–ç›¸å…³é—®é¢˜"></a>åˆå§‹åŒ–ç›¸å…³é—®é¢˜</h2><p>åº”è¯¥ä½¿ç”¨ <strong>ANT DESIGN PRO V4</strong> çš„åˆå§‹åŒ–æ–¹å¼ï¼š<a href="https://pro.ant.design/zh-CN/docs/getting-started">å¼€å§‹ä½¿ç”¨ - Ant Design Pro</a></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-comment"># ä½¿ç”¨ npm</span><br><span class="hljs-built_in">npm</span> i @ant-design/pro-cli -g<br>pro create myapp<br></code></pre></td></tr></table></figure><h2 id="Nodejsæ–°ç‰ˆæœ¬å¼•èµ·çš„é—®é¢˜"><a href="#Nodejsæ–°ç‰ˆæœ¬å¼•èµ·çš„é—®é¢˜" class="headerlink" title="Nodejsæ–°ç‰ˆæœ¬å¼•èµ·çš„é—®é¢˜"></a>Nodejsæ–°ç‰ˆæœ¬å¼•èµ·çš„é—®é¢˜</h2><p>é—®é¢˜æè¿°ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">node:internal/crypto/hash:71<br>  this[kHandle] = new _Hash(algorithm, xofLen);<br>                  ^<br><br><span class="hljs-keyword">Error: </span>error:0308010C:digital envelope routines::unsupported<br>...<br></code></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ³•ï¼šåœ¨éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ä¹‹å‰åŠ å…¥ <code>SET NODE_OPTIONS=--openssl-legacy-provider</code></strong></p><p>å‚ç…§ï¼š<a href="https://blog.csdn.net/fengyuyeguirenenen/article/details/128319228">nodejsæ–°ç‰ˆæœ¬å¼•èµ·çš„ï¼šdigital envelope routines::unsupported</a></p><h2 id="è¿è¡ŒæŠ¥é”™ï¼šError-error-0308010C-digital-envelope-routines-unsupported"><a href="#è¿è¡ŒæŠ¥é”™ï¼šError-error-0308010C-digital-envelope-routines-unsupported" class="headerlink" title="è¿è¡ŒæŠ¥é”™ï¼šError: error:0308010C:digital envelope routines::unsupported"></a>è¿è¡ŒæŠ¥é”™ï¼šError: error:0308010C:digital envelope routines::unsupported</h2><ul><li><p>æŠ¥é”™åŸå› ï¼šNodeJs ç‰ˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¸æ”¯æŒè¯¥å‘½ä»¤</p></li><li><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li><p>ç®€å•ç²—æš´æ³•ï¼šåœ¨å‘½ä»¤å‰åŠ ä¸Š <strong><code>SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; </code></strong> </p><p>å³ <code>SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; åŸå‘½ä»¤</code></p></li></ul></li></ul><h1 id="ç”¨æˆ·ä¸­å¿ƒ"><a href="#ç”¨æˆ·ä¸­å¿ƒ" class="headerlink" title="ç”¨æˆ·ä¸­å¿ƒ"></a>ç”¨æˆ·ä¸­å¿ƒ</h1><p>å®Œæ•´äº†è§£åšé¡¹ç›®çš„æ€è·¯ï¼Œæ¥è§¦ä¸€äº›ä¼ä¸šçº§çš„å¼€å‘æŠ€æœ¯</p><p>ç›®æ ‡ï¼šä»¥åèƒ½è½»æ¾åœ°åšå‡ºç®¡ç†ç³»ç»Ÿ</p><h2 id="ä¼ä¸šåšé¡¹ç›®æµç¨‹"><a href="#ä¼ä¸šåšé¡¹ç›®æµç¨‹" class="headerlink" title="ä¼ä¸šåšé¡¹ç›®æµç¨‹"></a>ä¼ä¸šåšé¡¹ç›®æµç¨‹</h2><p>éœ€æ±‚åˆ†æ &#x3D;&gt; è®¾è®¡ï¼ˆæ¦‚è¦è®¾è®¡ã€è¯¦ç»†è®¾è®¡ï¼‰ &#x3D;&gt; æŠ€æœ¯é€‰å‹ &#x3D;&gt; åˆå§‹åŒ–&#x2F;å¼•å…¥éœ€è¦çš„æŠ€æœ¯ &#x3D;&gt; å†™Demo &#x3D;&gt; å†™ä»£ç ï¼ˆå®ç°ä¸šåŠ¡é€»è¾‘ï¼‰ &#x3D;&gt; æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ï¼‰&#x3D;&gt; ä»£ç æäº¤&#x2F;ä»£ç å®¡æ ¸ &#x3D;&gt; éƒ¨ç½² &#x3D;&gt; å‘å¸ƒ</p><h2 id="åˆå§‹åŒ–é¡¹ç›®ï¼ˆå‰ç«¯ï¼‰"><a href="#åˆå§‹åŒ–é¡¹ç›®ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®ï¼ˆå‰ç«¯ï¼‰"></a>åˆå§‹åŒ–é¡¹ç›®ï¼ˆå‰ç«¯ï¼‰</h2><p><a href="https://pro.ant.design/zh-CN/">å¼€ç®±å³ç”¨çš„ä¸­å°å‰ç«¯&#x2F;è®¾è®¡è§£å†³æ–¹æ¡ˆ - Ant Design Pro</a></p><p>å¯ä»¥ç‚¹å‡»<code>é¢„è§ˆ</code>æŸ¥çœ‹å®ƒçš„æ•ˆæœ</p><ul><li><p>æ–°å»ºé¡¹ç›®</p><ul><li>åœ¨é¡¹ç›®ç›®æ ‡ç›®å½•æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨cmdè¿›å…¥åˆ°è¯¥ç›®å½•</li><li>å¦‚æœè¿˜æ²¡å®‰è£…yarnéœ€è¦å…ˆå®‰è£…yarnï¼ˆæ¨èä½¿ç”¨å®‰è£…ç‰ˆï¼‰<ul><li>å®‰è£…ç‰ˆåœ°å€ï¼š<code>https://yarnpkg.com/downloads/1.22.15/yarn-1.22.15.msi</code></li><li>npmå‘½ä»¤å®‰è£…ï¼š<code>npm install --global yarn</code></li></ul></li></ul></li><li><p>åˆå§‹åŒ– Ant Design Pro è„šæ‰‹æ¶</p><p>åœ¨é¡¹ç›®ç›®å½•å†…ä½¿ç”¨ yarn å‘½ä»¤åˆå§‹åŒ– Ant Design Pro è„šæ‰‹æ¶</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-comment"># ä½¿ç”¨ npm</span><br><span class="hljs-built_in">npm</span> i @ant-design/pro-cli -g<br>pro create myapp<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">? ğŸ‚ ä½¿ç”¨ umi@4 è¿˜æ˜¯ umi@3 ? (Use arrow <span class="hljs-keyword">keys</span>)<br>â¯ umi@4ï¼ˆå¦‚æœé€‰æ‹©äº† umi@4 ç‰ˆæœ¬ï¼Œæš‚æ—¶è¿˜ä¸æ”¯æŒå…¨é‡åŒºå—ã€‚ï¼‰<br>  umi@3ï¼ˆé€‰è¿™ä¸ªï¼‰<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">? ğŸš€ è¦å…¨é‡çš„è¿˜æ˜¯ä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶? (Use arrow <span class="hljs-built_in">keys</span>)<br>â¯ simpleï¼ˆé€‰è¿™ä¸ªï¼‰<br>  <span class="hljs-built_in">complete</span><br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…ä¾èµ–åŒ…</p><p>æ‰“å¼€å¼€å‘å·¥å…·ä¸‹çš„ç»ˆç«¯ï¼Œè¾“å…¥ <code>yarn</code>ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yarn</span><br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨é¡¹ç›®</p><p>åœ¨ <code>package.json</code> ä¸­æ‰¾åˆ° <code>start</code> ï¼Œç‚¹å‡»å…¶æ—è¾¹çš„ç»¿è‰²æŒ‰é’®å³å¯</p><p>æˆ–ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥ yarn start</p></li><li><p>å®‰è£… Umi Ui ï¼ˆç”¨äºå¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼‰</p><ul><li><p>åœæ­¢é¡¹ç›®è¿è¡Œï¼Œåœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">yarn <span class="hljs-keyword">add</span><span class="language-bash"> @umijs/preset-ui -D</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œä¼šå‘ç°å³ä¸‹è§’å¤šä¸€ä¸ªå›¾æ ‡ï¼Œç‚¹å‡»å¯å‰å¾€é¡µé¢æ·»åŠ åŒºå—å’Œæ¨¡æ¿ï¼ˆä¼šè‡ªåŠ¨ç”Ÿäº§ä»£ç ï¼‰</p></li><li><p>é¡¹ç›®ç˜¦èº«</p></li></ul><h2 id="åˆå§‹åŒ–é¡¹ç›®ï¼ˆåç«¯ï¼‰"><a href="#åˆå§‹åŒ–é¡¹ç›®ï¼ˆåç«¯ï¼‰" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®ï¼ˆåç«¯ï¼‰"></a>åˆå§‹åŒ–é¡¹ç›®ï¼ˆåç«¯ï¼‰</h2><ul><li><p>åœ¨ideaæ–°å»º SpringBoot é¡¹ç›®</p> <img src="image-20230708231151717.png" alt="image-20230708231151717" style="zoom:80%;" /></li><li><p>ä¿®æ”¹</p> <img src="image-20230708231317210.png" alt="image-20230708231317210" style="zoom:80%;" /></li><li><p>ä¾èµ–é€‰æ‹©</p>  <img src="image-20230708231400515.png" alt="image-20230708231400515" style="zoom:80%;" /></li><li><p>idea è¿æ¥æœ¬åœ°æ•°æ®åº“</p><ul><li><p>ç‚¹å‡»database</p> <img src="image-20230708231602012.png" alt="image-20230708231602012" style="zoom:80%;" /></li><li><p>æ·»åŠ  mysql</p> <img src="image-20230708231629756.png" alt="image-20230708231629756" style="zoom:80%;" /><p> å¡«å†™æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç  æµ‹è¯•è¿æ¥æˆåŠŸå è¿›è¡Œè¿æ¥</p> <img src="image-20230708231727550.png" alt="image-20230708231727550" style="zoom:80%;" /></li><li><p>å»ºæ•°æ®åº“</p>  <img src="image-20230708234922684.png" alt="image-20230708234922684" style="zoom:80%;" /></li><li><p>å†™mysqlè¯­å¥</p>  <img src="image-20230708235013859.png" alt="image-20230708235013859" style="zoom:80%;" /></li><li><p>ä¹‹åè·Ÿ mybatis-plus å®˜ç½‘çš„å¿«é€Ÿå…¥é—¨æ¥åš</p></li></ul></li><li><p>å»ºå¥½æ–‡ä»¶å¤¹ã€åŒ…</p> <img src="image-20230708232910548.png" alt="image-20230708232910548" style="zoom:80%;" /></li><li><p>å¼•å…¥ mybatis-plus </p><ul><li><p>å‚è€ƒå®˜ç½‘ <a href="https://baomidou.com/">MyBatis-Plus (baomidou.com)</a></p></li><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5+ ç‰ˆæœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ application.yamlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">user-center</span><br>  <span class="hljs-comment"># DataSource Config</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/leungyh?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true</span><br>  <span class="hljs-attr">session:</span><br>    <span class="hljs-attr">timeout:</span> <span class="hljs-number">86400</span>  <span class="hljs-comment">#sessionå¤±æ•ˆæ—¶é—´</span><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span><br>  <span class="hljs-attr">servlet:</span><br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/api</span> <span class="hljs-comment">#è·¯å¾„å‰ç¼€</span><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">isDelete</span> <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span><br>      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span><br>      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span> <span class="hljs-comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨ Spring Boot å¯åŠ¨ç±»ä¸­æ·»åŠ  @MapperScan æ³¨è§£ï¼Œæ‰«æ Mapper æ–‡ä»¶å¤¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@MapperScan(&quot;com.lyh.usercenter.mapper&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserCenterApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(UserCenterApplication.class, args);<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç»§ç»­è·Ÿç€ <a href="https://baomidou.com/pages/226c21/#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E7%A8%8B">å¿«é€Ÿå¼€å§‹ | MyBatis-Plus (baomidou.com)</a> åšï¼ˆåšå®Œæ‰€æœ‰ï¼Œä»¥ç¡®å®šå¼•å…¥æ­£ç¡®ï¼‰</p></li></ul></li><li><p>Mavenä»“åº“æœç´¢ <a href="https://mvnrepository.com/">Maven Repository</a></p><ul><li><p>å®‰è£…æµ‹è¯•å•å…ƒ junit çš„ä¾èµ–</p> <img src="image-20230708233604228.png" alt="image-20230708233604228" style="zoom:80%;" /></li></ul></li><li><p>è¡¨è®¾è®¡</p> <img src="image-20230708234655802.png" alt="image-20230708234655802" style="zoom:80%;" /></li><li><p>å»ºè¡¨</p> <img src="image-20230708234729241.png" alt="image-20230708234729241" style="zoom:80%;" /><p>ç„¶åé€šè¿‡sqlè¯­å¥æŠŠä¹‹å‰æµ‹è¯•ç”¨çš„è¡¨åˆ é™¤</p><ul><li><p>å³é”®æ•°æ®åº“ï¼Œé€‰æ‹© new-&gt;table </p> <img src="image-20230708235400189.png" alt="image-20230708235400189" style="zoom:80%;" /></li><li><p>ä¿®æ”¹è¡¨åã€æ³¨é‡Šã€æ·»åŠ å­—æ®µ</p> <img src="image-20230708235458378.png" alt="image-20230708235458378" style="zoom:80%;" /></li><li><p>ç‚¹å‡» æ‰§è¡Œï¼Œåˆ›å»ºæˆåŠŸ</p> <img src="image-20230708235605584.png" alt="image-20230708235605584" style="zoom:80%;" /></li></ul></li></ul><h2 id="åç«¯ç›®å½•è¯´æ˜"><a href="#åç«¯ç›®å½•è¯´æ˜" class="headerlink" title="åç«¯ç›®å½•è¯´æ˜"></a>åç«¯ç›®å½•è¯´æ˜</h2> <img src="image-20230708235656058.png" alt="image-20230708235656058" style="zoom:80%;" /> <img src="image-20230708235716939.png" alt="image-20230708235716939" style="zoom:80%;" /><h2 id="ä½¿ç”¨MybatisXæ’ä»¶è¿›è¡Œä»£ç ç”Ÿæˆ"><a href="#ä½¿ç”¨MybatisXæ’ä»¶è¿›è¡Œä»£ç ç”Ÿæˆ" class="headerlink" title="ä½¿ç”¨MybatisXæ’ä»¶è¿›è¡Œä»£ç ç”Ÿæˆ"></a>ä½¿ç”¨MybatisXæ’ä»¶è¿›è¡Œä»£ç ç”Ÿæˆ</h2> <img src="image-20230708235951995.png" alt="image-20230708235951995" style="zoom:80%;" /><p> <img src="image-20230709000011645.png" alt="image-20230709000011645" style="zoom:80%;" />ã€</p><img src="image-20230709000031853.png" alt="image-20230709000031853" style="zoom:80%;" /> <img src="image-20230709000051139.png" alt="image-20230709000051139" style="zoom:80%;" /><img src="image-20230709000121671.png" alt="image-20230709000121671" style="zoom:80%;" /> <img src="image-20230709000144911.png" alt="image-20230709000144911" style="zoom:80%;" /><p>ç„¶åå¼€å§‹æ¬è¿ï¼ŒæŠŠ domin æ”¾åˆ° model åŒ…ä¸‹ï¼ŒUserMapper æ”¾åˆ° Mapper åŒ…ä¸‹,implåŒ…å’ŒUserService æ”¾åˆ°serviceåŒ…ä¸‹ï¼Œç„¶åæŠŠgeneratoråŒ…åˆ é™¤ï¼ˆæ³¨æ„ä¿®æ”¹UserMapperæ–‡ä»¶ä¸­çš„åŒ…è·¯å¾„ï¼‰</p><h2 id="å¿«é€Ÿç”Ÿæˆæµ‹è¯•ç±»"><a href="#å¿«é€Ÿç”Ÿæˆæµ‹è¯•ç±»" class="headerlink" title="å¿«é€Ÿç”Ÿæˆæµ‹è¯•ç±»"></a>å¿«é€Ÿç”Ÿæˆæµ‹è¯•ç±»</h2> <img src="image-20230709000437889.png" alt="image-20230709000437889" style="zoom:80%;" /> <img src="image-20230709000459515.png" alt="image-20230709000459515" style="zoom:80%;" /> <img src="image-20230709000517355.png" alt="image-20230709000517355" style="zoom:80%;" /><h2 id="ç¼–å†™åç«¯ä»£ç "><a href="#ç¼–å†™åç«¯ä»£ç " class="headerlink" title="ç¼–å†™åç«¯ä»£ç "></a>ç¼–å†™åç«¯ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.lyh.usercenter.service;<br><br><span class="hljs-keyword">import</span> com.lyh.usercenter.model.domain.User;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·æœåŠ¡</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Leungyh</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;User&gt; &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·æ³¨å†Œ</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userAccount   ç”¨æˆ·è´¦æˆ·</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userPassword  ç”¨æˆ·å¯†ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> checkPassword æ ¡éªŒå¯†ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ–°ç”¨æˆ·id</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">long</span> <span class="hljs-title function_">userRegister</span><span class="hljs-params">(String userAccount, String userPassword, String checkPassword)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·ç™»å½•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userAccount ç”¨æˆ·è´¦æˆ·</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userPassword ç”¨æˆ·å¯†ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> è¿”å›è„±æ•åçš„ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    User <span class="hljs-title function_">userLogin</span><span class="hljs-params">(String userAccount, String userPassword, HttpServletRequest request)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·è„±æ•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> originUser</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    User <span class="hljs-title function_">getSafetyUser</span><span class="hljs-params">(User originUser)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.lyh.usercenter.service.impl;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;<br><span class="hljs-keyword">import</span> com.lyh.usercenter.model.domain.User;<br><span class="hljs-keyword">import</span> com.lyh.usercenter.service.UserService;<br><span class="hljs-keyword">import</span> com.lyh.usercenter.mapper.UserMapper;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><span class="hljs-keyword">import</span> org.springframework.util.DigestUtils;<br><br><span class="hljs-keyword">import</span> javax.annotation.Resource;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> java.util.regex.Matcher;<br><span class="hljs-keyword">import</span> java.util.regex.Pattern;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.lyh.usercenter.contant.UserContant.USER_LOGIN_STATE;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·æœåŠ¡å®ç°ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Leungyh</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt;<br>    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span>&#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç›å€¼ï¼šæ··æ·†å¯†ç </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SALT</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">userRegister</span><span class="hljs-params">(String userAccount, String userPassword, String checkPassword)</span> &#123;<br>        <span class="hljs-comment">//1.æ ¡éªŒ</span><br>        <span class="hljs-keyword">if</span> (StringUtils.isAnyEmpty(userAccount, userPassword, checkPassword)) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (userAccount.length() &lt; <span class="hljs-number">4</span>) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (userPassword.length() &lt; <span class="hljs-number">8</span> || checkPassword.length() &lt; <span class="hljs-number">8</span>) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-comment">//^[a-zA-Z]\w&#123;5,17&#125;$</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">validPattern</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[a-zA-Z]\\w&#123;5,17&#125;$&quot;</span>;<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> Pattern.compile(validPattern).matcher(userPassword);<br>        <span class="hljs-keyword">if</span>(!matcher.find())&#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-comment">//å¯†ç å’Œæ ¡éªŒå¯†ç ç›¸åŒ</span><br>        <span class="hljs-keyword">if</span> (!userPassword.equals(checkPassword)) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-comment">//è´¦æˆ·ä¸èƒ½é‡å¤</span><br>        QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>        queryWrapper.eq(<span class="hljs-string">&quot;userAccount&quot;</span>, userAccount);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> userMapper.selectCount(queryWrapper);<br>        <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-comment">//åŠ å¯†</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">encryptPassword</span> <span class="hljs-operator">=</span> DigestUtils.md5DigestAsHex((SALT + <span class="hljs-string">&quot;mypassword&quot;</span>).getBytes());<br>        <span class="hljs-comment">//æ’å…¥æ•°æ®</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        user.setUserAccount(userAccount);<br>        user.setUserPassword(encryptPassword);<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">saveResult</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.save(user);<br>        <span class="hljs-keyword">if</span>(!saveResult) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> user.getId();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">userLogin</span><span class="hljs-params">(String userAccount, String userPassword, HttpServletRequest request)</span> &#123;<br>        <span class="hljs-comment">//1.æ ¡éªŒ</span><br>        <span class="hljs-keyword">if</span> (StringUtils.isAnyEmpty(userAccount, userPassword)) &#123;<br>            <span class="hljs-comment">// todo ä¿®æ”¹ä¸ºè‡ªå®šä¹‰å¼‚å¸¸</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (userAccount.length() &lt; <span class="hljs-number">4</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (userPassword.length() &lt; <span class="hljs-number">8</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-comment">//^[a-zA-Z]\w&#123;5,17&#125;$</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">validPattern</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[a-zA-Z]\\w&#123;5,17&#125;$&quot;</span>;<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> Pattern.compile(validPattern).matcher(userPassword);<br>        <span class="hljs-keyword">if</span>(!matcher.find())&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-comment">//åŠ å¯†</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">encryptPassword</span> <span class="hljs-operator">=</span> DigestUtils.md5DigestAsHex((SALT + <span class="hljs-string">&quot;mypassword&quot;</span>).getBytes());<br>        <span class="hljs-comment">//æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span><br>        QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>        queryWrapper.eq(<span class="hljs-string">&quot;userAccount&quot;</span>, userAccount);<br>        queryWrapper.eq(<span class="hljs-string">&quot;userPassword&quot;</span>, encryptPassword);<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectOne(queryWrapper);<br>        <span class="hljs-comment">//ç”¨æˆ·ä¸å­˜åœ¨</span><br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) &#123;<br>            log.info(<span class="hljs-string">&quot;user login failed, userAccount cannot math userPassword&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-comment">//è„±æ•</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">safetyUser</span> <span class="hljs-operator">=</span> getSafetyUser(user);<br>        <span class="hljs-comment">//è®°å½•ç”¨æˆ·çš„ç™»é™†çŠ¶æ€</span><br>        request.getSession().setAttribute(USER_LOGIN_STATE, safetyUser);<br><br>        <span class="hljs-keyword">return</span> safetyUser;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·è„±æ•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> originUser</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getSafetyUser</span><span class="hljs-params">(User originUser)</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">safetyUser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        safetyUser.setId(originUser.getId());<br>        safetyUser.setUsername(originUser.getUsername());<br>        safetyUser.setUserAccount(originUser.getUserAccount());<br>        safetyUser.setAvatarUrl(originUser.getAvatarUrl());<br>        safetyUser.setGender(originUser.getGender());<br>        safetyUser.setPhone(originUser.getPhone());<br>        safetyUser.setEmail(originUser.getEmail());<br>        safetyUser.setUserRole(originUser.getUserRole());<br>        safetyUser.setUserStatus(originUser.getUserStatus());<br>        safetyUser.setCreateTime(originUser.getCreateTime());<br>        <span class="hljs-keyword">return</span> safetyUser;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.lyh.usercenter.service;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">import</span> com.lyh.usercenter.model.domain.User;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Assertions;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-keyword">import</span> javax.annotation.Resource;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.jupiter.api.Assertions.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·æœåŠ¡æµ‹è¯•</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Leungyh</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddUser</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        user.setUsername(<span class="hljs-string">&quot;catlyh&quot;</span>);<br>        user.setUserAccount(<span class="hljs-string">&quot;123&quot;</span>);<br>        user.setAvatarUrl(<span class="hljs-string">&quot;https://pic.code-nav.cn/user_avatar/1601072287388278786/9vqTr3HM-WechatIMG1287.jpeg&quot;</span>);<br>        user.setGender(<span class="hljs-number">0</span>);<br>        user.setUserPassword(<span class="hljs-string">&quot;xxx&quot;</span>);<br>        user.setPhone(<span class="hljs-string">&quot;123&quot;</span>);<br>        user.setEmail(<span class="hljs-string">&quot;456&quot;</span>);<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userService.save(user);<br>        System.out.println(user.getId());<br>        assertTrue(result);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">userRegister</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">userAccount</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Leungyhhh&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">userPassword</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh123456&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">checkPassword</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh123456&quot;</span>;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userService.userRegister(userAccount, userPassword, checkPassword);<br>        Assertions.assertEquals(<span class="hljs-number">2</span>,result);<br><span class="hljs-comment">//        userAccount = &quot;lyh&quot;;</span><br><span class="hljs-comment">//        result = userService.userRegister(userAccount, userPassword, checkPassword);</span><br><span class="hljs-comment">//        Assertions.assertEquals(-1,result);</span><br><span class="hljs-comment">//        userAccount = &quot;lyhhh&quot;;</span><br><span class="hljs-comment">//        userPassword = &quot;123456&quot;;</span><br><span class="hljs-comment">//        result = userService.userRegister(userAccount, userPassword, checkPassword);</span><br><span class="hljs-comment">//        Assertions.assertEquals(-1,result);</span><br><span class="hljs-comment">//        userAccount = &quot;ly hhh&quot;;</span><br><span class="hljs-comment">//        result = userService.userRegister(userAccount, userPassword, checkPassword);</span><br><span class="hljs-comment">//        Assertions.assertEquals(-1,result);</span><br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Git</title>
    <link href="/2022/12/28/GitNote/"/>
    <url>/2022/12/28/GitNote/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¿®æ”¹commitæ³¨é‡Š"><a href="#ä¿®æ”¹commitæ³¨é‡Š" class="headerlink" title="ä¿®æ”¹commitæ³¨é‡Š"></a>ä¿®æ”¹commitæ³¨é‡Š</h2><p><a href="https://blog.csdn.net/xiaoyulike/article/details/119176756">Gitä½¿ç”¨å°æŠ€å·§ã€ä¿®æ”¹commitæ³¨é‡Š, è¶…è¯¦ç»†ã€‘-CSDNåšå®¢</a></p><h2 id="gitignoreä¸ç”Ÿæ•ˆçš„é—®é¢˜"><a href="#gitignoreä¸ç”Ÿæ•ˆçš„é—®é¢˜" class="headerlink" title=".gitignoreä¸ç”Ÿæ•ˆçš„é—®é¢˜"></a>.gitignoreä¸ç”Ÿæ•ˆçš„é—®é¢˜</h2><p><a href="https://blog.csdn.net/Saintmm/article/details/120847019">.gitignoreä¸ç”Ÿæ•ˆé—®é¢˜è§£å†³æ–¹æ³•-CSDNåšå®¢</a></p><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•</p></li><li><p>.gitignoreä¸­å·²ç»æ ‡æ˜å¿½ç•¥çš„æ–‡ä»¶ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œgit pushçš„æ—¶å€™è¿˜ä¼šå‡ºç°åœ¨pushçš„ç›®å½•ä¸­ï¼Œæˆ–è€…ç”¨git statusæŸ¥çœ‹çŠ¶æ€ï¼Œæƒ³è¦å¿½ç•¥çš„æ–‡ä»¶è¿˜æ˜¯æ˜¾ç¤ºè¢«è¿½è¸ªçŠ¶æ€ã€‚</p></li><li><p>åŸå› æ˜¯å› ä¸ºåœ¨gitå¿½ç•¥ç›®å½•ä¸­ï¼Œæ–°å»ºçš„æ–‡ä»¶åœ¨gitä¸­ä¼šæœ‰ç¼“å­˜ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œå°±ç®—æ˜¯åœ¨.gitignoreä¸­å·²ç»å£°æ˜äº†å¿½ç•¥è·¯å¾„ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±åº”è¯¥å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼Œç„¶åå†è¿›è¡Œgitçš„æäº¤ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°å¿½ç•¥çš„æ–‡ä»¶äº†ã€‚</p></li><li><p>è§£å†³æ–¹æ³•: gitæ¸…é™¤æœ¬åœ°ç¼“å­˜ï¼ˆæ”¹å˜æˆæœªtrackçŠ¶æ€ï¼‰ï¼Œç„¶åå†æäº¤:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs git">git rm -r --cached .<br>git add .<br>git commit -m &#x27;update .gitignore&#x27;<br>git push -u origin master<br></code></pre></td></tr></table></figure></li><li><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š</p></li><li><p>1ï¼‰.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢«trackçš„æ–‡ä»¶ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚</p></li><li><p>2ï¼‰æƒ³è¦.gitignoreèµ·ä½œç”¨ï¼Œå¿…é¡»è¦åœ¨è¿™äº›æ–‡ä»¶ä¸åœ¨æš‚å­˜åŒºä¸­æ‰å¯ä»¥ï¼Œ.gitignoreæ–‡ä»¶åªæ˜¯å¿½ç•¥æ²¡æœ‰è¢«staged(cached)æ–‡ä»¶ï¼Œå¯¹äºå·²ç»è¢«stagedæ–‡ä»¶ï¼ŒåŠ å…¥ignoreæ–‡ä»¶æ—¶ä¸€å®šè¦å…ˆä»stagedç§»é™¤ï¼Œæ‰å¯ä»¥å¿½ç•¥ã€‚</p></li></ul><h2 id="git-å…¨å±€å¿½ç•¥æ–‡ä»¶"><a href="#git-å…¨å±€å¿½ç•¥æ–‡ä»¶" class="headerlink" title="git å…¨å±€å¿½ç•¥æ–‡ä»¶"></a>git å…¨å±€å¿½ç•¥æ–‡ä»¶</h2><p><a href="https://cloud.tencent.com/developer/article/1826509">gitå…¨å±€å¿½ç•¥æ–‡ä»¶</a></p><ul><li><p>git add file_name æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs git">The following paths are ignored by one of your .gitignore files:  <br>xxx/index.js<br>hint: Use -f if you really want to add them.<br>hint: Turn this message off by running<br>hint: &quot;git config advice.addIgnoredFile false&quot;<br></code></pre></td></tr></table></figure></li><li><p>è§£å†³åŠæ³•ï¼š</p><ul><li><p>ä½¿ç”¨å‘½ä»¤ <code>git check-ignore -v file name</code> å»æ£€æµ‹å¿½ç•¥é…ç½®æ¥æºäºå“ªä¸ªæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs git">% git check-ignore -v src/components/app/index.js<br>/Users/xx/.gitignore_global:3:index.jssrc/components/app/index.js<br></code></pre></td></tr></table></figure></li><li><p>ç„¶å cat æŸ¥çœ‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs git">% cat /Users/xx/.gitignore_global<br>*~<br>.DS_Store<br>index.js<br></code></pre></td></tr></table></figure></li><li><p>å‘ç°å¿½ç•¥åˆ—è¡¨é‡Œé¢æ·»åŠ äº†<code>index.js</code>ï¼Œç„¶åå»æ‰å°±å¯ä»¥äº†ã€‚</p></li></ul></li></ul><h2 id="æ¨é€-x2F-å…‹éš†ä»“åº“æ—¶æŠ¥é”™"><a href="#æ¨é€-x2F-å…‹éš†ä»“åº“æ—¶æŠ¥é”™" class="headerlink" title="æ¨é€&#x2F;å…‹éš†ä»“åº“æ—¶æŠ¥é”™"></a>æ¨é€&#x2F;å…‹éš†ä»“åº“æ—¶æŠ¥é”™</h2><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li><p>äº§ç”ŸåŸå› ï¼šä¸€èˆ¬æ˜¯è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨çš„SSLè¯ä¹¦æ²¡æœ‰ç»è¿‡ç¬¬ä¸‰æ–¹æœºæ„çš„ç­¾ç½²ï¼Œæ‰€ä»¥æ‰æŠ¥é”™</p></li><li><p>æ–¹æ³•ä¸€ï¼šè§£é™¤ SSL éªŒè¯</p><p><code>git config --global http.sslVerify &quot;false&quot;</code></p></li><li><p>æ–¹æ¡ˆäºŒï¼šå–æ¶ˆä»£ç†ï¼ˆéœ€è¦åˆ°é¡¹ç›®å·¥ç¨‹ç›®å½•æ‰“å¼€Git Bashï¼‰</p><p><code>git config --global --unset http.proxy</code><br><code>git config --global --unset https.proxy </code></p></li></ul><h2 id="Git-SSHé…ç½®"><a href="#Git-SSHé…ç½®" class="headerlink" title="Git SSHé…ç½®"></a>Git SSHé…ç½®</h2><p><a href="https://www.cnblogs.com/OnlyAR/p/16155406.html">é…ç½®SSHè¿æ¥Gitæ•™ç¨‹ - Only(AR) - åšå®¢å›­ (cnblogs.com)</a></p><p><a href="https://www.jianshu.com/p/3f4b2ede5a93">git sshé…ç½®ã€å¯†é’¥åˆ›å»º - ç®€ä¹¦ (jianshu.com)</a></p><p><a href="https://blog.csdn.net/hell_oword/article/details/121591131">IDEA é…ç½®SSH æ–¹å¼è®¿é—® GIT_åŠåŠå­Kyleçš„åšå®¢-CSDNåšå®¢_idea git ssh</a></p><h2 id="Git-æ¦‚è¿°"><a href="#Git-æ¦‚è¿°" class="headerlink" title="Git æ¦‚è¿°"></a>Git æ¦‚è¿°</h2><p>Git æ˜¯ä¸€ä¸ªå…è´¹çš„ã€å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥å¿«é€Ÿé«˜æ•ˆåœ°å¤„ç†ä»å°å‹åˆ°å¤§å‹çš„å„ç§é¡¹ç›®ã€‚</p><p>Git æ˜“äºå­¦ä¹ ï¼Œå åœ°é¢ç§¯å°ï¼Œæ€§èƒ½æå¿«ã€‚ å®ƒå…·æœ‰å»‰ä»·çš„æœ¬åœ°åº“ï¼Œæ–¹ä¾¿çš„æš‚å­˜åŒºåŸŸå’Œå¤šä¸ªå·¥ä½œæµåˆ†æ”¯ç­‰ç‰¹æ€§ã€‚å…¶æ€§èƒ½ä¼˜äº Subversionã€CVSã€Perforce å’Œ ClearCase ç­‰ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚</p><h3 id="ä½•ä¸ºç‰ˆæœ¬æ§åˆ¶"><a href="#ä½•ä¸ºç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ä½•ä¸ºç‰ˆæœ¬æ§åˆ¶"></a>ä½•ä¸ºç‰ˆæœ¬æ§åˆ¶</h3><p>ç‰ˆæœ¬æ§åˆ¶æ˜¯ä¸€ç§è®°å½•æ–‡ä»¶å†…å®¹å˜åŒ–ï¼Œä»¥ä¾¿å°†æ¥æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬ä¿®è®¢æƒ…å†µçš„ç³»ç»Ÿã€‚</p><p>ç‰ˆæœ¬æ§åˆ¶æœ€é‡è¦çš„æ˜¯å¯ä»¥è®°å½•æ–‡ä»¶ä¿®æ”¹å†å²è®°å½•ï¼Œä»è€Œè®©ç”¨æˆ·èƒ½å¤ŸæŸ¥çœ‹å†å²ç‰ˆæœ¬ï¼Œæ–¹ä¾¿ç‰ˆæœ¬åˆ‡æ¢ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶"></a>ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶</h3><p>ä¸ªäººå¼€å‘è¿‡æ¸¡åˆ°å›¢é˜Ÿåä½œã€‚</p> <img src="image-20230106204027508.png" alt="image-20230106204027508" style="zoom:80%;" /><h3 id="ç‰ˆæœ¬æ§åˆ¶å·¥å…·"><a href="#ç‰ˆæœ¬æ§åˆ¶å·¥å…·" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶å·¥å…·"></a>ç‰ˆæœ¬æ§åˆ¶å·¥å…·</h3><h4 id="é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·"><a href="#é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·" class="headerlink" title="é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·"></a>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·</h4><p>CVSã€SVN(Subversion)ã€VSSâ€¦â€¦</p><p>é›†ä¸­åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¯¸å¦‚ CVSã€SVN ç­‰ï¼Œéƒ½æœ‰ä¸€ä¸ªå•ä¸€çš„é›†ä¸­ç®¡ç†çš„æœåŠ¡å™¨ï¼Œä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„ä¿®è®¢ç‰ˆæœ¬ï¼Œè€ŒååŒå·¥ä½œçš„äººä»¬éƒ½é€šè¿‡å®¢æˆ·ç«¯è¿åˆ°è¿™å°æœåŠ¡å™¨ï¼Œå–å‡ºæœ€æ–°çš„æ–‡ä»¶æˆ–è€…æäº¤æ›´æ–°ã€‚å¤šå¹´ä»¥æ¥ï¼Œè¿™å·²æˆä¸ºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ ‡å‡†åšæ³•ã€‚</p><p>è¿™ç§åšæ³•å¸¦æ¥äº†è®¸å¤šå¥½å¤„ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šçœ‹åˆ°é¡¹ç›®ä¸­çš„å…¶ä»–äººæ­£åœ¨åšäº›ä»€ä¹ˆã€‚è€Œç®¡ç†å‘˜ä¹Ÿå¯ä»¥è½»æ¾æŒæ§æ¯ä¸ªå¼€å‘è€…çš„æƒé™ï¼Œå¹¶ä¸”ç®¡ç†ä¸€ä¸ªé›†ä¸­åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè¦è¿œæ¯”åœ¨å„ä¸ªå®¢æˆ·ç«¯ä¸Šç»´æŠ¤æœ¬åœ°æ•°æ®åº“æ¥å¾—è½»æ¾å®¹æ˜“ã€‚</p><p>äº‹åˆ†ä¸¤é¢ï¼Œæœ‰å¥½æœ‰åã€‚è¿™ä¹ˆåšæ˜¾è€Œæ˜“è§çš„ç¼ºç‚¹æ˜¯ä¸­å¤®æœåŠ¡å™¨çš„å•ç‚¹æ•…éšœã€‚å¦‚æœæœåŠ¡å™¨å®•æœºä¸€å°æ—¶ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸€å°æ—¶å†…ï¼Œè°éƒ½æ— æ³•æäº¤æ›´æ–°ï¼Œä¹Ÿå°±æ— æ³•ååŒå·¥ä½œã€‚</p><h4 id="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·"><a href="#åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·" class="headerlink" title="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·"></a>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·</h4><p>Gitã€Mercurialã€Bazaarã€Darcsâ€¦â€¦</p><p>åƒ Git è¿™ç§åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå®¢æˆ·ç«¯æå–çš„ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶å¿«ç…§ï¼Œè€Œæ˜¯æŠŠä»£ç ä»“åº“å®Œæ•´åœ°é•œåƒä¸‹æ¥ï¼ˆæœ¬åœ°åº“ï¼‰ã€‚è¿™æ ·ä»»ä½•ä¸€å¤„ååŒå·¥ä½œç”¨çš„æ–‡ä»¶å‘ç”Ÿæ•…éšœï¼Œäº‹åéƒ½å¯ä»¥ç”¨å…¶ä»–å®¢æˆ·ç«¯çš„æœ¬åœ°ä»“åº“è¿›è¡Œæ¢å¤ã€‚å› ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯çš„æ¯ä¸€æ¬¡æ–‡ä»¶æå–æ“ä½œï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸€æ¬¡å¯¹æ•´ä¸ªæ–‡ä»¶ä»“åº“çš„å®Œæ•´å¤‡ä»½ã€‚</p><p>åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå‡ºç°ä¹‹å,è§£å†³äº†é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ç¼ºé™·:</p><ol><li>æœåŠ¡å™¨æ–­ç½‘çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥è¿›è¡Œå¼€å‘ï¼ˆå› ä¸ºç‰ˆæœ¬æ§åˆ¶æ˜¯åœ¨æœ¬åœ°è¿›è¡Œçš„ï¼‰</li><li>æ¯ä¸ªå®¢æˆ·ç«¯ä¿å­˜çš„ä¹Ÿéƒ½æ˜¯æ•´ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼ˆåŒ…å«å†å²è®°å½•ï¼Œæ›´åŠ å®‰å…¨ï¼‰</li></ol><h3 id="Git-å·¥ä½œæœºåˆ¶"><a href="#Git-å·¥ä½œæœºåˆ¶" class="headerlink" title="Git å·¥ä½œæœºåˆ¶"></a>Git å·¥ä½œæœºåˆ¶</h3> <img src="image-20230106205737294.png" alt="image-20230106205737294" style="zoom:80%;" /><h3 id="Git-å’Œä»£ç æ‰˜ç®¡ä¸­å¿ƒ"><a href="#Git-å’Œä»£ç æ‰˜ç®¡ä¸­å¿ƒ" class="headerlink" title="Git å’Œä»£ç æ‰˜ç®¡ä¸­å¿ƒ"></a>Git å’Œä»£ç æ‰˜ç®¡ä¸­å¿ƒ</h3><p>ä»£ç æ‰˜ç®¡ä¸­å¿ƒæ˜¯åŸºäºç½‘ç»œæœåŠ¡å™¨çš„è¿œç¨‹ä»£ç ä»“åº“ï¼Œä¸€èˆ¬æˆ‘ä»¬ç®€å•ç§°ä¸ºè¿œç¨‹åº“ã€‚</p><p>â¢ å±€åŸŸç½‘</p><ul><li>âœ“ GitLab</li></ul><p>â¢ äº’è”ç½‘</p><ul><li>âœ“ GitHubï¼ˆå¤–ç½‘ï¼‰</li><li>âœ“ Gitee ç äº‘ï¼ˆå›½å†…ç½‘ç«™ï¼‰</li></ul><h2 id="Git-å¸¸ç”¨å‘½ä»¤"><a href="#Git-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Git å¸¸ç”¨å‘½ä»¤"></a>Git å¸¸ç”¨å‘½ä»¤</h2><table><thead><tr><th>å‘½ä»¤åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>git config â€“global user.name ç”¨æˆ·å</td><td>è®¾ç½®ç”¨æˆ·ç­¾å</td></tr><tr><td>git config â€“global user.email é‚®ç®±</td><td>è®¾ç½®ç”¨æˆ·ç­¾å</td></tr><tr><td>git init</td><td>åˆå§‹åŒ–æœ¬åœ°åº“</td></tr><tr><td>git status</td><td>æŸ¥çœ‹æœ¬åœ°åº“çŠ¶æ€</td></tr><tr><td>git add æ–‡ä»¶å</td><td>æ·»åŠ åˆ°æš‚å­˜åŒº</td></tr><tr><td>git commit -m â€œæ—¥å¿—ä¿¡æ¯â€ æ–‡ä»¶å</td><td>æäº¤åˆ°æœ¬åœ°åº“</td></tr><tr><td>git reflog</td><td>æŸ¥çœ‹å†å²è®°å½•</td></tr><tr><td>git reset â€“hard ç‰ˆæœ¬å·</td><td>ç‰ˆæœ¬ç©¿æ¢­</td></tr></tbody></table><h3 id="è®¾ç½®ç”¨æˆ·ç­¾å"><a href="#è®¾ç½®ç”¨æˆ·ç­¾å" class="headerlink" title="è®¾ç½®ç”¨æˆ·ç­¾å"></a>è®¾ç½®ç”¨æˆ·ç­¾å</h3><ul><li>1 ï¼‰åŸºæœ¬è¯­æ³•<ul><li>git config â€“global user.name ç”¨æˆ·å</li><li>git config â€“global user.email é‚®ç®±</li></ul></li><li>è¯´æ˜ï¼š<ul><li>ç­¾åçš„ä½œç”¨æ˜¯åŒºåˆ†ä¸åŒæ“ä½œè€…èº«ä»½ã€‚ç”¨æˆ·çš„ç­¾åä¿¡æ¯åœ¨æ¯ä¸€ä¸ªç‰ˆæœ¬çš„æäº¤ä¿¡æ¯ä¸­èƒ½å¤Ÿçœ‹åˆ°ï¼Œä»¥æ­¤ç¡®è®¤æœ¬æ¬¡æäº¤æ˜¯è°åšçš„ã€‚</li><li><strong>Git é¦–æ¬¡å®‰è£…å¿…é¡»è®¾ç½®ä¸€ä¸‹ç”¨æˆ·ç­¾åï¼Œå¦åˆ™æ— æ³•æäº¤ç ã€‚</strong></li><li>æ³¨æ„ï¼šè¿™é‡Œè®¾ç½®ç”¨æˆ·ç­¾åå’Œå°†æ¥ç™»å½•ä»£ç æ‰˜ç®¡ä¸­å¿ƒçš„è´¦å·æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</li></ul></li></ul><h3 id="åˆå§‹åŒ–æœ¬åœ°åº“"><a href="#åˆå§‹åŒ–æœ¬åœ°åº“" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ°åº“"></a>åˆå§‹åŒ–æœ¬åœ°åº“</h3><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git init</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p> <img src="image-20230106213128973.png" alt="image-20230106213128973" style="zoom:80%;" /></li><li><p>3ï¼‰ç»“æœæŸ¥çœ‹</p> <img src="image-20230106212936602.png" alt="image-20230106212936602" style="zoom:80%;" /></li></ul><h3 id="æŸ¥çœ‹æœ¬åœ°åº“çŠ¶æ€"><a href="#æŸ¥çœ‹æœ¬åœ°åº“çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°åº“çŠ¶æ€"></a>æŸ¥çœ‹æœ¬åœ°åº“çŠ¶æ€</h3><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git status</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><ul><li><p>é¦–æ¬¡æŸ¥çœ‹ï¼ˆ å·¥ä½œåŒºæ²¡æœ‰ä»»ä½•æ–‡ä»¶ï¼‰</p> <img src="image-20230106213105720.png" alt="image-20230106213105720" style="zoom:80%;" /></li><li><p>æ–°å¢æ–‡ä»¶ï¼ˆhello.txt ï¼‰</p> <img src="image-20230106213402460.png" alt="image-20230106213402460" style="zoom:80%;" /></li><li><p>å†æ¬¡æŸ¥çœ‹ï¼ˆ æ£€æµ‹åˆ°æœªè¿½è¸ªçš„æ–‡ä»¶ï¼‰</p> <img src="image-20230106213430095.png" alt="image-20230106213430095" style="zoom:80%;" /></li></ul></li></ul><h3 id="æ·»åŠ æš‚å­˜åŒº"><a href="#æ·»åŠ æš‚å­˜åŒº" class="headerlink" title="æ·»åŠ æš‚å­˜åŒº"></a>æ·»åŠ æš‚å­˜åŒº</h3><h4 id="å°†å·¥ä½œåŒºçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº"><a href="#å°†å·¥ä½œåŒºçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº" class="headerlink" title="å°†å·¥ä½œåŒºçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº"></a>å°†å·¥ä½œåŒºçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git add æ–‡ä»¶å</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230106213838372.png" alt="image-20230106213838372" style="zoom:80%;" /></p></li><li><p>3ï¼‰æŸ¥çœ‹çŠ¶æ€ï¼ˆæ£€æµ‹åˆ°æš‚å­˜åŒº æœ‰æ–°æ–‡ä»¶ï¼‰</p><p>â€‹ <img src="image-20230106214049363.png" alt="image-20230106214049363" style="zoom:80%;" /></p></li></ul><h3 id="æäº¤æœ¬åœ°åº“"><a href="#æäº¤æœ¬åœ°åº“" class="headerlink" title="æäº¤æœ¬åœ°åº“"></a>æäº¤æœ¬åœ°åº“</h3><h4 id="å°†æš‚å­˜åŒºçš„-æ–‡ä»¶-æäº¤åˆ°æœ¬åœ°åº“"><a href="#å°†æš‚å­˜åŒºçš„-æ–‡ä»¶-æäº¤åˆ°æœ¬åœ°åº“" class="headerlink" title="å°†æš‚å­˜åŒºçš„ æ–‡ä»¶ æäº¤åˆ°æœ¬åœ°åº“"></a>å°†æš‚å­˜åŒºçš„ æ–‡ä»¶ æäº¤åˆ°æœ¬åœ°åº“</h4><ul><li><p>1 ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git commit -m â€œ æ—¥å¿—ä¿¡æ¯â€ æ–‡ä»¶å</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹  <img src="image-20230106214533950.png" alt="image-20230106214533950" style="zoom:80%;" /></p></li><li><p>3ï¼‰æŸ¥çœ‹çŠ¶æ€ï¼ˆæ²¡æœ‰æ–‡ä»¶éœ€è¦æäº¤ï¼‰</p><p>â€‹ <img src="image-20230106214653731.png" alt="image-20230106214653731" style="zoom:80%;" /></p></li></ul><h3 id="ä¿®æ”¹æ–‡ä»¶"><a href="#ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶"></a>ä¿®æ”¹æ–‡ä»¶</h3><ul><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230106215422405.png" alt="image-20230106215422405" style="zoom:80%;" /></p></li><li><p>3ï¼‰æŸ¥çœ‹çŠ¶æ€ï¼ˆæ£€æµ‹åˆ°å·¥ä½œåŒºæœ‰æ–‡ä»¶è¢«ä¿®æ”¹ï¼‰</p><p>â€‹ <img src="image-20230106215500028.png" alt="image-20230106215500028" style="zoom:80%;" /></p></li><li><p>4ï¼‰å°†ä¿®æ”¹çš„æ–‡ä»¶å†æ¬¡æ·»åŠ æš‚å­˜åŒº</p><p>â€‹ <img src="image-20230106215553985.png" alt="image-20230106215553985" style="zoom:80%;" /></p></li><li><p>5ï¼‰æŸ¥çœ‹çŠ¶æ€ï¼ˆå·¥ä½œåŒºçš„ä¿®æ”¹æ·»åŠ åˆ°äº†æš‚å­˜åŒºï¼‰</p><p>â€‹ <img src="image-20230106215624518.png" alt="image-20230106215624518" style="zoom:80%;" /></p></li><li><p>6ï¼‰æäº¤</p><p>â€‹ <img src="image-20230106215733466.png" alt="image-20230106215733466" style="zoom:80%;" /></p></li><li><p>7ï¼‰æŸ¥çœ‹çŠ¶æ€</p><p>â€‹ <img src="image-20230106215802038.png" alt="image-20230106215802038" style="zoom:80%;" /></p></li><li><p>8ï¼‰æŸ¥çœ‹å†å²ç‰ˆæœ¬</p><p>â€‹ <img src="image-20230106215829602.png" alt="image-20230106215829602" style="zoom:80%;" /></p></li><li><p>9ï¼‰æŸ¥çœ‹æ–‡ä»¶ï¼ˆæœ€æ–°çš„æ–‡ä»¶ï¼‰</p><p>â€‹ <img src="image-20230106215935963.png" alt="image-20230106215935963" style="zoom:80%;" /></p></li></ul><h3 id="å†å²ç‰ˆæœ¬"><a href="#å†å²ç‰ˆæœ¬" class="headerlink" title="å†å²ç‰ˆæœ¬"></a>å†å²ç‰ˆæœ¬</h3><h4 id="æŸ¥çœ‹å†å²ç‰ˆæœ¬"><a href="#æŸ¥çœ‹å†å²ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å†å²ç‰ˆæœ¬"></a>æŸ¥çœ‹å†å²ç‰ˆæœ¬</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git reflog æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</li><li>git log æŸ¥çœ‹ç‰ˆæœ¬è¯¦ç»†ä¿¡æ¯</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230106220720091.png" alt="image-20230106220720091" style="zoom:80%;" /></p></li></ul><h4 id="ç‰ˆæœ¬ç©¿æ¢­"><a href="#ç‰ˆæœ¬ç©¿æ¢­" class="headerlink" title="ç‰ˆæœ¬ç©¿æ¢­"></a>ç‰ˆæœ¬ç©¿æ¢­</h4><p><strong>Git åˆ‡æ¢ç‰ˆæœ¬ï¼Œåº•å±‚å…¶å®æ˜¯ç§»åŠ¨çš„ HEAD æŒ‡é’ˆ</strong></p><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git reset â€“hard ç‰ˆæœ¬å·</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹  <img src="image-20230106221158735.png" alt="image-20230106221158735" style="zoom:80%;" /></p></li></ul><h2 id="Git-åˆ†æ”¯æ“ä½œ"><a href="#Git-åˆ†æ”¯æ“ä½œ" class="headerlink" title="Git åˆ†æ”¯æ“ä½œ"></a>Git åˆ†æ”¯æ“ä½œ</h2><h3 id="ä»€ä¹ˆæ˜¯åˆ†æ”¯"><a href="#ä»€ä¹ˆæ˜¯åˆ†æ”¯" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†æ”¯"></a>ä»€ä¹ˆæ˜¯åˆ†æ”¯</h3><p>åœ¨ç‰ˆæœ¬æ§åˆ¶è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶æ¨è¿›å¤šä¸ªä»»åŠ¡ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºæ¯ä¸ªä»»åŠ¡çš„å•ç‹¬åˆ†æ”¯ã€‚ä½¿ç”¨åˆ†æ”¯æ„å‘³ç€ç¨‹åºå‘˜å¯ä»¥æŠŠè‡ªå·±çš„å·¥ä½œä»å¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å¼€æ¥ï¼Œå¼€å‘è‡ªå·±åˆ†æ”¯çš„æ—¶å€™ï¼Œä¸ä¼šå½±å“ä¸»çº¿åˆ†æ”¯çš„è¿è¡Œã€‚å¯¹äºåˆå­¦è€…è€Œè¨€ï¼Œåˆ†æ”¯å¯ä»¥ç®€å•ç†è§£ä¸ºå‰¯æœ¬ï¼Œä¸€ä¸ªåˆ†æ”¯å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å‰¯æœ¬ã€‚ï¼ˆåˆ†æ”¯åº•å±‚å…¶å®ä¹Ÿæ˜¯æŒ‡é’ˆçš„å¼•ç”¨ï¼‰</p><img src="image-20230106230719807.png" alt="image-20230106230719807" style="zoom:80%;" /><h3 id="åˆ†æ”¯çš„å¥½å¤„"><a href="#åˆ†æ”¯çš„å¥½å¤„" class="headerlink" title="åˆ†æ”¯çš„å¥½å¤„"></a>åˆ†æ”¯çš„å¥½å¤„</h3><ul><li><p>åŒæ—¶å¹¶è¡Œæ¨è¿›å¤šä¸ªåŠŸèƒ½å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p></li><li><p>å„ä¸ªåˆ†æ”¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸€ä¸ªåˆ†æ”¯å¼€å‘å¤±è´¥ï¼Œä¸ä¼šå¯¹å…¶ä»–åˆ†æ”¯æœ‰ä»»ä½•å½±å“ã€‚</p><p>å¤±è´¥çš„åˆ†æ”¯åˆ é™¤é‡æ–°å¼€å§‹å³å¯</p></li></ul><h3 id="åˆ†æ”¯çš„æ“ä½œ"><a href="#åˆ†æ”¯çš„æ“ä½œ" class="headerlink" title="åˆ†æ”¯çš„æ“ä½œ"></a>åˆ†æ”¯çš„æ“ä½œ</h3><table><thead><tr><th>å‘½ä»¤åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>git branch åˆ†æ”¯å</td><td>åˆ›å»ºåˆ†æ”¯</td></tr><tr><td>git branch -v</td><td>æŸ¥çœ‹åˆ†æ”¯</td></tr><tr><td>git checkout åˆ†æ”¯å</td><td>åˆ‡æ¢åˆ†æ”¯</td></tr><tr><td>git merge åˆ†æ”¯å</td><td>æŠŠæŒ‡å®šçš„åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Š</td></tr></tbody></table><h4 id="æŸ¥çœ‹åˆ†æ”¯"><a href="#æŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹åˆ†æ”¯"></a>æŸ¥çœ‹åˆ†æ”¯</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git branch -v</li></ul></li><li><p>2 ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230106231012648.png" alt="image-20230106231012648" style="zoom:80%;" /></p></li></ul><h4 id="åˆ›å»ºåˆ†æ”¯"><a href="#åˆ›å»ºåˆ†æ”¯" class="headerlink" title="åˆ›å»ºåˆ†æ”¯"></a>åˆ›å»ºåˆ†æ”¯</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git branch åˆ†æ”¯å</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230106231136981.png" alt="image-20230106231136981" style="zoom:80%;" /></p></li></ul><h4 id="åˆ‡æ¢åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ†æ”¯"></a>åˆ‡æ¢åˆ†æ”¯</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git checkout åˆ†æ”¯å</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230106231328075.png" alt="image-20230106231328075" style="zoom:80%;" /></p></li><li><p>3ï¼‰æŸ¥çœ‹ä¸¤ä¸ªåˆ†æ”¯ä¸Šçš„å†…å®¹ï¼Œä¼šæœ‰ä¸åŒ</p><p>â€‹ <img src="image-20230106231922976.png" alt="image-20230106231922976" style="zoom:80%;" /></p><p>â€‹ <img src="image-20230106231831338.png" alt="image-20230106231831338" style="zoom:80%;" /></p><p>â€‹ <img src="image-20230106231851823.png" alt="image-20230106231851823" style="zoom:80%;" /></p></li></ul><h4 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li><p>git merge åˆ†æ”¯å</p><p>ä½œç”¨ï¼šæŠŠæŒ‡å®šçš„åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</p></li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“ åœ¨ master åˆ†æ”¯ä¸Šåˆå¹¶ hot-fix åˆ†æ”¯</p><ul><li>æ³¨æ„ï¼šè¦å…ˆè½¬åˆ° master åˆ†æ”¯ä¸Šï¼ˆå› ä¸ºåªèƒ½åˆå¹¶åˆ°â€œå½“å‰åˆ†æ”¯â€ï¼‰</li></ul><p>â€‹ <img src="image-20230106232300453.png" alt="image-20230106232300453" style="zoom:80%;" /></p></li></ul><h4 id="äº§ç”Ÿå†²çª"><a href="#äº§ç”Ÿå†²çª" class="headerlink" title="äº§ç”Ÿå†²çª"></a>äº§ç”Ÿå†²çª</h4><ul><li><p>å†²çªäº§ç”Ÿçš„è¡¨ç°ï¼šåé¢çŠ¶æ€ä¸º MERGING</p> <img src="image-20230106233323077.png" alt="image-20230106233323077" style="zoom:80%;" /></li><li><p>å†²çªäº§ç”Ÿçš„åŸå› ï¼š</p><p>åˆå¹¶åˆ†æ”¯æ—¶ï¼Œä¸¤ä¸ªåˆ†æ”¯åœ¨ åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªä½ç½®æœ‰ä¸¤å¥—å®Œå…¨ä¸åŒçš„ä¿®æ”¹ã€‚</p><p>Git æ— æ³•æ›¿æˆ‘ä»¬å†³å®šä½¿ç”¨å“ªä¸€ä¸ªã€‚å¿…é¡» äººä¸ºå†³å®šæ–°ä»£ç å†…å®¹ã€‚</p>  <img src="image-20230106233531823.png" alt="image-20230106233531823" style="zoom:80%;" />  <img src="image-20230106233551977.png" alt="image-20230106233551977" style="zoom:80%;" /></li><li><p>æŸ¥çœ‹çŠ¶æ€ï¼ˆæ£€æµ‹åˆ°æœ‰æ–‡ä»¶æœ‰ä¸¤å¤„ä¿®æ”¹ï¼‰</p> <img src="image-20230106233703433.png" alt="image-20230106233703433" style="zoom:80%;" /></li></ul><h4 id="è§£å†³å†²çª"><a href="#è§£å†³å†²çª" class="headerlink" title="è§£å†³å†²çª"></a>è§£å†³å†²çª</h4><ul><li><p>1ï¼‰ç¼–è¾‘æœ‰å†²çªçš„æ–‡ä»¶ï¼Œåˆ é™¤ç‰¹æ®Šç¬¦å·ï¼Œå†³å®šè¦ä½¿ç”¨çš„å†…å®¹</p><ul><li><p>ç‰¹æ®Šç¬¦å·ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD <br>å½“å‰åˆ†æ”¯çš„ä»£ç  <br><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <br>åˆå¹¶è¿‡æ¥çš„ä»£ç  <br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; hot-fix<br></code></pre></td></tr></table></figure> <img src="image-20230106232938866.png" alt="image-20230106232938866" style="zoom:80%;" /></li><li><p>ä¿®æ”¹ä¸ºï¼š</p> <img src="image-20230106234005152.png" alt="image-20230106234005152" style="zoom:80%;" /></li></ul></li><li><p>2ï¼‰æ·»åŠ åˆ°æš‚å­˜åŒº</p> <img src="image-20230106234149553.png" alt="image-20230106234149553" style="zoom:80%;" /></li><li><p>3ï¼‰æ‰§è¡Œæäº¤ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶ä½¿ç”¨ git commit å‘½ä»¤æ—¶<strong>ä¸èƒ½å¸¦æ–‡ä»¶å</strong>ï¼‰</p> <img src="image-20230106234255320.png" alt="image-20230106234255320" style="zoom:80%;" /></li></ul><h3 id="åˆ›å»ºåˆ†æ”¯å’Œåˆ‡æ¢åˆ†æ”¯å›¾è§£"><a href="#åˆ›å»ºåˆ†æ”¯å’Œåˆ‡æ¢åˆ†æ”¯å›¾è§£" class="headerlink" title="åˆ›å»ºåˆ†æ”¯å’Œåˆ‡æ¢åˆ†æ”¯å›¾è§£"></a>åˆ›å»ºåˆ†æ”¯å’Œåˆ‡æ¢åˆ†æ”¯å›¾è§£</h3><img src="image-20230106234341029.png" alt="image-20230106234341029" style="zoom:80%;" /><ul><li>masterã€hot-fix å…¶å®éƒ½æ˜¯æŒ‡å‘å…·ä½“ç‰ˆæœ¬è®°å½•çš„æŒ‡é’ˆã€‚</li><li>å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ï¼Œå…¶å®æ˜¯ç”± HEADå†³å®šçš„ã€‚æ‰€ä»¥åˆ›å»ºåˆ†æ”¯çš„æœ¬è´¨å°±æ˜¯å¤šåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆã€‚</li><li>HEAD å¦‚æœæŒ‡å‘ masterï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±åœ¨ master åˆ†æ”¯ä¸Šã€‚</li><li>HEAD å¦‚æœæ‰§è¡Œ hotfixï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±åœ¨ hotfix åˆ†æ”¯ä¸Šã€‚</li><li>æ‰€ä»¥åˆ‡æ¢åˆ†æ”¯çš„æœ¬è´¨å°±æ˜¯ç§»åŠ¨ HEAD æŒ‡é’ˆã€‚</li></ul><h2 id="Git-å›¢é˜Ÿåä½œæœºåˆ¶"><a href="#Git-å›¢é˜Ÿåä½œæœºåˆ¶" class="headerlink" title="Git å›¢é˜Ÿåä½œæœºåˆ¶"></a>Git å›¢é˜Ÿåä½œæœºåˆ¶</h2><h3 id="å›¢é˜Ÿå†…åä½œ"><a href="#å›¢é˜Ÿå†…åä½œ" class="headerlink" title="å›¢é˜Ÿå†…åä½œ"></a>å›¢é˜Ÿå†…åä½œ</h3><img src="image-20230108153555307.png" alt="image-20230108153555307" style="zoom:80%;" /><h3 id="è·¨å›¢é˜Ÿåä½œ"><a href="#è·¨å›¢é˜Ÿåä½œ" class="headerlink" title="è·¨å›¢é˜Ÿåä½œ"></a>è·¨å›¢é˜Ÿåä½œ</h3><img src="image-20230108153626783.png" alt="image-20230108153626783" style="zoom:80%;" /><h2 id="GitHub-æ“ä½œ"><a href="#GitHub-æ“ä½œ" class="headerlink" title="GitHub æ“ä½œ"></a>GitHub æ“ä½œ</h2><h3 id="åˆ›å»ºè¿œç¨‹ä»“åº“"><a href="#åˆ›å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="åˆ›å»ºè¿œç¨‹ä»“åº“"></a>åˆ›å»ºè¿œç¨‹ä»“åº“</h3> <img src="image-20230108154506096.png" alt="image-20230108154506096" style="zoom:80%;" /> <img src="image-20230108154513978.png" alt="image-20230108154513978" style="zoom:80%;" /><h3 id="è¿œç¨‹ä»“åº“æ“ä½œ"><a href="#è¿œç¨‹ä»“åº“æ“ä½œ" class="headerlink" title="è¿œç¨‹ä»“åº“æ“ä½œ"></a>è¿œç¨‹ä»“åº“æ“ä½œ</h3><table><thead><tr><th>å‘½ä»¤åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>git remote -v</td><td>æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿œç¨‹åœ°å€åˆ«å</td></tr><tr><td>git remote add åˆ«å è¿œç¨‹åœ°å€</td><td>èµ·åˆ«å</td></tr><tr><td>git push åˆ«å åˆ†æ”¯</td><td>æ¨é€æœ¬åœ°åˆ†æ”¯ä¸Šçš„å†…å®¹åˆ°è¿œç¨‹ä»“åº“</td></tr><tr><td>git clone è¿œç¨‹åœ°å€</td><td>å°†è¿œç¨‹ä»“åº“çš„å†…å®¹å…‹éš†åˆ°æœ¬åœ°</td></tr><tr><td>git pull è¿œç¨‹åº“åœ°å€åˆ«å è¿œç¨‹åˆ†æ”¯å</td><td>å°†è¿œç¨‹ä»“åº“å¯¹äºåˆ†æ”¯æœ€æ–°å†…å®¹æ‹‰ä¸‹æ¥å<br/>ä¸å½“å‰æœ¬åœ°åˆ†æ”¯ç›´æ¥åˆå¹¶</td></tr></tbody></table><h4 id="åˆ›å»ºè¿œç¨‹ä»“åº“åˆ«å"><a href="#åˆ›å»ºè¿œç¨‹ä»“åº“åˆ«å" class="headerlink" title="åˆ›å»ºè¿œç¨‹ä»“åº“åˆ«å"></a>åˆ›å»ºè¿œç¨‹ä»“åº“åˆ«å</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git remote -v        æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿œç¨‹åœ°å€åˆ«å</li><li>git remote add åˆ«å è¿œç¨‹åœ°å€</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230108155153542.png" alt="image-20230108155153542" style="zoom:80%;" /></p></li></ul><h4 id="æ¨é€åˆ†æ”¯æ—¶æŠ¥é”™"><a href="#æ¨é€åˆ†æ”¯æ—¶æŠ¥é”™" class="headerlink" title="æ¨é€åˆ†æ”¯æ—¶æŠ¥é”™"></a>æ¨é€åˆ†æ”¯æ—¶æŠ¥é”™</h4><ul><li><p>æŠ¥é”™æç¤ºï¼š</p>  <img src="image-20230108160353701.png" alt="image-20230108160353701" style="zoom:80%;" /></li><li><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li><p>äº§ç”ŸåŸå› ï¼šä¸€èˆ¬æ˜¯è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨çš„SSLè¯ä¹¦æ²¡æœ‰ç»è¿‡ç¬¬ä¸‰æ–¹æœºæ„çš„ç­¾ç½²ï¼Œæ‰€ä»¥æ‰æŠ¥é”™</p></li><li><p>æ–¹æ³•ä¸€ï¼šè§£é™¤ SSL éªŒè¯</p><p><code>git config --global http.sslVerify &quot;false&quot;</code></p></li><li><p>æ–¹æ¡ˆäºŒï¼šå–æ¶ˆä»£ç†</p><p><code>git config --global --unset http.proxy</code><br><code>git config --global --unset https.proxy </code></p></li></ul></li><li><p>æŠ¥é”™æç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs git">$ git push -u origin master<br>fatal: &#x27;git@github.com/zejun_web&#x27; does not appear to be a git repository<br>fatal: Could not read from remote repository.<br> <br>Please make sure you have the correct access rights and the repository exists.<br></code></pre></td></tr></table></figure></li><li><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li><p><a href="https://blog.csdn.net/qq_42412061/article/details/122535952">git pushå¤±è´¥ï¼ŒæŠ¥é”™fatal: does not appear to a git repository â€¦ â€¦</a></p></li><li><p>å…ˆæ£€æŸ¥ä¸€ä¸‹git remote -v</p><p> <img src="/2022/12/28/GitNote/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAfmhlYXJ05bCG5b-D5q-U5b-D,size_13,color_FFFFFF,t_70,g_se,x_16.png" alt="img"></p></li><li><p>å‘ç°æ˜¯ remote å‘½ä»¤é”™äº†</p></li><li><p>å…ˆ remove æ‰ï¼Œå†æ·»åŠ å†è¿œç¨‹çš„ origin</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs git">git remote rm origin<br></code></pre></td></tr></table></figure><p> <img src="/2022/12/28/GitNote/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAfmhlYXJ05bCG5b-D5q-U5b-D,size_8,color_FFFFFF,t_70,g_se,x_16.png" alt="img"></p></li><li><p>å†æ¬¡ä½¿ç”¨ git remote -v æŸ¥çœ‹ï¼Œå‘ç°å·²ç»æ²¡æœ‰ origin äº†</p><p> <img src="/2022/12/28/GitNote/image-20230523233921484.png" alt="image-20230523233921484"></p></li><li><p>å†æ­£ç¡®è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs git">git remote add origin https://gitee.com/shenlinlang/personal.git<br></code></pre></td></tr></table></figure></li><li><p>å† git push å°±å¯ä»¥äº†</p><p> <img src="/2022/12/28/GitNote/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAfmhlYXJ05bCG5b-D5q-U5b-D,size_12,color_FFFFFF,t_70,g_se,x_16.png" alt="img"></p></li></ul></li></ul><h4 id="æ¨é€æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“"><a href="#æ¨é€æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æ¨é€æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“"></a>æ¨é€æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git push åˆ«å <strong>åˆ†æ”¯</strong></li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230108160902941.png" alt="image-20230108160902941" style="zoom:80%;" /></p></li></ul><h4 id="æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“"><a href="#æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“" class="headerlink" title="æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“"></a>æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“</h4><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git pull è¿œç¨‹åœ°å€ åˆ†æ”¯</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230108161731212.png" alt="image-20230108161731212" style="zoom:80%;" /></p><p>â€‹ <img src="image-20230108161836897.png" alt="image-20230108161836897" style="zoom:80%;" /></p></li></ul><h4 id="å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°"><a href="#å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°" class="headerlink" title="å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°"></a>å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°</h4><p><strong>æ€»ç»“ï¼š</strong>clone ä¼šåšå¦‚ä¸‹æ“ä½œï¼š 1ã€æ‹‰å–ä»£ç ã€‚ 2ã€åˆå§‹åŒ–æœ¬åœ°ä»“åº“ã€‚ 3ã€åˆ›å»ºåˆ«å</p><ul><li><p>1ï¼‰åŸºæœ¬è¯­æ³•</p><ul><li>git clone è¿œç¨‹åœ°å€</li></ul></li><li><p>2ï¼‰æ¡ˆä¾‹å®æ“</p><p>â€‹ <img src="image-20230108162421380.png" alt="image-20230108162421380" style="zoom:80%;" /></p><p>â€‹ <img src="image-20230108162526985.png" alt="image-20230108162526985" style="zoom:80%;" /></p></li></ul><h4 id="é‚€è¯·åŠ å…¥å›¢é˜Ÿ"><a href="#é‚€è¯·åŠ å…¥å›¢é˜Ÿ" class="headerlink" title="é‚€è¯·åŠ å…¥å›¢é˜Ÿ"></a>é‚€è¯·åŠ å…¥å›¢é˜Ÿ</h4><ul><li><p>1ï¼‰é€‰æ‹©é‚€è¯·åˆä½œè€…</p><p>â€‹ <img src="image-20230108163215323.png" alt="image-20230108163215323" style="zoom: 50%;" /></p></li><li><p>2ï¼‰å¡«å…¥æƒ³è¦åˆä½œçš„äºº</p><p>â€‹ <img src="image-20230108163336295.png" alt="image-20230108163336295" style="zoom:50%;" /></p></li><li><p>3ï¼‰å¤ åˆ¶ åœ° å€ å¹¶ é€š è¿‡ å¾® ä¿¡ é’‰ é’‰ ç­‰ æ–¹ å¼ å‘ é€ ç»™ è¯¥ ç”¨ æˆ· ï¼Œ å¤ åˆ¶ å†… å®¹ å¦‚ ä¸‹ ï¼š<br><a href="https://github.com/atguiguyueyue/git-shTest/invitations">https://github.com/atguiguyueyue/git-shTest/invitations</a></p><p>â€‹ <img src="image-20230108163355955.png" alt="image-20230108163355955" style="zoom:50%;" /></p></li><li><p>4ï¼‰åœ¨ atguigulinghuchong è¿™ä¸ªè´¦å·ä¸­çš„åœ°å€æ å¤åˆ¶æ”¶åˆ°é‚€è¯· çš„ é“¾æ¥ï¼Œç‚¹å‡»æ¥å—é‚€è¯·</p><p>â€‹ <img src="image-20230108163427200.png" alt="image-20230108163427200" style="zoom:50%;" /></p></li><li><p>5ï¼‰åœ¨æˆåŠŸä¹‹åå¯ä»¥åœ¨ atguigulinghuchong è¿™ä¸ªè´¦å·ä¸Šçœ‹åˆ° git-Test çš„è¿œç¨‹ä»“åº“</p><p>â€‹ <img src="image-20230108163501417.png" alt="image-20230108163501417" style="zoom:50%;" /></p></li><li><p>6ï¼‰ä»¤ç‹å†²å¯ä»¥ä¿®æ”¹å†…å®¹å¹¶ push åˆ°è¿œç¨‹ä»“åº“</p></li></ul><h3 id="è·¨å›¢é˜Ÿåä½œ-1"><a href="#è·¨å›¢é˜Ÿåä½œ-1" class="headerlink" title="è·¨å›¢é˜Ÿåä½œ"></a>è·¨å›¢é˜Ÿåä½œ</h3><ul><li><p>1ï¼‰å°†è¿œç¨‹ä»“åº“çš„åœ°å€å¤åˆ¶å‘ç»™é‚€è¯·è·¨å›¢é˜Ÿåä½œçš„äººï¼Œæ¯”å¦‚ä¸œæ–¹ä¸è´¥</p><p>â€‹ <img src="image-20230108163702170.png" alt="image-20230108163702170" style="zoom:50%;" /></p></li><li><p>2ï¼‰åœ¨ä¸œæ–¹ä¸è´¥çš„ GitHub è´¦å·é‡Œçš„åœ°å€æ å¤åˆ¶æ”¶åˆ°çš„é“¾æ¥ï¼Œç„¶åç‚¹å‡» Fork å°†é¡¹ç›®å‰åˆ°è‡ªå·±çš„æœ¬åœ°ä»“åº“</p><p>â€‹ <img src="image-20230108163729677.png" alt="image-20230108163729677" style="zoom:50%;" /></p><p>â€‹å‰æˆåŠŸåå¯ä»¥çœ‹åˆ°å½“å‰ä»“åº“ä¿¡æ¯</p><p>â€‹ <img src="image-20230108163758564.png" alt="image-20230108163758564" style="zoom:50%;" /></p></li><li><p>3ï¼‰ä¸œæ–¹ä¸è´¥å°±å¯ä»¥åœ¨çº¿ç¼–è¾‘å‰å–è¿‡æ¥çš„æ–‡ä»¶</p><p>â€‹ <img src="image-20230108163823073.png" alt="image-20230108163823073" style="zoom:50%;" /></p><p>â€‹ <img src="image-20230108163832604.png" alt="image-20230108163832604" style="zoom:50%;" /></p></li><li><p>4ï¼‰ç¼–è¾‘å®Œæ¯•åï¼Œå¡«å†™æè¿°ä¿¡æ¯å¹¶ç‚¹å‡»å·¦ä¸‹è§’ç»¿è‰²æŒ‰é’®æäº¤</p><p>â€‹ <img src="image-20230108163850670.png" alt="image-20230108163850670" style="zoom:50%;" /></p></li><li><p>5ï¼‰æ¥ä¸‹æ¥ç‚¹å‡»ä¸Šæ–¹çš„ Pull è¯·æ±‚ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„è¯·æ±‚</p><p>â€‹ <img src="image-20230108163924035.png" alt="image-20230108163924035" style="zoom:50%;" /></p><p>â€‹ <img src="image-20230108163933589.png" alt="image-20230108163933589" style="zoom:50%;" /></p> <img src="image-20230108163944931.png" alt="image-20230108163944931" style="zoom:50%;" /></li><li><p>6ï¼‰å›åˆ°å²³å²³ GitHub è´¦å·å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª Pull request è¯·æ±‚</p><p>â€‹ <img src="image-20230108164008099.png" alt="image-20230108164008099" style="zoom:50%;" /></p><p>â€‹<img src="image-20230108164017489.png" alt="image-20230108164017489" style="zoom: 40%;" /></p><p>â€‹ è¿›å…¥åˆ°èŠå¤©å®¤ï¼Œå¯ä»¥è®¨è®ºä»£ç ç›¸å…³å†…å®¹</p><p>â€‹ <img src="image-20230108164108291.png" alt="image-20230108164108291" style="zoom:50%;" /></p> <img src="image-20230108164147173.png" alt="image-20230108164147173" style="zoom:50%;" /></li><li><p>7ï¼‰å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç‚¹å‡» Merge pull reque åˆå¹¶ä»£ç </p><p>â€‹ <img src="image-20230108164220330.png" alt="image-20230108164220330" style="zoom:50%;" /></p><p>â€‹ <img src="image-20230108164234462.png" alt="image-20230108164234462" style="zoom:50%;" /></p></li></ul><h3 id="SSH-å…å¯†ç™»å½•"><a href="#SSH-å…å¯†ç™»å½•" class="headerlink" title="SSH å…å¯†ç™»å½•"></a>SSH å…å¯†ç™»å½•</h3><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿œç¨‹ä»“åº“ä¸­è¿˜æœ‰ä¸€ä¸ª SSH çš„åœ°å€ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ SSH è¿›è¡Œè®¿é—®ã€‚</p> <img src="image-20230108165403972.png" alt="image-20230108165403972" style="zoom:67%;" /><p>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">--è¿›å…¥å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•<br>Layne@LAPTOP-Layne MINGW64 <span class="hljs-string">/d/Git-Space/SH0720</span> <span class="hljs-params">(master)</span><br>$ <span class="hljs-keyword">cd</span><br>--åˆ é™¤<span class="hljs-string">.ssh</span> ç›®å½•<br>Layne@LAPTOP-Layne MINGW64 ~<br>$ rm -rvf <span class="hljs-string">.ssh</span><br>removed &#x27;<span class="hljs-string">.ssh/known_hosts</span>&#x27;<br>removed directory &#x27;<span class="hljs-string">.ssh</span>&#x27;<br>--è¿è¡Œå‘½ä»¤ç”Ÿæˆ<span class="hljs-string">.ssh</span> ç§˜é’¥ç›®å½•[æ³¨æ„ï¼šè¿™é‡Œ-C è¿™ä¸ªå‚æ•°æ˜¯å¤§å†™çš„ C]<br>Layne@LAPTOP-Layne MINGW64 ~<br>$ ssh-keygen -t rsa -C atguiguyueyue@aliyun.com<br>Generating public/private rsa key pair.<br>Enter file in which to save the key <span class="hljs-params">(/c/Users/Layne/.ssh/id_rsa)</span>:<br>Created directory &#x27;<span class="hljs-string">/c/Users/Layne/.ssh</span>&#x27;.<br>Enter passphrase <span class="hljs-params">(empty for no passphrase)</span>:<br>Enter same passphrase again:<br>Your identification has been saved in <span class="hljs-string">/c/Users/Layne/.ssh/id_rsa.</span><br>Your public key has been saved in <span class="hljs-string">/c/Users/Layne/.ssh/id_rsa.pub.</span><br>The key fingerprint is:<br>SHA256<span class="hljs-function">:7CPfRLITKcYDhaqpEDeok7Atvwh2reRmpxxOC6dkY44</span><br>atguiguyueyue@aliyun.com<br>The key&#x27;s randomart image is:<br>+<span class="hljs-params">---</span>[RSA 2048]<span class="hljs-params">----</span>+<br>| <span class="hljs-string">..</span> |<br>| <span class="hljs-string">..</span> |<br>| . <span class="hljs-string">..</span> |<br>|+ + o . . |<br>|oO . = S . |<br>|X . <span class="hljs-string">..</span> + = |<br>|+@ * <span class="hljs-string">..</span> = . |<br>|X.&amp;o+. o = |<br>|Eo+Oo . . |<br>+<span class="hljs-params">----</span>[SHA256]<span class="hljs-params">-----</span>+<br>--è¿›å…¥<span class="hljs-string">.ssh</span> ç›®å½•æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨<br>Layne@LAPTOP-Layne MINGW64 ~<br>$ <span class="hljs-keyword">cd</span> <span class="hljs-string">.ssh</span><br>Layne@LAPTOP-Layne MINGW64 ~<span class="hljs-string">/.ssh</span><br>$ ll -a<br>total 21<br>drwxr-xr-x 1 Layne 197609 0 11 æœˆ 25 19<span class="hljs-function">:27</span> <span class="hljs-string">./</span><br>drwxr-xr-x 1 Layne 197609 0 11 æœˆ 25 19<span class="hljs-function">:27</span> <span class="hljs-string">../</span><br>-rw-r<span class="hljs-params">--r--</span> 1 Layne 197609 1679 11 æœˆ 25 19<span class="hljs-function">:27</span> id_rsa<br>-rw-r<span class="hljs-params">--r--</span> 1 Layne 197609 406 11 æœˆ 25 19<span class="hljs-function">:27</span> id_rsa.pub<br>--æŸ¥çœ‹ id_rsa.pub æ–‡ä»¶å†…å®¹<br>Layne@LAPTOP-Layne MINGW64 ~<span class="hljs-string">/.ssh</span><br>$ cat id_rsa.pub<br>ssh-rsa<br>AAAAB3NzaC1yc2EAAAADAQABAAABAQDRXRsk9Ohtg1AXLltsuNRAGBsx3ypE1O1Rkdzpm<br>l1woa6y6G62lZri3XtCH0F7GQvnMvQtPISJFXXWo+jFHZmqYQa/6kOIMv2sszcoj2Qtwl<br>lGXTPn/4T2h/cHjSHfc+ks8OYP7OWOOefpOCbYY/7DWYrl89k7nQlfd+A1FV/vQmcsa1L<br>P5ihqjpjms2CoUUen8kZHbjwHBAHQHWRE+Vc371MG/dwINvCi8n7ibI86o2k0dW0+8SL+<br>svPV/Y0G9m+RAqgec8b9U6DcSSAMH5uq4UWfnAcUNagb/aJQLytrH0pLa8nMv3XdSGNNo<br>AGBFeW2+K81XrmkP27FrLI6lDef atguiguyueyue@aliyun.com<br></code></pre></td></tr></table></figure><p>å¤åˆ¶ id_rsa.pub æ–‡ä»¶å†…å®¹ï¼Œç™»å½• GitHubï¼Œç‚¹å‡»ç”¨æˆ·å¤´åƒâ†’Settingsâ†’SSH and GPG keys</p> <img src="image-20230108165758876.png" alt="image-20230108165758876" style="zoom:50%;" /> <img src="image-20230108165806301.png" alt="image-20230108165806301" style="zoom:50%;" /> <img src="image-20230108165816594.png" alt="image-20230108165816594" style="zoom:50%;" /><p>æ¥ä¸‹æ¥å†å¾€è¿œç¨‹ä»“åº“ push ä¸œè¥¿çš„æ—¶å€™ä½¿ç”¨ SSH è¿æ¥å°±ä¸éœ€è¦ç™»å½•äº†</p><h2 id="IDEA-é›†æˆ-Git"><a href="#IDEA-é›†æˆ-Git" class="headerlink" title="IDEA é›†æˆ Git"></a>IDEA é›†æˆ Git</h2><h3 id="é…ç½®-Git-å¿½ç•¥æ–‡ä»¶"><a href="#é…ç½®-Git-å¿½ç•¥æ–‡ä»¶" class="headerlink" title="é…ç½® Git å¿½ç•¥æ–‡ä»¶"></a>é…ç½® Git å¿½ç•¥æ–‡ä»¶</h3><ul><li><p>ä¸ºä»€ä¹ˆè¦å¿½ç•¥å®ƒä»¬</p><p>ä¸é¡¹ç›®çš„å®é™…åŠŸèƒ½æ— å…³ï¼Œä¸å‚ä¸æœåŠ¡å™¨ä¸Šéƒ¨ç½²è¿è¡Œã€‚å¿½ç•¥æ‰å®ƒä»¬èƒ½å¤Ÿå±è”½ IDE å·¥å…·ä¹‹é—´çš„å·®å¼‚</p></li><li><p>æ€ä¹ˆå¿½ç•¥</p><ul><li><p>1ï¼‰åˆ›å»ºå¿½ç•¥è§„åˆ™æ–‡ä»¶ <strong>xxxx.ignore</strong>ï¼ˆå‰ç¼€åéšä¾¿èµ·ï¼Œå»ºè®®æ˜¯ git.ignoreï¼‰</p><p>â€‹è¿™ä¸ªæ–‡ä»¶çš„å­˜æ”¾ä½ç½®åŸåˆ™ä¸Šåœ¨å“ªé‡Œéƒ½å¯ä»¥ï¼Œä¸ºäº†ä¾¿äºè®©~&#x2F;.gitconfig æ–‡ä»¶å¼•ç”¨ï¼Œå»ºè®®ä¹Ÿæ”¾åœ¨ç”¨æˆ·å®¶ç›®å½•ä¸‹</p><p>git.ignore æ–‡ä»¶æ¨¡ç‰ˆå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-comment"># Compiled class file</span><br>*<span class="hljs-string">.class</span><br><br><span class="hljs-comment"># Log file</span><br>*<span class="hljs-string">.log</span><br><br><span class="hljs-comment"># BlueJ files</span><br>*<span class="hljs-string">.ctxt</span><br><br><span class="hljs-comment"># Mobile Tools for Java (J2ME)</span><br><span class="hljs-string">.mtj.tmp/</span><br><br><span class="hljs-comment"># Package Files #</span><br>*<span class="hljs-string">.jar</span><br>*<span class="hljs-string">.war</span><br>*<span class="hljs-string">.nar</span><br>*<span class="hljs-string">.ear</span><br>*<span class="hljs-string">.zip</span><br>*<span class="hljs-string">.tar.gz</span><br>*<span class="hljs-string">.rar</span><br><br><span class="hljs-comment"># virtual machine crash logs, see</span><br>http:<span class="hljs-string">//www.java.com/en/download/help/error_hotspot.xml</span><br>hs_err_pid*<br><br><span class="hljs-string">.classpath</span><br><span class="hljs-string">.project</span><br><span class="hljs-string">.settings</span><br>target<br><span class="hljs-string">.idea</span><br>*<span class="hljs-string">.iml</span><br></code></pre></td></tr></table></figure></li><li><p>2ï¼‰åœ¨.gitconfig æ–‡ä»¶ä¸­å¼•ç”¨å¿½ç•¥é…ç½®æ–‡ä»¶ï¼ˆæ­¤æ–‡ä»¶åœ¨ Windows çš„å®¶ç›®å½•ä¸­ï¼‰</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[user]</span><br><span class="hljs-attr">name</span> = Layne<br><span class="hljs-attr">email</span> = Layne@atguigu.com<br><span class="hljs-section">[core]</span><br><span class="hljs-attr">excludesfile</span> = C:/Users/asus/git.ignore<br><span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œè¦ä½¿ç”¨â€œæ­£æ–œçº¿ï¼ˆ/ï¼‰â€ï¼Œä¸è¦ä½¿ç”¨â€œåæ–œçº¿ï¼ˆ\ï¼‰â€</span><br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="å®šä½-Git-ç¨‹åº"><a href="#å®šä½-Git-ç¨‹åº" class="headerlink" title="å®šä½ Git ç¨‹åº"></a>å®šä½ Git ç¨‹åº</h3> <img src="image-20230108192111793.png" alt="image-20230108192111793" style="zoom:50%;" /><h3 id="åˆå§‹åŒ–æœ¬åœ°åº“-1"><a href="#åˆå§‹åŒ–æœ¬åœ°åº“-1" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ°åº“"></a>åˆå§‹åŒ–æœ¬åœ°åº“</h3> <img src="image-20230108192131208.png" alt="image-20230108192131208" style="zoom:50%;" /> <img src="image-20230108192139363.png" alt="image-20230108192139363" style="zoom:50%;" /><h3 id="æ·»åŠ åˆ°æš‚å­˜åŒº"><a href="#æ·»åŠ åˆ°æš‚å­˜åŒº" class="headerlink" title="æ·»åŠ åˆ°æš‚å­˜åŒº"></a>æ·»åŠ åˆ°æš‚å­˜åŒº</h3><p>å³é”®ç‚¹å‡»é¡¹ç›®é€‰æ‹© Git -&gt; Add å°†é¡¹ç›®æ·»åŠ åˆ°æš‚å­˜åŒºã€‚</p> <img src="image-20230108192200136.png" alt="image-20230108192200136" style="zoom:50%;" /><h3 id="æäº¤åˆ°æœ¬åœ°åº“"><a href="#æäº¤åˆ°æœ¬åœ°åº“" class="headerlink" title="æäº¤åˆ°æœ¬åœ°åº“"></a>æäº¤åˆ°æœ¬åœ°åº“</h3> <img src="image-20230108192216156.png" alt="image-20230108192216156" style="zoom:50%;" /> <img src="image-20230108192223319.png" alt="image-20230108192223319" style="zoom:50%;" /><h3 id="åˆ‡æ¢ç‰ˆæœ¬"><a href="#åˆ‡æ¢ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢ç‰ˆæœ¬"></a>åˆ‡æ¢ç‰ˆæœ¬</h3><p>åœ¨ IDEA çš„å·¦ä¸‹è§’ï¼Œç‚¹å‡» Version Controlï¼Œç„¶åç‚¹å‡» Log æŸ¥çœ‹ç‰ˆæœ¬</p> <img src="image-20230108192239487.png" alt="image-20230108192239487" style="zoom:50%;" /><p>å³é”®é€‰æ‹©è¦åˆ‡æ¢çš„ç‰ˆæœ¬ï¼Œç„¶ååœ¨èœå•é‡Œç‚¹å‡» Checkout Revisionã€‚</p> <img src="image-20230108192257064.png" alt="image-20230108192257064" style="zoom:50%;" /><h3 id="åˆ›å»ºåˆ†æ”¯-1"><a href="#åˆ›å»ºåˆ†æ”¯-1" class="headerlink" title="åˆ›å»ºåˆ†æ”¯"></a>åˆ›å»ºåˆ†æ”¯</h3><p>å³é”®é¡¹ç›®åç§°ï¼Œé€‰æ‹© Gitï¼Œåœ¨ Repository é‡Œé¢ï¼Œç‚¹å‡» Branches æŒ‰é’®ã€‚</p> <img src="image-20230108192316101.png" alt="image-20230108192316101" style="zoom:50%;" /><p>æˆ–è€…ç›´æ¥å³ä¸‹è§’</p> <img src="image-20230108192753427.png" alt="image-20230108192753427" style="zoom:50%;" /><p>åœ¨å¼¹å‡ºçš„ Git Branches æ¡†é‡Œï¼Œç‚¹å‡» New Branch æŒ‰é’®ã€‚</p> <img src="image-20230108192330344.png" alt="image-20230108192330344" style="zoom:50%;" /><p>å¡«å†™åˆ†æ”¯åç§°ï¼Œåˆ›å»º hot-fix åˆ†æ”¯ã€‚</p> <img src="image-20230108192340638.png" alt="image-20230108192340638" style="zoom:50%;" /><p>ç„¶åå† IDEA çš„å³ä¸‹è§’çœ‹åˆ° hot-fixï¼Œè¯´æ˜åˆ†æ”¯åˆ›å»ºæˆåŠŸï¼Œå¹¶ä¸”å½“å‰å·²ç»åˆ‡æ¢æˆ hot-fix åˆ†æ”¯</p> <img src="image-20230108192355689.png" alt="image-20230108192355689" style="zoom:45%;" /><h3 id="åˆ‡æ¢åˆ†æ”¯-1"><a href="#åˆ‡æ¢åˆ†æ”¯-1" class="headerlink" title="åˆ‡æ¢åˆ†æ”¯"></a>åˆ‡æ¢åˆ†æ”¯</h3><p>åœ¨ IDEA çª—å£çš„å³ä¸‹è§’ï¼Œåˆ‡æ¢åˆ° master åˆ†æ”¯ã€‚</p> <img src="image-20230108192811004.png" alt="image-20230108192811004" style="zoom:50%;" /><p>ç„¶ååœ¨ IDEA çª—å£çš„å³ä¸‹è§’çœ‹åˆ°äº† masterï¼Œè¯´æ˜ master åˆ†æ”¯åˆ‡æ¢æˆåŠŸã€‚</p> <img src="image-20230108192822615.png" alt="image-20230108192822615" style="zoom:45%;" /><h3 id="åˆå¹¶åˆ†æ”¯-1"><a href="#åˆå¹¶åˆ†æ”¯-1" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h3><p>åœ¨ IDEA çª—å£çš„å³ä¸‹è§’ï¼Œå°† hot-fix åˆ†æ”¯åˆå¹¶åˆ°å½“å‰ master åˆ†æ”¯ã€‚</p> <img src="image-20230108193358167.png" alt="image-20230108193358167" style="zoom:50%;" /><p>å¦‚æœä»£ç æ²¡æœ‰å†²çªï¼Œåˆ†æ”¯ç›´æ¥åˆå¹¶æˆåŠŸï¼Œåˆ†æ”¯åˆå¹¶æˆåŠŸä»¥åï¼Œä»£ç è‡ªåŠ¨æäº¤ï¼Œæ— éœ€æ‰‹åŠ¨æäº¤æœ¬åœ°åº“</p> <img src="image-20230108193430095.png" alt="image-20230108193430095" style="zoom:50%;" /><h3 id="è§£å†³å†²çª-1"><a href="#è§£å†³å†²çª-1" class="headerlink" title="è§£å†³å†²çª"></a>è§£å†³å†²çª</h3><ul><li><p>å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœ master åˆ†æ”¯å’Œ hot-fix åˆ†æ”¯éƒ½ä¿®æ”¹äº†ä»£ç ï¼Œåœ¨åˆå¹¶åˆ†æ”¯çš„æ—¶å€™å°±ä¼šå‘ç”Ÿå†²çªã€‚</p> <img src="image-20230108193455614.png" alt="image-20230108193455614" style="zoom:50%;" /> <img src="image-20230108193508540.png" alt="image-20230108193508540" style="zoom:50%;" /></li><li><p>æˆ‘ä»¬ç°åœ¨ç«™åœ¨ master åˆ†æ”¯ä¸Šåˆå¹¶ hot-fix åˆ†æ”¯ï¼Œå°±ä¼šå‘ç”Ÿä»£ç å†²çªã€‚</p>  <img src="image-20230108193530533.png" alt="image-20230108193530533" style="zoom:50%;" /></li><li><p>ç‚¹å‡» Conflicts æ¡†é‡Œçš„ Merge æŒ‰é’®ï¼Œè¿›è¡Œæ‰‹åŠ¨åˆå¹¶ä»£ç ã€‚</p> <img src="image-20230108193555436.png" alt="image-20230108193555436" style="zoom:65%;" /></li><li><p>æ‰‹åŠ¨åˆå¹¶å®Œä»£ç ä»¥åï¼Œç‚¹å‡»å³ä¸‹è§’çš„ Apply æŒ‰é’®ã€‚</p> <img src="image-20230108193612129.png" alt="image-20230108193612129" style="zoom: 65%;" /></li><li><p>ä»£ç å†²çªè§£å†³ï¼Œè‡ªåŠ¨æäº¤æœ¬åœ°åº“ã€‚</p> <img src="image-20230108193622111.png" alt="image-20230108193622111" style="zoom:50%;" /></li></ul><h2 id="IDEA-é›†æˆ-GitHub"><a href="#IDEA-é›†æˆ-GitHub" class="headerlink" title="IDEA é›†æˆ GitHub"></a>IDEA é›†æˆ GitHub</h2><h3 id="è®¾ç½®-GitHub-è´¦å·"><a href="#è®¾ç½®-GitHub-è´¦å·" class="headerlink" title="è®¾ç½® GitHub è´¦å·"></a>è®¾ç½® GitHub è´¦å·</h3> <img src="image-20230108194829256.png" alt="image-20230108194829256" style="zoom:50%;" /> <img src="image-20230108194853347.png" alt="image-20230108194853347" style="zoom: 67%;" /><p> ç„¶åå» GitHub è´¦æˆ·ä¸Šè®¾ç½® tokenã€‚</p> <img src="image-20230108194955191.png" alt="image-20230108194955191" style="zoom:50%;" /> <img src="image-20230108195003135.png" alt="image-20230108195003135" style="zoom: 67%;" /> <img src="image-20230108195018754.png" alt="image-20230108195018754" style="zoom: 67%;" /> <img src="image-20230108195029765.png" alt="image-20230108195029765" style="zoom: 67%;" /><p>ç‚¹å‡»ç”Ÿæˆ tokenã€‚</p> <img src="image-20230108195047303.png" alt="image-20230108195047303" style="zoom:80%;" /><p>å¤åˆ¶çº¢æ¡†ä¸­çš„å­—ç¬¦ä¸²åˆ° idea ä¸­ã€‚</p> <img src="image-20230108195100977.png" alt="image-20230108195100977" style="zoom: 67%;" /><p>ç‚¹å‡»ç™»å½•ã€‚</p> <img src="image-20230108195118679.png" alt="image-20230108195118679" style="zoom:80%;" /><h3 id="åˆ†äº«å·¥ç¨‹åˆ°-GitHub"><a href="#åˆ†äº«å·¥ç¨‹åˆ°-GitHub" class="headerlink" title="åˆ†äº«å·¥ç¨‹åˆ° GitHub"></a>åˆ†äº«å·¥ç¨‹åˆ° GitHub</h3> <img src="image-20230108195553914.png" alt="image-20230108195553914" style="zoom: 67%;" /> <img src="image-20230108195603805.png" alt="image-20230108195603805" style="zoom:80%;" /> <img src="image-20230108195614222.png" alt="image-20230108195614222" style="zoom:80%;" /><p>æ¥åˆ° GitHub ä¸­å‘ç°å·²ç»å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº† gitTest çš„è¿œç¨‹ä»“åº“</p> <img src="image-20230108195626793.png" alt="image-20230108195626793" style="zoom:80%;" /><h3 id="push-æ¨é€æœ¬åœ°åº“åˆ°è¿œç¨‹åº“"><a href="#push-æ¨é€æœ¬åœ°åº“åˆ°è¿œç¨‹åº“" class="headerlink" title="push æ¨é€æœ¬åœ°åº“åˆ°è¿œç¨‹åº“"></a>push æ¨é€æœ¬åœ°åº“åˆ°è¿œç¨‹åº“</h3><p><strong>æ³¨æ„ï¼š</strong>push æ˜¯å°†æœ¬åœ°åº“ä»£ç æ¨é€åˆ°è¿œç¨‹åº“ï¼Œå¦‚æœæœ¬åœ°åº“ä»£ç è·Ÿè¿œç¨‹åº“ä»£ç ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œpush çš„æ“ä½œæ˜¯ä¼šè¢«æ‹’ç»çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æƒ³ push æˆåŠŸï¼Œä¸€å®šè¦ä¿è¯æœ¬åœ°åº“çš„ç‰ˆæœ¬è¦æ¯”è¿œç¨‹åº“çš„ç‰ˆæœ¬é«˜ï¼å› æ­¤ä¸€ä¸ªæˆç†Ÿçš„ç¨‹åºå‘˜åœ¨åŠ¨æ‰‹æ”¹æœ¬åœ°ä»£ç ä¹‹å‰ï¼Œä¸€å®šä¼šå…ˆæ£€æŸ¥ä¸‹è¿œç¨‹åº“è·Ÿæœ¬åœ°ä»£ç çš„åŒºåˆ«ï¼å¦‚æœæœ¬åœ°çš„ä»£ç ç‰ˆæœ¬å·²ç»è½åï¼Œåˆ‡è®°è¦å…ˆ pull æ‹‰å–ä¸€ä¸‹è¿œç¨‹åº“çš„ä»£ç ï¼Œå°†æœ¬åœ°ä»£ç æ›´æ–°åˆ°æœ€æ–°ä»¥åï¼Œç„¶åå†ä¿®æ”¹ï¼Œæäº¤ï¼Œæ¨é€ï¼</p><p>å³é”®ç‚¹å‡»é¡¹ç›®ï¼Œå¯ä»¥å°†å½“å‰åˆ†æ”¯çš„å†…å®¹ push åˆ° GitHub çš„è¿œç¨‹ä»“åº“ä¸­ã€‚</p> <img src="image-20230108200506454.png" alt="image-20230108200506454" style="zoom: 60%;" /><h3 id="pull-æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“"><a href="#pull-æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“" class="headerlink" title="pull æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“"></a>pull æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“</h3><p><strong>æ³¨æ„ï¼š</strong>pull æ˜¯æ‹‰å–è¿œç«¯ä»“åº“ä»£ç åˆ°æœ¬åœ°ï¼Œå¦‚æœè¿œç¨‹åº“ä»£ç å’Œæœ¬åœ°åº“ä»£ç ä¸ä¸€è‡´ï¼Œä¼šè‡ªåŠ¨åˆå¹¶ï¼Œå¦‚æœè‡ªåŠ¨åˆå¹¶å¤±è´¥ï¼Œè¿˜ä¼šæ¶‰åŠåˆ°æ‰‹åŠ¨è§£å†³å†²çªçš„é—®é¢˜ã€‚</p><p>å³é”®ç‚¹å‡»é¡¹ç›®ï¼Œå¯ä»¥å°†è¿œç¨‹ä»“åº“çš„å†…å®¹ pull åˆ°æœ¬åœ°ä»“åº“ã€‚</p> <img src="image-20230108200809285.png" alt="image-20230108200809285" style="zoom:60%;" /> <img src="image-20230108201028347.png" alt="image-20230108201028347" style="zoom: 67%;" /><h3 id="clone-å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°"><a href="#clone-å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°" class="headerlink" title="clone å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°"></a>clone å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°</h3> <img src="image-20230108201251691.png" alt="image-20230108201251691" style="zoom: 50%;" /> <img src="image-20230108201304613.png" alt="image-20230108201304613" style="zoom:50%;" /><p>ä¸º clone ä¸‹æ¥çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œç„¶åç‚¹å‡» Nextã€‚</p> <img src="image-20230108201322709.png" alt="image-20230108201322709" style="zoom:50%;" /> <img src="image-20230108201330352.png" alt="image-20230108201330352" style="zoom:50%;" /> <img src="image-20230108201347457.png" alt="image-20230108201347457" style="zoom:50%;" /> <img src="image-20230108201354881.png" alt="image-20230108201354881" style="zoom:50%;" /><h2 id="å›½å†…ä»£ç æ‰˜ç®¡ä¸­å¿ƒ-ç äº‘"><a href="#å›½å†…ä»£ç æ‰˜ç®¡ä¸­å¿ƒ-ç äº‘" class="headerlink" title="å›½å†…ä»£ç æ‰˜ç®¡ä¸­å¿ƒ- ç äº‘"></a>å›½å†…ä»£ç æ‰˜ç®¡ä¸­å¿ƒ- ç äº‘</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒGitHub æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œä½¿ç”¨ GitHub ä½œä¸ºé¡¹ç›®æ‰˜ç®¡ç½‘ç«™ï¼Œå¦‚æœç½‘é€Ÿä¸å¥½çš„è¯ï¼Œä¸¥é‡å½±å“ä½¿ç”¨ä½“éªŒï¼Œç”šè‡³ä¼šå‡ºç°ç™»å½•ä¸ä¸Šçš„æƒ…å†µã€‚é’ˆå¯¹è¿™ä¸ªæƒ…å†µï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨å›½å†…çš„é¡¹ç›®æ‰˜ç®¡ç½‘ç«™-ç äº‘</p><p>ç äº‘æ˜¯å¼€æºä¸­å›½æ¨å‡ºçš„åŸºäº Git çš„ä»£ç æ‰˜ç®¡æœåŠ¡ä¸­å¿ƒï¼Œç½‘å€æ˜¯ <a href="https://gitee.com/">https://gitee.com/</a> ï¼Œä½¿ç”¨æ–¹å¼è·Ÿ GitHub ä¸€æ ·ï¼Œè€Œä¸”å®ƒè¿˜æ˜¯ä¸€ä¸ªä¸­æ–‡ç½‘ç«™ï¼Œå¦‚æœä½ è‹±æ–‡ä¸æ˜¯å¾ˆå¥½å®ƒæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><h3 id="ç äº‘åˆ›å»ºè¿œç¨‹åº“"><a href="#ç äº‘åˆ›å»ºè¿œç¨‹åº“" class="headerlink" title="ç äº‘åˆ›å»ºè¿œç¨‹åº“"></a>ç äº‘åˆ›å»ºè¿œç¨‹åº“</h3><p>ç‚¹å‡»é¦–é¡µå³ä¸Šè§’çš„åŠ å·ï¼Œé€‰æ‹©ä¸‹é¢çš„æ–°å»ºä»“åº“</p> <img src="image-20230108201702532.png" alt="image-20230108201702532" style="zoom:40%;" /><p>å¡«å†™ä»“åº“åç§°ï¼Œè·¯å¾„å’Œé€‰æ‹©æ˜¯å¦å¼€æºï¼ˆå…±å¼€åº“æˆ–ç§æœ‰åº“ï¼‰</p> <img src="image-20230108201719614.png" alt="image-20230108201719614" style="zoom:40%;" /><p>æœ€åæ ¹æ®éœ€æ±‚é€‰æ‹©åˆ†æ”¯æ¨¡å‹ï¼Œç„¶åç‚¹å‡»åˆ›å»ºæŒ‰é’®</p> <img src="image-20230108201735084.png" alt="image-20230108201735084" style="zoom:40%;" /><p>è¿œç¨‹åº“åˆ›å»ºå¥½ä»¥åï¼Œå°±å¯ä»¥çœ‹åˆ° HTTPS å’Œ SSH çš„é“¾æ¥</p> <img src="image-20230108201751187.png" alt="image-20230108201751187" style="zoom:40%;" /><h3 id="IDEA-é›†æˆç äº‘"><a href="#IDEA-é›†æˆç äº‘" class="headerlink" title="IDEA é›†æˆç äº‘"></a>IDEA é›†æˆç äº‘</h3><h4 id="IDEA-å®‰è£…ç äº‘æ’ä»¶"><a href="#IDEA-å®‰è£…ç äº‘æ’ä»¶" class="headerlink" title="IDEA å®‰è£…ç äº‘æ’ä»¶"></a>IDEA å®‰è£…ç äº‘æ’ä»¶</h4><p>Idea é»˜è®¤ä¸å¸¦ç äº‘æ’ä»¶ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥è¦å®‰è£… Gitee æ’ä»¶ã€‚</p><p>å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨ Idea æ’ä»¶å•†åº—æœç´¢ Giteeï¼Œç„¶åç‚¹å‡»å³ä¾§çš„ Install æŒ‰é’®ã€‚</p> <img src="image-20230108202847169.png" alt="image-20230108202847169" style="zoom:50%;" /><p>ç„¶ååœ¨ç äº‘æ’ä»¶é‡Œé¢æ·»åŠ ç äº‘å¸å·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ Idea è¿æ¥ç äº‘äº†ã€‚</p> <img src="image-20230108202909617.png" alt="image-20230108202909617" style="zoom:50%;" /><h3 id="IDEA-è¿æ¥ç äº‘"><a href="#IDEA-è¿æ¥ç äº‘" class="headerlink" title="IDEA è¿æ¥ç äº‘"></a>IDEA è¿æ¥ç äº‘</h3><p>Idea è¿æ¥ç äº‘å’Œè¿æ¥ GitHub å‡ ä¹ä¸€æ ·ï¼Œé¦–å…ˆåœ¨ Idea é‡Œé¢åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œåˆå§‹åŒ– git å·¥ç¨‹ï¼Œç„¶åå°†ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œæäº¤åˆ°æœ¬åœ°åº“ï¼Œè¿™äº›æ­¥éª¤ä¸Šé¢å·²ç»è®²è¿‡ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><h3 id="ç äº‘å¤åˆ¶-GitHub-é¡¹ç›®"><a href="#ç äº‘å¤åˆ¶-GitHub-é¡¹ç›®" class="headerlink" title="ç äº‘å¤åˆ¶ GitHub é¡¹ç›®"></a>ç äº‘å¤åˆ¶ GitHub é¡¹ç›®</h3><p>ç äº‘æä¾›äº†ç›´æ¥å¤åˆ¶ GitHub é¡¹ç›®çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬åšé¡¹ç›®çš„è¿ç§»å’Œä¸‹è½½ã€‚</p><p>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p> <img src="image-20230108204240387.png" alt="image-20230108204240387" style="zoom:45%;" /><p>å°† GitHub çš„è¿œç¨‹åº“ HTTPS é“¾æ¥å¤åˆ¶è¿‡æ¥ï¼Œç‚¹å‡»åˆ›å»ºæŒ‰é’®å³å¯ã€‚</p> <img src="image-20230108204259904.png" alt="image-20230108204259904" style="zoom:45%;" /><img src="image-20230108204337608.png" alt="image-20230108204337608" style="zoom:45%;" /><p>å¦‚æœ GitHub é¡¹ç›®æ›´æ–°äº†ä»¥åï¼Œåœ¨ç äº‘é¡¹ç›®ç«¯å¯ä»¥æ‰‹åŠ¨é‡æ–°åŒæ­¥ï¼Œè¿›è¡Œæ›´æ–°ï¼</p> <img src="image-20230108204357533.png" alt="image-20230108204357533" style="zoom:45%;" /> <img src="image-20230108204409080.png" alt="image-20230108204409080" style="zoom:45%;" /> <img src="image-20230108204421759.png" alt="image-20230108204421759" style="zoom:50%;" />]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>SpringMVC</title>
    <link href="/2022/12/18/SpringMVCNote/"/>
    <url>/2022/12/18/SpringMVCNote/</url>
    
    <content type="html"><![CDATA[<h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="1ã€SpringMVCç®€ä»‹"><a href="#1ã€SpringMVCç®€ä»‹" class="headerlink" title="1ã€SpringMVCç®€ä»‹"></a>1ã€SpringMVCç®€ä»‹</h2><h3 id="1-1ã€ä»€ä¹ˆæ˜¯MVC"><a href="#1-1ã€ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯MVC"></a>1.1ã€ä»€ä¹ˆæ˜¯MVC</h3><p>MVCæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„çš„æ€æƒ³ï¼Œå°†è½¯ä»¶æŒ‰ç…§æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨æ¥åˆ’åˆ†</p><ul><li><p>Mï¼šModelï¼Œæ¨¡å‹å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„JavaBeanï¼Œä½œç”¨æ˜¯å¤„ç†æ•°æ®</p><p>JavaBeanåˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>ä¸€ç±»ç§°ä¸ºå®ä½“ç±»Beanï¼šä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®çš„ï¼Œå¦‚ Studentã€User ç­‰</li><li>ä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç† Beanï¼šæŒ‡ Service æˆ– Dao å¯¹è±¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®ã€‚</li></ul></li><li><p>Vï¼šViewï¼Œè§†å›¾å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„htmlæˆ–jspç­‰é¡µé¢ï¼Œä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œå±•ç¤ºæ•°æ®</p></li><li><p>Cï¼šControllerï¼Œæ§åˆ¶å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„servletï¼Œä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚å’Œå“åº”æµè§ˆå™¨</p></li></ul><p>MVCçš„å·¥ä½œæµç¨‹ï¼š ç”¨æˆ·é€šè¿‡è§†å›¾å±‚å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸­è¯·æ±‚è¢«Controlleræ¥æ”¶ï¼ŒControllerè°ƒç”¨ç›¸åº”çš„Modelå±‚å¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œæ¯•å°†ç»“æœè¿”å›åˆ°Controllerï¼ŒControllerå†æ ¹æ®è¯·æ±‚å¤„ç†çš„ç»“æœæ‰¾åˆ°ç›¸åº”çš„Viewè§†å›¾ï¼Œæ¸²æŸ“æ•°æ®åæœ€ç»ˆå“åº”ç»™æµè§ˆå™¨</p><h2 id="1-2ã€ä»€ä¹ˆæ˜¯SpringMVC"><a href="#1-2ã€ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="1.2ã€ä»€ä¹ˆæ˜¯SpringMVC"></a>1.2ã€ä»€ä¹ˆæ˜¯SpringMVC</h2><p>SpringMVCæ˜¯Springçš„ä¸€ä¸ªåç»­äº§å“ï¼Œæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®</p><p>SpringMVC æ˜¯ Spring ä¸ºè¡¨è¿°å±‚å¼€å‘æä¾›çš„ä¸€æ•´å¥—å®Œå¤‡çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¡¨è¿°å±‚æ¡†æ¶å†ç» Strustã€WebWorkã€Strust2 ç­‰è¯¸å¤šäº§å“çš„å†ä»£æ›´è¿­ä¹‹åï¼Œç›®å‰ä¸šç•Œæ™®éé€‰æ‹©äº† SpringMVC ä½œä¸º Java EE é¡¹ç›®<strong>è¡¨è¿°å±‚</strong>å¼€å‘çš„<strong>é¦–é€‰æ–¹æ¡ˆ</strong>ã€‚</p><blockquote><p>æ³¨ï¼šä¸‰å±‚æ¶æ„åˆ†ä¸ºè¡¨è¿°å±‚ï¼ˆæˆ–è¡¨ç¤ºå±‚ï¼‰ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚ï¼Œ<strong>è¡¨è¿°å±‚è¡¨ç¤ºå‰å°é¡µé¢å’Œåå°servlet</strong></p></blockquote><h2 id="1-3ã€SpringMVCçš„ç‰¹ç‚¹"><a href="#1-3ã€SpringMVCçš„ç‰¹ç‚¹" class="headerlink" title="1.3ã€SpringMVCçš„ç‰¹ç‚¹"></a>1.3ã€SpringMVCçš„ç‰¹ç‚¹</h2><ul><li><p><strong>Spring</strong> <strong>å®¶æ—åŸç”Ÿäº§å“</strong>ï¼Œä¸ IOC å®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥</p></li><li><p><strong>åŸºäºåŸç”Ÿçš„Servlet</strong>ï¼Œé€šè¿‡äº†åŠŸèƒ½å¼ºå¤§çš„<strong>å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet</strong>ï¼Œå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†</p></li><li><p>è¡¨è¿°å±‚å„ç»†åˆ†é¢†åŸŸéœ€è¦è§£å†³çš„é—®é¢˜<strong>å…¨æ–¹ä½è¦†ç›–</strong>ï¼Œæä¾›<strong>å…¨é¢è§£å†³æ–¹æ¡ˆ</strong></p></li><li><p><strong>ä»£ç æ¸…æ–°ç®€æ´</strong>ï¼Œå¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡</p></li><li><p>å†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œå¯æ’æ‹”å¼ç»„ä»¶<strong>å³æ’å³ç”¨</strong>ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯</p></li><li><p><strong>æ€§èƒ½å“è‘—</strong>ï¼Œå°¤å…¶é€‚åˆç°ä»£å¤§å‹ã€è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®è¦æ±‚</p></li></ul><h1 id="2ã€å…¥é—¨æ¡ˆä¾‹"><a href="#2ã€å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2ã€å…¥é—¨æ¡ˆä¾‹"></a>2ã€å…¥é—¨æ¡ˆä¾‹</h1><h2 id="2-1ã€å¼€å‘ç¯å¢ƒ"><a href="#2-1ã€å¼€å‘ç¯å¢ƒ" class="headerlink" title="2.1ã€å¼€å‘ç¯å¢ƒ"></a>2.1ã€å¼€å‘ç¯å¢ƒ</h2><p>IDEï¼šidea 2019.2</p><p>æ„å»ºå·¥å…·ï¼šmaven3.5.4</p><p>æœåŠ¡å™¨ï¼štomcat8.5</p><p>Springç‰ˆæœ¬ï¼š5.3.1</p><h2 id="2-2ã€åˆ›å»ºmavenå·¥ç¨‹"><a href="#2-2ã€åˆ›å»ºmavenå·¥ç¨‹" class="headerlink" title="2.2ã€åˆ›å»ºmavenå·¥ç¨‹"></a>2.2ã€åˆ›å»ºmavenå·¥ç¨‹</h2><h3 id="â‘ æ·»åŠ webæ¨¡å—"><a href="#â‘ æ·»åŠ webæ¨¡å—" class="headerlink" title="â‘ æ·»åŠ webæ¨¡å—"></a>â‘ æ·»åŠ webæ¨¡å—</h3><h3 id="â‘¡æ‰“åŒ…æ–¹å¼ï¼šwar"><a href="#â‘¡æ‰“åŒ…æ–¹å¼ï¼šwar" class="headerlink" title="â‘¡æ‰“åŒ…æ–¹å¼ï¼šwar"></a>â‘¡æ‰“åŒ…æ–¹å¼ï¼šwar</h3><h3 id="â‘¢å¼•å…¥ä¾èµ–"><a href="#â‘¢å¼•å…¥ä¾èµ–" class="headerlink" title="â‘¢å¼•å…¥ä¾èµ–"></a>â‘¢å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringMVC --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ—¥å¿— --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ServletAPI --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.12.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šç”±äº Maven çš„ä¼ é€’æ€§ï¼Œæˆ‘ä»¬ä¸å¿…å°†æ‰€æœ‰éœ€è¦çš„åŒ…å…¨éƒ¨é…ç½®ä¾èµ–ï¼Œè€Œæ˜¯é…ç½®æœ€é¡¶ç«¯çš„ä¾èµ–ï¼Œå…¶ä»–é ä¼ é€’æ€§å¯¼å…¥</p><p><img src="/2022/12/18/SpringMVCNote/29.png" alt="29"></p><h2 id="2-3ã€é…ç½®web-xml"><a href="#2-3ã€é…ç½®web-xml" class="headerlink" title="2.3ã€é…ç½®web.xml"></a>2.3ã€é…ç½®web.xml</h2><p>pom.xmlä¸­ï¼š&lt;packaging&gt;war&lt;&#x2F;packaging&gt;</p><p>æ·»åŠ web.xmlæ—¶éœ€è¦åŠ ä¸Š <strong>src\main\webapp\</strong></p><p><img src="/2022/12/18/SpringMVCNote/image-20221126091917832.png" alt="image-20221126091917832"></p><h3 id="æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼š"><a href="#æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼š" class="headerlink" title="æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼š"></a>æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼š</h3><h3 id="â‘ é»˜è®¤é…ç½®æ–¹å¼"><a href="#â‘ é»˜è®¤é…ç½®æ–¹å¼" class="headerlink" title="â‘ é»˜è®¤é…ç½®æ–¹å¼"></a>â‘ é»˜è®¤é…ç½®æ–¹å¼</h3><p>æ­¤é…ç½®ä½œç”¨ä¸‹ï¼ŒSpringMVCçš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äºWEB-INFä¸‹ï¼Œé»˜è®¤åç§°ä¸º&lt;servlet-name&gt;-servlet.xmlï¼Œä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®æ‰€å¯¹åº”SpringMVCçš„é…ç½®æ–‡ä»¶ä½äºWEB-INFä¸‹ï¼Œæ–‡ä»¶åä¸ºspringMVC-servlet.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet&lt;/servletclass&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span><br><span class="hljs-comment">/*å¯ä»¥åŒ¹é…æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€çš„æ‰€æœ‰è¯·æ±‚ï¼ˆåŒ…æ‹¬.jspï¼Œä½†Tomcatä¸­æœ‰å¤„ç†jspçš„é»˜è®¤Servletï¼‰</span><br><span class="hljs-comment">--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡æ‰©å±•é…ç½®æ–¹å¼"><a href="#â‘¡æ‰©å±•é…ç½®æ–¹å¼" class="headerlink" title="â‘¡æ‰©å±•é…ç½®æ–¹å¼"></a>â‘¡æ‰©å±•é…ç½®æ–¹å¼</h3><ul><li><p>é€šè¿‡init-paramæ ‡ç­¾å¯è®¾ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°</p></li><li><p>é€šè¿‡load-on-startupæ ‡ç­¾å¯è®¾ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet&lt;/servletclass&gt;<br>    <span class="hljs-comment">&lt;!-- é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- contextConfigLocationä¸ºå›ºå®šå€¼ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ä½¿ç”¨classpath:è¡¨ç¤ºä»ç±»è·¯å¾„æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚mavenå·¥ç¨‹ä¸­çš„src/main/resources --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        ä½œä¸ºæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰å¤§é‡çš„åˆå§‹åŒ–æ“ä½œè¦åš</span><br><span class="hljs-comment">        è€Œè¿™äº›æ“ä½œæ”¾åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ‰æ‰§è¡Œä¼šä¸¥é‡å½±å“è®¿é—®é€Ÿåº¦</span><br><span class="hljs-comment">        å› æ­¤éœ€è¦é€šè¿‡æ­¤æ ‡ç­¾å°†å¯åŠ¨æ§åˆ¶DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶</span><br><span class="hljs-comment">--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>&lt;url-pattern&gt;æ ‡ç­¾ä¸­ä½¿ç”¨&#x2F;å’Œ&#x2F;*çš„åŒºåˆ«ï¼š</p><p>&#x2F;æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯&#x2F;loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„ï¼Œä½†æ˜¯&#x2F;ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·</p><p>æ±‚</p><p>å› æ­¤å°±å¯ä»¥é¿å…åœ¨è®¿é—®jspé¡µé¢æ—¶ï¼Œè¯¥è¯·æ±‚è¢«DispatcherServletå¤„ç†ï¼Œä»è€Œæ‰¾ä¸åˆ°ç›¸åº”çš„é¡µé¢</p><p>&#x2F;*åˆ™èƒ½å¤ŸåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨è¿‡æ»¤å™¨æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œå°±éœ€è¦ä½¿ç”¨&#x2F;*çš„å†™</p><p>æ³•</p></blockquote><h2 id="2-4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"><a href="#2-4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨" class="headerlink" title="2.4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"></a>2.4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨</h2><p>ç”±äºå‰ç«¯æ§åˆ¶å™¨å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä½†æ˜¯å…·ä½“çš„è¯·æ±‚æœ‰ä¸åŒçš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤éœ€è¦åˆ›å»ºå¤„ç†å…·ä½“è¯·æ±‚çš„ç±»ï¼Œå³è¯·æ±‚æ§åˆ¶å™¨</p><p>è¯·æ±‚æ§åˆ¶å™¨ä¸­æ¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•æˆä¸ºæ§åˆ¶å™¨æ–¹æ³•</p><p>å› ä¸ºSpringMVCçš„æ§åˆ¶å™¨ç”±ä¸€ä¸ªPOJOï¼ˆæ™®é€šçš„Javaç±»ï¼‰æ‹…ä»»ï¼Œå› æ­¤éœ€è¦é€šè¿‡@Controlleræ³¨è§£å°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªæ§åˆ¶å±‚ç»„ä»¶ï¼Œäº¤ç»™Springçš„IoCå®¹å™¨ç®¡ç†ï¼Œæ­¤æ—¶SpringMVCæ‰èƒ½å¤Ÿè¯†åˆ«æ§åˆ¶å™¨çš„å­˜åœ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-5ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶"><a href="#2-5ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="2.5ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶"></a>2.5ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶</h2><p>SpringMVCçš„é…ç½®æ–‡ä»¶é»˜è®¤çš„ä½ç½®å’Œåç§°ï¼š</p><ul><li>ä½ç½®ï¼šWEB-INF ä¸‹</li><li>åç§°ï¼š&lt;servlet-name&gt;-servlet.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.mvc.controller&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;viewResolver&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;order&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;characterEncoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;templateEngine&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;templateResolver&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">bean</span></span><br><span class="hljs-tag"><span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span><br>                    <span class="hljs-comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.html&quot;</span>/&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;templateMode&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;HTML5&quot;</span>/&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;characterEncoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">é…ç½®é»˜è®¤çš„servletæ¥å¤„ç†é™æ€èµ„æº</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">å½“å‰å·¥ç¨‹çš„web.xmlé…ç½®çš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„url-patternæ˜¯/</span><br><span class="hljs-comment">Tomcatçš„web.xmlé…ç½®çš„DefaultServletçš„url-patternä¹Ÿæ˜¯/</span><br><span class="hljs-comment">æ­¤æ—¶ï¼Œæµè§ˆå™¨å‘é€çš„è¯·æ±‚ä¼šä¼˜å…ˆè¢«DispatcherServletè¿›è¡Œå¤„ç†ï¼Œ</span><br><span class="hljs-comment">ä½†æ˜¯DispatcherServletæ— æ³•å¤„ç†é™æ€èµ„æº</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">è‹¥é…ç½®äº†&lt;mvc:default-servlet-handler&gt;ï¼Œ</span><br><span class="hljs-comment">æ­¤æ—¶æµè§ˆå™¨å‘é€çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«DefaultServletå¤„ç†</span><br><span class="hljs-comment">è‹¥è¿˜é…ç½®äº†&lt;mvc:annotation-driven&gt;ï¼Œ</span><br><span class="hljs-comment">æµè§ˆå™¨å‘é€çš„è¯·æ±‚ä¼šå…ˆè¢«DispatcherServletå¤„ç†ï¼Œæ— æ³•å¤„ç†å†äº¤ç»™DefaultServletå¤„ç†</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    DefaultServletå¯å¤„ç†é™æ€èµ„æºï¼Œä¾‹å¦‚htmlã€jsã€cssã€jpg</span><br><span class="hljs-comment">    è‹¥åªè®¾ç½®è¯¥æ ‡ç­¾ï¼Œåˆ™åªèƒ½è®¿é—®é™æ€èµ„æºï¼Œå…¶ä»–è¯·æ±‚åˆ™æ— æ³•è®¿é—®</span><br><span class="hljs-comment">    æ­¤æ—¶å¿…é¡»è®¾ç½®&lt;mvc:annotation-driven/&gt;è§£å†³é—®é¢˜</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:default-servlet-handler</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- å¼€å¯mvcæ³¨è§£é©±åŠ¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:message-converters</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å¤„ç†å“åº”ä¸­æ–‡å†…å®¹ä¹±ç  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;defaultCharset&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;supportedMediaTypes&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>text/html<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>application/json<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:message-converters</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-6ã€æµ‹è¯•HelloWorld"><a href="#2-6ã€æµ‹è¯•HelloWorld" class="headerlink" title="2.6ã€æµ‹è¯•HelloWorld"></a>2.6ã€æµ‹è¯•HelloWorld</h2><h3 id="â‘ å®ç°å¯¹é¦–é¡µçš„è®¿é—®"><a href="#â‘ å®ç°å¯¹é¦–é¡µçš„è®¿é—®" class="headerlink" title="â‘ å®ç°å¯¹é¦–é¡µçš„è®¿é—®"></a>â‘ å®ç°å¯¹é¦–é¡µçš„è®¿é—®</h3><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @RequestMappingæ³¨è§£ï¼šå¤„ç†è¯·æ±‚å’Œæ§åˆ¶å™¨æ–¹æ³•ä¹‹é—´çš„æ˜ å°„å…³ç³»</span><br><span class="hljs-comment">// @RequestMappingæ³¨è§£çš„valueå±æ€§å¯ä»¥é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚ï¼Œ/è¡¨ç¤ºçš„å½“å‰å·¥ç¨‹çš„ä¸Šä¸‹æ–‡è·¯å¾„</span><br><span class="hljs-comment">// å³ï¼šlocalhost:8080/springMVC/</span><br><span class="hljs-meta">@RequestMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">index</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">//è®¾ç½®è§†å›¾åç§°ï¼ˆå°†é€»è¾‘è§†å›¾è¿”å›ï¼‰</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¡é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢"><a href="#â‘¡é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢" class="headerlink" title="â‘¡é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢"></a>â‘¡é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢</h3><p>åœ¨ä¸»é¡µindex.htmlä¸­è®¾ç½®è¶…é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--thymeleafçš„å†…å®¹--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>HelloWorld<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">HelloWorld</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;target&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-7ã€æ€»ç»“"><a href="#2-7ã€æ€»ç»“" class="headerlink" title="2.7ã€æ€»ç»“"></a>2.7ã€æ€»ç»“</h2><p>æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè‹¥è¯·æ±‚åœ°å€ç¬¦åˆå‰ç«¯æ§åˆ¶å™¨çš„url-patternï¼Œè¯¥è¯·æ±‚å°±ä¼šè¢«å‰ç«¯æ§åˆ¶å™¨DispatcherServletå¤„ç†ã€‚å‰ç«¯æ§åˆ¶å™¨ä¼šè¯»å–<strong>SpringMVC</strong>çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡æ‰«æç»„ä»¶æ‰¾åˆ°æ§åˆ¶å™¨ï¼Œ</p><p>å°†è¯·æ±‚åœ°å€å’Œæ§åˆ¶å™¨ä¸­@RequestMappingæ³¨è§£çš„valueå±æ€§å€¼è¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸï¼Œè¯¥æ³¨è§£æ‰€æ ‡è¯†çš„æ§åˆ¶å™¨æ–¹æ³•å°±æ˜¯å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚å¤„ç†è¯·æ±‚çš„æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„è§†å›¾åç§°ï¼Œè¯¥è§†å›¾åç§°ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼ŒåŠ ä¸Šå‰ç¼€å’Œåç¼€ç»„æˆè§†å›¾çš„è·¯å¾„ï¼Œé€šè¿‡Thymeleafå¯¹è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆè½¬å‘åˆ°è§†å›¾æ‰€å¯¹åº”é¡µé¢</p><h1 id="3ã€-RequestMappingæ³¨è§£"><a href="#3ã€-RequestMappingæ³¨è§£" class="headerlink" title="3ã€@RequestMappingæ³¨è§£"></a>3ã€@RequestMappingæ³¨è§£</h1><h2 id="3-1ã€-RequestMappingæ³¨è§£çš„åŠŸèƒ½"><a href="#3-1ã€-RequestMappingæ³¨è§£çš„åŠŸèƒ½" class="headerlink" title="3.1ã€@RequestMappingæ³¨è§£çš„åŠŸèƒ½"></a>3.1ã€@RequestMappingæ³¨è§£çš„åŠŸèƒ½</h2><p>ä»æ³¨è§£åç§°ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ@RequestMappingæ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚å’Œå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚</p><p>SpringMVC æ¥æ”¶åˆ°æŒ‡å®šçš„è¯·æ±‚ï¼Œå°±ä¼šæ¥æ‰¾åˆ°åœ¨æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p><h2 id="3-2ã€-RequestMappingæ³¨è§£çš„ä½ç½®"><a href="#3-2ã€-RequestMappingæ³¨è§£çš„ä½ç½®" class="headerlink" title="3.2ã€@RequestMappingæ³¨è§£çš„ä½ç½®"></a>3.2ã€@RequestMappingæ³¨è§£çš„ä½ç½®</h2><p>@RequestMappingæ ‡è¯†ä¸€ä¸ªç±»ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯</p><p>@RequestMappingæ ‡è¯†ä¸€ä¸ªæ–¹æ³•ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚è¯·æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/test&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingController</span> &#123;<br>    <span class="hljs-comment">//æ­¤æ—¶è¯·æ±‚æ˜ å°„æ‰€æ˜ å°„çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„ä¸ºï¼š/test/testRequestMapping</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/testRequestMapping&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-3ã€-RequestMappingæ³¨è§£çš„valueå±æ€§"><a href="#3-3ã€-RequestMappingæ³¨è§£çš„valueå±æ€§" class="headerlink" title="3.3ã€@RequestMappingæ³¨è§£çš„valueå±æ€§"></a>3.3ã€@RequestMappingæ³¨è§£çš„valueå±æ€§</h2><p>@RequestMappingæ³¨è§£çš„valueå±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„valueå±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è¯·æ±‚</p><p>@RequestMappingæ³¨è§£çš„valueå±æ€§å¿…é¡»è®¾ç½®ï¼Œè‡³å°‘é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/testRequestMapping&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--<br>&gt;/testRequestMapping<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">    value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-4ã€-RequestMappingæ³¨è§£çš„methodå±æ€§"><a href="#3-4ã€-RequestMappingæ³¨è§£çš„methodå±æ€§" class="headerlink" title="3.4ã€@RequestMappingæ³¨è§£çš„methodå±æ€§"></a>3.4ã€@RequestMappingæ³¨è§£çš„methodå±æ€§</h2><p>@RequestMappingæ³¨è§£çš„methodå±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼ˆgetæˆ–postï¼‰åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„methodå±æ€§æ˜¯ä¸€ä¸ªRequestMethodç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šç§è¯·æ±‚æ–¹å¼çš„è¯·æ±‚</p><p>è‹¥å½“å‰è¯·æ±‚çš„è¯·æ±‚åœ°å€æ»¡è¶³è¯·æ±‚æ˜ å°„çš„valueå±æ€§ï¼Œä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸æ»¡è¶³methodå±æ€§ï¼Œåˆ™æµè§ˆå™¨æŠ¥é”™</p><p>405ï¼šRequest method â€˜POSTâ€™ not supported</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/test&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">    value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;,</span><br><span class="hljs-meta">    method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>1ã€å¯¹äºå¤„ç†æŒ‡å®šè¯·æ±‚æ–¹å¼çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ŒSpringMVCä¸­æä¾›äº†@RequestMappingçš„æ´¾ç”Ÿæ³¨è§£</p><p>å¤„ç†getè¯·æ±‚çš„æ˜ å°„â€“&gt;@GetMapping</p><p>å¤„ç†postè¯·æ±‚çš„æ˜ å°„â€“&gt;@PostMapping</p><p>å¤„ç†putè¯·æ±‚çš„æ˜ å°„â€“&gt;@PutMapping</p><p>å¤„ç†deleteè¯·æ±‚çš„æ˜ å°„â€“&gt;@DeleteMapping</p><p>2ã€å¸¸ç”¨çš„è¯·æ±‚æ–¹å¼æœ‰getï¼Œpostï¼Œputï¼Œdelete</p><p>ä½†æ˜¯ç›®å‰æµè§ˆå™¨åªæ”¯æŒgetå’Œpostï¼Œè‹¥åœ¨formè¡¨å•æäº¤æ—¶ï¼Œä¸ºmethodè®¾ç½®äº†å…¶ä»–è¯·æ±‚æ–¹å¼çš„å­—ç¬¦ä¸²ï¼ˆputæˆ–deleteï¼‰ï¼Œåˆ™æŒ‰ç…§é»˜è®¤çš„è¯·æ±‚æ–¹å¼getå¤„ç†</p><p>è‹¥è¦å‘é€putå’Œdeleteè¯·æ±‚ï¼Œåˆ™éœ€è¦é€šè¿‡springæä¾›çš„è¿‡æ»¤å™¨HiddenHttpMethodFilterï¼Œåœ¨RESTfulä¸­ä¼šè®²åˆ°</p></blockquote><h2 id="3-5ã€-RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰"><a href="#3-5ã€-RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.5ã€@RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰"></a>3.5ã€@RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰</h2><p>@RequestMappingæ³¨è§£çš„paramså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å‚æ•°åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„paramså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å‚æ•°</p><p>å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œparamâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°</p><p>â€œ!paramâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦paramè¯·æ±‚å‚æ•°</p><p>â€œparam&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä¸”param&#x3D;value</p><p>â€œparam!&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥ä¸æºå¸¦paramè¯·æ±‚å‚æ•°ï¼Œå¦‚æœæºå¸¦ï¼Œè¦æ±‚param!&#x3D;value</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/test(username=&#x27;admin&#x27;,password=123456)&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„<br>paramså±æ€§--&gt;/test<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">    value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span><br><span class="hljs-meta">    ,method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span><br><span class="hljs-meta">    ,params = &#123;&quot;username&quot;,&quot;password!=123456&quot;,&quot;!age&quot;&#125;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³paramså±æ€§ï¼Œæ­¤æ—¶é¡µé¢å›æŠ¥é”™400ï¼šParameter conditions â€œusername, password!&#x3D;123456â€ not met for actualrequest parameters: username&#x3D;{admin}, password&#x3D;{123456}</p></blockquote><h2 id="3-6ã€-RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰"><a href="#3-6ã€-RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.6ã€@RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰"></a>3.6ã€@RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰</h2><p>@RequestMappingæ³¨è§£çš„headerså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„headerså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œheaderâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œ!headerâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œheader&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header&#x3D;value</p><p>â€œheader!&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¦‚æœæºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯åˆ™è¦æ±‚header!&#x3D;value</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³headerså±æ€§ï¼Œæ­¤æ—¶é¡µé¢æ˜¾ç¤º404é”™è¯¯ï¼Œå³èµ„æºæœªæ‰¾åˆ°</p><h2 id="3-7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„-valueå±æ€§"><a href="#3-7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„-valueå±æ€§" class="headerlink" title="3.7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„(valueå±æ€§)"></a>3.7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„(valueå±æ€§)</h2><p>ï¼Ÿï¼šè¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦</p><p>*ï¼šè¡¨ç¤ºä»»æ„çš„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</p><p>**ï¼šè¡¨ç¤ºä»»æ„å±‚æ•°çš„ä»»æ„ç›®å½•</p><p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨**æ—¶ï¼Œåªèƒ½ä½¿ç”¨&#x2F;**&#x2F;xxxçš„æ–¹å¼</p><p>ï¼ˆä¸èƒ½åŒ¹é… é—®å· ? å’Œ æ–œçº¿ &#x2F; ï¼Œå› ä¸ºåœ¨è¯·æ±‚è·¯å¾„ä¸­é—®å· ? æ˜¯è·¯å¾„å’Œå‚æ•°çš„åˆ†éš”ç¬¦ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/a?a/test/ant&quot;)</span> <span class="hljs-comment">//  /axa/test/ant</span><br><span class="hljs-meta">@RequestMapping(&quot;/a*a/test/ant&quot;)</span> <span class="hljs-comment">//  /aa/test/ant</span><br><span class="hljs-meta">@RequestMapping(&quot;/**/test/ant&quot;)</span> <span class="hljs-comment">//   /test/ant  |  /a/a/a/test/ant</span><br></code></pre></td></tr></table></figure><h2 id="3-8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰-valueå±æ€§"><a href="#3-8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰-valueå±æ€§" class="headerlink" title="3.8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰(valueå±æ€§)"></a>3.8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰(valueå±æ€§)</h2><p>åŸå§‹æ–¹å¼ï¼š&#x2F;deleteUser?id&#x3D;1</p><p>restæ–¹å¼ï¼š&#x2F;user&#x2F;delete&#x2F;1</p><p>SpringMVCè·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äºRESTfulé£æ ¼ä¸­ï¼Œå½“è¯·æ±‚è·¯å¾„ä¸­å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„@RequestMappingæ³¨è§£çš„valueå±æ€§ä¸­é€šè¿‡å ä½ç¬¦{xxx}è¡¨ç¤ºä¼ è¾“çš„æ•°æ®ï¼Œåœ¨é€šè¿‡@PathVariableæ³¨è§£ï¼Œå°†å ä½ç¬¦æ‰€è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚</p><p>æ³¨æ„ï¼šä½¿ç”¨äº†å ä½ç¬¦åè¦æ±‚ä¸€å®šè¦ä¼ å¯¹åº”å‚æ•°ï¼Œå¦åˆ™æŠ¥é”™404</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/testRest/1/admin&#125;&quot;</span>&gt;</span>æµ‹è¯•è·¯å¾„ä¸­çš„å ä½ç¬¦--&gt;/testRest<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testRest/&#123;id&#125;/&#123;username&#125;&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRest</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> String id, <span class="hljs-meta">@PathVariable(&quot;username&quot;)</span></span><br><span class="hljs-params">String username)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;id:&quot;</span>+id+<span class="hljs-string">&quot;,username:&quot;</span>+username);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><span class="hljs-comment">//æœ€ç»ˆè¾“å‡ºçš„å†…å®¹ä¸º--&gt;id:1,username:admin</span><br></code></pre></td></tr></table></figure><h1 id="4ã€SpringMVCè·å–è¯·æ±‚å‚æ•°"><a href="#4ã€SpringMVCè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="4ã€SpringMVCè·å–è¯·æ±‚å‚æ•°"></a>4ã€SpringMVCè·å–è¯·æ±‚å‚æ•°</h1><h2 id="4-1ã€é€šè¿‡ServletAPIè·å–"><a href="#4-1ã€é€šè¿‡ServletAPIè·å–" class="headerlink" title="4.1ã€é€šè¿‡ServletAPIè·å–"></a>4.1ã€é€šè¿‡ServletAPIè·å–</h2><p>å°†HttpServletRequestä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ï¼Œæ­¤æ—¶HttpServletRequestç±»å‹çš„å‚æ•°è¡¨ç¤ºå°è£…äº†å½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ HttpServletResponseã€Session ç­‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testParam&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testParam</span><span class="hljs-params">(HttpServletRequest request)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;username:&quot;</span>+username+<span class="hljs-string">&quot;,password:&quot;</span>+password);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°ï¼ˆå¸¸ç”¨ï¼‰"><a href="#4-2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°ï¼ˆå¸¸ç”¨ï¼‰" class="headerlink" title="4.2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°ï¼ˆå¸¸ç”¨ï¼‰"></a>4.2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°ï¼ˆå¸¸ç”¨ï¼‰</h2><p>åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œ<strong>è®¾ç½®å’Œè¯·æ±‚å‚æ•°åŒåçš„å½¢å‚</strong>ï¼Œå½“æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒåŒ¹é…åˆ°è¯·æ±‚æ˜ å°„æ—¶ï¼Œåœ¨DispatcherServlet ä¸­å°±ä¼šå°†è¯·æ±‚å‚æ•°èµ‹å€¼ç»™ç›¸åº”çš„å½¢å‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/testParam(username=&#x27;admin&#x27;,password=123456)&#125;&quot;</span>&gt;</span>æµ‹è¯•è·å–è¯·æ±‚å‚æ•°--<br>&gt;/testParam<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testParam&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testParam</span><span class="hljs-params">(String username, String password)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;username:&quot;</span>+username+<span class="hljs-string">&quot;,password:&quot;</span>+password);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥è¯·æ±‚æ‰€ä¼ è¾“çš„è¯·æ±‚å‚æ•°ä¸­æœ‰å¤šä¸ªåŒåçš„è¯·æ±‚å‚æ•°ï¼Œæ­¤æ—¶å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®å­—ç¬¦ä¸²</p><p>æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚æ¥æ”¶æ­¤è¯·æ±‚å‚æ•°</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„æ•°ç»„ä¸­åŒ…å«äº†æ¯ä¸€ä¸ªæ•°æ®</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„å€¼ä¸ºæ¯ä¸ªæ•°æ®ä¸­é—´ä½¿ç”¨é€—å·æ‹¼æ¥çš„ç»“æœ</p></blockquote><h2 id="4-3ã€-RequestParam"><a href="#4-3ã€-RequestParam" class="headerlink" title="4.3ã€@RequestParam"></a>4.3ã€@RequestParam</h2><p>@RequestParamæ˜¯å°†è¯·æ±‚å‚æ•°å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestParamæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼š</p><p>valueï¼šæŒ‡å®šä¸ºå½¢å‚èµ‹å€¼çš„è¯·æ±‚å‚æ•°çš„å‚æ•°å</p><p>requiredï¼šè®¾ç½®æ˜¯å¦å¿…é¡»ä¼ è¾“æ­¤è¯·æ±‚å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºtrue</p><p>è‹¥è®¾ç½®ä¸ºtrueæ—¶ï¼Œåˆ™å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“è¯¥è¯·æ±‚å‚æ•°ï¼Œä¸”æ²¡æœ‰è®¾ç½®defaultValueå±æ€§ï¼Œåˆ™é¡µé¢æŠ¥é”™400ï¼šRequired String parameter â€˜xxxâ€™ is not presentï¼›</p><p>è‹¥è®¾ç½®ä¸ºfalseï¼Œåˆ™å½“å‰è¯·æ±‚ä¸æ˜¯å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“ï¼Œåˆ™æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚çš„å€¼ä¸ºnull</p><p>defaultValueï¼šä¸ç®¡requiredå±æ€§å€¼ä¸ºtrueæˆ–falseï¼Œå½“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°æ²¡æœ‰ä¼ è¾“æˆ–ä¼ è¾“çš„å€¼ä¸ºâ€â€æ—¶ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä¸ºå½¢å‚èµ‹å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/param/annotation&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getParamByAnnotation</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value = &quot;username&quot;, required = true, defaultValue = &quot;default&quot;)</span> String name, <span class="hljs-meta">@RequestParam(value = &quot;password&quot;)</span> String word)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·åä¸ºï¼š&quot;</span>+name);<br>    System.out.println(<span class="hljs-string">&quot;å¯†ç ä¸ºï¼š&quot;</span>+word);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-4ã€-RequestHeader"><a href="#4-4ã€-RequestHeader" class="headerlink" title="4.4ã€@RequestHeader"></a>4.4ã€@RequestHeader</h2><p>@RequestHeaderæ˜¯å°†è¯·æ±‚å¤´ä¿¡æ¯å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestHeaderæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ @RequestParam</p><h2 id="4-5ã€-CookieValue"><a href="#4-5ã€-CookieValue" class="headerlink" title="4.5ã€@CookieValue"></a>4.5ã€@CookieValue</h2><p>@CookieValueæ˜¯å°†cookieæ•°æ®å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@CookieValueæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ @RequestParam</p><h2 id="4-6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°"><a href="#4-6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="4.6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°"></a>4.6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°</h2><p>å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®ä¸€ä¸ªå®ä½“ç±»ç±»å‹çš„å½¢å‚ï¼Œæ­¤æ—¶è‹¥æµè§ˆå™¨ä¼ è¾“çš„è¯·æ±‚å‚æ•°çš„å‚æ•°åå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸€è‡´ï¼Œé‚£ä¹ˆè¯·æ±‚å‚æ•°å°±ä¼šä¸ºæ­¤å±æ€§èµ‹å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/testpojo&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    æ€§åˆ«ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ç”·&quot;</span>&gt;</span>ç”·<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span><span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span>å¥³<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¹´é¾„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    é‚®ç®±ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testpojo&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testPOJO</span><span class="hljs-params">(User user)</span>&#123;<br>    System.out.println(user);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><span class="hljs-comment">//æœ€ç»ˆç»“æœ--&gt;User&#123;id=null, username=&#x27;å¼ ä¸‰&#x27;, password=&#x27;123&#x27;, age=23, sex=&#x27;ç”·&#x27;, email=&#x27;123@qq.com&#x27;&#125;</span><br></code></pre></td></tr></table></figure><h2 id="4-7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"><a href="#4-7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜" class="headerlink" title="4.7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"></a>4.7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜</h2><p>è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨SpringMVCæä¾›çš„ç¼–ç è¿‡æ»¤å™¨CharacterEncodingFilterï¼Œä½†æ˜¯å¿…é¡»åœ¨web.xmlä¸­è¿›è¡Œæ³¨å†Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®springMVCçš„ç¼–ç è¿‡æ»¤å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>forceEncoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>SpringMVCä¸­å¤„ç†ç¼–ç çš„è¿‡æ»¤å™¨ä¸€å®šè¦é…ç½®åˆ°å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰ï¼Œå¦åˆ™æ— æ•ˆ</p></blockquote><h1 id="5ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®</h1><h2 id="5-1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5-1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5.1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5.1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testServletAPI&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testServletAPI</span><span class="hljs-params">(HttpServletRequest request)</span>&#123;<br>    request.setAttribute(<span class="hljs-string">&quot;testScope&quot;</span>, <span class="hljs-string">&quot;hello,servletAPI&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5-2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5.2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5.2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h2><p><strong>æ§åˆ¶å™¨æ–¹æ³•è¢«è°ƒç”¨åï¼Œä¸ç®¡æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼å‘åŸŸå¯¹è±¡ä¸­å…±äº«æ•°æ®ï¼Œä¸ç®¡é€šè¿‡ä»€ä¹ˆæ–¹å¼è®¾ç½®é€»è¾‘è§†å›¾ï¼Œï¼Œæœ€ç»ˆéƒ½ä¼šè¢«å°è£…åˆ°ä¸€ä¸ªModelAndViewå¯¹è±¡ä¸­ï¼Œå¹¶ä½œä¸ºè¿”å›å€¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testModelAndView&quot;)</span><br><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">testModelAndView</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ModelAndViewæœ‰Modelå’ŒViewçš„åŠŸèƒ½</span><br><span class="hljs-comment">     * Modelä¸»è¦ç”¨äºå‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span><br><span class="hljs-comment">     * Viewä¸»è¦ç”¨äºè®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mav</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndView</span>();<br>    <span class="hljs-comment">//å‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span><br>    mav.addObject(<span class="hljs-string">&quot;testScope&quot;</span>, <span class="hljs-string">&quot;hello,ModelAndView&quot;</span>);<br>    <span class="hljs-comment">//è®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span><br>    mav.setViewName(<span class="hljs-string">&quot;success&quot;</span>);<br>    <span class="hljs-keyword">return</span> mav;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®ï¼ˆæ¨èï¼‰"><a href="#5-3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®ï¼ˆæ¨èï¼‰" class="headerlink" title="5.3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®ï¼ˆæ¨èï¼‰"></a>5.3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®ï¼ˆæ¨èï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testModel&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testModel</span><span class="hljs-params">(Model model)</span>&#123;<br>    model.addAttribute(<span class="hljs-string">&quot;testScope&quot;</span>, <span class="hljs-string">&quot;hello,Model&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5-4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5.4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5.4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testMap&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testMap</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span>&#123;<br>    map.put(<span class="hljs-string">&quot;testScope&quot;</span>, <span class="hljs-string">&quot;hello,Map&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5-5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5.5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5.5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testModelMap&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testModelMap</span><span class="hljs-params">(ModelMap modelMap)</span>&#123;<br>    modelMap.addAttribute(<span class="hljs-string">&quot;testScope&quot;</span>, <span class="hljs-string">&quot;hello,ModelMap&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-6ã€Modelã€ModelMapã€Mapçš„å…³ç³»"><a href="#5-6ã€Modelã€ModelMapã€Mapçš„å…³ç³»" class="headerlink" title="5.6ã€Modelã€ModelMapã€Mapçš„å…³ç³»"></a>5.6ã€Modelã€ModelMapã€Mapçš„å…³ç³»</h2><p><strong>Modelã€ModelMapã€Mapç±»å‹çš„å‚æ•°å…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯ BindingAwareModelMap ç±»å‹çš„</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Model</span>&#123;&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelMap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;String, Object&gt; &#123;&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendedModelMap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ModelMap</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Model</span> &#123;&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BindingAwareModelMap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ExtendedModelMap</span> &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="5-7ã€å‘sessionåŸŸå…±äº«æ•°æ®"><a href="#5-7ã€å‘sessionåŸŸå…±äº«æ•°æ®" class="headerlink" title="5.7ã€å‘sessionåŸŸå…±äº«æ•°æ®"></a>5.7ã€å‘sessionåŸŸå…±äº«æ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testSession&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testSession</span><span class="hljs-params">(HttpSession session)</span>&#123;<br>    session.setAttribute(<span class="hljs-string">&quot;testSessionScope&quot;</span>, <span class="hljs-string">&quot;hello,session&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡HttpRequestè·å–HttpSessionï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/test/session&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testSession</span><span class="hljs-params">(HttpServletRequest request)</span>&#123;<br>    <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> request.getSession();<br>    session.setAttribute(<span class="hljs-string">&quot;test&quot;</span>,<span class="hljs-string">&quot;session&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-8ã€å‘applicationåŸŸå…±äº«æ•°æ®"><a href="#5-8ã€å‘applicationåŸŸå…±äº«æ•°æ®" class="headerlink" title="5.8ã€å‘applicationåŸŸå…±äº«æ•°æ®"></a>5.8ã€å‘applicationåŸŸå…±äº«æ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testApplication&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testApplication</span><span class="hljs-params">(HttpSession session)</span>&#123;<br>    <span class="hljs-type">ServletContext</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> session.getServletContext();<br>    application.setAttribute(<span class="hljs-string">&quot;testApplicationScope&quot;</span>, <span class="hljs-string">&quot;hello,application&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡HttpRequestè·å–ServletContextï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/test/application&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testApplication</span><span class="hljs-params">(HttpServletRequest request)</span>&#123;<br>    <span class="hljs-type">ServletContext</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> request.getServletContext();<br>    application.setAttribute(<span class="hljs-string">&quot;test&quot;</span>,<span class="hljs-string">&quot;application&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•é¡µé¢"><a href="#æµ‹è¯•é¡µé¢" class="headerlink" title="æµ‹è¯•é¡µé¢"></a>æµ‹è¯•é¡µé¢</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆåŠŸé¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;test&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;session.test&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;application.test&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="6ã€SpringMVCçš„è§†å›¾"><a href="#6ã€SpringMVCçš„è§†å›¾" class="headerlink" title="6ã€SpringMVCçš„è§†å›¾"></a>6ã€SpringMVCçš„è§†å›¾</h1><p><strong>æ§åˆ¶å™¨æ–¹æ³•è¢«è°ƒç”¨åï¼Œä¸ç®¡æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼å‘åŸŸå¯¹è±¡ä¸­å…±äº«æ•°æ®ï¼Œä¸ç®¡é€šè¿‡ä»€ä¹ˆæ–¹å¼è®¾ç½®é€»è¾‘è§†å›¾ï¼Œï¼Œæœ€ç»ˆéƒ½ä¼šè¢«å°è£…åˆ°ä¸€ä¸ªModelAndViewå¯¹è±¡ä¸­ï¼Œå¹¶ä½œä¸ºè¿”å›å€¼</strong></p><p>SpringMVCä¸­çš„è§†å›¾æ˜¯Viewæ¥å£ï¼Œè§†å›¾çš„ä½œç”¨æ¸²æŸ“æ•°æ®ï¼Œå°†æ¨¡å‹Modelä¸­çš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·</p><p>SpringMVCè§†å›¾çš„ç§ç±»å¾ˆå¤šï¼Œé»˜è®¤æœ‰è½¬å‘è§†å›¾å’Œé‡å®šå‘è§†å›¾</p><p>å½“å·¥ç¨‹å¼•å…¥jstlçš„ä¾èµ–ï¼Œè½¬å‘è§†å›¾ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºJstlView</p><p>è‹¥ä½¿ç”¨çš„è§†å›¾æŠ€æœ¯ä¸ºThymeleafï¼Œåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†Thymeleafçš„è§†å›¾è§£æå™¨ï¼Œç”±æ­¤è§†å›¾è§£æå™¨è§£æä¹‹åæ‰€å¾—åˆ°çš„æ˜¯ThymeleafViewï¼Œè€Œå¦‚æœç›´æ¥è½¬å‘ï¼Œæ˜¯ä¸ä¼šè¢« Thymeleaf æ¸²æŸ“çš„</p><p><strong>ä¸€èˆ¬æ¥è¯´ï¼Œä¸šåŠ¡é€»è¾‘å¤„ç†å¤±è´¥çš„æ—¶å€™ä½¿ç”¨è½¬å‘ï¼Œä¸šåŠ¡é€»è¾‘å¤„ç†æˆåŠŸçš„æ—¶å€™ä½¿ç”¨é‡å®šå‘</strong></p><h2 id="6-1ã€ThymeleafView"><a href="#6-1ã€ThymeleafView" class="headerlink" title="6.1ã€ThymeleafView"></a>6.1ã€ThymeleafView</h2><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°æ²¡æœ‰ä»»ä½•å‰ç¼€æ—¶ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè§†å›¾åç§°æ‹¼æ¥è§†å›¾å‰ç¼€å’Œè§†å›¾åç¼€æ‰€å¾—åˆ°çš„æœ€ç»ˆè·¯å¾„ï¼Œä¼šé€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testHello&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testHello</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2022/12/18/SpringMVCNote/30.png" alt="30"></p><h2 id="6-2ã€è½¬å‘è§†å›¾"><a href="#6-2ã€è½¬å‘è§†å›¾" class="headerlink" title="6.2ã€è½¬å‘è§†å›¾"></a>6.2ã€è½¬å‘è§†å›¾</h2><p>SpringMVCä¸­é»˜è®¤çš„è½¬å‘è§†å›¾æ˜¯InternalResourceView</p><p>SpringMVCä¸­åˆ›å»ºè½¬å‘è§†å›¾çš„æƒ…å†µï¼š</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥â€forward:â€ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºInternalResourceViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€â€forward:â€å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚â€forward:&#x2F;â€œï¼Œâ€forward:&#x2F;employeeâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testForward&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testForward</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/testHello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2022/12/18/SpringMVCNote/31.png" alt="31"></p><h2 id="6-3ã€é‡å®šå‘è§†å›¾"><a href="#6-3ã€é‡å®šå‘è§†å›¾" class="headerlink" title="6.3ã€é‡å®šå‘è§†å›¾"></a>6.3ã€é‡å®šå‘è§†å›¾</h2><p>SpringMVCä¸­é»˜è®¤çš„é‡å®šå‘è§†å›¾æ˜¯RedirectView</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥â€redirect:â€ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºRedirectViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€â€redirect:â€å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡é‡å®šå‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚â€redirect:&#x2F;â€œï¼Œâ€redirect:&#x2F;employeeâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testRedirect&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRedirect</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/testHello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2022/12/18/SpringMVCNote/32.png" alt="32"></p><blockquote><p>æ³¨ï¼š</p><p>é‡å®šå‘è§†å›¾åœ¨è§£ææ—¶ï¼Œä¼šå…ˆå°†redirect:å‰ç¼€å»æ‰ï¼Œç„¶åä¼šåˆ¤æ–­å‰©ä½™éƒ¨åˆ†æ˜¯å¦ä»¥&#x2F;å¼€å¤´ï¼Œè‹¥æ˜¯åˆ™ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡è·¯å¾„</p></blockquote><h2 id="6-4ã€è§†å›¾æ§åˆ¶å™¨view-controller"><a href="#6-4ã€è§†å›¾æ§åˆ¶å™¨view-controller" class="headerlink" title="6.4ã€è§†å›¾æ§åˆ¶å™¨view-controller"></a>6.4ã€è§†å›¾æ§åˆ¶å™¨view-controller</h2><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼Œä»…ä»…ç”¨æ¥å®ç°é¡µé¢è·³è½¬ï¼Œå³åªéœ€è¦è®¾ç½®è§†å›¾åç§°æ—¶ï¼Œå¯ä»¥å°†å¤„ç†å™¨æ–¹æ³•ä½¿ç”¨ view-controller æ ‡ç­¾è¿›è¡Œè¡¨ç¤º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    pathï¼šè®¾ç½®å¤„ç†çš„è¯·æ±‚åœ°å€</span><br><span class="hljs-comment">    view-nameï¼šè®¾ç½®è¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è§†å›¾åç§°</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/testView&quot;</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">&quot;success&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:view-controller</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>å½“SpringMVCä¸­è®¾ç½®ä»»ä½•ä¸€ä¸ªview-controlleræ—¶ï¼Œå…¶ä»–æ§åˆ¶å™¨ä¸­çš„è¯·æ±‚æ˜ å°„å°†å…¨éƒ¨å¤±æ•ˆï¼ˆ404ï¼‰ï¼Œæ­¤æ—¶éœ€è¦åœ¨SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcæ³¨è§£é©±åŠ¨çš„æ ‡ç­¾ï¼š&lt;mvc:annotation-driven &#x2F;&gt;</p></blockquote><h1 id="7ã€RESTful"><a href="#7ã€RESTful" class="headerlink" title="7ã€RESTful"></a>7ã€RESTful</h1><h2 id="7-1ã€RESTfulç®€ä»‹"><a href="#7-1ã€RESTfulç®€ä»‹" class="headerlink" title="7.1ã€RESTfulç®€ä»‹"></a>7.1ã€RESTfulç®€ä»‹</h2><p>RESTï¼š<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransferï¼Œè¡¨ç°å±‚èµ„æºçŠ¶æ€è½¬ç§»ã€‚</p><h3 id="â‘ èµ„æº"><a href="#â‘ èµ„æº" class="headerlink" title="â‘ èµ„æº"></a>â‘ èµ„æº</h3><p>èµ„æºæ˜¯ä¸€ç§çœ‹å¾…æœåŠ¡å™¨çš„æ–¹å¼ï¼Œå³ï¼Œå°†æœåŠ¡å™¨çœ‹ä½œæ˜¯ç”±å¾ˆå¤šç¦»æ•£çš„èµ„æºç»„æˆã€‚æ¯ä¸ªèµ„æºæ˜¯æœåŠ¡å™¨ä¸Šä¸€ä¸ªå¯å‘½åçš„æŠ½è±¡æ¦‚å¿µã€‚å› ä¸ºèµ„æºæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ‰€ä»¥å®ƒä¸ä»…ä»…èƒ½ä»£è¡¨æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ã€æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ç­‰ç­‰å…·ä½“çš„ä¸œè¥¿ï¼Œå¯ä»¥å°†èµ„æºè®¾è®¡çš„è¦å¤šæŠ½è±¡æœ‰å¤šæŠ½è±¡ï¼Œåªè¦æƒ³è±¡åŠ›å…è®¸è€Œä¸”å®¢æˆ·ç«¯åº”ç”¨å¼€å‘è€…èƒ½å¤Ÿç†è§£ã€‚ä¸é¢å‘å¯¹è±¡è®¾è®¡ç±»ä¼¼ï¼Œèµ„æºæ˜¯ä»¥åè¯ä¸ºæ ¸å¿ƒæ¥ç»„ç»‡çš„ï¼Œé¦–å…ˆå…³æ³¨çš„æ˜¯åè¯ã€‚ä¸€ä¸ªèµ„æºå¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ªURIæ¥æ ‡è¯†ã€‚URIæ—¢æ˜¯èµ„æºçš„åç§°ï¼Œä¹Ÿæ˜¯èµ„æºåœ¨Webä¸Šçš„åœ°å€ã€‚å¯¹æŸä¸ªèµ„æºæ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡èµ„æºçš„URIä¸å…¶è¿›è¡Œäº¤äº’ã€‚</p><h3 id="â‘¡èµ„æºçš„è¡¨è¿°"><a href="#â‘¡èµ„æºçš„è¡¨è¿°" class="headerlink" title="â‘¡èµ„æºçš„è¡¨è¿°"></a>â‘¡èµ„æºçš„è¡¨è¿°</h3><p>èµ„æºçš„è¡¨è¿°æ˜¯ä¸€æ®µå¯¹äºèµ„æºåœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€çš„æè¿°ã€‚å¯ä»¥åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆäº¤æ¢ï¼‰ã€‚èµ„æºçš„è¡¨è¿°å¯ä»¥æœ‰å¤šç§æ ¼å¼ï¼Œä¾‹å¦‚HTML&#x2F;XML&#x2F;JSON&#x2F;çº¯æ–‡æœ¬&#x2F;å›¾ç‰‡&#x2F;è§†é¢‘&#x2F;éŸ³é¢‘ç­‰ç­‰ã€‚èµ„æºçš„è¡¨è¿°æ ¼å¼å¯ä»¥é€šè¿‡åå•†æœºåˆ¶æ¥ç¡®å®šã€‚è¯·æ±‚-å“åº”æ–¹å‘çš„è¡¨è¿°é€šå¸¸ä½¿ç”¨ä¸åŒçš„æ ¼å¼ã€‚</p><h3 id="â‘¢çŠ¶æ€è½¬ç§»"><a href="#â‘¢çŠ¶æ€è½¬ç§»" class="headerlink" title="â‘¢çŠ¶æ€è½¬ç§»"></a>â‘¢çŠ¶æ€è½¬ç§»</h3><p>çŠ¶æ€è½¬ç§»è¯´çš„æ˜¯ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆtransferï¼‰ä»£è¡¨èµ„æºçŠ¶æ€çš„è¡¨è¿°ã€‚é€šè¿‡è½¬ç§»å’Œæ“ä½œèµ„æºçš„è¡¨è¿°ï¼Œæ¥é—´æ¥å®ç°æ“ä½œèµ„æºçš„ç›®çš„ã€‚</p><h2 id="7-2ã€RESTfulçš„å®ç°"><a href="#7-2ã€RESTfulçš„å®ç°" class="headerlink" title="7.2ã€RESTfulçš„å®ç°"></a>7.2ã€RESTfulçš„å®ç°</h2><p>å…·ä½“è¯´ï¼Œå°±æ˜¯ HTTP åè®®é‡Œé¢ï¼Œå››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯ï¼šGETã€POSTã€PUTã€DELETEã€‚</p><p>å®ƒä»¬åˆ†åˆ«å¯¹åº”å››ç§åŸºæœ¬æ“ä½œï¼šGET ç”¨æ¥è·å–èµ„æºï¼ŒPOST ç”¨æ¥æ–°å»ºèµ„æºï¼ŒPUT ç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETEç”¨æ¥åˆ é™¤èµ„æºã€‚</p><p>REST é£æ ¼æå€¡ URL åœ°å€ä½¿ç”¨ç»Ÿä¸€çš„é£æ ¼è®¾è®¡ï¼Œä»å‰åˆ°åå„ä¸ªå•è¯ä½¿ç”¨æ–œæ åˆ†å¼€ï¼Œä¸ä½¿ç”¨é—®å·é”®å€¼å¯¹æ–¹å¼æºå¸¦è¯·æ±‚å‚æ•°ï¼Œè€Œæ˜¯å°†è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ä½œä¸º URL åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¿è¯æ•´ä½“é£æ ¼çš„ä¸€è‡´æ€§ã€‚</p><table><thead><tr><th><strong>æ“ä½œ</strong></th><th><strong>ä¼ ç»Ÿæ–¹å¼</strong></th><th><strong>REST</strong> <strong>é£æ ¼</strong></th></tr></thead><tbody><tr><td>æŸ¥è¯¢æ“ä½œ</td><td>getUserById?id&#x3D;1</td><td>user&#x2F;1  â€“&gt;  getè¯·æ±‚æ–¹å¼</td></tr><tr><td>ä¿å­˜æ“ä½œ</td><td>saveUser</td><td>user  â€“&gt;  postè¯·æ±‚æ–¹å¼</td></tr><tr><td>åˆ é™¤æ“ä½œ</td><td>deleteUser?id&#x3D;1</td><td>user&#x2F;1  â€“&gt;  deleteè¯·æ±‚æ–¹å¼</td></tr><tr><td>æ›´æ–°æ“ä½œ</td><td>updateUser</td><td>user  â€“&gt;  putè¯·æ±‚æ–¹å¼</td></tr></tbody></table><h2 id="7-3ã€HiddenHttpMethodFilter"><a href="#7-3ã€HiddenHttpMethodFilter" class="headerlink" title="7.3ã€HiddenHttpMethodFilter"></a>7.3ã€HiddenHttpMethodFilter</h2><p>ç”±äºæµè§ˆå™¨åªæ”¯æŒå‘é€getå’Œpostæ–¹å¼çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å‘é€putå’Œdeleteè¯·æ±‚å‘¢ï¼Ÿ</p><p>SpringMVC æä¾›äº† <strong>HiddenHttpMethodFilter</strong> å¸®åŠ©æˆ‘ä»¬<strong>å°†</strong> <strong>POST</strong> <strong>è¯·æ±‚è½¬æ¢ä¸º</strong> <strong>DELETE</strong> <strong>æˆ–</strong> <strong>PUT</strong> <strong>è¯·æ±‚</strong></p><p><strong>HiddenHttpMethodFilter</strong> å¤„ç†putå’Œdeleteè¯·æ±‚çš„æ¡ä»¶ï¼š</p><p>a&gt;å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpost</p><p>b&gt;å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“è¯·æ±‚å‚æ•°_method</p><p>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œ<strong>HiddenHttpMethodFilter</strong> è¿‡æ»¤å™¨å°±ä¼šå°†å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼è½¬æ¢ä¸ºè¯·æ±‚å‚æ•°_methodçš„å€¼ï¼Œå› æ­¤è¯·æ±‚å‚æ•°_methodçš„å€¼æ‰æ˜¯æœ€ç»ˆçš„è¯·æ±‚æ–¹å¼</p><p>åœ¨web.xmlä¸­æ³¨å†Œ<strong>HiddenHttpMethodFilter</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>ç›®å‰ä¸ºæ­¢ï¼ŒSpringMVCä¸­æä¾›äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼šCharacterEncodingFilterå’ŒHiddenHttpMethodFilter</p><p>åœ¨web.xmlä¸­æ³¨å†Œæ—¶ï¼Œå¿…é¡»å…ˆæ³¨å†ŒCharacterEncodingFilterï¼Œå†æ³¨å†ŒHiddenHttpMethodFilter</p><p>åŸå› ï¼š</p><ul><li><p>åœ¨ CharacterEncodingFilter ä¸­é€šè¿‡ request.setCharacterEncoding(encoding) æ–¹æ³•è®¾ç½®å­—ç¬¦é›†çš„</p></li><li><p>request.setCharacterEncoding(encoding) æ–¹æ³•è¦æ±‚å‰é¢ä¸èƒ½æœ‰ä»»ä½•è·å–è¯·æ±‚å‚æ•°çš„æ“ä½œ</p></li><li><p>è€Œ HiddenHttpMethodFilter æ°æ°æœ‰ä¸€ä¸ªè·å–è¯·æ±‚æ–¹å¼çš„æ“ä½œï¼š</p></li><li><pre><code class="java">String paramValue = request.getParameter(this.methodParam);<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"></span><br><span class="language-xml">### æµ‹è¯•</span><br><span class="language-xml"></span><br><span class="language-xml">```html</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@</span></span></span><span class="hljs-template-tag">&#123;/<span class="hljs-name">user</span>&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@</span></span></span><span class="hljs-template-tag">&#123;/<span class="hljs-name">user</span>/1&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>æŸ¥è¯¢å•ä¸ªç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@</span></span></span><span class="hljs-template-tag">&#123;/<span class="hljs-name">user</span>&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ·»åŠ ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@</span></span></span><span class="hljs-template-tag">&#123;/<span class="hljs-name">user</span>&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;put&quot;</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@</span></span></span><span class="hljs-template-tag">&#123;/<span class="hljs-name">user</span>/1&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;delete&quot;</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;åˆ é™¤ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br></code></pre></td></tr></table></figure></code></pre></li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAllUser</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯--&gt;/user--&gt;get&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//    @RequestMapping(value = &quot;/user/&#123;id&#125;&quot;,method = RequestMethod.GET)</span><br><span class="hljs-meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯--&gt;/user/&quot;</span>+id+<span class="hljs-string">&quot;--&gt;get&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//    @RequestMapping(value = &quot;/user&quot;,method = RequestMethod.POST)</span><br><span class="hljs-meta">@PostMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">insertUser</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;æ·»åŠ ç”¨æˆ·ä¿¡æ¯--&gt;/user--&gt;post&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//    @RequestMapping(value = &quot;/user&quot;,method = RequestMethod.PUT)</span><br><span class="hljs-meta">@PutMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">updateUser</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯--&gt;/user--&gt;put&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//    @RequestMapping(value = &quot;/user/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span><br><span class="hljs-meta">@DeleteMapping(&quot;/user/&#123;id&#125;&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;åˆ é™¤ç”¨æˆ·ä¿¡æ¯--&gt;/user/&quot;</span>+id+<span class="hljs-string">&quot;--&gt;delete&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="8ã€RESTfulæ¡ˆä¾‹"><a href="#8ã€RESTfulæ¡ˆä¾‹" class="headerlink" title="8ã€RESTfulæ¡ˆä¾‹"></a>8ã€RESTfulæ¡ˆä¾‹</h1><h2 id="8-1ã€å‡†å¤‡å·¥ä½œ"><a href="#8-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="8.1ã€å‡†å¤‡å·¥ä½œ"></a>8.1ã€å‡†å¤‡å·¥ä½œ</h2><p>å’Œä¼ ç»Ÿ CRUD ä¸€æ ·ï¼Œå®ç°å¯¹å‘˜å·¥ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ã€‚</p><ul><li>æ­å»ºç¯å¢ƒ</li><li>å‡†å¤‡å®ä½“ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.mvc.bean;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String lastName;<br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-comment">//1 male, 0 female</span><br>    <span class="hljs-keyword">private</span> Integer gender;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Integer id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLastName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> lastName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLastName</span><span class="hljs-params">(String lastName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.lastName = lastName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmail</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> email;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmail</span><span class="hljs-params">(String email)</span> &#123;<br>        <span class="hljs-built_in">this</span>.email = email;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getGender</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> gender;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setGender</span><span class="hljs-params">(Integer gender)</span> &#123;<br>        <span class="hljs-built_in">this</span>.gender = gender;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(Integer id, String lastName, String email, Integergender)</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.id = id;<br>        <span class="hljs-built_in">this</span>.lastName = lastName;<br>        <span class="hljs-built_in">this</span>.email = email;<br>        <span class="hljs-built_in">this</span>.gender = gender;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å‡†å¤‡daoæ¨¡æ‹Ÿæ•°æ®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.mvc.dao;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> com.atguigu.mvc.bean.Employee;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Repository;<br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeDao</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">static</span>&#123;<br>        employees = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;Integer, Employee&gt;();<br>        employees.put(<span class="hljs-number">1001</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">&quot;E-AA&quot;</span>, <span class="hljs-string">&quot;aa@163.com&quot;</span>, <span class="hljs-number">1</span>));<br>        employees.put(<span class="hljs-number">1002</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1002</span>, <span class="hljs-string">&quot;E-BB&quot;</span>, <span class="hljs-string">&quot;bb@163.com&quot;</span>, <span class="hljs-number">1</span>));<br>        employees.put(<span class="hljs-number">1003</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1003</span>, <span class="hljs-string">&quot;E-CC&quot;</span>, <span class="hljs-string">&quot;cc@163.com&quot;</span>, <span class="hljs-number">0</span>));<br>        employees.put(<span class="hljs-number">1004</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1004</span>, <span class="hljs-string">&quot;E-DD&quot;</span>, <span class="hljs-string">&quot;dd@163.com&quot;</span>, <span class="hljs-number">0</span>));<br>        employees.put(<span class="hljs-number">1005</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1005</span>, <span class="hljs-string">&quot;E-EE&quot;</span>, <span class="hljs-string">&quot;ee@163.com&quot;</span>, <span class="hljs-number">1</span>));<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">initId</span> <span class="hljs-operator">=</span> <span class="hljs-number">1006</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(Employee employee)</span>&#123;<br>        <span class="hljs-keyword">if</span>(employee.getId() == <span class="hljs-literal">null</span>)&#123;<br>            employee.setId(initId++);<br>        &#125;<br>        employees.put(employee.getId(), employee);<br>    &#125;<br>    <span class="hljs-keyword">public</span> Collection&lt;Employee&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> employees.values();<br>    &#125;<br>    <span class="hljs-keyword">public</span> Employee <span class="hljs-title function_">get</span><span class="hljs-params">(Integer id)</span>&#123;<br>        <span class="hljs-keyword">return</span> employees.get(id);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(Integer id)</span>&#123;<br>        employees.remove(id);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-2ã€åŠŸèƒ½æ¸…å•"><a href="#8-2ã€åŠŸèƒ½æ¸…å•" class="headerlink" title="8.2ã€åŠŸèƒ½æ¸…å•"></a>8.2ã€åŠŸèƒ½æ¸…å•</h2><table><thead><tr><th><strong>åŠŸèƒ½</strong></th><th><strong>URL</strong> <strong>åœ°å€</strong></th><th><strong>è¯·æ±‚æ–¹å¼</strong></th></tr></thead><tbody><tr><td>è®¿é—®é¦–é¡µâˆš</td><td>&#x2F;</td><td>GET</td></tr><tr><td>æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</td><td>&#x2F;employee</td><td>GET</td></tr><tr><td>è½¬è·³åˆ°æ·»åŠ æ•°æ®é¡µé¢</td><td>&#x2F;to&#x2F;add</td><td>GET</td></tr><tr><td>æ–°å¢å‘˜å·¥ä¿¡æ¯</td><td>&#x2F;employee</td><td>POST</td></tr><tr><td>è·³è½¬åˆ°ä¿®æ”¹é¡µé¢</td><td>&#x2F;employee&#x2F;1</td><td>GET</td></tr><tr><td>ä¿®æ”¹å‘˜å·¥ä¿¡æ¯</td><td>&#x2F;employee</td><td>PUT</td></tr><tr><td>åˆ é™¤å‘˜å·¥ä¿¡æ¯</td><td>&#x2F;employee&#x2F;1</td><td>DELETE</td></tr></tbody></table><h2 id="8-3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ"><a href="#8-3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ" class="headerlink" title="8.3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ"></a>8.3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ</h2><h3 id="â‘ é…ç½®view-controller"><a href="#â‘ é…ç½®view-controller" class="headerlink" title="â‘ é…ç½®view-controller"></a>â‘ é…ç½®view-controller</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">&quot;index&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºé¡µé¢"><a href="#â‘¡åˆ›å»ºé¡µé¢" class="headerlink" title="â‘¡åˆ›å»ºé¡µé¢"></a>â‘¡åˆ›å»ºé¡µé¢</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> &gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/employee&#125;&quot;</span>&gt;</span>è®¿é—®å‘˜å·¥ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"><a href="#8-4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®" class="headerlink" title="8.4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"></a>8.4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®</h2><h3 id="â‘ æ§åˆ¶å™¨æ–¹æ³•"><a href="#â‘ æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="â‘ æ§åˆ¶å™¨æ–¹æ³•"></a>â‘ æ§åˆ¶å™¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/employee&quot;,method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAllEmployee</span><span class="hljs-params">(Model model)</span>&#123;<br>    Collection&lt;Employee&gt; allEmployee = employeeDao.getAll();<br>    model.addAttribute(<span class="hljs-string">&quot;allEmployee&quot;</span>,allEmployee);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;employee_list&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºemployee-list-html"><a href="#â‘¡åˆ›å»ºemployee-list-html" class="headerlink" title="â‘¡åˆ›å»ºemployee_list.html"></a>â‘¡åˆ›å»ºemployee_list.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Employee Info<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">cellpadding</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">cellspacing</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataTable&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span>Employee Info<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>lastName<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>email<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>gender<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>options(<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/toAdd&#125;&quot;</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>)<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;employee : $&#123;allEmployee&#125;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;deleteA&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;deleteEmployee&quot;</span></span><br><span class="hljs-tag">                       <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>delete<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤"><a href="#8-5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤" class="headerlink" title="8.5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤"></a>8.5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤</h2><h3 id="â‘ åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•"><a href="#â‘ åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•" class="headerlink" title="â‘ åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•"></a>â‘ åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete_form&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- HiddenHttpMethodFilterè¦æ±‚ï¼šå¿…é¡»ä¼ è¾“_methodè¯·æ±‚å‚æ•°ï¼Œå¹¶ä¸”å€¼ä¸ºæœ€ç»ˆçš„è¯·æ±‚æ–¹å¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;delete&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¼•å…¥vue.js</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åˆ é™¤è¶…é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;deleteA&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;deleteEmployee&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>delete<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡vueå¤„ç†ç‚¹å‡»äº‹ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#dataTable&quot;</span>, <span class="hljs-comment">//æŒ‚è½½å®¹å™¨</span></span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//eventè¡¨ç¤ºå½“å‰äº‹ä»¶</span></span><br><span class="language-javascript">            <span class="hljs-attr">deleteEmployee</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//é€šè¿‡idè·å–è¡¨å•æ ‡ç­¾</span></span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> delete_form = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;delete_form&quot;</span>);</span><br><span class="language-javascript">                <span class="hljs-comment">//å°†è§¦å‘äº‹ä»¶çš„è¶…é“¾æ¥çš„hrefå±æ€§ä¸ºè¡¨å•çš„actionå±æ€§èµ‹å€¼</span></span><br><span class="language-javascript">                delete_form.<span class="hljs-property">action</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">href</span>;</span><br><span class="language-javascript">                <span class="hljs-comment">//æäº¤è¡¨å•</span></span><br><span class="language-javascript">                delete_form.<span class="hljs-title function_">submit</span>();</span><br><span class="language-javascript">                <span class="hljs-comment">//é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º</span></span><br><span class="language-javascript">                event.<span class="hljs-title function_">preventDefault</span>();</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¢æ§åˆ¶å™¨æ–¹æ³•"><a href="#â‘¢æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="â‘¢æ§åˆ¶å™¨æ–¹æ³•"></a>â‘¢æ§åˆ¶å™¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteEmployee</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;<br>    employeeDao.delete(id);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/employee&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"><a href="#8-6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢" class="headerlink" title="8.6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"></a>8.6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢</h2><h3 id="â‘ é…ç½®view-controller-1"><a href="#â‘ é…ç½®view-controller-1" class="headerlink" title="â‘ é…ç½®view-controller"></a>â‘ é…ç½®view-controller</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/to/add&quot;</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">&quot;employee_add&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:view-controller</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºemployee-add-html"><a href="#â‘¡åˆ›å»ºemployee-add-html" class="headerlink" title="â‘¡åˆ›å»ºemployee_add.html"></a>â‘¡åˆ›å»ºemployee_add.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Add Employee<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/employee&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>            lastName:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lastName&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            email:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            gender:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>male<br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span>female<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜"><a href="#8-7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜" class="headerlink" title="8.7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜"></a>8.7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜</h2><h3 id="â‘ æ§åˆ¶å™¨æ–¹æ³•-1"><a href="#â‘ æ§åˆ¶å™¨æ–¹æ³•-1" class="headerlink" title="â‘ æ§åˆ¶å™¨æ–¹æ³•"></a>â‘ æ§åˆ¶å™¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.POST)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">addEmployee</span><span class="hljs-params">(Employee employee)</span>&#123;<br>    employeeDao.save(employee);<br>    <span class="hljs-comment">//é‡å®šå‘åˆ°åˆ—è¡¨åŠŸèƒ½ï¼š/employee</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/employee&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"><a href="#8-8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢" class="headerlink" title="8.8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"></a>8.8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢</h2><h3 id="â‘ ä¿®æ”¹è¶…é“¾æ¥"><a href="#â‘ ä¿®æ”¹è¶…é“¾æ¥" class="headerlink" title="â‘ ä¿®æ”¹è¶…é“¾æ¥"></a>â‘ ä¿®æ”¹è¶…é“¾æ¥</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡æ§åˆ¶å™¨æ–¹æ³•"><a href="#â‘¡æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="â‘¡æ§åˆ¶å™¨æ–¹æ³•"></a>â‘¡æ§åˆ¶å™¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmployeeById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span>&#123;<br>    <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> employeeDao.get(id);<br>    model.addAttribute(<span class="hljs-string">&quot;employee&quot;</span>, employee);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;employee_update&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¢åˆ›å»ºemployee-update-html"><a href="#â‘¢åˆ›å»ºemployee-update-html" class="headerlink" title="â‘¢åˆ›å»ºemployee_update.html"></a>â‘¢åˆ›å»ºemployee_update.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Update Employee<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/employee&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;put&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><br>            lastName:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lastName&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            email:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">                th:field=&quot;$&#123;employee.gender&#125;&quot;å¯ç”¨äºå•é€‰æ¡†æˆ–å¤é€‰æ¡†çš„å›æ˜¾</span><br><span class="hljs-comment">                è‹¥å•é€‰æ¡†çš„valueå’Œemployee.genderçš„å€¼ä¸€è‡´ï¼Œåˆ™æ·»åŠ checked=&quot;checked&quot;å±æ€§</span><br><span class="hljs-comment">--&gt;</span><br>            gender:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">th:field</span>=<span class="hljs-string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>male<br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">th:field</span>=<span class="hljs-string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>female<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;update&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°"><a href="#8-9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°" class="headerlink" title="8.9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°"></a>8.9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°</h2><h3 id="â‘ æ§åˆ¶å™¨æ–¹æ³•-2"><a href="#â‘ æ§åˆ¶å™¨æ–¹æ³•-2" class="headerlink" title="â‘ æ§åˆ¶å™¨æ–¹æ³•"></a>â‘ æ§åˆ¶å™¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.PUT)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">updateEmployee</span><span class="hljs-params">(Employee employee)</span>&#123;<br>    employeeDao.save(employee);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/employee&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="9ã€SpringMVCå¤„ç†ajaxè¯·æ±‚"><a href="#9ã€SpringMVCå¤„ç†ajaxè¯·æ±‚" class="headerlink" title="9ã€SpringMVCå¤„ç†ajaxè¯·æ±‚"></a>9ã€SpringMVCå¤„ç†ajaxè¯·æ±‚</h1><h2 id="9-1ã€-RequestBody"><a href="#9-1ã€-RequestBody" class="headerlink" title="9.1ã€@RequestBody"></a>9.1ã€@RequestBody</h2><p>@RequestBodyå¯ä»¥è·å–è¯·æ±‚ä½“ä¿¡æ¯ï¼Œä½¿ç”¨@RequestBodyæ³¨è§£æ ‡è¯†æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚ä½“å°±ä¼šä¸ºå½“å‰æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚èµ‹å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--æ­¤æ—¶å¿…é¡»ä½¿ç”¨postè¯·æ±‚æ–¹å¼ï¼Œå› ä¸ºgetè¯·æ±‚æ²¡æœ‰è¯·æ±‚ä½“--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/test/RequestBody&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/test/RequestBody&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestBody</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String requestBody)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;requestBody:&quot;</span>+requestBody);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><p>requestBody:username&#x3D;admin&amp;password&#x3D;123456</p><h2 id="9-2ã€-RequestBodyè·å–jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°"><a href="#9-2ã€-RequestBodyè·å–jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°" class="headerlink" title="9.2ã€@RequestBodyè·å–jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°"></a>9.2ã€@RequestBodyè·å–jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°</h2><blockquote><p>åœ¨ä½¿ç”¨äº†axioså‘é€ajaxè¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨å‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚å‚æ•°æœ‰ä¸¤ç§æ ¼å¼ï¼š</p><p>1ã€name&#x3D;value&amp;name&#x3D;valueâ€¦ï¼Œæ­¤æ—¶çš„è¯·æ±‚å‚æ•°å¯ä»¥é€šè¿‡request.getParameter()è·å–ï¼Œå¯¹åº”</p><p>SpringMVCä¸­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–æ­¤ç±»è¯·æ±‚å‚æ•°</p><p>2ã€{key:value,key:value,â€¦}ï¼Œæ­¤æ—¶æ— æ³•é€šè¿‡request.getParameter()è·å–ï¼Œä¹‹å‰æˆ‘ä»¬ä½¿ç”¨æ“ä½œjsonçš„ç›¸å…³jaråŒ…gsonæˆ–jacksonå¤„ç†æ­¤ç±»è¯·æ±‚å‚æ•°ï¼Œå¯ä»¥å°†å…¶è½¬æ¢ä¸ºæŒ‡å®šçš„å®ä½“ç±»å¯¹è±¡æˆ–mapé›†åˆã€‚åœ¨SpringMVCä¸­ï¼Œç›´æ¥ä½¿ç”¨@RequestBodyæ³¨è§£æ ‡è¯†æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚å³å¯å°†æ­¤ç±»è¯·æ±‚å‚æ•°è½¬æ¢ä¸ºjavaå¯¹è±¡</p></blockquote><p>ä½¿ç”¨@RequestBodyè·å–jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°çš„æ¡ä»¶ï¼š</p><p>1ã€å¯¼å…¥jacksonçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2ã€SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>3ã€åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œè®¾ç½®jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°è¦è½¬æ¢æˆçš„javaç±»å‹ï¼ˆå®ä½“ç±»æˆ–mapï¼‰çš„å‚æ•°ï¼Œå¹¶ä½¿ç”¨@RequestBodyæ³¨è§£æ ‡è¯†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æµ‹è¯•@RequestBodyè·å–jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;testRequestBody()&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/vue.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/axios.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">testRequestBody</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                axios.<span class="hljs-title function_">post</span>(</span><br><span class="language-javascript">                    <span class="hljs-string">&quot;/SpringMVC/test/RequestBody/json&quot;</span>,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">username</span>:<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-attr">password</span>:<span class="hljs-string">&quot;123456&quot;</span>&#125;</span><br><span class="language-javascript">                ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">                &#125;);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å°†jsonæ ¼å¼çš„æ•°æ®è½¬æ¢ä¸ºmapé›†åˆ</span><br><span class="hljs-meta">@RequestMapping(&quot;/test/RequestBody/json&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRequestBody</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; map,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    System.out.println(map);<br>    <span class="hljs-comment">//&#123;username=admin, password=123456&#125;</span><br>    response.getWriter().print(<span class="hljs-string">&quot;hello,axios&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//å°†jsonæ ¼å¼çš„æ•°æ®è½¬æ¢ä¸ºå®ä½“ç±»å¯¹è±¡</span><br><span class="hljs-meta">@RequestMapping(&quot;/test/RequestBody/json&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRequestBody</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user, HttpServletResponseresponse)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    System.out.println(user);<br>    <span class="hljs-comment">//User&#123;id=null, username=&#x27;admin&#x27;, password=&#x27;123456&#x27;, age=null, gender=&#x27;null&#x27;&#125;</span><br>response.getWriter().print(<span class="hljs-string">&quot;hello,axios&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-3ã€-ResponseBody"><a href="#9-3ã€-ResponseBody" class="headerlink" title="9.3ã€@ResponseBody"></a>9.3ã€@ResponseBody</h2><p>@ResponseBodyç”¨äºæ ‡è¯†ä¸€ä¸ªæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¯ä»¥å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå“åº”æŠ¥æ–‡çš„å“åº”ä½“å“åº”åˆ°æµè§ˆå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testResponseBody&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testResponseBody</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//æ­¤æ—¶ä¼šè·³è½¬åˆ°é€»è¾‘è§†å›¾successæ‰€å¯¹åº”çš„é¡µé¢</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br><span class="hljs-meta">@RequestMapping(&quot;/testResponseBody&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testResponseBody</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//æ­¤æ—¶å“åº”æµè§ˆå™¨æ•°æ®success</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-4ã€-ResponseBodyå“åº”æµè§ˆå™¨jsonæ•°æ®"><a href="#9-4ã€-ResponseBodyå“åº”æµè§ˆå™¨jsonæ•°æ®" class="headerlink" title="9.4ã€@ResponseBodyå“åº”æµè§ˆå™¨jsonæ•°æ®"></a>9.4ã€@ResponseBodyå“åº”æµè§ˆå™¨jsonæ•°æ®</h2><p>æœåŠ¡å™¨å¤„ç†ajaxè¯·æ±‚ä¹‹åï¼Œå¤§å¤šæ•°æƒ…å†µéƒ½éœ€è¦å‘æµè§ˆå™¨å“åº”ä¸€ä¸ªjavaå¯¹è±¡ï¼Œæ­¤æ—¶å¿…é¡»å°†javaå¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²æ‰å¯ä»¥å“åº”åˆ°æµè§ˆå™¨ï¼Œä¹‹å‰æˆ‘ä»¬ä½¿ç”¨æ“ä½œjsonæ•°æ®çš„jaråŒ…gsonæˆ–jacksonå°†javaå¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²ã€‚åœ¨SpringMVCä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨@ResponseBodyæ³¨è§£å®ç°æ­¤åŠŸèƒ½</p><p>@ResponseBodyå“åº”æµè§ˆå™¨jsonæ•°æ®çš„æ¡ä»¶ï¼š</p><p>1ã€å¯¼å…¥jacksonçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2ã€SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>3ã€ä½¿ç”¨@ResponseBodyæ³¨è§£æ ‡è¯†æ§åˆ¶å™¨æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­ï¼Œå°†éœ€è¦è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²å¹¶å“åº”åˆ°æµè§ˆå™¨çš„javaå¯¹è±¡ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ­¤æ—¶SpringMVCå°±å¯ä»¥å°†æ­¤å¯¹è±¡ç›´æ¥è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²å¹¶å“åº”åˆ°æµè§ˆå™¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æµ‹è¯•@ResponseBodyå“åº”æµè§ˆå™¨jsonæ ¼å¼çš„æ•°æ®&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;testResponseBody()&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/vue.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/axios.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">testResponseBody</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/SpringMVC/test/ResponseBody/json&quot;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">                &#125;);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å“åº”æµè§ˆå™¨listé›†åˆ</span><br><span class="hljs-meta">@RequestMapping(&quot;/test/ResponseBody/json&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">testResponseBody</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;admin1&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;admin2&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1003</span>,<span class="hljs-string">&quot;admin3&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    List&lt;User&gt; list = Arrays.asList(user1, user2, user3);<br>    <span class="hljs-keyword">return</span> list;<br>&#125;<br><span class="hljs-comment">//å“åº”æµè§ˆå™¨mapé›†åˆ</span><br><span class="hljs-meta">@RequestMapping(&quot;/test/ResponseBody/json&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">testResponseBody</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;admin1&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;admin2&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1003</span>,<span class="hljs-string">&quot;admin3&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    map.put(<span class="hljs-string">&quot;1001&quot;</span>, user1);<br>    map.put(<span class="hljs-string">&quot;1002&quot;</span>, user2);<br>    map.put(<span class="hljs-string">&quot;1003&quot;</span>, user3);<br>    <span class="hljs-keyword">return</span> map;<br>&#125;<br><span class="hljs-comment">//å“åº”æµè§ˆå™¨å®ä½“ç±»å¯¹è±¡</span><br><span class="hljs-meta">@RequestMapping(&quot;/test/ResponseBody/json&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> User <span class="hljs-title function_">testResponseBody</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> user;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-5ã€-RestControlleræ³¨è§£"><a href="#9-5ã€-RestControlleræ³¨è§£" class="headerlink" title="9.5ã€@RestControlleræ³¨è§£"></a>9.5ã€@RestControlleræ³¨è§£</h2><p>@RestControlleræ³¨è§£æ˜¯springMVCæä¾›çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œæ ‡è¯†åœ¨æ§åˆ¶å™¨çš„ç±»ä¸Šï¼Œå°±ç›¸å½“äºä¸ºç±»æ·»åŠ äº†</p><p>@Controlleræ³¨è§£ï¼Œå¹¶ä¸”ä¸ºå…¶ä¸­çš„æ¯ä¸ªæ–¹æ³•æ·»åŠ äº†@ResponseBodyæ³¨è§£</p><h1 id="10ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#10ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="10ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>10ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h1><h2 id="10-1ã€æ–‡ä»¶ä¸‹è½½"><a href="#10-1ã€æ–‡ä»¶ä¸‹è½½" class="headerlink" title="10.1ã€æ–‡ä»¶ä¸‹è½½"></a>10.1ã€æ–‡ä»¶ä¸‹è½½</h2><p>ResponseEntityç”¨äºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œè¯¥æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å“åº”åˆ°æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡</p><p>ä½¿ç”¨ResponseEntityå®ç°ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testDown&quot;)</span><br><span class="hljs-keyword">public</span> ResponseEntity&lt;<span class="hljs-type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-comment">//è·å–ServletContextå¯¹è±¡</span><br>    <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> session.getServletContext();<br>    <span class="hljs-comment">//è·å–æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„çœŸå®è·¯å¾„</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">realPath</span> <span class="hljs-operator">=</span> servletContext.getRealPath(<span class="hljs-string">&quot;/static/img/1.jpg&quot;</span>);<br>  <span class="hljs-comment">//å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼ŒFile.separatorä»£è¡¨åˆ†éš”ç¬¦ / æˆ– \ ï¼Œèƒ½é€‚åº”ä¸åŒç³»ç»Ÿ</span><br>  <span class="hljs-comment">//realPath = realPath + File.separator + &quot;img&quot; + File.separator + &quot;duolaAmeng.png&quot;;</span><br>    <span class="hljs-comment">//åˆ›å»ºè¾“å…¥æµ</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(realPath);<br>    <span class="hljs-comment">//åˆ›å»ºå­—èŠ‚æ•°ç»„, is.available() è·å–è¾“å…¥æµæ‰€å¯¹åº”æ–‡ä»¶çš„å­—èŠ‚æ•°</span><br>    <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[is.available()];<br>    <span class="hljs-comment">//å°†æµè¯»åˆ°å­—èŠ‚æ•°ç»„ä¸­</span><br>    is.read(bytes);<br>    <span class="hljs-comment">//åˆ›å»ºHttpHeaderså¯¹è±¡è®¾ç½®å“åº”å¤´ä¿¡æ¯</span><br>    MultiValueMap&lt;String, String&gt; headers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();<br>    <span class="hljs-comment">//è®¾ç½®è¦ä¸‹è½½æ–¹å¼ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ä»¥åŠä¸‹è½½æ–‡ä»¶çš„åå­—</span><br>    headers.add(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, <span class="hljs-string">&quot;attachment;filename=1.jpg&quot;</span>);<br>    <span class="hljs-comment">//è®¾ç½®å“åº”çŠ¶æ€ç </span><br>    <span class="hljs-type">HttpStatus</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> HttpStatus.OK;<br>    <span class="hljs-comment">//åˆ›å»ºResponseEntityå¯¹è±¡</span><br>    ResponseEntity&lt;<span class="hljs-type">byte</span>[]&gt; responseEntity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);<br>    <span class="hljs-comment">//å…³é—­è¾“å…¥æµ</span><br>    is.close();<br>    <span class="hljs-keyword">return</span> responseEntity;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="10-2ã€æ–‡ä»¶ä¸Šä¼ "><a href="#10-2ã€æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="10.2ã€æ–‡ä»¶ä¸Šä¼ "></a>10.2ã€æ–‡ä»¶ä¸Šä¼ </h2><p>æ–‡ä»¶ä¸Šä¼ è¦æ±‚formè¡¨å•çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpostï¼Œå¹¶ä¸”æ·»åŠ å±æ€§ <strong>enctype&#x3D;â€multipart&#x2F;form-dataâ€</strong></p><p>SpringMVCä¸­å°†ä¸Šä¼ çš„æ–‡ä»¶å°è£…åˆ° MultipartFile å¯¹è±¡ä¸­ï¼Œé€šè¿‡æ­¤å¯¹è±¡å¯ä»¥è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯</p><p>ä¸Šä¼ æ­¥éª¤ï¼š</p><h3 id="â‘ æ·»åŠ ä¾èµ–ï¼š"><a href="#â‘ æ·»åŠ ä¾èµ–ï¼š" class="headerlink" title="â‘ æ·»åŠ ä¾èµ–ï¼š"></a>â‘ æ·»åŠ ä¾èµ–ï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š"><a href="#â‘¡åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š" class="headerlink" title="â‘¡åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š"></a>â‘¡åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¿…é¡»é€šè¿‡æ–‡ä»¶è§£æå™¨çš„è§£ææ‰èƒ½å°†æ–‡ä»¶è½¬æ¢ä¸ºMultipartFileå¯¹è±¡--&gt;</span><br><span class="hljs-comment">&lt;!--idå›ºå®šä¸ºmultipartResolver--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;multipartResolver&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¢æ§åˆ¶å™¨æ–¹æ³•ï¼š"><a href="#â‘¢æ§åˆ¶å™¨æ–¹æ³•ï¼š" class="headerlink" title="â‘¢æ§åˆ¶å™¨æ–¹æ³•ï¼š"></a>â‘¢æ§åˆ¶å™¨æ–¹æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/testUp&quot;)</span>  <span class="hljs-comment">//name è¦å’Œä¸Šä¼ è¡¨å•ä¸­è®¾ç½®çš„nameä¸€è‡´</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testUp</span><span class="hljs-params">(MultipartFile photo, HttpSession session)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-comment">//è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„æ–‡ä»¶å</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> photo.getOriginalFilename();<br>    <span class="hljs-comment">//å¤„ç†æ–‡ä»¶é‡åé—®é¢˜</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">hzName</span> <span class="hljs-operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>));<br>    fileName = UUID.randomUUID().toString() + hzName;<br>    <span class="hljs-comment">//è·å–æœåŠ¡å™¨ä¸­photoç›®å½•çš„è·¯å¾„</span><br>    <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> session.getServletContext();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">photoPath</span> <span class="hljs-operator">=</span> servletContext.getRealPath(<span class="hljs-string">&quot;photo&quot;</span>);<br>    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(photoPath);<br>    <span class="hljs-keyword">if</span>(!file.exists())&#123;<br>        file.mkdir();<br>    &#125;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">finalPath</span> <span class="hljs-operator">=</span> photoPath + File.separator + fileName;<br>    <span class="hljs-comment">//å®ç°ä¸Šä¼ åŠŸèƒ½</span><br>    photo.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(finalPath));<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--enctype=&quot;multipart/form-data&quot;ï¼šä»¥äºŒè¿›åˆ¶æ–¹å¼ä¼ è¾“æ•°æ®--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/test/upload&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>    ä¸Šä¼ ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;photo&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¸Šä¼ &quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="11ã€æ‹¦æˆªå™¨"><a href="#11ã€æ‹¦æˆªå™¨" class="headerlink" title="11ã€æ‹¦æˆªå™¨"></a>11ã€æ‹¦æˆªå™¨</h1><h2 id="11-1ã€æ‹¦æˆªå™¨çš„é…ç½®"><a href="#11-1ã€æ‹¦æˆªå™¨çš„é…ç½®" class="headerlink" title="11.1ã€æ‹¦æˆªå™¨çš„é…ç½®"></a>11.1ã€æ‹¦æˆªå™¨çš„é…ç½®</h2><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨ç”¨äºæ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œ</p><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptor</p><p>SpringMVCçš„æ‹¦æˆªå™¨å¿…é¡»åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.interceptor.FirstInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šä¸¤ç§é…ç½®æ–¹å¼éƒ½æ˜¯å¯¹DispatcherServletæ‰€å¤„ç†çš„æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆª --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/testRequestEntity&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ä»¥ä¸Šé…ç½®æ–¹å¼å¯ä»¥é€šè¿‡refæˆ–beanæ ‡ç­¾è®¾ç½®æ‹¦æˆªå™¨ï¼Œé€šè¿‡mvc:mappingè®¾ç½®éœ€è¦æ‹¦æˆªçš„è¯·æ±‚ï¼Œ</span><br><span class="hljs-comment">    é€šè¿‡mvc:exclude-mappingè®¾ç½®éœ€è¦æ’é™¤çš„è¯·æ±‚ï¼Œå³ä¸éœ€è¦æ‹¦æˆªçš„è¯·æ±‚</span><br><span class="hljs-comment">--&gt;</span><br></code></pre></td></tr></table></figure><h2 id="11-2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"><a href="#11-2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•" class="headerlink" title="11.2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"></a>11.2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•</h2><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨æœ‰ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</p><p><strong>preHandle</strong>ï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ preHandle()ï¼Œå…¶booleanç±»å‹çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‹¦æˆªæˆ–æ”¾è¡Œï¼Œè¿”å›trueä¸ºæ”¾è¡Œï¼Œå³è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ï¼›è¿”å›falseè¡¨ç¤ºæ‹¦æˆªï¼Œå³ä¸è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•</p><p><strong>postHandle</strong>ï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ postHandle()</p><p><strong>afterCompletion</strong>ï¼šå¤„ç†å®Œè§†å›¾å’Œæ¨¡å‹æ•°æ®ï¼Œæ¸²æŸ“è§†å›¾å®Œæ¯•ä¹‹åæ‰§è¡ŒafterCompletion()</p><h2 id="11-3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"><a href="#11-3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="11.3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"></a>11.3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</h2><p>â‘ è‹¥æ¯ä¸ªæ‹¦æˆªå™¨çš„preHandle()éƒ½è¿”å›true</p><p>æ­¤æ—¶å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå’Œæ‹¦æˆªå™¨åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶çš„é…ç½®é¡ºåºæœ‰å…³ï¼š</p><p>preHandle()ä¼šæŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œï¼Œè€ŒpostHandle()å’ŒafterCompletion()ä¼šæŒ‰ç…§é…ç½®çš„ååºæ‰§è¡Œï¼ˆç›¸å½“äºåŒ…å«ï¼‰</p><p>â‘¡è‹¥æŸä¸ªæ‹¦æˆªå™¨çš„preHandle()è¿”å›äº†false</p><p>preHandle()è¿”å›falseå’Œå®ƒä¹‹å‰çš„æ‹¦æˆªå™¨çš„preHandle()éƒ½ä¼šæ‰§è¡Œï¼ŒpostHandle()éƒ½ä¸æ‰§è¡Œï¼Œè¿”å›falseçš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‹¦æˆªå™¨çš„afterCompletion()ä¼šæ‰§è¡Œ</p><h1 id="12ã€å¼‚å¸¸å¤„ç†å™¨"><a href="#12ã€å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="12ã€å¼‚å¸¸å¤„ç†å™¨"></a>12ã€å¼‚å¸¸å¤„ç†å™¨</h1><h2 id="12-1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"><a href="#12-1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="12.1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"></a>12.1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†</h2><p>SpringMVCæä¾›äº†ä¸€ä¸ªå¤„ç†æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‡ºç°çš„å¼‚å¸¸çš„æ¥å£ï¼šHandlerExceptionResolver</p><p>HandlerExceptionResolveræ¥å£çš„å®ç°ç±»æœ‰ï¼šDefaultHandlerExceptionResolverå’Œ</p><p>SimpleMappingExceptionResolver</p><p>SpringMVCæä¾›äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolverï¼Œä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;exceptionMappings&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">                propertiesçš„é”®è¡¨ç¤ºå¤„ç†å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸</span><br><span class="hljs-comment">                propertiesçš„å€¼è¡¨ç¤ºè‹¥å‡ºç°æŒ‡å®šå¼‚å¸¸æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„è§†å›¾åç§°ï¼Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢</span><br><span class="hljs-comment">--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;java.lang.ArithmeticException&quot;</span>&gt;</span>error<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">exceptionAttributeå±æ€§è®¾ç½®ä¸€ä¸ªå±æ€§åï¼Œå°†å‡ºç°çš„å¼‚å¸¸ä¿¡æ¯åœ¨è¯·æ±‚åŸŸä¸­è¿›è¡Œå…±äº«</span><br><span class="hljs-comment">--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;exceptionAttribute&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ex&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="12-2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"><a href="#12-2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="12.2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"></a>12.2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@ControllerAdviceå°†å½“å‰ç±»æ ‡è¯†ä¸ºå¼‚å¸¸å¤„ç†çš„ç»„ä»¶</span><br><span class="hljs-meta">@ControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionController</span> &#123;<br>    <span class="hljs-comment">//@ExceptionHandlerç”¨äºè®¾ç½®æ‰€æ ‡è¯†æ–¹æ³•å¤„ç†çš„å¼‚å¸¸</span><br>    <span class="hljs-meta">@ExceptionHandler(ArithmeticException.class)</span><br>    <span class="hljs-comment">//exè¡¨ç¤ºå½“å‰è¯·æ±‚å¤„ç†ä¸­å‡ºç°çš„å¼‚å¸¸å¯¹è±¡</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleArithmeticException</span><span class="hljs-params">(Exception ex, Model model)</span>&#123;<br>        model.addAttribute(<span class="hljs-string">&quot;ex&quot;</span>, ex);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;error&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="13ã€æ³¨è§£é…ç½®SpringMVC"><a href="#13ã€æ³¨è§£é…ç½®SpringMVC" class="headerlink" title="13ã€æ³¨è§£é…ç½®SpringMVC"></a>13ã€æ³¨è§£é…ç½®SpringMVC</h1><p>ä½¿ç”¨é…ç½®ç±»å’Œæ³¨è§£ä»£æ›¿web.xmlå’ŒSpringMVCé…ç½®æ–‡ä»¶çš„åŠŸèƒ½</p><h2 id="13-1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web-xml"><a href="#13-1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web-xml" class="headerlink" title="13.1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml"></a>13.1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml</h2><p>åœ¨Servlet3.0ç¯å¢ƒä¸­ï¼Œå®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç°javax.servlet.ServletContainerInitializeræ¥å£çš„ç±»ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒï¼ˆç›¸å½“äºweb.xmlï¼‰æ¥é…ç½®Servletå®¹å™¨ï¼ˆTomcatï¼‰ã€‚ Springæä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œåä¸ºSpringServletContainerInitializerï¼Œè¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç°WebApplicationInitializerçš„ç±»å¹¶å°†é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆã€‚Spring3.2å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„WebApplicationInitializeråŸºç¡€å®ç°ï¼Œåä¸ºAbstractAnnotationConfigDispatcherServletInitializerï¼Œå½“æˆ‘ä»¬çš„ç±»ç»§æ‰¿äº†AbstractAnnotationConfigDispatcherServletInitializer å¹¶å°†å…¶éƒ¨ç½²åˆ°Servlet3.0å®¹å™¨ï¼ˆTomcatï¼‰çš„æ—¶å€™ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒï¼Œå¹¶ç”¨å®ƒæ¥é…ç½®Servletä¸Šä¸‹æ–‡ï¼ˆä»£æ›¿web.xmlï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebInit</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡å®šspringçš„é…ç½®ç±»</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[]&#123;SpringConfig.class&#125;;<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡å®šSpringMVCçš„é…ç½®ç±»</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[]&#123;WebConfig.class&#125;;<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡å®šDispatcherServletçš„æ˜ å°„è§„åˆ™ï¼Œå³url-pattern</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> String[] getServletMappings() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;/&quot;</span>&#125;;<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ è¿‡æ»¤å™¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Filter[] getServletFilters() &#123;<br>        <span class="hljs-type">CharacterEncodingFilter</span> <span class="hljs-variable">encodingFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CharacterEncodingFilter</span>();<br>        encodingFilter.setEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>        encodingFilter.setForceRequestEncoding(<span class="hljs-literal">true</span>);<br>        <span class="hljs-type">HiddenHttpMethodFilter</span> <span class="hljs-variable">hiddenHttpMethodFilter</span> <span class="hljs-operator">=</span> newHiddenHttpMethodFilter();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Filter</span>[]&#123;encodingFilter, hiddenHttpMethodFilter&#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13-2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶"><a href="#13-2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶" class="headerlink" title="13.2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶"></a>13.2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span>  <span class="hljs-comment">//æ ‡è¯†ä¸ºé…ç½®ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfig</span> &#123;<br>    <span class="hljs-comment">//ssmæ•´åˆä¹‹åï¼Œspringçš„é…ç½®ä¿¡æ¯å†™åœ¨æ­¤ç±»ä¸­</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13-3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶"><a href="#13-3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="13.3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶"></a>13.3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.config;<br><br><span class="hljs-keyword">import</span> com.atguigu.interceptor.FirstInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.ComponentScan;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.context.ContextLoader;<br><span class="hljs-keyword">import</span> org.springframework.web.context.WebApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartResolver;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerExceptionResolver;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.ViewResolver;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.*;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.handler.SimpleMappingExceptionResolver;<br><span class="hljs-keyword">import</span> org.thymeleaf.spring5.SpringTemplateEngine;<br><span class="hljs-keyword">import</span> org.thymeleaf.spring5.view.ThymeleafViewResolver;<br><span class="hljs-keyword">import</span> org.thymeleaf.templatemode.TemplateMode;<br><span class="hljs-keyword">import</span> org.thymeleaf.templateresolver.ITemplateResolver;<br><span class="hljs-keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Date:2022/7/10</span><br><span class="hljs-comment"> * Author:ybc</span><br><span class="hljs-comment"> * Description:ä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</span><br><span class="hljs-comment"> * æ‰«æç»„ä»¶ã€è§†å›¾è§£æå™¨ã€é»˜è®¤çš„servletã€mvcçš„æ³¨è§£é©±åŠ¨</span><br><span class="hljs-comment"> * è§†å›¾æ§åˆ¶å™¨ã€æ–‡ä»¶ä¸Šä¼ è§£æå™¨ã€æ‹¦æˆªå™¨ã€å¼‚å¸¸è§£æå™¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//å°†ç±»æ ‡è¯†ä¸ºé…ç½®ç±»</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-comment">//æ‰«æç»„ä»¶</span><br><span class="hljs-meta">@ComponentScan(&quot;com.atguigu.controller&quot;)</span><br><span class="hljs-comment">//å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨</span><br><span class="hljs-meta">@EnableWebMvc</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureDefaultServletHandling</span><span class="hljs-params">(DefaultServletHandlerConfigurer configurer)</span> &#123;<br>        configurer.enable();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//é…ç½®è§†å›¾è§£æå™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> &#123;<br>        registry.addViewController(<span class="hljs-string">&quot;/&quot;</span>).setViewName(<span class="hljs-string">&quot;index&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//@Beanæ³¨è§£å¯ä»¥å°†æ ‡è¯†çš„æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºbeanè¿›è¡Œç®¡ç†ï¼Œbeançš„idä¸ºæ–¹æ³•çš„æ–¹æ³•å</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-comment">//æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span><br>    <span class="hljs-keyword">public</span> CommonsMultipartResolver <span class="hljs-title function_">multipartResolver</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommonsMultipartResolver</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//æ‹¦æˆªå™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br>        <span class="hljs-type">FirstInterceptor</span> <span class="hljs-variable">firstInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FirstInterceptor</span>();<br>        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="hljs-string">&quot;/**&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//é…ç½®å¼‚å¸¸è§£æå™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureHandlerExceptionResolvers</span><span class="hljs-params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> &#123;<br>        <span class="hljs-type">SimpleMappingExceptionResolver</span> <span class="hljs-variable">exceptionResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleMappingExceptionResolver</span>();<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        prop.setProperty(<span class="hljs-string">&quot;java.lang.ArithmeticException&quot;</span>, <span class="hljs-string">&quot;error&quot;</span>);<br>        exceptionResolver.setExceptionMappings(prop);<br>        exceptionResolver.setExceptionAttribute(<span class="hljs-string">&quot;ex&quot;</span>);<br>        resolvers.add(exceptionResolver);<br>    &#125;<br><br>    <span class="hljs-comment">//é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ITemplateResolver <span class="hljs-title function_">templateResolver</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">webApplicationContext</span> <span class="hljs-operator">=</span> ContextLoader.getCurrentWebApplicationContext();<br>        <span class="hljs-comment">// ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—</span><br>        <span class="hljs-type">ServletContextTemplateResolver</span> <span class="hljs-variable">templateResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletContextTemplateResolver</span>(<br>                webApplicationContext.getServletContext());<br>        templateResolver.setPrefix(<span class="hljs-string">&quot;/WEB-INF/templates/&quot;</span>);<br>        templateResolver.setSuffix(<span class="hljs-string">&quot;.html&quot;</span>);<br>        templateResolver.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>        templateResolver.setTemplateMode(TemplateMode.HTML);<br>        <span class="hljs-keyword">return</span> templateResolver;<br>    &#125;<br><br>    <span class="hljs-comment">//ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SpringTemplateEngine <span class="hljs-title function_">templateEngine</span><span class="hljs-params">(ITemplateResolver templateResolver)</span> &#123;<br>        <span class="hljs-type">SpringTemplateEngine</span> <span class="hljs-variable">templateEngine</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringTemplateEngine</span>();<br>        templateEngine.setTemplateResolver(templateResolver);<br>        <span class="hljs-keyword">return</span> templateEngine;<br>    &#125;<br><br>    <span class="hljs-comment">//ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ViewResolver <span class="hljs-title function_">viewResolver</span><span class="hljs-params">(SpringTemplateEngine templateEngine)</span> &#123;<br>        <span class="hljs-type">ThymeleafViewResolver</span> <span class="hljs-variable">viewResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThymeleafViewResolver</span>();<br>        viewResolver.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>        viewResolver.setTemplateEngine(templateEngine);<br>        <span class="hljs-keyword">return</span> viewResolver;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="13-4ã€æµ‹è¯•åŠŸèƒ½"><a href="#13-4ã€æµ‹è¯•åŠŸèƒ½" class="headerlink" title="13.4ã€æµ‹è¯•åŠŸèƒ½"></a>13.4ã€æµ‹è¯•åŠŸèƒ½</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">index</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="14ã€SpringMVCæ‰§è¡Œæµç¨‹"><a href="#14ã€SpringMVCæ‰§è¡Œæµç¨‹" class="headerlink" title="14ã€SpringMVCæ‰§è¡Œæµç¨‹"></a>14ã€SpringMVCæ‰§è¡Œæµç¨‹</h1><h2 id="14-1ã€SpringMVCå¸¸ç”¨ç»„ä»¶"><a href="#14-1ã€SpringMVCå¸¸ç”¨ç»„ä»¶" class="headerlink" title="14.1ã€SpringMVCå¸¸ç”¨ç»„ä»¶"></a>14.1ã€SpringMVCå¸¸ç”¨ç»„ä»¶</h2><ul><li>DispatcherServletï¼š<strong>å‰ç«¯æ§åˆ¶å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œæ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p><ul><li>HandlerMappingï¼š<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„urlã€methodç­‰ä¿¡æ¯æŸ¥æ‰¾Handlerï¼Œå³æ§åˆ¶å™¨æ–¹æ³•</p><ul><li>Handlerï¼š<strong>å¤„ç†å™¨</strong>ï¼Œéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼ˆå³Controllerï¼‰</li></ul><p>ä½œç”¨ï¼šåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†</p><ul><li>HandlerAdapterï¼š<strong>å¤„ç†å™¨é€‚é…å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šé€šè¿‡HandlerAdapterå¯¹å¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨æ–¹æ³•ï¼‰è¿›è¡Œæ‰§è¡Œ</p><ul><li>ViewResolverï¼š<strong>è§†å›¾è§£æå™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œå¾—åˆ°ç›¸åº”çš„è§†å›¾ï¼Œä¾‹å¦‚ï¼šThymeleafViewã€InternalResourceViewã€</p><p>RedirectView</p><ul><li>Viewï¼š<strong>è§†å›¾</strong></li></ul><p>ä½œç”¨ï¼šå°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·</p><h2 id="14-2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹"><a href="#14-2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹" class="headerlink" title="14.2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹"></a>14.2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹</h2><p>DispatcherServlet æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servletï¼Œæ‰€ä»¥å¤©ç„¶çš„éµå¾ª Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€ä»¥å®è§‚ä¸Šæ˜¯ Servletç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œè°ƒåº¦ã€‚</p><p><img src="/2022/12/18/SpringMVCNote/33.png" alt="33"></p><h3 id="â‘ åˆå§‹åŒ–WebApplicationContext"><a href="#â‘ åˆå§‹åŒ–WebApplicationContext" class="headerlink" title="â‘ åˆå§‹åŒ–WebApplicationContext"></a>â‘ åˆå§‹åŒ–WebApplicationContext</h3><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> WebApplicationContext <span class="hljs-title function_">initWebApplicationContext</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">rootContext</span> <span class="hljs-operator">=</span> WebApplicationContextUtils.getWebApplicationContext(getServletContext());<br>    <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">wac</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.webApplicationContext != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// A context instance was injected at construction time -&gt; use it</span><br>        wac = <span class="hljs-built_in">this</span>.webApplicationContext;<br>        <span class="hljs-keyword">if</span> (wac <span class="hljs-keyword">instanceof</span> ConfigurableWebApplicationContext) &#123;<br>            <span class="hljs-type">ConfigurableWebApplicationContext</span> <span class="hljs-variable">cwac</span> <span class="hljs-operator">=</span>(ConfigurableWebApplicationContext) wac;<br>            <span class="hljs-keyword">if</span> (!cwac.isActive()) &#123;<br>                <span class="hljs-comment">// The context has not yet been refreshed -&gt; provide services such as</span><br>                    <span class="hljs-comment">// setting the parent context, setting the application context id, etc</span><br>                    <span class="hljs-keyword">if</span> (cwac.getParent() == <span class="hljs-literal">null</span>) &#123;<br>                        <span class="hljs-comment">// The context instance was injected without an explicit parent -&gt; set</span><br>                            <span class="hljs-comment">// the root application context (if any; may be null) as the parent</span><br>                            cwac.setParent(rootContext);<br>                    &#125;<br>                configureAndRefreshWebApplicationContext(cwac);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (wac == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// No context instance was injected at construction time -&gt; see if one</span><br>        <span class="hljs-comment">// has been registered in the servlet context. If one exists, it is assumed</span><br>            <span class="hljs-comment">// that the parent context (if any) has already been set and that the</span><br>            <span class="hljs-comment">// user has performed any initialization such as setting the context id</span><br>            wac = findWebApplicationContext();<br>    &#125;<br>    <span class="hljs-keyword">if</span> (wac == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// No context instance is defined for this servlet -&gt; create a local one</span><br>        <span class="hljs-comment">// åˆ›å»ºWebApplicationContext</span><br>        wac = createWebApplicationContext(rootContext);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.refreshEventReceived) &#123;<br>        <span class="hljs-comment">// Either the context is not a ConfigurableApplicationContext with refresh</span><br>            <span class="hljs-comment">// support or the context injected at construction time had already been</span><br>            <span class="hljs-comment">// refreshed -&gt; trigger initial onRefresh manually here.</span><br>            <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>.onRefreshMonitor) &#123;<br>            <span class="hljs-comment">// åˆ·æ–°WebApplicationContext</span><br>            onRefresh(wac);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.publishContext) &#123;<br>        <span class="hljs-comment">// Publish the context as a servlet context attribute.</span><br>        <span class="hljs-comment">// å°†IOCå®¹å™¨åœ¨åº”ç”¨åŸŸå…±äº«</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">attrName</span> <span class="hljs-operator">=</span> getServletContextAttributeName();<br>        getServletContext().setAttribute(attrName, wac);<br>    &#125;<br>    <span class="hljs-keyword">return</span> wac;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºWebApplicationContext"><a href="#â‘¡åˆ›å»ºWebApplicationContext" class="headerlink" title="â‘¡åˆ›å»ºWebApplicationContext"></a>â‘¡åˆ›å»ºWebApplicationContext</h3><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> WebApplicationContext <span class="hljs-title function_">createWebApplicationContext</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ApplicationContext parent)</span> &#123;<br>    Class&lt;?&gt; contextClass = getContextClass();<br>    <span class="hljs-keyword">if</span> (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass))<br>    &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApplicationContextException</span>(<span class="hljs-string">&quot;Fatal initialization error in servlet with name &#x27;&quot;</span> +getServletName() +<br>                                              <span class="hljs-string">&quot;&#x27;: custom WebApplicationContext class [&quot;</span> + contextClass.getName() +<br>                                              <span class="hljs-string">&quot;] is not of type ConfigurableWebApplicationContext&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// é€šè¿‡åå°„åˆ›å»º IOC å®¹å™¨å¯¹è±¡</span><br>    <span class="hljs-type">ConfigurableWebApplicationContext</span> <span class="hljs-variable">wac</span> <span class="hljs-operator">=</span> (ConfigurableWebApplicationContext)BeanUtils.instantiateClass(contextClass);<br>    wac.setEnvironment(getEnvironment());<br>    <span class="hljs-comment">// è®¾ç½®çˆ¶å®¹å™¨ï¼ˆæŠŠSpringçš„iocå®¹å™¨è®¾ç½®ä¸ºSpringMVCçš„çˆ¶å®¹å™¨ï¼›å­å¯è®¿é—®çˆ¶ä¸­çš„beanï¼Œåä¹‹ä¸è¡Œï¼‰</span><br>    wac.setParent(parent);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">configLocation</span> <span class="hljs-operator">=</span> getContextConfigLocation();<br>    <span class="hljs-keyword">if</span> (configLocation != <span class="hljs-literal">null</span>) &#123;<br>        wac.setConfigLocation(configLocation);<br>    &#125;<br>    configureAndRefreshWebApplicationContext(wac);<br>    <span class="hljs-keyword">return</span> wac;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¢DispatcherServletåˆå§‹åŒ–ç­–ç•¥"><a href="#â‘¢DispatcherServletåˆå§‹åŒ–ç­–ç•¥" class="headerlink" title="â‘¢DispatcherServletåˆå§‹åŒ–ç­–ç•¥"></a>â‘¢DispatcherServletåˆå§‹åŒ–ç­–ç•¥</h3><p>FrameworkServletåˆ›å»ºWebApplicationContextåï¼Œåˆ·æ–°å®¹å™¨ï¼Œè°ƒç”¨onRefresh(wac)ï¼Œæ­¤æ–¹æ³•åœ¨</p><p>DispatcherServletä¸­è¿›è¡Œäº†é‡å†™ï¼Œè°ƒç”¨äº†initStrategies(context)æ–¹æ³•ï¼Œåˆå§‹åŒ–ç­–ç•¥ï¼Œå³åˆå§‹åŒ–</p><p>DispatcherServletçš„å„ä¸ªç»„ä»¶</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initStrategies</span><span class="hljs-params">(ApplicationContext context)</span> &#123;<br>    initMultipartResolver(context);<br>    initLocaleResolver(context);<br>    initThemeResolver(context);<br>    initHandlerMappings(context);<br>    initHandlerAdapters(context);<br>    initHandlerExceptionResolvers(context);<br>    initRequestToViewNameTranslator(context);<br>    initViewResolvers(context);<br>    initFlashMapManager(context);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="14-3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"><a href="#14-3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚" class="headerlink" title="14.3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"></a>14.3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚</h2><h3 id="â‘ processRequest"><a href="#â‘ processRequest" class="headerlink" title="â‘ processRequest()"></a>â‘ processRequest()</h3><p>FrameworkServleté‡å†™HttpServletä¸­çš„service()å’ŒdoXxx()ï¼Œè¿™äº›æ–¹æ³•ä¸­è°ƒç”¨äº†</p><p>processRequest(request, response)</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span><span class="hljs-keyword">throws</span> ServletException, IOException<br>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-type">Throwable</span> <span class="hljs-variable">failureCause</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">LocaleContext</span> <span class="hljs-variable">previousLocaleContext</span> <span class="hljs-operator">=</span> LocaleContextHolder.getLocaleContext();<br>    <span class="hljs-type">LocaleContext</span> <span class="hljs-variable">localeContext</span> <span class="hljs-operator">=</span> buildLocaleContext(request);<br>    <span class="hljs-type">RequestAttributes</span> <span class="hljs-variable">previousAttributes</span> <span class="hljs-operator">=</span> RequestContextHolder.getRequestAttributes();<br>    <span class="hljs-type">ServletRequestAttributes</span> <span class="hljs-variable">requestAttributes</span> <span class="hljs-operator">=</span> buildRequestAttributes(request,response, previousAttributes);<br>    <span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br>    asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(),<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestBindingInterceptor</span>());<br>    initContextHolders(request, localeContext, requestAttributes);<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// æ‰§è¡ŒæœåŠ¡ï¼ŒdoService()æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåœ¨DispatcherServletä¸­è¿›è¡Œäº†é‡å†™</span><br>        doService(request, response);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (ServletException | IOException ex) &#123;<br>        failureCause = ex;<br>        <span class="hljs-keyword">throw</span> ex;<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (Throwable ex) &#123;<br>        failureCause = ex;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">&quot;Request processing failed&quot;</span>, ex);<br>    &#125;<br>    <span class="hljs-keyword">finally</span> &#123;<br>        resetContextHolders(request, previousLocaleContext, previousAttributes);<br>        <span class="hljs-keyword">if</span> (requestAttributes != <span class="hljs-literal">null</span>) &#123;<br>            requestAttributes.requestCompleted();<br>        &#125;<br>        logResult(request, response, failureCause, asyncManager);<br>        publishRequestHandledEvent(request, response, startTime, failureCause);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¡doService"><a href="#â‘¡doService" class="headerlink" title="â‘¡doService()"></a>â‘¡doService()</h3><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doService</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>logRequest(request);<br>    <span class="hljs-comment">// Keep a snapshot of the request attributes in case of an include,</span><br>    <span class="hljs-comment">// to be able to restore the original attributes after the include.</span><br>    Map&lt;String, Object&gt; attributesSnapshot = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">if</span> (WebUtils.isIncludeRequest(request)) &#123;<br>        attributesSnapshot = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        Enumeration&lt;?&gt; attrNames = request.getAttributeNames();<br>        <span class="hljs-keyword">while</span> (attrNames.hasMoreElements()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">attrName</span> <span class="hljs-operator">=</span> (String) attrNames.nextElement();<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) &#123;<br>                attributesSnapshot.put(attrName,request.getAttribute(attrName));<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// Make framework objects available to handlers and view objects.</span><br>    request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE,getWebApplicationContext());<br>    request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, <span class="hljs-built_in">this</span>.localeResolver);<br>    request.setAttribute(THEME_RESOLVER_ATTRIBUTE, <span class="hljs-built_in">this</span>.themeResolver);<br>    request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.flashMapManager != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-type">FlashMap</span> <span class="hljs-variable">inputFlashMap</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.flashMapManager.retrieveAndUpdate(request,response);<br>        <span class="hljs-keyword">if</span> (inputFlashMap != <span class="hljs-literal">null</span>) &#123;<br>            request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE,Collections.unmodifiableMap(inputFlashMap));<br>        &#125;<br>        request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlashMap</span>());<br>        request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, <span class="hljs-built_in">this</span>.flashMapManager);<br>    &#125;<br>    <span class="hljs-type">RequestPath</span> <span class="hljs-variable">requestPath</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.parseRequestPath &amp;&amp; !ServletRequestPathUtils.hasParsedRequestPath(request)) &#123;<br>        requestPath = ServletRequestPathUtils.parseAndCache(request);<br>    &#125;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// å¤„ç†è¯·æ±‚å’Œå“åº”</span><br>        doDispatch(request, response);<br>    &#125;<br>    <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">if</span><br>            (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;<br>            <span class="hljs-comment">// Restore the original attribute snapshot, in case of an include.</span><br>            <span class="hljs-keyword">if</span> (attributesSnapshot != <span class="hljs-literal">null</span>) &#123;<br>                restoreAttributesAfterInclude(request, attributesSnapshot);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (requestPath != <span class="hljs-literal">null</span>) &#123;<br>            ServletRequestPathUtils.clearParsedRequestPath(request);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¢doDispatch"><a href="#â‘¢doDispatch" class="headerlink" title="â‘¢doDispatch()"></a>â‘¢doDispatch()</h3><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">processedRequest</span> <span class="hljs-operator">=</span> request;<br>    <span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">mappedHandler</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">multipartRequestParsed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Exception</span> <span class="hljs-variable">dispatchException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            processedRequest = checkMultipart(request);<br>            multipartRequestParsed = (processedRequest != request);<br>            <span class="hljs-comment">// Determine handler for the current request.</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">                mappedHandlerï¼šè°ƒç”¨é“¾</span><br><span class="hljs-comment">                åŒ…å«handlerã€interceptorListã€interceptorIndex</span><br><span class="hljs-comment">                handlerï¼šæµè§ˆå™¨å‘é€çš„è¯·æ±‚æ‰€åŒ¹é…çš„æ§åˆ¶å™¨æ–¹æ³•</span><br><span class="hljs-comment">                interceptorListï¼šå¤„ç†æ§åˆ¶å™¨æ–¹æ³•çš„æ‰€æœ‰æ‹¦æˆªå™¨é›†åˆ</span><br><span class="hljs-comment">                interceptorIndexï¼šæ‹¦æˆªå™¨ç´¢å¼•ï¼Œæ§åˆ¶æ‹¦æˆªå™¨afterCompletion()çš„æ‰§è¡Œ</span><br><span class="hljs-comment">             */</span><br>            mappedHandler = getHandler(processedRequest);<br>            <span class="hljs-keyword">if</span> (mappedHandler == <span class="hljs-literal">null</span>) &#123;<br>                noHandlerFound(processedRequest, response);<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            <span class="hljs-comment">// Determine handler adapter for the current request.</span><br>            <span class="hljs-comment">// é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•åˆ›å»ºç›¸åº”çš„å¤„ç†å™¨é€‚é…å™¨ï¼Œè°ƒç”¨æ‰€å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</span><br>            <span class="hljs-type">HandlerAdapter</span> <span class="hljs-variable">ha</span> <span class="hljs-operator">=</span> getHandlerAdapter(mappedHandler.getHandler());<br>            <span class="hljs-comment">// Process last-modified header, if supported by the handler.</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> request.getMethod();<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isGet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;GET&quot;</span>.equals(method);<br>            <span class="hljs-keyword">if</span> (isGet || <span class="hljs-string">&quot;HEAD&quot;</span>.equals(method)) &#123;<br>                <span class="hljs-type">long</span> <span class="hljs-variable">lastModified</span> <span class="hljs-operator">=</span> ha.getLastModified(request,mappedHandler.getHandler());<br>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request,response).checkNotModified(lastModified) &amp;&amp; isGet) &#123;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„preHandle()</span><br>            <span class="hljs-keyword">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            <span class="hljs-comment">// Actually invoke the handler.</span><br>            <span class="hljs-comment">// ç”±å¤„ç†å™¨é€‚é…å™¨è°ƒç”¨å…·ä½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œæœ€ç»ˆè·å¾—ModelAndViewå¯¹è±¡</span><br>            mv = ha.handle(processedRequest, response,mappedHandler.getHandler());<br>            <span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            applyDefaultViewName(processedRequest, mv);<br>            <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„postHandle()</span><br>            mappedHandler.applyPostHandle(processedRequest, response, mv);<br>        &#125;<br>        <span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>            dispatchException = ex;<br>        &#125;<br>        <span class="hljs-keyword">catch</span> (Throwable err) &#123;<br>            <span class="hljs-comment">// As of 4.3, we&#x27;re processing Errors thrown from handler methods as well,</span><br>            <span class="hljs-comment">// making them available for @ExceptionHandler methods and otherscenarios.</span><br>            dispatchException = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">&quot;Handler dispatchfailed&quot;</span>, err);<br>         &#125;<br>         <span class="hljs-comment">// åç»­å¤„ç†ï¼šå¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾ </span><br>         processDispatchResult(processedRequest, response, mappedHandler, mv,dispatchException);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>        triggerAfterCompletion(processedRequest, response, mappedHandler, ex);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (Throwable err) &#123;<br>        triggerAfterCompletion(processedRequest, response, mappedHandler,<span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">&quot;Handler processingfailed&quot;</span>,<br>                                                                                                    err));<br>    &#125;<br>    <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;<br>            <span class="hljs-comment">// Instead of postHandle and afterCompletion</span><br>            <span class="hljs-keyword">if</span> (mappedHandler != <span class="hljs-literal">null</span>) &#123;<br>                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);<br>             &#125;<br>         &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// Clean up any resources used by a multipart request.</span><br>            <span class="hljs-keyword">if</span> (multipartRequestParsed) &#123;<br>                cleanupMultipart(processedRequest);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;                                                          <br></code></pre></td></tr></table></figure><h3 id="â‘£processDispatchResult"><a href="#â‘£processDispatchResult" class="headerlink" title="â‘£processDispatchResult()"></a>â‘£processDispatchResult()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response,<span class="hljs-meta">@Nullable</span> HandlerExecutionChain</span><br><span class="hljs-params">                                   mappedHandler, <span class="hljs-meta">@Nullable</span> ModelAndView mv,<span class="hljs-meta">@Nullable</span> Exception exception)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">errorView</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (exception != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> ModelAndViewDefiningException) &#123;<br>            logger.debug(<span class="hljs-string">&quot;ModelAndViewDefiningException encountered&quot;</span>,exception);<br>            mv = ((ModelAndViewDefiningException) exception).getModelAndView();<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> (mappedHandler != <span class="hljs-literal">null</span> ? mappedHandler.getHandler(): <span class="hljs-literal">null</span>);<br>            mv = processHandlerException(request, response, handler, exception);<br>            errorView = (mv != <span class="hljs-literal">null</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// Did the handler return a view to render?</span><br>    <span class="hljs-keyword">if</span> (mv != <span class="hljs-literal">null</span> &amp;&amp; !mv.wasCleared()) &#123;<br>        <span class="hljs-comment">// å¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span><br>        render(mv, request, response);<br>        <span class="hljs-keyword">if</span> (errorView) &#123;<br>            WebUtils.clearErrorRequestAttributes(request);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (logger.isTraceEnabled()) &#123;<br>            logger.trace(<span class="hljs-string">&quot;No view rendering, null ModelAndView returned.&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;<br>        <span class="hljs-comment">// Concurrent handling started during a forward</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (mappedHandler != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// Exception (if any) is already handled..</span><br>        <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„afterCompletion()</span><br>        mappedHandler.triggerAfterCompletion(request, response, <span class="hljs-literal">null</span>);<br>    &#125;<br>&#125;                                   <br></code></pre></td></tr></table></figure><h2 id="14-4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹"><a href="#14-4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹" class="headerlink" title="14.4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹"></a>14.4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹</h2><ul><li><ol><li>ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢« SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet æ•è·ã€‚</li></ol></li><li><ol start="2"><li>DispatcherServletå¯¹è¯·æ±‚URLè¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œåˆ¤æ–­è¯·æ±‚URIå¯¹åº”çš„æ˜ å°„ï¼š</li></ol><ul><li><p>a) ä¸å­˜åœ¨</p><ul><li><p>i. å†åˆ¤æ–­æ˜¯å¦é…ç½®äº† <strong>mvc:default-servlet-handler</strong></p></li><li><p>ii. å¦‚æœæ²¡é…ç½®ï¼Œåˆ™æ§åˆ¶å°æŠ¥æ˜ å°„æŸ¥æ‰¾ä¸åˆ°ï¼Œå®¢æˆ·ç«¯å±•ç¤º404é”™è¯¯</p><p><img src="/2022/12/18/SpringMVCNote/34.png" alt="34"></p><p><img src="/2022/12/18/SpringMVCNote/35.png" alt="35"></p></li><li><p>iii. å¦‚æœæœ‰é…ç½®ï¼Œåˆ™è®¿é—®ç›®æ ‡èµ„æºï¼ˆä¸€èˆ¬ä¸ºé™æ€èµ„æºï¼Œå¦‚ï¼šJS,CSS,HTMLï¼‰ï¼Œæ‰¾ä¸åˆ°å®¢æˆ·ç«¯ä¹Ÿä¼šå±•ç¤º404é”™è¯¯</p><p><img src="/2022/12/18/SpringMVCNote/36.png" alt="36"></p><p><img src="/2022/12/18/SpringMVCNote/37.png" alt="37"></p></li></ul></li><li><p>b) å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„æµç¨‹</p><ul><li><ol start="3"><li>æ ¹æ®è¯¥URIï¼Œè°ƒç”¨ <strong>HandlerMapping</strong> è·å¾—è¯¥Handleré…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬Handlerå¯¹è±¡ä»¥åŠHandlerå¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥HandlerExecutionChainæ‰§è¡Œé“¾å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</li></ol></li><li><ol start="4"><li>DispatcherServlet æ ¹æ®è·å¾—çš„<strong>Handler</strong>ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapterã€‚</li></ol></li><li><ol start="5"><li>å¦‚æœæˆåŠŸè·å¾— <strong>HandlerAdapter</strong> ï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„preHandler(â€¦)æ–¹æ³•ã€æ­£å‘ã€‘</li></ol></li><li><ol start="6"><li>æå– <strong>Request</strong> ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œ<strong>å¡«å…… Handler å…¥å‚</strong>ï¼Œå¼€å§‹<strong>æ‰§è¡Œ Handlerï¼ˆControllerï¼‰æ–¹æ³•</strong>ï¼Œå¤„ç†è¯·æ±‚ã€‚</li></ol><ul><li>åœ¨å¡«å…… Handler çš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpringå°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</li><li>a) HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚Jsonã€xmlç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯</li><li>b) æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚Stringè½¬æ¢æˆIntegerã€Doubleç­‰</li><li>c) æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰</li><li>d) æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°BindingResultæˆ–Errorä¸­</li></ul></li><li><ol start="7"><li>Handleræ‰§è¡Œå®Œæˆåï¼Œå‘DispatcherServlet è¿”å›ä¸€ä¸ª <strong>ModelAndView å¯¹è±¡</strong>ã€‚</li></ol></li><li><ol start="8"><li>æ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ postHandle(â€¦) æ–¹æ³•ã€é€†å‘ã€‘ã€‚</li></ol></li><li><ol start="9"><li>æ ¹æ®è¿”å›çš„ ModelAndViewï¼ˆæ­¤æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼šå¦‚æœå­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æ‰§è¡ŒHandlerExceptionResolverè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼‰é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ViewResolverè¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ®Modelå’ŒViewï¼Œæ¥æ¸²æŸ“è§†å›¾ã€‚</li></ol></li><li><ol start="10"><li>æ¸²æŸ“è§†å›¾å®Œæ¯•æ‰§è¡Œæ‹¦æˆªå™¨çš„afterCompletion(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</li></ol></li><li><ol start="11"><li>å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol></li></ul></li></ul></li></ul><h1 id="å››ã€SSMæ•´åˆ"><a href="#å››ã€SSMæ•´åˆ" class="headerlink" title="å››ã€SSMæ•´åˆ"></a>å››ã€SSMæ•´åˆ</h1><p>SpringMVC åœ¨åˆå§‹åŒ–æ—¶ä¼šåŠ è½½DispatcherServletï¼ˆè®¾ç½®äº†ä¼˜å…ˆçº§ï¼‰ï¼ŒDispatcherServlet ä¸­ä¼šåˆå§‹åŒ– SpringMVCçš„IOCå®¹å™¨ï¼Œå…¶ä¸­åŒ…å«Controllerå¯¹è±¡ï¼Œè€ŒControllerå¯¹è±¡ ä¾èµ–äº Springçš„IOCå®¹å™¨ä¸­çš„ Service å¯¹è±¡ï¼Œå› æ­¤Springçš„IOCå®¹å™¨å¿…é¡»å…ˆåˆå§‹åŒ–</p><h2 id="4-1ã€ContextLoaderListener"><a href="#4-1ã€ContextLoaderListener" class="headerlink" title="4.1ã€ContextLoaderListener"></a>4.1ã€ContextLoaderListener</h2><p>ContextLoaderListeneråœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–</p><p>Springæä¾›äº†ç›‘å¬å™¨ContextLoaderListenerï¼Œå®ç°ServletContextListeneræ¥å£ï¼Œå¯ç›‘å¬ServletContextçš„çŠ¶æ€ï¼Œåœ¨webæœåŠ¡å™¨çš„å¯åŠ¨ï¼Œè¯»å–Springçš„é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºSpringçš„IOCå®¹å™¨ã€‚webåº”ç”¨ ä¸­å¿…é¡»åœ¨web.xmlä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        é…ç½®Springçš„ç›‘å¬å™¨ï¼Œåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åŠ è½½Springçš„é…ç½®æ–‡ä»¶</span><br><span class="hljs-comment">        Springé…ç½®æ–‡ä»¶é»˜è®¤ä½ç½®å’Œåç§°ï¼š/WEB-INF/applicationContext.xml</span><br><span class="hljs-comment">        å¯é€šè¿‡ä¸Šä¸‹æ–‡å‚æ•°è‡ªå®šä¹‰Springé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br><span class="hljs-comment">&lt;!--è‡ªå®šä¹‰Springé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:spring.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-2ã€å‡†å¤‡å·¥ä½œ"><a href="#4-2ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.2ã€å‡†å¤‡å·¥ä½œ"></a>4.2ã€å‡†å¤‡å·¥ä½œ</h2><h3 id="â‘ åˆ›å»ºMaven-Module"><a href="#â‘ åˆ›å»ºMaven-Module" class="headerlink" title="â‘ åˆ›å»ºMaven Module"></a>â‘ åˆ›å»ºMaven Module</h3><h3 id="â‘¡å¯¼å…¥ä¾èµ–"><a href="#â‘¡å¯¼å…¥ä¾èµ–" class="headerlink" title="â‘¡å¯¼å…¥ä¾èµ–"></a>â‘¡å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">spring.version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">spring.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-beans<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--springmvc--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Mybatisæ ¸å¿ƒ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--mybatiså’Œspringçš„æ•´åˆåŒ…--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è¿æ¥æ±  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- log4jæ—¥å¿— --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ—¥å¿— --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ServletAPI --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.12.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span> <br></code></pre></td></tr></table></figure><h3 id="â‘¢åˆ›å»ºè¡¨"><a href="#â‘¢åˆ›å»ºè¡¨" class="headerlink" title="â‘¢åˆ›å»ºè¡¨"></a>â‘¢åˆ›å»ºè¡¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE `t_emp` (<br>    `emp_id` int(11) NOT NULL AUTO_INCREMENT,<br>    `emp_name` varchar(20) DEFAULT NULL,<br>    `age` int(11) DEFAULT NULL,<br>    `sex` char(1) DEFAULT NULL,<br>    `email` varchar(50) DEFAULT NULL,<br>    PRIMARY KEY (`emp_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8<br></code></pre></td></tr></table></figure><h2 id="4-3ã€é…ç½®web-xml"><a href="#4-3ã€é…ç½®web-xml" class="headerlink" title="4.3ã€é…ç½®web.xml"></a>4.3ã€é…ç½®web.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®Springçš„ç¼–ç è¿‡æ»¤å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>forceEncoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®å¤„ç†è¯·æ±‚æ–¹å¼PUTå’ŒDELETEçš„è¿‡æ»¤å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filterclass&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è®¾ç½®SpringMVCçš„é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- è®¾ç½®Springçš„é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:Spring.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®Springçš„ç›‘å¬å™¨ --&gt;</span> <span class="hljs-comment">&lt;!--åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åŠ è½½Springçš„é…ç½®æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-4ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®"><a href="#4-4ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®" class="headerlink" title="4.4ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®"></a>4.4ã€åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd &quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--æ‰«æç»„ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.ssm.controller&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--é…ç½®è§†å›¾è§£æå™¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;viewResolver&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;order&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;characterEncoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;templateEngine&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;templateResolver&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span><br>                        <span class="hljs-comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span><br>                        <span class="hljs-comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.html&quot;</span>/&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;templateMode&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;HTML5&quot;</span>/&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;characterEncoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é…ç½®è®¿é—®é¦–é¡µçš„è§†å›¾æ§åˆ¶ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:view-controller</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é…ç½®é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span> /&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- å¼€å¯MVCçš„æ³¨è§£é©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;multipartResolver&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-5ã€æ­å»ºMyBatisç¯å¢ƒ"><a href="#4-5ã€æ­å»ºMyBatisç¯å¢ƒ" class="headerlink" title="4.5ã€æ­å»ºMyBatisç¯å¢ƒ"></a>4.5ã€æ­å»ºMyBatisç¯å¢ƒ</h2><h3 id="â‘ åˆ›å»ºå±æ€§æ–‡ä»¶jdbc-properties"><a href="#â‘ åˆ›å»ºå±æ€§æ–‡ä»¶jdbc-properties" class="headerlink" title="â‘ åˆ›å»ºå±æ€§æ–‡ä»¶jdbc.properties"></a>â‘ åˆ›å»ºå±æ€§æ–‡ä»¶jdbc.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jdbc.user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-string">atguigu</span><br><span class="hljs-attr">jdbc.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC</span><br><span class="hljs-attr">jdbc.driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config-xml"><a href="#â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config-xml" class="headerlink" title="â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml"></a>â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta"><span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta"><span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--é…ç½®åˆ†é¡µæ’ä»¶--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¢åˆ›å»ºMapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶"><a href="#â‘¢åˆ›å»ºMapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶" class="headerlink" title="â‘¢åˆ›å»ºMapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶"></a>â‘¢åˆ›å»ºMapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EmployeeMapper</span> &#123;<br>    List&lt;Employee&gt; <span class="hljs-title function_">getEmployeeList</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta"><span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta"><span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atguigu.ssm.mapper.EmployeeMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmployeeList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Employee&quot;</span>&gt;</span><br>        select * from t_emp<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘£åˆ›å»ºæ—¥å¿—æ–‡ä»¶log4j-xml"><a href="#â‘£åˆ›å»ºæ—¥å¿—æ–‡ä»¶log4j-xml" class="headerlink" title="â‘£åˆ›å»ºæ—¥å¿—æ–‡ä»¶log4j.xml"></a>â‘£åˆ›å»ºæ—¥å¿—æ–‡ä»¶log4j.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">log4j</span>:configuration <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;log4j.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">log4j:configuration</span> <span class="hljs-attr">xmlns:log4j</span>=<span class="hljs-string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Encoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">layout</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ConversionPattern&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m (%F:%L) \n&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;java.sql&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">level</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;debug&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;org.apache.ibatis&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">level</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;info&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">level</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;debug&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">log4j:configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-6ã€åˆ›å»ºSpringçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®"><a href="#4-6ã€åˆ›å»ºSpringçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®" class="headerlink" title="4.6ã€åˆ›å»ºSpringçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®"></a>4.6ã€åˆ›å»ºSpringçš„é…ç½®æ–‡ä»¶å¹¶é…ç½®</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">                           http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">                           https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ‰«æç»„ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.ssm&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">context:exclude-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;annotation&quot;</span><span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- å¼•å…¥jdbc.properties --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context:property-placeholder</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é…ç½®Druidæ•°æ®æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é…ç½®ç”¨äºåˆ›å»ºSqlSessionFactoryçš„å·¥å‚bean --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è®¾ç½®MyBatisé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ˆå¯ä»¥ä¸è®¾ç½®ï¼‰ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è®¾ç½®æ•°æ®æº --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è®¾ç½®ç±»å‹åˆ«åæ‰€å¯¹åº”çš„åŒ… --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;typeAliasesPackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.atguigu.ssm.pojo&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">            è®¾ç½®æ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span><br><span class="hljs-comment">            è‹¥æ˜ å°„æ–‡ä»¶æ‰€åœ¨è·¯å¾„å’Œmapperæ¥å£æ‰€åœ¨è·¯å¾„ä¸€è‡´ï¼Œå¹¶ä¸”é…ç½®äº†ä¸‹é¢çš„æ‰«æé…ç½®ï¼Œåˆ™ä¸éœ€è¦è®¾ç½®</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">            &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;&gt;</span><br><span class="hljs-comment">            &lt;/property&gt;</span><br><span class="hljs-comment">        --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        é…ç½®mapperæ¥å£çš„æ‰«æé…ç½®</span><br><span class="hljs-comment">        ç”±mybatis-springæä¾›ï¼Œå¯ä»¥ä¸ºæŒ‡å®šåŒ…ä¸‹æ‰€æœ‰çš„mapperæ¥å£ï¼Œ</span><br><span class="hljs-comment">é€šè¿‡SqlSessionFactoryåˆ›å»ºå‡ºæ¥çš„å¯¹åº”mpaaerçš„SqlSessionï¼Œåˆ›å»ºmapperæ¥å£çš„åŠ¨æ€ä»£ç†å¯¹è±¡</span><br><span class="hljs-comment">        å¹¶å°†è¿™äº›åŠ¨æ€ä»£ç†ä½œä¸ºIOCå®¹å™¨çš„beanç®¡ç†</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.atguigu.ssm.mapper&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-7ã€æµ‹è¯•åŠŸèƒ½"><a href="#4-7ã€æµ‹è¯•åŠŸèƒ½" class="headerlink" title="4.7ã€æµ‹è¯•åŠŸèƒ½"></a>4.7ã€æµ‹è¯•åŠŸèƒ½</h2><h3 id="â‘ åˆ›å»ºç»„ä»¶"><a href="#â‘ åˆ›å»ºç»„ä»¶" class="headerlink" title="â‘ åˆ›å»ºç»„ä»¶"></a>â‘ åˆ›å»ºç»„ä»¶</h3><p>å®ä½“ç±»Employee</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer empId;<br>    <span class="hljs-keyword">private</span> String empName;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String sex;<br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(Integer empId, String empName, Integer age, String sex,</span><br><span class="hljs-params">                    String email)</span> &#123;<br>        <span class="hljs-built_in">this</span>.empId = empId;<br>        <span class="hljs-built_in">this</span>.empName = empName;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.sex = sex;<br>        <span class="hljs-built_in">this</span>.email = email;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getEmpId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> empId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmpId</span><span class="hljs-params">(Integer empId)</span> &#123;<br>        <span class="hljs-built_in">this</span>.empId = empId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmpName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> empName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmpName</span><span class="hljs-params">(String empName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.empName = empName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSex</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sex;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSex</span><span class="hljs-params">(String sex)</span> &#123;<br>        <span class="hljs-built_in">this</span>.sex = sex;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmail</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> email;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmail</span><span class="hljs-params">(String email)</span> &#123;<br>        <span class="hljs-built_in">this</span>.email = email;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ§åˆ¶å±‚ç»„ä»¶EmployeeController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> EmployeeService employeeService;<br>    <span class="hljs-meta">@RequestMapping(value = &quot;/employee/page/&#123;pageNum&#125;&quot;, method = RequestMethod.GET)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmployeeList</span><span class="hljs-params">(Model model, <span class="hljs-meta">@PathVariable(&quot;pageNum&quot;)</span> Integer pageNum)</span>&#123;<br>        PageInfo&lt;Employee&gt; page = employeeService.getEmployeeList(pageNum);<br>        model.addAttribute(<span class="hljs-string">&quot;page&quot;</span>, page);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;employee_list&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£EmployeeService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EmployeeService</span> &#123;<br>PageInfo&lt;Employee&gt; <span class="hljs-title function_">getEmployeeList</span><span class="hljs-params">(Integer pageNum)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå®ç°ç±»EmployeeServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">EmployeeService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> EmployeeMapper employeeMapper;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> PageInfo&lt;Employee&gt; <span class="hljs-title function_">getEmployeeList</span><span class="hljs-params">(Integer pageNum)</span> &#123;<br>        PageHelper.startPage(pageNum, <span class="hljs-number">4</span>);<br>        List&lt;Employee&gt; list = employeeMapper.getEmployeeList();<br>        PageInfo&lt;Employee&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(list, <span class="hljs-number">5</span>);<br>        <span class="hljs-keyword">return</span> page;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºé¡µé¢-1"><a href="#â‘¡åˆ›å»ºé¡µé¢-1" class="headerlink" title="â‘¡åˆ›å»ºé¡µé¢"></a>â‘¡åˆ›å»ºé¡µé¢</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/static/css/index_work.css&#125;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span>Employee Info<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>emp_id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>emp_name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>age<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>sex<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>email<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>options<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;employee : $&#123;page.list&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.empId&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.empName&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.age&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>delete<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;page.hasPreviousPage&#125;&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/employee/page/1&#125;&quot;</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;page.hasPreviousPage&#125;&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;page.prePage&#125;&#125;&quot;</span>&gt;</span>ä¸Šä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;num:$&#123;page.navigatepageNums&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;page.pageNum == num&#125;&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;num&#125;&#125;&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;&#x27;[&#x27;+$&#123;num&#125;+&#x27;]&#x27;&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;page.pageNum != num&#125;&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;num&#125;&#125;&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;num&#125;&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;page.hasNextPage&#125;&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;page.nextPage&#125;&#125;&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;page.hasNextPage&#125;&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;page.pages&#125;&#125;&quot;</span>&gt;</span>æœ«é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¢è®¿é—®æµ‹è¯•åˆ†é¡µåŠŸèƒ½"><a href="#â‘¢è®¿é—®æµ‹è¯•åˆ†é¡µåŠŸèƒ½" class="headerlink" title="â‘¢è®¿é—®æµ‹è¯•åˆ†é¡µåŠŸèƒ½"></a>â‘¢è®¿é—®æµ‹è¯•åˆ†é¡µåŠŸèƒ½</h3><p>localhost:8080&#x2F;employee&#x2F;page&#x2F;1</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Spring</title>
    <link href="/2022/11/12/SpringNote/"/>
    <url>/2022/11/12/SpringNote/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h1 id="1ã€Springç®€ä»‹"><a href="#1ã€Springç®€ä»‹" class="headerlink" title="1ã€Springç®€ä»‹"></a>1ã€Springç®€ä»‹</h1><h3 id="1-1ã€Springæ¦‚è¿°"><a href="#1-1ã€Springæ¦‚è¿°" class="headerlink" title="1.1ã€Springæ¦‚è¿°"></a>1.1ã€Springæ¦‚è¿°</h3><p>å®˜ç½‘åœ°å€ï¼š<a href="https://spring.io/">https://spring.io/</a></p><blockquote><p>Spring æ˜¯æœ€å—æ¬¢è¿çš„ä¼ä¸šçº§ Java åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œæ•°ä»¥ç™¾ä¸‡çš„æ¥è‡ªä¸–ç•Œå„åœ°çš„å¼€å‘äººå‘˜ä½¿ç”¨</p><p>Spring æ¡†æ¶æ¥åˆ›å»ºæ€§èƒ½å¥½ã€æ˜“äºæµ‹è¯•ã€å¯é‡ç”¨çš„ä»£ç ã€‚</p><p>Spring æ¡†æ¶æ˜¯ä¸€ä¸ªå¼€æºçš„ Java å¹³å°ï¼Œå®ƒæœ€åˆæ˜¯ç”± Rod Johnson ç¼–å†™çš„ï¼Œå¹¶ä¸”äº 2003 å¹´ 6 æœˆé¦–</p><p>æ¬¡åœ¨ Apache 2.0 è®¸å¯ä¸‹å‘å¸ƒã€‚</p><p>Spring æ˜¯è½»é‡çº§çš„æ¡†æ¶ï¼Œå…¶åŸºç¡€ç‰ˆæœ¬åªæœ‰ 2 MB å·¦å³çš„å¤§å°ã€‚</p><p>Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§æ˜¯å¯ä»¥ç”¨äºå¼€å‘ä»»ä½• Java åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯åœ¨ Java EE å¹³å°ä¸Šæ„å»º web åº”</p><p>ç”¨ç¨‹åºæ˜¯éœ€è¦æ‰©å±•çš„ã€‚ Spring æ¡†æ¶çš„ç›®æ ‡æ˜¯ä½¿ J2EE å¼€å‘å˜å¾—æ›´å®¹æ˜“ä½¿ç”¨ï¼Œé€šè¿‡å¯ç”¨åŸºäº POJO</p><p>ç¼–ç¨‹æ¨¡å‹æ¥ä¿ƒè¿›è‰¯å¥½çš„ç¼–ç¨‹å®è·µã€‚</p></blockquote><h3 id="1-2ã€Springå®¶æ—"><a href="#1-2ã€Springå®¶æ—" class="headerlink" title="1.2ã€Springå®¶æ—"></a>1.2ã€Springå®¶æ—</h3><p>é¡¹ç›®åˆ—è¡¨ï¼š<a href="https://spring.io/projects">https://spring.io/projects</a></p><h3 id="1-3ã€Spring-Framework"><a href="#1-3ã€Spring-Framework" class="headerlink" title="1.3ã€Spring Framework"></a>1.3ã€Spring Framework</h3><p>Spring åŸºç¡€æ¡†æ¶ï¼Œå¯ä»¥è§†ä¸º Spring åŸºç¡€è®¾æ–½ï¼ŒåŸºæœ¬ä¸Šä»»ä½•å…¶ä»– Spring é¡¹ç›®éƒ½æ˜¯ä»¥ Spring Frameworkä¸ºåŸºç¡€çš„ã€‚</p><h4 id="1-3-1ã€Spring-Frameworkç‰¹æ€§"><a href="#1-3-1ã€Spring-Frameworkç‰¹æ€§" class="headerlink" title="1.3.1ã€Spring Frameworkç‰¹æ€§"></a>1.3.1ã€Spring Frameworkç‰¹æ€§</h4><ul><li>éä¾µå…¥å¼ï¼šä½¿ç”¨ Spring Framework å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼ŒSpring å¯¹åº”ç”¨ç¨‹åºæœ¬èº«çš„ç»“æ„å½±å“éå¸¸</li></ul><p>å°ã€‚å¯¹é¢†åŸŸæ¨¡å‹å¯ä»¥åšåˆ°é›¶æ±¡æŸ“ï¼›å¯¹åŠŸèƒ½æ€§ç»„ä»¶ä¹Ÿåªéœ€è¦ä½¿ç”¨å‡ ä¸ªç®€å•çš„æ³¨è§£è¿›è¡Œæ ‡è®°ï¼Œå®Œå…¨ä¸ä¼š</p><p>ç ´ååŸæœ‰ç»“æ„ï¼Œåè€Œèƒ½å°†ç»„ä»¶ç»“æ„è¿›ä¸€æ­¥ç®€åŒ–ã€‚è¿™å°±ä½¿å¾—åŸºäº Spring Framework å¼€å‘åº”ç”¨ç¨‹åº</p><p>æ—¶ç»“æ„æ¸…æ™°ã€ç®€æ´ä¼˜é›…ã€‚</p><ul><li>æ§åˆ¶åè½¬ï¼šIOCâ€”â€”Inversion of Controlï¼Œç¿»è½¬èµ„æºè·å–æ–¹å‘ã€‚æŠŠè‡ªå·±åˆ›å»ºèµ„æºã€å‘ç¯å¢ƒç´¢å–èµ„æº</li></ul><p>å˜æˆç¯å¢ƒå°†èµ„æºå‡†å¤‡å¥½ï¼Œæˆ‘ä»¬äº«å—èµ„æºæ³¨å…¥ã€‚</p><ul><li>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼šAOPâ€”â€”Aspect Oriented Programmingï¼Œåœ¨ä¸ä¿®æ”¹æºä»£ç çš„åŸºç¡€ä¸Šå¢å¼ºä»£ç åŠŸ</li></ul><p>èƒ½ã€‚</p><ul><li>å®¹å™¨ï¼šSpring IOC æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå› ä¸ºå®ƒåŒ…å«å¹¶ä¸”ç®¡ç†ç»„ä»¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ç»„ä»¶äº«å—åˆ°äº†å®¹å™¨åŒ–</li></ul><p>çš„ç®¡ç†ï¼Œæ›¿ç¨‹åºå‘˜å±è”½äº†ç»„ä»¶åˆ›å»ºè¿‡ç¨‹ä¸­çš„å¤§é‡ç»†èŠ‚ï¼Œæå¤§çš„é™ä½äº†ä½¿ç”¨é—¨æ§›ï¼Œå¤§å¹…åº¦æé«˜äº†å¼€å‘</p><p>æ•ˆç‡ã€‚</p><ul><li>ç»„ä»¶åŒ–ï¼šSpring å®ç°äº†ä½¿ç”¨ç®€å•çš„ç»„ä»¶é…ç½®ç»„åˆæˆä¸€ä¸ªå¤æ‚çš„åº”ç”¨ã€‚åœ¨ Spring ä¸­å¯ä»¥ä½¿ç”¨ XML</li></ul><p>å’Œ Java æ³¨è§£ç»„åˆè¿™äº›å¯¹è±¡ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åŸºäºä¸€ä¸ªä¸ªåŠŸèƒ½æ˜ç¡®ã€è¾¹ç•Œæ¸…æ™°çš„ç»„ä»¶æœ‰æ¡ä¸ç´Šçš„æ­</p><p>å»ºè¶…å¤§å‹å¤æ‚åº”ç”¨ç³»ç»Ÿã€‚</p><ul><li><p>å£°æ˜å¼ï¼šå¾ˆå¤šä»¥å‰éœ€è¦ç¼–å†™ä»£ç æ‰èƒ½å®ç°çš„åŠŸèƒ½ï¼Œç°åœ¨åªéœ€è¦å£°æ˜éœ€æ±‚å³å¯ç”±æ¡†æ¶ä»£ä¸ºå®ç°ã€‚</p></li><li><p>ä¸€ç«™å¼ï¼šåœ¨ IOC å’Œ AOP çš„åŸºç¡€ä¸Šå¯ä»¥æ•´åˆå„ç§ä¼ä¸šåº”ç”¨çš„å¼€æºæ¡†æ¶å’Œä¼˜ç§€çš„ç¬¬ä¸‰æ–¹ç±»åº“ã€‚è€Œä¸”</p></li></ul><p>Spring æ——ä¸‹çš„é¡¹ç›®å·²ç»è¦†ç›–äº†å¹¿æ³›é¢†åŸŸï¼Œå¾ˆå¤šæ–¹é¢çš„åŠŸèƒ½æ€§éœ€æ±‚å¯ä»¥åœ¨ Spring Framework çš„åŸº</p><p>ç¡€ä¸Šå…¨éƒ¨ä½¿ç”¨ Spring æ¥å®ç°ã€‚</p><h4 id="1-3-2ã€Spring-Frameworkäº”å¤§åŠŸèƒ½æ¨¡å—"><a href="#1-3-2ã€Spring-Frameworkäº”å¤§åŠŸèƒ½æ¨¡å—" class="headerlink" title="1.3.2ã€Spring Frameworkäº”å¤§åŠŸèƒ½æ¨¡å—"></a>1.3.2ã€Spring Frameworkäº”å¤§åŠŸèƒ½æ¨¡å—</h4><table><thead><tr><th><strong>åŠŸèƒ½æ¨¡å—</strong></th><th><strong>åŠŸèƒ½ä»‹ç»</strong></th></tr></thead><tbody><tr><td>Core Container</td><td>æ ¸å¿ƒå®¹å™¨ï¼Œåœ¨ Spring ç¯å¢ƒä¸‹ä½¿ç”¨ä»»ä½•åŠŸèƒ½éƒ½å¿…é¡»åŸºäº IOC å®¹å™¨ã€‚</td></tr><tr><td>AOP&amp;Aspects</td><td>é¢å‘åˆ‡é¢ç¼–ç¨‹</td></tr><tr><td>Testing</td><td>æä¾›äº†å¯¹ junit æˆ– TestNG æµ‹è¯•æ¡†æ¶çš„æ•´åˆã€‚</td></tr><tr><td>Data Access&#x2F;Integration</td><td>æä¾›äº†å¯¹æ•°æ®è®¿é—®&#x2F;é›†æˆçš„åŠŸèƒ½ã€‚</td></tr><tr><td>Spring MVC</td><td>æä¾›äº†é¢å‘Webåº”ç”¨ç¨‹åºçš„é›†æˆåŠŸèƒ½ã€‚</td></tr></tbody></table><h1 id="2ã€IOC"><a href="#2ã€IOC" class="headerlink" title="2ã€IOC"></a>2ã€IOC</h1><h2 id="2-1ã€IOCå®¹å™¨"><a href="#2-1ã€IOCå®¹å™¨" class="headerlink" title="2.1ã€IOCå®¹å™¨"></a>2.1ã€IOCå®¹å™¨</h2><h3 id="2-1-1ã€IOCæ€æƒ³"><a href="#2-1-1ã€IOCæ€æƒ³" class="headerlink" title="2.1.1ã€IOCæ€æƒ³"></a>2.1.1ã€IOCæ€æƒ³</h3><p>IOCï¼šInversion of Controlï¼Œç¿»è¯‘è¿‡æ¥æ˜¯<strong>åè½¬æ§åˆ¶</strong>ã€‚</p><h4 id="â‘ è·å–èµ„æºçš„ä¼ ç»Ÿæ–¹å¼"><a href="#â‘ è·å–èµ„æºçš„ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="â‘ è·å–èµ„æºçš„ä¼ ç»Ÿæ–¹å¼"></a>â‘ è·å–èµ„æºçš„ä¼ ç»Ÿæ–¹å¼</h4><p>è‡ªå·±åšé¥­ï¼šä¹°èœã€æ´—èœã€æ‹©èœã€æ”¹åˆ€ã€ç‚’èœï¼Œå…¨è¿‡ç¨‹å‚ä¸ï¼Œè´¹æ—¶è´¹åŠ›ï¼Œå¿…é¡»æ¸…æ¥šäº†è§£èµ„æºåˆ›å»ºæ•´ä¸ªè¿‡ç¨‹ä¸­çš„å…¨éƒ¨ç»†èŠ‚ä¸”ç†Ÿç»ƒæŒæ¡ã€‚</p><p>åœ¨åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶éœ€è¦è·å–èµ„æºæ—¶ï¼Œä¼ ç»Ÿçš„æ–¹å¼æ˜¯ç»„ä»¶<strong>ä¸»åŠ¨</strong>çš„ä»å®¹å™¨ä¸­è·å–æ‰€éœ€è¦çš„èµ„æºï¼Œåœ¨è¿™æ ·çš„</p><p>æ¨¡å¼ä¸‹å¼€å‘äººå‘˜å¾€å¾€éœ€è¦çŸ¥é“åœ¨å…·ä½“å®¹å™¨ä¸­ç‰¹å®šèµ„æºçš„è·å–æ–¹å¼ï¼Œå¢åŠ äº†å­¦ä¹ æˆæœ¬ï¼ŒåŒæ—¶é™ä½äº†å¼€å‘æ•ˆç‡ã€‚</p><h4 id="â‘¡åè½¬æ§åˆ¶æ–¹å¼è·å–èµ„æº"><a href="#â‘¡åè½¬æ§åˆ¶æ–¹å¼è·å–èµ„æº" class="headerlink" title="â‘¡åè½¬æ§åˆ¶æ–¹å¼è·å–èµ„æº"></a>â‘¡åè½¬æ§åˆ¶æ–¹å¼è·å–èµ„æº</h4><p>ç‚¹å¤–å–ï¼šä¸‹å•ã€ç­‰ã€åƒï¼Œçœæ—¶çœåŠ›ï¼Œä¸å¿…å…³å¿ƒèµ„æºåˆ›å»ºè¿‡ç¨‹çš„æ‰€æœ‰ç»†èŠ‚ã€‚</p><p>åè½¬æ§åˆ¶çš„æ€æƒ³å®Œå…¨é¢ è¦†äº†åº”ç”¨ç¨‹åºç»„ä»¶è·å–èµ„æºçš„ä¼ ç»Ÿæ–¹å¼ï¼šåè½¬äº†èµ„æºçš„è·å–æ–¹å‘â€”â€”æ”¹ç”±å®¹å™¨ä¸»åŠ¨çš„å°†èµ„æºæ¨é€ç»™éœ€è¦çš„ç»„ä»¶ï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦çŸ¥é“å®¹å™¨æ˜¯å¦‚ä½•åˆ›å»ºèµ„æºå¯¹è±¡çš„ï¼Œåªéœ€è¦æä¾›æ¥æ”¶èµ„æºçš„æ–¹å¼å³å¯ï¼Œæå¤§çš„é™ä½äº†å­¦ä¹ æˆæœ¬ï¼Œæé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚è¿™ç§è¡Œä¸ºä¹Ÿç§°ä¸ºæŸ¥æ‰¾çš„<strong>è¢«åŠ¨</strong>å½¢å¼ã€‚</p><h4 id="â‘¢DI"><a href="#â‘¢DI" class="headerlink" title="â‘¢DI"></a>â‘¢DI</h4><p>DIï¼šDependency Injectionï¼Œç¿»è¯‘è¿‡æ¥æ˜¯<strong>ä¾èµ–æ³¨å…¥</strong>ã€‚</p><p>DI æ˜¯ IOC çš„å¦ä¸€ç§è¡¨è¿°æ–¹å¼ï¼šå³ç»„ä»¶ä»¥ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„æ–¹å¼ï¼ˆä¾‹å¦‚ï¼šsetter æ–¹æ³•ï¼‰æ¥å—æ¥è‡ªäºå®¹å™¨</p><p>çš„èµ„æºæ³¨å…¥ã€‚ç›¸å¯¹äºIOCè€Œè¨€ï¼Œè¿™ç§è¡¨è¿°æ›´ç›´æ¥ã€‚</p><p>æ‰€ä»¥ç»“è®ºæ˜¯ï¼šIOC å°±æ˜¯ä¸€ç§åè½¬æ§åˆ¶çš„æ€æƒ³ï¼Œ è€Œ DI æ˜¯å¯¹ IOC çš„ä¸€ç§å…·ä½“å®ç°ã€‚</p><h3 id="2-1-2ã€IOCå®¹å™¨åœ¨Springä¸­çš„å®ç°"><a href="#2-1-2ã€IOCå®¹å™¨åœ¨Springä¸­çš„å®ç°" class="headerlink" title="2.1.2ã€IOCå®¹å™¨åœ¨Springä¸­çš„å®ç°"></a>2.1.2ã€IOCå®¹å™¨åœ¨Springä¸­çš„å®ç°</h3><p>Spring çš„ IOC å®¹å™¨å°±æ˜¯ IOC æ€æƒ³çš„ä¸€ä¸ªè½åœ°çš„äº§å“å®ç°ã€‚IOC å®¹å™¨ä¸­ç®¡ç†çš„ç»„ä»¶ä¹Ÿå«åš beanã€‚åœ¨åˆ›å»ºbean ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åˆ›å»º IOC å®¹å™¨ã€‚Spring æä¾›äº† IOC å®¹å™¨çš„ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><h4 id="â‘ BeanFactory"><a href="#â‘ BeanFactory" class="headerlink" title="â‘ BeanFactory"></a>â‘ BeanFactory</h4><p>è¿™æ˜¯ IOC å®¹å™¨çš„åŸºæœ¬å®ç°ï¼Œæ˜¯ Spring å†…éƒ¨ä½¿ç”¨çš„æ¥å£ã€‚é¢å‘ Spring æœ¬èº«ï¼Œä¸æä¾›ç»™å¼€å‘äººå‘˜ä½¿ç”¨ã€‚</p><h4 id="â‘¡ApplicationContext"><a href="#â‘¡ApplicationContext" class="headerlink" title="â‘¡ApplicationContext"></a>â‘¡ApplicationContext</h4><p>BeanFactory çš„å­æ¥å£ï¼Œæä¾›äº†æ›´å¤šé«˜çº§ç‰¹æ€§ã€‚é¢å‘ Spring çš„ä½¿ç”¨è€…ï¼Œå‡ ä¹æ‰€æœ‰åœºåˆéƒ½ä½¿ç”¨</p><p>ApplicationContext è€Œä¸æ˜¯åº•å±‚çš„ BeanFactoryã€‚</p><h4 id="â‘¢ApplicationContextçš„ä¸»è¦å®ç°ç±»"><a href="#â‘¢ApplicationContextçš„ä¸»è¦å®ç°ç±»" class="headerlink" title="â‘¢ApplicationContextçš„ä¸»è¦å®ç°ç±»"></a>â‘¢ApplicationContextçš„ä¸»è¦å®ç°ç±»</h4><p><img src="/2022/11/12/SpringNote/5.png" alt="5"></p><table><thead><tr><th><strong>ç±»å‹å</strong></th><th><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td>ClassPathXmlApplicationContext</td><td>é€šè¿‡è¯»å–ç±»è·¯å¾„ä¸‹çš„ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶åˆ›å»º IOC å®¹å™¨å¯¹è±¡</td></tr><tr><td>FileSystemXmlApplicationContext</td><td>é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè·¯å¾„è¯»å– XML æ ¼å¼çš„é…ç½®æ–‡ä»¶åˆ›å»º IOC å®¹å™¨å¯¹è±¡</td></tr><tr><td>ConfigurableApplicationContext</td><td>ApplicationContext çš„å­æ¥å£ï¼ŒåŒ…å«ä¸€äº›æ‰©å±•æ–¹æ³•refresh() å’Œ close() ï¼Œè®© ApplicationContext å…·æœ‰å¯åŠ¨ã€å…³é—­å’Œåˆ·æ–°ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ã€‚</td></tr><tr><td>WebApplicationContext</td><td>ä¸“é—¨ä¸º Web åº”ç”¨å‡†å¤‡ï¼ŒåŸºäº Web ç¯å¢ƒåˆ›å»º IOC å®¹å™¨å¯¹è±¡ï¼Œå¹¶å°†å¯¹è±¡å¼•å…¥å­˜å…¥ ServletContext åŸŸä¸­ã€‚</td></tr></tbody></table><h2 id="2-2ã€åŸºäºXMLç®¡ç†bean"><a href="#2-2ã€åŸºäºXMLç®¡ç†bean" class="headerlink" title="2.2ã€åŸºäºXMLç®¡ç†bean"></a>2.2ã€åŸºäºXMLç®¡ç†bean</h2><h3 id="2-2-1ã€å®éªŒä¸€ï¼šå…¥é—¨æ¡ˆä¾‹"><a href="#2-2-1ã€å®éªŒä¸€ï¼šå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2.2.1ã€å®éªŒä¸€ï¼šå…¥é—¨æ¡ˆä¾‹"></a>2.2.1ã€å®éªŒä¸€ï¼šå…¥é—¨æ¡ˆä¾‹</h3><h4 id="â‘ åˆ›å»ºMaven-Module"><a href="#â‘ åˆ›å»ºMaven-Module" class="headerlink" title="â‘ åˆ›å»ºMaven Module"></a>â‘ åˆ›å»ºMaven Module</h4><h4 id="â‘¡å¼•å…¥ä¾èµ–"><a href="#â‘¡å¼•å…¥ä¾èµ–" class="headerlink" title="â‘¡å¼•å…¥ä¾èµ–"></a>â‘¡å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- åŸºäºMavenä¾èµ–ä¼ é€’æ€§ï¼Œå¯¼å…¥spring-contextä¾èµ–å³å¯å¯¼å…¥å½“å‰æ‰€éœ€æ‰€æœ‰jaråŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2022/11/12/SpringNote/6.png" alt="6"></p><h4 id="â‘¢åˆ›å»ºç±»HelloWorld"><a href="#â‘¢åˆ›å»ºç±»HelloWorld" class="headerlink" title="â‘¢åˆ›å»ºç±»HelloWorld"></a>â‘¢åˆ›å»ºç±»HelloWorld</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;helloworld&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2022/11/12/SpringNote/7.png" alt="7"></p><p><img src="/2022/11/12/SpringNote/8.png" alt="8"></p><h4 id="â‘¤åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®bean"><a href="#â‘¤åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®bean" class="headerlink" title="â‘¤åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®bean"></a>â‘¤åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">é…ç½®HelloWorldæ‰€å¯¹åº”çš„beanï¼Œå³,å°†HelloWorldçš„å¯¹è±¡äº¤ç»™Springçš„IOCå®¹å™¨ç®¡ç†</span><br><span class="hljs-comment">é€šè¿‡beanæ ‡ç­¾é…ç½®IOCå®¹å™¨æ‰€ç®¡ç†çš„bean</span><br><span class="hljs-comment">å±æ€§ï¼š</span><br><span class="hljs-comment">idï¼šè®¾ç½®beançš„å”¯ä¸€æ ‡è¯†</span><br><span class="hljs-comment">classï¼šè®¾ç½®beanæ‰€å¯¹åº”ç±»å‹çš„å…¨ç±»å</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;helloworld&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.HelloWorld&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¥åˆ›å»ºæµ‹è¯•ç±»æµ‹è¯•"><a href="#â‘¥åˆ›å»ºæµ‹è¯•ç±»æµ‹è¯•" class="headerlink" title="â‘¥åˆ›å»ºæµ‹è¯•ç±»æµ‹è¯•"></a>â‘¥åˆ›å»ºæµ‹è¯•ç±»æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//è·å–IOCå®¹å™¨</span><br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ioc</span> <span class="hljs-operator">=</span> <br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    <span class="hljs-comment">//è·å–IOCå®¹å™¨ä¸­çš„bean</span><br>    <span class="hljs-type">HelloWorld</span> <span class="hljs-variable">helloworld</span> <span class="hljs-operator">=</span> (HelloWorld) ioc.getBean(<span class="hljs-string">&quot;helloworld&quot;</span>);<br>    helloworld.sayHello();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¦æ€è·¯"><a href="#â‘¦æ€è·¯" class="headerlink" title="â‘¦æ€è·¯"></a>â‘¦æ€è·¯</h4><p><img src="/2022/11/12/SpringNote/9.png" alt="9"></p><h4 id="â‘§æ³¨æ„"><a href="#â‘§æ³¨æ„" class="headerlink" title="â‘§æ³¨æ„"></a>â‘§æ³¨æ„</h4><p>Spring åº•å±‚é»˜è®¤é€šè¿‡åå°„æŠ€æœ¯è°ƒç”¨ç»„ä»¶ç±»çš„æ— å‚æ„é€ å™¨æ¥åˆ›å»ºç»„ä»¶å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚</p><p>å¦‚æœåœ¨éœ€è¦æ— å‚æ„é€ å™¨æ—¶ï¼Œæ²¡æœ‰æ— å‚æ„é€ å™¨ï¼Œåˆ™ä¼šæŠ›å‡ºä¸‹é¢çš„å¼‚å¸¸ï¼š</p><blockquote><p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name</p><p>â€˜helloworldâ€™ defined in class path resource [applicationContext.xml]: Instantiation of bean</p><p>failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed</p><p>to instantiate [com.atguigu.spring.bean.HelloWorld]: No default constructor found; nested</p><p>exception is java.lang.NoSuchMethodException: com.atguigu.spring.bean.HelloWorld.</p><p><init>()</p></blockquote><h3 id="2-2-2ã€å®éªŒäºŒï¼šè·å–bean"><a href="#2-2-2ã€å®éªŒäºŒï¼šè·å–bean" class="headerlink" title="2.2.2ã€å®éªŒäºŒï¼šè·å–bean"></a>2.2.2ã€å®éªŒäºŒï¼šè·å–bean</h3><h4 id="â‘ æ–¹å¼ä¸€ï¼šæ ¹æ®idè·å–"><a href="#â‘ æ–¹å¼ä¸€ï¼šæ ¹æ®idè·å–" class="headerlink" title="â‘ æ–¹å¼ä¸€ï¼šæ ¹æ®idè·å–"></a>â‘ æ–¹å¼ä¸€ï¼šæ ¹æ®idè·å–</h4><p>ç”±äº id å±æ€§æŒ‡å®šäº† bean çš„å”¯ä¸€æ ‡è¯†ï¼Œæ‰€ä»¥æ ¹æ® bean æ ‡ç­¾çš„ id å±æ€§å¯ä»¥ç²¾ç¡®è·å–åˆ°ä¸€ä¸ªç»„ä»¶å¯¹è±¡ã€‚</p><p>ä¸Šä¸ªå®éªŒä¸­æˆ‘ä»¬ä½¿ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚</p><h4 id="â‘¡æ–¹å¼äºŒï¼šæ ¹æ®ç±»å‹è·å–-å¸¸ç”¨"><a href="#â‘¡æ–¹å¼äºŒï¼šæ ¹æ®ç±»å‹è·å–-å¸¸ç”¨" class="headerlink" title="â‘¡æ–¹å¼äºŒï¼šæ ¹æ®ç±»å‹è·å–(å¸¸ç”¨)"></a>â‘¡æ–¹å¼äºŒï¼šæ ¹æ®ç±»å‹è·å–(å¸¸ç”¨)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testHelloWorld</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ioc</span> <span class="hljs-operator">=</span> <br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    <span class="hljs-type">HelloWorld</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> ioc.getBean(HelloWorld.class);<br>    bean.sayHello();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢æ–¹å¼ä¸‰ï¼šæ ¹æ®idå’Œç±»å‹"><a href="#â‘¢æ–¹å¼ä¸‰ï¼šæ ¹æ®idå’Œç±»å‹" class="headerlink" title="â‘¢æ–¹å¼ä¸‰ï¼šæ ¹æ®idå’Œç±»å‹"></a>â‘¢æ–¹å¼ä¸‰ï¼šæ ¹æ®idå’Œç±»å‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testHelloWorld</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ioc</span> <span class="hljs-operator">=</span><br>        newClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    <span class="hljs-type">HelloWorld</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> ioc.getBean(<span class="hljs-string">&quot;helloworld&quot;</span>, HelloWorld.class);<br>    bean.sayHello();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘£æ³¨æ„"><a href="#â‘£æ³¨æ„" class="headerlink" title="â‘£æ³¨æ„"></a>â‘£æ³¨æ„</h4><p>å½“æ ¹æ®ç±»å‹è·å–beanæ—¶ï¼Œè¦æ±‚IOCå®¹å™¨ä¸­æŒ‡å®šç±»å‹çš„beanæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ª</p><p>å½“IOCå®¹å™¨ä¸­ä¸€å…±é…ç½®äº†ä¸¤ä¸ªï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;helloworldOne&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.HelloWorld&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;helloworldTwo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.HelloWorld&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ ¹æ®ç±»å‹è·å–æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p><blockquote><p>org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean</p><p>of type â€˜com.atguigu.spring.bean.HelloWorldâ€™ available: expected single matching bean but</p><p>found 2: helloworldOne,helloworldTwo</p></blockquote><h4 id="â‘¤æ‰©å±•"><a href="#â‘¤æ‰©å±•" class="headerlink" title="â‘¤æ‰©å±•"></a>â‘¤æ‰©å±•</h4><p>å¦‚æœç»„ä»¶ç±»å®ç°äº†æ¥å£ï¼Œæ ¹æ®æ¥å£ç±»å‹å¯ä»¥è·å– bean å—ï¼Ÿ</p><blockquote><p>å¯ä»¥ï¼Œå‰ææ˜¯beanå”¯ä¸€</p></blockquote><p>å¦‚æœä¸€ä¸ªæ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œè¿™äº›å®ç°ç±»éƒ½é…ç½®äº† beanï¼Œæ ¹æ®æ¥å£ç±»å‹å¯ä»¥è·å– bean å—ï¼Ÿ</p><blockquote><p>ä¸è¡Œï¼Œå› ä¸ºbeanä¸å”¯ä¸€</p></blockquote><h4 id="â‘¥ç»“è®º"><a href="#â‘¥ç»“è®º" class="headerlink" title="â‘¥ç»“è®º"></a>â‘¥ç»“è®º</h4><p>æ ¹æ®ç±»å‹æ¥è·å–beanæ—¶ï¼Œåœ¨æ»¡è¶³beanå”¯ä¸€æ€§çš„å‰æä¸‹ï¼Œå…¶å®åªæ˜¯çœ‹ï¼šã€å¯¹è±¡ <strong>instanceof</strong> æŒ‡å®šçš„ç±»</p><p>å‹ã€çš„è¿”å›ç»“æœï¼Œåªè¦è¿”å›çš„æ˜¯trueå°±å¯ä»¥è®¤å®šä¸ºå’Œç±»å‹åŒ¹é…ï¼Œèƒ½å¤Ÿè·å–åˆ°ã€‚</p><p>å³ï¼šé€šè¿‡ beançš„ç±»å‹ã€beanæ‰€ç»§æ‰¿çš„ç±»çš„ç±»å‹ã€beanæ‰€å®ç°çš„æ¥å£çš„ç±»å‹éƒ½å¯ä»¥è·å–bean</p><h3 id="2-2-3ã€å®éªŒä¸‰ï¼šä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥"><a href="#2-2-3ã€å®éªŒä¸‰ï¼šä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥" class="headerlink" title="2.2.3ã€å®éªŒä¸‰ï¼šä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥"></a>2.2.3ã€å®éªŒä¸‰ï¼šä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥</h3><h4 id="â‘ åˆ›å»ºå­¦ç”Ÿç±»Student"><a href="#â‘ åˆ›å»ºå­¦ç”Ÿç±»Student" class="headerlink" title="â‘ åˆ›å»ºå­¦ç”Ÿç±»Student"></a>â‘ åˆ›å»ºå­¦ç”Ÿç±»Student</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String sex;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Integer id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSex</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sex;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSex</span><span class="hljs-params">(String sex)</span> &#123;<br>        <span class="hljs-built_in">this</span>.sex = sex;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;id=&quot;</span> + id +<br>            <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>            <span class="hljs-string">&quot;, sex=&#x27;&quot;</span> + sex + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡é…ç½®beanæ—¶ä¸ºå±æ€§èµ‹å€¼"><a href="#â‘¡é…ç½®beanæ—¶ä¸ºå±æ€§èµ‹å€¼" class="headerlink" title="â‘¡é…ç½®beanæ—¶ä¸ºå±æ€§èµ‹å€¼"></a>â‘¡é…ç½®beanæ—¶ä¸ºå±æ€§èµ‹å€¼</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentOne&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- propertyæ ‡ç­¾ï¼šé€šè¿‡ç»„ä»¶ç±»çš„setXxx()æ–¹æ³•ç»™ç»„ä»¶å¯¹è±¡è®¾ç½®å±æ€§ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- nameå±æ€§ï¼šæŒ‡å®šå±æ€§åï¼ˆè¿™ä¸ªå±æ€§åæ˜¯getXxx()ã€setXxx()æ–¹æ³•å®šä¹‰çš„ï¼Œå’Œæˆå‘˜å˜é‡æ— å…³ï¼‰--&gt;</span><br>    <span class="hljs-comment">&lt;!-- valueå±æ€§ï¼šæŒ‡å®šå±æ€§å€¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1001&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;23&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ç”·&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢æµ‹è¯•"><a href="#â‘¢æµ‹è¯•" class="headerlink" title="â‘¢æµ‹è¯•"></a>â‘¢æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDIBySet</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;springdi.xml&quot;</span>);<br>    <span class="hljs-type">Student</span> <span class="hljs-variable">studentOne</span> <span class="hljs-operator">=</span> ac.getBean(<span class="hljs-string">&quot;studentOne&quot;</span>, Student.class);<br>    System.out.println(studentOne);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-4ã€å®éªŒå››ï¼šä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥"><a href="#2-2-4ã€å®éªŒå››ï¼šä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥" class="headerlink" title="2.2.4ã€å®éªŒå››ï¼šä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥"></a>2.2.4ã€å®éªŒå››ï¼šä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥</h3><h4 id="â‘ åœ¨Studentç±»ä¸­æ·»åŠ æœ‰å‚æ„é€ "><a href="#â‘ åœ¨Studentç±»ä¸­æ·»åŠ æœ‰å‚æ„é€ " class="headerlink" title="â‘ åœ¨Studentç±»ä¸­æ·»åŠ æœ‰å‚æ„é€ "></a>â‘ åœ¨Studentç±»ä¸­æ·»åŠ æœ‰å‚æ„é€ </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(Integer id, String name, Integer age, String sex)</span> &#123;<br>    <span class="hljs-built_in">this</span>.id = id;<br>    <span class="hljs-built_in">this</span>.name = name;<br>    <span class="hljs-built_in">this</span>.age = age;<br>    <span class="hljs-built_in">this</span>.sex = sex;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡é…ç½®bean"><a href="#â‘¡é…ç½®bean" class="headerlink" title="â‘¡é…ç½®bean"></a>â‘¡é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentTwo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1002&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æå››&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;33&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><p>constructor-argæ ‡ç­¾è¿˜æœ‰ä¸¤ä¸ªå±æ€§å¯ä»¥è¿›ä¸€æ­¥æè¿°æ„é€ å™¨å‚æ•°ï¼š</p><ul><li>indexå±æ€§ï¼šæŒ‡å®šå‚æ•°æ‰€åœ¨ä½ç½®çš„ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰</li><li>nameå±æ€§ï¼šæŒ‡å®šå‚æ•°å</li></ul></blockquote><h4 id="â‘¢æµ‹è¯•-1"><a href="#â‘¢æµ‹è¯•-1" class="headerlink" title="â‘¢æµ‹è¯•"></a>â‘¢æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDIBySet</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;springdi.xml&quot;</span>);<br>    <span class="hljs-type">Student</span> <span class="hljs-variable">studentOne</span> <span class="hljs-operator">=</span> ac.getBean(<span class="hljs-string">&quot;studentTwo&quot;</span>, Student.class);<br>    System.out.println(studentOne);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-5ã€å®éªŒäº”ï¼šç‰¹æ®Šå€¼å¤„ç†"><a href="#2-2-5ã€å®éªŒäº”ï¼šç‰¹æ®Šå€¼å¤„ç†" class="headerlink" title="2.2.5ã€å®éªŒäº”ï¼šç‰¹æ®Šå€¼å¤„ç†"></a>2.2.5ã€å®éªŒäº”ï¼šç‰¹æ®Šå€¼å¤„ç†</h3><h4 id="â‘ å­—é¢é‡èµ‹å€¼"><a href="#â‘ å­—é¢é‡èµ‹å€¼" class="headerlink" title="â‘ å­—é¢é‡èµ‹å€¼"></a>â‘ å­—é¢é‡èµ‹å€¼</h4><blockquote><p>ä»€ä¹ˆæ˜¯å­—é¢é‡ï¼Ÿ</p><p>int a &#x3D; 10;</p><p>å£°æ˜ä¸€ä¸ªå˜é‡aï¼Œåˆå§‹åŒ–ä¸º10ï¼Œæ­¤æ—¶aå°±ä¸ä»£è¡¨å­—æ¯aäº†ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªå˜é‡çš„åå­—ã€‚å½“æˆ‘ä»¬å¼•ç”¨a</p><p>çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ‹¿åˆ°çš„å€¼æ˜¯10ã€‚</p><p>è€Œå¦‚æœaæ˜¯å¸¦å¼•å·çš„ï¼šâ€™aâ€™ï¼Œé‚£ä¹ˆå®ƒç°åœ¨ä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒå°±æ˜¯ä»£è¡¨aè¿™ä¸ªå­—æ¯æœ¬èº«ï¼Œè¿™å°±æ˜¯å­—é¢</p><p>é‡ã€‚æ‰€ä»¥å­—é¢é‡æ²¡æœ‰å¼•ç”³å«ä¹‰ï¼Œå°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„è¿™ä¸ªæ•°æ®æœ¬èº«ã€‚</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨valueå±æ€§ç»™beançš„å±æ€§èµ‹å€¼æ—¶ï¼ŒSpringä¼šæŠŠvalueå±æ€§çš„å€¼çœ‹åšå­—é¢é‡ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¡nullå€¼"><a href="#â‘¡nullå€¼" class="headerlink" title="â‘¡nullå€¼"></a>â‘¡nullå€¼</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">null</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">null</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;null&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå†™æ³•ï¼Œä¸ºnameæ‰€èµ‹çš„å€¼æ˜¯å­—ç¬¦ä¸²null</p></blockquote><h4 id="â‘¢xmlå®ä½“"><a href="#â‘¢xmlå®ä½“" class="headerlink" title="â‘¢xmlå®ä½“"></a>â‘¢xmlå®ä½“</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å°äºå·åœ¨XMLæ–‡æ¡£ä¸­ç”¨æ¥å®šä¹‰æ ‡ç­¾çš„å¼€å§‹ï¼Œä¸èƒ½éšä¾¿ä½¿ç”¨ --&gt;</span><br><span class="hljs-comment">&lt;!-- è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨XMLå®ä½“æ¥ä»£æ›¿ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;expression&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;a <span class="hljs-symbol">&amp;lt;</span> b&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£CDATAèŠ‚"><a href="#â‘£CDATAèŠ‚" class="headerlink" title="â‘£CDATAèŠ‚"></a>â‘£CDATAèŠ‚</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;expression&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨CDATAèŠ‚ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- CDATAä¸­çš„Cä»£è¡¨Characterï¼Œæ˜¯æ–‡æœ¬ã€å­—ç¬¦çš„å«ä¹‰ï¼ŒCDATAå°±è¡¨ç¤ºçº¯æ–‡æœ¬æ•°æ® --&gt;</span><br>    <span class="hljs-comment">&lt;!-- XMLè§£æå™¨çœ‹åˆ°CDATAèŠ‚å°±çŸ¥é“è¿™é‡Œæ˜¯çº¯æ–‡æœ¬ï¼Œå°±ä¸ä¼šå½“ä½œXMLæ ‡ç­¾æˆ–å±æ€§æ¥è§£æ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ‰€ä»¥CDATAèŠ‚ä¸­å†™ä»€ä¹ˆç¬¦å·éƒ½éšæ„ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>&lt;![CDATA[a &lt; b]]&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-6ã€å®éªŒå…­ï¼šä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼"><a href="#2-2-6ã€å®éªŒå…­ï¼šä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="2.2.6ã€å®éªŒå…­ï¼šä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼"></a>2.2.6ã€å®éªŒå…­ï¼šä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼</h3><h4 id="â‘ åˆ›å»ºç­çº§ç±»Clazz"><a href="#â‘ åˆ›å»ºç­çº§ç±»Clazz" class="headerlink" title="â‘ åˆ›å»ºç­çº§ç±»Clazz"></a>â‘ åˆ›å»ºç­çº§ç±»Clazz</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Clazz</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer clazzId;<br>    <span class="hljs-keyword">private</span> String clazzName;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getClazzId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> clazzId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClazzId</span><span class="hljs-params">(Integer clazzId)</span> &#123;<br>        <span class="hljs-built_in">this</span>.clazzId = clazzId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getClazzName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> clazzName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClazzName</span><span class="hljs-params">(String clazzName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.clazzName = clazzName;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Clazz&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;clazzId=&quot;</span> + clazzId +<br>            <span class="hljs-string">&quot;, clazzName=&#x27;&quot;</span> + clazzName + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Clazz</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Clazz</span><span class="hljs-params">(Integer clazzId, String clazzName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.clazzId = clazzId;<br>        <span class="hljs-built_in">this</span>.clazzName = clazzName;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡ä¿®æ”¹Studentç±»"><a href="#â‘¡ä¿®æ”¹Studentç±»" class="headerlink" title="â‘¡ä¿®æ”¹Studentç±»"></a>â‘¡ä¿®æ”¹Studentç±»</h4><p>åœ¨Studentç±»ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Clazz clazz;<br><span class="hljs-keyword">public</span> Clazz <span class="hljs-title function_">getClazz</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> clazz;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClazz</span><span class="hljs-params">(Clazz clazz)</span> &#123;<br>    <span class="hljs-built_in">this</span>.clazz = clazz;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢æ–¹å¼ä¸€ï¼šå¼•ç”¨å¤–éƒ¨å·²å£°æ˜çš„bean"><a href="#â‘¢æ–¹å¼ä¸€ï¼šå¼•ç”¨å¤–éƒ¨å·²å£°æ˜çš„bean" class="headerlink" title="â‘¢æ–¹å¼ä¸€ï¼šå¼•ç”¨å¤–éƒ¨å·²å£°æ˜çš„bean"></a>â‘¢æ–¹å¼ä¸€ï¼šå¼•ç”¨å¤–éƒ¨å·²å£°æ˜çš„bean</h4><p><strong>è¯´æ˜ï¼šrefï¼šå¼•ç”¨IOCå®¹å™¨ä¸­çš„æŸä¸ªbeançš„id</strong></p><p>é…ç½®Clazzç±»å‹çš„beanï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;clazzOne&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Clazz&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1111&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;è´¢æºæ»šæ»šç­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸ºStudentä¸­çš„clazzå±æ€§èµ‹å€¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- refå±æ€§ï¼šå¼•ç”¨IOCå®¹å™¨ä¸­æŸä¸ªbeançš„idï¼Œå°†æ‰€å¯¹åº”çš„beanä¸ºå±æ€§èµ‹å€¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;clazzOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é”™è¯¯æ¼”ç¤ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;clazzOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœé”™æŠŠrefå±æ€§å†™æˆäº†valueå±æ€§ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼š Caused by: java.lang.IllegalStateException:</p><p>Cannot convert value of type â€˜java.lang.Stringâ€™ to required type</p><p>â€˜com.atguigu.spring.bean.Clazzâ€™ for property â€˜clazzâ€™: no matching editors or conversion</p><p>strategy found</p><p>æ„æ€æ˜¯ä¸èƒ½æŠŠStringç±»å‹è½¬æ¢æˆæˆ‘ä»¬è¦çš„Clazzç±»å‹ï¼Œè¯´æ˜æˆ‘ä»¬ä½¿ç”¨valueå±æ€§æ—¶ï¼ŒSpringåªæŠŠè¿™ä¸ª</p><p>å±æ€§çœ‹åšä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªbeançš„idï¼Œæ›´ä¸ä¼šæ ¹æ®å®ƒå»æ‰¾åˆ°beanæ¥èµ‹å€¼</p></blockquote><h4 id="â‘£æ–¹å¼äºŒï¼šå†…éƒ¨bean"><a href="#â‘£æ–¹å¼äºŒï¼šå†…éƒ¨bean" class="headerlink" title="â‘£æ–¹å¼äºŒï¼šå†…éƒ¨bean"></a>â‘£æ–¹å¼äºŒï¼šå†…éƒ¨bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- åœ¨ä¸€ä¸ªbeanä¸­å†å£°æ˜ä¸€ä¸ªbeanå°±æ˜¯å†…éƒ¨bean --&gt;</span><br>        <span class="hljs-comment">&lt;!-- å†…éƒ¨beanåªèƒ½ç”¨äºç»™å±æ€§èµ‹å€¼ï¼Œä¸èƒ½åœ¨å¤–éƒ¨é€šè¿‡IOCå®¹å™¨è·å–ï¼Œå› æ­¤å¯ä»¥çœç•¥idå±æ€§ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;clazzInner&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Clazz&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2222&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;è¿œå¤§å‰ç¨‹ç­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢æ–¹å¼ä¸‰ï¼šçº§è”å±æ€§èµ‹å€¼ï¼ˆæ¯”è¾ƒå°‘ç”¨ï¼‰"><a href="#â‘¢æ–¹å¼ä¸‰ï¼šçº§è”å±æ€§èµ‹å€¼ï¼ˆæ¯”è¾ƒå°‘ç”¨ï¼‰" class="headerlink" title="â‘¢æ–¹å¼ä¸‰ï¼šçº§è”å±æ€§èµ‹å€¼ï¼ˆæ¯”è¾ƒå°‘ç”¨ï¼‰"></a>â‘¢æ–¹å¼ä¸‰ï¼šçº§è”å±æ€§èµ‹å€¼ï¼ˆæ¯”è¾ƒå°‘ç”¨ï¼‰</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä¸€å®šè¦å…ˆå¼•ç”¨æŸä¸ªbeanä¸ºç±»å±æ€§èµ‹å€¼ï¼Œæ‰å¯ä»¥ä½¿ç”¨çº§è”æ–¹å¼æ›´æ–°å±æ€§ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;clazzOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz.clazzId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;3333&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz.clazzName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æœ€å¼ºç‹è€…ç­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-7ã€å®éªŒä¸ƒï¼šä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼"><a href="#2-2-7ã€å®éªŒä¸ƒï¼šä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="2.2.7ã€å®éªŒä¸ƒï¼šä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼"></a>2.2.7ã€å®éªŒä¸ƒï¼šä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼</h3><h4 id="â‘ ä¿®æ”¹Studentç±»"><a href="#â‘ ä¿®æ”¹Studentç±»" class="headerlink" title="â‘ ä¿®æ”¹Studentç±»"></a>â‘ ä¿®æ”¹Studentç±»</h4><p>åœ¨Studentç±»ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> String[] hobbies;<br><span class="hljs-keyword">public</span> String[] getHobbies() &#123;<br>    <span class="hljs-keyword">return</span> hobbies;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHobbies</span><span class="hljs-params">(String[] hobbies)</span> &#123;<br>    <span class="hljs-built_in">this</span>.hobbies = hobbies;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡é…ç½®bean-1"><a href="#â‘¡é…ç½®bean-1" class="headerlink" title="â‘¡é…ç½®bean"></a>â‘¡é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;clazzOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobbies&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--å¦‚æœæ˜¯å­—é¢é‡ç±»å‹å°±ä½¿ç”¨valueï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹å°±ä½¿ç”¨ref--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æŠ½çƒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å–é…’<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>çƒ«å¤´<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-8ã€å®éªŒå…«ï¼šä¸ºé›†åˆç±»å‹å±æ€§èµ‹å€¼"><a href="#2-2-8ã€å®éªŒå…«ï¼šä¸ºé›†åˆç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="2.2.8ã€å®éªŒå…«ï¼šä¸ºé›†åˆç±»å‹å±æ€§èµ‹å€¼"></a>2.2.8ã€å®éªŒå…«ï¼šä¸ºé›†åˆç±»å‹å±æ€§èµ‹å€¼</h3><h4 id="â‘ ä¸ºListé›†åˆç±»å‹å±æ€§èµ‹å€¼"><a href="#â‘ ä¸ºListé›†åˆç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="â‘ ä¸ºListé›†åˆç±»å‹å±æ€§èµ‹å€¼"></a>â‘ ä¸ºListé›†åˆç±»å‹å±æ€§èµ‹å€¼</h4><p>åœ¨Clazzç±»ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> List&lt;Student&gt; students;<br><span class="hljs-keyword">public</span> List&lt;Student&gt; <span class="hljs-title function_">getStudents</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> students;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStudents</span><span class="hljs-params">(List&lt;Student&gt; students)</span> &#123;<br>    <span class="hljs-built_in">this</span>.students = students;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®beanï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;clazzTwo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Clazz&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;4444&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Javaee0222&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;students&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;studentOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;studentTwo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;studentThree&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>è‹¥ä¸ºSeté›†åˆç±»å‹å±æ€§èµ‹å€¼ï¼Œåªéœ€è¦å°†å…¶ä¸­çš„listæ ‡ç­¾æ”¹ä¸ºsetæ ‡ç­¾å³å¯</p></blockquote><h4 id="â‘¡ä¸ºMapé›†åˆç±»å‹å±æ€§èµ‹å€¼"><a href="#â‘¡ä¸ºMapé›†åˆç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="â‘¡ä¸ºMapé›†åˆç±»å‹å±æ€§èµ‹å€¼"></a>â‘¡ä¸ºMapé›†åˆç±»å‹å±æ€§èµ‹å€¼</h4><p>åˆ›å»ºæ•™å¸ˆç±»Teacherï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer teacherId;<br>    <span class="hljs-keyword">private</span> String teacherName;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getTeacherId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> teacherId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTeacherId</span><span class="hljs-params">(Integer teacherId)</span> &#123;<br>        <span class="hljs-built_in">this</span>.teacherId = teacherId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTeacherName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> teacherName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTeacherName</span><span class="hljs-params">(String teacherName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.teacherName = teacherName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teacher</span><span class="hljs-params">(Integer teacherId, String teacherName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.teacherId = teacherId;<br>        <span class="hljs-built_in">this</span>.teacherName = teacherName;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teacher</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Teacher&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;teacherId=&quot;</span> + teacherId +<br>            <span class="hljs-string">&quot;, teacherName=&#x27;&quot;</span> + teacherName + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨Studentç±»ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Map&lt;String, Teacher&gt; teacherMap;<br><span class="hljs-keyword">public</span> Map&lt;String, Teacher&gt; <span class="hljs-title function_">getTeacherMap</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> teacherMap;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTeacherMap</span><span class="hljs-params">(Map&lt;String, Teacher&gt; teacherMap)</span> &#123;<br>    <span class="hljs-built_in">this</span>.teacherMap = teacherMap;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®beanï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;teacherOne&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Teacher&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;teacherId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10010&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;teacherName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¤§å®&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;teacherTwo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Teacher&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;teacherId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10086&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;teacherName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;äºŒå®&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- refå±æ€§ï¼šå¼•ç”¨IOCå®¹å™¨ä¸­æŸä¸ªbeançš„idï¼Œå°†æ‰€å¯¹åº”çš„beanä¸ºå±æ€§èµ‹å€¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;clazzOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobbies&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æŠ½çƒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å–é…’<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>çƒ«å¤´<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;teacherMap&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>10010<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;teacherOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>10086<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;teacherTwo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢å¼•ç”¨é›†åˆç±»å‹çš„bean"><a href="#â‘¢å¼•ç”¨é›†åˆç±»å‹çš„bean" class="headerlink" title="â‘¢å¼•ç”¨é›†åˆç±»å‹çš„bean"></a>â‘¢å¼•ç”¨é›†åˆç±»å‹çš„bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--listé›†åˆç±»å‹çš„bean--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">util:list</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;students&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;studentOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;studentTwo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;studentThree&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">util:list</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--mapé›†åˆç±»å‹çš„bean--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">util:map</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;teacherMap&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>10010<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;teacherOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>10086<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;teacherTwo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">util:map</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;clazzTwo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Clazz&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzId&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;4444&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazzName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Javaee0222&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;students&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;students&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentFour&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1004&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;èµµå…­&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;26&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¥³&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- refå±æ€§ï¼šå¼•ç”¨IOCå®¹å™¨ä¸­æŸä¸ªbeançš„idï¼Œå°†æ‰€å¯¹åº”çš„beanä¸ºå±æ€§èµ‹å€¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clazz&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;clazzOne&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobbies&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æŠ½çƒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å–é…’<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>çƒ«å¤´<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;teacherMap&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;teacherMap&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨util:listã€util:mapæ ‡ç­¾å¿…é¡»å¼•å…¥ç›¸åº”çš„å‘½åç©ºé—´ï¼Œå¯ä»¥é€šè¿‡ideaçš„æç¤ºåŠŸèƒ½é€‰æ‹©</p></blockquote><h3 id="2-2-9ã€å®éªŒä¹ï¼špå‘½åç©ºé—´"><a href="#2-2-9ã€å®éªŒä¹ï¼špå‘½åç©ºé—´" class="headerlink" title="2.2.9ã€å®éªŒä¹ï¼špå‘½åç©ºé—´"></a>2.2.9ã€å®éªŒä¹ï¼špå‘½åç©ºé—´</h3><p>å¼•å…¥på‘½åç©ºé—´åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸ºbeançš„å„ä¸ªå±æ€§èµ‹å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;studentSix&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.bean.Student&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">p:id</span>=<span class="hljs-string">&quot;1006&quot;</span> <span class="hljs-attr">p:name</span>=<span class="hljs-string">&quot;å°æ˜&quot;</span> <span class="hljs-attr">p:clazz-ref</span>=<span class="hljs-string">&quot;clazzOne&quot;</span> <span class="hljs-attr">p:teacherMap-ref</span>=<span class="hljs-string">&quot;teacherMap&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-10ã€å®éªŒåï¼šå¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶"><a href="#2-2-10ã€å®éªŒåï¼šå¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶" class="headerlink" title="2.2.10ã€å®éªŒåï¼šå¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶"></a>2.2.10ã€å®éªŒåï¼šå¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶</h3><h4 id="â‘ åŠ å…¥ä¾èµ–"><a href="#â‘ åŠ å…¥ä¾èµ–" class="headerlink" title="â‘ åŠ å…¥ä¾èµ–"></a>â‘ åŠ å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ•°æ®æº --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¡åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶"><a href="#â‘¡åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶" class="headerlink" title="â‘¡åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶"></a>â‘¡åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶</h4><p><img src="/2022/11/12/SpringNote/10.png" alt="10"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jdbc.user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-string">atguigu</span><br><span class="hljs-attr">jdbc.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC</span><br><span class="hljs-attr">jdbc.driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢å¼•å…¥å±æ€§æ–‡ä»¶"><a href="#â‘¢å¼•å…¥å±æ€§æ–‡ä»¶" class="headerlink" title="â‘¢å¼•å…¥å±æ€§æ–‡ä»¶"></a>â‘¢å¼•å…¥å±æ€§æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£é…ç½®bean"><a href="#â‘£é…ç½®bean" class="headerlink" title="â‘£é…ç½®bean"></a>â‘£é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;druidDataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.user&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¤æµ‹è¯•"><a href="#â‘¤æµ‹è¯•" class="headerlink" title="â‘¤æµ‹è¯•"></a>â‘¤æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDataSource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;spring-datasource.xml&quot;</span>);<br>    <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> ac.getBean(DataSource.class);<br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>    System.out.println(connection);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h4><p><a href="https://www.cnblogs.com/ttflove/p/6351345.html">é€šé…ç¬¦çš„åŒ¹é…å¾ˆå…¨é¢, ä½†æ— æ³•æ‰¾åˆ°å…ƒç´  â€˜context:property-placeholderâ€™ çš„å£°æ˜ã€‚</a></p><p>åœ¨Springç›¸åº”åŒ…å¯¼å…¥æ­£ç¡®çš„å‰æä¸‹ï¼Œå‡ºç°è¿™ä¸ªå¼‚å¸¸ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨å¼•å…¥å‘½åç©ºé—´çš„æ—¶å€™ï¼Œæ²¡æœ‰æ­£ç¡®å¼•å…¥å®ƒçš„DTDè§£ææ–‡ä»¶ï¼Œä»¥ä¸Šé¢çš„contextä¸ºä¾‹ï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p><p>åœ¨å¼•å…¥xmlns:context&#x3D;â€<a href="http://www.springframework.org/schema/context%22%E7%9A%84%E5%90%8C%E6%97%B6%EF%BC%8C%E5%9C%A8xsi:schemaLocation%E8%BF%99%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%B7%BB%E5%8A%A0context%E7%9B%B8%E5%85%B3%E7%9A%84%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6%EF%BC%9A">http://www.springframework.org/schema/context&quot;çš„åŒæ—¶ï¼Œåœ¨xsi:schemaLocationè¿™ä¸ªå­—ç¬¦ä¸²ä¸­æ·»åŠ contextç›¸å…³çš„è§£ææ–‡ä»¶ï¼š</a></p><p><a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a> </p><p><a href="http://www.springframework.org/schema/context/spring-context-4.2.xsd">http://www.springframework.org/schema/context/spring-context-4.2.xsd</a></p><p>å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans </span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context/spring-context-4.2.xsd&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-11ã€å®éªŒåä¸€ï¼šbeançš„ä½œç”¨åŸŸ"><a href="#2-2-11ã€å®éªŒåä¸€ï¼šbeançš„ä½œç”¨åŸŸ" class="headerlink" title="2.2.11ã€å®éªŒåä¸€ï¼šbeançš„ä½œç”¨åŸŸ"></a>2.2.11ã€å®éªŒåä¸€ï¼šbeançš„ä½œç”¨åŸŸ</h3><h4 id="â‘ æ¦‚å¿µ"><a href="#â‘ æ¦‚å¿µ" class="headerlink" title="â‘ æ¦‚å¿µ"></a>â‘ æ¦‚å¿µ</h4><p>åœ¨Springä¸­å¯ä»¥é€šè¿‡é…ç½®beanæ ‡ç­¾çš„scopeå±æ€§æ¥æŒ‡å®šbeançš„ä½œç”¨åŸŸèŒƒå›´ï¼Œå„å–å€¼å«ä¹‰å‚åŠ ä¸‹è¡¨ï¼š</p><table><thead><tr><th><strong>å–å€¼</strong></th><th><strong>å«ä¹‰</strong></th><th><strong>åˆ›å»ºå¯¹è±¡çš„æ—¶æœº</strong></th></tr></thead><tbody><tr><td>singletonï¼ˆé»˜è®¤ï¼‰</td><td>åœ¨IOCå®¹å™¨ä¸­ï¼Œè¿™ä¸ªbeançš„å¯¹è±¡å§‹ç»ˆä¸ºå•å®ä¾‹</td><td>IOCå®¹å™¨åˆå§‹åŒ–æ—¶</td></tr><tr><td>prototype</td><td>è¿™ä¸ªbeanåœ¨IOCå®¹å™¨ä¸­æœ‰å¤šä¸ªå®ä¾‹</td><td>è·å–beanæ—¶</td></tr></tbody></table><p>å¦‚æœæ˜¯åœ¨WebApplicationContextç¯å¢ƒä¸‹è¿˜ä¼šæœ‰å¦å¤–ä¸¤ä¸ªä½œç”¨åŸŸï¼ˆä½†ä¸å¸¸ç”¨ï¼‰ï¼š</p><table><thead><tr><th><strong>å–å€¼</strong></th><th><strong>å«ä¹‰</strong></th></tr></thead><tbody><tr><td>request</td><td>åœ¨ä¸€ä¸ªè¯·æ±‚èŒƒå›´å†…æœ‰æ•ˆ</td></tr><tr><td>session</td><td>åœ¨ä¸€ä¸ªä¼šè¯èŒƒå›´å†…æœ‰æ•ˆ</td></tr></tbody></table><h4 id="â‘¡åˆ›å»ºç±»User"><a href="#â‘¡åˆ›å»ºç±»User" class="headerlink" title="â‘¡åˆ›å»ºç±»User"></a>â‘¡åˆ›å»ºç±»User</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br><span class="hljs-keyword">private</span> Integer id;<br><span class="hljs-keyword">private</span> String username;<br><span class="hljs-keyword">private</span> String password;<br><span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(Integer id, String username, String password, Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>        <span class="hljs-built_in">this</span>.username = username;<br>        <span class="hljs-built_in">this</span>.password = password;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Integer id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> username;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> &#123;<br>        <span class="hljs-built_in">this</span>.username = username;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> password;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPassword</span><span class="hljs-params">(String password)</span> &#123;<br>        <span class="hljs-built_in">this</span>.password = password;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;id=&quot;</span> + id +<br>            <span class="hljs-string">&quot;, username=&#x27;&quot;</span> + username + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, password=&#x27;&quot;</span> + password + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢é…ç½®bean"><a href="#â‘¢é…ç½®bean" class="headerlink" title="â‘¢é…ç½®bean"></a>â‘¢é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- scopeå±æ€§ï¼šå–å€¼singletonï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œbeanåœ¨IOCå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ŒIOCå®¹å™¨åˆå§‹åŒ–æ—¶åˆ›å»ºå¯¹è±¡ --&gt;</span><br><span class="hljs-comment">&lt;!-- scopeå±æ€§ï¼šå–å€¼prototypeï¼Œbeanåœ¨IOCå®¹å™¨ä¸­å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼ŒgetBean()æ—¶åˆ›å»ºå¯¹è±¡ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.bean.User&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£æµ‹è¯•"><a href="#â‘£æµ‹è¯•" class="headerlink" title="â‘£æµ‹è¯•"></a>â‘£æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBeanScope</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;spring-scope.xml&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> ac.getBean(User.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> ac.getBean(User.class);<br>    System.out.println(user1==user2);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-12ã€å®éªŒåäºŒï¼šbeançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#2-2-12ã€å®éªŒåäºŒï¼šbeançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.2.12ã€å®éªŒåäºŒï¼šbeançš„ç”Ÿå‘½å‘¨æœŸ"></a>2.2.12ã€å®éªŒåäºŒï¼šbeançš„ç”Ÿå‘½å‘¨æœŸ</h3><p>è‹¥beançš„ä½œç”¨åŸŸä¸º<strong>å•ä¾‹æ¨¡å¼</strong>ï¼Œç”Ÿå‘½å‘¨æœŸçš„å‰ä¸‰ä¸ªæ­¥éª¤ä¼šåœ¨<strong>è·å–IOCå®¹å™¨æ—¶</strong>å¼€å§‹ï¼Œ<strong>é”€æ¯ä¼šç”±IOCå®¹å™¨ç®¡ç†</strong></p><p>è‹¥beançš„ä½œç”¨åŸŸä¸º<strong>å¤šä¾‹æ¨¡å¼</strong>ï¼Œç”Ÿå‘½å‘¨æœŸçš„å‰ä¸‰ä¸ªæ­¥éª¤ä¼šåœ¨<strong>è·å–beanå¯¹è±¡æ—¶</strong>å¼€å§‹ï¼Œ<strong>é”€æ¯ä¸ç”±IOCå®¹å™¨ç®¡ç†</strong></p><h4 id="â‘ å…·ä½“çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹"><a href="#â‘ å…·ä½“çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹" class="headerlink" title="â‘ å…·ä½“çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹"></a>â‘ å…·ä½“çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹</h4><ul><li><strong>beanå¯¹è±¡åˆ›å»ºï¼ˆè°ƒç”¨æ— å‚æ„é€ å™¨ï¼‰</strong></li><li><strong>ç»™beanå¯¹è±¡è®¾ç½®å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰</strong></li><li>beanå¯¹è±¡åˆå§‹åŒ–ä¹‹å‰æ“ä½œï¼ˆç”±beançš„åç½®å¤„ç†å™¨è´Ÿè´£ï¼‰</li><li><strong>beanå¯¹è±¡åˆå§‹åŒ–ï¼ˆéœ€åœ¨é…ç½®beanæ—¶é€šè¿‡ init-method å±æ€§æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼‰</strong></li><li>beanå¯¹è±¡åˆå§‹åŒ–ä¹‹åæ“ä½œï¼ˆç”±beançš„åç½®å¤„ç†å™¨è´Ÿè´£ï¼‰</li><li>beanå¯¹è±¡å°±ç»ªå¯ä»¥ä½¿ç”¨</li><li><strong>beanå¯¹è±¡é”€æ¯ï¼ˆéœ€åœ¨é…ç½®beanæ—¶é€šè¿‡ destory-method å±æ€§æŒ‡å®šé”€æ¯æ–¹æ³•ï¼‰</strong></li><li>IOCå®¹å™¨å…³é—­</li></ul><h4 id="â‘¡ä¿®æ”¹ç±»User"><a href="#â‘¡ä¿®æ”¹ç±»User" class="headerlink" title="â‘¡ä¿®æ”¹ç±»User"></a>â‘¡ä¿®æ”¹ç±»User</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç”Ÿå‘½å‘¨æœŸï¼š1ã€åˆ›å»ºå¯¹è±¡&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(Integer id, String username, String password, Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>        <span class="hljs-built_in">this</span>.username = username;<br>        <span class="hljs-built_in">this</span>.password = password;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Integer id)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç”Ÿå‘½å‘¨æœŸï¼š2ã€ä¾èµ–æ³¨å…¥&quot;</span>);<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> username;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> &#123;<br>        <span class="hljs-built_in">this</span>.username = username;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> password;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPassword</span><span class="hljs-params">(String password)</span> &#123;<br>        <span class="hljs-built_in">this</span>.password = password;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initMethod</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç”Ÿå‘½å‘¨æœŸï¼š3ã€åˆå§‹åŒ–&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroyMethod</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç”Ÿå‘½å‘¨æœŸï¼š5ã€é”€æ¯&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;id=&quot;</span> + id +<br>            <span class="hljs-string">&quot;, username=&#x27;&quot;</span> + username + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, password=&#x27;&quot;</span> + password + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„å…¶ä¸­çš„initMethod()å’ŒdestroyMethod()ï¼Œå¯ä»¥é€šè¿‡é…ç½®beanæŒ‡å®šä¸ºåˆå§‹åŒ–å’Œé”€æ¯çš„æ–¹æ³•</p></blockquote><h4 id="â‘¢é…ç½®bean-1"><a href="#â‘¢é…ç½®bean-1" class="headerlink" title="â‘¢é…ç½®bean"></a>â‘¢é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨init-methodå±æ€§æŒ‡å®šåˆå§‹åŒ–æ–¹æ³• --&gt;</span><br><span class="hljs-comment">&lt;!-- ä½¿ç”¨destroy-methodå±æ€§æŒ‡å®šé”€æ¯æ–¹æ³• --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.bean.User&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span> <span class="hljs-attr">init-method</span>=<span class="hljs-string">&quot;initMethod&quot;</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">&quot;destroyMethod&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1001&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;23&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£æµ‹è¯•-1"><a href="#â‘£æµ‹è¯•-1" class="headerlink" title="â‘£æµ‹è¯•"></a>â‘£æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLife</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">/* ConfigurableApplicationContextæ˜¯ApplicationContextçš„å­æ¥å£ï¼Œå…¶ä¸­æ‰©å±•äº†åˆ·æ–°å’Œå…³é—­å®¹å™¨çš„æ–¹æ³•ï¼› ClassPathXmlApplicationContextæ˜¯ConfigurableApplicationContextçš„ä¸€ä¸ªå®ç°ç±» */</span><br>    <span class="hljs-type">ClassPathXmlApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;spring-lifecycle.xml&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> ac.getBean(User.class);<br>    System.out.println(<span class="hljs-string">&quot;ç”Ÿå‘½å‘¨æœŸï¼š4ã€é€šè¿‡IOCå®¹å™¨è·å–beanå¹¶ä½¿ç”¨&quot;</span>);<br>    ac.close();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¤beançš„åç½®å¤„ç†å™¨"><a href="#â‘¤beançš„åç½®å¤„ç†å™¨" class="headerlink" title="â‘¤beançš„åç½®å¤„ç†å™¨"></a>â‘¤beançš„åç½®å¤„ç†å™¨</h4><p>beançš„åç½®å¤„ç†å™¨ä¼šåœ¨ç”Ÿå‘½å‘¨æœŸçš„<strong>åˆå§‹åŒ–å‰å</strong>æ·»åŠ é¢å¤–çš„æ“ä½œï¼Œéœ€è¦å®ç°BeanPostProcessoræ¥å£ï¼Œä¸”éœ€è¦é…ç½®åˆ° IOCå®¹å™¨ä¸­</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œbeanåç½®å¤„ç†å™¨ä¸æ˜¯å•ç‹¬é’ˆå¯¹æŸä¸€ä¸ªbeanç”Ÿæ•ˆï¼Œè€Œæ˜¯é’ˆå¯¹IOCå®¹å™¨ä¸­æ‰€æœ‰beanéƒ½ä¼šæ‰§è¡Œ</strong></p><p>åˆ›å»ºbeançš„åç½®å¤„ç†å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.spring.process;<br><span class="hljs-keyword">import</span> org.springframework.beans.BeansException;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.config.BeanPostProcessor;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBeanProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanPostProcessor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException &#123;<br>        System.out.println(<span class="hljs-string">&quot;åç½®å¤„ç†å™¨â˜†â˜†â˜†&quot;</span> + beanName + <span class="hljs-string">&quot; = &quot;</span> + bean);<br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <br><span class="hljs-keyword">throws</span> BeansException &#123;<br>        System.out.println(<span class="hljs-string">&quot;åç½®å¤„ç†å™¨â˜…â˜…â˜…&quot;</span> + beanName + <span class="hljs-string">&quot; = &quot;</span> + bean);<br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨IOCå®¹å™¨ä¸­é…ç½®åç½®å¤„ç†å™¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- beançš„åç½®å¤„ç†å™¨è¦æ”¾å…¥IOCå®¹å™¨æ‰èƒ½ç”Ÿæ•ˆ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myBeanProcessor&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.spring.process.MyBeanProcessor&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-13ã€å®éªŒåä¸‰ï¼šFactoryBean"><a href="#2-2-13ã€å®éªŒåä¸‰ï¼šFactoryBean" class="headerlink" title="2.2.13ã€å®éªŒåä¸‰ï¼šFactoryBean"></a>2.2.13ã€å®éªŒåä¸‰ï¼šFactoryBean</h3><p><strong>è¯´æ˜ï¼šéœ€è¦å®ç° FactoryBean&lt;T&gt; æ¥å£</strong> </p><h4 id="â‘ ç®€ä»‹"><a href="#â‘ ç®€ä»‹" class="headerlink" title="â‘ ç®€ä»‹"></a>â‘ ç®€ä»‹</h4><p>FactoryBeanæ˜¯Springæä¾›çš„ä¸€ç§æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶çš„å¸¸ç”¨æœºåˆ¶ã€‚</p><p><strong>å’Œæ™®é€šçš„beanä¸åŒï¼Œé…ç½®ä¸€ä¸ªFactoryBeanç±»å‹çš„beanï¼Œåœ¨è·å–beançš„æ—¶å€™å¾—åˆ°çš„å¹¶ä¸æ˜¯classå±æ€§ä¸­é…ç½®çš„è¿™ä¸ªç±»çš„å¯¹è±¡ï¼ˆFactoryå¯¹è±¡ï¼‰ï¼Œè€Œæ˜¯getObject()æ–¹æ³•çš„è¿”å›å€¼ï¼ˆFactoryæ‰€æä¾›çš„å¯¹è±¡ï¼‰ã€‚</strong>é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒSpringå¯ä»¥å¸®æˆ‘ä»¬æŠŠå¤æ‚ç»„ä»¶åˆ›å»ºçš„è¯¦ç»†è¿‡ç¨‹å’Œç¹çç»†èŠ‚éƒ½å±è”½èµ·æ¥ï¼ŒåªæŠŠæœ€ç®€æ´çš„ä½¿ç”¨ç•Œé¢å±•ç¤ºç»™æˆ‘ä»¬ã€‚</p><p>å°†æ¥æˆ‘ä»¬æ•´åˆMybatisæ—¶ï¼ŒSpringå°±æ˜¯é€šè¿‡FactoryBeanæœºåˆ¶æ¥å¸®æˆ‘ä»¬åˆ›å»ºSqlSessionFactoryå¯¹è±¡çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">* Copyright 2002-2020 the original author or authors.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="hljs-comment">* you may not use this file except in compliance with the License.</span><br><span class="hljs-comment">* You may obtain a copy of the License at</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* https://www.apache.org/licenses/LICENSE-2.0</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* Unless required by applicable law or agreed to in writing, software</span><br><span class="hljs-comment">* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="hljs-comment">* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="hljs-comment">* See the License for the specific language governing permissions and</span><br><span class="hljs-comment">* limitations under the License.</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> org.springframework.beans.factory;<br><span class="hljs-keyword">import</span> org.springframework.lang.Nullable;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* Interface to be implemented by objects used within a &#123;<span class="hljs-doctag">@link</span> BeanFactory&#125;</span><br><span class="hljs-comment">which</span><br><span class="hljs-comment">* are themselves factories for individual objects. If a bean implements this</span><br><span class="hljs-comment">* interface, it is used as a factory for an object to expose, not directly as a</span><br><span class="hljs-comment">* bean instance that will be exposed itself.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* &lt;p&gt;&lt;b&gt;NB: A bean that implements this interface cannot be used as a normal</span><br><span class="hljs-comment">bean.&lt;/b&gt;</span><br><span class="hljs-comment">* A FactoryBean is defined in a bean style, but the object exposed for bean</span><br><span class="hljs-comment">* references (&#123;<span class="hljs-doctag">@link</span> #getObject()&#125;) is always the object that it creates.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* &lt;p&gt;FactoryBeans can support singletons and prototypes, and can either create</span><br><span class="hljs-comment">* objects lazily on demand or eagerly on startup. The &#123;<span class="hljs-doctag">@link</span> SmartFactoryBean&#125;</span><br><span class="hljs-comment">* interface allows for exposing more fine-grained behavioral metadata.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* &lt;p&gt;This interface is heavily used within the framework itself, for example</span><br><span class="hljs-comment">for</span><br><span class="hljs-comment">* the AOP &#123;<span class="hljs-doctag">@link</span> org.springframework.aop.framework.ProxyFactoryBean&#125; or the</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@link</span> org.springframework.jndi.JndiObjectFactoryBean&#125;. It can be used for</span><br><span class="hljs-comment">* custom components as well; however, this is only common for infrastructure</span><br><span class="hljs-comment">code.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* &lt;p&gt;&lt;b&gt;&#123;<span class="hljs-doctag">@code</span> FactoryBean&#125; is a programmatic contract. Implementations are not</span><br><span class="hljs-comment">* supposed to rely on annotation-driven injection or other reflective</span><br><span class="hljs-comment">facilities.&lt;/b&gt;</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@link</span> #getObjectType()&#125; &#123;<span class="hljs-doctag">@link</span> #getObject()&#125; invocations may arrive early in</span><br><span class="hljs-comment">the</span><br><span class="hljs-comment">* bootstrap process, even ahead of any post-processor setup. If you need access</span><br><span class="hljs-comment">to</span><br><span class="hljs-comment">* other beans, implement &#123;<span class="hljs-doctag">@link</span> BeanFactoryAware&#125; and obtain them</span><br><span class="hljs-comment">programmatically.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* &lt;p&gt;&lt;b&gt;The container is only responsible for managing the lifecycle of the</span><br><span class="hljs-comment">FactoryBean</span><br><span class="hljs-comment">* instance, not the lifecycle of the objects created by the FactoryBean.&lt;/b&gt;</span><br><span class="hljs-comment">Therefore,</span><br><span class="hljs-comment">* a destroy method on an exposed bean object (such as &#123;<span class="hljs-doctag">@link</span></span><br><span class="hljs-comment">java.io.Closeable#close()&#125;</span><br><span class="hljs-comment">* will &lt;i&gt;not&lt;/i&gt; be called automatically. Instead, a FactoryBean should</span><br><span class="hljs-comment">implement</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@link</span> DisposableBean&#125; and delegate any such close call to the underlying</span><br><span class="hljs-comment">object.</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* &lt;p&gt;Finally, FactoryBean objects participate in the containing BeanFactory&#x27;s</span><br><span class="hljs-comment">* synchronization of bean creation. There is usually no need for internal</span><br><span class="hljs-comment">* synchronization other than for purposes of lazy initialization within the</span><br><span class="hljs-comment">* FactoryBean itself (or the like).</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* <span class="hljs-doctag">@author</span> Rod Johnson</span><br><span class="hljs-comment">* <span class="hljs-doctag">@author</span> Juergen Hoeller</span><br><span class="hljs-comment">* <span class="hljs-doctag">@since</span> 08.03.2003</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> &lt;T&gt; the bean type</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> org.springframework.beans.factory.BeanFactory</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> org.springframework.aop.framework.ProxyFactoryBean</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> org.springframework.jndi.JndiObjectFactoryBean</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FactoryBean</span>&lt;T&gt; &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* The name of an attribute that can be</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@link</span> org.springframework.core.AttributeAccessor#setAttribute set&#125; on a</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@link</span> org.springframework.beans.factory.config.BeanDefinition&#125; so that</span><br><span class="hljs-comment">* factory beans can signal their object type when it can&#x27;t be deduced from</span><br><span class="hljs-comment">* the factory bean class.</span><br><span class="hljs-comment">* <span class="hljs-doctag">@since</span> 5.2</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">OBJECT_TYPE_ATTRIBUTE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;factoryBeanObjectType&quot;</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* Return an instance (possibly shared or independent) of the object</span><br><span class="hljs-comment">* managed by this factory.</span><br><span class="hljs-comment">* &lt;p&gt;As with a &#123;<span class="hljs-doctag">@link</span> BeanFactory&#125;, this allows support for both the</span><br><span class="hljs-comment">* Singleton and Prototype design pattern.</span><br><span class="hljs-comment">* &lt;p&gt;If this FactoryBean is not fully initialized yet at the time of</span><br><span class="hljs-comment">* the call (for example because it is involved in a circular reference),</span><br><span class="hljs-comment">* throw a corresponding &#123;<span class="hljs-doctag">@link</span> FactoryBeanNotInitializedException&#125;.</span><br><span class="hljs-comment">* &lt;p&gt;As of Spring 2.0, FactoryBeans are allowed to return &#123;<span class="hljs-doctag">@code</span> null&#125;</span><br><span class="hljs-comment">* objects. The factory will consider this as normal value to be used; it</span><br><span class="hljs-comment">* will not throw a FactoryBeanNotInitializedException in this case anymore.</span><br><span class="hljs-comment">* FactoryBean implementations are encouraged to throw</span><br><span class="hljs-comment">* FactoryBeanNotInitializedException themselves now, as appropriate.</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span> an instance of the bean (can be &#123;<span class="hljs-doctag">@code</span> null&#125;)</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> Exception in case of creation errors</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> FactoryBeanNotInitializedException</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-comment">//é€šè¿‡ä¸€ä¸ªå¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†</span><br>    <span class="hljs-meta">@Nullable</span><br>    T <span class="hljs-title function_">getObject</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception;<br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">* Return the type of object that this FactoryBean creates,</span><br><span class="hljs-comment">* or &#123;<span class="hljs-doctag">@code</span> null&#125; if not known in advance.</span><br><span class="hljs-comment">* &lt;p&gt;This allows one to check for specific types of beans without</span><br><span class="hljs-comment">* instantiating objects, for example on autowiring.</span><br><span class="hljs-comment">* &lt;p&gt;In the case of implementations that are creating a singleton object,</span><br><span class="hljs-comment">* this method should try to avoid singleton creation as far as possible;</span><br><span class="hljs-comment">* it should rather estimate the type in advance.</span><br><span class="hljs-comment">* For prototypes, returning a meaningful type here is advisable too.</span><br><span class="hljs-comment">* &lt;p&gt;This method can be called &lt;i&gt;before&lt;/i&gt; this FactoryBean has</span><br><span class="hljs-comment">* been fully initialized. It must not rely on state created during</span><br><span class="hljs-comment">* initialization; of course, it can still use such state if available.</span><br><span class="hljs-comment">* &lt;p&gt;&lt;b&gt;<span class="hljs-doctag">NOTE:</span>&lt;/b&gt; Autowiring will simply ignore FactoryBeans that return</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@code</span> null&#125; here. Therefore it is highly recommended to implement</span><br><span class="hljs-comment">* this method properly, using the current state of the FactoryBean.</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span> the type of object that this FactoryBean creates,</span><br><span class="hljs-comment">* or &#123;<span class="hljs-doctag">@code</span> null&#125; if not known at the time of the call</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> ListableBeanFactory#getBeansOfType</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-comment">//è®¾ç½®æ‰€æä¾›å¯¹è±¡çš„ç±»å‹</span><br>    <span class="hljs-meta">@Nullable</span><br>    Class&lt;?&gt; getObjectType();<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* Is the object managed by this factory a singleton? That is,</span><br><span class="hljs-comment">* will &#123;<span class="hljs-doctag">@link</span> #getObject()&#125; always return the same object</span><br><span class="hljs-comment">* (a reference that can be cached)?</span><br><span class="hljs-comment">* &lt;p&gt;&lt;b&gt;<span class="hljs-doctag">NOTE:</span>&lt;/b&gt; If a FactoryBean indicates to hold a singleton object,</span><br><span class="hljs-comment">* the object returned from &#123;<span class="hljs-doctag">@code</span> getObject()&#125; might get cached</span><br><span class="hljs-comment">* by the owning BeanFactory. Hence, do not return &#123;<span class="hljs-doctag">@code</span> true&#125;</span><br><span class="hljs-comment">* unless the FactoryBean always exposes the same reference.</span><br><span class="hljs-comment">* &lt;p&gt;The singleton status of the FactoryBean itself will generally</span><br><span class="hljs-comment">* be provided by the owning BeanFactory; usually, it has to be</span><br><span class="hljs-comment">* defined as singleton there.</span><br><span class="hljs-comment">* &lt;p&gt;&lt;b&gt;<span class="hljs-doctag">NOTE:</span>&lt;/b&gt; This method returning &#123;<span class="hljs-doctag">@code</span> false&#125; does not</span><br><span class="hljs-comment">* necessarily indicate that returned objects are independent instances.</span><br><span class="hljs-comment">* An implementation of the extended &#123;<span class="hljs-doctag">@link</span> SmartFactoryBean&#125; interface</span><br><span class="hljs-comment">* may explicitly indicate independent instances through its</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@link</span> SmartFactoryBean#isPrototype()&#125; method. Plain &#123;<span class="hljs-doctag">@link</span> FactoryBean&#125;</span><br><span class="hljs-comment">* implementations which do not implement this extended interface are</span><br><span class="hljs-comment">* simply assumed to always return independent instances if the</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@code</span> isSingleton()&#125; implementation returns &#123;<span class="hljs-doctag">@code</span> false&#125;.</span><br><span class="hljs-comment">* &lt;p&gt;The default implementation returns &#123;<span class="hljs-doctag">@code</span> true&#125;, since a</span><br><span class="hljs-comment">* &#123;<span class="hljs-doctag">@code</span> FactoryBean&#125; typically manages a singleton instance.</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span> whether the exposed object is a singleton</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> #getObject()</span><br><span class="hljs-comment">* <span class="hljs-doctag">@see</span> SmartFactoryBean#isPrototype()</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-comment">//æä¾›çš„å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSingleton</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡åˆ›å»ºç±»UserFactoryBean"><a href="#â‘¡åˆ›å»ºç±»UserFactoryBean" class="headerlink" title="â‘¡åˆ›å»ºç±»UserFactoryBean"></a>â‘¡åˆ›å»ºç±»UserFactoryBean</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserFactoryBean</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FactoryBean</span>&lt;User&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getObject</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Class&lt;?&gt; getObjectType() &#123;<br>        <span class="hljs-keyword">return</span> User.class;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢é…ç½®bean-2"><a href="#â‘¢é…ç½®bean-2" class="headerlink" title="â‘¢é…ç½®bean"></a>â‘¢é…ç½®bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.bean.UserFactoryBean&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£æµ‹è¯•-2"><a href="#â‘£æµ‹è¯•-2" class="headerlink" title="â‘£æµ‹è¯•"></a>â‘£æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUserFactoryBean</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//è·å–IOCå®¹å™¨</span><br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;springfactorybean.xml&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) ac.getBean(<span class="hljs-string">&quot;user&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> ac.getBean(User.class); <br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-14ã€å®éªŒåå››ï¼šåŸºäºxmlçš„è‡ªåŠ¨è£…é…"><a href="#2-2-14ã€å®éªŒåå››ï¼šåŸºäºxmlçš„è‡ªåŠ¨è£…é…" class="headerlink" title="2.2.14ã€å®éªŒåå››ï¼šåŸºäºxmlçš„è‡ªåŠ¨è£…é…"></a>2.2.14ã€å®éªŒåå››ï¼šåŸºäºxmlçš„è‡ªåŠ¨è£…é…</h3><blockquote><p>è‡ªåŠ¨è£…é…ï¼š</p><p>æ ¹æ®æŒ‡å®šçš„ç­–ç•¥ï¼Œåœ¨IOCå®¹å™¨ä¸­åŒ¹é…æŸä¸€ä¸ªbeanï¼Œè‡ªåŠ¨ä¸ºæŒ‡å®šçš„beanä¸­æ‰€ä¾èµ–çš„ç±»ç±»å‹æˆ–æ¥å£ç±»å‹å±æ€§èµ‹å€¼</p></blockquote><h4 id="â‘ åœºæ™¯æ¨¡æ‹Ÿ"><a href="#â‘ åœºæ™¯æ¨¡æ‹Ÿ" class="headerlink" title="â‘ åœºæ™¯æ¨¡æ‹Ÿ"></a>â‘ åœºæ™¯æ¨¡æ‹Ÿ</h4><p>åˆ›å»ºç±»UserController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-keyword">private</span> UserService userService;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserService</span><span class="hljs-params">(UserService userService)</span> &#123;<br>        <span class="hljs-built_in">this</span>.userService = userService;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>&#123;<br>        userService.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;<br><span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç±»UserServiceImplå®ç°æ¥å£UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">private</span> UserDao userDao;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> &#123;<br>        <span class="hljs-built_in">this</span>.userDao = userDao;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span> &#123;<br>        userDao.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDao</span> &#123;<br><span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç±»UserDaoImplå®ç°æ¥å£UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¿å­˜æˆåŠŸ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡é…ç½®bean-2"><a href="#â‘¡é…ç½®bean-2" class="headerlink" title="â‘¡é…ç½®bean"></a>â‘¡é…ç½®bean</h4><p>ä½¿ç”¨beanæ ‡ç­¾çš„ autowire å±æ€§è®¾ç½®è‡ªåŠ¨è£…é…æ•ˆæœ</p><blockquote><p>è‡ªåŠ¨è£…é…æ–¹å¼ï¼šbyType</p><p>byTypeï¼šæ ¹æ®ç±»å‹åŒ¹é…IOCå®¹å™¨ä¸­çš„æŸä¸ªå…¼å®¹ç±»å‹çš„beanï¼Œä¸ºå±æ€§è‡ªåŠ¨èµ‹å€¼</p><p>è‹¥åœ¨IOCä¸­ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªå…¼å®¹ç±»å‹çš„beanèƒ½å¤Ÿä¸ºå±æ€§èµ‹å€¼ï¼Œåˆ™è¯¥å±æ€§ä¸è£…é…ï¼Œå³å€¼ä¸ºé»˜è®¤å€¼ï¼ˆnullï¼‰</p><p>è‹¥åœ¨IOCä¸­ï¼Œæœ‰å¤šä¸ªå…¼å®¹ç±»å‹çš„beanèƒ½å¤Ÿä¸ºå±æ€§èµ‹å€¼ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ NoUniqueBeanDefinitionException</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userController&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.controller.UserController&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byType&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.service.impl.UserServiceImpl&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byType&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>è‡ªåŠ¨è£…é…æ–¹å¼ï¼šbyName</p><p>byNameï¼šå°†è‡ªåŠ¨è£…é…çš„å±æ€§çš„å±æ€§åï¼Œä½œä¸ºbeançš„idåœ¨IOCå®¹å™¨ä¸­åŒ¹é…ç›¸å¯¹åº”çš„beanè¿›è¡Œèµ‹å€¼</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userController&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.controller.UserController&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.service.impl.UserServiceImpl&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userServiceImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.service.impl.UserServiceImpl&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDaoImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atguigu.autowire.xml.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢æµ‹è¯•-2"><a href="#â‘¢æµ‹è¯•-2" class="headerlink" title="â‘¢æµ‹è¯•"></a>â‘¢æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAutoWireByXML</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;autowire-xml.xml&quot;</span>);<br>    <span class="hljs-type">UserController</span> <span class="hljs-variable">userController</span> <span class="hljs-operator">=</span> ac.getBean(UserController.class);<br>    userController.saveUser();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-3ã€åŸºäºæ³¨è§£ç®¡ç†bean"><a href="#2-3ã€åŸºäºæ³¨è§£ç®¡ç†bean" class="headerlink" title="2.3ã€åŸºäºæ³¨è§£ç®¡ç†bean"></a>2.3ã€åŸºäºæ³¨è§£ç®¡ç†bean</h2><h3 id="2-3-1ã€å®éªŒä¸€ï¼šæ ‡è®°ä¸æ‰«æ"><a href="#2-3-1ã€å®éªŒä¸€ï¼šæ ‡è®°ä¸æ‰«æ" class="headerlink" title="2.3.1ã€å®éªŒä¸€ï¼šæ ‡è®°ä¸æ‰«æ"></a>2.3.1ã€å®éªŒä¸€ï¼šæ ‡è®°ä¸æ‰«æ</h3><h4 id="â‘ æ³¨è§£"><a href="#â‘ æ³¨è§£" class="headerlink" title="â‘ æ³¨è§£"></a>â‘ æ³¨è§£</h4><p>å’Œ XML é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œæ³¨è§£æœ¬èº«å¹¶ä¸èƒ½æ‰§è¡Œï¼Œæ³¨è§£æœ¬èº«ä»…ä»…åªæ˜¯åšä¸€ä¸ªæ ‡è®°ï¼Œå…·ä½“çš„åŠŸèƒ½æ˜¯æ¡†æ¶æ£€æµ‹åˆ°æ³¨è§£æ ‡è®°çš„ä½ç½®ï¼Œç„¶åé’ˆå¯¹è¿™ä¸ªä½ç½®æŒ‰ç…§æ³¨è§£æ ‡è®°çš„åŠŸèƒ½æ¥æ‰§è¡Œå…·ä½“æ“ä½œã€‚</p><p>æœ¬è´¨ä¸Šï¼šæ‰€æœ‰ä¸€åˆ‡çš„æ“ä½œéƒ½æ˜¯Javaä»£ç æ¥å®Œæˆçš„ï¼ŒXMLå’Œæ³¨è§£åªæ˜¯å‘Šè¯‰æ¡†æ¶ä¸­çš„Javaä»£ç å¦‚ä½•æ‰§è¡Œã€‚</p><p>ä¸¾ä¾‹ï¼šå…ƒæ—¦è”æ¬¢ä¼šè¦å¸ƒç½®æ•™å®¤ï¼Œè“è‰²çš„åœ°æ–¹è´´ä¸Šå…ƒæ—¦å¿«ä¹å››ä¸ªå­—ï¼Œçº¢è‰²çš„åœ°æ–¹è´´ä¸Šæ‹‰èŠ±ï¼Œé»„è‰²çš„åœ°æ–¹è´´ä¸Šæ°”çƒã€‚</p><p><img src="/2022/11/12/SpringNote/11.png" alt="11"></p><p>ç­é•¿åšäº†æ‰€æœ‰æ ‡è®°ï¼ŒåŒå­¦ä»¬æ¥å®Œæˆå…·ä½“å·¥ä½œã€‚å¢™ä¸Šçš„æ ‡è®°ç›¸å½“äºæˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨çš„æ³¨è§£ï¼Œåé¢åŒå­¦ä»¬åšçš„å·¥ä½œï¼Œç›¸å½“äºæ¡†æ¶çš„å…·ä½“æ“ä½œã€‚</p><h4 id="â‘¡æ‰«æ"><a href="#â‘¡æ‰«æ" class="headerlink" title="â‘¡æ‰«æ"></a>â‘¡æ‰«æ</h4><p>Spring ä¸ºäº†çŸ¥é“ç¨‹åºå‘˜åœ¨å“ªäº›åœ°æ–¹æ ‡è®°äº†ä»€ä¹ˆæ³¨è§£ï¼Œå°±éœ€è¦é€šè¿‡æ‰«æçš„æ–¹å¼ï¼Œæ¥è¿›è¡Œæ£€æµ‹ã€‚ç„¶åæ ¹æ®æ³¨è§£è¿›è¡Œåç»­æ“ä½œã€‚</p><h4 id="â‘¢æ–°å»ºMaven-Module"><a href="#â‘¢æ–°å»ºMaven-Module" class="headerlink" title="â‘¢æ–°å»ºMaven Module"></a>â‘¢æ–°å»ºMaven Module</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- åŸºäºMavenä¾èµ–ä¼ é€’æ€§ï¼Œå¯¼å…¥spring-contextä¾èµ–å³å¯å¯¼å…¥å½“å‰æ‰€éœ€æ‰€æœ‰jaråŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£åˆ›å»ºSpringé…ç½®æ–‡ä»¶"><a href="#â‘£åˆ›å»ºSpringé…ç½®æ–‡ä»¶" class="headerlink" title="â‘£åˆ›å»ºSpringé…ç½®æ–‡ä»¶"></a>â‘£åˆ›å»ºSpringé…ç½®æ–‡ä»¶</h4><p><img src="/2022/11/12/SpringNote/12.png" alt="12"></p><h4 id="â‘¤æ ‡è¯†ç»„ä»¶çš„å¸¸ç”¨æ³¨è§£"><a href="#â‘¤æ ‡è¯†ç»„ä»¶çš„å¸¸ç”¨æ³¨è§£" class="headerlink" title="â‘¤æ ‡è¯†ç»„ä»¶çš„å¸¸ç”¨æ³¨è§£"></a>â‘¤æ ‡è¯†ç»„ä»¶çš„å¸¸ç”¨æ³¨è§£</h4><ul><li>@Componentï¼šå°†ç±»æ ‡è¯†ä¸ºæ™®é€šç»„ä»¶</li><li>@Controllerï¼šå°†ç±»æ ‡è¯†ä¸ºæ§åˆ¶å±‚ç»„ä»¶</li><li>@Serviceï¼šå°†ç±»æ ‡è¯†ä¸ºä¸šåŠ¡å±‚ç»„ä»¶</li><li>@Repositoryï¼šå°†ç±»æ ‡è¯†ä¸ºæŒä¹…å±‚ç»„ä»¶</li></ul><p>é—®ï¼šä»¥ä¸Šå››ä¸ªæ³¨è§£æœ‰ä»€ä¹ˆå…³ç³»å’ŒåŒºåˆ«ï¼Ÿ</p><p><img src="/2022/11/12/SpringNote/13.png" alt="13"></p><p>é€šè¿‡æŸ¥çœ‹æºç æˆ‘ä»¬å¾—çŸ¥ï¼Œ@Controllerã€@Serviceã€@Repositoryè¿™ä¸‰ä¸ªæ³¨è§£åªæ˜¯åœ¨@Componentæ³¨è§£çš„åŸºç¡€ä¸Šèµ·äº†ä¸‰ä¸ªæ–°çš„åå­—ã€‚</p><p><strong>å¯¹äºSpringä½¿ç”¨IOCå®¹å™¨ç®¡ç†è¿™äº›ç»„ä»¶æ¥è¯´æ²¡æœ‰åŒºåˆ«</strong>ã€‚</p><p>æ‰€ä»¥@Controllerã€@Serviceã€@Repositoryè¿™ä¸‰ä¸ªæ³¨è§£åªæ˜¯ç»™å¼€å‘äººå‘˜çœ‹çš„ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¾¿äºåˆ†è¾¨ç»„ä»¶çš„ä½œç”¨ã€‚</p><p>æ³¨æ„ï¼šè™½ç„¶å®ƒä»¬æœ¬è´¨ä¸Šä¸€æ ·ï¼Œä½†æ˜¯ä¸ºäº†ä»£ç çš„å¯è¯»æ€§ï¼Œä¸ºäº†ç¨‹åºç»“æ„ä¸¥è°¨æˆ‘ä»¬è‚¯å®šä¸èƒ½éšä¾¿èƒ¡ä¹±æ ‡è®°ã€‚</p><h4 id="â‘¥åˆ›å»ºç»„ä»¶"><a href="#â‘¥åˆ›å»ºç»„ä»¶" class="headerlink" title="â‘¥åˆ›å»ºç»„ä»¶"></a>â‘¥åˆ›å»ºç»„ä»¶</h4><p>åˆ›å»ºæ§åˆ¶å±‚ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸šåŠ¡å±‚ç»„ä»¶UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDao</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæŒä¹…å±‚ç»„ä»¶UserDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¦æ‰«æç»„ä»¶"><a href="#â‘¦æ‰«æç»„ä»¶" class="headerlink" title="â‘¦æ‰«æç»„ä»¶"></a>â‘¦æ‰«æç»„ä»¶</h4><p>æƒ…å†µä¸€ï¼šæœ€åŸºæœ¬çš„æ‰«ææ–¹å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.spring&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æƒ…å†µäºŒï¼šæŒ‡å®šè¦æ’é™¤çš„ç»„ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.spring&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- context:exclude-filteræ ‡ç­¾ï¼šæŒ‡å®šæ’é™¤è§„åˆ™ --&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        typeï¼šè®¾ç½®æ’é™¤æˆ–åŒ…å«çš„ä¾æ®</span><br><span class="hljs-comment">        type=&quot;annotation&quot;ï¼Œæ ¹æ®æ³¨è§£æ’é™¤ï¼Œexpressionä¸­è®¾ç½®è¦æ’é™¤çš„æ³¨è§£çš„å…¨ç±»å</span><br><span class="hljs-comment">        type=&quot;assignable&quot;ï¼Œæ ¹æ®ç±»å‹æ’é™¤ï¼Œexpressionä¸­è®¾ç½®è¦æ’é™¤çš„ç±»å‹çš„å…¨ç±»å</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">&lt;context:exclude-filter type=&quot;assignable&quot; expression=&quot;com.atguigu.controller.UserController&quot;/&gt;</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æƒ…å†µä¸‰ï¼šä»…æ‰«ææŒ‡å®šç»„ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.spring&quot;</span> <span class="hljs-attr">use-default-filters</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- context:include-filteræ ‡ç­¾ï¼šæŒ‡å®šåœ¨åŸæœ‰æ‰«æè§„åˆ™çš„åŸºç¡€ä¸Šè¿½åŠ çš„è§„åˆ™ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- use-default-filterså±æ€§ï¼šå–å€¼falseè¡¨ç¤ºå…³é—­é»˜è®¤æ‰«æè§„åˆ™ï¼Œé»˜è®¤ä¸ºtrue --&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ­¤æ—¶å¿…é¡»è®¾ç½®use-default-filters=&quot;false&quot;ï¼Œå› ä¸ºé»˜è®¤è§„åˆ™å³æ‰«ææŒ‡å®šåŒ…ä¸‹æ‰€æœ‰ç±» --&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        typeï¼šè®¾ç½®æ’é™¤æˆ–åŒ…å«çš„ä¾æ®</span><br><span class="hljs-comment">        type=&quot;annotation&quot;ï¼Œæ ¹æ®æ³¨è§£æ’é™¤ï¼Œexpressionä¸­è®¾ç½®è¦æ’é™¤çš„æ³¨è§£çš„å…¨ç±»å</span><br><span class="hljs-comment">        type=&quot;assignable&quot;ï¼Œæ ¹æ®ç±»å‹æ’é™¤ï¼Œexpressionä¸­è®¾ç½®è¦æ’é™¤çš„ç±»å‹çš„å…¨ç±»å</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</span><br><span class="hljs-comment">--&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">&lt;context:include-filter type=&quot;assignable&quot; expression=&quot;com.atguigu.controller.UserController&quot;/&gt;</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘§æµ‹è¯•"><a href="#â‘§æµ‹è¯•" class="headerlink" title="â‘§æµ‹è¯•"></a>â‘§æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAutowireByAnnotation</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span><br>        <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    <span class="hljs-type">UserController</span> <span class="hljs-variable">userController</span> <span class="hljs-operator">=</span> ac.getBean(UserController.class);<br>    System.out.println(userController);<br>    <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> ac.getBean(UserService.class);<br>    System.out.println(userService);<br>    <span class="hljs-type">UserDao</span> <span class="hljs-variable">userDao</span> <span class="hljs-operator">=</span> ac.getBean(UserDao.class);<br>    System.out.println(userDao);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¨ç»„ä»¶æ‰€å¯¹åº”çš„beançš„id"><a href="#â‘¨ç»„ä»¶æ‰€å¯¹åº”çš„beançš„id" class="headerlink" title="â‘¨ç»„ä»¶æ‰€å¯¹åº”çš„beançš„id"></a>â‘¨ç»„ä»¶æ‰€å¯¹åº”çš„beançš„id</h4><p>åœ¨æˆ‘ä»¬ä½¿ç”¨XMLæ–¹å¼ç®¡ç†beançš„æ—¶å€™ï¼Œæ¯ä¸ªbeanéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œä¾¿äºåœ¨å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚</p><p>ç°åœ¨ä½¿ç”¨æ³¨è§£åï¼Œæ¯ä¸ªç»„ä»¶ä»ç„¶åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚</p><ul><li><p>é»˜è®¤æƒ…å†µ</p><ul><li><strong>ç±»åé¦–å­—æ¯å°å†™å°±æ˜¯beançš„id</strong>ã€‚ä¾‹å¦‚ï¼šUserControllerç±»å¯¹åº”çš„beançš„idå°±æ˜¯userControllerã€‚</li></ul></li><li><p>è‡ªå®šä¹‰beançš„id</p><ul><li><p>å¯é€šè¿‡æ ‡è¯†ç»„ä»¶çš„æ³¨è§£çš„valueå±æ€§è®¾ç½®è‡ªå®šä¹‰çš„beançš„id</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service(&quot;userService&quot;)</span>   <span class="hljs-comment">//é»˜è®¤ä¸ºuserServiceImpl </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="2-3-2ã€å®éªŒäºŒï¼šåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…"><a href="#2-3-2ã€å®éªŒäºŒï¼šåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…" class="headerlink" title="2.3.2ã€å®éªŒäºŒï¼šåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…"></a>2.3.2ã€å®éªŒäºŒï¼šåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…</h3><h4 id="â‘ åœºæ™¯æ¨¡æ‹Ÿ-1"><a href="#â‘ åœºæ™¯æ¨¡æ‹Ÿ-1" class="headerlink" title="â‘ åœºæ™¯æ¨¡æ‹Ÿ"></a>â‘ åœºæ™¯æ¨¡æ‹Ÿ</h4><blockquote><p>å‚è€ƒåŸºäºxmlçš„è‡ªåŠ¨è£…é…</p><p>åœ¨UserControllerä¸­å£°æ˜UserServiceå¯¹è±¡</p><p>åœ¨UserServiceImplä¸­å£°æ˜UserDaoå¯¹è±¡</p></blockquote><h4 id="â‘¡-Autowiredæ³¨è§£"><a href="#â‘¡-Autowiredæ³¨è§£" class="headerlink" title="â‘¡@Autowiredæ³¨è§£"></a>â‘¡@Autowiredæ³¨è§£</h4><p>åœ¨æˆå‘˜å˜é‡ä¸Šç›´æ¥æ ‡è®°@Autowiredæ³¨è§£å³å¯å®Œæˆè‡ªåŠ¨è£…é…ï¼Œ<strong>ä¸éœ€è¦æä¾›setXxx()æ–¹æ³•</strong>ã€‚</p><p>ä»¥åæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­çš„æ­£å¼ç”¨æ³•å°±æ˜¯è¿™æ ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>&#123;<br>        userService.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span> &#123;<br>        userDao.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDao</span> &#123;<br><span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¿å­˜æˆåŠŸ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢-Autowiredæ³¨è§£å…¶ä»–ç»†èŠ‚"><a href="#â‘¢-Autowiredæ³¨è§£å…¶ä»–ç»†èŠ‚" class="headerlink" title="â‘¢@Autowiredæ³¨è§£å…¶ä»–ç»†èŠ‚"></a>â‘¢@Autowiredæ³¨è§£å…¶ä»–ç»†èŠ‚</h4><blockquote><p>@Autowiredæ³¨è§£è¿˜å¯ä»¥æ ‡è®°åœ¨ æ„é€ å™¨ å’Œ setæ–¹æ³• ä¸Š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> UserService userService;<br>    <br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserController</span><span class="hljs-params">(UserService userService)</span>&#123;<br>        <span class="hljs-built_in">this</span>.userService = userService;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>&#123;<br>        userService.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> UserService userService;<br>    <br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserService</span><span class="hljs-params">(UserService userService)</span>&#123;<br>        <span class="hljs-built_in">this</span>.userService = userService;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>&#123;<br>        userService.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘£-Autowiredå·¥ä½œæµç¨‹"><a href="#â‘£-Autowiredå·¥ä½œæµç¨‹" class="headerlink" title="â‘£@Autowiredå·¥ä½œæµç¨‹"></a>â‘£@Autowiredå·¥ä½œæµç¨‹</h4><p><img src="/2022/11/12/SpringNote/14.png" alt="14"></p><ul><li>é¦–å…ˆæ ¹æ®æ‰€éœ€è¦çš„<strong>ç»„ä»¶ç±»å‹</strong>åˆ°IOCå®¹å™¨ä¸­æŸ¥æ‰¾<ul><li>èƒ½å¤Ÿæ‰¾åˆ°å”¯ä¸€çš„beanï¼šç›´æ¥æ‰§è¡Œè£…é…</li><li>å¦‚æœå®Œå…¨æ‰¾ä¸åˆ°åŒ¹é…è¿™ä¸ªç±»å‹çš„beanï¼šè£…é…å¤±è´¥</li><li>å’Œæ‰€éœ€ç±»å‹åŒ¹é…çš„beanä¸æ­¢ä¸€ä¸ª<ul><li>æ²¡æœ‰@Qualifieræ³¨è§£ï¼šæ ¹æ®@Autowiredæ ‡è®°ä½ç½®<strong>æˆå‘˜å˜é‡çš„å˜é‡å</strong>ä½œä¸º<strong>beançš„id</strong>è¿›è¡ŒåŒ¹é…</li><li>èƒ½å¤Ÿæ‰¾åˆ°ï¼šæ‰§è¡Œè£…é…</li><li>æ‰¾ä¸åˆ°ï¼šè£…é…å¤±è´¥</li><li>ä½¿ç”¨@Qualifieræ³¨è§£ï¼šæ ¹æ®@Qualifieræ³¨è§£ä¸­<strong>æŒ‡å®šçš„åç§°</strong>ä½œä¸º<strong>beançš„id</strong>è¿›è¡ŒåŒ¹é…</li><li>èƒ½å¤Ÿæ‰¾åˆ°ï¼šæ‰§è¡Œè£…é…</li><li>æ‰¾ä¸åˆ°ï¼šè£…é…å¤±è´¥</li></ul></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-meta">@Qualifier(&quot;userServiceImpl&quot;)</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>&#123;<br>        userService.saveUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè‹¥IOCå®¹å™¨ä¸­æ²¡æœ‰ä»»ä½•ä¸€ä¸ªç±»å‹åŒ¹é…çš„Beanï¼Œæ­¤æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼šNoSuchBeanDrfinitionException</p><p>@Autowiredä¸­æœ‰å±æ€§requiredï¼Œé»˜è®¤å€¼ä¸ºtrueï¼Œå› æ­¤åœ¨è‡ªåŠ¨è£…é…æ— æ³•æ‰¾åˆ°ç›¸åº”çš„beanæ—¶ï¼Œä¼šè£…é…å¤±è´¥</p><p>å¯ä»¥å°†å±æ€§requiredçš„å€¼è®¾ç½®ä¸ºfalseï¼Œåˆ™è¡¨ç¤ºèƒ½è£…å°±è£…ï¼Œè£…ä¸ä¸Šå°±ä¸è£…ï¼Œè£…ä¸ä¸Šæ—¶è‡ªåŠ¨è£…é…çš„å±æ€§ä¸ºé»˜è®¤å€¼</p><p>ä½†æ˜¯å®é™…å¼€å‘æ—¶ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰éœ€è¦è£…é…ç»„ä»¶çš„åœ°æ–¹éƒ½æ˜¯å¿…é¡»è£…é…çš„ï¼Œç”¨ä¸ä¸Šè¿™ä¸ªå±æ€§ã€‚</p></blockquote><h1 id="3ã€AOP"><a href="#3ã€AOP" class="headerlink" title="3ã€AOP"></a>3ã€AOP</h1><h2 id="3-1ã€åœºæ™¯æ¨¡æ‹Ÿ"><a href="#3-1ã€åœºæ™¯æ¨¡æ‹Ÿ" class="headerlink" title="3.1ã€åœºæ™¯æ¨¡æ‹Ÿ"></a>3.1ã€åœºæ™¯æ¨¡æ‹Ÿ</h2><h3 id="3-1-1ã€å£°æ˜æ¥å£"><a href="#3-1-1ã€å£°æ˜æ¥å£" class="headerlink" title="3.1.1ã€å£°æ˜æ¥å£"></a>3.1.1ã€å£°æ˜æ¥å£</h3><p>å£°æ˜è®¡ç®—å™¨æ¥å£Calculatorï¼ŒåŒ…å«åŠ å‡ä¹˜é™¤çš„æŠ½è±¡æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">sub</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">mul</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">div</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-1-2ã€åˆ›å»ºå®ç°ç±»"><a href="#3-1-2ã€åˆ›å»ºå®ç°ç±»" class="headerlink" title="3.1.2ã€åˆ›å»ºå®ç°ç±»"></a>3.1.2ã€åˆ›å»ºå®ç°ç±»</h3><p><img src="/2022/11/12/SpringNote/15.png" alt="15"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorPureImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i + j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sub</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i - j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">mul</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i * j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">div</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i / j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-1-3ã€åˆ›å»ºå¸¦æ—¥å¿—åŠŸèƒ½çš„å®ç°ç±»"><a href="#3-1-3ã€åˆ›å»ºå¸¦æ—¥å¿—åŠŸèƒ½çš„å®ç°ç±»" class="headerlink" title="3.1.3ã€åˆ›å»ºå¸¦æ—¥å¿—åŠŸèƒ½çš„å®ç°ç±»"></a>3.1.3ã€åˆ›å»ºå¸¦æ—¥å¿—åŠŸèƒ½çš„å®ç°ç±»</h3><p><img src="/2022/11/12/SpringNote/16.png" alt="16"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorLogImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] add æ–¹æ³•å¼€å§‹äº†ï¼Œå‚æ•°æ˜¯ï¼š&quot;</span> + i + <span class="hljs-string">&quot;,&quot;</span> + j);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i + j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] add æ–¹æ³•ç»“æŸäº†ï¼Œç»“æœæ˜¯ï¼š&quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sub</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] sub æ–¹æ³•å¼€å§‹äº†ï¼Œå‚æ•°æ˜¯ï¼š&quot;</span> + i + <span class="hljs-string">&quot;,&quot;</span> + j);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i - j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] sub æ–¹æ³•ç»“æŸäº†ï¼Œç»“æœæ˜¯ï¼š&quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">mul</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] mul æ–¹æ³•å¼€å§‹äº†ï¼Œå‚æ•°æ˜¯ï¼š&quot;</span> + i + <span class="hljs-string">&quot;,&quot;</span> + j);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i * j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] mul æ–¹æ³•ç»“æŸäº†ï¼Œç»“æœæ˜¯ï¼š&quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">div</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] div æ–¹æ³•å¼€å§‹äº†ï¼Œå‚æ•°æ˜¯ï¼š&quot;</span> + i + <span class="hljs-string">&quot;,&quot;</span> + j);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i / j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] div æ–¹æ³•ç»“æŸäº†ï¼Œç»“æœæ˜¯ï¼š&quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-1-4ã€æå‡ºé—®é¢˜"><a href="#3-1-4ã€æå‡ºé—®é¢˜" class="headerlink" title="3.1.4ã€æå‡ºé—®é¢˜"></a>3.1.4ã€æå‡ºé—®é¢˜</h3><h4 id="â‘ ç°æœ‰ä»£ç ç¼ºé™·"><a href="#â‘ ç°æœ‰ä»£ç ç¼ºé™·" class="headerlink" title="â‘ ç°æœ‰ä»£ç ç¼ºé™·"></a>â‘ ç°æœ‰ä»£ç ç¼ºé™·</h4><p>é’ˆå¯¹å¸¦æ—¥å¿—åŠŸèƒ½çš„å®ç°ç±»ï¼Œæˆ‘ä»¬å‘ç°æœ‰å¦‚ä¸‹ç¼ºé™·ï¼š</p><ul><li>å¯¹æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½æœ‰å¹²æ‰°ï¼Œå¯¼è‡´ç¨‹åºå‘˜åœ¨å¼€å‘æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½æ—¶åˆ†æ•£äº†ç²¾åŠ›</li><li>é™„åŠ åŠŸèƒ½åˆ†æ•£åœ¨å„ä¸ªä¸šåŠ¡åŠŸèƒ½æ–¹æ³•ä¸­ï¼Œä¸åˆ©äºç»Ÿä¸€ç»´æŠ¤</li></ul><h4 id="â‘¡è§£å†³æ€è·¯"><a href="#â‘¡è§£å†³æ€è·¯" class="headerlink" title="â‘¡è§£å†³æ€è·¯"></a>â‘¡è§£å†³æ€è·¯</h4><p>è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæ ¸å¿ƒå°±æ˜¯ï¼šè§£è€¦ã€‚æˆ‘ä»¬éœ€è¦æŠŠé™„åŠ åŠŸèƒ½ä»ä¸šåŠ¡åŠŸèƒ½ä»£ç ä¸­æŠ½å–å‡ºæ¥ã€‚</p><h4 id="â‘¢å›°éš¾"><a href="#â‘¢å›°éš¾" class="headerlink" title="â‘¢å›°éš¾"></a>â‘¢å›°éš¾</h4><p>è§£å†³é—®é¢˜çš„å›°éš¾ï¼šè¦æŠ½å–çš„ä»£ç åˆ†æ•£åœ¨æ–¹æ³•å†…éƒ¨ï¼Œé ä»¥å‰æŠŠå­ç±»ä¸­çš„é‡å¤ä»£ç æŠ½å–åˆ°çˆ¶ç±»çš„æ–¹å¼æ²¡æ³•è§£å†³ã€‚</p><p>æ‰€ä»¥éœ€è¦å¼•å…¥æ–°çš„æŠ€æœ¯ã€‚</p><h2 id="3-2ã€ä»£ç†æ¨¡å¼"><a href="#3-2ã€ä»£ç†æ¨¡å¼" class="headerlink" title="3.2ã€ä»£ç†æ¨¡å¼"></a>3.2ã€ä»£ç†æ¨¡å¼</h2><h3 id="3-2-1ã€æ¦‚å¿µ"><a href="#3-2-1ã€æ¦‚å¿µ" class="headerlink" title="3.2.1ã€æ¦‚å¿µ"></a>3.2.1ã€æ¦‚å¿µ</h3><h4 id="â‘ ä»‹ç»"><a href="#â‘ ä»‹ç»" class="headerlink" title="â‘ ä»‹ç»"></a>â‘ ä»‹ç»</h4><p>äºŒåä¸‰ç§è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œå±äºç»“æ„å‹æ¨¡å¼ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯é€šè¿‡æä¾›ä¸€ä¸ªä»£ç†ç±»ï¼Œè®©æˆ‘ä»¬åœ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•çš„æ—¶å€™ï¼Œä¸å†æ˜¯ç›´æ¥å¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œè€Œæ˜¯é€šè¿‡ä»£ç†ç±»<strong>é—´æ¥</strong>è°ƒç”¨ã€‚è®©ä¸å±äºç›®æ ‡æ–¹æ³•æ ¸å¿ƒé€»è¾‘çš„ä»£ç ä»ç›®æ ‡æ–¹æ³•ä¸­å‰¥ç¦»å‡ºæ¥â€”â€”<strong>è§£è€¦</strong>ã€‚è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶å…ˆè°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå‡å°‘å¯¹ç›®æ ‡æ–¹æ³•çš„è°ƒç”¨å’Œæ‰“æ‰°ï¼ŒåŒæ—¶è®©é™„åŠ åŠŸèƒ½èƒ½å¤Ÿé›†ä¸­åœ¨ä¸€èµ·ä¹Ÿæœ‰åˆ©äºç»Ÿä¸€ç»´æŠ¤ã€‚</p><p><img src="/2022/11/12/SpringNote/17.png" alt="17"></p><p>ä½¿ç”¨ä»£ç†åï¼š</p><p><img src="/2022/11/12/SpringNote/18.png" alt="18"></p><h4 id="â‘¡ç”Ÿæ´»ä¸­çš„ä»£ç†"><a href="#â‘¡ç”Ÿæ´»ä¸­çš„ä»£ç†" class="headerlink" title="â‘¡ç”Ÿæ´»ä¸­çš„ä»£ç†"></a>â‘¡ç”Ÿæ´»ä¸­çš„ä»£ç†</h4><ul><li>å¹¿å‘Šå•†æ‰¾å¤§æ˜æ˜Ÿæ‹å¹¿å‘Šéœ€è¦ç»è¿‡ç»çºªäºº</li><li>åˆä½œä¼™ä¼´æ‰¾å¤§è€æ¿è°ˆåˆä½œè¦çº¦è§é¢æ—¶é—´éœ€è¦ç»è¿‡ç§˜ä¹¦</li><li>æˆ¿äº§ä¸­ä»‹æ˜¯ä¹°å–åŒæ–¹çš„ä»£ç†</li></ul><h4 id="â‘¢ç›¸å…³æœ¯è¯­"><a href="#â‘¢ç›¸å…³æœ¯è¯­" class="headerlink" title="â‘¢ç›¸å…³æœ¯è¯­"></a>â‘¢ç›¸å…³æœ¯è¯­</h4><ul><li>ä»£ç†ï¼šå°†éæ ¸å¿ƒé€»è¾‘å‰¥ç¦»å‡ºæ¥ä»¥åï¼Œå°è£…è¿™äº›éæ ¸å¿ƒé€»è¾‘çš„ç±»ã€å¯¹è±¡ã€æ–¹æ³•ã€‚</li><li>ç›®æ ‡ï¼šè¢«ä»£ç†â€œå¥—ç”¨â€äº†éæ ¸å¿ƒé€»è¾‘ä»£ç çš„ç±»ã€å¯¹è±¡ã€æ–¹æ³•ã€‚</li></ul><h3 id="3-2-2ã€é™æ€ä»£ç†"><a href="#3-2-2ã€é™æ€ä»£ç†" class="headerlink" title="3.2.2ã€é™æ€ä»£ç†"></a>3.2.2ã€é™æ€ä»£ç†</h3><p>åˆ›å»ºé™æ€ä»£ç†ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorStaticProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-comment">// å°†è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡å£°æ˜ä¸ºæˆå‘˜å˜é‡</span><br>    <span class="hljs-keyword">private</span> Calculator target;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CalculatorStaticProxy</span><span class="hljs-params">(Calculator target)</span> &#123;<br>        <span class="hljs-built_in">this</span>.target = target;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-comment">// é™„åŠ åŠŸèƒ½ç”±ä»£ç†ç±»ä¸­çš„ä»£ç†æ–¹æ³•æ¥å®ç°</span><br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] add æ–¹æ³•å¼€å§‹äº†ï¼Œå‚æ•°æ˜¯ï¼š&quot;</span> + i + <span class="hljs-string">&quot;,&quot;</span> + j);<br>        <span class="hljs-comment">// é€šè¿‡ç›®æ ‡å¯¹è±¡æ¥å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">addResult</span> <span class="hljs-operator">=</span> target.add(i, j);<br>        System.out.println(<span class="hljs-string">&quot;[æ—¥å¿—] add æ–¹æ³•ç»“æŸäº†ï¼Œç»“æœæ˜¯ï¼š&quot;</span> + addResult);<br>        <span class="hljs-keyword">return</span> addResult;<br>    &#125;<br>    <span class="hljs-comment">//... ...</span><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>é™æ€ä»£ç†ç¡®å®å®ç°äº†è§£è€¦ï¼Œä½†æ˜¯ç”±äºä»£ç éƒ½å†™æ­»äº†ï¼Œå®Œå…¨ä¸å…·å¤‡ä»»ä½•çš„çµæ´»æ€§ã€‚å°±æ‹¿æ—¥å¿—åŠŸèƒ½æ¥</p><p>è¯´ï¼Œå°†æ¥å…¶ä»–åœ°æ–¹ä¹Ÿéœ€è¦é™„åŠ æ—¥å¿—ï¼Œé‚£è¿˜å¾—å†å£°æ˜æ›´å¤šä¸ªé™æ€ä»£ç†ç±»ï¼Œé‚£å°±äº§ç”Ÿäº†å¤§é‡é‡å¤çš„ä»£</p><p>ç ï¼Œæ—¥å¿—åŠŸèƒ½è¿˜æ˜¯åˆ†æ•£çš„ï¼Œæ²¡æœ‰ç»Ÿä¸€ç®¡ç†ã€‚</p><p>æå‡ºè¿›ä¸€æ­¥çš„éœ€æ±‚ï¼šå°†æ—¥å¿—åŠŸèƒ½é›†ä¸­åˆ°ä¸€ä¸ªä»£ç†ç±»ä¸­ï¼Œå°†æ¥æœ‰ä»»ä½•æ—¥å¿—éœ€æ±‚ï¼Œéƒ½é€šè¿‡è¿™ä¸€ä¸ªä»£ç†</p><p>ç±»æ¥å®ç°ã€‚è¿™å°±éœ€è¦ä½¿ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯äº†ã€‚</p></blockquote><h3 id="3-2-3ã€åŠ¨æ€ä»£ç†"><a href="#3-2-3ã€åŠ¨æ€ä»£ç†" class="headerlink" title="3.2.3ã€åŠ¨æ€ä»£ç†"></a>3.2.3ã€åŠ¨æ€ä»£ç†</h3><p>åŠ¨æ€ä»£ç†ï¼š</p><ul><li><p>jdkåŠ¨æ€ä»£ç†ï¼Œè¦æ±‚å¿…é¡»æœ‰æ¥å£ï¼Œæœ€ç»ˆç”Ÿæˆçš„ä»£ç†ç±»å’Œç›®æ ‡ç±»å®ç°ç›¸åŒçš„æ¥å£</p><p>â€‹                        åœ¨com.sun.proxyåŒ…ä¸‹ï¼Œç±»åä¸º $proxyæ•°å­—</p></li><li><p>cglibåŠ¨æ€ä»£ç†ï¼Œæœ€ç»ˆç”Ÿæˆçš„ä»£ç†ç±»ä¼šç»§æ‰¿ç›®æ ‡ç±»ï¼Œå¹¶ä¸”å’Œç›®æ ‡ç±»åœ¨ç›¸åŒçš„åŒ…ä¸‹</p></li></ul><p><img src="/2022/11/12/SpringNote/19.png" alt="19"></p><p>ç”Ÿäº§ ä»£ç†å¯¹è±¡ çš„ å·¥å‚ç±»ï¼šï¼ˆ JDK åŠ¨æ€ä»£ç† ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> &#123;<br>    <span class="hljs-keyword">private</span> Object target;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object target)</span> &#123;<br>        <span class="hljs-built_in">this</span>.target = target;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * newProxyInstance()ï¼šåˆ›å»ºä¸€ä¸ªä»£ç†å®ä¾‹</span><br><span class="hljs-comment"> * å…¶ä¸­æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</span><br><span class="hljs-comment"> * 1ã€ClassLoader loaderï¼šæŒ‡å®šåŠ è½½åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»çš„ç±»åŠ è½½å™¨</span><br><span class="hljs-comment"> * 2ã€Class[] interfacesï¼šç›®æ ‡å¯¹è±¡å®ç°çš„æ‰€æœ‰æ¥å£çš„classå¯¹è±¡æ‰€ç»„æˆçš„æ•°ç»„</span><br><span class="hljs-comment"> * 3ã€invocationHandler hï¼šè®¾ç½®ä»£ç†å¯¹è±¡å®ç°ç›®æ ‡å¯¹è±¡æ–¹æ³•çš„è¿‡ç¨‹ï¼Œå³ä»£ç†ç±»ä¸­å¦‚ä½•é‡å†™æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br>        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> target.getClass().getClassLoader();<br>        Class&lt;?&gt;[] interfaces = target.getClass().getInterfaces();<br>        <span class="hljs-type">InvocationHandler</span> <span class="hljs-variable">invocationHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() &#123;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * proxyï¼šä»£ç†å¯¹è±¡</span><br><span class="hljs-comment">             * methodï¼šä»£ç†å¯¹è±¡éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œå³å…¶ä¸­éœ€è¦é‡å†™çš„æ–¹æ³•</span><br><span class="hljs-comment">             * argsï¼šmethodæ‰€å¯¹åº”æ–¹æ³•çš„å‚æ•°</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span><br>                <span class="hljs-keyword">throws</span> Throwable &#123;<br>                <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    System.out.println(<span class="hljs-string">&quot;[åŠ¨æ€ä»£ç†][æ—¥å¿—] &quot;</span>+method.getName()+<span class="hljs-string">&quot;ï¼Œå‚æ•°ï¼š&quot;</span>+ Arrays.toString(args));<br>                    result = method.invoke(target, args);<br>                    System.out.println(<span class="hljs-string">&quot;[åŠ¨æ€ä»£ç†][æ—¥å¿—] &quot;</span>+method.getName()+<span class="hljs-string">&quot;ï¼Œç»“ æœï¼š&quot;</span>+ result);<br>                &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                    e.printStackTrace();<br>                    System.out.println(<span class="hljs-string">&quot;[åŠ¨æ€ä»£ç†][æ—¥å¿—] &quot;</span>+method.getName()+<span class="hljs-string">&quot;ï¼Œå¼‚å¸¸ï¼š&quot;</span>+e.getMessage());<br>                &#125; <span class="hljs-keyword">finally</span> &#123;<br>                    System.out.println(<span class="hljs-string">&quot;[åŠ¨æ€ä»£ç†][æ—¥å¿—] &quot;</span>+method.getName()+<span class="hljs-string">&quot;ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•&quot;</span>);<br>                &#125;<br>                <span class="hljs-keyword">return</span> result;<br>            &#125;   <br>        &#125;;    <br>        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(classLoader,interfaces,invocationHandler);<br>    &#125;<br>&#125;                                     <br></code></pre></td></tr></table></figure><h3 id="3-2-4ã€æµ‹è¯•"><a href="#3-2-4ã€æµ‹è¯•" class="headerlink" title="3.2.4ã€æµ‹è¯•"></a>3.2.4ã€æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDynamicProxy</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ProxyFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculatorLogImpl</span>());<br>    <span class="hljs-type">Calculator</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> (Calculator) factory.getProxy();<br>    proxy.div(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>    <span class="hljs-comment">//proxy.div(1,1);</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-3ã€AOPæ¦‚å¿µåŠç›¸å…³æœ¯è¯­"><a href="#3-3ã€AOPæ¦‚å¿µåŠç›¸å…³æœ¯è¯­" class="headerlink" title="3.3ã€AOPæ¦‚å¿µåŠç›¸å…³æœ¯è¯­"></a>3.3ã€AOPæ¦‚å¿µåŠç›¸å…³æœ¯è¯­</h2><h3 id="3-3-1ã€æ¦‚è¿°"><a href="#3-3-1ã€æ¦‚è¿°" class="headerlink" title="3.3.1ã€æ¦‚è¿°"></a>3.3.1ã€æ¦‚è¿°</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œæ˜¯è½¯ä»¶è®¾è®¡é¢†åŸŸä¸­çš„<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œå®ƒ<strong>æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§è¡¥å……å’Œå®Œå–„</strong>ï¼Œå®ƒä»¥é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†æ–¹å¼å®ç°<strong>åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ç»™ç¨‹åºåŠ¨æ€ç»Ÿä¸€æ·»åŠ é¢å¤–åŠŸèƒ½</strong>çš„ä¸€ç§æŠ€æœ¯ã€‚</p><h3 id="3-3-2ã€ç›¸å…³æœ¯è¯­"><a href="#3-3-2ã€ç›¸å…³æœ¯è¯­" class="headerlink" title="3.3.2ã€ç›¸å…³æœ¯è¯­"></a>3.3.2ã€ç›¸å…³æœ¯è¯­</h3><h4 id="â‘ æ¨ªåˆ‡å…³æ³¨ç‚¹"><a href="#â‘ æ¨ªåˆ‡å…³æ³¨ç‚¹" class="headerlink" title="â‘ æ¨ªåˆ‡å…³æ³¨ç‚¹"></a>â‘ æ¨ªåˆ‡å…³æ³¨ç‚¹</h4><p><strong>ä»æ¯ä¸ªæ–¹æ³•ä¸­æŠ½å–å‡ºæ¥çš„åŒä¸€ç±»éæ ¸å¿ƒä¸šåŠ¡</strong>ã€‚åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹å¯¹ç›¸å…³æ–¹æ³•è¿›è¡Œå¤šä¸ªä¸åŒæ–¹é¢çš„å¢å¼ºã€‚</p><p>è¿™ä¸ªæ¦‚å¿µä¸æ˜¯è¯­æ³•å±‚é¢å¤©ç„¶å­˜åœ¨çš„ï¼Œè€Œæ˜¯æ ¹æ®é™„åŠ åŠŸèƒ½çš„é€»è¾‘ä¸Šçš„éœ€è¦ï¼šæœ‰åä¸ªé™„åŠ åŠŸèƒ½ï¼Œå°±æœ‰åä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚<img src="/2022/11/12/SpringNote/20.png" alt="20"></p><h4 id="â‘¡é€šçŸ¥"><a href="#â‘¡é€šçŸ¥" class="headerlink" title="â‘¡é€šçŸ¥"></a>â‘¡é€šçŸ¥</h4><p>æ¯ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ä¸Šè¦åšçš„äº‹æƒ…éƒ½éœ€è¦å†™ä¸€ä¸ªæ–¹æ³•æ¥å®ç°ï¼Œè¿™æ ·çš„æ–¹æ³•å°±å«é€šçŸ¥æ–¹æ³•ã€‚</p><ul><li>å‰ç½®é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>å‰</strong>æ‰§è¡Œ</li><li>è¿”å›é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>æˆåŠŸç»“æŸ</strong>åæ‰§è¡Œï¼ˆ<strong>å¯¿ç»ˆæ­£å¯</strong>ï¼‰</li><li>å¼‚å¸¸é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>å¼‚å¸¸ç»“æŸ</strong>åæ‰§è¡Œï¼ˆ<strong>æ­»äºéå‘½</strong>ï¼‰</li><li>åç½®é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>æœ€ç»ˆç»“æŸ</strong>åæ‰§è¡Œï¼ˆ<strong>ç›–æ£ºå®šè®º</strong>ï¼‰ï¼ˆfinallyï¼‰</li><li>ç¯ç»•é€šçŸ¥ï¼šä½¿ç”¨tryâ€¦catchâ€¦finallyç»“æ„å›´ç»•<strong>æ•´ä¸ª</strong>è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¸Šé¢å››ç§é€šçŸ¥å¯¹åº”çš„æ‰€</li></ul><p>æœ‰ä½ç½®<img src="/2022/11/12/SpringNote/21.png" alt="21"></p><h4 id="â‘¢åˆ‡é¢"><a href="#â‘¢åˆ‡é¢" class="headerlink" title="â‘¢åˆ‡é¢"></a>â‘¢åˆ‡é¢</h4><p>å°è£…é€šçŸ¥æ–¹æ³•çš„ç±»ã€‚<img src="/2022/11/12/SpringNote/22.png" alt="22"></p><h4 id="â‘£ç›®æ ‡"><a href="#â‘£ç›®æ ‡" class="headerlink" title="â‘£ç›®æ ‡"></a>â‘£ç›®æ ‡</h4><p>è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ã€‚</p><h4 id="â‘¤ä»£ç†"><a href="#â‘¤ä»£ç†" class="headerlink" title="â‘¤ä»£ç†"></a>â‘¤ä»£ç†</h4><p>å‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„ä»£ç†å¯¹è±¡ã€‚</p><h4 id="â‘¥è¿æ¥ç‚¹"><a href="#â‘¥è¿æ¥ç‚¹" class="headerlink" title="â‘¥è¿æ¥ç‚¹"></a>â‘¥è¿æ¥ç‚¹</h4><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªçº¯é€»è¾‘æ¦‚å¿µï¼Œä¸æ˜¯è¯­æ³•å®šä¹‰çš„ã€‚</p><p>æŠŠæ–¹æ³•æ’æˆä¸€æ’ï¼Œæ¯ä¸€ä¸ªæ¨ªåˆ‡ä½ç½®çœ‹æˆxè½´æ–¹å‘ï¼ŒæŠŠæ–¹æ³•ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„é¡ºåºçœ‹æˆyè½´ï¼Œxè½´å’Œyè½´çš„äº¤å‰ç‚¹å°±æ˜¯è¿æ¥ç‚¹ã€‚</p><p><img src="/2022/11/12/SpringNote/23.png" alt="23"></p><h4 id="â‘¦åˆ‡å…¥ç‚¹"><a href="#â‘¦åˆ‡å…¥ç‚¹" class="headerlink" title="â‘¦åˆ‡å…¥ç‚¹"></a>â‘¦åˆ‡å…¥ç‚¹</h4><p>å®šä½è¿æ¥ç‚¹çš„æ–¹å¼ã€‚</p><p>æ¯ä¸ªç±»çš„æ–¹æ³•ä¸­éƒ½åŒ…å«å¤šä¸ªè¿æ¥ç‚¹ï¼Œæ‰€ä»¥è¿æ¥ç‚¹æ˜¯ç±»ä¸­å®¢è§‚å­˜åœ¨çš„äº‹ç‰©ï¼ˆä»é€»è¾‘ä¸Šæ¥è¯´ï¼‰ã€‚</p><p>å¦‚æœæŠŠè¿æ¥ç‚¹çœ‹ä½œæ•°æ®åº“ä¸­çš„è®°å½•ï¼Œé‚£ä¹ˆåˆ‡å…¥ç‚¹å°±æ˜¯æŸ¥è¯¢è®°å½•çš„ SQL è¯­å¥ã€‚</p><p>Spring çš„ AOP æŠ€æœ¯å¯ä»¥é€šè¿‡åˆ‡å…¥ç‚¹å®šä½åˆ°ç‰¹å®šçš„è¿æ¥ç‚¹ã€‚</p><p>åˆ‡ç‚¹é€šè¿‡ org.springframework.aop.Pointcut æ¥å£è¿›è¡Œæè¿°ï¼Œå®ƒä½¿ç”¨ç±»å’Œæ–¹æ³•ä½œä¸ºè¿æ¥ç‚¹çš„æŸ¥è¯¢æ¡ä»¶ã€‚</p><h3 id="3-3-3ã€ä½œç”¨"><a href="#3-3-3ã€ä½œç”¨" class="headerlink" title="3.3.3ã€ä½œç”¨"></a>3.3.3ã€ä½œç”¨</h3><ul><li><p>ç®€åŒ–ä»£ç ï¼šæŠŠæ–¹æ³•ä¸­å›ºå®šä½ç½®çš„é‡å¤çš„ä»£ç <strong>æŠ½å–</strong>å‡ºæ¥ï¼Œè®©è¢«æŠ½å–çš„æ–¹æ³•æ›´ä¸“æ³¨äºè‡ªå·±çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæé«˜å†…èšæ€§ã€‚</p></li><li><p>ä»£ç å¢å¼ºï¼šæŠŠç‰¹å®šçš„åŠŸèƒ½å°è£…åˆ°åˆ‡é¢ç±»ä¸­ï¼Œçœ‹å“ªé‡Œæœ‰éœ€è¦ï¼Œå°±å¾€ä¸Šå¥—ï¼Œè¢«<strong>å¥—ç”¨</strong>äº†åˆ‡é¢é€»è¾‘çš„æ–¹æ³•å°±è¢«åˆ‡é¢ç»™å¢å¼ºäº†ã€‚</p></li></ul><h2 id="3-4ã€åŸºäºæ³¨è§£çš„AOP"><a href="#3-4ã€åŸºäºæ³¨è§£çš„AOP" class="headerlink" title="3.4ã€åŸºäºæ³¨è§£çš„AOP"></a>3.4ã€åŸºäºæ³¨è§£çš„AOP</h2><p>AOPæ˜¯ä¸€ç§æ€æƒ³ï¼ŒAspectJ æ˜¯AOPçš„ä¸€ç§å®ç°æ–¹å¼ã€‚</p><h3 id="3-4-1ã€æŠ€æœ¯è¯´æ˜"><a href="#3-4-1ã€æŠ€æœ¯è¯´æ˜" class="headerlink" title="3.4.1ã€æŠ€æœ¯è¯´æ˜"></a>3.4.1ã€æŠ€æœ¯è¯´æ˜</h3><p><img src="/2022/11/12/SpringNote/24.png" alt="24"></p><ul><li><p>åŠ¨æ€ä»£ç†ï¼ˆInvocationHandlerï¼‰ï¼šJDKåŸç”Ÿçš„å®ç°æ–¹å¼ï¼Œéœ€è¦è¢«ä»£ç†çš„ç›®æ ‡ç±»å¿…é¡»å®ç°æ¥å£ã€‚å› ä¸ºè¿™ä¸ªæŠ€æœ¯è¦æ±‚<strong>ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å®ç°åŒæ ·çš„æ¥å£</strong>ï¼ˆå…„å¼Ÿä¸¤ä¸ªæ‹œæŠŠå­æ¨¡å¼ï¼‰ã€‚</p></li><li><p>cglibï¼šé€šè¿‡<strong>ç»§æ‰¿è¢«ä»£ç†çš„ç›®æ ‡ç±»</strong>ï¼ˆè®¤å¹²çˆ¹æ¨¡å¼ï¼‰å®ç°ä»£ç†ï¼Œæ‰€ä»¥ä¸éœ€è¦ç›®æ ‡ç±»å®ç°æ¥å£ã€‚</p></li><li><p>AspectJï¼šæœ¬è´¨ä¸Šæ˜¯é™æ€ä»£ç†ï¼Œ<strong>å°†ä»£ç†é€»è¾‘â€œç»‡å…¥â€è¢«ä»£ç†çš„ç›®æ ‡ç±»ç¼–è¯‘å¾—åˆ°çš„å­—èŠ‚ç æ–‡ä»¶</strong>ï¼Œæ‰€ä»¥æœ€ç»ˆæ•ˆæœæ˜¯åŠ¨æ€çš„ã€‚weaverå°±æ˜¯ç»‡å…¥å™¨ã€‚Springåªæ˜¯å€Ÿç”¨äº†AspectJä¸­çš„æ³¨è§£ã€‚</p></li></ul><h3 id="3-4-2ã€å‡†å¤‡å·¥ä½œ"><a href="#3-4-2ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="3.4.2ã€å‡†å¤‡å·¥ä½œ"></a>3.4.2ã€å‡†å¤‡å·¥ä½œ</h3><h4 id="â‘ æ·»åŠ ä¾èµ–"><a href="#â‘ æ·»åŠ ä¾èµ–" class="headerlink" title="â‘ æ·»åŠ ä¾èµ–"></a>â‘ æ·»åŠ ä¾èµ–</h4><p>åœ¨IOCæ‰€éœ€ä¾èµ–åŸºç¡€ä¸Šå†åŠ å…¥ä¸‹é¢ä¾èµ–å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- spring-aspectsä¼šå¸®æˆ‘ä»¬ä¼ é€’è¿‡æ¥aspectjweaver --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¡å‡†å¤‡è¢«ä»£ç†çš„ç›®æ ‡èµ„æº"><a href="#â‘¡å‡†å¤‡è¢«ä»£ç†çš„ç›®æ ‡èµ„æº" class="headerlink" title="â‘¡å‡†å¤‡è¢«ä»£ç†çš„ç›®æ ‡èµ„æº"></a>â‘¡å‡†å¤‡è¢«ä»£ç†çš„ç›®æ ‡èµ„æº</h4><p>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">sub</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">mul</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">div</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorPureImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i + j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sub</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i - j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">mul</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i * j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">div</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> i / j;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å†…éƒ¨ result = &quot;</span> + result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-3ã€åˆ›å»ºåˆ‡é¢ç±»å¹¶é…ç½®"><a href="#3-4-3ã€åˆ›å»ºåˆ‡é¢ç±»å¹¶é…ç½®" class="headerlink" title="3.4.3ã€åˆ›å»ºåˆ‡é¢ç±»å¹¶é…ç½®"></a>3.4.3ã€åˆ›å»ºåˆ‡é¢ç±»å¹¶é…ç½®</h3><ul><li>åŸºäºæ³¨è§£çš„AOPçš„å®ç°ï¼š<ul><li>1ã€å°†ç›®æ ‡å¯¹è±¡å’Œåˆ‡é¢äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼ˆæ³¨è§£+æ‰«æï¼‰</li><li>2ã€å°†åˆ‡é¢ç±»é€šè¿‡æ³¨è§£@Aspectæ ‡è¯† </li><li>3ã€å¼€å¯AspectJçš„è‡ªåŠ¨ä»£ç†ï¼Œä¸ºç›®æ ‡å¯¹è±¡è‡ªåŠ¨ç”Ÿæˆä»£ç†  &lt;!â€“å¼€å¯åŸºäºæ³¨è§£çš„AOPâ€“&gt;</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @Aspectè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-comment">// @Componentæ³¨è§£ä¿è¯è¿™ä¸ªåˆ‡é¢ç±»èƒ½å¤Ÿæ”¾å…¥IOCå®¹å™¨</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> &#123;<br>    <span class="hljs-meta">@Before(&quot;execution(public int com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> Arrays.toString(joinPoint.getArgs());<br>        System.out.println(<span class="hljs-string">&quot;Logger--&gt;å‰ç½®é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œå‚æ•°ï¼š&quot;</span>+args);<br>    &#125;<br>    <span class="hljs-meta">@After(&quot;execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>        System.out.println(<span class="hljs-string">&quot;Logger--&gt;åç½®é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName);<br>    &#125;<br>    <span class="hljs-meta">@AfterReturning(value = &quot;execution(*com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;, returning = &quot;result&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturningMethod</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>        System.out.println(<span class="hljs-string">&quot;Logger--&gt;è¿”å›é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œç»“æœï¼š&quot;</span>+result);<br>    &#125; <br>    <span class="hljs-meta">@AfterThrowing(value = &quot;execution(*com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;, throwing = &quot;ex&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowingMethod</span><span class="hljs-params">(JoinPoint joinPoint, Throwable ex)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>        System.out.println(<span class="hljs-string">&quot;Logger--&gt;å¼‚å¸¸é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œå¼‚å¸¸ï¼š&quot;</span>+ex);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Around(&quot;execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;)</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">aroundMethod</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> Arrays.toString(joinPoint.getArgs());<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œä¹‹å‰&quot;</span>);<br>            <span class="hljs-comment">//ç›®æ ‡å¯¹è±¡ï¼ˆè¿æ¥ç‚¹ï¼‰æ–¹æ³•çš„æ‰§è¡Œ</span><br>            result = joinPoint.proceed();<br>            System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•è¿”å›å€¼ä¹‹å&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Throwable throwable) &#123;<br>            throwable.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•å‡ºç°å¼‚å¸¸æ—¶&quot;</span>);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        åŸºäºæ³¨è§£çš„AOPçš„å®ç°ï¼š</span><br><span class="hljs-comment">        1ã€å°†ç›®æ ‡å¯¹è±¡å’Œåˆ‡é¢äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼ˆæ³¨è§£+æ‰«æï¼‰</span><br><span class="hljs-comment">        2ã€å¼€å¯AspectJçš„è‡ªåŠ¨ä»£ç†ï¼Œä¸ºç›®æ ‡å¯¹è±¡è‡ªåŠ¨ç”Ÿæˆä»£ç†</span><br><span class="hljs-comment">        3ã€å°†åˆ‡é¢ç±»é€šè¿‡æ³¨è§£@Aspectæ ‡è¯†</span><br><span class="hljs-comment"> --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.aop.annotation&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><span class="hljs-comment">&lt;!--å¼€å¯åŸºäºæ³¨è§£çš„AOP--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAOPByAnnotation</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ioc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;aop-annotation.xml&quot;</span>);<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    æ³¨æ„ï¼šåœ¨ä½¿ç”¨AOPä¹‹åï¼Œç›®æ ‡å¯¹è±¡ä¸èƒ½ç›´æ¥é€šè¿‡ç›®æ ‡ç±»è·å–ï¼Œè€Œè¦é€šè¿‡ä»£ç†ç±»è·å–</span><br><span class="hljs-comment">     å½¢å¼ä¸Š/å†™æ³•ä¸Š è¡¨ç°ä¸ºé€šè¿‡æ¥å£è·å–</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-type">Calculator</span> <span class="hljs-variable">calculator</span> <span class="hljs-operator">=</span> ioc.getBean(Calculator.class);<br>    calculator.add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-4ã€å„ç§é€šçŸ¥"><a href="#3-4-4ã€å„ç§é€šçŸ¥" class="headerlink" title="3.4.4ã€å„ç§é€šçŸ¥"></a>3.4.4ã€å„ç§é€šçŸ¥</h3><ul><li>å‰ç½®é€šçŸ¥ï¼šä½¿ç”¨@Beforeæ³¨è§£æ ‡è¯†ï¼Œåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>å‰</strong>æ‰§è¡Œï¼ˆtryå­å¥ï¼‰</li><li>è¿”å›é€šçŸ¥ï¼šä½¿ç”¨@AfterReturningæ³¨è§£æ ‡è¯†ï¼Œåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>æˆåŠŸç»“æŸ</strong>åæ‰§è¡Œï¼ˆ<strong>å¯¿ç»ˆæ­£å¯</strong>ï¼‰ï¼ˆtryå­å¥ï¼‰</li><li>å¼‚å¸¸é€šçŸ¥ï¼šä½¿ç”¨@AfterThrowingæ³¨è§£æ ‡è¯†ï¼Œåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>å¼‚å¸¸ç»“æŸ</strong>åæ‰§è¡Œï¼ˆ<strong>æ­»äºéå‘½</strong>ï¼‰ï¼ˆcatchå­å¥ï¼‰</li><li>åç½®é€šçŸ¥ï¼šä½¿ç”¨@Afteræ³¨è§£æ ‡è¯†ï¼Œåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>æœ€ç»ˆç»“æŸ</strong>åæ‰§è¡Œï¼ˆ<strong>ç›–æ£ºå®šè®º</strong>ï¼‰ï¼ˆåœ¨finallyå­å¥ä¸­æ‰§è¡Œï¼‰</li><li>ç¯ç»•é€šçŸ¥ï¼šä½¿ç”¨@Aroundæ³¨è§£æ ‡è¯†ï¼Œä½¿ç”¨tryâ€¦catchâ€¦finallyç»“æ„å›´ç»•<strong>æ•´ä¸ª</strong>è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¸Šé¢å››ç§é€šçŸ¥å¯¹åº”çš„æ‰€æœ‰ä½ç½®</li></ul><blockquote><p>å„ç§é€šçŸ¥çš„æ‰§è¡Œé¡ºåºï¼š</p><ul><li>Springç‰ˆæœ¬5.3.xä»¥å‰ï¼š<ul><li>å‰ç½®é€šçŸ¥</li><li>ç›®æ ‡æ“ä½œ</li><li>åç½®é€šçŸ¥</li><li>è¿”å›é€šçŸ¥æˆ–å¼‚å¸¸é€šçŸ¥</li></ul></li><li>Springç‰ˆæœ¬5.3.xä»¥åï¼š<ul><li>å‰ç½®é€šçŸ¥</li><li>ç›®æ ‡æ“ä½œ</li><li>è¿”å›é€šçŸ¥æˆ–å¼‚å¸¸é€šçŸ¥</li><li>åç½®é€šçŸ¥</li></ul></li></ul></blockquote><h3 id="3-4-5ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•"><a href="#3-4-5ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="3.4.5ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•"></a>3.4.5ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•</h3><h4 id="â‘ ä½œç”¨"><a href="#â‘ ä½œç”¨" class="headerlink" title="â‘ ä½œç”¨"></a>â‘ ä½œç”¨</h4><p><img src="/2022/11/12/SpringNote/25.png" alt="25"></p><h4 id="â‘¡è¯­æ³•ç»†èŠ‚"><a href="#â‘¡è¯­æ³•ç»†èŠ‚" class="headerlink" title="â‘¡è¯­æ³•ç»†èŠ‚"></a>â‘¡è¯­æ³•ç»†èŠ‚</h4><ul><li>ç”¨*å·ä»£æ›¿â€œæƒé™ä¿®é¥°ç¬¦â€å’Œâ€œè¿”å›å€¼â€éƒ¨åˆ†è¡¨ç¤ºâ€œæƒé™ä¿®é¥°ç¬¦â€å’Œâ€œè¿”å›å€¼â€ä¸é™</li><li>åœ¨åŒ…åçš„éƒ¨åˆ†ï¼Œä¸€ä¸ªâ€œ<em>â€å·åªèƒ½ä»£è¡¨åŒ…çš„å±‚æ¬¡ç»“æ„ä¸­çš„ä¸€å±‚ï¼Œè¡¨ç¤ºè¿™ä¸€å±‚æ˜¯ä»»æ„çš„ã€‚</em><ul><li><em>ä¾‹å¦‚ï¼š</em>.HelloåŒ¹é…com.Helloï¼Œä¸åŒ¹é…com.atguigu.Hello</li></ul></li><li>åœ¨åŒ…åçš„éƒ¨åˆ†ï¼Œä½¿ç”¨â€œ*..â€è¡¨ç¤ºåŒ…åä»»æ„ã€åŒ…çš„å±‚æ¬¡æ·±åº¦ä»»æ„*</li><li><em>åœ¨ç±»åçš„éƒ¨åˆ†ï¼Œç±»åéƒ¨åˆ†æ•´ä½“ç”¨</em>å·ä»£æ›¿ï¼Œè¡¨ç¤ºç±»åä»»æ„</li><li>åœ¨ç±»åçš„éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨<em>å·ä»£æ›¿ç±»åçš„ä¸€éƒ¨åˆ†</em><ul><li><em>ä¾‹å¦‚ï¼š</em>ServiceåŒ¹é…æ‰€æœ‰åç§°ä»¥Serviceç»“å°¾çš„ç±»æˆ–æ¥å£</li></ul></li><li>åœ¨æ–¹æ³•åéƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨<em>å·è¡¨ç¤ºæ–¹æ³•åä»»æ„</em></li><li><em>åœ¨æ–¹æ³•åéƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨</em>å·ä»£æ›¿æ–¹æ³•åçš„ä¸€éƒ¨åˆ†<ul><li>ä¾‹å¦‚ï¼š*OperationåŒ¹é…æ‰€æœ‰æ–¹æ³•åä»¥Operationç»“å°¾çš„æ–¹æ³•</li></ul></li><li>â€‹åœ¨æ–¹æ³•å‚æ•°åˆ—è¡¨éƒ¨åˆ†ï¼Œä½¿ç”¨(..)è¡¨ç¤ºå‚æ•°åˆ—è¡¨ä»»æ„</li><li>åœ¨æ–¹æ³•å‚æ•°åˆ—è¡¨éƒ¨åˆ†ï¼Œä½¿ç”¨(int,..)è¡¨ç¤ºå‚æ•°åˆ—è¡¨ä»¥ä¸€ä¸ªintç±»å‹çš„å‚æ•°å¼€å¤´</li><li>åœ¨æ–¹æ³•å‚æ•°åˆ—è¡¨éƒ¨åˆ†ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯ä¸ä¸€æ ·çš„<ul><li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¸­ä½¿ç”¨ int å’Œå®é™…æ–¹æ³•ä¸­ Integer æ˜¯ä¸åŒ¹é…çš„</li></ul></li><li>åœ¨æ–¹æ³•è¿”å›å€¼éƒ¨åˆ†ï¼Œå¦‚æœæƒ³è¦æ˜ç¡®æŒ‡å®šä¸€ä¸ªè¿”å›å€¼ç±»å‹ï¼Œé‚£ä¹ˆå¿…é¡»åŒæ—¶å†™æ˜æƒé™ä¿®é¥°ç¬¦<ul><li>ä¾‹å¦‚ï¼šexecution(public int <em>..<em>Service.</em>(.., int)) æ­£ç¡®</em></li><li><em>ä¾‹å¦‚ï¼šexecution(</em> int *..<em>Service.</em>(.., int)) é”™è¯¯</li></ul></li></ul><p><img src="/2022/11/12/SpringNote/26.png" alt="26"></p><h3 id="3-4-6ã€é‡ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#3-4-6ã€é‡ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="3.4.6ã€é‡ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>3.4.6ã€é‡ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h3><h4 id="â‘ å£°æ˜"><a href="#â‘ å£°æ˜" class="headerlink" title="â‘ å£°æ˜"></a>â‘ å£°æ˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Pointcut(&quot;execution(* com.atguigu.aop.annotation.*.*(..))&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pointCut</span><span class="hljs-params">()</span>&#123;&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡åœ¨åŒä¸€ä¸ªåˆ‡é¢ä¸­ä½¿ç”¨"><a href="#â‘¡åœ¨åŒä¸€ä¸ªåˆ‡é¢ä¸­ä½¿ç”¨" class="headerlink" title="â‘¡åœ¨åŒä¸€ä¸ªåˆ‡é¢ä¸­ä½¿ç”¨"></a>â‘¡åœ¨åŒä¸€ä¸ªåˆ‡é¢ä¸­ä½¿ç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Before(&quot;pointCut()&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> Arrays.toString(joinPoint.getArgs());<br>    System.out.println(<span class="hljs-string">&quot;Logger--&gt;å‰ç½®é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œå‚æ•°ï¼š&quot;</span>+args);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢åœ¨ä¸åŒåˆ‡é¢ä¸­ä½¿ç”¨"><a href="#â‘¢åœ¨ä¸åŒåˆ‡é¢ä¸­ä½¿ç”¨" class="headerlink" title="â‘¢åœ¨ä¸åŒåˆ‡é¢ä¸­ä½¿ç”¨"></a>â‘¢åœ¨ä¸åŒåˆ‡é¢ä¸­ä½¿ç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Before(&quot;com.atguigu.aop.CommonPointCut.pointCut()&quot;)</span>  <span class="hljs-comment">//å…¨ç±»å+æ–¹æ³•å</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> Arrays.toString(joinPoint.getArgs());<br>    System.out.println(<span class="hljs-string">&quot;Logger--&gt;å‰ç½®é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œå‚æ•°ï¼š&quot;</span>+args);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-7ã€è·å–é€šçŸ¥çš„ç›¸å…³ä¿¡æ¯"><a href="#3-4-7ã€è·å–é€šçŸ¥çš„ç›¸å…³ä¿¡æ¯" class="headerlink" title="3.4.7ã€è·å–é€šçŸ¥çš„ç›¸å…³ä¿¡æ¯"></a>3.4.7ã€è·å–é€šçŸ¥çš„ç›¸å…³ä¿¡æ¯</h3><h4 id="â‘ è·å–è¿æ¥ç‚¹ä¿¡æ¯"><a href="#â‘ è·å–è¿æ¥ç‚¹ä¿¡æ¯" class="headerlink" title="â‘ è·å–è¿æ¥ç‚¹ä¿¡æ¯"></a>â‘ è·å–è¿æ¥ç‚¹ä¿¡æ¯</h4><p>è·å–è¿æ¥ç‚¹ä¿¡æ¯å¯ä»¥åœ¨é€šçŸ¥æ–¹æ³•çš„å‚æ•°ä½ç½®è®¾ç½®JoinPointç±»å‹çš„å½¢å‚ï¼Œå°±å¯ä»¥è·å–è¿æ¥ç‚¹æ‰€å¯¹åº”æ–¹æ³•çš„ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Before(&quot;execution(public int com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>    <span class="hljs-comment">//è·å–è¿æ¥ç‚¹çš„ç­¾åä¿¡æ¯</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature();<br>    <span class="hljs-comment">//è·å–ç›®æ ‡æ–¹æ³•åˆ°çš„å®å‚ä¿¡æ¯</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> Arrays.toString(joinPoint.getArgs());<br>    System.out.println(<span class="hljs-string">&quot;Logger--&gt;å‰ç½®é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName.getName()+<span class="hljs-string">&quot;ï¼Œå‚æ•°ï¼š&quot;</span>+args);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡è·å–ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼"><a href="#â‘¡è·å–ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼" class="headerlink" title="â‘¡è·å–ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼"></a>â‘¡è·å–ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼</h4><p>@AfterReturningä¸­çš„å±æ€§returningï¼Œç”¨æ¥å°†é€šçŸ¥æ–¹æ³•çš„æŸä¸ªå½¢å‚ï¼Œæ¥æ”¶ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AfterReturning(value = &quot;execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;, returning = &quot;result&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturningMethod</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>    System.out.println(<span class="hljs-string">&quot;Logger--&gt;è¿”å›é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œç»“æœï¼š&quot;</span>+result);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢è·å–ç›®æ ‡æ–¹æ³•çš„å¼‚å¸¸"><a href="#â‘¢è·å–ç›®æ ‡æ–¹æ³•çš„å¼‚å¸¸" class="headerlink" title="â‘¢è·å–ç›®æ ‡æ–¹æ³•çš„å¼‚å¸¸"></a>â‘¢è·å–ç›®æ ‡æ–¹æ³•çš„å¼‚å¸¸</h4><p>@AfterThrowingä¸­çš„å±æ€§throwingï¼Œç”¨æ¥å°†é€šçŸ¥æ–¹æ³•çš„æŸä¸ªå½¢å‚ï¼Œæ¥æ”¶ç›®æ ‡æ–¹æ³•çš„å¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AfterThrowing(value = &quot;execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;, throwing = &quot;ex&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowingMethod</span><span class="hljs-params">(JoinPoint joinPoint, Throwable ex)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>    System.out.println(<span class="hljs-string">&quot;Logger--&gt;å¼‚å¸¸é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+methodName+<span class="hljs-string">&quot;ï¼Œå¼‚å¸¸ï¼š&quot;</span>+ex);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-8ã€ç¯ç»•é€šçŸ¥"><a href="#3-4-8ã€ç¯ç»•é€šçŸ¥" class="headerlink" title="3.4.8ã€ç¯ç»•é€šçŸ¥"></a>3.4.8ã€ç¯ç»•é€šçŸ¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Around(&quot;execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))&quot;)</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">aroundMethod</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> Arrays.toString(joinPoint.getArgs());<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œä¹‹å‰&quot;</span>);<br>        <span class="hljs-comment">//ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼Œç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼ä¸€å®šè¦è¿”å›ç»™å¤–ç•Œè°ƒç”¨è€…</span><br>        result = joinPoint.proceed();<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•è¿”å›å€¼ä¹‹å&quot;</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (Throwable throwable) &#123;<br>        throwable.printStackTrace();<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•å‡ºç°å¼‚å¸¸æ—¶&quot;</span>);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•é€šçŸ¥--&gt;ç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-9ã€åˆ‡é¢çš„ä¼˜å…ˆçº§"><a href="#3-4-9ã€åˆ‡é¢çš„ä¼˜å…ˆçº§" class="headerlink" title="3.4.9ã€åˆ‡é¢çš„ä¼˜å…ˆçº§"></a>3.4.9ã€åˆ‡é¢çš„ä¼˜å…ˆçº§</h3><p>ç›¸åŒç›®æ ‡æ–¹æ³•ä¸ŠåŒæ—¶å­˜åœ¨å¤šä¸ªåˆ‡é¢æ—¶ï¼Œåˆ‡é¢çš„ä¼˜å…ˆçº§æ§åˆ¶åˆ‡é¢çš„<strong>å†…å¤–åµŒå¥—</strong>é¡ºåºã€‚</p><ul><li>ä¼˜å…ˆçº§é«˜çš„åˆ‡é¢ï¼šå¤–é¢</li><li>ä¼˜å…ˆçº§ä½çš„åˆ‡é¢ï¼šé‡Œé¢</li></ul><p>ä½¿ç”¨@Orderæ³¨è§£å¯ä»¥æ§åˆ¶åˆ‡é¢çš„ä¼˜å…ˆçº§ï¼š</p><ul><li>@Order(è¾ƒå°çš„æ•°)ï¼šä¼˜å…ˆçº§é«˜</li><li>@Order(è¾ƒå¤§çš„æ•°)ï¼šä¼˜å…ˆçº§ä½</li></ul><p><img src="/2022/11/12/SpringNote/27.png" alt="27"></p><h2 id="3-5ï¼ŒåŸºäºXMLçš„AOPï¼ˆäº†è§£ï¼‰"><a href="#3-5ï¼ŒåŸºäºXMLçš„AOPï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.5ï¼ŒåŸºäºXMLçš„AOPï¼ˆäº†è§£ï¼‰"></a>3.5ï¼ŒåŸºäºXMLçš„AOPï¼ˆäº†è§£ï¼‰</h2><h3 id="3-5-1ã€å‡†å¤‡å·¥ä½œ"><a href="#3-5-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="3.5.1ã€å‡†å¤‡å·¥ä½œ"></a>3.5.1ã€å‡†å¤‡å·¥ä½œ</h3><p>å‚è€ƒåŸºäºæ³¨è§£çš„AOPç¯å¢ƒ</p><h3 id="3-5-2ã€å®ç°"><a href="#3-5-2ã€å®ç°" class="headerlink" title="3.5.2ã€å®ç°"></a>3.5.2ã€å®ç°</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.aop.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--é…ç½®åˆ‡é¢ç±»ï¼Œå°†IOCå®¹å™¨ä¸­çš„æŸä¸ªbeanè®¾ç½®ä¸ºåˆ‡é¢--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;loggerAspect&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--è®¾ç½®ä¸€ä¸ªå…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointCut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.atguigu.aop.xml.CalculatorImpl.*(..))&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;beforeMethod&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:before</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterMethod&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:after</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterReturningMethod&quot;</span> <span class="hljs-attr">returning</span>=<span class="hljs-string">&quot;result&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:after-returning</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-throwing</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterThrowingMethod&quot;</span> <span class="hljs-attr">throwing</span>=<span class="hljs-string">&quot;ex&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:after-throwing</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;aroundMethod&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:around</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;validateAspect&quot;</span> <span class="hljs-attr">order</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;validateBeforeMethod&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:before</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="4ã€å£°æ˜å¼äº‹åŠ¡"><a href="#4ã€å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="4ã€å£°æ˜å¼äº‹åŠ¡"></a>4ã€å£°æ˜å¼äº‹åŠ¡</h1><h2 id="4-1ã€JdbcTemplate"><a href="#4-1ã€JdbcTemplate" class="headerlink" title="4.1ã€JdbcTemplate"></a>4.1ã€JdbcTemplate</h2><h3 id="4-1-1ã€ç®€ä»‹"><a href="#4-1-1ã€ç®€ä»‹" class="headerlink" title="4.1.1ã€ç®€ä»‹"></a>4.1.1ã€ç®€ä»‹</h3><p>Spring æ¡†æ¶å¯¹ JDBC è¿›è¡Œå°è£…ï¼Œä½¿ç”¨ JdbcTemplate æ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“æ“ä½œ</p><h3 id="4-1-2ã€å‡†å¤‡å·¥ä½œ"><a href="#4-1-2ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.1.2ã€å‡†å¤‡å·¥ä½œ"></a>4.1.2ã€å‡†å¤‡å·¥ä½œ</h3><h4 id="â‘ åŠ å…¥ä¾èµ–-1"><a href="#â‘ åŠ å…¥ä¾èµ–-1" class="headerlink" title="â‘ åŠ å…¥ä¾èµ–"></a>â‘ åŠ å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- åŸºäºMavenä¾èµ–ä¼ é€’æ€§ï¼Œå¯¼å…¥spring-contextä¾èµ–å³å¯å¯¼å…¥å½“å‰æ‰€éœ€æ‰€æœ‰jaråŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring æŒä¹…åŒ–å±‚æ”¯æŒjaråŒ… --&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring åœ¨æ‰§è¡ŒæŒä¹…åŒ–å±‚æ“ä½œã€ä¸æŒä¹…åŒ–å±‚æŠ€æœ¯è¿›è¡Œæ•´åˆè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨ormã€jdbcã€txä¸‰ä¸ªjaråŒ…--&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¯¼å…¥ orm åŒ…å°±å¯ä»¥é€šè¿‡ Maven çš„ä¾èµ–ä¼ é€’æ€§æŠŠå…¶ä»–ä¸¤ä¸ªä¹Ÿå¯¼å…¥ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-orm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring æµ‹è¯•ç›¸å…³ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ•°æ®æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¡åˆ›å»ºjdbc-properties"><a href="#â‘¡åˆ›å»ºjdbc-properties" class="headerlink" title="â‘¡åˆ›å»ºjdbc.properties"></a>â‘¡åˆ›å»ºjdbc.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jdbc.user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-string">atguigu</span><br><span class="hljs-attr">jdbc.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/ssm</span><br><span class="hljs-attr">jdbc.driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶"><a href="#â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶" class="headerlink" title="â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶"></a>â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¯¼å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!-- é…ç½®æ•°æ®æº --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;druidDataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;atguigu.url&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;atguigu.driver&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;atguigu.username&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;atguigu.password&#125;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é…ç½® JdbcTemplate --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;jdbcTemplate&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è£…é…æ•°æ®æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;druidDataSource&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-1-3ã€æµ‹è¯•"><a href="#4-1-3ã€æµ‹è¯•" class="headerlink" title="4.1.3ã€æµ‹è¯•"></a>4.1.3ã€æµ‹è¯•</h3><h4 id="â‘ åœ¨æµ‹è¯•ç±»è£…é…-JdbcTemplate"><a href="#â‘ åœ¨æµ‹è¯•ç±»è£…é…-JdbcTemplate" class="headerlink" title="â‘ åœ¨æµ‹è¯•ç±»è£…é… JdbcTemplate"></a>â‘ åœ¨æµ‹è¯•ç±»è£…é… JdbcTemplate</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@RunWithï¼šæŒ‡å®šå½“å‰æµ‹è¯•ç±»åœ¨Springçš„æµ‹è¯•ç¯å¢ƒä¸­æ‰§è¡Œï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡æ³¨å…¥çš„æ–¹å¼ç›´æ¥è·å–IOCå®¹å™¨ä¸­çš„bean</span><br><span class="hljs-comment">//@ContextConfigurationï¼šè®¾ç½®å½“å‰Springæµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶</span><br><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-meta">@ContextConfiguration(&quot;classpath:spring-jdbc.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCTemplateTest</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡æµ‹è¯•å¢åˆ æ”¹åŠŸèƒ½"><a href="#â‘¡æµ‹è¯•å¢åˆ æ”¹åŠŸèƒ½" class="headerlink" title="â‘¡æµ‹è¯•å¢åˆ æ”¹åŠŸèƒ½"></a>â‘¡æµ‹è¯•å¢åˆ æ”¹åŠŸèƒ½</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-comment">//æµ‹è¯•å¢åˆ æ”¹åŠŸèƒ½</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into t_emp values(null,?,?,?)&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jdbcTemplate.update(sql, <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&quot;ç”·&quot;</span>);<br>    System.out.println(result);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºå®ä½“ç±»å¯¹è±¡"><a href="#â‘¢æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºå®ä½“ç±»å¯¹è±¡" class="headerlink" title="â‘¢æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºå®ä½“ç±»å¯¹è±¡"></a>â‘¢æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºå®ä½“ç±»å¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-comment">//æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºä¸€ä¸ªå®ä½“ç±»å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectEmpById</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from t_emp where id = ?&quot;</span>;<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> jdbcTemplate.queryForObject(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanPropertyRowMapper</span>&lt;&gt;(Emp.class), <span class="hljs-number">1</span>);<br>    System.out.println(emp);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘£æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºä¸€ä¸ªlisté›†åˆ"><a href="#â‘£æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºä¸€ä¸ªlisté›†åˆ" class="headerlink" title="â‘£æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºä¸€ä¸ªlisté›†åˆ"></a>â‘£æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºä¸€ä¸ªlisté›†åˆ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-comment">//æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºä¸€ä¸ªlisté›†åˆ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectList</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from t_emp&quot;</span>;<br>    List&lt;Emp&gt; list = jdbcTemplate.query(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanPropertyRowMapper</span>&lt;&gt;(Emp.class));<br>    list.forEach(emp -&gt; System.out.println(emp));<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¤æŸ¥è¯¢å•è¡Œå•åˆ—çš„å€¼"><a href="#â‘¤æŸ¥è¯¢å•è¡Œå•åˆ—çš„å€¼" class="headerlink" title="â‘¤æŸ¥è¯¢å•è¡Œå•åˆ—çš„å€¼"></a>â‘¤æŸ¥è¯¢å•è¡Œå•åˆ—çš„å€¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-comment">//æŸ¥è¯¢å•è¡Œå•åˆ—çš„å€¼</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">selectCount</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select count(id) from t_emp&quot;</span>;<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);<br>    System.out.println(count);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-2ã€å£°æ˜å¼äº‹åŠ¡æ¦‚å¿µ"><a href="#4-2ã€å£°æ˜å¼äº‹åŠ¡æ¦‚å¿µ" class="headerlink" title="4.2ã€å£°æ˜å¼äº‹åŠ¡æ¦‚å¿µ"></a>4.2ã€å£°æ˜å¼äº‹åŠ¡æ¦‚å¿µ</h2><h3 id="4-2-1ã€ç¼–ç¨‹å¼äº‹åŠ¡"><a href="#4-2-1ã€ç¼–ç¨‹å¼äº‹åŠ¡" class="headerlink" title="4.2.1ã€ç¼–ç¨‹å¼äº‹åŠ¡"></a>4.2.1ã€ç¼–ç¨‹å¼äº‹åŠ¡</h3><p>äº‹åŠ¡åŠŸèƒ½çš„ç›¸å…³æ“ä½œå…¨éƒ¨é€šè¿‡è‡ªå·±ç¼–å†™ä»£ç æ¥å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> ...;<br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// å¼€å¯äº‹åŠ¡ï¼šå…³é—­äº‹åŠ¡çš„è‡ªåŠ¨æäº¤</span><br>    conn.setAutoCommit(<span class="hljs-literal">false</span>);<br>    <span class="hljs-comment">// æ ¸å¿ƒæ“ä½œ</span><br>    <span class="hljs-comment">// æäº¤äº‹åŠ¡</span><br>    conn.commit();<br>&#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>    <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span><br>    conn.rollBack();<br>&#125;<span class="hljs-keyword">finally</span>&#123;<br>    <span class="hljs-comment">// é‡Šæ”¾æ•°æ®åº“è¿æ¥</span><br>    conn.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–ç¨‹å¼çš„å®ç°æ–¹å¼å­˜åœ¨ç¼ºé™·ï¼š</p><ul><li>ç»†èŠ‚æ²¡æœ‰è¢«å±è”½ï¼šå…·ä½“æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰ç»†èŠ‚éƒ½éœ€è¦ç¨‹åºå‘˜è‡ªå·±æ¥å®Œæˆï¼Œæ¯”è¾ƒç¹çã€‚</li><li>ä»£ç å¤ç”¨æ€§ä¸é«˜ï¼šå¦‚æœæ²¡æœ‰æœ‰æ•ˆæŠ½å–å‡ºæ¥ï¼Œæ¯æ¬¡å®ç°åŠŸèƒ½éƒ½éœ€è¦è‡ªå·±ç¼–å†™ä»£ç ï¼Œä»£ç å°±æ²¡æœ‰å¾—åˆ°å¤ç”¨ã€‚</li></ul><h3 id="4-2-2ã€å£°æ˜å¼äº‹åŠ¡"><a href="#4-2-2ã€å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="4.2.2ã€å£°æ˜å¼äº‹åŠ¡"></a>4.2.2ã€å£°æ˜å¼äº‹åŠ¡</h3><p>æ—¢ç„¶äº‹åŠ¡æ§åˆ¶çš„ä»£ç æœ‰è§„å¾‹å¯å¾ªï¼Œä»£ç çš„ç»“æ„åŸºæœ¬æ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥æ¡†æ¶å°±å¯ä»¥å°†å›ºå®šæ¨¡å¼çš„ä»£ç æŠ½å–å‡ºæ¥ï¼Œè¿›è¡Œç›¸å…³çš„å°è£…ã€‚</p><p>å°è£…èµ·æ¥åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œç®€å•çš„é…ç½®å³å¯å®Œæˆæ“ä½œã€‚</p><ul><li>å¥½å¤„1ï¼šæé«˜å¼€å‘æ•ˆç‡</li><li>å¥½å¤„2ï¼šæ¶ˆé™¤äº†å†—ä½™çš„ä»£ç </li><li>å¥½å¤„3ï¼šæ¡†æ¶ä¼šç»¼åˆè€ƒè™‘ç›¸å…³é¢†åŸŸä¸­åœ¨å®é™…å¼€å‘ç¯å¢ƒä¸‹æœ‰å¯èƒ½é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œè¿›è¡Œäº†å¥å£®æ€§ã€æ€§èƒ½ç­‰å„ä¸ªæ–¹é¢çš„ä¼˜åŒ–</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸‹é¢ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li><strong>ç¼–ç¨‹å¼</strong>ï¼š<strong>è‡ªå·±å†™ä»£ç </strong>å®ç°åŠŸèƒ½</li><li><strong>å£°æ˜å¼</strong>ï¼šé€šè¿‡<strong>é…ç½®</strong>è®©<strong>æ¡†æ¶</strong>å®ç°åŠŸèƒ½</li></ul><h2 id="4-3ã€åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡"><a href="#4-3ã€åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="4.3ã€åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡"></a>4.3ã€åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡</h2><h3 id="4-3-1ã€å‡†å¤‡å·¥ä½œ"><a href="#4-3-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.3.1ã€å‡†å¤‡å·¥ä½œ"></a>4.3.1ã€å‡†å¤‡å·¥ä½œ</h3><h4 id="â‘ åŠ å…¥ä¾èµ–-2"><a href="#â‘ åŠ å…¥ä¾èµ–-2" class="headerlink" title="â‘ åŠ å…¥ä¾èµ–"></a>â‘ åŠ å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- åŸºäºMavenä¾èµ–ä¼ é€’æ€§ï¼Œå¯¼å…¥spring-contextä¾èµ–å³å¯å¯¼å…¥å½“å‰æ‰€éœ€æ‰€æœ‰jaråŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring æŒä¹…åŒ–å±‚æ”¯æŒjaråŒ… --&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring åœ¨æ‰§è¡ŒæŒä¹…åŒ–å±‚æ“ä½œã€ä¸æŒä¹…åŒ–å±‚æŠ€æœ¯è¿›è¡Œæ•´åˆè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨ormã€jdbcã€txä¸‰ä¸ªjaråŒ… --&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¯¼å…¥ orm åŒ…å°±å¯ä»¥é€šè¿‡ Maven çš„ä¾èµ–ä¼ é€’æ€§æŠŠå…¶ä»–ä¸¤ä¸ªä¹Ÿå¯¼å…¥ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-orm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Spring æµ‹è¯•ç›¸å…³ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ•°æ®æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘¡åˆ›å»ºjdbc-properties-1"><a href="#â‘¡åˆ›å»ºjdbc-properties-1" class="headerlink" title="â‘¡åˆ›å»ºjdbc.properties"></a>â‘¡åˆ›å»ºjdbc.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jdbc.user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-string">atguigu</span><br><span class="hljs-attr">jdbc.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC</span><br><span class="hljs-attr">jdbc.driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure><h4 id="â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶-1"><a href="#â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶-1" class="headerlink" title="â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶"></a>â‘¢é…ç½®Springçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ‰«æç»„ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atguigu.spring.tx.annotation&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å¯¼å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!-- é…ç½®æ•°æ®æº --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;druidDataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é…ç½® JdbcTemplate --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;jdbcTemplate&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è£…é…æ•°æ®æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;druidDataSource&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â‘£åˆ›å»ºè¡¨"><a href="#â‘£åˆ›å»ºè¡¨" class="headerlink" title="â‘£åˆ›å»ºè¡¨"></a>â‘£åˆ›å»ºè¡¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE `t_book` (<br>    `book_id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;ä¸»é”®&#x27;,<br>    `book_name` varchar(20) DEFAULT NULL COMMENT &#x27;å›¾ä¹¦åç§°&#x27;,<br>    `price` int(11) DEFAULT NULL COMMENT &#x27;ä»·æ ¼&#x27;,<br>    `stock` int(10) unsigned DEFAULT NULL COMMENT &#x27;åº“å­˜ï¼ˆæ— ç¬¦å·ï¼‰&#x27;,<br>    PRIMARY KEY (`book_id`)<br>) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;<br>insert into `t_book`(`book_id`,`book_name`,`price`,`stock`) values (1,&#x27;æ–—ç ´è‹ç©¹&#x27;,80,100),(2,&#x27;æ–—ç½—å¤§é™†&#x27;,50,100);<br>CREATE TABLE `t_user` (<br>    `user_id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;ä¸»é”®&#x27;,<br>    `username` varchar(20) DEFAULT NULL COMMENT &#x27;ç”¨æˆ·å&#x27;,<br>    `balance` int(10) unsigned DEFAULT NULL COMMENT &#x27;ä½™é¢ï¼ˆæ— ç¬¦å·ï¼‰&#x27;,<br>    PRIMARY KEY (`user_id`)<br>) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;<br>insert into `t_user`(`user_id`,`username`,`balance`) values (1,&#x27;admin&#x27;,50);<br></code></pre></td></tr></table></figure><h4 id="â‘¤åˆ›å»ºç»„ä»¶"><a href="#â‘¤åˆ›å»ºç»„ä»¶" class="headerlink" title="â‘¤åˆ›å»ºç»„ä»¶"></a>â‘¤åˆ›å»ºç»„ä»¶</h4><p>åˆ›å»ºBookControllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookService bookService;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyBook</span><span class="hljs-params">(Integer bookId, Integer userId)</span>&#123;<br>        bookService.buyBook(bookId, userId);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£BookServiceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookService</span> &#123;<br><span class="hljs-keyword">void</span> <span class="hljs-title function_">buyBook</span><span class="hljs-params">(Integer bookId, Integer userId)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå®ç°ç±»BookServiceImplï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BookService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyBook</span><span class="hljs-params">(Integer bookId, Integer userId)</span> &#123;<br>        <span class="hljs-comment">//æŸ¥è¯¢å›¾ä¹¦çš„ä»·æ ¼</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> bookDao.getPriceByBookId(bookId);<br>        <span class="hljs-comment">//æ›´æ–°å›¾ä¹¦çš„åº“å­˜</span><br>        bookDao.updateStock(bookId);<br>        <span class="hljs-comment">//æ›´æ–°ç”¨æˆ·çš„ä½™é¢</span><br>        bookDao.updateBalance(userId, price);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¥å£BookDaoï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookDao</span> &#123;<br>    Integer <span class="hljs-title function_">getPriceByBookId</span><span class="hljs-params">(Integer bookId)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateStock</span><span class="hljs-params">(Integer bookId)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateBalance</span><span class="hljs-params">(Integer userId, Integer price)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå®ç°ç±»BookDaoImplï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BookDao</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getPriceByBookId</span><span class="hljs-params">(Integer bookId)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select price from t_book where book_id = ?&quot;</span>;<br>        <span class="hljs-keyword">return</span> jdbcTemplate.queryForObject(sql, Integer.class, bookId);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateStock</span><span class="hljs-params">(Integer bookId)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update t_book set stock = stock - 1 where book_id = ?&quot;</span>;<br>        jdbcTemplate.update(sql, bookId);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateBalance</span><span class="hljs-params">(Integer userId, Integer price)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update t_user set balance = balance - ? where user_id =?&quot;</span>;<br>            jdbcTemplate.update(sql, price, userId);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-3-2ã€æµ‹è¯•æ— äº‹åŠ¡æƒ…å†µ"><a href="#4-3-2ã€æµ‹è¯•æ— äº‹åŠ¡æƒ…å†µ" class="headerlink" title="4.3.2ã€æµ‹è¯•æ— äº‹åŠ¡æƒ…å†µ"></a>4.3.2ã€æµ‹è¯•æ— äº‹åŠ¡æƒ…å†µ</h3><h4 id="â‘ åˆ›å»ºæµ‹è¯•ç±»"><a href="#â‘ åˆ›å»ºæµ‹è¯•ç±»" class="headerlink" title="â‘ åˆ›å»ºæµ‹è¯•ç±»"></a>â‘ åˆ›å»ºæµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-meta">@ContextConfiguration(&quot;classpath:tx-annotation.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TxByAnnotationTest</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookController bookController;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBuyBook</span><span class="hljs-params">()</span>&#123;<br>        bookController.buyBook(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¡æ¨¡æ‹Ÿåœºæ™¯"><a href="#â‘¡æ¨¡æ‹Ÿåœºæ™¯" class="headerlink" title="â‘¡æ¨¡æ‹Ÿåœºæ™¯"></a>â‘¡æ¨¡æ‹Ÿåœºæ™¯</h4><p>ç”¨æˆ·è´­ä¹°å›¾ä¹¦ï¼Œå…ˆæŸ¥è¯¢å›¾ä¹¦çš„ä»·æ ¼ï¼Œå†æ›´æ–°å›¾ä¹¦çš„åº“å­˜å’Œç”¨æˆ·çš„ä½™é¢</p><p>å‡è®¾ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ï¼Œè´­ä¹°idä¸º1çš„å›¾ä¹¦</p><p>ç”¨æˆ·ä½™é¢ä¸º50ï¼Œè€Œå›¾ä¹¦ä»·æ ¼ä¸º80</p><p>è´­ä¹°å›¾ä¹¦ä¹‹åï¼Œç”¨æˆ·çš„ä½™é¢ä¸º-30ï¼Œæ•°æ®åº“ä¸­ä½™é¢å­—æ®µè®¾ç½®äº†æ— ç¬¦å·ï¼Œå› æ­¤æ— æ³•å°†-30æ’å…¥åˆ°ä½™é¢å­—æ®µ</p><p>æ­¤æ—¶æ‰§è¡Œsqlè¯­å¥ä¼šæŠ›å‡ºSQLException</p><h4 id="â‘¢è§‚å¯Ÿç»“æœ"><a href="#â‘¢è§‚å¯Ÿç»“æœ" class="headerlink" title="â‘¢è§‚å¯Ÿç»“æœ"></a>â‘¢è§‚å¯Ÿç»“æœ</h4><p>å› ä¸ºæ²¡æœ‰æ·»åŠ äº‹åŠ¡ï¼Œå›¾ä¹¦çš„åº“å­˜æ›´æ–°äº†ï¼Œä½†æ˜¯ç”¨æˆ·çš„ä½™é¢æ²¡æœ‰æ›´æ–°</p><p>æ˜¾ç„¶è¿™æ ·çš„ç»“æœæ˜¯é”™è¯¯çš„ï¼Œè´­ä¹°å›¾ä¹¦æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½ï¼Œæ›´æ–°åº“å­˜å’Œæ›´æ–°ä½™é¢è¦ä¹ˆéƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥</p><h3 id="4-3-3ã€åŠ å…¥äº‹åŠ¡"><a href="#4-3-3ã€åŠ å…¥äº‹åŠ¡" class="headerlink" title="4.3.3ã€åŠ å…¥äº‹åŠ¡"></a>4.3.3ã€åŠ å…¥äº‹åŠ¡</h3><h4 id="â‘ æ·»åŠ äº‹åŠ¡é…ç½®"><a href="#â‘ æ·»åŠ äº‹åŠ¡é…ç½®" class="headerlink" title="â‘ æ·»åŠ äº‹åŠ¡é…ç½®"></a>â‘ æ·»åŠ äº‹åŠ¡é…ç½®</h4><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼šï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</span><br><span class="hljs-comment">    é€šè¿‡æ³¨è§£@Transactionalæ‰€æ ‡è¯†çš„æ–¹æ³•æˆ–æ ‡è¯†çš„ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«äº‹åŠ¡ç®¡ç†å™¨ç®¡ç†äº‹åŠ¡</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-comment">&lt;!-- transaction-managerå±æ€§çš„é»˜è®¤å€¼æ˜¯transactionManagerï¼Œå¦‚æœäº‹åŠ¡ç®¡ç†å™¨beançš„idæ­£å¥½å°±</span><br><span class="hljs-comment">æ˜¯è¿™ä¸ªé»˜è®¤å€¼ï¼Œåˆ™å¯ä»¥çœç•¥è¿™ä¸ªå±æ€§ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¯¼å…¥çš„åç§°ç©ºé—´éœ€è¦ <strong>tx</strong> <strong>ç»“å°¾</strong>çš„é‚£ä¸ªã€‚</p><p><img src="/2022/11/12/SpringNote/28.png" alt="28"></p><h4 id="â‘¡æ·»åŠ äº‹åŠ¡æ³¨è§£"><a href="#â‘¡æ·»åŠ äº‹åŠ¡æ³¨è§£" class="headerlink" title="â‘¡æ·»åŠ äº‹åŠ¡æ³¨è§£"></a>â‘¡æ·»åŠ äº‹åŠ¡æ³¨è§£</h4><p>å› ä¸ºserviceå±‚è¡¨ç¤ºä¸šåŠ¡é€»è¾‘å±‚ï¼Œä¸€ä¸ªæ–¹æ³•è¡¨ç¤ºä¸€ä¸ªå®Œæˆçš„åŠŸèƒ½ï¼Œå› æ­¤å¤„ç†äº‹åŠ¡ä¸€èˆ¬åœ¨serviceå±‚å¤„ç†</p><p>åœ¨BookServiceImplçš„buybook()æ·»åŠ æ³¨è§£ <strong>@Transactional</strong></p><h4 id="â‘¢è§‚å¯Ÿç»“æœ-1"><a href="#â‘¢è§‚å¯Ÿç»“æœ-1" class="headerlink" title="â‘¢è§‚å¯Ÿç»“æœ"></a>â‘¢è§‚å¯Ÿç»“æœ</h4><p>ç”±äºä½¿ç”¨äº†Springçš„å£°æ˜å¼äº‹åŠ¡ï¼Œæ›´æ–°åº“å­˜å’Œæ›´æ–°ä½™é¢éƒ½æ²¡æœ‰æ‰§è¡Œ</p><h3 id="4-3-4ã€-Transactionalæ³¨è§£æ ‡è¯†çš„ä½ç½®"><a href="#4-3-4ã€-Transactionalæ³¨è§£æ ‡è¯†çš„ä½ç½®" class="headerlink" title="4.3.4ã€@Transactionalæ³¨è§£æ ‡è¯†çš„ä½ç½®"></a>4.3.4ã€@Transactionalæ³¨è§£æ ‡è¯†çš„ä½ç½®</h3><p>@Transactionalæ ‡è¯†åœ¨æ–¹æ³•ä¸Šï¼Œåªä¼šå½±å“è¯¥æ–¹æ³•</p><p>@Transactionalæ ‡è¯†çš„ç±»ä¸Šï¼Œä¼šå½±å“ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•</p><h3 id="4-3-5ã€äº‹åŠ¡å±æ€§ï¼šåªè¯»"><a href="#4-3-5ã€äº‹åŠ¡å±æ€§ï¼šåªè¯»" class="headerlink" title="4.3.5ã€äº‹åŠ¡å±æ€§ï¼šåªè¯»"></a>4.3.5ã€äº‹åŠ¡å±æ€§ï¼šåªè¯»</h3><h4 id="â‘ ä»‹ç»-1"><a href="#â‘ ä»‹ç»-1" class="headerlink" title="â‘ ä»‹ç»"></a>â‘ ä»‹ç»</h4><p>å¯¹ä¸€ä¸ªæŸ¥è¯¢æ“ä½œæ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒè®¾ç½®æˆåªè¯»ï¼Œå°±èƒ½å¤Ÿæ˜ç¡®å‘Šè¯‰æ•°æ®åº“ï¼Œè¿™ä¸ªæ“ä½œä¸æ¶‰åŠå†™æ“ä½œã€‚è¿™æ ·æ•°æ®åº“å°±èƒ½å¤Ÿé’ˆå¯¹æŸ¥è¯¢æ“ä½œæ¥è¿›è¡Œä¼˜åŒ–ã€‚</p><h4 id="â‘¡ä½¿ç”¨æ–¹å¼"><a href="#â‘¡ä½¿ç”¨æ–¹å¼" class="headerlink" title="â‘¡ä½¿ç”¨æ–¹å¼"></a>â‘¡ä½¿ç”¨æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional(readOnly = true)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyBook</span><span class="hljs-params">(Integer bookId, Integer userId)</span> &#123;<br>    <span class="hljs-comment">//æŸ¥è¯¢å›¾ä¹¦çš„ä»·æ ¼</span><br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> bookDao.getPriceByBookId(bookId);<br>    <span class="hljs-comment">//æ›´æ–°å›¾ä¹¦çš„åº“å­˜</span><br>    bookDao.updateStock(bookId);<br>    <span class="hljs-comment">//æ›´æ–°ç”¨æˆ·çš„ä½™é¢</span><br>    bookDao.updateBalance(userId, price);<br>    <span class="hljs-comment">//System.out.println(1/0);</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢æ³¨æ„"><a href="#â‘¢æ³¨æ„" class="headerlink" title="â‘¢æ³¨æ„"></a>â‘¢æ³¨æ„</h4><p>å¯¹å¢åˆ æ”¹æ“ä½œè®¾ç½®åªè¯»ä¼šæŠ›å‡ºä¸‹é¢å¼‚å¸¸ï¼š</p><p>Caused by: java.sql.SQLException: Connection is read-only. Queries leading to data modification are not allowed</p><h3 id="4-3-6ã€äº‹åŠ¡å±æ€§ï¼šè¶…æ—¶"><a href="#4-3-6ã€äº‹åŠ¡å±æ€§ï¼šè¶…æ—¶" class="headerlink" title="4.3.6ã€äº‹åŠ¡å±æ€§ï¼šè¶…æ—¶"></a>4.3.6ã€äº‹åŠ¡å±æ€§ï¼šè¶…æ—¶</h3><h4 id="â‘ ä»‹ç»-2"><a href="#â‘ ä»‹ç»-2" class="headerlink" title="â‘ ä»‹ç»"></a>â‘ ä»‹ç»</h4><p>äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½å› ä¸ºé‡åˆ°æŸäº›é—®é¢˜ï¼Œå¯¼è‡´ç¨‹åºå¡ä½ï¼Œä»è€Œé•¿æ—¶é—´å ç”¨æ•°æ®åº“èµ„æºã€‚è€Œé•¿æ—¶é—´å ç”¨èµ„æºï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºç¨‹åºè¿è¡Œå‡ºç°äº†é—®é¢˜ï¼ˆå¯èƒ½æ˜¯Javaç¨‹åºæˆ–MySQLæ•°æ®åº“æˆ–ç½‘ç»œè¿æ¥ç­‰ç­‰ï¼‰ã€‚</p><p>æ­¤æ—¶è¿™ä¸ªå¾ˆå¯èƒ½å‡ºé—®é¢˜çš„ç¨‹åºåº”è¯¥è¢«å›æ»šï¼Œæ’¤é”€å®ƒå·²åšçš„æ“ä½œï¼Œäº‹åŠ¡ç»“æŸï¼ŒæŠŠèµ„æºè®©å‡ºæ¥ï¼Œè®©å…¶ä»–æ­£å¸¸ç¨‹åºå¯ä»¥æ‰§è¡Œã€‚</p><p>æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ä¸€å¥è¯ï¼šè¶…æ—¶å›æ»šï¼Œé‡Šæ”¾èµ„æºã€‚</p><h4 id="â‘¡ä½¿ç”¨æ–¹å¼-1"><a href="#â‘¡ä½¿ç”¨æ–¹å¼-1" class="headerlink" title="â‘¡ä½¿ç”¨æ–¹å¼"></a>â‘¡ä½¿ç”¨æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional(timeout = 3)</span>  <span class="hljs-comment">//-1è¡¨ç¤ºä¸€ç›´ç­‰å¾…ï¼Œ3ä»£è¡¨3ç§’</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyBook</span><span class="hljs-params">(Integer bookId, Integer userId)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">5</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>    <span class="hljs-comment">//æŸ¥è¯¢å›¾ä¹¦çš„ä»·æ ¼</span><br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> bookDao.getPriceByBookId(bookId);<br>    <span class="hljs-comment">//æ›´æ–°å›¾ä¹¦çš„åº“å­˜</span><br>    bookDao.updateStock(bookId);<br>    <span class="hljs-comment">//æ›´æ–°ç”¨æˆ·çš„ä½™é¢</span><br>    bookDao.updateBalance(userId, price);<br>    <span class="hljs-comment">//System.out.println(1/0);</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢è§‚å¯Ÿç»“æœ-2"><a href="#â‘¢è§‚å¯Ÿç»“æœ-2" class="headerlink" title="â‘¢è§‚å¯Ÿç»“æœ"></a>â‘¢è§‚å¯Ÿç»“æœ</h4><p>æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼š</p><p>org.springframework.transaction.<strong>TransactionTimedOutException</strong>: Transaction timed out:</p><p>deadline was Fri Jun 04 16:25:39 CST 2022</p><h3 id="4-3-7ã€äº‹åŠ¡å±æ€§ï¼šå›æ»šç­–ç•¥"><a href="#4-3-7ã€äº‹åŠ¡å±æ€§ï¼šå›æ»šç­–ç•¥" class="headerlink" title="4.3.7ã€äº‹åŠ¡å±æ€§ï¼šå›æ»šç­–ç•¥"></a>4.3.7ã€äº‹åŠ¡å±æ€§ï¼šå›æ»šç­–ç•¥</h3><h4 id="â‘ ä»‹ç»-3"><a href="#â‘ ä»‹ç»-3" class="headerlink" title="â‘ ä»‹ç»"></a>â‘ ä»‹ç»</h4><p><strong>å£°æ˜å¼äº‹åŠ¡é»˜è®¤åªé’ˆå¯¹è¿è¡Œæ—¶å¼‚å¸¸å›æ»šï¼Œç¼–è¯‘æ—¶å¼‚å¸¸ä¸å›æ»š</strong>ã€‚</p><p>å¯ä»¥é€šè¿‡@Transactionalä¸­ç›¸å…³å±æ€§è®¾ç½®å›æ»šç­–ç•¥</p><ul><li>rollbackForå±æ€§ï¼šéœ€è¦è®¾ç½®ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡</li><li>rollbackForClassNameå±æ€§ï¼šéœ€è¦è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å…¨ç±»å</li><li>noRollbackForå±æ€§ï¼šéœ€è¦è®¾ç½®ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡</li><li>noRollbackForClassNameå±æ€§ï¼šéœ€è¦è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å…¨ç±»å</li></ul><h4 id="â‘¡ä½¿ç”¨æ–¹å¼-2"><a href="#â‘¡ä½¿ç”¨æ–¹å¼-2" class="headerlink" title="â‘¡ä½¿ç”¨æ–¹å¼"></a>â‘¡ä½¿ç”¨æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional(noRollbackFor = ArithmeticException.class)</span><br><span class="hljs-comment">//@Transactional(noRollbackForClassName = &quot;java.lang.ArithmeticException&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyBook</span><span class="hljs-params">(Integer bookId, Integer userId)</span> &#123;<br>    <span class="hljs-comment">//æŸ¥è¯¢å›¾ä¹¦çš„ä»·æ ¼</span><br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> bookDao.getPriceByBookId(bookId);<br>    <span class="hljs-comment">//æ›´æ–°å›¾ä¹¦çš„åº“å­˜</span><br>    bookDao.updateStock(bookId);<br>    <span class="hljs-comment">//æ›´æ–°ç”¨æˆ·çš„ä½™é¢</span><br>    bookDao.updateBalance(userId, price);<br>    System.out.println(<span class="hljs-number">1</span>/<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="â‘¢è§‚å¯Ÿç»“æœ-3"><a href="#â‘¢è§‚å¯Ÿç»“æœ-3" class="headerlink" title="â‘¢è§‚å¯Ÿç»“æœ"></a>â‘¢è§‚å¯Ÿç»“æœ</h4><p>è™½ç„¶è´­ä¹°å›¾ä¹¦åŠŸèƒ½ä¸­å‡ºç°äº†æ•°å­¦è¿ç®—å¼‚å¸¸ï¼ˆArithmeticExceptionï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬è®¾ç½®çš„å›æ»šç­–ç•¥æ˜¯ï¼Œå½“</p><p>å‡ºç°ArithmeticExceptionä¸å‘ç”Ÿå›æ»šï¼Œå› æ­¤è´­ä¹°å›¾ä¹¦çš„æ“ä½œæ­£å¸¸æ‰§è¡Œ</p><h3 id="4-3-8ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#4-3-8ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="4.3.8ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«"></a>4.3.8ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«</h3><h4 id="â‘ ä»‹ç»-4"><a href="#â‘ ä»‹ç»-4" class="headerlink" title="â‘ ä»‹ç»"></a>â‘ ä»‹ç»</h4><p>æ•°æ®åº“ç³»ç»Ÿå¿…é¡»å…·æœ‰éš”ç¦»å¹¶å‘è¿è¡Œå„ä¸ªäº‹åŠ¡çš„èƒ½åŠ›ï¼Œä½¿å®ƒä»¬ä¸ä¼šç›¸äº’å½±å“ï¼Œé¿å…å„ç§å¹¶å‘é—®é¢˜ã€‚ä¸€ä¸ªäº‹</p><p>åŠ¡ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»çš„ç¨‹åº¦ç§°ä¸ºéš”ç¦»çº§åˆ«ã€‚SQLæ ‡å‡†ä¸­è§„å®šäº†å¤šç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸åŒéš”ç¦»çº§åˆ«å¯¹åº”ä¸åŒ</p><p>çš„å¹²æ‰°ç¨‹åº¦ï¼Œéš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œæ•°æ®ä¸€è‡´æ€§å°±è¶Šå¥½ï¼Œä½†å¹¶å‘æ€§è¶Šå¼±ã€‚</p><p>éš”ç¦»çº§åˆ«ä¸€å…±æœ‰å››ç§ï¼š</p><ul><li><p>è¯»æœªæäº¤ï¼šREAD UNCOMMITTED </p><p>å…è®¸Transaction01è¯»å–Transaction02æœªæäº¤çš„ä¿®æ”¹ã€‚å¯èƒ½ä¼šå‡ºç°è„è¯»çš„é—®é¢˜</p></li><li><p>è¯»å·²æäº¤ï¼šREAD COMMITTEDã€</p><p>è¦æ±‚Transaction01åªèƒ½è¯»å–Transaction02å·²æäº¤çš„ä¿®æ”¹ã€‚å¯èƒ½ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜</p></li><li><p>å¯é‡å¤è¯»ï¼šREPEATABLE READ</p><p>ç¡®ä¿Transaction01å¯ä»¥å¤šæ¬¡ä»ä¸€ä¸ªå­—æ®µä¸­è¯»å–åˆ°ç›¸åŒçš„å€¼ï¼Œå³Transaction01æ‰§è¡ŒæœŸé—´ç¦æ­¢å…¶å®ƒäº‹åŠ¡å¯¹è¿™ä¸ªå­—æ®µè¿›è¡Œæ›´æ–°ã€‚å¯èƒ½ä¼šå‡ºç°å¹»è¯»çš„é—®é¢˜</p></li><li><p>ä¸²è¡ŒåŒ–ï¼šSERIALIZABLE</p><p>ç¡®ä¿Transaction01å¯ä»¥å¤šæ¬¡ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–åˆ°ç›¸åŒçš„è¡Œï¼Œåœ¨Transaction01æ‰§è¡ŒæœŸé—´ï¼Œç¦æ­¢å…¶å®ƒäº‹åŠ¡å¯¹è¿™ä¸ªè¡¨è¿›è¡Œæ·»åŠ ã€æ›´æ–°ã€åˆ é™¤æ“ä½œã€‚å¯ä»¥é¿å…ä»»ä½•å¹¶å‘é—®é¢˜ï¼Œä½†æ€§èƒ½ååˆ†ä½ä¸‹ã€‚</p></li></ul><p>å„ä¸ªéš”ç¦»çº§åˆ«è§£å†³å¹¶å‘é—®é¢˜çš„èƒ½åŠ›è§ä¸‹è¡¨ï¼š</p><table><thead><tr><th><strong>éš”ç¦»çº§åˆ«</strong></th><th><strong>è„è¯»</strong></th><th><strong>ä¸å¯é‡å¤è¯»</strong></th><th><strong>å¹»è¯»</strong></th></tr></thead><tbody><tr><td>READ UNCOMMITTED</td><td>æœ‰</td><td>æœ‰</td><td>æœ‰</td></tr><tr><td>READ COMMITTED</td><td>æ— </td><td>æœ‰</td><td>æœ‰</td></tr><tr><td>REPEATABLE READ</td><td>æ— </td><td>æ— </td><td>æœ‰</td></tr><tr><td>SERIALIZABLE</td><td>æ— </td><td>æ— </td><td>æ— </td></tr></tbody></table><p>å„ç§æ•°æ®åº“äº§å“å¯¹äº‹åŠ¡éš”ç¦»çº§åˆ«çš„æ”¯æŒç¨‹åº¦ï¼š</p><table><thead><tr><th><strong>éš”ç¦»çº§åˆ«</strong></th><th><strong>Oracle</strong></th><th><strong>MySQL</strong></th></tr></thead><tbody><tr><td>READ UNCOMMITTED</td><td>Ã—</td><td>âˆš</td></tr><tr><td>READ COMMITTED</td><td>âˆš(é»˜è®¤)</td><td>âˆš</td></tr><tr><td>REPEATABLE READ</td><td>Ã—</td><td>âˆš(é»˜è®¤)</td></tr><tr><td>SERIALIZABLE</td><td>âˆš</td><td>âˆš</td></tr></tbody></table><h4 id="â‘¡ä½¿ç”¨æ–¹å¼-3"><a href="#â‘¡ä½¿ç”¨æ–¹å¼-3" class="headerlink" title="â‘¡ä½¿ç”¨æ–¹å¼"></a>â‘¡ä½¿ç”¨æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional(isolation = Isolation.DEFAULT)</span><span class="hljs-comment">//ä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«</span><br><span class="hljs-meta">@Transactional(isolation = Isolation.READ_UNCOMMITTED)</span><span class="hljs-comment">//è¯»æœªæäº¤</span><br><span class="hljs-meta">@Transactional(isolation = Isolation.READ_COMMITTED)</span><span class="hljs-comment">//è¯»å·²æäº¤</span><br><span class="hljs-meta">@Transactional(isolation = Isolation.REPEATABLE_READ)</span><span class="hljs-comment">//å¯é‡å¤è¯»</span><br><span class="hljs-meta">@Transactional(isolation = Isolation.SERIALIZABLE)</span><span class="hljs-comment">//ä¸²è¡ŒåŒ–</span><br></code></pre></td></tr></table></figure><h3 id="4-3-9ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º"><a href="#4-3-9ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º" class="headerlink" title="4.3.9ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º"></a>4.3.9ã€äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3><h4 id="â‘ ä»‹ç»-5"><a href="#â‘ ä»‹ç»-5" class="headerlink" title="â‘ ä»‹ç»"></a>â‘ ä»‹ç»</h4><p>å½“äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå¿…é¡»æŒ‡å®šäº‹åŠ¡åº”è¯¥å¦‚ä½•ä¼ æ’­ã€‚ä¾‹å¦‚ï¼šæ–¹æ³•å¯èƒ½ç»§ç»­åœ¨ç°æœ‰äº‹åŠ¡ä¸­è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡ä¸­è¿è¡Œã€‚</p><h4 id="â‘¡æµ‹è¯•"><a href="#â‘¡æµ‹è¯•" class="headerlink" title="â‘¡æµ‹è¯•"></a>â‘¡æµ‹è¯•</h4><p>åˆ›å»ºæ¥å£CheckoutServiceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CheckoutService</span> &#123;<br><span class="hljs-keyword">void</span> <span class="hljs-title function_">checkout</span><span class="hljs-params">(Integer[] bookIds, Integer userId)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå®ç°ç±»CheckoutServiceImplï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CheckoutServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CheckoutService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookService bookService;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-comment">//ä¸€æ¬¡è´­ä¹°å¤šæœ¬å›¾ä¹¦</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkout</span><span class="hljs-params">(Integer[] bookIds, Integer userId)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Integer bookId : bookIds) &#123;<br>            bookService.buyBook(bookId, userId);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨BookControllerä¸­æ·»åŠ æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> CheckoutService checkoutService;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkout</span><span class="hljs-params">(Integer[] bookIds, Integer userId)</span>&#123;<br>    checkoutService.checkout(bookIds, userId);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æ•°æ®åº“ä¸­å°†ç”¨æˆ·çš„ä½™é¢ä¿®æ”¹ä¸º100å…ƒ</p><h4 id="â‘¢è§‚å¯Ÿç»“æœ-4"><a href="#â‘¢è§‚å¯Ÿç»“æœ-4" class="headerlink" title="â‘¢è§‚å¯Ÿç»“æœ"></a>â‘¢è§‚å¯Ÿç»“æœ</h4><p>å¯ä»¥é€šè¿‡@Transactionalä¸­çš„propagationå±æ€§è®¾ç½®äº‹åŠ¡ä¼ æ’­è¡Œä¸º</p><p>ä¿®æ”¹BookServiceImplä¸­buyBook()ä¸Šï¼ˆåœ¨è¢«è°ƒç”¨çš„æ–¹æ³•ä¸Šä¿®æ”¹ï¼‰ï¼Œæ³¨è§£@Transactionalçš„propagationå±æ€§</p><p>@Transactional(propagation &#x3D; Propagation.REQUIRED)ï¼Œé»˜è®¤æƒ…å†µï¼Œè¡¨ç¤ºå¦‚æœå½“å‰çº¿ç¨‹ä¸Šæœ‰å·²ç»å¼€å¯çš„äº‹åŠ¡å¯ç”¨ï¼Œé‚£ä¹ˆå°±åœ¨è¿™ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚ç»è¿‡è§‚å¯Ÿï¼Œè´­ä¹°å›¾ä¹¦çš„æ–¹æ³•buyBook()åœ¨checkout()ä¸­è¢«è°ƒç”¨ï¼Œcheckout()ä¸Šæœ‰äº‹åŠ¡æ³¨è§£ï¼Œå› æ­¤åœ¨æ­¤äº‹åŠ¡ä¸­æ‰§è¡Œã€‚æ‰€è´­ä¹°çš„ä¸¤æœ¬å›¾ä¹¦çš„ä»·æ ¼ä¸º80å’Œ50ï¼Œè€Œç”¨æˆ·çš„ä½™é¢ä¸º100ï¼Œå› æ­¤åœ¨è´­ä¹°ç¬¬äºŒæœ¬å›¾ä¹¦æ—¶ä½™é¢ä¸è¶³å¤±è´¥ï¼Œå¯¼è‡´æ•´ä¸ªcheckout()å›æ»šï¼Œå³åªè¦æœ‰ä¸€æœ¬ä¹¦ä¹°ä¸äº†ï¼Œå°±éƒ½ä¹°ä¸äº†</p><p>@Transactional(propagation &#x3D; Propagation.REQUIRES_NEW)ï¼Œè¡¨ç¤ºä¸ç®¡å½“å‰çº¿ç¨‹ä¸Šæ˜¯å¦æœ‰å·²ç»å¼€å¯çš„äº‹åŠ¡ï¼Œéƒ½è¦å¼€å¯æ–°äº‹åŠ¡ã€‚åŒæ ·çš„åœºæ™¯ï¼Œæ¯æ¬¡è´­ä¹°å›¾ä¹¦éƒ½æ˜¯åœ¨buyBook()çš„äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå› æ­¤ç¬¬ä¸€æœ¬å›¾ä¹¦è´­ä¹°æˆåŠŸï¼Œäº‹åŠ¡ç»“æŸï¼Œç¬¬äºŒæœ¬å›¾ä¹¦è´­ä¹°å¤±è´¥ï¼Œåªåœ¨ç¬¬äºŒæ¬¡çš„buyBook()ä¸­å›æ»šï¼Œè´­ä¹°ç¬¬ä¸€æœ¬å›¾ä¹¦ä¸å—å½±å“ï¼Œå³èƒ½ä¹°å‡ æœ¬å°±ä¹°å‡ æœ¬</p><h2 id="4-4ã€åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡"><a href="#4-4ã€åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="4.4ã€åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡"></a>4.4ã€åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡</h2><h3 id="4-3-1ã€åœºæ™¯æ¨¡æ‹Ÿ"><a href="#4-3-1ã€åœºæ™¯æ¨¡æ‹Ÿ" class="headerlink" title="4.3.1ã€åœºæ™¯æ¨¡æ‹Ÿ"></a>4.3.1ã€åœºæ™¯æ¨¡æ‹Ÿ</h3><p>å‚è€ƒåŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡</p><h3 id="4-3-2ã€ä¿®æ”¹Springé…ç½®æ–‡ä»¶"><a href="#4-3-2ã€ä¿®æ”¹Springé…ç½®æ–‡ä»¶" class="headerlink" title="4.3.2ã€ä¿®æ”¹Springé…ç½®æ–‡ä»¶"></a>4.3.2ã€ä¿®æ”¹Springé…ç½®æ–‡ä»¶</h3><p>å°†Springé…ç½®æ–‡ä»¶ä¸­å»æ‰tx:annotation-driven æ ‡ç­¾ï¼Œå¹¶æ·»åŠ é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é…ç½®äº‹åŠ¡é€šçŸ¥å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(* com.atguigu.spring.tx.xml.service.impl.*.*(..))&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:advisor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- tx:adviceæ ‡ç­¾ï¼šé…ç½®äº‹åŠ¡é€šçŸ¥ --&gt;</span><br><span class="hljs-comment">&lt;!-- idå±æ€§ï¼šç»™äº‹åŠ¡é€šçŸ¥æ ‡ç­¾è®¾ç½®å”¯ä¸€æ ‡è¯†ï¼Œä¾¿äºå¼•ç”¨ --&gt;</span><br><span class="hljs-comment">&lt;!-- transaction-managerå±æ€§ï¼šå…³è”äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- tx:methodæ ‡ç­¾ï¼šé…ç½®å…·ä½“çš„äº‹åŠ¡æ–¹æ³• --&gt;</span><br>        <span class="hljs-comment">&lt;!-- nameå±æ€§ï¼šæŒ‡å®šæ–¹æ³•åï¼Œå¯ä»¥ä½¿ç”¨æ˜Ÿå·ä»£è¡¨å¤šä¸ªå­—ç¬¦ï¼Œå•å†™ä¸€ä¸ª * ä»£è¡¨æ‰€æœ‰æ–¹æ³• --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;get*&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;query*&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;find*&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- read-onlyå±æ€§ï¼šè®¾ç½®åªè¯»å±æ€§ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- rollback-forå±æ€§ï¼šè®¾ç½®å›æ»šçš„å¼‚å¸¸ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- no-rollback-forå±æ€§ï¼šè®¾ç½®ä¸å›æ»šçš„å¼‚å¸¸ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- isolationå±æ€§ï¼šè®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ« --&gt;</span><br>        <span class="hljs-comment">&lt;!-- timeoutå±æ€§ï¼šè®¾ç½®äº‹åŠ¡çš„è¶…æ—¶å±æ€§ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- propagationå±æ€§ï¼šè®¾ç½®äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;save*&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">rollback-for</span>=<span class="hljs-string">&quot;java.lang.Exception&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRES_NEW&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;update*&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">rollback-for</span>=<span class="hljs-string">&quot;java.lang.Exception&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRES_NEW&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;delete*&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">rollback-for</span>=<span class="hljs-string">&quot;java.lang.Exception&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRES_NEW&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåŸºäºxmlå®ç°çš„å£°æ˜å¼äº‹åŠ¡ï¼Œå¿…é¡»å¼•å…¥aspectJçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MyBatis</title>
    <link href="/2022/10/28/MyBatisNote/"/>
    <url>/2022/10/28/MyBatisNote/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€MyBatis"><a href="#ä¸€ã€MyBatis" class="headerlink" title="ä¸€ã€MyBatis"></a>ä¸€ã€MyBatis</h1><h2 id="1ã€MyBatisç®€ä»‹"><a href="#1ã€MyBatisç®€ä»‹" class="headerlink" title="1ã€MyBatisç®€ä»‹"></a>1ã€MyBatisç®€ä»‹</h2><p><strong>MyBatisï¼šæŒä¹…å±‚æ¡†æ¶ï¼Œå°è£… JDBC ï¼ŒåŠŸèƒ½æ˜¯è¿æ¥æ•°æ®åº“ã€æ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</strong></p><h3 id="1-1ã€MyBatiså†å²"><a href="#1-1ã€MyBatiså†å²" class="headerlink" title="1.1ã€MyBatiså†å²"></a>1.1ã€MyBatiså†å²</h3><p>MyBatisæœ€åˆæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®<strong>iBatis</strong>, 2010å¹´6æœˆè¿™ä¸ªé¡¹ç›®ç”±Apache Software Foundationè¿ç§»åˆ°äº†Google Codeã€‚éšç€å¼€å‘å›¢é˜Ÿè½¬æŠ•Google Codeæ——ä¸‹ï¼Œ iBatis3.xæ­£å¼æ›´åä¸ºMyBatisã€‚</p><p>ä»£ç äº2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚</p><p>iBatisä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æŒä¹…å±‚æ¡†æ¶ã€‚</p><p>iBatisæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬ SQL Mapsï¼ˆJavaBeanï¼‰ å’Œ Data Access Objectsï¼ˆDAOï¼‰ã€‚</p><h3 id="1-2ã€MyBatisç‰¹æ€§"><a href="#1-2ã€MyBatisç‰¹æ€§" class="headerlink" title="1.2ã€MyBatisç‰¹æ€§"></a>1.2ã€MyBatisç‰¹æ€§</h3><ul><li>1ï¼‰ MyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</li><li>2ï¼‰ MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†</li><li>3ï¼‰ MyBatiså¯ä»¥ä½¿ç”¨ç®€å•çš„XMLæˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’ŒJavaçš„POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„Javaå¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•</li><li>4ï¼‰ MyBatis æ˜¯ä¸€ä¸ª åŠè‡ªåŠ¨çš„ORMï¼ˆObject Relation Mappingï¼‰æ¡†æ¶</li></ul><h3 id="1-3ã€MyBatisä¸‹è½½"><a href="#1-3ã€MyBatisä¸‹è½½" class="headerlink" title="1.3ã€MyBatisä¸‹è½½"></a>1.3ã€MyBatisä¸‹è½½</h3><p>MyBatisä¸‹è½½åœ°å€ï¼š<a href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></p><p><img src="/2022/10/28/MyBatisNote/1.png" alt="1"></p><p><img src="/2022/10/28/MyBatisNote/2.png" alt="2"></p><h3 id="1-4ã€å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”"><a href="#1-4ã€å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”" class="headerlink" title="1.4ã€å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”"></a>1.4ã€å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”</h3><ul><li>JDBC<ul><li>SQL å¤¹æ‚åœ¨Javaä»£ç ä¸­è€¦åˆåº¦é«˜ï¼Œå¯¼è‡´ç¡¬ç¼–ç å†…ä¼¤</li><li>ç»´æŠ¤ä¸æ˜“ä¸”å®é™…å¼€å‘éœ€æ±‚ä¸­ SQL æœ‰å˜åŒ–ï¼Œé¢‘ç¹ä¿®æ”¹çš„æƒ…å†µå¤šè§</li><li>ä»£ç å†—é•¿ï¼Œå¼€å‘æ•ˆç‡ä½</li></ul></li><li>Hibernate å’Œ JPA<ul><li>æ“ä½œç®€ä¾¿ï¼Œå¼€å‘æ•ˆç‡é«˜</li><li>ç¨‹åºä¸­çš„é•¿éš¾å¤æ‚ SQL éœ€è¦ç»•è¿‡æ¡†æ¶</li><li>å†…éƒ¨è‡ªåŠ¨ç”Ÿäº§çš„ SQLï¼Œä¸å®¹æ˜“åšç‰¹æ®Šä¼˜åŒ–</li><li>åŸºäºå…¨æ˜ å°„çš„å…¨è‡ªåŠ¨æ¡†æ¶ï¼Œå¤§é‡å­—æ®µçš„ POJO è¿›è¡Œéƒ¨åˆ†æ˜ å°„æ—¶æ¯”è¾ƒå›°éš¾ã€‚</li><li>åå°„æ“ä½œå¤ªå¤šï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™</li></ul></li><li>MyBatis<ul><li>è½»é‡çº§ï¼Œæ€§èƒ½å‡ºè‰²</li><li>SQL å’Œ Java ç¼–ç åˆ†å¼€ï¼ŒåŠŸèƒ½è¾¹ç•Œæ¸…æ™°ã€‚Javaä»£ç ä¸“æ³¨ä¸šåŠ¡ã€SQLè¯­å¥ä¸“æ³¨æ•°æ®</li><li>å¼€å‘æ•ˆç‡ç¨é€ŠäºHIbernateï¼Œä½†æ˜¯å®Œå…¨èƒ½å¤Ÿæ¥å—</li></ul></li></ul><h1 id="2ã€æ­å»ºMyBatis"><a href="#2ã€æ­å»ºMyBatis" class="headerlink" title="2ã€æ­å»ºMyBatis"></a>2ã€æ­å»ºMyBatis</h1><h2 id="2-1ã€å¼€å‘ç¯å¢ƒ"><a href="#2-1ã€å¼€å‘ç¯å¢ƒ" class="headerlink" title="2.1ã€å¼€å‘ç¯å¢ƒ"></a>2.1ã€å¼€å‘ç¯å¢ƒ</h2><p>IDEï¼šidea 2019.2</p><p>æ„å»ºå·¥å…·ï¼šmaven 3.5.4</p><p>MySQLç‰ˆæœ¬ï¼šMySQL 8</p><p>MyBatisç‰ˆæœ¬ï¼šMyBatis 3.5.7</p><blockquote><p>MySQLä¸åŒç‰ˆæœ¬çš„æ³¨æ„äº‹é¡¹</p><p>1ã€é©±åŠ¨ç±»driver-class-name</p><p>MySQL 5ç‰ˆæœ¬ä½¿ç”¨jdbc5é©±åŠ¨ï¼Œé©±åŠ¨ç±»ä½¿ç”¨ï¼šcom.mysql.jdbc.Driver</p><p>MySQL 8ç‰ˆæœ¬ä½¿ç”¨jdbc8é©±åŠ¨ï¼Œé©±åŠ¨ç±»ä½¿ç”¨ï¼šcom.mysql.cj.jdbc.Driver</p><p>2ã€è¿æ¥åœ°å€url</p><p>MySQL 5ç‰ˆæœ¬çš„urlï¼š</p><p>jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm</p><p>MySQL 8ç‰ˆæœ¬çš„urlï¼š</p><p>jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm?serverTimezone&#x3D;UTC</p><p>è¯´æ˜ï¼šjdbc:mysql:&#x2F;&#x2F;ip:ç«¯å£&#x2F;æ•°æ®åº“å?serverTimezone&#x3D;UTC</p><p>å¦åˆ™è¿è¡Œæµ‹è¯•ç”¨ä¾‹æŠ¥å‘Šå¦‚ä¸‹é”™è¯¯ï¼š</p><p>java.sql.SQLException: The server time zone value â€˜Ã–ÃÂ¹ÃºÂ±ÃªÃ—Â¼ÃŠÂ±Â¼Ã¤â€™ is unrecognized or</p><p>represents more</p></blockquote><h2 id="2-2-1ã€åˆ›å»ºmavenå·¥ç¨‹"><a href="#2-2-1ã€åˆ›å»ºmavenå·¥ç¨‹" class="headerlink" title="2.2.1ã€åˆ›å»ºmavenå·¥ç¨‹"></a>2.2.1ã€åˆ›å»ºmavenå·¥ç¨‹</h2><p><strong>â‘ æ‰“åŒ…æ–¹å¼ï¼šjar</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--  æ‰“åŒ…æ–¹å¼  --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>â‘¡å¼•å…¥ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--  å¼•å…¥ä¾èµ–  --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Mybatisæ ¸å¿ƒ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-2-2ã€åˆ›å»ºæ•°æ®åº“è¡¨"><a href="#2-2-2ã€åˆ›å»ºæ•°æ®åº“è¡¨" class="headerlink" title="2.2.2ã€åˆ›å»ºæ•°æ®åº“è¡¨"></a>2.2.2ã€åˆ›å»ºæ•°æ®åº“è¡¨</h2><p><img src="/2022/10/28/MyBatisNote/image-20221114170436586.png" alt="image-20221114170436586"></p><h2 id="2-2-3ã€åˆ›å»ºpojo"><a href="#2-2-3ã€åˆ›å»ºpojo" class="headerlink" title="2.2.3ã€åˆ›å»ºpojo"></a>2.2.3ã€åˆ›å»ºpojo</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.study.mybatis.pojo;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String gender;<br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-comment">//æ„é€ å™¨ã€set&amp;getã€toString...</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-3ã€åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#2-3ã€åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="2.3ã€åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>2.3ã€åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h2><blockquote><p>ä¹ æƒ¯ä¸Šå‘½åä¸ºmybatis-config.xmlï¼Œè¿™ä¸ªæ–‡ä»¶åä»…ä»…åªæ˜¯å»ºè®®ï¼Œå¹¶éå¼ºåˆ¶è¦æ±‚ã€‚</p><p>å°†æ¥æ•´åˆ Spring ä¹‹åï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥çœç•¥ï¼Œæ‰€ä»¥å¤§å®¶æ“ä½œæ—¶å¯ä»¥ç›´æ¥å¤åˆ¶ã€ç²˜è´´ã€‚</p><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸»è¦ç”¨äº <strong>é…ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ</strong> ä»¥åŠ <strong>MyBatis çš„å…¨å±€é…ç½®ä¿¡æ¯</strong></p><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶å­˜æ”¾çš„ä½ç½®æ˜¯src&#x2F;main&#x2F;resourcesç›®å½•ä¸‹</p><p>æ–°å»ºä¸€ä¸ª xmlæ–‡ä»¶ ä½œä¸º MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</p><p> <img src="/2022/10/28/MyBatisNote/image-20221114171700729.png" alt="image-20221114171700729"></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <br><span class="hljs-comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><span class="hljs-comment">&lt;!--å¼•å…¥æ˜ å°„æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--&lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mappers/UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-4ã€åˆ›å»ºmapperæ¥å£"><a href="#2-4ã€åˆ›å»ºmapperæ¥å£" class="headerlink" title="2.4ã€åˆ›å»ºmapperæ¥å£"></a>2.4ã€åˆ›å»ºmapperæ¥å£</h2><ul><li>MyBatisä¸­çš„ mapperæ¥å£ ç›¸å½“äºä»¥å‰çš„ daoã€‚</li><li>ä½†æ˜¯åŒºåˆ«åœ¨äºï¼š<strong>mapperä»…ä»…æ˜¯æ¥å£ï¼Œæˆ‘ä»¬ä¸éœ€è¦æä¾›å®ç°ç±»</strong>ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">insertUser</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-5ã€åˆ›å»ºMyBatisçš„æ˜ å°„æ–‡ä»¶"><a href="#2-5ã€åˆ›å»ºMyBatisçš„æ˜ å°„æ–‡ä»¶" class="headerlink" title="2.5ã€åˆ›å»ºMyBatisçš„æ˜ å°„æ–‡ä»¶"></a>2.5ã€åˆ›å»ºMyBatisçš„æ˜ å°„æ–‡ä»¶</h2><p>ç›¸å…³æ¦‚å¿µï¼š<strong>ORM</strong>ï¼ˆ<strong>O</strong>bject <strong>R</strong>elationship <strong>M</strong>appingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ã€‚</p><ul><li>å¯¹è±¡ï¼šJavaçš„å®ä½“ç±»å¯¹è±¡</li><li>å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“</li><li>æ˜ å°„ï¼šäºŒè€…ä¹‹é—´çš„å¯¹åº”å…³ç³»</li></ul><table><thead><tr><th><strong>Javaæ¦‚å¿µ</strong></th><th><strong>æ•°æ®åº“æ¦‚å¿µ</strong></th></tr></thead><tbody><tr><td>ç±»</td><td>è¡¨</td></tr><tr><td>å±æ€§</td><td>å­—æ®µ&#x2F;åˆ—</td></tr><tr><td>å¯¹è±¡</td><td>è®°å½•&#x2F;è¡Œ</td></tr></tbody></table><ul><li><p>1ã€æ˜ å°„æ–‡ä»¶çš„å‘½åè§„åˆ™ï¼š</p><ul><li><p>è¡¨æ‰€å¯¹åº”çš„ å®ä½“ç±»çš„ç±»å+Mapper.xml</p><ul><li>ä¾‹å¦‚ï¼šè¡¨t_userï¼Œæ˜ å°„çš„å®ä½“ç±»ä¸ºUserï¼Œæ‰€å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ä¸ºUserMapper.xml</li><li>å› æ­¤ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªå®ä½“ç±»ï¼Œå¯¹åº”ä¸€å¼ è¡¨çš„æ“ä½œ</li></ul></li><li><p>MyBatisæ˜ å°„æ–‡ä»¶ç”¨äºç¼–å†™SQLï¼Œè®¿é—®ä»¥åŠæ“ä½œè¡¨ä¸­çš„æ•°æ®</p></li><li><p>MyBatisæ˜ å°„æ–‡ä»¶å­˜æ”¾çš„ä½ç½®æ˜¯src&#x2F;main&#x2F;resources&#x2F;mappersç›®å½•ä¸‹</p></li></ul></li><li><p>2ã€ MyBatisä¸­å¯ä»¥é¢å‘æ¥å£æ“ä½œæ•°æ®ï¼Œè¦ä¿è¯<strong>ä¸¤ä¸ªä¸€è‡´</strong>ï¼š</p><ul><li><p>1ï¼‰mapperæ¥å£çš„å…¨ç±»åå’Œæ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ä¿æŒä¸€è‡´</p></li><li><p>2ï¼‰mapperæ¥å£ä¸­æ–¹æ³•çš„æ–¹æ³•åå’Œæ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™SQLçš„æ ‡ç­¾çš„idå±æ€§ä¿æŒä¸€è‡´</p></li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        mapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶è¦ä¿æŒä¸¤ä¸ªä¸€è‡´ï¼š</span><br><span class="hljs-comment">            1ã€mapperæ¥å£çš„å…¨ç±»åå’Œæ˜ å°„æ–‡ä»¶çš„namespaceä¸€è‡´</span><br><span class="hljs-comment">            2ã€mapperæ¥å£ä¸­çš„æ–¹æ³•çš„æ–¹æ³•åè¦å’Œæ˜ å°„æ–‡ä»¶ä¸­çš„sqlçš„idä¿æŒä¸€è‡´</span><br><span class="hljs-comment">      --&gt;</span><br><br>    <span class="hljs-comment">&lt;!--int insertUser();--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertUser&quot;</span>&gt;</span><br>        insert into t_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;ç”·&#x27;,&#x27;12345@qq.com&#x27;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-6ã€é€šè¿‡junitæµ‹è¯•åŠŸèƒ½"><a href="#2-6ã€é€šè¿‡junitæµ‹è¯•åŠŸèƒ½" class="headerlink" title="2.6ã€é€šè¿‡junitæµ‹è¯•åŠŸèƒ½"></a>2.6ã€é€šè¿‡junitæµ‹è¯•åŠŸèƒ½</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¯»å–MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ (org.apache.ibatis.io)</span><br><span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>);<br><span class="hljs-comment">//åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span><br><span class="hljs-type">SqlSessionFactoryBuilder</span> <span class="hljs-variable">sqlSessionFactoryBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span><br><span class="hljs-title class_">SqlSessionFactoryBuilder</span>();<br><span class="hljs-comment">//é€šè¿‡æ ¸å¿ƒé…ç½®æ–‡ä»¶æ‰€å¯¹åº”çš„å­—èŠ‚è¾“å…¥æµåˆ›å»ºå·¥å‚ç±»SqlSessionFactoryï¼Œç”Ÿäº§SqlSessionå¯¹è±¡</span><br><span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> sqlSessionFactoryBuilder.build(is);<br><span class="hljs-comment">//SqlSessionå¯¹è±¡å¯¹è±¡æ˜¯MyBatisæä¾›çš„æ“ä½œæ•°æ®åº“çš„å¯¹è±¡</span><br><span class="hljs-comment">//åˆ›å»ºSqlSessionå¯¹è±¡ï¼ˆæ— å‚ï¼‰ï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½å¿…é¡»æ‰‹åŠ¨æäº¤æˆ–å›æ»šäº‹åŠ¡</span><br><span class="hljs-comment">//SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="hljs-comment">//åˆ›å»ºSqlSessionå¯¹è±¡ï¼ˆå‚æ•°ä¸ºtrueï¼‰ï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½ä¼šè‡ªåŠ¨æäº¤</span><br><span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession(<span class="hljs-literal">true</span>);<br><span class="hljs-comment">//é€šè¿‡ä»£ç†æ¨¡å¼åˆ›å»ºUserMapperæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡</span><br><span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br><span class="hljs-comment">//int res = sqlSession.insert(&quot;com.study.mybatis.mapper.UserMapper.insertUser&quot;);</span><br><span class="hljs-comment">//è°ƒç”¨UserMapperæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥æ ¹æ®UserMapperçš„å…¨ç±»ååŒ¹é…å…ƒç´ æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨çš„æ–¹æ³•ååŒ¹é…æ˜ å°„æ–‡ä»¶ä¸­çš„SQLæ ‡ç­¾ï¼Œå¹¶æ‰§è¡Œæ ‡ç­¾ä¸­çš„SQLè¯­å¥</span><br><span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.insertUser();<br><span class="hljs-comment">//sqlSession.commit();</span><br>sqlSession.close();<br>System.out.println(<span class="hljs-string">&quot;ç»“æœï¼š&quot;</span>+result);<br></code></pre></td></tr></table></figure><blockquote><ul><li><p>SqlSessionï¼šä»£è¡¨Javaç¨‹åºå’Œ<strong>æ•°æ®åº“</strong>ä¹‹é—´çš„<strong>ä¼šè¯</strong>ã€‚ï¼ˆHttpSessionæ˜¯Javaç¨‹åºå’Œæµè§ˆå™¨ä¹‹é—´çš„ä¼šè¯ï¼‰</p></li><li><p>SqlSessionFactoryï¼šæ˜¯â€œç”Ÿäº§â€SqlSessionçš„â€œå·¥å‚â€ã€‚</p></li><li><p>å·¥å‚æ¨¡å¼ï¼šå¦‚æœåˆ›å»ºæŸä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„è¿‡ç¨‹åŸºæœ¬å›ºå®šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠåˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„</p></li></ul><p>ç›¸å…³ä»£ç å°è£…åˆ°ä¸€ä¸ªâ€œå·¥å‚ç±»â€ä¸­ï¼Œä»¥åéƒ½ä½¿ç”¨è¿™ä¸ªå·¥å‚ç±»æ¥â€œç”Ÿäº§â€æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ã€‚</p></blockquote><h2 id="2-7ã€åŠ å…¥log4jæ—¥å¿—åŠŸèƒ½"><a href="#2-7ã€åŠ å…¥log4jæ—¥å¿—åŠŸèƒ½" class="headerlink" title="2.7ã€åŠ å…¥log4jæ—¥å¿—åŠŸèƒ½"></a>2.7ã€åŠ å…¥log4jæ—¥å¿—åŠŸèƒ½</h2><h3 id="â‘ åŠ å…¥ä¾èµ–"><a href="#â‘ åŠ å…¥ä¾èµ–" class="headerlink" title="â‘ åŠ å…¥ä¾èµ–"></a>â‘ åŠ å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- log4jæ—¥å¿— --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡åŠ å…¥log4jçš„é…ç½®æ–‡ä»¶"><a href="#â‘¡åŠ å…¥log4jçš„é…ç½®æ–‡ä»¶" class="headerlink" title="â‘¡åŠ å…¥log4jçš„é…ç½®æ–‡ä»¶"></a>â‘¡åŠ å…¥log4jçš„é…ç½®æ–‡ä»¶</h3><blockquote><p>log4jçš„é…ç½®æ–‡ä»¶åä¸ºlog4j.xmlï¼Œå­˜æ”¾çš„ä½ç½®æ˜¯src&#x2F;main&#x2F;resourcesç›®å½•ä¸‹</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">log4j</span>:configuration <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;log4j.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">log4j:configuration</span> <span class="hljs-attr">xmlns:log4j</span>=<span class="hljs-string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Encoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">layout</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ConversionPattern&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125;%m (%F:%L) \n&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;java.sql&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">level</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;debug&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;org.apache.ibatis&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">level</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;info&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">root</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">level</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;debug&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">log4j:configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>æ—¥å¿—çš„çº§åˆ«</strong></p><p>FATAL(è‡´å‘½)&gt;ERROR(é”™è¯¯)&gt;WARN(è­¦å‘Š)&gt;INFO(ä¿¡æ¯)&gt;DEBUG(è°ƒè¯•)</p><p>ä»å·¦åˆ°å³æ‰“å°çš„å†…å®¹è¶Šæ¥è¶Šè¯¦ç»†</p></blockquote><h1 id="3ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£"><a href="#3ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="3ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£"></a>3ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</h1><blockquote><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»æŒ‰ç…§å›ºå®šçš„é¡ºåºï¼š</p><p>properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,refl</p><p>ectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?</p></blockquote><ul><li><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">     <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">     <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">         MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»è¦æŒ‰ç…§æŒ‡å®šçš„é¡ºåºé…ç½®ï¼š</span><br><span class="hljs-comment">         properties?,settings?,typeAliases?,typeHandlers?,</span><br><span class="hljs-comment">         objectFactory?,objectWrapperFactory?,reflectorFactory?,</span><br><span class="hljs-comment">         plugins?,environments?,databaseIdProvider?,mappers?</span><br><span class="hljs-comment"> --&gt;</span><br>    <span class="hljs-comment">&lt;!--å¼•å…¥propertiesæ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;jdbc.properties&quot;</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!--è®¾ç½®ç±»å‹åˆ«å--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>         <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">         typeAliasï¼šè®¾ç½®æŸä¸ªç±»å‹çš„åˆ«å</span><br><span class="hljs-comment">         å±æ€§ï¼š</span><br><span class="hljs-comment">         typeï¼šè®¾ç½®éœ€è¦è®¾ç½®åˆ«åçš„ç±»å‹</span><br><span class="hljs-comment">         aliasï¼šè®¾ç½®æŸä¸ªç±»å‹çš„åˆ«åï¼Œè‹¥ä¸è®¾ç½®è¯¥å±æ€§ï¼Œé‚£ä¹ˆè¯¥ç±»å‹æ‹¥æœ‰é»˜è®¤çš„åˆ«åï¼Œå³ç±»åä¸”ä¸åŒºåˆ†å¤§å°å†™</span><br><span class="hljs-comment">         --&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.pojo.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--ä»¥åŒ…ä¸ºå•ä½ï¼Œå°†åŒ…ä¸‹æ‰€æœ‰çš„ç±»å‹è®¾ç½®é»˜è®¤çš„ç±»å‹åˆ«åï¼Œå³ç±»åä¸”ä¸åŒºåˆ†å¤§å°å†™--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.atguigu.mybatis.pojo&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">      environmentsï¼šé…ç½®å¤šä¸ªè¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ</span><br><span class="hljs-comment">      å±æ€§ï¼š</span><br><span class="hljs-comment">       defaultï¼šè®¾ç½®é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒçš„id</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">          environmentï¼šé…ç½®æŸä¸ªå…·ä½“çš„ç¯å¢ƒ</span><br><span class="hljs-comment">          å±æ€§ï¼š</span><br><span class="hljs-comment">           idï¼šè¡¨ç¤ºè¿æ¥æ•°æ®åº“çš„ç¯å¢ƒçš„å”¯ä¸€æ ‡è¯†ï¼Œä¸èƒ½é‡å¤</span><br><span class="hljs-comment">         --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">               transactionManagerï¼šè®¾ç½®äº‹åŠ¡ç®¡ç†æ–¹å¼</span><br><span class="hljs-comment">               å±æ€§ï¼š</span><br><span class="hljs-comment">                type=&quot;JDBC|MANAGED&quot;  (è®¾ç½®äº‹åŠ¡ç®¡ç†çš„æ–¹å¼)</span><br><span class="hljs-comment">                JDBCï¼šè¡¨ç¤ºå½“å‰ç¯å¢ƒä¸­ï¼Œæ‰§è¡ŒSQLæ—¶ï¼Œä½¿ç”¨çš„æ˜¯JDBCä¸­åŸç”Ÿçš„äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œäº‹åŠ¡çš„æäº¤æˆ–å›æ»šéœ€è¦æ‰‹åŠ¨å¤„ç†</span><br><span class="hljs-comment">                MANAGEDï¼šè¢«ç®¡ç†ï¼Œä¾‹å¦‚Spring</span><br><span class="hljs-comment">            --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">                dataSourceï¼šé…ç½®æ•°æ®æº</span><br><span class="hljs-comment">                å±æ€§ï¼š</span><br><span class="hljs-comment">                      typeï¼šè®¾ç½®æ•°æ®æºçš„ç±»å‹</span><br><span class="hljs-comment">                      type=&quot;POOLED|UNPOOLED|JNDI&quot;</span><br><span class="hljs-comment">                         POOLEDï¼šè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ç¼“å­˜æ•°æ®åº“è¿æ¥</span><br><span class="hljs-comment">                         UNPOOLEDï¼šè¡¨ç¤ºä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± </span><br><span class="hljs-comment">                         JNDIï¼šè¡¨ç¤ºä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®æº</span><br><span class="hljs-comment">            --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„é©±åŠ¨--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„è¿æ¥åœ°å€--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„å¯†ç --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span><span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/ssm_study?serverTimezone=UTC&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;lyh123&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å¼•å…¥æ˜ å°„æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">          ä»¥åŒ…ä¸ºå•ä½å¼•å…¥æ˜ å°„æ–‡ä»¶</span><br><span class="hljs-comment">             è¦æ±‚ï¼š</span><br><span class="hljs-comment">             1ã€mapperæ¥å£æ‰€åœ¨çš„åŒ…è¦å’Œæ˜ å°„æ–‡ä»¶æ‰€åœ¨çš„åŒ…ï¼ˆç›®å½•ï¼‰ä¸€è‡´</span><br><span class="hljs-comment">             2ã€mapperæ¥å£è¦å’Œæ˜ å°„æ–‡ä»¶çš„åå­—ä¸€è‡´</span><br><span class="hljs-comment"> --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.atguigu.mybatis.mapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>jdbc.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jdbc.driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">jdbc.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/ssm_study?serverTimezone=UTC</span><br><span class="hljs-attr">jdbc.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-string">lyh123</span><br></code></pre></td></tr></table></figure></li></ul><h1 id="4ã€MyBatisçš„å¢åˆ æ”¹æŸ¥"><a href="#4ã€MyBatisçš„å¢åˆ æ”¹æŸ¥" class="headerlink" title="4ã€MyBatisçš„å¢åˆ æ”¹æŸ¥"></a>4ã€MyBatisçš„å¢åˆ æ”¹æŸ¥</h1><h2 id="4-0ã€SqlSessionUtilå·¥å…·ç±»"><a href="#4-0ã€SqlSessionUtilå·¥å…·ç±»" class="headerlink" title="4.0ã€SqlSessionUtilå·¥å…·ç±»"></a>4.0ã€SqlSessionUtilå·¥å…·ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlSessionUtil</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title function_">getSqlSession</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è·å–æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span><br>            <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>);<br>            <span class="hljs-comment">//è·å–SqlSessionFactoryBuilder</span><br>            <span class="hljs-type">SqlSessionFactoryBuilder</span> <span class="hljs-variable">sqlSessionFactoryBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>();<br>            <span class="hljs-comment">//è·å–SqlSessionFactory</span><br>            <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> sqlSessionFactoryBuilder.build(is);<br>            <span class="hljs-comment">//è·å–sqlSessionå¯¹è±¡</span><br>            sqlSession = sqlSessionFactory.openSession(<span class="hljs-literal">true</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> sqlSession;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-1ã€æ–°å¢"><a href="#4-1ã€æ–°å¢" class="headerlink" title="4.1ã€æ–°å¢"></a>4.1ã€æ–°å¢</h2><ul><li><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int insertUser()--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertUser&quot;</span>&gt;</span><br>insert into t_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;ç”·&#x27;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsert</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>);<br>    <span class="hljs-type">SqlSessionFactoryBuilder</span> <span class="hljs-variable">sqlSessionFactoryBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>();<br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> sqlSessionFactoryBuilder.build(is);<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession(<span class="hljs-literal">true</span>);<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> userMapper.insertUser();<br><span class="hljs-comment">//int res = sqlSession.insert(&quot;com.study.mybatis.mapper.UserMapper.insertUser&quot;);</span><br><span class="hljs-comment">//sqlSession.commit();</span><br>    sqlSession.close();<br>    System.out.println(<span class="hljs-string">&quot;ç»“æ„ï¼š&quot;</span>+res);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-2ã€åˆ é™¤"><a href="#4-2ã€åˆ é™¤" class="headerlink" title="4.2ã€åˆ é™¤"></a>4.2ã€åˆ é™¤</h2><ul><li><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int deleteUser()--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span>&gt;</span><br>delete from t_user where id = 7<br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    userMapper.deleteUser();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-3ã€ä¿®æ”¹"><a href="#4-3ã€ä¿®æ”¹" class="headerlink" title="4.3ã€ä¿®æ”¹"></a>4.3ã€ä¿®æ”¹</h2><ul><li><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int updateUser()--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateUser&quot;</span>&gt;</span><br>update t_user set username=&#x27;ybc&#x27;,password=&#x27;123&#x27; where id = 6<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    userMapper.updateUser();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-4ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"><a href="#4-4ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡" class="headerlink" title="4.4ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"></a>4.4ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡</h2><ul><li><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--User getUserById();--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span><br>select * from t_user where id = 2<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserById</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.getUserById();<br>    System.out.println(user);<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-5ã€æŸ¥è¯¢listé›†åˆ"><a href="#4-5ã€æŸ¥è¯¢listé›†åˆ" class="headerlink" title="4.5ã€æŸ¥è¯¢listé›†åˆ"></a>4.5ã€æŸ¥è¯¢listé›†åˆ</h2><ul><li><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;User&gt; getUserList();--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span><br>select * from t_user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserList</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    List&lt;User&gt; userList = userMapper.getUserList();<br>    <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>        System.out.println(user);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>æ³¨æ„ï¼š</p><p>1ã€æŸ¥è¯¢çš„æ ‡ç­¾selectå¿…é¡»è®¾ç½®å±æ€§resultTypeæˆ–resultMapï¼Œç”¨äºè®¾ç½®å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»</p><p>resultTypeï¼šè‡ªåŠ¨æ˜ å°„ï¼Œç”¨äºå±æ€§åå’Œè¡¨ä¸­å­—æ®µåä¸€è‡´çš„æƒ…å†µ</p><p>resultMapï¼šè‡ªå®šä¹‰æ˜ å°„ï¼Œç”¨äº ä¸€å¯¹å¤šæˆ–å¤šå¯¹ä¸€ æˆ– å­—æ®µåå’Œå±æ€§åä¸ä¸€è‡´ çš„æƒ…å†µ</p></blockquote><h1 id="5ã€MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼"><a href="#5ã€MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="5ã€MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼"></a>5ã€MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼</h1><ul><li><p>MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼ï¼š**${} **å’Œ <strong>#{}</strong></p><ul><li><p>${}çš„æœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œ#{}çš„æœ¬è´¨å°±æ˜¯å ä½ç¬¦èµ‹å€¼ï¼ˆå ä½ç¬¦èµ‹å€¼è¿˜å¯ä»¥é¿å…sqlæ³¨å…¥çš„é—®é¢˜ï¼‰</p></li><li><p>${}ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ‹¼æ¥sqlï¼Œè‹¥ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·ï¼›</p></li><li><p>#{}ä½¿ç”¨å ä½ç¬¦èµ‹å€¼çš„æ–¹å¼æ‹¼æ¥sqlï¼Œè‹¥ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨æ·»åŠ å•å¼•å·</p></li></ul></li></ul><h2 id="5-1ã€å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"><a href="#5-1ã€å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°" class="headerlink" title="5.1ã€å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"></a>5.1ã€å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°</h2><ul><li><p>è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå•ä¸ªçš„å­—é¢é‡ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€åŸºæœ¬æ•°æ®ç±»å‹ã€åŒ…è£…ç±»ï¼‰</p><p>æ­¤æ—¶å¯ä»¥ä½¿ç”¨ <strong>${}</strong> å’Œ <strong>#{}</strong> ä»¥<strong>ä»»æ„çš„åç§°</strong>è·å–å‚æ•°çš„å€¼ï¼Œæ³¨æ„ <strong>${} éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</strong></p></li><li><p>Mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--User getUserByUsername(String username);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserByUsername&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from t_user where username = #&#123;username&#125;<br>    select * from t_user where username = &#x27;$&#123;username&#125;&#x27;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserByUsername</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.getUserByUsername(<span class="hljs-string">&quot;admin&quot;</span>);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-2ã€å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"><a href="#5-2ã€å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°" class="headerlink" title="5.2ã€å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"></a>5.2ã€å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°</h2><ul><li><p>è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå¤šä¸ªæ—¶ï¼Œæ­¤æ—¶MyBatisä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°æ”¾åœ¨ä¸€ä¸ªmapé›†åˆä¸­ï¼Œ</p><ul><li><p>ä»¥arg0,arg1â€¦ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›</p></li><li><p>ä»¥param1,param2â€¦ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›</p></li><li><p>å› æ­¤åªéœ€è¦é€šè¿‡ <strong>${}</strong> å’Œ <strong>#{}</strong> è®¿é—® mapé›†åˆçš„é”® å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„ ${} éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></li></ul></li><li><p>Mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--User checkLogin(String username, String password);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;checkLogin&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from t_user where username = #&#123;param1&#125; and password = #&#123;param2&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCheckLogin</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.checkLogin(<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-3ã€mapé›†åˆç±»å‹çš„å‚æ•°"><a href="#5-3ã€mapé›†åˆç±»å‹çš„å‚æ•°" class="headerlink" title="5.3ã€mapé›†åˆç±»å‹çš„å‚æ•°"></a>5.3ã€mapé›†åˆç±»å‹çš„å‚æ•°</h2><ul><li><p>è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•éœ€è¦çš„å‚æ•°ä¸ºå¤šä¸ªæ—¶ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨åˆ›å»ºmapé›†åˆï¼Œå°†è¿™äº›æ•°æ®æ”¾åœ¨mapä¸­ï¼Œ</p><p>åªéœ€è¦é€šè¿‡ ${} å’Œ #{} è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„ ${} éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></li><li><p>Mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--User checkLoginByMap(Map&lt;String, Object&gt; map);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;checkLoginByMap&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from t_user where username = #&#123;username&#125; and password = #&#123;password&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCheckLoginByMap</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    map.put(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;admin&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.checkLoginByMap(map);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-4ã€å®ä½“ç±»ç±»å‹çš„å‚æ•°ï¼ˆé‡ç‚¹ï¼‰"><a href="#5-4ã€å®ä½“ç±»ç±»å‹çš„å‚æ•°ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="5.4ã€å®ä½“ç±»ç±»å‹çš„å‚æ•°ï¼ˆé‡ç‚¹ï¼‰"></a>5.4ã€å®ä½“ç±»ç±»å‹çš„å‚æ•°ï¼ˆé‡ç‚¹ï¼‰</h2><ul><li><p>è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå®ä½“ç±»å¯¹è±¡æ—¶ï¼Œ</p><p>æ­¤æ—¶å¯ä»¥ä½¿ç”¨ ${} å’Œ #{} ï¼Œé€šè¿‡è®¿é—®å®ä½“ç±»å¯¹è±¡ä¸­çš„<strong>å±æ€§å</strong>è·å–å±æ€§å€¼ï¼Œæ³¨æ„ ${} éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p><p><strong>è¯´æ˜ï¼šå…¶å®æ˜¯é€šè¿‡ get &amp; set æ–¹æ³•è¿›è¡Œæ“ä½œçš„ï¼Œåªè·Ÿ get &amp; set æ–¹æ³•æœ‰å…³</strong></p></li><li><p>Mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int insertUser(User user);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertUser&quot;</span>&gt;</span><br>    insert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;gender&#125;,#&#123;email&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsertUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;root&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>, <span class="hljs-number">33</span>, <span class="hljs-string">&quot;å¥³&quot;</span>, <span class="hljs-string">&quot;123@qq.com&quot;</span>);<br>    mapper.insertUser(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-5ã€ä½¿ç”¨-Paramæ ‡è¯†å‚æ•°-é‡ç‚¹"><a href="#5-5ã€ä½¿ç”¨-Paramæ ‡è¯†å‚æ•°-é‡ç‚¹" class="headerlink" title="5.5ã€ä½¿ç”¨@Paramæ ‡è¯†å‚æ•°(é‡ç‚¹)"></a>5.5ã€ä½¿ç”¨@Paramæ ‡è¯†å‚æ•°(é‡ç‚¹)</h2><ul><li><p>å¯ä»¥é€šè¿‡@Paramæ³¨è§£æ ‡è¯†mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ï¼ˆä¸€ä¸ª&#x2F;å¤šä¸ªå‚æ•°å‡å¯ä½¿ç”¨è¯¥æ–¹æ³•ï¼‰</p></li><li><p>æ­¤æ—¶ï¼Œä¼šå°†è¿™äº›å‚æ•°æ”¾åœ¨mapé›†åˆä¸­ï¼Œä»¥@Paramæ³¨è§£çš„valueå±æ€§å€¼ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›</p></li><li><p>ä»¥ param1, param2â€¦ ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›</p></li><li><p>åªéœ€è¦é€šè¿‡${}å’Œ#{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„${}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></li><li><p>Mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--User checkLoginByParam(@Param(&quot;username&quot;) String username, @Param(&quot;password&quot;) String password);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;checkLoginByParam&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from t_user where username = #&#123;username&#125; and password = #&#123;password&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCheckLoginByParam</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.checkLoginByParam(<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h1 id="6ã€MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½"><a href="#6ã€MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½" class="headerlink" title="6ã€MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½"></a>6ã€MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½</h1><h2 id="6-1ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"><a href="#6-1ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡" class="headerlink" title="6.1ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"></a>6.1ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡</h2><blockquote><p>æ³¨æ„ï¼šå½“æŸ¥è¯¢çš„æ•°æ®ä¸ºå¤šæ¡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å®ä½“ç±»ä½œä¸ºè¿”å›å€¼ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸TooManyResultsExceptionï¼›</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-type">int</span> id)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>select * from t_user where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserById</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SelectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SelectMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.getUserById(<span class="hljs-number">1</span>);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-2ã€æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆ"><a href="#6-2ã€æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆ" class="headerlink" title="6.2ã€æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆ"></a>6.2ã€æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆ</h2><blockquote><p>æ³¨æ„ï¼šè‹¥æŸ¥è¯¢çš„æ•°æ®åªæœ‰ä¸€æ¡ï¼Œå¯ä»¥ä½¿ç”¨å®ä½“ç±»æˆ–é›†åˆä½œä¸ºè¿”å›å€¼</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>List&lt;User&gt; <span class="hljs-title function_">getUserList</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;User&gt; getUserList();--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>select * from t_user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserList</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SelectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SelectMapper.class);<br>    List&lt;User&gt; userList = mapper.getUserList();<br>    <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>        System.out.println(user);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-3ã€æŸ¥è¯¢å•ä¸ªæ•°æ®"><a href="#6-3ã€æŸ¥è¯¢å•ä¸ªæ•°æ®" class="headerlink" title="6.3ã€æŸ¥è¯¢å•ä¸ªæ•°æ®"></a>6.3ã€æŸ¥è¯¢å•ä¸ªæ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æŸ¥è¯¢ç”¨æˆ·çš„æ€»è®°å½•æ•°</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">* åœ¨MyBatisä¸­ï¼Œå¯¹äºJavaä¸­å¸¸ç”¨çš„ç±»å‹éƒ½è®¾ç½®äº†ç±»å‹åˆ«å</span><br><span class="hljs-comment">* ä¾‹å¦‚ï¼š java.lang.Integer--&gt;int|integerï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰</span><br><span class="hljs-comment">* ä¾‹å¦‚ï¼š int--&gt;_int|_integer</span><br><span class="hljs-comment">* ä¾‹å¦‚ï¼š Map--&gt;map, List--&gt;list</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int getCount();--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getCount&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;_integer&quot;</span>&gt;</span><br>select count(id) from t_user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetCount</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SelectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SelectMapper.class);<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> mapper.getCount();<br>    System.out.println(count);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-4ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ"><a href="#6-4ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ" class="headerlink" title="6.4ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ"></a>6.4ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>Map&lt;String, Object&gt; <span class="hljs-title function_">getUserToMap</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-type">int</span> id)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;</span><br><span class="hljs-comment">&lt;!--ç»“æœï¼š &#123;password=123456, sex=ç”· , id=1, age=23, username=admin&#125;--&gt;</span><br><span class="hljs-comment">&lt;!--å¦‚æœæŸä¸ªå­—æ®µä¸ºnullï¼Œåˆ™ä¸ä¼šè¢«æ”¾å…¥åˆ°ç»“æœé›†mapä¸­--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserToMap&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span><br>select * from t_user where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserToMap</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SelectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SelectMapper.class);<br>    Map&lt;String, Object&gt; userToMap = mapper.getUserToMap(<span class="hljs-number">1</span>);<br>    System.out.println(userToMap);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-5ã€æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ"><a href="#6-5ã€æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ" class="headerlink" title="6.5ã€æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ"></a>6.5ã€æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ</h2><h3 id="â‘ æ–¹å¼ä¸€"><a href="#â‘ æ–¹å¼ä¸€" class="headerlink" title="â‘ æ–¹å¼ä¸€ *"></a>â‘ æ–¹å¼ä¸€ *</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›</span><br><span class="hljs-comment">* è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œæ­¤æ—¶å¯ä»¥å°†è¿™äº›mapæ”¾åœ¨ä¸€ä¸ªlisté›†åˆä¸­è·å–</span><br><span class="hljs-comment">*/</span><br>List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">getAllUserToMap</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAllUserToMap&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span><br>select * from t_user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡æ–¹å¼äºŒ"><a href="#â‘¡æ–¹å¼äºŒ" class="headerlink" title="â‘¡æ–¹å¼äºŒ"></a>â‘¡æ–¹å¼äºŒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›</span><br><span class="hljs-comment">* è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œå¹¶ä¸”æœ€ç»ˆè¦ä»¥ä¸€ä¸ªå¤§çš„mapé›†åˆçš„æ–¹å¼è¿”å›æ•°æ®ï¼Œ</span><br><span class="hljs-comment">* æ­¤æ—¶éœ€è¦é€šè¿‡ <span class="hljs-doctag">@MapKey</span>æ³¨è§£ è®¾ç½®mapé›†åˆçš„é”®ï¼Œå€¼æ˜¯æ¯æ¡æ•°æ®æ‰€å¯¹åº”çš„mapé›†åˆ</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@MapKey(&quot;id&quot;)</span><br>Map&lt;String, Object&gt; <span class="hljs-title function_">getAllUserToMap</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    1=&#123;password=123456, sex=ç”·, id=1, age=23, username=admin&#125;,</span><br><span class="hljs-comment">    2=&#123;password=123456, sex=ç”·, id=2, age=23, username=å¼ ä¸‰&#125;,</span><br><span class="hljs-comment">    3=&#123;password=123456, sex=ç”·, id=3, age=23, username=å¼ ä¸‰&#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAllUserToMap&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span><br>select * from t_user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAllUserToMap</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SelectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SelectMapper.class);<br>    <span class="hljs-comment">//List&lt;Map&lt;String, Object&gt;&gt; allUserToMap = mapper.getAllUserToMap();</span><br>    Map&lt;String, Object&gt; allUserToMap = mapper.getAllUserToMap();<br>    System.out.println(allUserToMap);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="7ã€ç‰¹æ®ŠSQLçš„æ‰§è¡Œ"><a href="#7ã€ç‰¹æ®ŠSQLçš„æ‰§è¡Œ" class="headerlink" title="7ã€ç‰¹æ®ŠSQLçš„æ‰§è¡Œ"></a>7ã€ç‰¹æ®ŠSQLçš„æ‰§è¡Œ</h1><h2 id="7-1ã€æ¨¡ç³ŠæŸ¥è¯¢"><a href="#7-1ã€æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="7.1ã€æ¨¡ç³ŠæŸ¥è¯¢"></a>7.1ã€æ¨¡ç³ŠæŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> mohu</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>List&lt;User&gt; <span class="hljs-title function_">testMohu</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;mohu&quot;)</span> String mohu)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;testMohu&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ¨¡ç³ŠæŸ¥è¯¢çš„ä¸‰ç§æ–¹å¼ï¼ˆæ¨èç¬¬ä¸‰ç§æ–¹å¼ï¼‰--&gt;</span><br>    <span class="hljs-comment">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span><br>    <span class="hljs-comment">&lt;!--select * from t_user where username like concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)--&gt;</span><br>select * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUserByLike</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SpecialSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SpecialSQLMapper.class);<br>    List&lt;User&gt; userByLike = mapper.getUserByLike(<span class="hljs-string">&quot;a&quot;</span>);<br>    System.out.println(userByLike);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-2ã€æ‰¹é‡åˆ é™¤"><a href="#7-2ã€æ‰¹é‡åˆ é™¤" class="headerlink" title="7.2ã€æ‰¹é‡åˆ é™¤"></a>7.2ã€æ‰¹é‡åˆ é™¤</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ‰¹é‡åˆ é™¤</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> ids</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">deleteMore</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;ids&quot;)</span> String ids)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int deleteMore(@Param(&quot;ids&quot;) String ids);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteMore&quot;</span>&gt;</span><br>delete from t_user where id in ($&#123;ids&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteMore</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SpecialSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SpecialSQLMapper.class);<br>    mapper.deleteMore(<span class="hljs-string">&quot;7,8&quot;</span>);  <span class="hljs-comment">//åˆ é™¤idä¸º7å’Œ8çš„è®°å½•</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-3ã€åŠ¨æ€è®¾ç½®è¡¨å"><a href="#7-3ã€åŠ¨æ€è®¾ç½®è¡¨å" class="headerlink" title="7.3ã€åŠ¨æ€è®¾ç½®è¡¨å"></a>7.3ã€åŠ¨æ€è®¾ç½®è¡¨å</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* åŠ¨æ€è®¾ç½®è¡¨åï¼ŒæŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯ (æ¯”å¦‚ï¼šæ™®é€šç”¨æˆ·è¡¨/VIPç”¨æˆ·è¡¨)</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> tableName</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>List&lt;User&gt; <span class="hljs-title function_">getAllUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;tableName&quot;)</span> String tableName)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAllUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>select * from $&#123;tableName&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAllUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SpecialSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SpecialSQLMapper.class);<br>    List&lt;User&gt; t_user = mapper.getAllUser(<span class="hljs-string">&quot;t_user&quot;</span>);<br>    t_user.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-4ã€æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®"><a href="#7-4ã€æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®" class="headerlink" title="7.4ã€æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®"></a>7.4ã€æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®</h2><blockquote><p>åœºæ™¯æ¨¡æ‹Ÿï¼š</p><p>t_clazz(clazz_id,clazz_name)</p><p>t_student(student_id,student_name,clazz_id)</p><p>1ã€æ·»åŠ ç­çº§ä¿¡æ¯</p><p>2ã€è·å–æ–°æ·»åŠ çš„ç­çº§çš„id</p><p>3ã€ä¸ºç­çº§åˆ†é…å­¦ç”Ÿï¼Œå³å°†æŸå­¦ç”Ÿçš„ç­çº§idä¿®æ”¹ä¸ºæ–°æ·»åŠ çš„ç­çº§çš„id</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">* useGeneratedKeysï¼šè®¾ç½®ä½¿ç”¨è‡ªå¢çš„ä¸»é”®ï¼Œè¡¨ç¤ºå½“å‰æ·»åŠ åŠŸèƒ½ä½¿ç”¨è‡ªå¢çš„ä¸»é”®</span><br><span class="hljs-comment">* keyPropertyï¼šç”¨æ·»åŠ çš„æ•°æ®çš„è‡ªå¢ä¸»é”®ä¸ºå®ä½“ç±»ç±»å‹çš„å‚æ•°çš„å±æ€§èµ‹å€¼</span><br><span class="hljs-comment">*   å› ä¸ºå¢åˆ æ”¹æœ‰ç»Ÿä¸€çš„è¿”å›å€¼æ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå› æ­¤åªèƒ½å°†è·å–çš„è‡ªå¢çš„ä¸»é”®æ”¾åœ¨ä¼ è¾“çš„å‚æ•°userå¯¹è±¡çš„æŸä¸ªå±æ€§ä¸­</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">insertUser</span><span class="hljs-params">(User user)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--int insertUser(User user);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertUser&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><br>insert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;sex&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsertUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">SpecialSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(SpecialSQLMapper.class);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;xiaoming&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&quot;ç”·&quot;</span>, <span class="hljs-string">&quot;123341@qq,com&quot;</span>);<br>    mapper.insertUser(user);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="8ã€è‡ªå®šä¹‰æ˜ å°„resultMap"><a href="#8ã€è‡ªå®šä¹‰æ˜ å°„resultMap" class="headerlink" title="8ã€è‡ªå®šä¹‰æ˜ å°„resultMap"></a>8ã€è‡ªå®šä¹‰æ˜ å°„resultMap</h1><h2 id="8-0ã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³å‘½åæ–¹å¼ä¸ä¸€è‡´çš„é—®é¢˜"><a href="#8-0ã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³å‘½åæ–¹å¼ä¸ä¸€è‡´çš„é—®é¢˜" class="headerlink" title="8.0ã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³å‘½åæ–¹å¼ä¸ä¸€è‡´çš„é—®é¢˜"></a>8.0ã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³å‘½åæ–¹å¼ä¸ä¸€è‡´çš„é—®é¢˜</h2><ul><li><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>EmpMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Emp getEmpById(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--select emp_id empId,emp_name empName,age,gender from t_emp </span><br><span class="hljs-comment">where emp_id = #&#123;empId&#125;--&gt;</span> <span class="hljs-comment">&lt;!-- åˆ«åæ–¹å¼ä¹Ÿå¯ä»¥ --&gt;</span><br>    select * from t_emp where emp_id = #&#123;empId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><pre><code class="java">@Testpublic void testGetEmpById()&#123;    SqlSession sqlSession = SqlSessionUtil.getSqlSession();    EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);    Emp emp = mapper.getEmpById(1);    System.out.println(emp);&#125;<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">## 8.1ã€resultMapå¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»</span><br><span class="language-xml"></span><br><span class="language-xml">è‹¥å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œåˆ™å¯ä»¥é€šè¿‡resultMapè®¾ç½®è‡ªå®šä¹‰æ˜ å°„</span><br><span class="language-xml"></span><br><span class="language-xml">```xml</span><br><span class="language-xml"><span class="hljs-comment">&lt;!--</span></span><br><span class="hljs-comment"><span class="language-xml">    resultMapï¼šè®¾ç½®è‡ªå®šä¹‰æ˜ å°„</span></span><br><span class="hljs-comment"><span class="language-xml">    å±æ€§ï¼š</span></span><br><span class="hljs-comment"><span class="language-xml">    idï¼šè¡¨ç¤ºè‡ªå®šä¹‰æ˜ å°„çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="hljs-comment"><span class="language-xml">    typeï¼šæŸ¥è¯¢çš„æ•°æ®è¦æ˜ å°„çš„å®ä½“ç±»çš„ç±»å‹</span></span><br><span class="hljs-comment"><span class="language-xml">    å­æ ‡ç­¾ï¼š</span></span><br><span class="hljs-comment"><span class="language-xml">    idï¼šè®¾ç½®ä¸»é”®çš„æ˜ å°„å…³ç³»</span></span><br><span class="hljs-comment"><span class="language-xml">    resultï¼šè®¾ç½®æ™®é€šå­—æ®µçš„æ˜ å°„å…³ç³»</span></span><br><span class="hljs-comment"><span class="language-xml">    associationï¼šè®¾ç½®å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»</span></span><br><span class="hljs-comment"><span class="language-xml">    collectionï¼šè®¾ç½®ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»</span></span><br><span class="hljs-comment"><span class="language-xml">    å±æ€§ï¼š</span></span><br><span class="hljs-comment"><span class="language-xml">    propertyï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­ å®ä½“ç±»ä¸­çš„å±æ€§å</span></span><br><span class="hljs-comment"><span class="language-xml">    columnï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­ è¡¨ä¸­çš„å­—æ®µå</span></span><br><span class="hljs-comment"><span class="language-xml">--&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;empResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!--Emp getEmpById(@Param(&quot;empId&quot;) Integer empId);--&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpById&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;empResultMap&quot;</span>&gt;</span></span><br><span class="language-xml">    select * from t_emp where emp_id = #</span><span class="hljs-template-variable">&#123;empId&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br></code></pre></td></tr></table></figure></code></pre></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpById</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(EmpMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> mapper.getEmpById(<span class="hljs-number">1</span>);<br>    System.out.println(emp);<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è‹¥å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œä½†æ˜¯å­—æ®µåç¬¦åˆæ•°æ®åº“çš„è§„åˆ™ï¼ˆä½¿ç”¨_ï¼‰ï¼Œå®ä½“ç±»ä¸­çš„å±æ€§</p><p>åç¬¦åˆJavaçš„è§„åˆ™ï¼ˆä½¿ç”¨é©¼å³°ï¼‰</p><p>æ­¤æ—¶ä¹Ÿå¯é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¤„ç†å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§çš„æ˜ å°„å…³ç³»</p><p>a&gt;å¯ä»¥é€šè¿‡ä¸ºå­—æ®µèµ·åˆ«åçš„æ–¹å¼ï¼Œä¿è¯å’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¿æŒä¸€è‡´</p><p>b&gt;å¯ä»¥åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªå…¨å±€é…ç½®ä¿¡æ¯mapUnderscoreToCamelCaseï¼Œå¯</p><p>ä»¥åœ¨æŸ¥è¯¢è¡¨ä¸­æ•°æ®æ—¶ï¼Œè‡ªåŠ¨å°†_ç±»å‹çš„å­—æ®µåè½¬æ¢ä¸ºé©¼å³°</p><p>ä¾‹å¦‚ï¼šå­—æ®µåuser_nameï¼Œè®¾ç½®äº†mapUnderscoreToCamelCaseï¼Œæ­¤æ—¶å­—æ®µåå°±ä¼šè½¬æ¢ä¸º</p><p>userName</p></blockquote><h2 id="8-2ã€å¤šå¯¹ä¸€æ˜ å°„å¤„ç†"><a href="#8-2ã€å¤šå¯¹ä¸€æ˜ å°„å¤„ç†" class="headerlink" title="8.2ã€å¤šå¯¹ä¸€æ˜ å°„å¤„ç†"></a>8.2ã€å¤šå¯¹ä¸€æ˜ å°„å¤„ç†</h2><blockquote><p>åœºæ™¯æ¨¡æ‹Ÿï¼š</p><p>æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ä»¥åŠå‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯</p></blockquote><h3 id="8-2-1ã€çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»"><a href="#8-2-1ã€çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»" class="headerlink" title="8.2.1ã€çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»"></a>8.2.1ã€çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;empAndDeptResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept.deptId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept.deptName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><span class="hljs-comment">&lt;!--Emp getEmpAndDeptByEmpId(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpAndDeptByEmpId&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;empAndDeptResultMap&quot;</span>&gt;</span><br>    select t_emp.*,t_dept.*<br>    from t_emp<br>    left join t_dept<br>    on t_emp.dept_id = t_dept.dept_id<br>    where t_emp.emp_id = #&#123;empId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-2-2ã€ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»"><a href="#8-2-2ã€ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»" class="headerlink" title="8.2.2ã€ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»"></a>8.2.2ã€ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»</h3><p><strong>è¯´æ˜ï¼šassociationï¼šå¤„ç†å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»ï¼ˆå¤„ç†å®ä½“ç±»ç±»å‹çš„å±æ€§ï¼‰</strong></p><ul><li>propertyï¼šè®¾ç½®éœ€è¦å¤„ç†æ˜ å°„å…³ç³»çš„å±æ€§çš„å±æ€§å</li><li>javaTypeï¼šè®¾ç½®è¦å¤„ç†å±æ€§çš„ç±»å‹</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;empAndDeptResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;Dept&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--Emp getEmpAndDeptByEmpId(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpAndDeptByEmpId&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;empAndDeptResultMap&quot;</span>&gt;</span><br>    select t_emp.*,t_dept.*<br>    from t_emp<br>    left join t_dept<br>    on t_emp.dept_id = t_dept.dept_id<br>    where t_emp.emp_id = #&#123;empId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-2-3ã€åˆ†æ­¥æŸ¥è¯¢"><a href="#8-2-3ã€åˆ†æ­¥æŸ¥è¯¢" class="headerlink" title="8.2.3ã€åˆ†æ­¥æŸ¥è¯¢"></a>8.2.3ã€åˆ†æ­¥æŸ¥è¯¢</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">association</span> </span><br><span class="hljs-tag"><span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br>propertyï¼šè®¾ç½®éœ€è¦å¤„ç†æ˜ å°„å…³ç³»çš„å±æ€§çš„å±æ€§å<br>selectï¼šè®¾ç½®åˆ†æ­¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æŸä¸ªå±æ€§çš„å€¼çš„sqlçš„æ ‡è¯†ï¼ˆnamespace.sqlIdï¼‰<br>    columnï¼šå°†sqlä»¥åŠæŸ¥è¯¢ç»“æœä¸­çš„æŸä¸ªå­—æ®µè®¾ç½®ä¸ºåˆ†æ­¥æŸ¥è¯¢çš„æ¡ä»¶<br></code></pre></td></tr></table></figure><h4 id="â‘ æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯"><a href="#â‘ æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯" class="headerlink" title="â‘ æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯"></a>â‘ æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</h4><ul><li><p>EmpMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/** EmpMapperæ¥å£</span><br><span class="hljs-comment">* é€šè¿‡åˆ†æ­¥æŸ¥è¯¢æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> empId</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>Emp <span class="hljs-title function_">getEmpAndDeptByStepOne</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;empId&quot;)</span> Integer empId)</span>;<br></code></pre></td></tr></table></figure></li><li><p>EmpMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;empAndDeptByStepResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        selectï¼šè®¾ç½®åˆ†æ­¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æŸä¸ªå±æ€§çš„å€¼çš„sqlçš„æ ‡è¯†ï¼ˆnamespace.sqlIdï¼‰</span><br><span class="hljs-comment">        columnï¼šå°†sqlä»¥åŠæŸ¥è¯¢ç»“æœä¸­çš„æŸä¸ªå­—æ®µè®¾ç½®ä¸ºåˆ†æ­¥æŸ¥è¯¢çš„æ¡ä»¶</span><br><span class="hljs-comment"> --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept&quot;</span></span><br><span class="hljs-tag">                 <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper.DeptMapper</span></span><br><span class="hljs-string"><span class="hljs-tag">                         .getEmpAndDeptByStepTwo&quot;</span></span><br><span class="hljs-tag">                 <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><span class="hljs-comment">&lt;!--Emp getEmpAndDeptByStepOne(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpAndDeptByStepOne&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;empAndDeptByStepResultMap&quot;</span>&gt;</span><br>    select * from t_emp where emp_id = #&#123;empId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="â‘¡æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"><a href="#â‘¡æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯" class="headerlink" title="â‘¡æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"></a>â‘¡æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</h4><ul><li><p>DeptMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/** DeptMapperæ¥å£</span><br><span class="hljs-comment">* åˆ†æ­¥æŸ¥è¯¢çš„ç¬¬äºŒæ­¥ï¼š æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„didæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> deptId</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>Dept <span class="hljs-title function_">getEmpAndDeptByStepTwo</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;<br></code></pre></td></tr></table></figure></li><li><p>DeptMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Dept getEmpAndDeptByStepTwo(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpAndDeptByStepTwo&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Dept&quot;</span>&gt;</span><br>    select * from t_dept where dept_id = #&#123;deptId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpAndDeptByStep</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(EmpMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> mapper.getEmpAndDeptByStepOne(<span class="hljs-number">1</span>);<br>    System.out.println(emp);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-3ã€ä¸€å¯¹å¤šæ˜ å°„å¤„ç†"><a href="#8-3ã€ä¸€å¯¹å¤šæ˜ å°„å¤„ç†" class="headerlink" title="8.3ã€ä¸€å¯¹å¤šæ˜ å°„å¤„ç†"></a>8.3ã€ä¸€å¯¹å¤šæ˜ å°„å¤„ç†</h2><h3 id="8-3-1ã€collection"><a href="#8-3-1ã€collection" class="headerlink" title="8.3.1ã€collection"></a>8.3.1ã€collection</h3><p><strong>è¯´æ˜ï¼šcollectionï¼šå¤„ç†ä¸€å¯¹å¤šæ˜ å°„å…³ç³»ï¼ˆå¤„ç†é›†åˆç±»å‹çš„å±æ€§ï¼‰</strong></p><ul><li><p>DeptMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ ¹æ®éƒ¨é—¨idæŸ¥æ–°éƒ¨é—¨ä»¥åŠéƒ¨é—¨ä¸­çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> deptId</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>Dept <span class="hljs-title function_">getDeptAndEmpByDeptId</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;<br></code></pre></td></tr></table></figure></li><li><p>DeptMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deptAndEmpResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Dept&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">      ofTypeï¼šè®¾ç½®collectionæ ‡ç­¾æ‰€å¤„ç†çš„é›†åˆå±æ€§ä¸­å­˜å‚¨æ•°æ®çš„ç±»å‹</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;emps&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><span class="hljs-comment">&lt;!--Dept getDeptAndEmpByDeptId(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getDeptAndEmpByDeptId&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;deptAndEmpResultMap&quot;</span>&gt;</span><br>    select *<br>    from t_dept<br>    left join t_emp<br>    on t_dept.dept_id = t_emp.dept_id<br>    where t_dept.dept_id = 1<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetDeptAndEmpByDeptId</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DeptMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DeptMapper.class);<br>    <span class="hljs-type">Dept</span> <span class="hljs-variable">dept</span> <span class="hljs-operator">=</span> mapper.getDeptAndEmpByDeptId(<span class="hljs-number">1</span>);<br>    System.out.println(dept);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="8-3-2ã€åˆ†æ­¥æŸ¥è¯¢"><a href="#8-3-2ã€åˆ†æ­¥æŸ¥è¯¢" class="headerlink" title="8.3.2ã€åˆ†æ­¥æŸ¥è¯¢"></a>8.3.2ã€åˆ†æ­¥æŸ¥è¯¢</h3><h3 id="â‘ æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"><a href="#â‘ æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯" class="headerlink" title="â‘ æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"></a>â‘ æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</h3><ul><li><p>DeptMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* åˆ†æ­¥æŸ¥è¯¢éƒ¨é—¨å’Œéƒ¨é—¨ä¸­çš„å‘˜å·¥</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> deptId</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>Dept <span class="hljs-title function_">getDeptAndEmpBySeptOne</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;<br></code></pre></td></tr></table></figure></li><li><p>DeptMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deptAndEmpResultMapByStep&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Dept&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;emps&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper.EmpMapper.getDeptAndEmpByStepTwo&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><span class="hljs-comment">&lt;!--Dept getDeptAndEmpBySeptOne(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getDeptAndEmpBySeptOne&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;deptAndEmpResultMapByStep&quot;</span>&gt;</span><br>    select * from t_dept where dept_id = #&#123;deptId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="â‘¡æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥"><a href="#â‘¡æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥" class="headerlink" title="â‘¡æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥"></a>â‘¡æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥</h3><ul><li><p>EmpMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> deptId</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>List&lt;Emp&gt; <span class="hljs-title function_">getDeptAndEmpByStepTwo</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;<br></code></pre></td></tr></table></figure></li><li><p>EmpMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;Emp&gt; getDeptAndEmpByStepTwo(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getDeptAndEmpByStepTwo&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select * from t_emp where dept_id = #&#123;deptId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetDeptAndEmpByStep</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DeptMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DeptMapper.class);<br>    <span class="hljs-type">Dept</span> <span class="hljs-variable">dept</span> <span class="hljs-operator">=</span> mapper.getDeptAndEmpBySeptOne(<span class="hljs-number">1</span>);<br>    System.out.println(dept);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åˆ†éƒ¨æŸ¥è¯¢â€”â€”å»¶è¿ŸåŠ è½½"><a href="#åˆ†éƒ¨æŸ¥è¯¢â€”â€”å»¶è¿ŸåŠ è½½" class="headerlink" title="* åˆ†éƒ¨æŸ¥è¯¢â€”â€”å»¶è¿ŸåŠ è½½"></a>* åˆ†éƒ¨æŸ¥è¯¢â€”â€”å»¶è¿ŸåŠ è½½</h3><ul><li><p>åˆ†æ­¥æŸ¥è¯¢çš„ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½</p></li><li><p>ä½†æ˜¯å¿…é¡»åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…¨å±€é…ç½®ä¿¡æ¯ï¼š</p><ul><li><strong>lazyLoadingEnabled</strong>ï¼šå»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½</li><li><strong>aggressiveLazyLoading</strong>ï¼šå½“å¼€å¯æ—¶ï¼Œä»»ä½•æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚å¦åˆ™ï¼Œæ¯ä¸ªå±æ€§ä¼šæŒ‰éœ€åŠ è½½</li></ul></li><li><p>æ­¤æ—¶å°±å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ï¼Œè·å–çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œå°±åªä¼šæ‰§è¡Œç›¸åº”çš„sqlã€‚</p></li><li><p>æ­¤æ—¶å¯é€šè¿‡ association å’Œ collection ä¸­çš„ <strong>fetchTypeå±æ€§</strong> è®¾ç½®å½“å‰çš„åˆ†æ­¥æŸ¥è¯¢æ˜¯å¦ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œ <strong>fetchType&#x3D;â€lazy(å»¶è¿ŸåŠ è½½)|eager(ç«‹å³åŠ è½½)â€</strong></p></li><li><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--å¼€å¯å»¶è¿ŸåŠ è½½--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lazyLoadingEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--æŒ‰éœ€åŠ è½½--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;aggressiveLazyLoading&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>EmpMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;empAndDeptByStepResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;emp_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;empName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept&quot;</span> <span class="hljs-attr">fetchType</span>=<span class="hljs-string">&quot;eager&quot;</span></span><br><span class="hljs-tag">                 <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span><br><span class="hljs-tag">                 <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><span class="hljs-comment">&lt;!--Emp getEmpAndDeptByStepOne(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpAndDeptByStepOne&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;empAndDeptByStepResultMap&quot;</span>&gt;</span><br>    select * from t_emp where emp_id = #&#123;empId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpAndDeptByStep</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(EmpMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> mapper.getEmpAndDeptByStepOne(<span class="hljs-number">1</span>);<br>    System.out.println(emp.getEmpName());<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h1 id="9ã€åŠ¨æ€SQL"><a href="#9ã€åŠ¨æ€SQL" class="headerlink" title="9ã€åŠ¨æ€SQL"></a>9ã€åŠ¨æ€SQL</h1><blockquote><p>Mybatisæ¡†æ¶çš„åŠ¨æ€SQLæŠ€æœ¯æ˜¯ä¸€ç§æ ¹æ®ç‰¹å®šæ¡ä»¶åŠ¨æ€æ‹¼è£…SQLè¯­å¥çš„åŠŸèƒ½ï¼Œå®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†</p><p>è§£å†³ æ‹¼æ¥SQLè¯­å¥å­—ç¬¦ä¸²æ—¶çš„ç—›ç‚¹é—®é¢˜ã€‚</p></blockquote><h2 id="9-1ã€if"><a href="#9-1ã€if" class="headerlink" title="9.1ã€if"></a>9.1ã€if</h2><ul><li>ifæ ‡ç­¾å¯é€šè¿‡testå±æ€§çš„è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­<ul><li>è‹¥è¡¨è¾¾å¼çš„ç»“æœä¸ºtrueï¼Œåˆ™æ ‡ç­¾ä¸­çš„å†…å®¹ä¼šæ‰§è¡Œï¼›</li><li>è‹¥è¡¨è¾¾å¼çš„ç»“æœä¸ºfalseï¼Œåˆ™æ ‡ç­¾ä¸­çš„å†…å®¹ä¸ä¼šæ‰§è¡Œ</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpByCondition&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select * from t_emp where 1=1<br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span><br>        and emp_name = #&#123;empName&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span><br>        and age = #&#123;age&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span><br>        and gender = #&#123;gender&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpByCondition</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DynamicSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;&quot;</span>);<br>    List&lt;Emp&gt; list = mapper.getEmpByCondition(emp);<br>    <span class="hljs-keyword">for</span> (Emp emp1 : list) &#123;<br>        System.out.println(emp1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-2ã€where"><a href="#9-2ã€where" class="headerlink" title="9.2ã€where"></a>9.2ã€where</h2><ul><li><p>where</p><ul><li><p>è‹¥ where æ ‡ç­¾ä¸­æœ‰æ¡ä»¶æˆç«‹ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆ where å…³é”®å­—</p><p>å¹¶ä¸” ä¼šè‡ªåŠ¨å°† where æ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢å¤šä½™çš„ and å»æ‰</p></li><li><p>è‹¥ where æ ‡ç­¾ä¸­æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ¡ä»¶æˆç«‹ï¼Œåˆ™ where æ²¡æœ‰ä»»ä½•åŠŸèƒ½ï¼ˆä¸ä¼šåŠ ä¸Š where å…³é”®å­—ï¼‰</p></li><li><p>æ³¨æ„ï¼šwhereæ ‡ç­¾ä¸èƒ½å»æ‰æ¡ä»¶æœ€åå¤šä½™çš„and</p></li></ul></li><li><p>whereå’Œifä¸€èˆ¬ç»“åˆä½¿ç”¨</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpByCondition&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select * from t_emp<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span><br>            emp_name = #&#123;empName&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span><br>            and age = #&#123;age&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span><br>            and gender = #&#123;gender&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpByCondition</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DynamicSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;&quot;</span>);<br>    List&lt;Emp&gt; list = mapper.getEmpByCondition(emp);<br>    <span class="hljs-keyword">for</span> (Emp emp1 : list) &#123;<br>        System.out.println(emp1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-3ã€trim"><a href="#9-3ã€trim" class="headerlink" title="9.3ã€trim"></a>9.3ã€trim</h2><ul><li><p>trimç”¨äºå»æ‰æˆ–æ·»åŠ æ ‡ç­¾ä¸­çš„å†…å®¹</p><p>å¸¸ç”¨å±æ€§ï¼š</p><ul><li><p>prefixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„<strong>å‰é¢æ·»åŠ </strong>æŸäº›å†…å®¹</p></li><li><p>prefixOverridesï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„<strong>å‰é¢å»æ‰</strong>æŸäº›å†…å®¹</p></li><li><p>suffixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„<strong>åé¢æ·»åŠ </strong>æŸäº›å†…å®¹</p></li><li><p>suffixOverridesï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„<strong>åé¢å»æ‰</strong>æŸäº›å†…å®¹</p></li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpByCondition&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select * from t_emp<br>    <span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;where&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;and&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span><br>            emp_name = #&#123;empName&#125; and<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span><br>            age = #&#123;age&#125; and<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span><br>            gender = #&#123;gender&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpByCondition</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DynamicSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;&quot;</span>);<br>    List&lt;Emp&gt; list = mapper.getEmpByCondition(emp);<br>    <span class="hljs-keyword">for</span> (Emp emp1 : list) &#123;<br>        System.out.println(emp1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-4ã€chooseã€whenã€otherwise"><a href="#9-4ã€chooseã€whenã€otherwise" class="headerlink" title="9.4ã€chooseã€whenã€otherwise"></a>9.4ã€chooseã€whenã€otherwise</h2><ul><li>chooseã€whenã€ otherwiseç›¸å½“äºifâ€¦else if..else</li><li>è‹¥æŸä¸€ä¸ªæ¡ä»¶ä¸º trueï¼Œåˆ™åé¢çš„æ¡ä»¶ä¸ä¼šå†åˆ¤æ–­</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--List&lt;Emp&gt; getEmpByChoose(Emp emp);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpByChoose&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select * from t_emp<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span><br>                emp_name = #&#123;empName&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span><br>                age = #&#123;age&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span><br>                gender = #&#123;gender&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpByChoose</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DynamicSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;&quot;</span>);<br>    List&lt;Emp&gt; list = mapper.getEmpByChoose(emp);<br>    <span class="hljs-keyword">for</span> (Emp emp1 : list) &#123;<br>        System.out.println(emp1);<br>    &#125;<br>    <span class="hljs-comment">/* select * from t_emp WHERE emp_name = ? */</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-5ã€foreachï¼ˆé‡ç‚¹ï¼‰"><a href="#9-5ã€foreachï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="9.5ã€foreachï¼ˆé‡ç‚¹ï¼‰"></a>9.5ã€foreachï¼ˆé‡ç‚¹ï¼‰</h2><ul><li>foreach<ul><li>collectionï¼šè®¾ç½®è¦å¾ªç¯çš„æ•°ç»„æˆ–é›†åˆ</li><li>itemï¼šç”¨ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºæ•°ç»„æˆ–é›†åˆä¸­çš„æ¯ä¸€ä¸ªæ•°æ®</li><li>separatorï¼šè®¾ç½®æ¯æ¬¡å¾ªç¯çš„æ•°æ®ä¹‹é—´çš„åˆ†éš”ç¬¦</li><li>openï¼šå¾ªç¯çš„æ‰€æœ‰å†…å®¹ä»¥ä»€ä¹ˆå¼€å§‹</li><li>closeï¼šå¾ªç¯çš„æ‰€æœ‰å†…å®¹ä»¥ä»€ä¹ˆç»“æŸ</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ‰¹é‡æ·»åŠ å‘˜å·¥ä¿¡æ¯--&gt;</span><br><span class="hljs-comment">&lt;!--void insertMoreEmp(@Param(&quot;emps&quot;) List&lt;Emp&gt; emps);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertMoreEmp&quot;</span>&gt;</span><br>    insert into t_emp values<br>    <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;emps&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;emp&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span><br>        (null,#&#123;emp.empName&#125;,#&#123;emp.age&#125;,#&#123;emp.gender&#125;,null)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--æ‰¹é‡åˆ é™¤--&gt;</span><br><span class="hljs-comment">&lt;!--void deleteMoreEmp(@Param(&quot;empIds&quot;) Integer[] empIds);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteMoreEmp&quot;</span>&gt;</span><br>    delete from t_emp where<br>    <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;empIds&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;empId&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;or&quot;</span>&gt;</span><br>        emp_id = #&#123;empId&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--æ‰¹é‡åˆ é™¤--&gt;</span><br><span class="hljs-comment">&lt;!--void deleteMoreEmp(@Param(&quot;empIds&quot;) Integer[] empIds);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteMoreEmp&quot;</span>&gt;</span><br>    delete from t_emp where emp_id in<br>    <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;empIds&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;empId&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span>&gt;</span><br>        #&#123;empId&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsertMoreEmp</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DynamicSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;å°æ˜1&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;å°æ˜2&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;å°æ˜3&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;ç”·&quot;</span>);<br>    List&lt;Emp&gt; list = Arrays.asList(emp1, emp2, emp3);<br>    mapper.insertMoreEmp(list);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteMoreEmp</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">DynamicSQLMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);<br>    Integer[] empIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[]&#123;<span class="hljs-number">6</span>,<span class="hljs-number">7</span>&#125;;<br>    mapper.deleteMoreEmp(empIds);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-6ã€SQLç‰‡æ®µ"><a href="#9-6ã€SQLç‰‡æ®µ" class="headerlink" title="9.6ã€SQLç‰‡æ®µ"></a>9.6ã€SQLç‰‡æ®µ</h2><blockquote><p>sqlç‰‡æ®µï¼Œå¯ä»¥è®°å½•ä¸€æ®µå…¬å…±sqlç‰‡æ®µï¼Œåœ¨ä½¿ç”¨çš„åœ°æ–¹é€šè¿‡ include æ ‡ç­¾è¿›è¡Œå¼•å…¥</p><p>åœ¨mapper.xmlæ–‡ä»¶å‰é¢è®¾ç½®ä¸€æ¬¡ä¹‹åï¼Œåé¢å¯ä»¥ç›´æ¥é‡å¤ä½¿ç”¨</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;empColumns&quot;</span>&gt;</span><br>    eid,ename,age,sex,did<br><span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAllEmp&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;empColumns&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span> from t_emp<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="10ã€MyBatisçš„ç¼“å­˜"><a href="#10ã€MyBatisçš„ç¼“å­˜" class="headerlink" title="10ã€MyBatisçš„ç¼“å­˜"></a>10ã€MyBatisçš„ç¼“å­˜</h1><h2 id="10-1ã€MyBatisçš„ä¸€çº§ç¼“å­˜"><a href="#10-1ã€MyBatisçš„ä¸€çº§ç¼“å­˜" class="headerlink" title="10.1ã€MyBatisçš„ä¸€çº§ç¼“å­˜"></a>10.1ã€MyBatisçš„ä¸€çº§ç¼“å­˜</h2><ul><li><p><strong>ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„</strong>ï¼Œé€šè¿‡<strong>åŒä¸€ä¸ªSqlSession</strong>æŸ¥è¯¢çš„æ•°æ®ä¼šè¢«ç¼“å­˜ï¼Œ</p><p>å†æ¬¡ä½¿ç”¨<strong>åŒä¸€ä¸ªSqlSession</strong>æŸ¥è¯¢<strong>ç›¸åŒçš„æ•°æ®</strong>æ—¶ï¼Œå°±ä¼šä»ç¼“å­˜ä¸­ç›´æ¥è·å–ï¼Œè€Œä¸ä¼šä»æ•°æ®åº“é‡æ–°è®¿é—®</p></li><li><p>ä½¿ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µï¼š</p><ul><li><ol><li>ä¸åŒçš„SqlSessionå¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜</li></ol></li><li><ol start="2"><li>åŒä¸€ä¸ªSqlSessionä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ</li></ol></li><li><ol start="3"><li>åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œ</li></ol></li><li><ol start="4"><li>åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜</li></ol></li></ul></li><li><p>CacheMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Emp getEmpById(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>    select  * from t_emp where emp_id = #&#123;empId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--void insertEmp(Emp emp);--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertEmp&quot;</span>&gt;</span><br>    insert into t_emp values (null,#&#123;empName&#125;,#&#123;age&#125;,#&#123;gender&#125;,null)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetEmpById</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession1</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">CacheMapper</span> <span class="hljs-variable">mapper1</span> <span class="hljs-operator">=</span> sqlSession1.getMapper(CacheMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp1</span> <span class="hljs-operator">=</span> mapper1.getEmpById(<span class="hljs-number">1</span>);<br>    System.out.println(emp1);<br>    <span class="hljs-comment">//mapper1.insertEmp(new Emp(null,&quot;å°çº¢&quot;,25,&quot;ç”·&quot;));</span><br>    <span class="hljs-comment">//sqlSession1.clearCache();</span><br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp2</span> <span class="hljs-operator">=</span> mapper1.getEmpById(<span class="hljs-number">1</span>);<br>    System.out.println(emp2);<br><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession2</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">CacheMapper</span> <span class="hljs-variable">mapper2</span> <span class="hljs-operator">=</span> sqlSession2.getMapper(CacheMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp3</span> <span class="hljs-operator">=</span> mapper2.getEmpById(<span class="hljs-number">1</span>);<br>    System.out.println(emp3);<br><br>    <span class="hljs-comment">/*  DEBUG 11-17 23:59:57,220==&gt;  Preparing: select * from t_emp where emp_id = ? (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">        DEBUG 11-17 23:59:57,275==&gt; Parameters: 1(Integer) (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">        DEBUG 11-17 23:59:57,327&lt;==      Total: 1 (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">        Emp&#123;empId=1, empName=&#x27;å¼ ä¸‰&#x27;, age=20, gender=&#x27;ç”·&#x27;&#125;</span><br><span class="hljs-comment">        Emp&#123;empId=1, empName=&#x27;å¼ ä¸‰&#x27;, age=20, gender=&#x27;ç”·&#x27;&#125;</span><br><span class="hljs-comment">        DEBUG 11-17 23:59:57,389==&gt;  Preparing: select * from t_emp where emp_id = ? (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">        DEBUG 11-17 23:59:57,390==&gt; Parameters: 1(Integer) (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">        DEBUG 11-17 23:59:57,393&lt;==      Total: 1 (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">        Emp&#123;empId=1, empName=&#x27;å¼ ä¸‰&#x27;, age=20, gender=&#x27;ç”·&#x27;&#125;</span><br><span class="hljs-comment">    */</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-2ã€MyBatisçš„äºŒçº§ç¼“å­˜"><a href="#10-2ã€MyBatisçš„äºŒçº§ç¼“å­˜" class="headerlink" title="10.2ã€MyBatisçš„äºŒçº§ç¼“å­˜"></a>10.2ã€MyBatisçš„äºŒçº§ç¼“å­˜</h2><ul><li><p>äºŒçº§ç¼“å­˜æ˜¯<strong>SqlSessionFactoryçº§åˆ«</strong>ï¼Œé€šè¿‡<strong>åŒä¸€ä¸ªSqlSessionFactoryåˆ›å»ºçš„SqlSession</strong>æŸ¥è¯¢çš„ç»“æœä¼šè¢«ç¼“å­˜</p><p>æ­¤åè‹¥å†æ¬¡æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢è¯­å¥ï¼Œç»“æœå°±ä¼šä»ç¼“å­˜ä¸­è·å–</p></li><li><p>äºŒçº§ç¼“å­˜å¼€å¯çš„æ¡ä»¶ï¼š</p><ul><li><p>a &gt;  åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å…¨å±€é…ç½®å±æ€§cacheEnabled&#x3D;â€trueâ€ï¼ˆé»˜è®¤ä¸ºtrueï¼Œä¸éœ€è¦è®¾ç½®ï¼‰</p></li><li><p>b &gt;  åœ¨æ˜ å°„æ–‡ä»¶ä¸­è®¾ç½®æ ‡ç­¾ &lt;cache&#x2F;&gt;</p></li><li><p>c &gt;  äºŒçº§ç¼“å­˜å¿…é¡»åœ¨ SqlSession å…³é—­æˆ–æäº¤ä¹‹åæœ‰æ•ˆ</p></li><li><p>d &gt;  æŸ¥è¯¢çš„æ•°æ®æ‰€è½¬æ¢çš„å®ä½“ç±»ç±»å‹å¿…é¡»å®ç°åºåˆ—åŒ–çš„æ¥å£ï¼ˆSerializableï¼‰</p></li></ul></li><li><p>ä½¿äºŒçº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</p><p><strong>ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†ä»»æ„çš„å¢åˆ æ”¹ï¼Œä¼šä½¿ä¸€çº§å’ŒäºŒçº§ç¼“å­˜åŒæ—¶å¤±æ•ˆ</strong></p></li><li><p>pojoå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Emp</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;  <span class="hljs-comment">//å®ç°åºåˆ—åŒ–çš„æ¥å£</span><br>    <span class="hljs-keyword">private</span> Integer empId;<br>    <span class="hljs-keyword">private</span> String empName;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String gender;<br>    <span class="hljs-comment">//... ...</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper.CacheMapper&quot;</span>&gt;</span><br>    <br><span class="hljs-comment">&lt;!-- åœ¨æ˜ å°„æ–‡ä»¶ä¸­è®¾ç½®æ ‡ç­¾ &lt;cache/&gt; --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span> /&gt;</span><br><br>    <span class="hljs-comment">&lt;!--Emp getEmpById(@Param(&quot;empId&quot;) Integer empId);--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getEmpById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Emp&quot;</span>&gt;</span><br>        select  * from t_emp where emp_id = #&#123;empId&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--void insertEmp(Emp emp);--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertEmp&quot;</span>&gt;</span><br>        insert into t_emp values (null,#&#123;empName&#125;,#&#123;age&#125;,#&#123;gender&#125;,null)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCache</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>);<br>    <span class="hljs-type">SqlSessionFactoryBuilder</span> <span class="hljs-variable">sqlSessionFactoryBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>();<br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> sqlSessionFactoryBuilder.build(is);<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession1</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession(<span class="hljs-literal">true</span>);<br>    <span class="hljs-type">CacheMapper</span> <span class="hljs-variable">mapper1</span> <span class="hljs-operator">=</span> sqlSession1.getMapper(CacheMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp1</span> <span class="hljs-operator">=</span> mapper1.getEmpById(<span class="hljs-number">1</span>);<br>    System.out.println(emp1);<br>    sqlSession1.close();<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession2</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession(<span class="hljs-literal">true</span>);<br>    <span class="hljs-type">CacheMapper</span> <span class="hljs-variable">mapper2</span> <span class="hljs-operator">=</span> sqlSession2.getMapper(CacheMapper.class);<br>    <span class="hljs-type">Emp</span> <span class="hljs-variable">emp2</span> <span class="hljs-operator">=</span> mapper2.getEmpById(<span class="hljs-number">1</span>);<br>    System.out.println(emp2);<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    DEBUG 11-18 11:40:15,065Cache Hit Ratio [com.study.mybatis.mapper.CacheMapper]: 0.0 (LoggingCache.java:60)</span><br><span class="hljs-comment">    DEBUG 11-18 11:40:15,253==&gt;  Preparing: select * from t_emp where emp_id = ? (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">    DEBUG 11-18 11:40:15,279==&gt; Parameters: 1(Integer) (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">    DEBUG 11-18 11:40:15,305&lt;==      Total: 1 (BaseJdbcLogger.java:137)</span><br><span class="hljs-comment">    Emp&#123;empId=1, empName=&#x27;å¼ ä¸‰&#x27;, age=20, gender=&#x27;ç”·&#x27;&#125;</span><br><span class="hljs-comment">    WARN  11-18 11:40:15,311As you are using functionality that deserializes object streams, it is recommended to define the JEP-290 serial filter. Please refer to https://docs.oracle.com/pls/topic/lookup?ctx=javase15&amp;id=GUID-8296D8E8-2B93-4B9A-856E-0A65AF9B8C66 (SerialFilterChecker.java:45)</span><br><span class="hljs-comment">    DEBUG 11-18 11:40:15,315Cache Hit Ratio [com.study.mybatis.mapper.CacheMapper]: 0.5 (LoggingCache.java:60)</span><br><span class="hljs-comment">    Emp&#123;empId=1, empName=&#x27;å¼ ä¸‰&#x27;, age=20, gender=&#x27;ç”·&#x27;&#125;</span><br><span class="hljs-comment">    */</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-3ã€äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®"><a href="#10-3ã€äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®" class="headerlink" title="10.3ã€äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®"></a>10.3ã€äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®</h2><p>è¯´æ˜ï¼šä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤è®¾ç½®å³å¯</p><ul><li>åœ¨mapperé…ç½®æ–‡ä»¶ä¸­æ·»åŠ çš„cacheæ ‡ç­¾å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§ï¼š<ul><li>â‘ evictionå±æ€§ï¼šç¼“å­˜å›æ”¶ç­–ç•¥ï¼Œé»˜è®¤çš„æ˜¯ LRUã€‚<ul><li>LRUï¼ˆLeast Recently Usedï¼‰ â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚</li><li>FIFOï¼ˆFirst in First outï¼‰ â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</li><li>SOFT â€“ è½¯å¼•ç”¨ï¼šç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</li><li>WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</li></ul></li><li>â‘¡flushIntervalå±æ€§ï¼šåˆ·æ–°é—´éš”ï¼Œå•ä½æ¯«ç§’<ul><li>é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°</li></ul></li><li>â‘¢sizeå±æ€§ï¼šå¼•ç”¨æ•°ç›®ï¼Œæ­£æ•´æ•°<ul><li>ä»£è¡¨ç¼“å­˜æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘ä¸ªå¯¹è±¡ï¼Œå¤ªå¤§å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º</li></ul></li><li>â‘£readOnlyå±æ€§ï¼šåªè¯»ï¼Œ true&#x2F;false<ul><li>trueï¼šåªè¯»ç¼“å­˜ï¼›ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„<strong>ç›¸åŒå®ä¾‹</strong>ã€‚å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚æœ‰æ€§èƒ½ä¼˜åŠ¿</li><li>falseï¼šè¯»å†™ç¼“å­˜ï¼›ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„<strong>æ‹·è´</strong>ï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œé»˜è®¤æ˜¯falseã€‚</li></ul></li></ul></li></ul><h2 id="10-4ã€MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº"><a href="#10-4ã€MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº" class="headerlink" title="10.4ã€MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº"></a>10.4ã€MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº</h2><ul><li>å…ˆæŸ¥è¯¢äºŒçº§ç¼“å­˜ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜ä¸­å¯èƒ½ä¼šæœ‰å…¶ä»–ç¨‹åºå·²ç»æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚</li><li>å¦‚æœäºŒçº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå†æŸ¥è¯¢ä¸€çº§ç¼“å­˜</li><li>å¦‚æœä¸€çº§ç¼“å­˜ä¹Ÿæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“</li><li>SqlSessionå…³é—­ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ä¼šå†™å…¥äºŒçº§ç¼“å­˜</li><li>è¯´æ˜ï¼šäºŒçº§ç¼“å­˜ä¸­ä¸ä¸€å®šæœ‰ä¸€çº§ç¼“å­˜çš„æ•°æ®ï¼Œå› ä¸ºä¸€çº§ç¼“å­˜åªæœ‰åœ¨SqlSessionæäº¤æˆ–å…³é—­æ—¶æ‰ä¼šæŠŠæ•°æ®ä¿å­˜åˆ°äºŒçº§ç¼“å­˜</li></ul><h2 id="10-5ã€æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜EHCache"><a href="#10-5ã€æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜EHCache" class="headerlink" title="10.5ã€æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜EHCache"></a>10.5ã€æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜EHCache</h2><p>è¯´æ˜ï¼šç¬¬ä¸‰æ–¹ç¼“å­˜ä»…ä½œç”¨äºäºŒçº§ç¼“å­˜</p><h3 id="10-5-1ã€æ·»åŠ ä¾èµ–"><a href="#10-5-1ã€æ·»åŠ ä¾èµ–" class="headerlink" title="10.5.1ã€æ·»åŠ ä¾èµ–"></a>10.5.1ã€æ·»åŠ ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Mybatis EHCacheæ•´åˆåŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.caches<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- slf4jæ—¥å¿—é—¨é¢çš„ä¸€ä¸ªå…·ä½“å®ç° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-5-2ã€å„jaråŒ…åŠŸèƒ½"><a href="#10-5-2ã€å„jaråŒ…åŠŸèƒ½" class="headerlink" title="10.5.2ã€å„jaråŒ…åŠŸèƒ½"></a>10.5.2ã€å„jaråŒ…åŠŸèƒ½</h3><table><thead><tr><th><strong>jaråŒ…åç§°</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td>mybatis-ehcache</td><td>Mybatiså’ŒEHCacheçš„æ•´åˆåŒ…</td></tr><tr><td>ehcache</td><td>EHCacheæ ¸å¿ƒåŒ…</td></tr><tr><td>slf4j-api</td><td>SLF4Jæ—¥å¿—é—¨é¢åŒ…</td></tr><tr><td>logback-classic</td><td>æ”¯æŒSLF4Jé—¨é¢æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°</td></tr></tbody></table><h3 id="10-5-3ã€åˆ›å»ºEHCacheçš„é…ç½®æ–‡ä»¶ehcache-xml"><a href="#10-5-3ã€åˆ›å»ºEHCacheçš„é…ç½®æ–‡ä»¶ehcache-xml" class="headerlink" title="10.5.3ã€åˆ›å»ºEHCacheçš„é…ç½®æ–‡ä»¶ehcache.xml"></a>10.5.3ã€åˆ›å»ºEHCacheçš„é…ç½®æ–‡ä»¶ehcache.xml</h3><p>è¯´æ˜ï¼šé…ç½®æ–‡ä»¶åå›ºå®šä¸º ehcache.xmlï¼Œæ”¾åœ¨ resources ç›®å½•ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span> ?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ehcache</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:noNamespaceSchemaLocation</span>=<span class="hljs-string">&quot;../config/ehcache.xsd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ç£ç›˜ä¿å­˜è·¯å¾„ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">diskStore</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;D:\atguigu\ehcache&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">defaultCache</span></span><br><span class="hljs-tag">        <span class="hljs-attr">maxElementsInMemory</span>=<span class="hljs-string">&quot;1000&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">maxElementsOnDisk</span>=<span class="hljs-string">&quot;10000000&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">eternal</span>=<span class="hljs-string">&quot;false&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">overflowToDisk</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">timeToIdleSeconds</span>=<span class="hljs-string">&quot;120&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">timeToLiveSeconds</span>=<span class="hljs-string">&quot;120&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">diskExpiryThreadIntervalSeconds</span>=<span class="hljs-string">&quot;120&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">memoryStoreEvictionPolicy</span>=<span class="hljs-string">&quot;LRU&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">defaultCache</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ehcache</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-5-4ã€è®¾ç½®äºŒçº§ç¼“å­˜çš„ç±»å‹"><a href="#10-5-4ã€è®¾ç½®äºŒçº§ç¼“å­˜çš„ç±»å‹" class="headerlink" title="10.5.4ã€è®¾ç½®äºŒçº§ç¼“å­˜çš„ç±»å‹"></a>10.5.4ã€è®¾ç½®äºŒçº§ç¼“å­˜çš„ç±»å‹</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-5-5ã€åŠ å…¥logbackæ—¥å¿—"><a href="#10-5-5ã€åŠ å…¥logbackæ—¥å¿—" class="headerlink" title="10.5.5ã€åŠ å…¥logbackæ—¥å¿—"></a>10.5.5ã€åŠ å…¥logbackæ—¥å¿—</h3><blockquote><p>å­˜åœ¨SLF4Jæ—¶ï¼Œä½œä¸ºç®€æ˜“æ—¥å¿—çš„log4jå°†å¤±æ•ˆï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å€ŸåŠ©SLF4Jçš„å…·ä½“å®ç°logbackæ¥æ‰“å°æ—¥å¿—ã€‚ </p><p>åˆ›å»ºlogbackçš„é…ç½®æ–‡ä»¶ logback.xml</p><p>è¯´æ˜ï¼šé…ç½®æ–‡ä»¶åå›ºå®šä¸º logback.xmlï¼Œæ”¾åœ¨ resources ç›®å½•ä¸‹</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span> <span class="hljs-attr">debug</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ä½ç½® --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- æ—¥å¿—è¾“å‡ºçš„æ ¼å¼ --&gt;</span><br>            <span class="hljs-comment">&lt;!-- æŒ‰ç…§é¡ºåºåˆ†åˆ«æ˜¯ï¼š æ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€çº¿ç¨‹åç§°ã€æ‰“å°æ—¥å¿—çš„ç±»ã€æ—¥å¿—ä¸»ä½“å†…å®¹ã€æ¢è¡Œ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger][%msg]%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è®¾ç½®å…¨å±€æ—¥å¿—çº§åˆ«ã€‚æ—¥å¿—çº§åˆ«æŒ‰é¡ºåºåˆ†åˆ«æ˜¯ï¼š DEBUGã€INFOã€WARNã€ERROR --&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®šä»»ä½•ä¸€ä¸ªæ—¥å¿—çº§åˆ«éƒ½åªæ‰“å°å½“å‰çº§åˆ«å’Œåé¢çº§åˆ«çš„æ—¥å¿—ã€‚ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;DEBUG&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‡å®šæ‰“å°æ—¥å¿—çš„appenderï¼Œè¿™é‡Œé€šè¿‡â€œSTDOUTâ€å¼•ç”¨äº†å‰é¢é…ç½®çš„appender --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ ¹æ®ç‰¹æ®Šéœ€æ±‚æŒ‡å®šå±€éƒ¨æ—¥å¿—çº§åˆ« --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;DEBUG&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-5-6ã€EHCacheé…ç½®æ–‡ä»¶è¯´æ˜"><a href="#10-5-6ã€EHCacheé…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="10.5.6ã€EHCacheé…ç½®æ–‡ä»¶è¯´æ˜"></a>10.5.6ã€EHCacheé…ç½®æ–‡ä»¶è¯´æ˜</h3><table><thead><tr><th><strong>å±æ€§å</strong></th><th><strong>æ˜¯å¦å¿…é¡»</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td>maxElementsInMemory</td><td>æ˜¯</td><td>åœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®</td></tr><tr><td>maxElementsOnDisk</td><td>æ˜¯</td><td>åœ¨ç£ç›˜ä¸Šç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§</td></tr><tr><td>eternal</td><td>æ˜¯</td><td>è®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚ å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œ å¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsã€timeToLiveSecondsåˆ¤æ–­</td></tr><tr><td>overflowToDisk</td><td>æ˜¯</td><td>è®¾å®šå½“å†…å­˜ç¼“å­˜æº¢å‡ºçš„æ—¶å€™æ˜¯å¦å°†è¿‡æœŸçš„elementç¼“å­˜åˆ°ç£ç›˜ä¸Š</td></tr><tr><td>timeToIdleSeconds</td><td>å¦</td><td>å½“ç¼“å­˜åœ¨EhCacheä¸­çš„æ•°æ®å‰åä¸¤æ¬¡è®¿é—®çš„æ—¶é—´è¶…è¿‡timeToIdleSecondsçš„å±æ€§å–å€¼æ—¶ï¼Œ è¿™äº›æ•°æ®ä¾¿ä¼šåˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</td></tr><tr><td>timeToLiveSeconds</td><td>å¦</td><td>ç¼“å­˜elementçš„æœ‰æ•ˆç”Ÿå‘½æœŸï¼Œé»˜è®¤æ˜¯0.,ä¹Ÿå°±æ˜¯elementå­˜æ´»æ—¶é—´æ— ç©·å¤§</td></tr><tr><td>diskSpoolBufferSizeMB</td><td>å¦</td><td>DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td>diskPersistent</td><td>å¦</td><td>åœ¨VMé‡å¯çš„æ—¶å€™æ˜¯å¦å¯ç”¨ç£ç›˜ä¿å­˜EhCacheä¸­çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯falseã€‚</td></tr><tr><td>diskExpiryThreadIntervalSeconds</td><td>å¦</td><td>ç£ç›˜ç¼“å­˜çš„æ¸…ç†çº¿ç¨‹è¿è¡Œé—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚æ¯ä¸ª120sï¼Œ ç›¸åº”çš„çº¿ç¨‹ä¼šè¿›è¡Œä¸€æ¬¡EhCacheä¸­æ•°æ®çš„æ¸…ç†å·¥ä½œ</td></tr><tr><td>memoryStoreEvictionPolicy</td><td>å¦</td><td>å½“å†…å­˜ç¼“å­˜è¾¾åˆ°æœ€å¤§ï¼Œæœ‰æ–°çš„elementåŠ å…¥çš„æ—¶å€™ï¼Œ ç§»é™¤ç¼“å­˜ä¸­elementçš„ç­–ç•¥ã€‚ é»˜è®¤æ˜¯LRU ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼Œå¯é€‰çš„æœ‰LFU ï¼ˆæœ€ä¸å¸¸ä½¿ç”¨ï¼‰å’ŒFIFO ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰</td></tr></tbody></table><h1 id="11ã€MyBatisçš„é€†å‘å·¥ç¨‹"><a href="#11ã€MyBatisçš„é€†å‘å·¥ç¨‹" class="headerlink" title="11ã€MyBatisçš„é€†å‘å·¥ç¨‹"></a>11ã€MyBatisçš„é€†å‘å·¥ç¨‹</h1><ul><li><p>æ­£å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºJavaå®ä½“ç±»ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®å®ä½“ç±»ç”Ÿæˆæ•°æ®åº“è¡¨ã€‚ Hibernateæ˜¯æ”¯æŒæ­£å‘å·¥ç¨‹çš„ã€‚</p></li><li><p>é€†å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºæ•°æ®åº“è¡¨ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®æ•°æ®åº“è¡¨ï¼Œåå‘ç”Ÿæˆå¦‚ä¸‹èµ„æºï¼š</p><ul><li>Javaå®ä½“ç±»</li><li>Mapperæ¥å£</li><li>Mapperæ˜ å°„æ–‡ä»¶</li></ul></li></ul><p>è¯´æ˜ï¼šMyBatisçš„é€†å‘å·¥ç¨‹ç”Ÿæˆçš„åªæ˜¯å•è¡¨æŸ¥è¯¢çš„ç›¸å…³å†…å®¹ï¼Œ<strong>è‹¥è¦éœ€è¦å¤šè¡¨è”æŸ¥ï¼Œè¿˜å¾—è‡ªå·±å®ç°</strong></p><h2 id="11-1ã€åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤"><a href="#11-1ã€åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤" class="headerlink" title="11.1ã€åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤"></a>11.1ã€åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤</h2><h3 id="â‘ æ·»åŠ ä¾èµ–å’Œæ’ä»¶"><a href="#â‘ æ·»åŠ ä¾èµ–å’Œæ’ä»¶" class="headerlink" title="â‘ æ·»åŠ ä¾èµ–å’Œæ’ä»¶"></a>â‘ æ·»åŠ ä¾èµ–å’Œæ’ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä¾èµ–MyBatisæ ¸å¿ƒåŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- junitæµ‹è¯• --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- log4jæ—¥å¿— --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ§åˆ¶Mavenåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç›¸å…³é…ç½® --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ„å»ºè¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ’ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å…·ä½“æ’ä»¶ï¼Œé€†å‘å·¥ç¨‹çš„æ“ä½œæ˜¯ä»¥æ„å»ºè¿‡ç¨‹ä¸­æ’ä»¶å½¢å¼å‡ºç°çš„ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ’ä»¶çš„ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é€†å‘å·¥ç¨‹çš„æ ¸å¿ƒä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>â‘¡åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">         MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»è¦æŒ‰ç…§æŒ‡å®šçš„é¡ºåºé…ç½®ï¼š</span><br><span class="hljs-comment">         properties?,settings?,typeAliases?,typeHandlers?,</span><br><span class="hljs-comment">         objectFactory?,objectWrapperFactory?,reflectorFactory?,</span><br><span class="hljs-comment">         plugins?,environments?,databaseIdProvider?,mappers?</span><br><span class="hljs-comment"> --&gt;</span><br>    <span class="hljs-comment">&lt;!--è¯»å–é…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--åˆ«å--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å¼•å…¥æ˜ å°„æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¢åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶"><a href="#â‘¢åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶" class="headerlink" title="â‘¢åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶"></a>â‘¢åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶</h3><blockquote><p>æ–‡ä»¶åå¿…é¡»æ˜¯ï¼šgeneratorConfig.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">generatorConfiguration</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">generatorConfiguration</span>&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">targetRuntime: æ‰§è¡Œç”Ÿæˆçš„é€†å‘å·¥ç¨‹çš„ç‰ˆæœ¬</span><br><span class="hljs-comment">                MyBatis3Simple: ç”ŸæˆåŸºæœ¬çš„CRUDï¼ˆæ¸…æ–°ç®€æ´ç‰ˆï¼‰</span><br><span class="hljs-comment">                MyBatis3: ç”Ÿæˆå¸¦æ¡ä»¶çš„CRUDï¼ˆå¥¢åå°Šäº«ç‰ˆï¼‰</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;DB2Tables&quot;</span> <span class="hljs-attr">targetRuntime</span>=<span class="hljs-string">&quot;MyBatis3&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">jdbcConnection</span> <span class="hljs-attr">driverClass</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">connectionURL</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/æ•°æ®åº“å?serverTimezone=UTC&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">userId</span>=<span class="hljs-string">&quot;root&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">password</span>=<span class="hljs-string">&quot;lyh123&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">jdbcConnection</span>&gt;</span><br><span class="hljs-comment">&lt;!-- javaBeançš„ç”Ÿæˆç­–ç•¥--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">javaModelGenerator</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;com.study.mybatis.pojo&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;.\src\main\java&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;trimStrings&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">javaModelGenerator</span>&gt;</span><br><span class="hljs-comment">&lt;!-- SQLæ˜ å°„æ–‡ä»¶çš„ç”Ÿæˆç­–ç•¥ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">sqlMapGenerator</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;.\src\main\resources&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">sqlMapGenerator</span>&gt;</span><br><span class="hljs-comment">&lt;!-- Mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">javaClientGenerator</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;XMLMAPPER&quot;</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;com.study.mybatis.mapper&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;.\src\main\java&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">javaClientGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- é€†å‘åˆ†æçš„è¡¨ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- è‹¥ tableNameè®¾ç½®ä¸º*å·ï¼Œå¯ä»¥å¯¹åº”æ‰€æœ‰è¡¨ï¼Œæ­¤æ—¶ä¸å†™domainObjectName --&gt;</span><br>        <span class="hljs-comment">&lt;!-- domainObjectNameå±æ€§æŒ‡å®šç”Ÿæˆå‡ºæ¥çš„å®ä½“ç±»çš„ç±»å --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">tableName</span>=<span class="hljs-string">&quot;t_emp&quot;</span> <span class="hljs-attr">domainObjectName</span>=<span class="hljs-string">&quot;Emp&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">tableName</span>=<span class="hljs-string">&quot;t_dept&quot;</span> <span class="hljs-attr">domainObjectName</span>=<span class="hljs-string">&quot;Dept&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">generatorConfiguration</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘£æ‰§è¡ŒMBGæ’ä»¶çš„generateç›®æ ‡"><a href="#â‘£æ‰§è¡ŒMBGæ’ä»¶çš„generateç›®æ ‡" class="headerlink" title="â‘£æ‰§è¡ŒMBGæ’ä»¶çš„generateç›®æ ‡"></a>â‘£æ‰§è¡ŒMBGæ’ä»¶çš„generateç›®æ ‡</h3><p><img src="/2022/10/28/MyBatisNote/3.png" alt="3"></p><h3 id="â‘¤æ•ˆæœ"><a href="#â‘¤æ•ˆæœ" class="headerlink" title="â‘¤æ•ˆæœ"></a>â‘¤æ•ˆæœ</h3><p><img src="/2022/10/28/MyBatisNote/4.png" alt="4"></p><h2 id="11-2ã€QBCæŸ¥è¯¢"><a href="#11-2ã€QBCæŸ¥è¯¢" class="headerlink" title="11.2ã€QBCæŸ¥è¯¢"></a>11.2ã€QBCæŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMBG</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>        <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(EmpMapper.class);<br>        <span class="hljs-comment">//æ ¹æ®idæŸ¥è¯¢æ•°æ®</span><br>        <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> mapper.selectByPrimaryKey(<span class="hljs-number">1</span>);<br>        System.out.println(emp);<br>        <span class="hljs-comment">//æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span><br>        List&lt;Emp&gt; list = mapper.selectByExample(<span class="hljs-literal">null</span>);<br>        list.forEach(System.out::println);<br>        <span class="hljs-comment">//æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®</span><br>        <span class="hljs-type">EmpExample</span> <span class="hljs-variable">example</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmpExample</span>();<br>        example.createCriteria().andEmpNameEqualTo(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>).andAgeGreaterThanOrEqualTo(<span class="hljs-number">20</span>);<br>        <span class="hljs-comment">//è‹¥è¦ä½¿ç”¨orï¼Œéœ€è¦åœ¨é›¶ä¸€æ¡è¯­å¥çš„å¼€å¤´ä½¿ç”¨ .or().å…¶å®ƒæ¡ä»¶</span><br>        example.or().andGenderEqualTo(<span class="hljs-string">&quot;ç”·&quot;</span>);<br>        List&lt;Emp&gt; list = mapper.selectByExample(example);<br>        list.forEach(System.out::println);<br>        <span class="hljs-comment">//æµ‹è¯•æ™®é€šä¿®æ”¹åŠŸèƒ½</span><br>        <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å°é»‘&quot;</span>,<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;å¥³&quot;</span>);<br>        mapper.updateByPrimaryKey(emp);<br>        <span class="hljs-comment">//update t_emp set emp_name = ?, age = ?, gender = ?, dept_id = ? </span><br>        <span class="hljs-comment">// where emp_id = ?</span><br>        <span class="hljs-comment">//æµ‹è¯•é€‰æ‹©æ€§ä¿®æ”¹åŠŸèƒ½</span><br>        <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å°é»‘&quot;</span>,<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;å¥³&quot;</span>);<br>        mapper.updateByPrimaryKeySelective(emp);<br>        <span class="hljs-comment">//update t_emp SET emp_name = ?, gender = ? where emp_id = ?</span><br>    &#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//éé€‰æ‹©æ€§æ’å…¥ï¼šå¦‚æœå‚æ•°ä¸ºnullï¼Œå°±ä¸ä¼šä¸ºè¯¥å­—æ®µèµ‹å€¼ä¸ºnullï¼Œè€Œä¸ä¼šä½¿ç”¨åŸæ¥çš„å€¼æˆ–è®¾ç½®çš„é»˜è®¤å€¼</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Emp record)</span>;<br><br><span class="hljs-comment">//é€‰æ‹©æ€§æ’å…¥ï¼šå¦‚æœå‚æ•°ä¸ºnullï¼Œå°±ä¸ä¼šä¸ºè¯¥å­—æ®µèµ‹å€¼ï¼Œä½¿å…¶èƒ½ä½¿ç”¨åŸæ¥çš„å€¼æˆ–è®¾ç½®çš„é»˜è®¤å€¼</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">insertSelective</span><span class="hljs-params">(Emp record)</span>;<br></code></pre></td></tr></table></figure><h1 id="12ã€åˆ†é¡µæ’ä»¶"><a href="#12ã€åˆ†é¡µæ’ä»¶" class="headerlink" title="12ã€åˆ†é¡µæ’ä»¶"></a>12ã€åˆ†é¡µæ’ä»¶</h1><blockquote><p>limit index, pageSize</p><p>pageSizeï¼šæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°</p><p>pageNumï¼šå½“å‰é¡µçš„é¡µç </p><p>indexï¼šå½“å‰é¡µçš„èµ·å§‹ç´¢å¼•ï¼Œindex&#x3D;(pageNum-1)*pageSize</p><p>countï¼šæ€»è®°å½•æ•°</p><p>totalPageï¼šæ€»é¡µæ•°</p><p>totalPage &#x3D; count &#x2F; pageSize;</p><p>if(count % pageSize !&#x3D; 0) {</p><p>â€‹totalPage +&#x3D; 1;</p><p>}</p><p>pageSize&#x3D;4ï¼ŒpageNum&#x3D;1ï¼Œindex&#x3D;0 limit 0,4</p><p>pageSize&#x3D;4ï¼ŒpageNum&#x3D;3ï¼Œindex&#x3D;8 limit 8,4</p><p>pageSize&#x3D;4ï¼ŒpageNum&#x3D;6ï¼Œindex&#x3D;20 limit 20,4</p><p>é¦–é¡µ ä¸Šä¸€é¡µ 2 3 4 5 6 ä¸‹ä¸€é¡µ æœ«é¡µ</p></blockquote><h2 id="12-1ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨æ­¥éª¤"><a href="#12-1ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="12.1ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨æ­¥éª¤"></a>12.1ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨æ­¥éª¤</h2><h3 id="â‘ æ·»åŠ ä¾èµ–"><a href="#â‘ æ·»åŠ ä¾èµ–" class="headerlink" title="â‘ æ·»åŠ ä¾èµ–"></a>â‘ æ·»åŠ ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="â‘¡é…ç½®åˆ†é¡µæ’ä»¶"><a href="#â‘¡é…ç½®åˆ†é¡µæ’ä»¶" class="headerlink" title="â‘¡é…ç½®åˆ†é¡µæ’ä»¶"></a>â‘¡é…ç½®åˆ†é¡µæ’ä»¶</h3><p>åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®æ’ä»¶ mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--è®¾ç½®åˆ†é¡µæ’ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPage</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> SqlSessionUtil.getSqlSession();<br>    <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(EmpMapper.class);<br>    <span class="hljs-comment">//æŸ¥è¯¢åŠŸèƒ½ä¹‹å‰å¼€å¯åˆ†é¡µåŠŸèƒ½</span><br>    Page&lt;Object&gt; page = PageHelper.startPage(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>);<br>    List&lt;Emp&gt; list = mapper.selectByExample(<span class="hljs-literal">null</span>);<br>    <span class="hljs-comment">//æŸ¥è¯¢åŠŸèƒ½ä¹‹åå¯ä»¥è·å–åˆ†é¡µç›¸å…³çš„æ‰€æœ‰æ•°æ®</span><br>    PageInfo&lt;Emp&gt; pageInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(list,<span class="hljs-number">5</span>);<br>    list.forEach(System.out::println);<br>    System.out.println(pageInfo);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12-2ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨"><a href="#12-2ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨" class="headerlink" title="12.2ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨"></a>12.2ã€åˆ†é¡µæ’ä»¶çš„ä½¿ç”¨</h2><p>a&gt; åœ¨æŸ¥è¯¢åŠŸèƒ½ä¹‹å‰ä½¿ç”¨PageHelper.startPage(int pageNum, int pageSize)å¼€å¯åˆ†é¡µåŠŸèƒ½</p><blockquote><p>pageNumï¼šå½“å‰é¡µçš„é¡µç </p><p>pageSizeï¼šæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°</p></blockquote><p>b&gt; åœ¨æŸ¥è¯¢è·å–listé›†åˆä¹‹åï¼Œä½¿ç”¨PageInfo<T> pageInfo &#x3D; new PageInfo&lt;&gt;(List<T> list, int</p><p>navigatePages)è·å–åˆ†é¡µç›¸å…³æ•°æ®</p><blockquote><p>listï¼šåˆ†é¡µä¹‹åçš„æ•°æ®</p><p>navigatePagesï¼šå¯¼èˆªåˆ†é¡µçš„é¡µç æ•°</p></blockquote><p>c&gt; åˆ†é¡µç›¸å…³æ•°æ®</p><blockquote><p>PageInfo{</p><p>pageNum&#x3D;8, pageSize&#x3D;4, size&#x3D;2, startRow&#x3D;29, endRow&#x3D;30, total&#x3D;30, pages&#x3D;8,</p><p>list&#x3D;Page{count&#x3D;true, pageNum&#x3D;8, pageSize&#x3D;4, startRow&#x3D;28, endRow&#x3D;32, total&#x3D;30,</p><p>pages&#x3D;8, reasonable&#x3D;false, pageSizeZero&#x3D;false},</p><p>prePage&#x3D;7, nextPage&#x3D;0, isFirstPage&#x3D;false, isLastPage&#x3D;true, hasPreviousPage&#x3D;true,</p><p>hasNextPage&#x3D;false, navigatePages&#x3D;5, navigateFirstPage4, navigateLastPage8,</p><p>navigatepageNums&#x3D;[4, 5, 6, 7, 8]</p><p>}</p><p>pageNumï¼šå½“å‰é¡µçš„é¡µç </p><p>pageSizeï¼šæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°</p><p>sizeï¼šå½“å‰é¡µæ˜¾ç¤ºçš„çœŸå®æ¡æ•°</p><p>totalï¼šæ€»è®°å½•æ•°</p><p>pagesï¼šæ€»é¡µæ•°</p><p>prePageï¼šä¸Šä¸€é¡µçš„é¡µç </p><p>nextPageï¼šä¸‹ä¸€é¡µçš„é¡µç </p><p>isFirstPage&#x2F;isLastPageï¼šæ˜¯å¦ä¸ºç¬¬ä¸€é¡µ&#x2F;æœ€åä¸€é¡µ</p><p>hasPreviousPage&#x2F;hasNextPageï¼šæ˜¯å¦å­˜åœ¨ä¸Šä¸€é¡µ&#x2F;ä¸‹ä¸€é¡µ</p><p>navigatePagesï¼šå¯¼èˆªåˆ†é¡µçš„é¡µç æ•°</p><p>navigatepageNumsï¼šå¯¼èˆªåˆ†é¡µçš„é¡µç ï¼Œ[1,2,3,4,5]</p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaWeb</title>
    <link href="/2022/10/03/JavaWebNote/"/>
    <url>/2022/10/03/JavaWebNote/</url>
    
    <content type="html"><![CDATA[<h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><h2 id="XMLç®€ä»‹"><a href="#XMLç®€ä»‹" class="headerlink" title="XMLç®€ä»‹"></a>XMLç®€ä»‹</h2><ul><li>xml æ˜¯å¯æ‰©å±•çš„æ ‡è®°æ€§è¯­è¨€ã€‚</li><li>xml çš„ä¸»è¦ä½œç”¨æœ‰ï¼š <ul><li>1ã€ç”¨æ¥ä¿å­˜æ•°æ®ï¼Œè€Œä¸”è¿™äº›æ•°æ®å…·æœ‰è‡ªæˆ‘æè¿°æ€§ </li><li>2ã€å®ƒè¿˜å¯ä»¥åšä¸ºé¡¹ç›®æˆ–è€…æ¨¡å—çš„é…ç½®æ–‡ä»¶ </li><li>3ã€è¿˜å¯ä»¥åšä¸ºç½‘ç»œä¼ è¾“æ•°æ®çš„æ ¼å¼ï¼ˆç°åœ¨ JSON ä¸ºä¸»ï¼‰ã€‚</li></ul></li></ul><h2 id="xmlè¯­æ³•"><a href="#xmlè¯­æ³•" class="headerlink" title="xmlè¯­æ³•"></a>xmlè¯­æ³•</h2><ol><li>æ–‡æ¡£å£°æ˜ã€‚</li><li>å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰ </li><li>xml å±æ€§ </li><li>xml æ³¨é‡Š </li><li>æ–‡æœ¬åŒºåŸŸï¼ˆCDATA åŒºï¼‰</li></ol><h3 id="æ–‡æ¡£å£°æ˜"><a href="#æ–‡æ¡£å£°æ˜" class="headerlink" title="æ–‡æ¡£å£°æ˜"></a>æ–‡æ¡£å£°æ˜</h3><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç®€å• XML æ–‡ä»¶ï¼Œç”¨æ¥æè¿°å›¾ä¹¦ä¿¡æ¯ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span> ?&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="hljs-comment">    ä»¥ä¸Šå†…å®¹å°±æ˜¯xmlæ–‡ä»¶çš„å£°æ˜</span><br><span class="hljs-comment">    version=&quot;1.0&quot;       version è¡¨ç¤ºxmlçš„ç‰ˆæœ¬</span><br><span class="hljs-comment">    encoding=&quot;utf-8&quot;    encoding è¡¨ç¤ºxmlæ–‡ä»¶æœ¬èº«çš„ç¼–ç </span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">books</span>&gt;</span> <span class="hljs-comment">&lt;!-- books è¡¨ç¤ºå¤šä¸ªå›¾ä¹¦ä¿¡æ¯ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12312344&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!-- book è¡¨ç¤ºå•ä¸ªå›¾ä¹¦ä¿¡æ¯ï¼Œsnå±æ€§è¡¨ç¤ºå›¾ä¹¦åºåˆ—å· --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>æ—¶é—´ç®€å²<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span> <span class="hljs-comment">&lt;!-- nameæ ‡ç­¾è¡¨ç¤ºå›¾ä¹¦å --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>éœé‡‘<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span> <span class="hljs-comment">&lt;!-- authoræ ‡ç­¾è¡¨ç¤ºä½œè€… --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>75<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span> <span class="hljs-comment">&lt;!-- priceæ ‡ç­¾è¡¨ç¤ºä»·æ ¼ --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12312398&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!-- book è¡¨ç¤ºå•ä¸ªå›¾ä¹¦ä¿¡æ¯ï¼Œsnå±æ€§è¡¨ç¤ºå›¾ä¹¦åºåˆ—å· --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javaæ•™ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span> <span class="hljs-comment">&lt;!-- nameæ ‡ç­¾è¡¨ç¤ºå›¾ä¹¦å --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>å¤§ä½<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span> <span class="hljs-comment">&lt;!-- authoræ ‡ç­¾è¡¨ç¤ºä½œè€… --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>99<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span> <span class="hljs-comment">&lt;!-- priceæ ‡ç­¾è¡¨ç¤ºä»·æ ¼ --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">books</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­å¯ä»¥æŸ¥çœ‹åˆ°æ–‡æ¡£</p><h3 id="xmlæ³¨é‡Š"><a href="#xmlæ³¨é‡Š" class="headerlink" title="xmlæ³¨é‡Š"></a>xmlæ³¨é‡Š</h3><p>html å’Œ XML æ³¨é‡Š ä¸€æ · : </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- html æ³¨é‡Š --&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰"><a href="#å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰" class="headerlink" title="å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰"></a>å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä»¬å…ˆå›å¿†ä¸€ä¸‹:<br>html æ ‡ç­¾ï¼š<br>    æ ¼å¼ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">æ ‡ç­¾å</span>&gt;</span>å°è£…çš„æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">æ ‡ç­¾å</span>&gt;</span><br>    å•æ ‡ç­¾: <span class="hljs-tag">&lt;<span class="hljs-name">æ ‡ç­¾å</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span> æ¢è¡Œ <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>æ°´å¹³çº¿<br>    åŒæ ‡ç­¾ <span class="hljs-tag">&lt;<span class="hljs-name">æ ‡ç­¾å</span>&gt;</span>å°è£…çš„æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">æ ‡ç­¾å</span>&gt;</span><br>    æ ‡ç­¾åå¤§å°å†™ä¸æ•æ„Ÿ<br>    æ ‡ç­¾æœ‰å±æ€§ï¼Œæœ‰åŸºæœ¬å±æ€§å’Œäº‹ä»¶å±æ€§<br>    æ ‡ç­¾è¦é—­åˆï¼ˆä¸é—­åˆ ï¼Œhtml ä¸­ä¸æŠ¥é”™ã€‚ä½†æˆ‘ä»¬è¦å…»æˆè‰¯å¥½çš„ä¹¦å†™ä¹ æƒ¯ã€‚é—­åˆï¼‰<br></code></pre></td></tr></table></figure><h4 id="ä»€ä¹ˆæ˜¯xmlå…ƒç´ "><a href="#ä»€ä¹ˆæ˜¯xmlå…ƒç´ " class="headerlink" title="ä»€ä¹ˆæ˜¯xmlå…ƒç´ "></a>ä»€ä¹ˆæ˜¯xmlå…ƒç´ </h4> <img src="image-20221028163054477.png" alt="image-20221028163054477" style="zoom: 67%;" /><h4 id="xmlå‘½åè§„åˆ™"><a href="#xmlå‘½åè§„åˆ™" class="headerlink" title="xmlå‘½åè§„åˆ™"></a>xmlå‘½åè§„åˆ™</h4><ul><li>XML å…ƒç´ å¿…é¡»éµå¾ªä»¥ä¸‹å‘½åè§„åˆ™ï¼š<ul><li>åç§°å¯ä»¥å«å­—æ¯ã€æ•°å­—ä»¥åŠå…¶ä»–çš„å­—ç¬¦</li><li>åç§°ä¸èƒ½ä»¥æ•°å­—æˆ–æ ‡ç‚¹ç¬¦å·å¼€å§‹</li><li>åç§°ä¸èƒ½åŒ…å«ç©ºæ ¼</li></ul></li></ul><h4 id="xmlå•æ ‡ç­¾-amp-åŒæ ‡ç­¾"><a href="#xmlå•æ ‡ç­¾-amp-åŒæ ‡ç­¾" class="headerlink" title="xmlå•æ ‡ç­¾&amp;åŒæ ‡ç­¾"></a>xmlå•æ ‡ç­¾&amp;åŒæ ‡ç­¾</h4><ul><li><p>å•æ ‡ç­¾</p><ul><li><p>æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">æ ‡ç­¾å</span> <span class="hljs-attr">å±æ€§</span>=<span class="hljs-string">&quot;å€¼&quot;</span> <span class="hljs-attr">å±æ€§</span>=<span class="hljs-string">&quot;å€¼&quot;</span> <span class="hljs-attr">...</span> /&gt;</span> <br></code></pre></td></tr></table></figure></li></ul></li><li><p>åŒæ ‡ç­¾</p><ul><li><p>æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">æ ‡ç­¾å</span> <span class="hljs-attr">å±æ€§</span>=<span class="hljs-string">&quot;å€¼&quot;</span> <span class="hljs-attr">å±æ€§</span>=<span class="hljs-string">&quot;å€¼&quot;</span> <span class="hljs-attr">...</span> &gt;</span>æ–‡æœ¬æ•°æ®æˆ–å­æ ‡ç­¾<span class="hljs-tag">&lt;/<span class="hljs-name">æ ‡ç­¾å</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li><li><img src="image-20221028163729119.png" alt="image-20221028163729119" style="zoom:80%;" /></li></ul><h3 id="xmlå±æ€§"><a href="#xmlå±æ€§" class="headerlink" title="xmlå±æ€§"></a>xmlå±æ€§</h3><ul><li><p>xml çš„æ ‡ç­¾å±æ€§å’Œ html çš„æ ‡ç­¾å±æ€§æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œå±æ€§å¯ä»¥æä¾›å…ƒç´ çš„é¢å¤–ä¿¡æ¯ã€‚</p></li><li><p>åœ¨æ ‡ç­¾ä¸Šå¯ä»¥ä¹¦å†™å±æ€§ï¼š</p><ul><li>ä¸€ä¸ªæ ‡ç­¾ä¸Šå¯ä»¥ä¹¦å†™å¤šä¸ªå±æ€§</li><li>æ¯ä¸ªå±æ€§çš„å€¼å¿…é¡»ç”¨ å¼•å· åŒ…èµ·æ¥</li><li>è§„åˆ™å’Œæ ‡ç­¾çš„ä¹¦å†™è§„åˆ™ä¸€è‡´ã€‚</li></ul></li></ul><img src="image-20221028164205884.png" alt="image-20221028164205884" style="zoom:80%;" /><h3 id="è¯­æ³•è§„åˆ™"><a href="#è¯­æ³•è§„åˆ™" class="headerlink" title="è¯­æ³•è§„åˆ™"></a>è¯­æ³•è§„åˆ™</h3><ul><li><p>æ‰€æœ‰ xml å…ƒç´ éƒ½å¿…é¡»é—­åˆï¼ˆå³è¦æœ‰å¼€å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ï¼‰</p></li><li><p>xml æ ‡ç­¾å¯¹å¤§å°å†™æ•æ„Ÿ</p></li><li><p>xml æ–‡æ¡£å¿…é¡»æœ‰æ ¹å…ƒç´ </p><ul><li>æ ¹å…ƒç´ å°±æ˜¯é¡¶çº§å…ƒç´ ï¼Œ æ²¡æœ‰çˆ¶æ ‡ç­¾çš„å…ƒç´ ï¼Œå«é¡¶çº§å…ƒç´ ã€‚ </li><li>æ ¹å…ƒç´ æ˜¯æ²¡æœ‰çˆ¶æ ‡ç­¾çš„é¡¶çº§å…ƒç´ ï¼Œè€Œä¸”æ˜¯å”¯ä¸€ä¸€ä¸ªæ‰è¡Œã€‚</li><li><img src="image-20221028164914910.png" alt="image-20221028164914910" style="zoom: 67%;" /></li></ul></li><li><p>xml çš„å±æ€§å€¼å¿…é¡»ç”¨å¼•å·åŒ…å«</p></li><li><p>xml çš„ç‰¹æ®Šå­—ç¬¦çš„ä½¿ç”¨</p><ul><li><img src="image-20221028165143092.png" alt="image-20221028165143092" style="zoom:67%;" /></li></ul></li><li><p>æ–‡æœ¬åŒºåŸŸï¼ˆCDATAåŒºï¼‰</p><ul><li><p>CDATA è¯­æ³•å¯ä»¥å‘Šè¯‰ xml è§£æå™¨ï¼Œæˆ‘ CDATA é‡Œçš„æ–‡æœ¬å†…å®¹ï¼Œåªæ˜¯çº¯æ–‡æœ¬ï¼Œä¸éœ€è¦ xml è¯­æ³•è§£æ</p></li><li><p>CDATA æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;![CDATA[ è¿™é‡Œå¯ä»¥æŠŠä½ è¾“å…¥çš„å­—ç¬¦åŸæ ·æ˜¾ç¤ºï¼Œä¸ä¼šè§£æ xml]]&gt;<br></code></pre></td></tr></table></figure><img src="image-20221028165341263.png" alt="image-20221028165341263" style="zoom:67%;" /></li></ul></li></ul><h2 id="xml-è§£ææŠ€æœ¯ä»‹ç»"><a href="#xml-è§£ææŠ€æœ¯ä»‹ç»" class="headerlink" title="xml è§£ææŠ€æœ¯ä»‹ç»"></a>xml è§£ææŠ€æœ¯ä»‹ç»</h2><p>xml æ˜¯å¯æ‰©å±•çš„æ ‡è®°è¯­è¨€ã€‚</p><p>ä¸ç®¡æ˜¯ html æ–‡ä»¶è¿˜æ˜¯ xml æ–‡ä»¶ï¼Œå®ƒä»¬éƒ½æ˜¯æ ‡è®°å‹æ–‡æ¡£ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ w3c ç»„ç»‡åˆ¶å®šçš„ dom æŠ€æœ¯æ¥è§£æã€‚</p><img src="image-20221028165751067.png" alt="image-20221028165751067" style="zoom:80%;" /><p>document å¯¹è±¡è¡¨ç¤ºçš„æ˜¯æ•´ä¸ªæ–‡æ¡£ï¼ˆå¯ä»¥æ˜¯ html æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ˜¯ xml æ–‡æ¡£ï¼‰</p><p>æ—©æœŸ JDK ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§ xml è§£ææŠ€æœ¯ DOM å’Œ Sax ç®€ä»‹ï¼ˆå·²ç»è¿‡æ—¶ï¼Œä½†æˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸¤ç§æŠ€æœ¯ï¼‰</p><p>dom è§£ææŠ€æœ¯æ˜¯ W3C ç»„ç»‡åˆ¶å®šçš„ï¼Œè€Œæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½å¯¹è¿™ä¸ªè§£ææŠ€æœ¯ä½¿ç”¨äº†è‡ªå·±è¯­è¨€çš„ç‰¹ç‚¹è¿›è¡Œå®ç°ã€‚ </p><p>Java å¯¹ dom æŠ€æœ¯è§£ææ ‡è®°ä¹Ÿåšäº†å®ç°ã€‚ </p><p>sun å…¬å¸åœ¨ JDK5 ç‰ˆæœ¬å¯¹ dom è§£ææŠ€æœ¯è¿›è¡Œå‡çº§ï¼šSAXï¼ˆ Simple API for XML ï¼‰ ã€‚</p><p>SAX è§£æï¼šå®ƒè·Ÿ W3C åˆ¶å®šçš„è§£æä¸å¤ªä¸€æ ·ã€‚å®ƒæ˜¯ä»¥ç±»ä¼¼äº‹ä»¶æœºåˆ¶é€šè¿‡å›è°ƒå‘Šè¯‰ç”¨æˆ·å½“å‰æ­£åœ¨è§£æçš„å†…å®¹ã€‚ å®ƒæ˜¯ä¸€è¡Œä¸€è¡Œçš„è¯»å– xml æ–‡ä»¶è¿›è¡Œè§£æçš„ã€‚ä¸ä¼šåˆ›å»ºå¤§é‡çš„ dom å¯¹è±¡ã€‚ æ‰€ä»¥å®ƒåœ¨è§£æ xml çš„æ—¶å€™ï¼Œåœ¨å†…å­˜çš„ä½¿ç”¨ä¸Šã€‚å’Œæ€§èƒ½ä¸Šã€‚éƒ½ä¼˜äº Dom è§£æã€‚ </p><p>ç¬¬ä¸‰æ–¹çš„è§£æï¼š </p><ul><li>jdom åœ¨ dom åŸºç¡€ä¸Šè¿›è¡Œäº†å°è£… </li><li>dom4j åˆå¯¹ jdom è¿›è¡Œäº†å°è£…ã€‚ </li><li>pull ä¸»è¦ç”¨åœ¨ Android æ‰‹æœºå¼€å‘ï¼Œæ˜¯åœ¨è·Ÿ sax éå¸¸ç±»ä¼¼éƒ½æ˜¯äº‹ä»¶æœºåˆ¶è§£æ xml æ–‡ä»¶ã€‚</li></ul><p>è¿™ä¸ª Dom4j å®ƒæ˜¯ç¬¬ä¸‰æ–¹çš„è§£ææŠ€æœ¯ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»™æˆ‘ä»¬æä¾›å¥½çš„ç±»åº“æ‰å¯ä»¥è§£æ xml æ–‡ä»¶ã€‚</p><h2 id="dom4j-è§£ææŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰"><a href="#dom4j-è§£ææŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="dom4j è§£ææŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰"></a>dom4j è§£ææŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰</h2><p>ç”±äº dom4j å®ƒä¸æ˜¯ sun å…¬å¸çš„æŠ€æœ¯ï¼Œè€Œå±äºç¬¬ä¸‰æ–¹å…¬å¸çš„æŠ€æœ¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ dom4j å°±éœ€è¦åˆ° dom4j å®˜ç½‘ä¸‹è½½ dom4j çš„ jar åŒ…ã€‚</p><h3 id="Dom4j-ç±»åº“çš„ä½¿ç”¨"><a href="#Dom4j-ç±»åº“çš„ä½¿ç”¨" class="headerlink" title="Dom4j ç±»åº“çš„ä½¿ç”¨"></a>Dom4j ç±»åº“çš„ä½¿ç”¨</h3> <img src="image-20221029102548240.png" alt="image-20221029102548240" style="zoom: 67%;" /><p>è§£å‹åï¼š</p> <img src="image-20221029102629505.png" alt="image-20221029102629505" style="zoom: 50%;" /><h3 id="dom4j-ç›®å½•çš„ä»‹ç»"><a href="#dom4j-ç›®å½•çš„ä»‹ç»" class="headerlink" title="dom4j ç›®å½•çš„ä»‹ç»"></a>dom4j ç›®å½•çš„ä»‹ç»</h3><p>ï¼ˆ1ï¼‰docs æ˜¯æ–‡æ¡£ç›®å½•</p> <img src="image-20221029102801538.png" alt="image-20221029102801538" style="zoom: 50%;" /><p>ï¼ˆ2ï¼‰å¦‚ä½•æŸ¥ Dom4j çš„æ–‡æ¡£</p> <img src="image-20221029102921564.png" alt="image-20221029102921564" style="zoom: 50%;" /><p>ï¼ˆ3ï¼‰Dom4j å¿«é€Ÿå…¥é—¨</p> <img src="image-20221029103014865.png" alt="image-20221029103014865" style="zoom: 50%;" /><p>ï¼ˆ4ï¼‰lib ç›®å½•</p> <img src="image-20221029103109131.png" alt="image-20221029103109131" style="zoom:50%;" /><p>ï¼ˆ5ï¼‰src ç›®å½•æ˜¯ç¬¬ä¸‰æ–¹ç±»åº“çš„æºç ç›®å½•</p> <img src="image-20221029103154911.png" alt="image-20221029103154911" style="zoom:50%;" /><h3 id="dom4j-ç¼–ç¨‹æ­¥éª¤"><a href="#dom4j-ç¼–ç¨‹æ­¥éª¤" class="headerlink" title="dom4j ç¼–ç¨‹æ­¥éª¤"></a>dom4j ç¼–ç¨‹æ­¥éª¤</h3><p>1ï¼‰å…ˆåŠ è½½xmlæ–‡ä»¶åˆ›å»º Document å¯¹è±¡</p><p>2ï¼‰é€šè¿‡ Document å¯¹è±¡æ‹¿åˆ°æ ¹å…ƒç´ å¯¹è±¡</p><p>3ï¼‰é€šè¿‡æ ¹å…ƒç´ .elelemts(æ ‡ç­¾å);  å¯ä»¥è¿”å›ä¸€ä¸ªé›†åˆï¼Œè¿™ä¸ªé›†åˆé‡Œæ”¾ç€æ‰€æœ‰è‡ªå·±æŒ‡å®šçš„æ ‡ç­¾åçš„å…ƒç´ å¯¹è±¡</p><p>4ï¼‰æ‰¾åˆ°æƒ³è¦ä¿®æ”¹ã€åˆ é™¤çš„å­å…ƒç´ ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œ</p><p>5ï¼‰ä¿å­˜åˆ°ç¡¬ç›˜ä¸Š</p><h3 id="è·å–-document-å¯¹è±¡"><a href="#è·å–-document-å¯¹è±¡" class="headerlink" title="è·å– document å¯¹è±¡"></a>è·å– document å¯¹è±¡</h3><p>åˆ›å»ºä¸€ä¸ª lib ç›®å½•ï¼Œå¹¶æ·»åŠ  dom4j çš„ jar åŒ…ã€‚å¹¶æ·»åŠ åˆ°ç±»è·¯å¾„ã€‚</p> <img src="image-20221029152741709.png" alt="image-20221029152741709" style="zoom: 67%;" /><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">books</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341232&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>è¾Ÿé‚ªå‰‘è°±<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>9.9<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>ç­ä¸»ä»»<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341231&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>è‘µèŠ±å®å…¸<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>99.99<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>ç­é•¿<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">books</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">* dom4j è·å– Documet å¯¹è±¡</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> DocumentException &#123;<br><span class="hljs-comment">// è¦åˆ›å»ºä¸€ä¸ª Document å¯¹è±¡ï¼Œéœ€è¦æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª SAXReader å¯¹è±¡</span><br><span class="hljs-type">SAXReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SAXReader</span>();<br><span class="hljs-comment">// è¿™ä¸ªå¯¹è±¡ç”¨äºè¯»å– xml æ–‡ä»¶ï¼Œç„¶åè¿”å›ä¸€ä¸ª Documentã€‚</span><br><span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> reader.read(<span class="hljs-string">&quot;src/books.xml&quot;</span>);<br><span class="hljs-comment">// æ‰“å°åˆ°æ§åˆ¶å°ï¼Œçœ‹çœ‹æ˜¯å¦åˆ›å»ºæˆåŠŸ</span><br>System.out.println(document);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="éå†æ ‡ç­¾-amp-è·å–æ‰€æœ‰æ ‡ç­¾ä¸­çš„å†…å®¹"><a href="#éå†æ ‡ç­¾-amp-è·å–æ‰€æœ‰æ ‡ç­¾ä¸­çš„å†…å®¹" class="headerlink" title="éå†æ ‡ç­¾&amp;è·å–æ‰€æœ‰æ ‡ç­¾ä¸­çš„å†…å®¹"></a>éå†æ ‡ç­¾&amp;è·å–æ‰€æœ‰æ ‡ç­¾ä¸­çš„å†…å®¹</h3><ul><li><p>éœ€è¦åˆ†å››æ­¥æ“ä½œ:</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡åˆ›å»º SAXReader å¯¹è±¡ã€‚æ¥è¯»å– xml æ–‡ä»¶ï¼Œè·å– Document å¯¹è±¡</li><li>ç¬¬äºŒæ­¥ï¼Œé€šè¿‡ Document å¯¹è±¡ã€‚æ‹¿åˆ° XML çš„æ ¹å…ƒç´ å¯¹è±¡</li><li>ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡æ ¹å…ƒç´ å¯¹è±¡ã€‚è·å–æ‰€æœ‰çš„ book æ ‡ç­¾å¯¹è±¡</li><li>ç¬¬å››æ­¥ï¼Œéå†æ¯ä¸ª book æ ‡ç­¾å¯¹è±¡ã€‚ç„¶åè·å–åˆ° book æ ‡ç­¾å¯¹è±¡å†…çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå†é€šè¿‡ getText() æ–¹æ³•æ‹¿åˆ°èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¹‹é—´çš„æ–‡æœ¬å†…å®¹</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">books</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341232&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>è¾Ÿé‚ªå‰‘è°±<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>9.9<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>ç­ä¸»ä»»<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341231&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>è‘µèŠ±å®å…¸<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>99.99<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>ç­é•¿<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">books</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String sn;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> BigDecimal price;<br>    <span class="hljs-keyword">private</span> String author;<br>    <span class="hljs-comment">//... ...</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.javaWebStudy.pojo;<br><br><span class="hljs-keyword">import</span> org.dom4j.Document;<br><span class="hljs-keyword">import</span> org.dom4j.DocumentException;<br><span class="hljs-keyword">import</span> org.dom4j.Element;<br><span class="hljs-keyword">import</span> org.dom4j.io.SAXReader;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.math.BigDecimal;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dom4jTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> DocumentException &#123;<br>        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªSAXReaderè¾“å…¥æµï¼Œå»è¯»å–xmlé…ç½®æ–‡ä»¶ï¼Œç”ŸæˆDocumentå¯¹è±¡</span><br>        <span class="hljs-type">SAXReader</span> <span class="hljs-variable">saxReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SAXReader</span>();<br>        <span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span>  saxReader.read(<span class="hljs-string">&quot;src/books.xml&quot;</span>);<br><br>        System.out.println(document);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯»å–books.xml æ–‡ä»¶ç”Ÿæˆ Book ç±»</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> DocumentException &#123;<br>        <span class="hljs-comment">//1. è¯»å– books.xml æ–‡ä»¶</span><br>        <span class="hljs-type">SAXReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SAXReader</span>();<br>        <span class="hljs-comment">//æ³¨æ„ï¼šåœ¨Junitæµ‹è¯•ä¸­ï¼Œç›¸å¯¹è·¯å¾„æ˜¯ä»æ¨¡å—åå¼€å§‹ç®—</span><br>        <span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> reader.read(<span class="hljs-string">&quot;src/books.xml&quot;</span>);<br>        <span class="hljs-comment">//2. é€šè¿‡ Document å¯¹è±¡è·å–æ ¹å…ƒç´ </span><br>        <span class="hljs-type">Element</span> <span class="hljs-variable">rootElement</span> <span class="hljs-operator">=</span> document.getRootElement();<br><span class="hljs-comment">//        System.out.println(rootElement);</span><br>        <span class="hljs-comment">//3. é€šè¿‡æ ¹å…ƒç´ è·å– book æ ‡ç­¾å¯¹è±¡</span><br>        <span class="hljs-comment">//element() å’Œ elements() éƒ½æ˜¯é€šè¿‡æ ‡ç­¾åæŸ¥æ‰¾å­å…ƒç´ </span><br>        List&lt;Element&gt; books = rootElement.elements(<span class="hljs-string">&quot;book&quot;</span>);<br>        <span class="hljs-comment">//4. éå†ï¼Œå¤„ç†æ¯ä¸ª book æ ‡ç­¾ï¼Œè½¬æ¢ä¸º Book ç±»</span><br>        <span class="hljs-keyword">for</span>(Element book:books)&#123;<br>            <span class="hljs-comment">// asXML() æŠŠæ ‡ç­¾å¯¹è±¡ï¼Œè½¬æ¢ä¸ºæ ‡ç­¾å­—ç¬¦ä¸²</span><br><span class="hljs-comment">//            System.out.println(book.asXML());</span><br>            <span class="hljs-type">Element</span> <span class="hljs-variable">nameElement</span> <span class="hljs-operator">=</span> book.element(<span class="hljs-string">&quot;name&quot;</span>);<br>            <span class="hljs-comment">// getText() ;  å¯ä»¥è·å–æ ‡ç­¾ä¸­çš„æ–‡æœ¬å†…å®¹</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">nameText</span> <span class="hljs-operator">=</span> nameElement.getText();<br>            <span class="hljs-comment">// .elementText() ç›´æ¥è·å–æŒ‡å®šæ ‡ç­¾åçš„æ–‡æœ¬å†…å®¹</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">priceText</span> <span class="hljs-operator">=</span> book.elementText(<span class="hljs-string">&quot;price&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">authorText</span> <span class="hljs-operator">=</span> book.elementText(<span class="hljs-string">&quot;author&quot;</span>);<br>            <span class="hljs-comment">// .attributeValue() è·å–å±æ€§</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">snValue</span> <span class="hljs-operator">=</span> book.attributeValue(<span class="hljs-string">&quot;sn&quot;</span>);<br>            <span class="hljs-type">Book</span> <span class="hljs-variable">a_book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(snValue,nameText, BigDecimal.valueOf(Double.parseDouble(priceText)),authorText);<br>            System.out.println(a_book);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><h2 id="Tomcat-IDEA-æ§åˆ¶å°ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#Tomcat-IDEA-æ§åˆ¶å°ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="Tomcat IDEA æ§åˆ¶å°ä¸­æ–‡ä¹±ç é—®é¢˜"></a>Tomcat IDEA æ§åˆ¶å°ä¸­æ–‡ä¹±ç é—®é¢˜</h2><ul><li><p>IntelliJ IDEA åŠé¡¹ç›®é…ç½®</p><ul><li><p>å°† IntelliJ IDEA å’Œé¡¹ç›®å‡é…ç½®ä¸º <code>UTF-8</code> ç¼–ç ï¼›</p><img src="cf041a1e6f0e6b855236aa4b2e31b5fe.png" alt="img" style="zoom:45%;" /></li><li><p>IntelliJ IDEA å¯åŠ¨é¡¹  è¿½åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">-Dfile.encoding</span>=UTF-<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure> <img src="2206227828f73048db229808d7bee5ac.png" alt="img" style="zoom:45%;" /> <img src="3a94a5e374068aec558d76792f521597.png" alt="img" style="zoom:45%;" /></li><li><p>Tomcat é…ç½®</p><p>å¯¹ Tomcat å¯åŠ¨è„šæœ¬ <code>catalina.bat</code> ä¸­çš„ç¯å¢ƒå˜é‡ <code>JAVA_OPTIONS</code> è¿½åŠ å¦‚ä¸‹å‚æ•°ï¼›</p> <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bat">-Dfile.encoding=UTF8 -Dsun.jnu.encoding=UTF8<br></code></pre></td></tr></table></figure> <img src="55638a1fdc3fdff01e0c8dc4d3dad2a0.png" alt="img" style="zoom:45%;" /></li></ul></li></ul><h2 id="JavaWeb-çš„æ¦‚å¿µ"><a href="#JavaWeb-çš„æ¦‚å¿µ" class="headerlink" title="JavaWeb çš„æ¦‚å¿µ"></a>JavaWeb çš„æ¦‚å¿µ</h2><ul><li>JavaWeb æ˜¯æŒ‡ï¼Œæ‰€æœ‰é€šè¿‡ Java è¯­è¨€ç¼–å†™å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®çš„ç¨‹åºçš„æ€»ç§°ï¼Œå« JavaWebã€‚</li><li>JavaWeb æ˜¯åŸºäº<strong>è¯·æ±‚</strong>å’Œ<strong>å“åº”</strong>æ¥å¼€å‘çš„ã€‚<ul><li>è¯·æ±‚ æ˜¯æŒ‡ å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œå«è¯·æ±‚ Requestã€‚</li><li>å“åº” æ˜¯æŒ‡ æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®ï¼Œå«å“åº” Responseã€‚</li><li>è¯·æ±‚å’Œå“åº”æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæœ‰è¯·æ±‚å°±æœ‰å“åº”ã€‚</li></ul></li></ul><h2 id="Web-èµ„æºçš„åˆ†ç±»"><a href="#Web-èµ„æºçš„åˆ†ç±»" class="headerlink" title="Web èµ„æºçš„åˆ†ç±»"></a>Web èµ„æºçš„åˆ†ç±»</h2><ul><li>web èµ„æºæŒ‰å®ç°çš„æŠ€æœ¯å’Œå‘ˆç°çš„æ•ˆæœçš„ä¸åŒï¼Œåˆåˆ†ä¸ºé™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºä¸¤ç§ã€‚<ul><li><strong>é™æ€èµ„æº</strong>ï¼š htmlã€cssã€jsã€txtã€mp4 è§†é¢‘ã€jpg å›¾ç‰‡</li><li><strong>åŠ¨æ€èµ„æº</strong>ï¼š jsp é¡µé¢ã€Servlet ç¨‹åº</li></ul></li></ul><h2 id="å¸¸ç”¨çš„-Web-æœåŠ¡å™¨"><a href="#å¸¸ç”¨çš„-Web-æœåŠ¡å™¨" class="headerlink" title="å¸¸ç”¨çš„ Web æœåŠ¡å™¨"></a>å¸¸ç”¨çš„ Web æœåŠ¡å™¨</h2><ul><li><p>Tomcatï¼š</p><p>ç”± Apache ç»„ç»‡æä¾›çš„ä¸€ç§ Web æœåŠ¡å™¨ï¼Œæä¾›å¯¹ jsp å’Œ Servlet çš„æ”¯æŒã€‚å®ƒæ˜¯ä¸€ç§è½»é‡çº§çš„ javaWeb å®¹å™¨ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œä¹Ÿæ˜¯å½“å‰åº”ç”¨æœ€å¹¿çš„ JavaWeb æœåŠ¡å™¨ï¼ˆå…è´¹ï¼‰ã€‚</p></li><li><p>Jbossï¼š</p><p>æ˜¯ä¸€ä¸ªéµä» JavaEE è§„èŒƒçš„ã€å¼€æ”¾æºä»£ç çš„ã€çº¯ Java çš„ EJB æœåŠ¡å™¨ï¼Œå®ƒæ”¯æŒæ‰€æœ‰çš„ JavaEE è§„èŒƒï¼ˆå…è´¹ï¼‰ã€‚</p></li><li><p>GlassFishï¼š </p><p>ç”± Oracle å…¬å¸å¼€å‘çš„ä¸€æ¬¾ JavaWeb æœåŠ¡å™¨ï¼Œæ˜¯ä¸€æ¬¾å¼ºå¥çš„å•†ä¸šæœåŠ¡å™¨ï¼Œè¾¾åˆ°äº§å“çº§è´¨é‡ï¼ˆåº”ç”¨å¾ˆå°‘ï¼‰ã€‚</p></li><li><p>Resinï¼š</p><p>æ˜¯ CAUCHO å…¬å¸çš„äº§å“ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æœåŠ¡å™¨ï¼Œå¯¹ servlet å’Œ JSP æä¾›äº†è‰¯å¥½çš„æ”¯æŒï¼Œæ€§èƒ½ä¹Ÿæ¯”è¾ƒä¼˜è‰¯ï¼Œresin è‡ªèº«é‡‡ç”¨ JAVA è¯­è¨€å¼€å‘ï¼ˆæ”¶è´¹ï¼Œåº”ç”¨æ¯”è¾ƒå¤šï¼‰ã€‚</p></li><li><p>WebLogicï¼š</p><p>æ˜¯ Oracle å…¬å¸çš„äº§å“ï¼Œæ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„ Web æœåŠ¡å™¨ï¼Œæ”¯æŒ JavaEE è§„èŒƒï¼Œè€Œä¸”ä¸æ–­çš„å®Œå–„ä»¥é€‚åº”æ–°çš„å¼€å‘è¦æ±‚ï¼Œé€‚åˆå¤§å‹é¡¹ç›®ï¼ˆæ”¶è´¹ï¼Œç”¨çš„ä¸å¤šï¼Œé€‚åˆå¤§å…¬å¸ï¼‰ã€‚</p></li></ul><h2 id="Tomcat-æœåŠ¡å™¨å’Œ-Servlet-ç‰ˆæœ¬çš„å¯¹åº”å…³ç³»"><a href="#Tomcat-æœåŠ¡å™¨å’Œ-Servlet-ç‰ˆæœ¬çš„å¯¹åº”å…³ç³»" class="headerlink" title="Tomcat æœåŠ¡å™¨å’Œ Servlet ç‰ˆæœ¬çš„å¯¹åº”å…³ç³»"></a>Tomcat æœåŠ¡å™¨å’Œ Servlet ç‰ˆæœ¬çš„å¯¹åº”å…³ç³»</h2><p>å½“å‰ä¼ä¸šå¸¸ç”¨çš„ç‰ˆæœ¬ 7.*ã€8.*</p> <img src="image-20221029155009337.png" alt="image-20221029155009337" style="zoom: 67%;" /><p>Servlet ç¨‹åºä» 2.5 ç‰ˆæœ¬æ˜¯ç°åœ¨ä¸–é¢ä½¿ç”¨æœ€å¤šçš„ç‰ˆæœ¬ï¼ˆxml é…ç½®ï¼‰</p><p>åˆ°äº† Servlet3.0 ä¹‹åã€‚å°±æ˜¯æ³¨è§£ç‰ˆæœ¬çš„ Servlet ä½¿ç”¨ã€‚</p><p>ä»¥ 2.5 ç‰ˆæœ¬ä¸ºä¸»çº¿è®²è§£ Servlet ç¨‹åºã€‚</p><h2 id="Tomcat-çš„ä½¿ç”¨"><a href="#Tomcat-çš„ä½¿ç”¨" class="headerlink" title="Tomcat çš„ä½¿ç”¨"></a>Tomcat çš„ä½¿ç”¨</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>æ‰¾åˆ°ä½ éœ€è¦ç”¨çš„ Tomcat ç‰ˆæœ¬å¯¹åº”çš„ zip å‹ç¼©åŒ…ï¼Œè§£å‹åˆ°éœ€è¦å®‰è£…çš„ç›®å½•å³å¯ã€‚</p><h3 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h3><ul><li><p>bin              ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcat æœåŠ¡å™¨çš„<strong>å¯æ‰§è¡Œç¨‹åº</strong></p></li><li><p>conf            ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tocmat æœåŠ¡å™¨çš„<strong>é…ç½®æ–‡ä»¶</strong></p></li><li><p>lib                ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcat æœåŠ¡å™¨çš„ <strong>jar åŒ…</strong></p></li><li><p>logs             ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcat æœåŠ¡å™¨è¿è¡Œæ—¶è¾“å‡ºçš„<strong>æ—¥è®°ä¿¡æ¯</strong></p></li><li><p>temp           ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcdat è¿è¡Œæ—¶äº§ç”Ÿçš„<strong>ä¸´æ—¶æ•°æ®</strong></p></li><li><p>webapps    ä¸“é—¨ç”¨æ¥å­˜æ”¾<strong>éƒ¨ç½²çš„ Web å·¥ç¨‹</strong>ã€‚</p></li><li><p>work            æ˜¯ <strong>Tomcat å·¥ä½œæ—¶çš„ç›®å½•</strong>ï¼Œ</p><p>â€‹                     ç”¨æ¥å­˜æ”¾ Tomcat è¿è¡Œæ—¶ jsp ç¿»è¯‘ä¸º Servlet çš„æºç ï¼Œå’Œ Session é’åŒ–ï¼ˆåºåˆ—åŒ–ï¼‰çš„ç›®å½•ã€‚</p></li></ul><h3 id="å¯åŠ¨-Tomcat-æœåŠ¡å™¨"><a href="#å¯åŠ¨-Tomcat-æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨ Tomcat æœåŠ¡å™¨"></a>å¯åŠ¨ Tomcat æœåŠ¡å™¨</h3><ul><li><p>å¦‚ä½•å¯åŠ¨ Tomcat æœåŠ¡å™¨ï¼Ÿ</p></li><li><p>æ‰¾åˆ° Tomcat ç›®å½•ä¸‹çš„ bin ç›®å½•ä¸‹çš„ startup.bat æ–‡ä»¶ï¼ŒåŒå‡»ï¼Œå°±å¯ä»¥å¯åŠ¨ Tomcat æœåŠ¡å™¨ã€‚</p></li><li><p>å¦‚ä½•æµ‹è¯• Tomcat æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Ÿï¼Ÿï¼Ÿ</p><ul><li><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€æµ‹è¯•ï¼š</p></li><li><p>1ã€<a href="http://localhost:8080/">http://localhost:8080</a></p></li><li><p>2ã€<a href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a></p></li><li><p>3ã€http:&#x2F;&#x2F;çœŸå® ip:8080</p></li><li><p>å½“å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¯´æ˜ Tomcat æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼ï¼ï¼</p> <img src="image-20221029155335280.png" alt="image-20221029155335280" style="zoom:50%;" /></li></ul></li><li><p>å¸¸è§çš„å¯åŠ¨å¤±è´¥çš„æƒ…å†µæœ‰ï¼ŒåŒå‡» startup.bat æ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªå°é»‘çª—å£ä¸€é—ªè€Œæ¥ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå¤±è´¥çš„åŸå› åŸºæœ¬ä¸Šéƒ½æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®å¥½ JAVA_HOME ç¯å¢ƒå˜é‡ã€‚</p></li><li><p>é…ç½® JAVA_HOME ç¯å¢ƒå˜é‡ï¼š</p><img src="image-20221029155525513.png" alt="image-20221029155525513" style="zoom:80%;" /></li><li><p>å¦ä¸€ç§å¯åŠ¨ å¦ä¸€ç§å¯åŠ¨ tomcat æœåŠ¡å™¨çš„æ–¹å¼</p><ul><li><p>1ã€æ‰“å¼€å‘½ä»¤è¡Œ</p></li><li><p>2ã€cd åˆ° ä½ çš„ Tomcat çš„ bin ç›®å½•ä¸‹</p> <img src="image-20221029160235155.png" alt="image-20221029160235155" style="zoom:80%;" /></li><li><p>3ã€æ•²å…¥å¯åŠ¨å‘½ä»¤ï¼š catalina run</p></li></ul></li></ul><h3 id="Tomcat-çš„åœæ­¢"><a href="#Tomcat-çš„åœæ­¢" class="headerlink" title="Tomcat çš„åœæ­¢"></a>Tomcat çš„åœæ­¢</h3><ul><li>1ã€ç‚¹å‡» tomcat æœåŠ¡å™¨çª—å£çš„ x å…³é—­æŒ‰é’®</li><li>2ã€æŠŠ Tomcat æœåŠ¡å™¨çª—å£ç½®ä¸ºå½“å‰çª—å£ï¼Œç„¶åæŒ‰å¿«æ·é”® Ctrl+C</li><li><strong>3ã€</strong>æ‰¾åˆ° Tomcat çš„ çš„ bin ç›®å½•ä¸‹çš„ shutdown.bat åŒå‡»ï¼Œå°±å¯ä»¥åœæ­¢ Tomcat æœåŠ¡å™¨</li></ul><h3 id="ä¿®æ”¹-Tomcat-çš„ç«¯å£å·"><a href="#ä¿®æ”¹-Tomcat-çš„ç«¯å£å·" class="headerlink" title="ä¿®æ”¹ Tomcat çš„ç«¯å£å·"></a>ä¿®æ”¹ Tomcat çš„ç«¯å£å·</h3><ul><li><p>Mysql é»˜è®¤çš„ç«¯å£å·æ˜¯ï¼š3306</p></li><li><p>Tomcat é»˜è®¤çš„ç«¯å£å·æ˜¯ï¼š8080</p><ul><li><p>æ‰¾åˆ° Tomcat ç›®å½•ä¸‹çš„ conf ç›®å½•ï¼Œæ‰¾åˆ° server.xml é…ç½®æ–‡ä»¶ã€‚</p> <img src="image-20221029160449832.png" alt="image-20221029160449832" style="zoom:80%;" /></li><li><p>å¹³æ—¶ä¸Šç™¾åº¦ï¼š<a href="http://www.baidu.com/">http://www.baidu.com:80</a></p></li><li><p><strong>HTTP åè®®é»˜è®¤çš„ç«¯å£å·æ˜¯ï¼š80</strong></p></li></ul></li></ul><h3 id="éƒ¨æš‘-web-å·¥ç¨‹åˆ°-Tomcat"><a href="#éƒ¨æš‘-web-å·¥ç¨‹åˆ°-Tomcat" class="headerlink" title="éƒ¨æš‘ web å·¥ç¨‹åˆ° Tomcat"></a>éƒ¨æš‘ web å·¥ç¨‹åˆ° Tomcat</h3><h4 id="ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•"><a href="#ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•" class="headerlink" title="ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•"></a>ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•</h4><p>ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•ï¼šåªéœ€è¦æŠŠ web å·¥ç¨‹çš„ç›®å½•æ‹·è´åˆ° Tomcat çš„ çš„ webapps ç›®å½•ä¸‹å³å¯ã€‚</p><ul><li><p>1ã€åœ¨ webapps ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª book å·¥ç¨‹ï¼š</p> <img src="image-20221029160748750.png" alt="image-20221029160748750" style="zoom:67%;" /></li><li><p>2 ã€æŠŠä¸Šåˆåšçš„ä¹¦åŸç¬¬ä¸€é˜¶æ®µçš„å†…å®¹æ‹·è´åˆ°é‡Œé¢ï¼š</p> <img src="image-20221029160813286.png" alt="image-20221029160813286" style="zoom:67%;" /></li><li><p>3 ã€è®¿é—® Tomcat ä¸‹çš„ web å·¥ç¨‹ï¼š</p><p> åªéœ€è¦åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è®¿é—®åœ°å€æ ¼å¼å¦‚ä¸‹ï¼š<a href="http://ip:port/å·¥ç¨‹å/ç›®å½•ä¸‹/æ–‡ä»¶å">http://ip:port/å·¥ç¨‹å/ç›®å½•ä¸‹/æ–‡ä»¶å</a></p></li></ul><h4 id="ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•"><a href="#ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•" class="headerlink" title="ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•"></a>ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•</h4><ul><li><p>æ‰¾åˆ° Tomcat ä¸‹çš„ conf ç›®å½•\Catalina\localhost\ ä¸‹ï¼Œåˆ›å»ºå¦‚ä¸‹çš„é…ç½®æ–‡ä»¶</p> <img src="image-20221029160918072.png" alt="image-20221029160918072" style="zoom:67%;" /></li><li><p>abc.xml é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Context è¡¨ç¤ºä¸€ä¸ªå·¥ç¨‹ä¸Šä¸‹æ–‡</span><br><span class="hljs-comment">path è¡¨ç¤ºå·¥ç¨‹çš„è®¿é—®è·¯å¾„:/abc</span><br><span class="hljs-comment">docBase è¡¨ç¤ºä½ çš„å·¥ç¨‹ç›®å½•åœ¨å“ªé‡Œ</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Context</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/abc&quot;</span> <span class="hljs-attr">docBase</span>=<span class="hljs-string">&quot;D:\book&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">&lt;Context path=&quot;/web03&quot; docBase=&quot;E:\IdeaProjects\JavaWeb\out\artifacts\web03_war_exploded&quot; /&gt;</span><br><span class="hljs-comment">--&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®è¿™ä¸ªå·¥ç¨‹çš„è·¯å¾„å¦‚ä¸‹ï¼š <a href="http://ip:port/abc/">http://ip:port/abc/</a>  ï¼Œå°±è¡¨ç¤ºè®¿é—® E:\book ç›®å½•</p></li></ul><h3 id="ä¸¤ç§è®¿é—®æ–¹å¼çš„åŒºåˆ«"><a href="#ä¸¤ç§è®¿é—®æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="ä¸¤ç§è®¿é—®æ–¹å¼çš„åŒºåˆ«"></a>ä¸¤ç§è®¿é—®æ–¹å¼çš„åŒºåˆ«</h3><p>ç›´æ¥æ‰“å¼€ html é¡µé¢åˆ°æµè§ˆå™¨ å’Œ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://ip:ç«¯å£å·/">http://ip:ç«¯å£å·/</a> å·¥ç¨‹å&#x2F;    è®¿é—®çš„åŒºåˆ«</p><ul><li><p>æ‰‹æ‰˜ html é¡µé¢çš„åŸç†ï¼š</p> <img src="image-20221029162622306.png" alt="image-20221029162622306" style="zoom:80%;" /></li><li><p>è¾“å…¥è®¿é—®åœ°å€è®¿é—®çš„åŸç†ï¼š</p> <img src="image-20221029162650394.png" alt="image-20221029162650394" style="zoom:80%;" /></li></ul><h3 id="ROOT-å·¥ç¨‹-amp-é»˜è®¤-index-html-é¡µé¢çš„è®¿é—®"><a href="#ROOT-å·¥ç¨‹-amp-é»˜è®¤-index-html-é¡µé¢çš„è®¿é—®" class="headerlink" title="ROOT å·¥ç¨‹&amp;é»˜è®¤ index.html é¡µé¢çš„è®¿é—®"></a>ROOT å·¥ç¨‹&amp;é»˜è®¤ index.html é¡µé¢çš„è®¿é—®</h3><ul><li>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥è®¿é—®åœ°å€å¦‚ä¸‹ï¼š<ul><li><a href="http://ip:port/">http://ip:port/</a>    &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt; æ²¡æœ‰å·¥ç¨‹åçš„æ—¶å€™ï¼Œé»˜è®¤è®¿é—®çš„æ˜¯ ROOT å·¥ç¨‹ã€‚</li></ul></li><li>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥çš„è®¿é—®åœ°å€å¦‚ä¸‹ï¼š<ul><li><a href="http://ip:port/å·¥ç¨‹å/">http://ip:port/å·¥ç¨‹å/</a>   &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt; æ²¡æœ‰èµ„æºåï¼Œé»˜è®¤è®¿é—® index.html é¡µé¢</li></ul></li></ul><h2 id="Servlet-æŠ€æœ¯"><a href="#Servlet-æŠ€æœ¯" class="headerlink" title="Servlet æŠ€æœ¯"></a>Servlet æŠ€æœ¯</h2><h3 id="ä»€ä¹ˆæ˜¯Servlet"><a href="#ä»€ä¹ˆæ˜¯Servlet" class="headerlink" title="ä»€ä¹ˆæ˜¯Servlet"></a>ä»€ä¹ˆæ˜¯Servlet</h3><ul><li><p>1ã€Servlet æ˜¯ JavaEE è§„èŒƒä¹‹ä¸€ã€‚è§„èŒƒå°±æ˜¯<strong>æ¥å£</strong> </p></li><li><p>2ã€Servlet å°± JavaWeb ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚</p><p>â€‹       ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Filter è¿‡æ»¤å™¨ã€Listener ç›‘å¬å™¨ã€‚ </p></li><li><p>3ã€Servlet æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªå°å‹ java ç¨‹åº</p><p>â€‹       å®ƒå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚</p></li></ul><h3 id="æ‰‹åŠ¨å®ç°-Servlet-ç¨‹åº"><a href="#æ‰‹åŠ¨å®ç°-Servlet-ç¨‹åº" class="headerlink" title="æ‰‹åŠ¨å®ç° Servlet ç¨‹åº"></a>æ‰‹åŠ¨å®ç° Servlet ç¨‹åº</h3><ul><li><p>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç° Servlet æ¥å£</p></li><li><p>2ã€å®ç° service æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®</p></li><li><p>3ã€åˆ° web.xml ä¸­å»é…ç½® servlet ç¨‹åºçš„è®¿é—®åœ°å€</p></li><li><p>Servlet ç¨‹åºçš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.javaWebStudy.servlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ServletConfig <span class="hljs-title function_">getServletConfig</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * service æ–¹æ³•æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„ï¼Œåªè¦è®¿é—®è¯¥ç±»ï¼Œå°±ä¼šæ‰§è¡Œè¯¥æ–¹æ³•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> servletRequest</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> servletResponse</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello Servlet è¢«è®¿é—®äº†&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getServletInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- servlet æ ‡ç­¾ç»™Tomcaté…ç½®Servletç¨‹åº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- servlet-name æ ‡ç­¾ç”¨æ¥ç»™Servletç¨‹åºèµ·åˆ«åï¼ˆä¸€èˆ¬æ˜¯ç±»åï¼‰--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- servlet-class æ˜¯Servletç¨‹åºçš„å…¨ç±»å--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- servlet-mapping æ ‡ç­¾ç»™servletç¨‹åºé…ç½®è®¿é—®åœ°å€ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- servlet-nameæ ‡ç­¾çš„ä½œç”¨æ˜¯å‘Šè¯‰æœåŠ¡å™¨ï¼Œå½“å‰é…ç½®çš„åœ°å€ç»™å“ªä¸ªSercletç¨‹åºä½¿ç”¨ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- url-patternæ ‡ç­¾é…ç½®è®¿é—®åœ°å€</span><br><span class="hljs-comment">            / æ–œæ åœ¨æœåŠ¡å™¨è§£æçš„æ—¶å€™è¡¨ç¤ºåœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„</span><br><span class="hljs-comment">            /hello è¡¨ç¤ºåœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„/hello</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h4><ul><li><p>å¸¸è§çš„é”™è¯¯ 1ï¼šurl-pattern ä¸­é…ç½®çš„è·¯å¾„æ²¡æœ‰ä»¥æ–œæ æ‰“å¤´ï¼š</p> <img src="image-20221030094353203.png" alt="image-20221030094353203" style="zoom: 50%;" /></li><li><p>å¸¸è§é”™è¯¯ 2ï¼šservlet-name é…ç½®çš„å€¼ä¸å­˜åœ¨ï¼šï¼ˆè¦å’Œå‰é¢èµ·åˆ«åæ—¶ä¸€è‡´ï¼‰</p> <img src="image-20221030094456238.png" alt="image-20221030094456238" style="zoom:50%;" /></li><li><p>å¸¸è§é”™è¯¯ 3ï¼šservlet-class æ ‡ç­¾çš„å…¨ç±»åé…ç½®é”™è¯¯ï¼šï¼ˆideaè‡ªåŠ¨ç”Ÿæˆï¼Œä¸ä¼šå‡ºé”™ï¼‰</p> <img src="image-20221030094525077.png" alt="image-20221030094525077" style="zoom:50%;" /></li></ul><h4 id="åŸç†è¯´æ˜"><a href="#åŸç†è¯´æ˜" class="headerlink" title="åŸç†è¯´æ˜"></a>åŸç†è¯´æ˜</h4><p><img src="/2022/10/03/JavaWebNote/image-20221030095342744.png" alt="image-20221030095342744"></p><h4 id="Servlet-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Servlet-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Servlet çš„ç”Ÿå‘½å‘¨æœŸ"></a>Servlet çš„ç”Ÿå‘½å‘¨æœŸ</h4><ul><li>1ã€æ‰§è¡Œ Servlet æ„é€ å™¨æ–¹æ³• </li><li>2ã€æ‰§è¡Œ init åˆå§‹åŒ–æ–¹æ³• <ul><li>ç¬¬ä¸€ã€äºŒæ­¥ï¼Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»º Servlet ç¨‹åºä¼šè°ƒç”¨ã€‚</li></ul></li><li>3ã€æ‰§è¡Œ service æ–¹æ³• <ul><li>ç¬¬ä¸‰æ­¥ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šè°ƒç”¨ã€‚</li></ul></li><li>4ã€æ‰§è¡Œ destroy é”€æ¯æ–¹æ³• <ul><li>ç¬¬å››æ­¥ï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™è°ƒç”¨ã€‚</li></ul></li></ul><h4 id="GET-å’Œ-POST-è¯·æ±‚çš„åˆ†å‘å¤„ç†"><a href="#GET-å’Œ-POST-è¯·æ±‚çš„åˆ†å‘å¤„ç†" class="headerlink" title="GET å’Œ POST è¯·æ±‚çš„åˆ†å‘å¤„ç†"></a>GET å’Œ POST è¯·æ±‚çš„åˆ†å‘å¤„ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello Servlet è¢«è®¿é—®äº†&quot;</span>);<br>        <span class="hljs-comment">//ç±»å‹è½¬æ¢ï¼ˆå› ä¸ºHttpServletRequestæœ‰getMethod()æ–¹æ³•ï¼‰</span><br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">httpServletRequest</span> <span class="hljs-operator">=</span> (HttpServletRequest) servletRequest;<br>        <span class="hljs-comment">//è·å–è¯·æ±‚çš„æ–¹å¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> httpServletRequest.getMethod();<br><br>        <span class="hljs-keyword">if</span>(method.equals(<span class="hljs-string">&quot;GET&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;getè¯·æ±‚&quot;</span>);<br>            <span class="hljs-comment">//GETæ–¹æ³•éœ€è¦åšçš„äº‹å¯ä»¥å°è£…æˆå‡½æ•°ï¼Œç„¶ååœ¨è¿™é‡Œè°ƒç”¨</span><br>            doGet();<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(method.equals(<span class="hljs-string">&quot;POST&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;postè¯·æ±‚&quot;</span>);<br>            <span class="hljs-comment">//POSTæ–¹æ³•éœ€è¦åšçš„äº‹å¯ä»¥å°è£…æˆå‡½æ•°ï¼Œç„¶ååœ¨è¿™é‡Œè°ƒç”¨</span><br>            doPost();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;doGet&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;doPost&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é€šè¿‡ç»§æ‰¿-HttpServlet-å®ç°-Servlet-ç¨‹åº"><a href="#é€šè¿‡ç»§æ‰¿-HttpServlet-å®ç°-Servlet-ç¨‹åº" class="headerlink" title="é€šè¿‡ç»§æ‰¿ HttpServlet å®ç° Servlet ç¨‹åº"></a>é€šè¿‡ç»§æ‰¿ HttpServlet å®ç° Servlet ç¨‹åº</h4><p><strong>ä¸€èˆ¬åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œéƒ½æ˜¯ä½¿ç”¨ç»§æ‰¿ HttpServlet ç±»çš„æ–¹å¼å»å®ç° Servlet ç¨‹åºã€‚</strong> </p><ul><li><p>1ã€ç¼–å†™ä¸€ä¸ªç±»å»ç»§æ‰¿ HttpServlet ç±» </p></li><li><p>2ã€æ ¹æ®ä¸šåŠ¡éœ€è¦é‡å†™ doGet æˆ– doPost æ–¹æ³• </p> <img src="image-20221030104054342.png" alt="image-20221030104054342" style="zoom: 50%;" /></li><li><p>3ã€åˆ° web.xml ä¸­çš„é…ç½® Servlet ç¨‹åºçš„è®¿é—®åœ°å€</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet2<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.HelloServlet2<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet2<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello2<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-comment">//doGet()åœ¨getè¯·æ±‚çš„æ—¶å€™è°ƒç”¨</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doGet&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//doPost()åœ¨postè¯·æ±‚çš„æ—¶å€™è°ƒç”¨</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doPost&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h4 id="ä½¿ç”¨-IDEA-åˆ›å»º-Servlet-ç¨‹åº"><a href="#ä½¿ç”¨-IDEA-åˆ›å»º-Servlet-ç¨‹åº" class="headerlink" title="ä½¿ç”¨ IDEA åˆ›å»º Servlet ç¨‹åº"></a>ä½¿ç”¨ IDEA åˆ›å»º Servlet ç¨‹åº</h4><p>æ³¨æ„ï¼š2022ç‰ˆçš„ IDEA å¥½åƒæ²¡æœ‰è¿™ä¸ªåŠŸèƒ½</p><ul><li><p>èœå•ï¼šnew -&gt;Servlet ç¨‹åº</p> <img src="image-20221030105212354.png" alt="image-20221030105212354" style="zoom:50%;" /></li><li><p>é…ç½® Servlet çš„ä¿¡æ¯</p> <img src="image-20221030105334396.png" alt="image-20221030105334396" style="zoom:50%;" /></li></ul><h4 id="Servlet-ç±»çš„ç»§æ‰¿ä½“ç³»"><a href="#Servlet-ç±»çš„ç»§æ‰¿ä½“ç³»" class="headerlink" title="Servlet ç±»çš„ç»§æ‰¿ä½“ç³»"></a>Servlet ç±»çš„ç»§æ‰¿ä½“ç³»</h4><p><img src="/2022/10/03/JavaWebNote/image-20221030105855998.png" alt="image-20221030105855998"></p><h3 id="ServletConfig-ç±»"><a href="#ServletConfig-ç±»" class="headerlink" title="ServletConfig ç±»"></a>ServletConfig ç±»</h3><ul><li><p>ServletConfig ç±»ä»ç±»åä¸Šæ¥çœ‹ï¼Œå°±çŸ¥é“æ˜¯ Servlet ç¨‹åºçš„é…ç½®ä¿¡æ¯ç±»ã€‚ </p></li><li><p>Servlet ç¨‹åºå’Œ ServletConfig å¯¹è±¡éƒ½æ˜¯ç”± Tomcat è´Ÿè´£åˆ›å»ºï¼Œæˆ‘ä»¬è´Ÿè´£ä½¿ç”¨ã€‚ </p></li><li><p>Servlet ç¨‹åºé»˜è®¤æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»ºï¼ŒServletConfig æ˜¯æ¯ä¸ª Servlet ç¨‹åºåˆ›å»ºæ—¶ï¼Œå°±åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ServletConfig å¯¹è±¡ã€‚</p></li><li><p>åªèƒ½å¾—åˆ°è‡ªå·±çš„ ServletConfig å¯¹è±¡ï¼Œä¸èƒ½çš„å…¶ä»–Servlet ç¨‹åºçš„ ServletConfig å¯¹è±¡ã€‚</p></li><li><p>ServletConfig ç±»çš„ä¸‰å¤§ä½œç”¨ï¼š</p><ul><li>1ã€å¯ä»¥è·å– Servlet ç¨‹åºçš„åˆ«å servlet-name çš„å€¼ </li><li>2ã€è·å–åˆå§‹åŒ–å‚æ•° init-param </li><li>3ã€è·å– ServletContext å¯¹è±¡</li></ul></li><li><p>æ¡ˆä¾‹ä»£ç ï¼š</p><ul><li><p>web.xml ä¸­çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- servlet æ ‡ç­¾ç»™Tomcaté…ç½®Servletç¨‹åº --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet-name æ ‡ç­¾ç”¨æ¥ç»™Servletç¨‹åºèµ·åˆ«åï¼ˆä¸€èˆ¬æ˜¯ç±»åï¼‰--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet-class æ˜¯Servletç¨‹åºçš„å…¨ç±»å--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- init-param æ˜¯åˆå§‹åŒ–å‚æ•°ï¼Œå¯ä»¥é…ç½®å¤šç»„ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- param-name æ˜¯å‚æ•°å --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- param-value æ˜¯å‚æ•°å€¼ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- servlet-mapping æ ‡ç­¾ç»™servletç¨‹åºé…ç½®è®¿é—®åœ°å€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet-nameæ ‡ç­¾çš„ä½œç”¨æ˜¯å‘Šè¯‰æœåŠ¡å™¨ï¼Œå½“å‰é…ç½®çš„åœ°å€ç»™å“ªä¸ªSercletç¨‹åºä½¿ç”¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- url-patternæ ‡ç­¾é…ç½®è®¿é—®åœ°å€</span><br><span class="hljs-comment">            / æ–œæ åœ¨æœåŠ¡å™¨è§£æçš„æ—¶å€™è¡¨ç¤ºåœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„</span><br><span class="hljs-comment">            /hello è¡¨ç¤ºåœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„/hello</span><br><span class="hljs-comment">        --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Servlet ä¸­çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">HelloServlet</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ„é€ å™¨æ–¹æ³•&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>        <span class="hljs-comment">//super.init(config); //å®ç°æ¥å£çš„æ–¹å¼æ²¡æœ‰è¯¥æ“ä½œ</span><br>        System.out.println(<span class="hljs-string">&quot;initåˆå§‹åŒ–æ–¹æ³•&quot;</span>);<br>        <span class="hljs-comment">//- 1ã€å¯ä»¥è·å– Servlet ç¨‹åºçš„åˆ«å servlet-name çš„å€¼</span><br>        System.out.println(<span class="hljs-string">&quot;HelloServletç¨‹åºçš„åˆ«åæ˜¯ï¼š&quot;</span>+servletConfig.getServletName());<br>        <span class="hljs-comment">//- 2ã€è·å–åˆå§‹åŒ–å‚æ•° init-param</span><br>        System.out.println(<span class="hljs-string">&quot;åˆå§‹åŒ–å‚æ•°usernameçš„å€¼ä¸ºï¼š&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;åˆå§‹åŒ–å‚æ•°urlçš„å€¼ä¸ºï¼š&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>));<br>        <span class="hljs-comment">//- 3ã€è·å– ServletContext å¯¹è±¡</span><br>        System.out.println(<span class="hljs-string">&quot;ServletContext å¯¹è±¡ä¸ºï¼š&quot;</span>+servletConfig.getServletContext());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><img src="image-20221030113608300.png" alt="image-20221030113608300" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig config)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>        <span class="hljs-comment">//é‡å†™initæ–¹æ³•é‡Œé¢ä¸€å®šè¦è°ƒç”¨çˆ¶ç±»çš„init(ServletConfig config)æ–¹æ³•</span><br>        <span class="hljs-built_in">super</span>.init(config);<br>    &#125;<br><br>    <span class="hljs-comment">//doGet()åœ¨getè¯·æ±‚çš„æ—¶å€™è°ƒç”¨</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doGet&quot;</span>);<br>        <span class="hljs-type">ServletConfig</span> <span class="hljs-variable">servletConfig</span> <span class="hljs-operator">=</span> getServletConfig();<br>        <span class="hljs-comment">//- 1ã€å¯ä»¥è·å– Servlet ç¨‹åºçš„åˆ«å servlet-name çš„å€¼</span><br>        System.out.println(<span class="hljs-string">&quot;HelloServletç¨‹åºçš„åˆ«åæ˜¯ï¼š&quot;</span>+servletConfig.getServletName());<br>        <span class="hljs-comment">//- 2ã€è·å–åˆå§‹åŒ–å‚æ•° init-param</span><br>        System.out.println(<span class="hljs-string">&quot;åˆå§‹åŒ–å‚æ•°usernameçš„å€¼ä¸ºï¼š&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;åˆå§‹åŒ–å‚æ•°urlçš„å€¼ä¸ºï¼š&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>));<br>        <span class="hljs-comment">//- 3ã€è·å– ServletContext å¯¹è±¡</span><br>        System.out.println(<span class="hljs-string">&quot;ServletContext å¯¹è±¡ï¼š&quot;</span>+servletConfig.getServletContext());<br>    &#125;<br>    <span class="hljs-comment">//doPost()åœ¨postè¯·æ±‚çš„æ—¶å€™è°ƒç”¨</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doPost&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="ServletContext-ç±»"><a href="#ServletContext-ç±»" class="headerlink" title="ServletContext ç±»"></a>ServletContext ç±»</h3><h4 id="ä»€ä¹ˆæ˜¯-ServletContext"><a href="#ä»€ä¹ˆæ˜¯-ServletContext" class="headerlink" title="ä»€ä¹ˆæ˜¯ ServletContext"></a>ä»€ä¹ˆæ˜¯ ServletContext</h4><ul><li><p>1ã€ServletContext æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒè¡¨ç¤º Servlet ä¸Šä¸‹æ–‡å¯¹è±¡</p></li><li><p>2ã€<strong>ä¸€ä¸ª web å·¥ç¨‹ï¼Œåªæœ‰ä¸€ä¸ª ServletContext å¯¹è±¡å®ä¾‹ã€‚</strong></p></li><li><p>3ã€ServletContext å¯¹è±¡æ˜¯ä¸€ä¸ª<strong>åŸŸå¯¹è±¡</strong>ã€‚</p></li><li><p>4ã€ServletContext æ˜¯åœ¨ web å·¥ç¨‹éƒ¨ç½²å¯åŠ¨çš„æ—¶å€™åˆ›å»ºã€‚åœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯åŸŸå¯¹è±¡?</p><ul><li><p>åŸŸå¯¹è±¡ï¼Œæ˜¯<strong>å¯ä»¥åƒ Map ä¸€æ ·å­˜å–æ•°æ®</strong>çš„å¯¹è±¡ï¼Œå«åŸŸå¯¹è±¡ã€‚</p></li><li><p>è¿™é‡Œçš„<strong>åŸŸæŒ‡çš„æ˜¯å­˜å–æ•°æ®çš„æ“ä½œèŒƒå›´</strong>ï¼Œæ•´ä¸ª web å·¥ç¨‹ã€‚</p><p>â€‹å­˜æ•°æ® å–æ•°æ® åˆ é™¤æ•°æ®<br>Map put() get() remove()<br>åŸŸå¯¹è±¡ setAttribute() getAttribute() removeAttribute();</p></li></ul></li></ul><h4 id="ServletContext-ç±»çš„å››ä¸ªä½œç”¨"><a href="#ServletContext-ç±»çš„å››ä¸ªä½œç”¨" class="headerlink" title="ServletContext ç±»çš„å››ä¸ªä½œç”¨"></a>ServletContext ç±»çš„å››ä¸ªä½œç”¨</h4><ul><li><p>1ã€è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° context-param</p></li><li><p>2ã€è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„ï¼Œæ ¼å¼: &#x2F;å·¥ç¨‹è·¯å¾„</p></li><li><p>3ã€è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„</p></li><li><p>4ã€åƒ Map ä¸€æ ·å­˜å–æ•°æ®</p></li><li><p>å‰ä¸‰ç‚¹çš„æ¡ˆä¾‹ï¼š</p><ul><li><p>ServletContext æ¼”ç¤ºä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//- 1ã€è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° context-param</span><br>        <span class="hljs-comment">//     æ³¨æ„ï¼šè¯¥æ–¹æ³•ä¸èƒ½å¾—åˆ° init-param ä¸­çš„å†…å®¹</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getServletConfig().getServletContext();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> context.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;context-paramå‚æ•°usernameçš„å€¼æ˜¯ï¼š&quot;</span>+username);<br>        System.out.println(<span class="hljs-string">&quot;context-paramå‚æ•°passwordçš„å€¼æ˜¯ï¼š&quot;</span>+context.getInitParameter(<span class="hljs-string">&quot;password&quot;</span>));<br>        <span class="hljs-comment">//- 2ã€è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„ï¼Œæ ¼å¼: /å·¥ç¨‹è·¯å¾„</span><br>        System.out.println(<span class="hljs-string">&quot;å½“å‰å·¥ç¨‹è·¯å¾„ï¼š&quot;</span>+context.getContextPath());<br>        <span class="hljs-comment">//- 3ã€è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *  / æ–œæ†è¢«æœåŠ¡å™¨è§£æä¸ºåœ°å€ï¼šhttp://ip:port/å·¥ç¨‹å/</span><br><span class="hljs-comment">         *    æ˜ å°„åˆ°IDEAä»£ç çš„webç›®å½•</span><br><span class="hljs-comment">         */</span><br>        System.out.println(<span class="hljs-string">&quot;å·¥ç¨‹éƒ¨ç½²çš„è·¯å¾„æ˜¯ï¼š&quot;</span>+context.getRealPath(<span class="hljs-string">&quot;/&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;å·¥ç¨‹ä¸‹cssç›®å½•çš„ç»å¯¹è·¯å¾„æ˜¯ï¼š&quot;</span>+context.getRealPath(<span class="hljs-string">&quot;/css&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;å·¥ç¨‹ä¸‹imgsç›®å½•çš„pic.jpgçš„ç»å¯¹è·¯å¾„æ˜¯ï¼š&quot;</span>+context.getRealPath(<span class="hljs-string">&quot;/imgs/pic.jpg&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>web.xml ä¸­çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- context-paramæ˜¯ä¸Šä¸‹æ–‡å‚æ•°ï¼ˆå®ƒå±äºæ•´ä¸ªwebå·¥ç¨‹ï¼‰ï¼Œå¯é…ç½®å¤šç»„ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>context<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>password<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ContextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.ContextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ContextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/contextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>æ¡ˆä¾‹ï¼šServletContext åƒ Map ä¸€æ ·å­˜å–æ•°æ®</p><ul><li><p>ContextServlet1 ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextServlet1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//è·å–ServletContextå¯¹è±¡</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getServletContext();<br>        System.out.println(context);<br>        System.out.println(<span class="hljs-string">&quot;ä¿å­˜ä¹‹å‰ï¼šContext1 ä¸­è·å–åŸŸæ•°æ®key1çš„å€¼ï¼š&quot;</span>+context.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>        context.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;value1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;ä¿å­˜ä¹‹åï¼šContext1 ä¸­è·å–åŸŸæ•°æ®key1çš„å€¼ï¼š&quot;</span>+context.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ContextServlet2 ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//è·å–ServletContextå¯¹è±¡</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getServletContext();<br>        System.out.println(context);<br>        System.out.println(<span class="hljs-string">&quot;ä¿å­˜ä¹‹å‰ï¼šContext2 ä¸­è·å–åŸŸæ•°æ®key1çš„å€¼ï¼š&quot;</span>+context.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="Http-åè®®"><a href="#Http-åè®®" class="headerlink" title="Http åè®®"></a>Http åè®®</h2><h3 id="ä»€ä¹ˆæ˜¯-HTTP-åè®®"><a href="#ä»€ä¹ˆæ˜¯-HTTP-åè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯ HTTP åè®®"></a>ä»€ä¹ˆæ˜¯ HTTP åè®®</h3><ul><li>ä»€ä¹ˆæ˜¯åè®®?<ul><li>åè®®æ˜¯æŒ‡åŒæ–¹ï¼Œæˆ–å¤šæ–¹ï¼Œç›¸äº’çº¦å®šå¥½ï¼Œå¤§å®¶éƒ½éœ€è¦éµå®ˆçš„è§„åˆ™ï¼Œå«åè®®ã€‚</li><li>æ‰€è°“ HTTP åè®®ï¼Œå°±æ˜¯æŒ‡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡æ—¶ï¼Œå‘é€çš„æ•°æ®ï¼Œéœ€è¦éµå®ˆçš„è§„åˆ™ï¼Œå« HTTP åè®®ã€‚</li><li>HTTP åè®®ä¸­çš„æ•°æ®åˆå«æŠ¥æ–‡ã€‚</li></ul></li></ul><h3 id="è¯·æ±‚çš„-HTTP-åè®®æ ¼å¼"><a href="#è¯·æ±‚çš„-HTTP-åè®®æ ¼å¼" class="headerlink" title="è¯·æ±‚çš„ HTTP åè®®æ ¼å¼"></a>è¯·æ±‚çš„ HTTP åè®®æ ¼å¼</h3><p>å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€æ•°æ®å«<strong>è¯·æ±‚</strong>ã€‚æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®å«<strong>å“åº”</strong>ã€‚</p><p>è¯·æ±‚åˆåˆ†ä¸º <strong>GET è¯·æ±‚</strong>ï¼Œå’Œ <strong>POST è¯·æ±‚</strong>ä¸¤ç§ï¼š</p><h4 id="GET-è¯·æ±‚"><a href="#GET-è¯·æ±‚" class="headerlink" title="GET è¯·æ±‚"></a>GET è¯·æ±‚</h4><ul><li>1ã€è¯·æ±‚è¡Œ<ul><li>(1) è¯·æ±‚çš„æ–¹å¼ GET</li><li>(2) è¯·æ±‚çš„èµ„æºè·¯å¾„                  [+?+è¯·æ±‚å‚æ•°]</li><li>(3) è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å·          HTTP&#x2F;1.1</li></ul></li><li>2ã€è¯·æ±‚å¤´<ul><li><strong>key : value</strong> ç»„æˆ <strong>ä¸åŒçš„é”®å€¼å¯¹ï¼Œè¡¨ç¤ºä¸åŒçš„å«ä¹‰</strong>ã€‚</li></ul></li></ul><p><img src="/2022/10/03/JavaWebNote/image-20221030172733704.png" alt="image-20221030172733704"></p><h4 id="POST-è¯·æ±‚"><a href="#POST-è¯·æ±‚" class="headerlink" title="POST è¯·æ±‚"></a>POST è¯·æ±‚</h4><ul><li>1ã€è¯·æ±‚è¡Œ<ul><li>(1) è¯·æ±‚çš„æ–¹å¼ POST</li><li>(2) è¯·æ±‚çš„èµ„æºè·¯å¾„                 [+?+è¯·æ±‚å‚æ•°]</li><li>(3) è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å·         HTTP&#x2F;1.1</li></ul></li><li>2ã€è¯·æ±‚å¤´<ul><li><ol><li>key : value ä¸åŒçš„è¯·æ±‚å¤´ï¼Œæœ‰ä¸åŒçš„å«ä¹‰</li></ol></li></ul></li><li>è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ä¹‹é—´æœ‰ä¸€ç©ºè¡Œ</li><li>3ã€è¯·æ±‚ä½“ &#x3D;&#x3D;&#x3D;&gt;&gt;&gt; å°±æ˜¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®</li></ul><p><img src="/2022/10/03/JavaWebNote/image-20221030173417744.png" alt="image-20221030173417744"></p><h4 id="å¸¸ç”¨è¯·æ±‚å¤´çš„è¯´æ˜"><a href="#å¸¸ç”¨è¯·æ±‚å¤´çš„è¯´æ˜" class="headerlink" title="å¸¸ç”¨è¯·æ±‚å¤´çš„è¯´æ˜"></a>å¸¸ç”¨è¯·æ±‚å¤´çš„è¯´æ˜</h4><ul><li>Accept:     è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„æ•°æ®ç±»å‹</li><li>Accpet-Languege:     è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„è¯­è¨€ç±»å‹</li><li>User-Agent:     è¡¨ç¤ºå®¢æˆ·ç«¯æµè§ˆå™¨çš„ä¿¡æ¯</li><li>Hostï¼š   è¡¨ç¤ºè¯·æ±‚æ—¶çš„æœåŠ¡å™¨ ip å’Œç«¯å£å·</li></ul><h4 id="å“ªäº›æ˜¯-GET-è¯·æ±‚ï¼Œå“ªäº›æ˜¯-POST-è¯·æ±‚"><a href="#å“ªäº›æ˜¯-GET-è¯·æ±‚ï¼Œå“ªäº›æ˜¯-POST-è¯·æ±‚" class="headerlink" title="å“ªäº›æ˜¯ GET è¯·æ±‚ï¼Œå“ªäº›æ˜¯ POST è¯·æ±‚"></a>å“ªäº›æ˜¯ GET è¯·æ±‚ï¼Œå“ªäº›æ˜¯ POST è¯·æ±‚</h4><ul><li><strong>GET è¯·æ±‚ï¼š</strong><ul><li>1ã€form æ ‡ç­¾ method&#x3D;get</li><li>2ã€a æ ‡ç­¾</li><li>3ã€link æ ‡ç­¾å¼•å…¥ css</li><li>4ã€Script æ ‡ç­¾å¼•å…¥ js æ–‡ä»¶</li><li>5ã€img æ ‡ç­¾å¼•å…¥å›¾ç‰‡</li><li>6ã€iframe å¼•å…¥ html é¡µé¢</li><li>7ã€åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥åœ°å€åæ•²å›è½¦</li></ul></li><li><strong>POST è¯·æ±‚ï¼š</strong><ul><li>8ã€form æ ‡ç­¾ method&#x3D;post</li></ul></li></ul><h4 id="å“åº”çš„-HTTP-åè®®æ ¼å¼"><a href="#å“åº”çš„-HTTP-åè®®æ ¼å¼" class="headerlink" title="å“åº”çš„ HTTP åè®®æ ¼å¼"></a>å“åº”çš„ HTTP åè®®æ ¼å¼</h4><ul><li>1ã€å“åº”è¡Œ<ul><li>(1) å“åº”çš„åè®®å’Œç‰ˆæœ¬å·</li><li>(2) å“åº”çŠ¶æ€ç </li><li>(3) å“åº”çŠ¶æ€æè¿°ç¬¦</li></ul></li><li>2ã€å“åº”å¤´<ul><li>(1) key : value      ä¸åŒçš„å“åº”å¤´ï¼Œæœ‰å…¶ä¸åŒå«ä¹‰</li></ul></li><li><em>ç©ºè¡Œ</em></li><li>3ã€å“åº”ä½“ â€”-&gt;&gt;&gt; å°±æ˜¯å›ä¼ ç»™å®¢æˆ·ç«¯çš„æ•°æ®</li></ul><p><img src="/2022/10/03/JavaWebNote/image-20221030204645742.png" alt="image-20221030204645742"></p><h4 id="å¸¸ç”¨çš„å“åº”ç è¯´æ˜"><a href="#å¸¸ç”¨çš„å“åº”ç è¯´æ˜" class="headerlink" title="å¸¸ç”¨çš„å“åº”ç è¯´æ˜"></a>å¸¸ç”¨çš„å“åº”ç è¯´æ˜</h4><ul><li>200 è¡¨ç¤ºè¯·æ±‚æˆåŠŸ</li><li>302 è¡¨ç¤ºè¯·æ±‚é‡å®šå‘ï¼ˆæ˜å¤©è®²ï¼‰</li><li>404 è¡¨ç¤ºè¯·æ±‚æœåŠ¡å™¨å·²ç»æ”¶åˆ°äº†ï¼Œä½†æ˜¯ä½ è¦çš„æ•°æ®ä¸å­˜åœ¨ï¼ˆè¯·æ±‚åœ°å€é”™è¯¯ï¼‰</li><li>500 è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼ˆä»£ç é”™è¯¯ï¼‰</li></ul><h4 id="MIME-ç±»å‹è¯´æ˜-ç±»å‹è¯´æ˜"><a href="#MIME-ç±»å‹è¯´æ˜-ç±»å‹è¯´æ˜" class="headerlink" title="MIME ç±»å‹è¯´æ˜ ç±»å‹è¯´æ˜"></a>MIME ç±»å‹è¯´æ˜ ç±»å‹è¯´æ˜</h4><p><strong>MIME æ˜¯ HTTP åè®®ä¸­æ•°æ®ç±»å‹ã€‚</strong></p><p>MIME çš„è‹±æ–‡å…¨ç§°æ˜¯â€Multipurpose Internet Mail Extensionsâ€ å¤šåŠŸèƒ½ Internet é‚®ä»¶æ‰©å……æœåŠ¡ã€‚</p><p>MIME ç±»å‹çš„æ ¼å¼æ˜¯â€œå¤§ç±»å‹&#x2F;å°ç±»å‹â€ï¼Œå¹¶ä¸æŸä¸€ç§æ–‡ä»¶çš„æ‰©å±•åç›¸å¯¹åº”ã€‚</p><ul><li><p>å¸¸è§çš„ MIME ç±»å‹ï¼š</p> <img src="image-20221030205637753.png" alt="image-20221030205637753" style="zoom:80%;" /></li></ul><p>è°·æ­Œæµè§ˆå™¨å¦‚ä½•æŸ¥çœ‹ HTTP åè®®ï¼š</p> <img src="image-20221030205812087.png" alt="image-20221030205812087" style="zoom:80%;" /><h2 id="HttpServletRequest-ç±»"><a href="#HttpServletRequest-ç±»" class="headerlink" title="HttpServletRequest ç±»"></a>HttpServletRequest ç±»</h2><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>æ¯æ¬¡åªè¦æœ‰è¯·æ±‚è¿›å…¥ Tomcat æœåŠ¡å™¨ï¼ŒTomcat æœåŠ¡å™¨å°±ä¼šæŠŠè¯·æ±‚è¿‡æ¥çš„ HTTP åè®®ä¿¡æ¯è§£æå¥½å°è£…åˆ° Request å¯¹è±¡ä¸­ã€‚</p><p>ç„¶åä¼ é€’åˆ° service æ–¹æ³•ï¼ˆdoGet å’Œ doPostï¼‰ä¸­ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚æˆ‘ä»¬<strong>å¯ä»¥é€šè¿‡ HttpServletRequest å¯¹è±¡ï¼Œè·å–åˆ°æ‰€æœ‰è¯·æ±‚çš„ä¿¡æ¯</strong>ã€‚</p><h3 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h3><ul><li><p>getRequestURI() è·å–è¯·æ±‚çš„èµ„æºè·¯å¾„</p></li><li><p>getRequestURL()                        è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰</p></li><li><p>getRemoteHost()                        è·å–å®¢æˆ·ç«¯çš„ ip åœ°å€</p></li><li><p>getHeader()                                 è·å–è¯·æ±‚å¤´</p></li><li><p>getParameter()                           è·å–è¯·æ±‚çš„å‚æ•°</p></li><li><p>getParameterValues()                è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆå¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ï¼‰</p></li><li><p>getMethod()                                è·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST</p></li><li><p>setAttribute(key, value)             è®¾ç½®åŸŸæ•°æ®</p></li><li><p>getAttribute(key)                         è·å–åŸŸæ•°æ®</p></li><li><p>getRequestDispatcher()            è·å–è¯·æ±‚è½¬å‘å¯¹è±¡</p></li><li><p>å¸¸ç”¨ API ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestAPIServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//- getRequestURI() è·å–è¯·æ±‚çš„èµ„æºè·¯å¾„</span><br>        System.out.println(<span class="hljs-string">&quot;URI =&gt; &quot;</span>+req.getRequestURI());<br>        <span class="hljs-comment">//- getRequestURL() è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰</span><br>        System.out.println(<span class="hljs-string">&quot;URL =&gt; &quot;</span>+req.getRequestURL());<br>        <span class="hljs-comment">//- getRemoteHost() è·å–å®¢æˆ·ç«¯çš„ ip åœ°å€</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * åœ¨IDEAä¸­ï¼Œä½¿ç”¨localhostè®¿é—®æ—¶ï¼Œå¾—åˆ°çš„å®¢æˆ·ç«¯ipåœ°å€æ—¶ ==&gt;&gt; 0:0:0:0:0:0:0:1ï¼ˆipv6ï¼‰</span><br><span class="hljs-comment">         * åœ¨IDEAä¸­ï¼Œä½¿ç”¨127.0.0.1è®¿é—®æ—¶ï¼Œå¾—åˆ°çš„å®¢æˆ·ç«¯ipåœ°å€æ—¶ ==&gt;&gt; 127.0.0.1</span><br><span class="hljs-comment">         * åœ¨IDEAä¸­ï¼Œä½¿ç”¨ çœŸå®ip è®¿é—®æ—¶ï¼Œå¾—åˆ°çš„å®¢æˆ·ç«¯ipåœ°å€æ—¶ ==&gt;&gt; çœŸå®çš„å®¢æˆ·ç«¯ipåœ°å€</span><br><span class="hljs-comment">         */</span><br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ ipåœ°å€ =&gt; &quot;</span>+req.getRemoteHost());<br>        <span class="hljs-comment">//- getHeader() è·å–è¯·æ±‚å¤´</span><br>        System.out.println(<span class="hljs-string">&quot;è¯·æ±‚å¤´ User-Agent =&gt; &quot;</span>+req.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>));<br>        <span class="hljs-comment">//- getMethod() è·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST</span><br>        System.out.println(<span class="hljs-string">&quot;è¯·æ±‚çš„æ–¹å¼ =&gt; &quot;</span>+req.getMethod());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="å¦‚ä½•è·å–è¯·æ±‚å‚æ•°"><a href="#å¦‚ä½•è·å–è¯·æ±‚å‚æ•°" class="headerlink" title="å¦‚ä½•è·å–è¯·æ±‚å‚æ•°"></a>å¦‚ä½•è·å–è¯·æ±‚å‚æ•°</h3><ul><li><p>è¡¨å•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:8080/07_servlet/parameterServlet&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br>        ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        å…´è¶£çˆ±å¥½ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;cpp&quot;</span>&gt;</span>C++<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;java&quot;</span>&gt;</span>Java<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>java ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// è·å–è¯·æ±‚å‚æ•°</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        String[] hobby = req.getParameterValues(<span class="hljs-string">&quot;hobby&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; ç”¨æˆ·åï¼š&quot;</span> + username);<br>        System.out.println(<span class="hljs-string">&quot; å¯†ç ï¼š&quot;</span> + password);<br>        System.out.println(<span class="hljs-string">&quot; å…´è¶£çˆ±å¥½ï¼š&quot;</span> + Arrays.asList(hobby));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="POST-ä¸­æ–‡ä¹±ç è§£å†³"><a href="#POST-ä¸­æ–‡ä¹±ç è§£å†³" class="headerlink" title="POST ä¸­æ–‡ä¹±ç è§£å†³"></a>POST ä¸­æ–‡ä¹±ç è§£å†³</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-comment">// è®¾ç½®è¯·æ±‚ä½“çš„å­—ç¬¦é›†ä¸º UTF-8 ï¼Œä»è€Œè§£å†³ post è¯·æ±‚çš„ä¸­æ–‡ä¹±ç é—®é¢˜</span><br>    <span class="hljs-comment">//éœ€è¦åœ¨è·å–è¯·æ±‚å‚æ•°ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span><br>    req.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    <br>    System.out.println(<span class="hljs-string">&quot;-------------doPost------------&quot;</span>);<br>    <span class="hljs-comment">// è·å–è¯·æ±‚å‚æ•°</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>    String[] hobby = req.getParameterValues(<span class="hljs-string">&quot;hobby&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot; ç”¨æˆ·åï¼š&quot;</span> + username);<br>    System.out.println(<span class="hljs-string">&quot; å¯†ç ï¼š&quot;</span> + password);<br>    System.out.println(<span class="hljs-string">&quot; å…´è¶£çˆ±å¥½ï¼š&quot;</span> + Arrays.asList(hobby));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¯·æ±‚çš„è½¬å‘"><a href="#è¯·æ±‚çš„è½¬å‘" class="headerlink" title="è¯·æ±‚çš„è½¬å‘"></a>è¯·æ±‚çš„è½¬å‘</h2><p>è¯·æ±‚çš„è½¬å‘æ˜¯æŒ‡ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä»ä¸€ä¸ªèµ„æºè·³è½¬åˆ°å¦ä¸€ä¸ªèµ„æºçš„æ“ä½œå«è¯·æ±‚è½¬å‘ã€‚</p><p><img src="/2022/10/03/JavaWebNote/image-20221030221835187.png" alt="image-20221030221835187"></p><ul><li><p><strong>è¯·æ±‚è½¬å‘çš„ç‰¹ç‚¹ï¼š</strong></p><ul><li>1ã€æµè§ˆå™¨åœ°å€æ æ²¡æœ‰å˜åŒ–</li><li>2ã€ä»–ä»¬æ˜¯ä¸€æ¬¡è¯·æ±‚</li><li>3ã€ä»–ä»¬å…±äº«RequeståŸŸä¸­çš„æ•°æ®</li><li>4ã€å¯ä»¥è½¬å‘åˆ°WEB-INFç›®å½•ä¸‹ï¼ˆæµè§ˆå™¨ä¸èƒ½ç›´æ¥é€šè¿‡åœ°å€è®¿é—®WEB-INFç›®å½•ï¼‰</li><li>5ã€ä¸å¯ä»¥è®¿é—®å·¥ç¨‹ä»¥å¤–çš„èµ„æº</li></ul></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p>Servlet1 ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Servlet1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆåŠäº‹çš„ææ–™ï¼‰æŸ¥çœ‹</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;åœ¨ åœ¨ Servlet1 ï¼ˆæŸœå° 1 ï¼‰ä¸­æŸ¥çœ‹å‚æ•°ï¼ˆææ–™ï¼‰ï¼š&quot;</span> + username);<br>        <span class="hljs-comment">// ç»™ææ–™ ç›–ä¸€ä¸ªç« ï¼Œå¹¶ä¼ é€’åˆ° Servlet2 ï¼ˆæŸœå° 2 ï¼‰å»æŸ¥çœ‹</span><br>        req.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot; æŸœå° 1 çš„ç« &quot;</span>);<br>        <span class="hljs-comment">// é—®è·¯ï¼š Servlet2 ï¼ˆæŸœå° 2 ï¼‰æ€ä¹ˆèµ°</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">* è¯·æ±‚è½¬å‘å¿…é¡»è¦ä»¥æ–œæ æ‰“å¤´ï¼Œ / æ–œæ è¡¨ç¤ºåœ°å€ä¸ºï¼š http://ip:port/ å·¥ç¨‹å / , æ˜ å°„åˆ° IDEA ä»£ç çš„ web ç›®å½•</span><br><span class="hljs-comment">&lt;br/&gt;</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">*/</span><br>        <span class="hljs-type">RequestDispatcher</span> <span class="hljs-variable">requestDispatcher</span> <span class="hljs-operator">=</span> req.getRequestDispatcher(<span class="hljs-string">&quot;/servlet2&quot;</span>);<br>        <span class="hljs-comment">// RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;http://www.baidu.com&quot;);</span><br>        <span class="hljs-comment">// èµ°å‘ Sevlet2 ï¼ˆæŸœå° 2 ï¼‰</span><br>        requestDispatcher.forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Servlet2 ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Servlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆåŠäº‹çš„ææ–™ï¼‰æŸ¥çœ‹</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;åœ¨ åœ¨ Servlet2 ï¼ˆæŸœå° 2 ï¼‰ä¸­æŸ¥çœ‹å‚æ•°ï¼ˆææ–™ï¼‰ï¼š&quot;</span> + username);<br>        <span class="hljs-comment">// æŸ¥çœ‹ æŸœå° 1 æ˜¯å¦æœ‰ç›–ç« </span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">key1</span> <span class="hljs-operator">=</span> req.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; æŸœå° 1 æ˜¯å¦æœ‰ç« ï¼š&quot;</span> + key1);<br>        <span class="hljs-comment">// å¤„ç†è‡ªå·±çš„ä¸šåŠ¡</span><br>        System.out.println(<span class="hljs-string">&quot;Servlet2 åŠ¡ å¤„ç†è‡ªå·±çš„ä¸šåŠ¡ &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="base-æ ‡ç­¾çš„ä½œç”¨"><a href="#base-æ ‡ç­¾çš„ä½œç”¨" class="headerlink" title="base æ ‡ç­¾çš„ä½œç”¨"></a>base æ ‡ç­¾çš„ä½œç”¨</h2><p><strong>baseæ ‡ç­¾å¯ä»¥è®¾ç½®å½“å‰é¡µé¢ä¸­æ‰€æœ‰ç›¸å¯¹è·¯å¾„å·¥ä½œæ—¶ï¼Œå‚ç…§å“ªä¸ªè·¯å¾„æ¥è¿›è¡Œè·³è½¬</strong></p> <img src="image-20221030225950922.png" alt="image-20221030225950922" style="zoom: 80%;" /> <img src="image-20221030230007804.png" alt="image-20221030230007804" style="zoom:80%;" /><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- c.html --&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh_CN&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- base æ ‡ç­¾è®¾ç½®é¡µé¢ç›¸å¯¹è·¯å¾„å·¥ä½œæ—¶å‚ç…§çš„åœ°å€</span><br><span class="hljs-comment"> href å±æ€§å°±æ˜¯å‚æ•°çš„åœ°å€å€¼ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- è¡¥å……è¯´æ˜ c.html å¯çœç•¥ </span><br><span class="hljs-comment">&lt;base href=&quot;http://localhost:8080/study_07_servlet/a/b/&quot;&gt;</span><br><span class="hljs-comment">--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">base</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://localhost:8080/study_07_servlet/a/b/c.html&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        è¿™æ˜¯ a ä¸‹çš„ b ä¸‹çš„ c.html é¡µé¢<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../../index.html&quot;</span>&gt;</span>è·³å›é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="Web-ä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"><a href="#Web-ä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„" class="headerlink" title="Web ä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"></a>Web ä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„</h2><ul><li>åœ¨ javaWeb ä¸­ï¼Œè·¯å¾„åˆ†ä¸ºç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ä¸¤ç§ï¼š</li><li>ç›¸å¯¹è·¯å¾„æ˜¯ï¼š<ul><li>. è¡¨ç¤ºå½“å‰ç›®å½•</li><li>..                            è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•</li><li>èµ„æºå                   è¡¨ç¤ºå½“å‰ç›®å½•&#x2F;èµ„æºå</li></ul></li><li>ç»å¯¹è·¯å¾„ï¼š<ul><li><a href="http://ip:port/å·¥ç¨‹è·¯å¾„/èµ„æºè·¯å¾„">http://ip:port/å·¥ç¨‹è·¯å¾„/èµ„æºè·¯å¾„</a></li></ul></li><li><strong>åœ¨JavaWebå®é™…å¼€å‘ä¸­ï¼Œè·¯å¾„éƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œè€Œä¸ç®€å•çš„ä½¿ç”¨ç›¸å¯¹è·¯å¾„</strong>ã€‚<ul><li>1ã€ç»å¯¹è·¯å¾„</li><li>2ã€base + ç›¸å¯¹</li></ul></li></ul><h2 id="webä¸­-x2F-æ–œæ çš„ä¸åŒæ„ä¹‰"><a href="#webä¸­-x2F-æ–œæ çš„ä¸åŒæ„ä¹‰" class="headerlink" title="webä¸­ &#x2F; æ–œæ çš„ä¸åŒæ„ä¹‰"></a>webä¸­ &#x2F; æ–œæ çš„ä¸åŒæ„ä¹‰</h2><ul><li><p>åœ¨ web ä¸­ &#x2F; æ–œæ  æ˜¯ä¸€ç§<strong>ç»å¯¹è·¯å¾„</strong>ã€‚</p></li><li><p>&#x2F; æ–œæ  å¦‚æœè¢«æµè§ˆå™¨è§£æï¼Œå¾—åˆ°çš„åœ°å€æ˜¯ï¼š<a href="http://ip:port/">http://ip:port/</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>æ–œæ <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>&#x2F; æ–œæ  å¦‚æœè¢«æœåŠ¡å™¨è§£æï¼Œå¾—åˆ°çš„åœ°å€æ˜¯ï¼š<a href="http://ip:port/å·¥ç¨‹è·¯å¾„">http://ip:port/å·¥ç¨‹è·¯å¾„</a>   (Webç›®å½•ä¸‹)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/servlet1<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">servletContext.getRealPath(â€œ/â€);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">request.getRequestDispatcher(â€œ/â€);<br></code></pre></td></tr></table></figure></li><li><p>ç‰¹æ®Šæƒ…å†µï¼š response.sendRediect(â€œ&#x2F;â€);       æŠŠæ–œæ å‘é€ç»™æµè§ˆå™¨è§£æã€‚å¾—åˆ° <a href="http://ip:port/">http://ip:port/</a></p></li></ul><h2 id="HttpServletResponse-ç±»"><a href="#HttpServletResponse-ç±»" class="headerlink" title="HttpServletResponse ç±»"></a>HttpServletResponse ç±»</h2><h3 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>HttpServletResponse ç±»å’Œ HttpServletRequest ç±»ä¸€æ ·ã€‚æ¯æ¬¡è¯·æ±‚è¿›æ¥ï¼ŒTomcat æœåŠ¡å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Response å¯¹è±¡ä¼ é€’ç»™ Servlet ç¨‹åºå»ä½¿ç”¨ã€‚</p><p>HttpServletRequest è¡¨ç¤ºè¯·æ±‚è¿‡æ¥çš„ä¿¡æ¯ï¼ŒHttpServletResponse è¡¨ç¤ºæ‰€æœ‰å“åº”çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦è®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œéƒ½å¯ä»¥é€šè¿‡ HttpServletResponse å¯¹è±¡æ¥è¿›è¡Œè®¾ç½®</p><h3 id="ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜"><a href="#ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜" class="headerlink" title="ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜"></a>ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜</h3><ul><li><p>å­—èŠ‚æµ getOutputStream();   å¸¸ç”¨äºä¸‹è½½ï¼ˆä¼ é€’äºŒè¿›åˆ¶æ•°æ®ï¼‰</p></li><li><p>å­—ç¬¦æµ         getWriter();                          å¸¸ç”¨äºå›ä¼ å­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨ï¼‰</p></li><li><p>æ³¨æ„ï¼šä¸¤ä¸ªæµåŒæ—¶åªèƒ½ä½¿ç”¨ä¸€ä¸ªï¼Œä½¿ç”¨äº†å­—èŠ‚æµï¼Œå°±ä¸èƒ½å†ä½¿ç”¨å­—ç¬¦æµï¼Œåä¹‹äº¦ç„¶ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚</p> <img src="image-20221031215943947.png" alt="image-20221031215943947" style="zoom:80%;" /></li></ul><h3 id="å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®"><a href="#å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®" class="headerlink" title="å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®"></a>å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseIOServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// è¦æ±‚ ï¼š å¾€å®¢æˆ·ç«¯å›ä¼  å­—ç¬¦ä¸² æ•°æ®ã€‚</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> resp.getWriter();<br>        writer.write(<span class="hljs-string">&quot;response&#x27;s content!!!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å“åº”çš„ä¹±ç è§£å†³"><a href="#å“åº”çš„ä¹±ç è§£å†³" class="headerlink" title="å“åº”çš„ä¹±ç è§£å†³"></a>å“åº”çš„ä¹±ç è§£å†³</h3><ul><li><p>è§£å†³å“åº”ä¸­æ–‡ä¹±ç æ–¹æ¡ˆä¸€ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è®¾ç½®æœåŠ¡å™¨å­—ç¬¦é›†ä¸º UTF-8</span><br>resp.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br><span class="hljs-comment">// é€šè¿‡å“åº”å¤´ï¼Œè®¾ç½®æµè§ˆå™¨ä¹Ÿä½¿ç”¨ UTF-8 å­—ç¬¦é›†</span><br>resp.setHeader(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>);<br></code></pre></td></tr></table></figure></li><li><p>è§£å†³å“åº”ä¸­æ–‡ä¹±ç æ–¹æ¡ˆäºŒï¼ˆæ¨èï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å®ƒä¼šåŒæ—¶è®¾ç½®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨ UTF-8 å­—ç¬¦é›†ï¼Œè¿˜è®¾ç½®äº†å“åº”å¤´</span><br><span class="hljs-comment">// æ­¤æ–¹æ³•ä¸€å®šè¦åœ¨è·å–æµå¯¹è±¡ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span><br>resp.setContentType(<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>);<br></code></pre></td></tr></table></figure></li></ul><p><strong>æ¡ˆä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseIOServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(resp.getCharacterEncoding());  <span class="hljs-comment">//é»˜è®¤ISO-8859-1</span><br><br>        <span class="hljs-comment">//è®¾ç½®æœåŠ¡å™¨å­—ç¬¦é›†ä¸ºUTF-8</span><br><span class="hljs-comment">//        resp.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><br>        <span class="hljs-comment">//é€šè¿‡å“åº”å¤´ï¼Œè®¾ç½®æµè§ˆå™¨ä¹Ÿæ˜¯ç”¨UTF-8å­—ç¬¦é›†</span><br><span class="hljs-comment">//        resp.setHeader(&quot;Content-Type&quot;,&quot;text/html;charset=UTF-8&quot;);</span><br><br>        <span class="hljs-comment">//setContentType()æ–¹æ³• ä¼šåŒæ—¶è®¾ç½®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨UTF-8å­—ç¬¦é›†ï¼Œè¿˜è®¾ç½®äº†å“åº”å¤´</span><br>        <span class="hljs-comment">//è¯¥æ–¹æ³•ä¸€å®šè¦åœ¨è·å–æµå¯¹è±¡ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span><br>        resp.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        System.out.println(resp.getCharacterEncoding());<br><br>        <span class="hljs-comment">//è¦æ±‚ï¼šå¾€å®¢æˆ·ç«¯å›ä¼ å­—ç¬¦ä¸²æ•°æ®</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> resp.getWriter();<br>        writer.write(<span class="hljs-string">&quot;å“åº”ä¿¡æ¯&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¯·æ±‚é‡å®šå‘"><a href="#è¯·æ±‚é‡å®šå‘" class="headerlink" title="è¯·æ±‚é‡å®šå‘"></a>è¯·æ±‚é‡å®šå‘</h3><h4 id="è¯·æ±‚é‡å®šå‘çš„ç†è§£"><a href="#è¯·æ±‚é‡å®šå‘çš„ç†è§£" class="headerlink" title="è¯·æ±‚é‡å®šå‘çš„ç†è§£"></a>è¯·æ±‚é‡å®šå‘çš„ç†è§£</h4><p>è¯·æ±‚é‡å®šå‘ï¼Œæ˜¯æŒ‡å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯è¯´ã€‚æˆ‘ç»™ä½ ä¸€äº›åœ°å€ã€‚ä½ å»æ–°åœ°å€è®¿é—®ã€‚å«è¯·æ±‚é‡å®šå‘ï¼ˆå› ä¸ºä¹‹å‰çš„åœ°å€å¯èƒ½å·²ç»è¢«åºŸå¼ƒï¼‰</p><img src="image-20221031223248480.png" alt="image-20221031223248480" style="zoom:80%;" /><h4 id="è¯·æ±‚é‡å®šå‘çš„ç‰¹ç‚¹"><a href="#è¯·æ±‚é‡å®šå‘çš„ç‰¹ç‚¹" class="headerlink" title="è¯·æ±‚é‡å®šå‘çš„ç‰¹ç‚¹"></a>è¯·æ±‚é‡å®šå‘çš„ç‰¹ç‚¹</h4><ul><li><p>1ã€æµè§ˆå™¨åœ°å€æ ä¼šå‘ç”Ÿå˜åŒ–</p></li><li><p>2ã€ä¸¤æ¬¡è¯·æ±‚</p></li><li><p>3ã€ä¸å…±äº«RequeståŸŸä¸­æ•°æ®</p><p>ï¼ˆTomcatæ¯æ¬¡æ”¶åˆ°è¯·æ±‚ï¼Œå°±ä¼šæŠŠè¯·æ±‚è¿‡æ¥çš„æ•°æ®è§£æå¥½ï¼Œå°è£…æˆä¸ºä¸€ä¸ªreqå¯¹è±¡ï¼‰</p></li><li><p>4ã€ä¸èƒ½è®¿é—®WEB-INFä¸‹çš„èµ„æº  (WEB-INFä¸èƒ½ç›´æ¥é€šè¿‡æµè§ˆå™¨è®¿é—®)</p></li><li><p>5ã€å¯ä»¥è®¿é—®å·¥ç¨‹å¤–çš„èµ„æº</p></li><li><p>è¯·æ±‚é‡å®šå‘çš„ç¬¬ä¸€ç§æ–¹æ¡ˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è®¾ç½®å“åº”çŠ¶æ€ç  302 ï¼Œè¡¨ç¤ºé‡å®šå‘ï¼Œï¼ˆå·²æ¬è¿ï¼‰</span><br>resp.setStatus(<span class="hljs-number">302</span>);<br><span class="hljs-comment">// è®¾ç½®å“åº”å¤´ï¼Œè¯´æ˜ æ–°çš„åœ°å€åœ¨å“ªé‡Œ</span><br>resp.setHeader(<span class="hljs-string">&quot;Location&quot;</span>, <span class="hljs-string">&quot;http://localhost:8080&quot;</span>);<br></code></pre></td></tr></table></figure></li><li><p>è¯·æ±‚é‡å®šå‘çš„ç¬¬äºŒç§æ–¹æ¡ˆï¼ˆ<strong>æ¨èä½¿ç”¨</strong>ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">resp.sendRedirect(<span class="hljs-string">&quot;http://localhost:8080&quot;</span>);<br></code></pre></td></tr></table></figure></li></ul><h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><h3 id="JSPä»‹ç»"><a href="#JSPä»‹ç»" class="headerlink" title="JSPä»‹ç»"></a>JSPä»‹ç»</h3><ul><li><p>jsp çš„å…¨ç§°æ˜¯ java server pagesã€‚ Java çš„æœåŠ¡å™¨é¡µé¢ã€‚</p></li><li><p>jsp çš„ä¸»è¦ä½œç”¨æ˜¯ä»£æ›¿ Servlet ç¨‹åºå›ä¼  html é¡µé¢çš„æ•°æ®ï¼Œå› ä¸º Servlet ç¨‹åºå›ä¼  html é¡µé¢æ•°æ®æ˜¯ä¸€ä»¶éå¸¸ç¹ççš„äº‹æƒ…ï¼Œå¼€å‘æˆæœ¬å’Œç»´æŠ¤æˆæœ¬éƒ½æé«˜ã€‚</p></li><li><p>jsp ç®€å•å°ç»“ï¼š</p><ul><li><p>1ã€å¦‚ä½•åˆ›å»º jsp çš„é¡µé¢?</p>  <img src="image-20221103161912141.png" alt="image-20221103161912141" style="zoom:80%;" /></li><li><p>2ã€jsp å¦‚ä½•è®¿é—®ï¼š</p></li><li><p>jsp é¡µé¢å’Œ html é¡µé¢ä¸€æ ·ï¼Œéƒ½æ˜¯å­˜æ”¾åœ¨ web ç›®å½•ä¸‹ã€‚è®¿é—®ä¹Ÿè·Ÿè®¿é—® html é¡µé¢ä¸€æ ·ã€‚<br>æ¯”å¦‚ï¼š<br>åœ¨ web ç›®å½•ä¸‹æœ‰å¦‚ä¸‹çš„æ–‡ä»¶ï¼š<br>web ç›®å½•<br>a.html é¡µé¢ è®¿é—®åœ°å€æ˜¯ &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt;&gt;&gt; <a href="http://ip:port/å·¥ç¨‹è·¯å¾„/a.html">http://ip:port/å·¥ç¨‹è·¯å¾„/a.html</a><br>b.jsp é¡µé¢ è®¿é—®åœ°å€æ˜¯ &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt;&gt;&gt; <a href="http://ip:port/å·¥ç¨‹è·¯å¾„/b.jsp">http://ip:port/å·¥ç¨‹è·¯å¾„/b.jsp</a></p></li></ul></li></ul><h3 id="jsp-çš„æœ¬è´¨"><a href="#jsp-çš„æœ¬è´¨" class="headerlink" title="jsp çš„æœ¬è´¨"></a>jsp çš„æœ¬è´¨</h3><ul><li><p><strong>jsp é¡µé¢æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servlet ç¨‹åº</strong>ã€‚</p></li><li><p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—® jsp é¡µé¢çš„æ—¶å€™ã€‚Tomcat æœåŠ¡å™¨ä¼šå¸®æˆ‘ä»¬æŠŠ jsp é¡µé¢ç¿»è¯‘æˆä¸ºä¸€ä¸ª java æºæ–‡ä»¶ã€‚å¹¶ä¸”å¯¹å®ƒè¿›è¡Œç¼–è¯‘æˆä¸º.class å­—èŠ‚ç ç¨‹åºã€‚æˆ‘ä»¬æ‰“å¼€ java æºæ–‡ä»¶ä¸éš¾å‘ç°å…¶é‡Œé¢çš„å†…å®¹æ˜¯ï¼š</p><p> <img src="/2022/10/03/JavaWebNote/image-20221103162329016.png" alt="image-20221103162329016"></p></li><li><p>æˆ‘ä»¬è·Ÿè¸ªåŸä»£ç å‘ç°ï¼ŒHttpJspBase ç±»ï¼Œå®ƒç›´æ¥åœ°ç»§æ‰¿äº† HttpServlet ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ã€‚jsp ç¿»è¯‘å‡ºæ¥çš„ java ç±»ï¼Œå®ƒé—´æ¥ç»§æ‰¿äº† HttpServlet ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¿»è¯‘å‡ºæ¥çš„æ˜¯ä¸€ä¸ª Servlet ç¨‹åºã€‚</p><p> <img src="/2022/10/03/JavaWebNote/image-20221103162436135.png" alt="image-20221103162436135"></p></li><li><p>æ€»ç»“ï¼šé€šè¿‡ç¿»è¯‘çš„ java æºä»£ç æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ç»“æœï¼šjsp å°±æ˜¯ Servlet ç¨‹åºã€‚</p></li><li><p>è§‚å¯Ÿç¿»è¯‘å‡ºæ¥çš„ Servlet ç¨‹åºçš„æºä»£ç ï¼Œä¸éš¾å‘ç°ï¼šå…¶åº•å±‚å®ç°ï¼Œä¹Ÿæ˜¯é€šè¿‡è¾“å‡ºæµ æŠŠ html é¡µé¢æ•°æ®å›ä¼ ç»™å®¢æˆ·ç«¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">_jspService</span><span class="hljs-params">(<span class="hljs-keyword">final</span> javax.servlet.http.HttpServletRequest request, <span class="hljs-keyword">final</span></span><br><span class="hljs-params">javax.servlet.http.HttpServletResponse response)</span><br>        <span class="hljs-keyword">throws</span> java.io.IOException, javax.servlet.ServletException &#123;<br>    <span class="hljs-keyword">final</span> java.lang.<span class="hljs-type">String</span> <span class="hljs-variable">_jspx_method</span> <span class="hljs-operator">=</span> request.getMethod();<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-string">&quot;GET&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="hljs-string">&quot;POST&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="hljs-string">&quot;HEAD&quot;</span>.equals(_jspx_method)<br>            &amp;&amp; !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) &#123;<br>        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, <span class="hljs-string">&quot;JSPs only permit GET POST or</span><br><span class="hljs-string">                HEAD&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">final</span> javax.servlet.jsp.PageContext pageContext;<br>    javax.servlet.http.<span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">final</span> javax.servlet.ServletContext application;<br>    <span class="hljs-keyword">final</span> javax.servlet.ServletConfig config;<br>    javax.servlet.jsp.<span class="hljs-type">JspWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">final</span> java.lang.<span class="hljs-type">Object</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>;<br>    javax.servlet.jsp.<span class="hljs-type">JspWriter</span> <span class="hljs-variable">_jspx_out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    javax.servlet.jsp.<span class="hljs-type">PageContext</span> <span class="hljs-variable">_jspx_page_context</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>        pageContext = _jspxFactory.getPageContext(<span class="hljs-built_in">this</span>, request, response,<br>                <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">8192</span>, <span class="hljs-literal">true</span>);<br>        _jspx_page_context = pageContext;<br>        application = pageContext.getServletContext();<br>        config = pageContext.getServletConfig();<br>        session = pageContext.getSession();<br>        out = pageContext.getOut();<br>        _jspx_out = out;<br>        out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;html&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;head&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot; &lt;title&gt;Title&lt;/title&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;/head&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;body&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot; a.jsp é¡µé¢\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;/body&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;/html&gt;\r\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (java.lang.Throwable t) &#123;<br>        <span class="hljs-keyword">if</span> (!(t <span class="hljs-keyword">instanceof</span> javax.servlet.jsp.SkipPageException))&#123;<br>            out = _jspx_out;<br>            <span class="hljs-keyword">if</span> (out != <span class="hljs-literal">null</span> &amp;&amp; out.getBufferSize() != <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-keyword">if</span> (response.isCommitted()) &#123;<br>                        out.flush();<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        out.clearBuffer();<br>                    &#125;<br>                &#125; <span class="hljs-keyword">catch</span> (java.io.IOException e) &#123;&#125;<br>            <span class="hljs-keyword">if</span> (_jspx_page_context != <span class="hljs-literal">null</span>) _jspx_page_context.handlePageException(t);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(t);<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        _jspxFactory.releasePageContext(_jspx_page_context);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="jsp-çš„ä¸‰ç§è¯­æ³•"><a href="#jsp-çš„ä¸‰ç§è¯­æ³•" class="headerlink" title="jsp çš„ä¸‰ç§è¯­æ³•"></a>jsp çš„ä¸‰ç§è¯­æ³•</h3><h4 id="jap-å¤´éƒ¨çš„-page-æŒ‡ä»¤"><a href="#jap-å¤´éƒ¨çš„-page-æŒ‡ä»¤" class="headerlink" title="jap å¤´éƒ¨çš„ page æŒ‡ä»¤"></a>jap å¤´éƒ¨çš„ page æŒ‡ä»¤</h4><p>jap çš„ page æŒ‡ä»¤å¯ä»¥ä¿®æ”¹ jap é¡µé¢ä¸­ä¸€äº›é‡è¦çš„å±æ€§æˆ–è€…è¡Œä¸ºã€‚</p><p>è¯´æ˜ï¼šä¸€èˆ¬ä¸æ¨èä¿®æ”¹ã€‚</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br></code></pre></td></tr></table></figure><ul><li><p>1ã€language å±æ€§ </p><p>â€‹è¡¨ç¤º jsp ç¿»è¯‘åæ˜¯ä»€ä¹ˆè¯­è¨€æ–‡ä»¶ã€‚æš‚æ—¶åªæ”¯æŒ javaã€‚</p></li><li><p>2ã€contentType å±æ€§ </p><p>â€‹è¡¨ç¤º jsp è¿”å›çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆã€‚ä¹Ÿæ˜¯æºç ä¸­ response.setContentType()å‚æ•°å€¼</p></li><li><p>3ã€pageEncoding å±æ€§ </p><p>â€‹è¡¨ç¤ºå½“å‰ jsp é¡µé¢æ–‡ä»¶æœ¬èº«çš„å­—ç¬¦é›†ã€‚</p></li><li><p>4ã€import å±æ€§ </p><p>â€‹è·Ÿ java æºä»£ç ä¸­ä¸€æ ·ã€‚ç”¨äºå¯¼åŒ…ï¼Œå¯¼ç±»ã€‚</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;ä¸¤ä¸ªå±æ€§æ˜¯ç»™ out è¾“å‡ºæµä½¿ç”¨&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p></li><li><p>5ã€autoFlush å±æ€§ </p><p>â€‹è®¾ç½®å½“ out è¾“å‡ºæµç¼“å†²åŒºæ»¡äº†ä¹‹åï¼Œæ˜¯å¦è‡ªåŠ¨åˆ·æ–°å†²çº§åŒºã€‚é»˜è®¤å€¼æ˜¯ trueã€‚</p></li><li><p>6ã€buffer å±æ€§ </p><p>â€‹è®¾ç½® out ç¼“å†²åŒºçš„å¤§å°ã€‚é»˜è®¤æ˜¯ 8kb</p><p>ç¼“å†²åŒºæº¢å‡ºé”™è¯¯ï¼š</p><p> <img src="/2022/10/03/JavaWebNote/image-20221103183549184.png" alt="image-20221103183549184"></p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;ä¸¤ä¸ªå±æ€§æ˜¯ç»™ out è¾“å‡ºæµä½¿ç”¨&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p></li><li><p>7ã€errorPage å±æ€§ </p><p>â€‹è®¾ç½®å½“ jsp é¡µé¢è¿è¡Œæ—¶å‡ºé”™ï¼Œè‡ªåŠ¨è·³è½¬å»çš„é”™è¯¯é¡µé¢è·¯å¾„ã€‚</p><!--errorPage è¡¨ç¤ºé”™è¯¯åè‡ªåŠ¨è·³è½¬å»çš„è·¯å¾„ <br/>è¿™ä¸ªè·¯å¾„ä¸€èˆ¬éƒ½æ˜¯ä»¥æ–œæ æ‰“å¤´ï¼Œå®ƒè¡¨ç¤ºè¯·æ±‚åœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„/æ˜ å°„åˆ°ä»£ç çš„ Web ç›®å½•--></li><li><p>8ã€isErrorPage å±æ€§ </p><p>â€‹è®¾ç½®å½“å‰ jsp é¡µé¢æ˜¯å¦æ˜¯é”™è¯¯ä¿¡æ¯é¡µé¢ï¼Œé»˜è®¤æ˜¯ falseã€‚å¦‚æœæ˜¯ true å¯ä»¥è·å–å¼‚å¸¸ä¿¡æ¯ã€‚</p></li><li><p>9ã€session å±æ€§ </p><p>â€‹è®¾ç½®è®¿é—®å½“å‰ jsp é¡µé¢ï¼Œæ˜¯å¦ä¼šåˆ›å»º HttpSession å¯¹è±¡ã€‚é»˜è®¤æ˜¯ trueã€‚</p></li><li><p>10ã€extends å±æ€§ </p><p>â€‹è®¾ç½® jsp ç¿»è¯‘å‡ºæ¥çš„ java ç±»é»˜è®¤ç»§æ‰¿è°ã€‚</p></li></ul><h4 id="jsp-ä¸­çš„å¸¸ç”¨è„šæœ¬"><a href="#jsp-ä¸­çš„å¸¸ç”¨è„šæœ¬" class="headerlink" title="jsp ä¸­çš„å¸¸ç”¨è„šæœ¬"></a>jsp ä¸­çš„å¸¸ç”¨è„šæœ¬</h4><h5 id="å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰"><a href="#å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰" class="headerlink" title="å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰"></a>å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰</h5><ul><li><p>å£°æ˜è„šæœ¬çš„æ ¼å¼æ˜¯ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%! å£°æ˜ java ä»£ç  %&gt;<br></code></pre></td></tr></table></figure></li><li><p>ä½œç”¨ï¼šå¯ä»¥ç»™ jsp ç¿»è¯‘å‡ºæ¥çš„ java ç±»å®šä¹‰å±æ€§å’Œæ–¹æ³•ï¼Œç”šè‡³æ˜¯é™æ€ä»£ç å—ã€å†…éƒ¨ç±»ç­‰ã€‚</p></li><li><p>ç»ƒä¹ ï¼š<br>1ã€å£°æ˜ç±»å±æ€§<br>2ã€å£°æ˜ static é™æ€ä»£ç å—<br>3ã€å£°æ˜ç±»æ–¹æ³•<br>4ã€å£°æ˜å†…éƒ¨ç±»</p></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--<span class="hljs-number">1</span> ã€å£°æ˜ç±»å±æ€§ --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String,Object&gt; map;<br>%&gt;<br>&lt;%--<span class="hljs-number">2</span> ã€å£°æ˜ <span class="hljs-keyword">static</span> é™æ€ä»£ç å— --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">static</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String,Object&gt;();<br>    map.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>&#125;<br>%&gt;<br>&lt;%--<span class="hljs-number">3</span> ã€å£°æ˜ç±»æ–¹æ³• --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">abc</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">12</span>;<br>&#125;<br>%&gt;<br>&lt;%--<span class="hljs-number">4</span> ã€å£°æ˜å†…éƒ¨ç±» --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">abc</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc&quot;</span>;<br>    &#125;<br>%&gt;<br></code></pre></td></tr></table></figure></li><li><p>å£°æ˜è„šæœ¬ä»£ç ç¿»è¯‘å¯¹ç…§ï¼š</p><p> <img src="/2022/10/03/JavaWebNote/image-20221103223305270.png" alt="image-20221103223305270"></p></li></ul><h5 id="è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰"><a href="#è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰" class="headerlink" title="è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰"></a>è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰</h5><ul><li><p>è¡¨è¾¾å¼è„šæœ¬çš„æ ¼å¼</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%=è¡¨è¾¾å¼%&gt;<br></code></pre></td></tr></table></figure></li><li><p>è¡¨è¾¾å¼è„šæœ¬çš„ä½œç”¨ï¼šåœ¨ jsp é¡µé¢ä¸Šè¾“å‡ºæ•°æ®</p></li><li><p>è¡¨è¾¾å¼è„šæœ¬çš„ç‰¹ç‚¹ï¼š</p><ul><li><p>æ‰€æœ‰çš„è¡¨è¾¾å¼è„šæœ¬éƒ½ä¼šè¢«ç¿»è¯‘åˆ° _jspService() æ–¹æ³•ä¸­</p></li><li><p>è¡¨è¾¾å¼è„šæœ¬éƒ½ä¼šè¢«ç¿»è¯‘æˆä¸º out.print() è¾“å‡ºåˆ°é¡µé¢ä¸Š</p></li><li><p>ç”±äºè¡¨è¾¾å¼è„šæœ¬ç¿»è¯‘çš„å†…å®¹éƒ½åœ¨ _jspService() æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥ <strong>_jspService()æ–¹æ³•ä¸­çš„å¯¹è±¡éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</strong>ã€‚</p></li><li><p><strong>è¡¨è¾¾å¼è„šæœ¬ä¸­çš„è¡¨è¾¾å¼ä¸èƒ½ä»¥åˆ†å·ç»“æŸ</strong>ã€‚</p></li><li><p>ç¿»è¯‘å¯¹ç…§ï¼š</p><p> <img src="/2022/10/03/JavaWebNote/image-20221103224325787.png" alt="image-20221103224325787"></p></li></ul></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%=<span class="hljs-number">12</span> %&gt; &lt;br&gt;<br>&lt;%=<span class="hljs-number">12.12</span> %&gt; &lt;br&gt;<br>&lt;%=<span class="hljs-string">&quot; æˆ‘æ˜¯å­—ç¬¦ä¸²&quot;</span> %&gt; &lt;br&gt;<br>&lt;%=map%&gt; &lt;br&gt;<br>&lt;%=request.getParameter(<span class="hljs-string">&quot;username&quot;</span>)%&gt;<br></code></pre></td></tr></table></figure></li></ul><h5 id="ä»£ç è„šæœ¬"><a href="#ä»£ç è„šæœ¬" class="headerlink" title="ä»£ç è„šæœ¬"></a>ä»£ç è„šæœ¬</h5><ul><li><p>ä»£ç è„šæœ¬çš„æ ¼å¼</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br>java è¯­å¥<br>%&gt;<br></code></pre></td></tr></table></figure></li><li><p>ä»£ç è„šæœ¬çš„ä½œç”¨æ˜¯ï¼šå¯ä»¥åœ¨ jsp é¡µé¢ä¸­ï¼Œç¼–å†™æˆ‘ä»¬è‡ªå·±éœ€è¦çš„åŠŸèƒ½ï¼ˆå†™çš„æ˜¯ java è¯­å¥ï¼‰ã€‚</p></li><li><p>ä»£ç è„šæœ¬çš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li>ä»£ç è„šæœ¬ç¿»è¯‘ä¹‹åéƒ½åœ¨ _jspService æ–¹æ³•ä¸­</li><li>ä»£ç è„šæœ¬ç”±äºç¿»è¯‘åˆ° _jspService() æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥åœ¨ _jspService() æ–¹æ³•ä¸­çš„ç°æœ‰å¯¹è±¡éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li><li>è¿˜<strong>å¯ä»¥ç”±å¤šä¸ªä»£ç è„šæœ¬å—ç»„åˆå®Œæˆä¸€ä¸ªå®Œæ•´çš„ java è¯­å¥</strong>ã€‚</li><li>ä»£ç è„šæœ¬è¿˜<strong>å¯ä»¥å’Œè¡¨è¾¾å¼è„šæœ¬ä¸€èµ·ç»„åˆä½¿ç”¨</strong>ï¼Œåœ¨ jsp é¡µé¢ä¸Šè¾“å‡ºæ•°æ®</li></ul></li><li><p>ç¿»è¯‘ä¹‹åçš„å¯¹æ¯”</p><p> <img src="/2022/10/03/JavaWebNote/image-20221103224905402.png" alt="image-20221103224905402"></p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>&lt;%-- ç»ƒä¹ ï¼š --%&gt;<br>    &lt;%--<span class="hljs-number">1.</span> ä»£ç è„šæœ¬ ----<span class="hljs-keyword">if</span> è¯­å¥ --%&gt;<br>    &lt;%<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">13</span> ;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">12</span>) &#123;<br>    %&gt;<br>    &lt;h1&gt;å›½å“¥å¥½å¸…&lt;/h1&gt;<br>    &lt;%<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>    %&gt;<br>    &lt;h1&gt;å›½å“¥åˆéª—äººäº†ï¼&lt;/h1&gt;<br>    &lt;%<br>        &#125;<br>    %&gt;<br>    &lt;br&gt;<br>    &lt;%--<span class="hljs-number">2.</span> ä»£ç è„šæœ¬ ----<span class="hljs-keyword">for</span> å¾ªç¯è¯­å¥ --%&gt;<br>    &lt;table border=<span class="hljs-string">&quot;1&quot;</span> cellspacing=<span class="hljs-string">&quot;0&quot;</span>&gt;<br>        &lt;%<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++) &#123;<br>        %&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;ç¬¬ &lt;%=j + <span class="hljs-number">1</span>%&gt;è¡Œ&lt;/td&gt;<br>        &lt;/tr&gt;<br>        &lt;%<br>            &#125;<br>        %&gt;<br>    &lt;/table&gt;<br>    &lt;%--<span class="hljs-number">3.</span> ç¿»è¯‘å java æ–‡ä»¶ä¸­ _jspService æ–¹æ³•å†…çš„ä»£ç éƒ½å¯ä»¥å†™ --%&gt;<br>    &lt;%<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; ç”¨æˆ·åçš„è¯·æ±‚å‚æ•°å€¼æ˜¯ï¼š&quot;</span> + username);<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul><h4 id="jsp-ä¸­çš„ä¸‰ç§æ³¨é‡Š"><a href="#jsp-ä¸­çš„ä¸‰ç§æ³¨é‡Š" class="headerlink" title="jsp ä¸­çš„ä¸‰ç§æ³¨é‡Š"></a>jsp ä¸­çš„ä¸‰ç§æ³¨é‡Š</h4><ul><li><p>html æ³¨é‡Š</p><p>html æ³¨é‡Šä¼šè¢«ç¿»è¯‘åˆ° java æºä»£ç ä¸­ã€‚åœ¨_jspService æ–¹æ³•é‡Œï¼Œä»¥ out.writer è¾“å‡ºåˆ°å®¢æˆ·ç«¯ã€‚</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- è¿™æ˜¯ html æ³¨é‡Š --&gt;<br></code></pre></td></tr></table></figure></li><li><p>java æ³¨é‡Š</p></li></ul><p>  java æ³¨é‡Šä¼šè¢«ç¿»è¯‘åˆ° java æºä»£ç ä¸­ã€‚</p>  <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br><span class="hljs-comment">// å•è¡Œ java æ³¨é‡Š</span><br><span class="hljs-comment">/* å¤šè¡Œ java æ³¨é‡Š */</span><br>%&gt;<br></code></pre></td></tr></table></figure><ul><li>jsp æ³¨é‡Š</li></ul><p>  jsp æ³¨é‡Šå¯ä»¥æ³¨æ‰ jsp é¡µé¢ä¸­æ‰€æœ‰ä»£ç ã€‚</p>  <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%-- è¿™æ˜¯ jsp æ³¨é‡Š --%&gt;<br></code></pre></td></tr></table></figure><h3 id="jsp-ä¹å¤§å†…ç½®å¯¹è±¡"><a href="#jsp-ä¹å¤§å†…ç½®å¯¹è±¡" class="headerlink" title="jsp ä¹å¤§å†…ç½®å¯¹è±¡"></a>jsp ä¹å¤§å†…ç½®å¯¹è±¡</h3><p>jsp ä¸­çš„å†…ç½®å¯¹è±¡ï¼Œæ˜¯æŒ‡ Tomcat åœ¨ç¿»è¯‘ jsp é¡µé¢æˆä¸º Servlet æºä»£ç åï¼Œå†…éƒ¨æä¾›çš„ä¹ä¸ªå¯¹è±¡ï¼Œå«å†…ç½®å¯¹è±¡ã€‚</p><p><img src="/2022/10/03/JavaWebNote/image-20221103234209781.png" alt="image-20221103234209781"></p><ul><li>request è¯·æ±‚å¯¹è±¡</li><li>response                                   å“åº”å¯¹è±¡</li><li>pageContext                             jsp çš„ä¸Šä¸‹æ–‡å¯¹è±¡</li><li>session                                      ä¼šè¯å¯¹è±¡</li><li>application                                ServletContext å¯¹è±¡</li><li>config                                         ServletConfig å¯¹è±¡</li><li>out                                               jsp è¾“å‡ºæµå¯¹è±¡</li><li>page                                            æŒ‡å‘å½“å‰jspçš„å¯¹è±¡</li><li>exception                                   å¼‚å¸¸å¯¹è±¡</li></ul><h3 id="jsp-å››å¤§åŸŸå¯¹è±¡"><a href="#jsp-å››å¤§åŸŸå¯¹è±¡" class="headerlink" title="jsp å››å¤§åŸŸå¯¹è±¡"></a>jsp å››å¤§åŸŸå¯¹è±¡</h3><ul><li><p>å››ä¸ªåŸŸå¯¹è±¡åˆ†åˆ«æ˜¯ï¼š</p><ul><li><strong>pageContext</strong> ï¼ˆ<strong>PageContextImpl</strong> ç±»ï¼‰ï¼šå½“å‰ jsp é¡µé¢èŒƒå›´å†…æœ‰æ•ˆ</li><li><strong>request</strong> ï¼ˆ<strong>HttpServletRequest</strong> ç±»ï¼‰ï¼šä¸€æ¬¡è¯·æ±‚å†…æœ‰æ•ˆ</li><li><strong>session</strong> ï¼ˆ<strong>HttpSession</strong> ç±»ï¼‰ï¼šä¸€ä¸ªä¼šè¯èŒƒå›´å†…æœ‰æ•ˆï¼ˆæ‰“å¼€æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œç›´åˆ°å…³é—­æµè§ˆå™¨ï¼‰</li><li><strong>application</strong> ï¼ˆ<strong>ServletContext</strong> ç±»ï¼‰ï¼šæ•´ä¸ª web å·¥ç¨‹èŒƒå›´å†…æœ‰æ•ˆï¼ˆåªè¦ web å·¥ç¨‹ä¸åœæ­¢ï¼Œæ•°æ®éƒ½åœ¨ï¼‰</li></ul></li><li><p>åŸŸå¯¹è±¡æ˜¯å¯ä»¥åƒ Map ä¸€æ ·å­˜å–æ•°æ®çš„å¯¹è±¡ã€‚å››ä¸ªåŸŸå¯¹è±¡åŠŸèƒ½ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯å®ƒä»¬å¯¹æ•°æ®çš„å­˜å–èŒƒå›´ã€‚</p></li><li><p>è™½ç„¶å››ä¸ªåŸŸå¯¹è±¡éƒ½å¯ä»¥å­˜å–æ•°æ®ã€‚åœ¨ä½¿ç”¨ä¸Šå®ƒä»¬æ˜¯æœ‰ä¼˜å…ˆé¡ºåºçš„ã€‚</p></li><li><p>å››ä¸ªåŸŸåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼˜å…ˆé¡ºåºåˆ†åˆ«æ˜¯ï¼Œå®ƒä»¬ä»å°åˆ°å¤§çš„èŒƒå›´çš„é¡ºåºï¼ˆä¼˜å…ˆä½¿ç”¨èŒƒå›´å°çš„ï¼‰ã€‚</p></li><li><p>pageContext &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt; request &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt; session &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt; application</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p>scope.jsp é¡µé¢</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;h1&gt;scope.japé¡µé¢&lt;/h1&gt;<br>    &lt;%<br>        pageContext.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;pageContext&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;request&quot;</span>);<br>        session.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;session&quot;</span>);<br>        application.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;application&quot;</span>);<br>    %&gt;<br>    pageContextåŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=pageContext.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    requeståŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    sessionåŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=session.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    applicationåŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=application.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    &lt;%<br>        <span class="hljs-comment">//è¯·æ±‚è½¬å‘</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/scope2.jsp&quot;</span>).forward(request,response);<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li><li><p>scope2.jap é¡µé¢</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;h1&gt;scope2.japé¡µé¢&lt;/h1&gt;<br>    pageContextåŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=pageContext.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    requeståŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    sessionåŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=session.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    applicationåŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=application.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="jsp-ä¸­çš„-out-è¾“å‡ºå’Œ-response-getWriter-è¾“å‡ºçš„åŒºåˆ«"><a href="#jsp-ä¸­çš„-out-è¾“å‡ºå’Œ-response-getWriter-è¾“å‡ºçš„åŒºåˆ«" class="headerlink" title="jsp ä¸­çš„ out è¾“å‡ºå’Œ response.getWriter è¾“å‡ºçš„åŒºåˆ«"></a>jsp ä¸­çš„ out è¾“å‡ºå’Œ response.getWriter è¾“å‡ºçš„åŒºåˆ«</h3><ul><li><p>response ä¸­è¡¨ç¤ºå“åº”ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨äºè®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹ï¼ˆè¾“å‡ºï¼‰</p></li><li><p>out ä¹Ÿæ˜¯ç»™ç”¨æˆ·åšè¾“å‡ºä½¿ç”¨çš„ã€‚</p></li><li><p><img src="/2022/10/03/JavaWebNote/image-20221104144654925.png" alt="image-20221104144654925"></p></li><li><p>å½“ jsp é¡µé¢ä¸­æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæˆåä¼šåšä»¥ä¸‹ä¸¤ä¸ªæ“ä½œï¼š</p><ul><li>1ã€æ‰§è¡Œ <strong>out.flush()</strong> æ“ä½œï¼Œ<strong>ä¼šæŠŠ out ç¼“å†²åŒºä¸­çš„æ•°æ®è¿½åŠ å†™å…¥åˆ° response ç¼“å†²åŒºæœ«å°¾</strong></li><li>2ã€ä¼šæ‰§è¡Œ response çš„åˆ·æ–°æ“ä½œï¼ŒæŠŠå…¨éƒ¨æ•°æ®å†™ç»™å®¢æˆ·ç«¯</li><li>å› æ­¤ï¼Œå¦‚æœ out å’Œ response.getWriter æ··ç”¨ï¼Œä¼šå…ˆæ‰§è¡Œ response çš„æ“ä½œ</li></ul></li><li><p>ç”±äº jsp ç¿»è¯‘ä¹‹åï¼Œåº•å±‚æºä»£ç éƒ½æ˜¯ä½¿ç”¨ out æ¥è¿›è¡Œè¾“å‡ºã€‚æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ jsp é¡µé¢ä¸­ç»Ÿä¸€ä½¿ç”¨ out æ¥è¿›è¡Œè¾“å‡ºï¼Œé¿å…æ‰“ä¹±é¡µé¢è¾“å‡ºå†…å®¹çš„é¡ºåºã€‚</p></li><li><p>out.write()   è¾“å‡ºå­—ç¬¦ä¸²æ²¡æœ‰é—®é¢˜ï¼ˆæ•°å€¼ä¼šæŒ‰acllç å€¼å­˜å‚¨åˆ°ç¼“å­˜æ•°ç»„å†è¾“å‡ºï¼‰</p></li><li><p>out.print()   è¾“å‡ºä»»æ„æ•°æ®éƒ½æ²¡æœ‰é—®é¢˜ï¼ˆä¼šè½¬æ¢æˆä¸ºå­—ç¬¦ä¸²åè°ƒç”¨ write è¾“å‡ºï¼‰</p></li><li><p><strong>æ·±å…¥æºç ï¼Œæµ…å‡ºç»“è®ºï¼šåœ¨ jsp é¡µé¢ä¸­ï¼Œå¯ä»¥ç»Ÿä¸€ä½¿ç”¨ out.print()æ¥è¿›è¡Œè¾“å‡º</strong></p></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        out.write(<span class="hljs-string">&quot;outè¾“å‡º1&lt;br/&gt;&quot;</span>);<br>        out.flush();<br>        out.write(<span class="hljs-string">&quot;outè¾“å‡º2&lt;br/&gt;&quot;</span>);<br>        response.getWriter().write(<span class="hljs-string">&quot;responseè¾“å‡º1&lt;br/&gt;&quot;</span>);<br>        response.getWriter().write(<span class="hljs-string">&quot;responseè¾“å‡º2&lt;br/&gt;&quot;</span>);<br>    %&gt;<br>    &lt;%<br>        out.write(<span class="hljs-number">12</span>);<br>        out.print(<span class="hljs-number">12</span>);<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="jsp-çš„å¸¸ç”¨æ ‡ç­¾"><a href="#jsp-çš„å¸¸ç”¨æ ‡ç­¾" class="headerlink" title="jsp çš„å¸¸ç”¨æ ‡ç­¾"></a>jsp çš„å¸¸ç”¨æ ‡ç­¾</h3><h4 id="jsp-é™æ€åŒ…å«"><a href="#jsp-é™æ€åŒ…å«" class="headerlink" title="jsp é™æ€åŒ…å«"></a>jsp é™æ€åŒ…å«</h4><p>ç¤ºä¾‹è¯´æ˜ï¼š</p><ul><li><p><strong>&lt;%@ include file&#x3D;â€â€%&gt;   å°±æ˜¯é™æ€åŒ…å«</strong></p></li><li><p>file å±æ€§æŒ‡å®šä½ è¦åŒ…å«çš„ jsp é¡µé¢çš„è·¯å¾„</p></li><li><p>åœ°å€ä¸­ç¬¬ä¸€ä¸ªæ–œæ  &#x2F; è¡¨ç¤ºä¸º <a href="http://ip:port/å·¥ç¨‹è·¯å¾„/ï¼ˆæ˜ å°„åˆ°ä»£ç çš„">http://ip:port/å·¥ç¨‹è·¯å¾„/ï¼ˆæ˜ å°„åˆ°ä»£ç çš„</a> web ç›®å½•ï¼‰</p></li><li><p>é™æ€åŒ…å«çš„ç‰¹ç‚¹ï¼š</p><ul><li>1 ã€é™æ€åŒ…å«ä¸ä¼šç¿»è¯‘è¢«åŒ…å«çš„ jsp é¡µé¢ä»£ç ï¼ˆå³&lt;%@ include file&#x3D;â€â€¦â€%&gt;ï¼‰</li><li>2 ã€é™æ€åŒ…å«å…¶å®æ˜¯æŠŠè¢«åŒ…å«çš„ jsp é¡µé¢çš„ä»£ç æ‹·è´åˆ°åŒ…å«çš„ä½ç½®æ‰§è¡Œè¾“å‡ºã€‚</li></ul></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    ä¸»é¢˜å†…å®¹&lt;br/&gt;<br>    &lt;%@ include file=<span class="hljs-string">&quot;/include/footer.jsp&quot;</span>%&gt;  &lt;!--å¦ä¸€ä¸ªjspé¡µé¢--&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul><h4 id="jsp-åŠ¨æ€åŒ…å«"><a href="#jsp-åŠ¨æ€åŒ…å«" class="headerlink" title="jsp åŠ¨æ€åŒ…å«"></a>jsp åŠ¨æ€åŒ…å«</h4><p>ç¤ºä¾‹è¯´æ˜ï¼š</p><ul><li><p>&lt;jsp:include page&#x3D;â€â€&gt;&lt;&#x2F;jsp:include&gt;   è¿™æ˜¯åŠ¨æ€åŒ…å«</p></li><li><p>page å±æ€§æ˜¯æŒ‡å®šä½ è¦åŒ…å«çš„jspé¡µé¢çš„è·¯å¾„</p></li><li><p>åŠ¨æ€åŒ…å«ä¹Ÿå¯ä»¥åƒé™æ€åŒ…å«ä¸€æ ·ï¼ŒæŠŠè¢«åŒ…å«çš„å†…å®¹æ‰§è¡Œè¾“å‡ºåˆ°åŒ…å«ä½ç½®</p></li><li><p>åŠ¨æ€åŒ…å«çš„ç‰¹ç‚¹ï¼š</p><ul><li><p>1ã€åŠ¨æ€åŒ…å«æŠŠåŒ…å«çš„ jsp é¡µé¢ä¹Ÿç¿»è¯‘æˆä¸º java ä»£ç </p></li><li><p>2ã€åŠ¨æ€åŒ…å«åº•å±‚ä»£ç ä½¿ç”¨å¦‚ä¸‹ä»£ç å»è°ƒç”¨è¢«åŒ…å«çš„ jsp é¡µé¢æ‰§è¡Œè¾“å‡º</p><p>â€‹JspRuntimeLibrary.include(request, response, â€œ&#x2F;include&#x2F;footer.jspâ€, out, false);</p></li><li><p>3ã€åŠ¨æ€åŒ…å«ï¼Œè¿˜å¯ä»¥ä¼ é€’å‚æ•°</p></li></ul></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--main é¡µé¢--&gt;<br>&lt;jsp:include page=<span class="hljs-string">&quot;/include/footer.jsp&quot;</span>&gt;<br>    &lt;jsp:param name=<span class="hljs-string">&quot;username&quot;</span> value=<span class="hljs-string">&quot;bbj&quot;</span>/&gt;<br>    &lt;jsp:param name=<span class="hljs-string">&quot;password&quot;</span> value=<span class="hljs-string">&quot;root&quot;</span>/&gt;<br>&lt;/jsp:include&gt;<br><br>&lt;!--footeré¡µé¢--&gt;<br>&lt;body&gt;<br>    é¡µè„šä¿¡æ¯&lt;br&gt;<br>    æ”¹ä¸€ä¸‹&lt;br&gt;<br>    &lt;%=request.getParameter(<span class="hljs-string">&quot;username&quot;</span>)%&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li><li><p>åŠ¨æ€åŒ…å«çš„åº•å±‚åŸç†ï¼š</p> <img src="image-20221104214608243.png" alt="image-20221104214608243" style="zoom: 70%;" /></li></ul><h4 id="jsp-æ ‡ç­¾-è½¬å‘"><a href="#jsp-æ ‡ç­¾-è½¬å‘" class="headerlink" title="jsp æ ‡ç­¾-è½¬å‘"></a>jsp æ ‡ç­¾-è½¬å‘</h4><p>ç¤ºä¾‹è¯´æ˜ï¼š</p><ul><li><p>&lt;jsp:forward page&#x3D;â€â€&gt;&lt;&#x2F;jsp:forward&gt; æ˜¯è¯·æ±‚è½¬å‘æ ‡ç­¾ï¼Œå®ƒçš„åŠŸèƒ½å°±æ˜¯è¯·æ±‚è½¬å‘</p></li><li><p>page å±æ€§è®¾ç½®è¯·æ±‚è½¬å‘çš„è·¯å¾„</p></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;jsp:forward page=<span class="hljs-string">&quot;/scope2.jsp&quot;</span>&gt;&lt;/jsp:forward&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="jsp-ç»ƒä¹ é¢˜"><a href="#jsp-ç»ƒä¹ é¢˜" class="headerlink" title="jsp ç»ƒä¹ é¢˜"></a>jsp ç»ƒä¹ é¢˜</h3><p>ç»ƒä¹ ä¸€ï¼šåœ¨ jsp é¡µé¢ä¸­è¾“å‡ºä¹ä¹ä¹˜æ³•å£è¯€è¡¨</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;title&gt;Title&lt;/title&gt;<br>        &lt;style type=<span class="hljs-string">&quot;text/css&quot;</span>&gt;<br>            table&#123;<br>                width: 650px;<br>            &#125;<br>        &lt;/style&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%-- ç»ƒä¹ ä¸€ï¼šåœ¨ jsp é¡µé¢ä¸­è¾“å‡ºä¹ä¹ä¹˜æ³•å£è¯€è¡¨ --%&gt;<br>        &lt;h1 align=<span class="hljs-string">&quot;center&quot;</span>&gt;ä¹ä¹ä¹˜æ³•å£è¯€è¡¨&lt;/h1&gt;<br>        &lt;table align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>            &lt;%-- å¤–å±‚å¾ªç¯éå†è¡Œ --%&gt;<br>            &lt;% <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">9</span>; i++) &#123; %&gt;<br>            &lt;tr&gt;<br>                &lt;%-- å†…å±‚å¾ªç¯éå†å•å…ƒæ ¼ --%&gt;<br>                &lt;% <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= i ; j++) &#123; %&gt;<br>                &lt;td&gt;&lt;%=j + <span class="hljs-string">&quot;x&quot;</span> + i + <span class="hljs-string">&quot;=&quot;</span> + (i*j)%&gt;&lt;/td&gt;<br>                &lt;% &#125; %&gt;<br>            &lt;/tr&gt;<br>            &lt;% &#125; %&gt;<br>        &lt;/table&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>ç»ƒä¹ äºŒï¼šjsp è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰ 10 ä¸ªå­¦ç”Ÿä¿¡æ¯ã€‚</p><p>Student ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String phone;<br>    <span class="hljs-comment">//... ... </span><br>&#125;<br></code></pre></td></tr></table></figure><p>SearchStudentServlet ç¨‹åºï¼š</p><p><img src="/2022/10/03/JavaWebNote/image-20221104221644866.png" alt="image-20221104221644866"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchStudentServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">// è·å–è¯·æ±‚çš„å‚æ•°</span><br>        <span class="hljs-comment">// å‘ sql è¯­å¥æŸ¥è¯¢å­¦ç”Ÿçš„ä¿¡æ¯</span><br>        <span class="hljs-comment">// ä½¿ç”¨ for å¾ªç¯ç”ŸæˆæŸ¥è¯¢åˆ°çš„æ•°æ®åšæ¨¡æ‹Ÿ</span><br>        List&lt;Student&gt; studentList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Student&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>            studentList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(t,<span class="hljs-string">&quot;name&quot;</span>+t, <span class="hljs-number">18</span>+t,<span class="hljs-string">&quot;phone&quot;</span>+t));<br>        &#125;<br>        <span class="hljs-comment">// ä¿å­˜æŸ¥è¯¢åˆ°çš„ç»“æœï¼ˆå­¦ç”Ÿä¿¡æ¯ï¼‰åˆ° request åŸŸä¸­</span><br>        req.setAttribute(<span class="hljs-string">&quot;stuList&quot;</span>, studentList);<br>        <span class="hljs-comment">// è¯·æ±‚è½¬å‘åˆ° showStudent.jsp é¡µé¢</span><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;/test/showStudent.jsp&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>showStudent.jsp é¡µé¢</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.List&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;com.atguigu.pojo.Student&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.ArrayList&quot;</span> %&gt;<br>&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;title&gt;Title&lt;/title&gt;<br>        &lt;style&gt;<br>            table&#123;<br>                border: 1px blue solid;<br>                width: 600px;<br>                border-collapse: collapse;<br>            &#125;<br>            td,th&#123;<br>                border: 1px blue solid;<br>            &#125;<br>        &lt;/style&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%-- ç»ƒä¹ äºŒï¼š jsp è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰ <span class="hljs-number">10</span> ä¸ªå­¦ç”Ÿä¿¡æ¯ã€‚ --%&gt;<br>        &lt;%<br>        List&lt;Student&gt; studentList = (List&lt;Student&gt;) request.getAttribute(<span class="hljs-string">&quot;stuList&quot;</span>);<br>        %&gt;<br>        &lt;table&gt;<br>            &lt;tr&gt;<br>                &lt;td&gt;ç¼–å·&lt;/td&gt;<br>                &lt;td&gt;å§“å&lt;/td&gt;<br>                &lt;td&gt;å¹´é¾„&lt;/td&gt;<br>                &lt;td&gt;ç”µè¯&lt;/td&gt;<br>                &lt;td&gt;æ“ä½œ&lt;/td&gt;<br>            &lt;/tr&gt;<br>            &lt;% <span class="hljs-keyword">for</span> (Student student : studentList) &#123; %&gt;<br>            &lt;tr&gt;<br>                &lt;td&gt;&lt;%=student.getId()%&gt;&lt;/td&gt;<br>                &lt;td&gt;&lt;%=student.getName()%&gt;&lt;/td&gt;<br>                &lt;td&gt;&lt;%=student.getAge()%&gt;&lt;/td&gt;<br>                &lt;td&gt;&lt;%=student.getPhone()%&gt;&lt;/td&gt;<br>                &lt;td&gt;åˆ é™¤ã€ä¿®æ”¹&lt;/td&gt;<br>            &lt;/tr&gt;<br>            &lt;% &#125; %&gt;<br>        &lt;/table&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><h2 id="Listener-ç›‘å¬å™¨"><a href="#Listener-ç›‘å¬å™¨" class="headerlink" title="Listener ç›‘å¬å™¨"></a>Listener ç›‘å¬å™¨</h2><ul><li><p>1ã€Listener ç›‘å¬å™¨å®ƒæ˜¯ JavaWeb çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚</p><p>â€‹JavaWeb çš„ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Filter è¿‡æ»¤å™¨ã€Listener ç›‘å¬å™¨ã€‚</p></li><li><p>2ã€Listener å®ƒæ˜¯ JavaEE çš„è§„èŒƒï¼Œå°±æ˜¯æ¥å£ã€‚</p></li><li><p>3ã€ç›‘å¬å™¨çš„ä½œç”¨æ˜¯ï¼Œç›‘å¬æŸç§äº‹ç‰©çš„å˜åŒ–ï¼Œç„¶åé€šè¿‡å›è°ƒå‡½æ•°ï¼Œåé¦ˆç»™å®¢æˆ·ï¼ˆç¨‹åºï¼‰å»åšä¸€äº›ç›¸åº”çš„å¤„ç†ã€‚</p></li></ul><h3 id="ServletContextListener-ç›‘å¬å™¨"><a href="#ServletContextListener-ç›‘å¬å™¨" class="headerlink" title="ServletContextListener ç›‘å¬å™¨"></a>ServletContextListener ç›‘å¬å™¨</h3><ul><li><p>ServletContextListener å®ƒå¯ä»¥ç›‘å¬ ServletContext å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚</p></li><li><p>ServletContext å¯¹è±¡åœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯ã€‚</p></li><li><p>ç›‘å¬åˆ°åˆ›å»ºå’Œé”€æ¯ä¹‹åéƒ½ä¼šåˆ†åˆ«è°ƒç”¨ ServletContextListener ç›‘å¬å™¨çš„æ–¹æ³•åé¦ˆã€‚</p></li><li><p>ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ServletContextListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">EventListener</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* åœ¨ ServletContext å¯¹è±¡åˆ›å»ºä¹‹åé©¬ä¸Šè°ƒç”¨ï¼Œåšåˆå§‹åŒ–</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextInitialized</span><span class="hljs-params">(ServletContextEvent sce)</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* åœ¨ ServletContext å¯¹è±¡é”€æ¯ä¹‹åè°ƒç”¨</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextDestroyed</span><span class="hljs-params">(ServletContextEvent sce)</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¦‚ä½•ä½¿ç”¨ ServletContextListener ç›‘å¬å™¨ç›‘å¬ ServletContext å¯¹è±¡ï¼Ÿ</p><p>ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç° ServletContextListener</li><li>2ã€å®ç°å…¶ä¸¤ä¸ªå›è°ƒæ–¹æ³•</li><li>3ã€åˆ° web.xml ä¸­å»é…ç½®ç›‘å¬å™¨</li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><p>ç›‘å¬å™¨å®ç°ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServletContextListenerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletContextListener</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextInitialized</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ServletContext å¯¹è±¡è¢«åˆ›å»ºäº†&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextDestroyed</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ServletContext å¯¹è±¡è¢«é”€æ¯äº†&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>web.xml ä¸­çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®ç›‘å¬å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>com.atguigu.listener.MyServletContextListenerImpl<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="EL-è¡¨è¾¾å¼"><a href="#EL-è¡¨è¾¾å¼" class="headerlink" title="EL è¡¨è¾¾å¼"></a>EL è¡¨è¾¾å¼</h2><h3 id="EL-è¡¨è¾¾å¼çš„ä»‹ç»"><a href="#EL-è¡¨è¾¾å¼çš„ä»‹ç»" class="headerlink" title="EL è¡¨è¾¾å¼çš„ä»‹ç»"></a>EL è¡¨è¾¾å¼çš„ä»‹ç»</h3><ul><li><p>EL è¡¨è¾¾å¼çš„å…¨ç§°æ˜¯ Expression Languageï¼Œæ˜¯è¡¨è¾¾å¼è¯­è¨€ã€‚</p></li><li><p>EL è¡¨è¾¾å¼çš„ä½œç”¨ï¼šEL è¡¨è¾¾å¼ä¸»è¦æ˜¯ä»£æ›¿ jsp é¡µé¢ä¸­çš„è¡¨è¾¾å¼è„šæœ¬ï¼Œåœ¨ jsp é¡µé¢ä¸­è¿›è¡Œæ•°æ®çš„è¾“å‡ºã€‚</p></li><li><p>å› ä¸º EL è¡¨è¾¾å¼åœ¨è¾“å‡ºæ•°æ®çš„æ—¶å€™ï¼Œè¦æ¯” jsp çš„è¡¨è¾¾å¼è„šæœ¬è¦ç®€æ´å¾—å¤šã€‚</p></li><li><p><strong>EL è¡¨è¾¾å¼çš„æ ¼å¼æ˜¯ï¼š${è¡¨è¾¾å¼}</strong></p></li><li><p>EL è¡¨è¾¾å¼åœ¨è¾“å‡º null å€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ˜¯ç©ºä¸²ã€‚jsp è¡¨è¾¾å¼è„šæœ¬è¾“å‡º null å€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ˜¯ null å­—ç¬¦ä¸²ã€‚</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>    request.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot; å€¼&quot;</span>);<br>    %&gt;<br>    è¡¨è¾¾å¼è„šæœ¬è¾“å‡º key çš„å€¼æ˜¯ï¼š<br>    &lt;%=request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)==<span class="hljs-literal">null</span>?<span class="hljs-string">&quot;&quot;</span>:request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br/&gt;<br>    EL è¡¨è¾¾å¼è¾“å‡º key çš„å€¼æ˜¯ï¼š$&#123;key&#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="EL-è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº"><a href="#EL-è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº" class="headerlink" title="EL è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº"></a>EL è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº</h3><p>EL è¡¨è¾¾å¼ä¸»è¦æ˜¯åœ¨jspé¡µé¢ä¸­è¾“å‡ºæ•°æ®ï¼ˆä¸»è¦æ˜¯è¾“å‡ºåŸŸå¯¹è±¡ä¸­çš„æ•°æ®ï¼‰</p><p>å½“å››ä¸ªåŸŸä¸­éƒ½æœ‰ç›¸åŒçš„keyçš„æ•°æ®çš„æ—¶å€™ï¼ŒEL è¡¨è¾¾å¼ä¼šæŒ‰ç…§<strong>å››ä¸ªåŸŸçš„ä»å°åˆ°å¤§çš„é¡ºåº</strong>å»è¿›è¡Œæœç´¢ï¼Œæ‰¾åˆ°å°±è¾“å‡ºã€‚</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>    <span class="hljs-comment">// å¾€å››ä¸ªåŸŸä¸­éƒ½ä¿å­˜äº†ç›¸åŒçš„ key çš„æ•°æ®ã€‚</span><br>    request.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;request&quot;</span>);<br>    session.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;session&quot;</span>);<br>    application.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;application&quot;</span>);<br>    pageContext.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;pageContext&quot;</span>);<br>    %&gt;<br>    $&#123; key &#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure><h3 id="EL-è¡¨è¾¾å¼è¾“å‡º-Bean-çš„å±æ€§"><a href="#EL-è¡¨è¾¾å¼è¾“å‡º-Bean-çš„å±æ€§" class="headerlink" title="EL è¡¨è¾¾å¼è¾“å‡º Bean çš„å±æ€§"></a>EL è¡¨è¾¾å¼è¾“å‡º Bean çš„å±æ€§</h3><p>éœ€æ±‚â€”â€”è¾“å‡º Person ç±»ä¸­æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚list é›†åˆå±æ€§å’Œ map é›†åˆå±æ€§</p><p>æ³¨æ„ï¼šELè¡¨è¾¾å¼ è·å–å€¼æ—¶ä¸æ˜¯ç›´æ¥é€šè¿‡ç±»ä¸­å±æ€§è·å–ï¼Œè€Œæ˜¯é€šè¿‡ç±»ä¸­çš„ getXXX() æ–¹æ³•è·å–åˆ°å¯¹åº”çš„å±æ€§</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><p>Personç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-comment">// i. éœ€æ±‚ â€”â€” è¾“å‡º Person ç±»ä¸­æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚ list é›†åˆå±æ€§å’Œ map é›†åˆå±æ€§ã€‚</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String[] phones;<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; cities;<br>    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; map;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">18</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>japé¡µé¢ï¼ˆè¾“å‡ºä¿¡æ¯ï¼‰</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>        person.setName(<span class="hljs-string">&quot; å›½å“¥å¥½å¸…ï¼&quot;</span>);<br>        person.setPhones(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;18610541354&quot;</span>,<span class="hljs-string">&quot;18688886666&quot;</span>,<span class="hljs-string">&quot;18699998888&quot;</span>&#125;);<br>        List&lt;String&gt; cities = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        cities.add(<span class="hljs-string">&quot; åŒ—äº¬&quot;</span>);<br>        cities.add(<span class="hljs-string">&quot; ä¸Šæµ·&quot;</span>);<br>        cities.add(<span class="hljs-string">&quot; æ·±åœ³&quot;</span>);<br>        person.setCities(cities);<br>        Map&lt;String,Object&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;value1&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;key2&quot;</span>,<span class="hljs-string">&quot;value2&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;key3&quot;</span>,<span class="hljs-string">&quot;value3&quot;</span>);<br>        person.setMap(map);<br>        pageContext.setAttribute(<span class="hljs-string">&quot;p&quot;</span>, person);<br>    %&gt;<br>    è¾“å‡º Personï¼š$&#123; p &#125;&lt;br/&gt;<br>    è¾“å‡º Person çš„ name å±æ€§ï¼š$&#123;p.name&#125; &lt;br&gt;<br>    è¾“å‡º Person çš„ pnones æ•°ç»„å±æ€§å€¼ï¼š$&#123;p.phones[<span class="hljs-number">2</span>]&#125; &lt;br&gt;<br>    è¾“å‡º Person çš„ cities é›†åˆä¸­çš„å…ƒç´ å€¼ï¼š$&#123;p.cities&#125; &lt;br&gt;<br>    è¾“å‡º Person çš„ List é›†åˆä¸­ä¸ªåˆ«å…ƒç´ å€¼ï¼š$&#123;p.cities[<span class="hljs-number">2</span>]&#125; &lt;br&gt;<br>    è¾“å‡º Person çš„ Map é›†åˆ: $&#123;p.map&#125; &lt;br&gt;<br>    è¾“å‡º Person çš„ Map é›†åˆä¸­æŸä¸ª key çš„å€¼: $&#123;p.map.key3&#125; &lt;br&gt;<br>    è¾“å‡º Person çš„ age å±æ€§ï¼š$&#123;p.age&#125; &lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure><h3 id="EL-è¡¨è¾¾å¼â€”â€”è¿ç®—"><a href="#EL-è¡¨è¾¾å¼â€”â€”è¿ç®—" class="headerlink" title="EL è¡¨è¾¾å¼â€”â€”è¿ç®—"></a>EL è¡¨è¾¾å¼â€”â€”è¿ç®—</h3><ul><li><p>è¯­æ³•ï¼š${ è¿ç®—è¡¨è¾¾å¼ } </p></li><li><p>EL è¡¨è¾¾å¼æ”¯æŒå¦‚ä¸‹è¿ç®—ç¬¦ï¼š</p><ul><li><p>1ï¼‰å…³ç³»è¿ç®—</p><p><img src="/2022/10/03/JavaWebNote/image-20221105092644045.png" alt="image-20221105092644045"></p></li><li><p>2ï¼‰é€»è¾‘è¿ç®—</p><p><img src="/2022/10/03/JavaWebNote/image-20221105092714040.png" alt="image-20221105092714040"></p></li><li><p>3ï¼‰ç®—æ•°è¿ç®—</p><p><img src="/2022/10/03/JavaWebNote/image-20221105092836621.png" alt="image-20221105092836621"></p></li></ul></li><li><p>empty è¿ç®—</p><ul><li><p>empty è¿ç®—å¯ä»¥åˆ¤æ–­ä¸€ä¸ªæ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™è¾“å‡º trueï¼Œä¸ä¸ºç©ºåˆ™è¾“å‡º falseã€‚</p><p>ä»¥ä¸‹å‡ ç§æƒ…å†µä¸ºç©ºï¼š</p></li><li><p>1ã€å€¼ä¸º null å€¼çš„æ—¶å€™ï¼Œä¸ºç©º</p></li><li><p>2ã€å€¼ä¸º ç©ºä¸² çš„æ—¶å€™ï¼Œä¸ºç©º</p></li><li><p>3ã€å€¼æ˜¯ Object ç±»å‹æ•°ç»„ï¼Œé•¿åº¦ä¸ºé›¶çš„æ—¶å€™</p></li><li><p>4ã€list é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</p></li><li><p>5ã€map é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        <span class="hljs-comment">// 1 ã€å€¼ä¸º null å€¼çš„æ—¶å€™ï¼Œä¸ºç©º</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyNull&quot;</span>, <span class="hljs-literal">null</span>);<br>        <span class="hljs-comment">// 2 ã€å€¼ä¸ºç©ºä¸²çš„æ—¶å€™ï¼Œä¸ºç©º</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyStr&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-comment">// 3 ã€å€¼æ˜¯ Object ç±»å‹æ•°ç»„ï¼Œé•¿åº¦ä¸ºé›¶çš„æ—¶å€™</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyArr&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;&#125;);<br>        <span class="hljs-comment">// 4 ã€ list é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</span><br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-comment">// list.add(&quot;abc&quot;);</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyList&quot;</span>, list);<br>        <span class="hljs-comment">// 5 ã€ map é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</span><br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br>        <span class="hljs-comment">// map.put(&quot;key1&quot;, &quot;value1&quot;);</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyMap&quot;</span>, map);<br>    %&gt;<br>    $&#123; empty emptyNull &#125; &lt;br/&gt;<br>    $&#123; empty emptyStr &#125; &lt;br/&gt;<br>    $&#123; empty emptyArr &#125; &lt;br/&gt;<br>    $&#123; empty emptyList &#125; &lt;br/&gt;<br>    $&#123; empty emptyMap &#125; &lt;br/&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>ä¸‰å…ƒè¿ç®—</p></li><li><p>è¡¨è¾¾å¼ 1 ï¼Ÿè¡¨è¾¾å¼ 2ï¼šè¡¨è¾¾å¼ 3</p></li><li><p>å¦‚æœè¡¨è¾¾å¼ 1 çš„å€¼ä¸ºçœŸï¼Œè¿”å›è¡¨è¾¾å¼ 2 çš„å€¼ï¼Œå¦‚æœè¡¨è¾¾å¼ 1 çš„å€¼ä¸ºå‡ï¼Œè¿”å›è¡¨è¾¾å¼ 3 çš„å€¼ã€‚</p></li><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">$&#123; <span class="hljs-number">12</span> != <span class="hljs-number">12</span> ? <span class="hljs-string">&quot;å›½å“¥å¸…å‘†&quot;</span> : <span class="hljs-string">&quot;å›½å“¥åˆéª—äººå•¦&quot;</span> &#125;<br></code></pre></td></tr></table></figure></li><li><p>â€œ . â€ ç‚¹è¿ç®—ç¬¦ å’Œ [] ä¸­æ‹¬å·è¿ç®—ç¬¦</p></li><li><p>. ç‚¹è¿ç®—ï¼Œå¯ä»¥è¾“å‡º Bean å¯¹è±¡ä¸­æŸä¸ªå±æ€§çš„å€¼ã€‚</p></li><li><p>[] ä¸­æ‹¬å·è¿ç®—ï¼Œå¯ä»¥è¾“å‡ºæœ‰åºé›†åˆä¸­æŸä¸ªå…ƒç´ çš„å€¼ã€‚</p><p>å¹¶ä¸”[]ä¸­æ‹¬å·è¿ç®—ï¼Œè¿˜å¯ä»¥è¾“å‡º map é›†åˆä¸­ key é‡Œå«æœ‰ç‰¹æ®Šå­—ç¬¦çš„ key çš„å€¼ã€‚</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br>        map.put(<span class="hljs-string">&quot;a.a.a&quot;</span>, <span class="hljs-string">&quot;aaaValue&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;b+b+b&quot;</span>, <span class="hljs-string">&quot;bbbValue&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;c-c-c&quot;</span>, <span class="hljs-string">&quot;cccValue&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;map&quot;</span>, map);<br>    %&gt;<br>    $&#123; map[<span class="hljs-string">&#x27;a.a.a&#x27;</span>] &#125; &lt;br&gt;<br>    $&#123; map[<span class="hljs-string">&quot;b+b+b&quot;</span>] &#125; &lt;br&gt;<br>    $&#123; map[<span class="hljs-string">&#x27;c-c-c&#x27;</span>] &#125; &lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="EL-è¡¨è¾¾å¼çš„11ä¸ªéšå«å¯¹è±¡"><a href="#EL-è¡¨è¾¾å¼çš„11ä¸ªéšå«å¯¹è±¡" class="headerlink" title="EL è¡¨è¾¾å¼çš„11ä¸ªéšå«å¯¹è±¡"></a>EL è¡¨è¾¾å¼çš„11ä¸ªéšå«å¯¹è±¡</h3><p>EL è¡¨è¾¾å¼ä¸­çš„11ä¸ªéšå«å¯¹è±¡ï¼Œæ˜¯ELè¡¨è¾¾å¼è‡ªå·±å®šä¹‰çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</p><table><thead><tr><th align="center">å˜é‡</th><th align="center">ç±»å‹</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">pageContext</td><td align="center">PageContextImpl</td><td align="center">å¯ä»¥è·å–jspä¸­çš„ä¹å¤§å†…ç½®å¯¹è±¡</td></tr><tr><td align="center">pageScope</td><td align="center">Map&lt;String, Object&gt;</td><td align="center">å¯ä»¥è·å– pageContext åŸŸä¸­çš„æ•°æ®</td></tr><tr><td align="center">requestScope</td><td align="center">Map&lt;String, Object&gt;</td><td align="center">å¯ä»¥è·å– Request åŸŸä¸­çš„æ•°æ®</td></tr><tr><td align="center">sessionScope</td><td align="center">Map&lt;String, Object&gt;</td><td align="center">å¯ä»¥è·å– Session åŸŸä¸­çš„æ•°æ®</td></tr><tr><td align="center">applicationScope</td><td align="center">Map&lt;String, Object&gt;</td><td align="center">å¯ä»¥è·å– ServletContext åŸŸä¸­çš„æ•°æ®</td></tr><tr><td align="center">param</td><td align="center">Map&lt;String, String&gt;</td><td align="center">å¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼</td></tr><tr><td align="center">paramValues</td><td align="center">Map&lt;String,String[]&gt;</td><td align="center">å¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼ï¼Œè·å–å¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨</td></tr><tr><td align="center">header</td><td align="center">Map&lt;String, String&gt;</td><td align="center">å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯</td></tr><tr><td align="center">headerValues</td><td align="center">Map&lt;String,String[]&gt;</td><td align="center">å¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯ï¼Œå®ƒå¯ä»¥è·å–å¤šä¸ªå€¼çš„æƒ…å†µ</td></tr><tr><td align="center">cookie</td><td align="center">Map&lt;String, Cookie&gt;</td><td align="center">å®ƒå¯ä»¥è·å–å½“å‰è¯·æ±‚çš„ Cookie ä¿¡æ¯</td></tr><tr><td align="center">initParam</td><td align="center">Map&lt;String, String&gt;</td><td align="center">å¯è·å–åœ¨ web.xml ä¸­é…ç½®çš„&lt;context-param&gt;ä¸Šä¸‹æ–‡å‚æ•°</td></tr></tbody></table><h4 id="EL-è·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§"><a href="#EL-è·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§" class="headerlink" title="EL è·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§"></a>EL è·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§</h4><p>pageScope &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; pageContext åŸŸ<br>requestScope    &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Request åŸŸ<br>sessionScope    &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;  Session åŸŸ<br>applicationScope  &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ServletContext åŸŸ</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        pageContext.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;pageContext1&quot;</span>);<br>        pageContext.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;pageContext2&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;request&quot;</span>);<br>        session.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;session&quot;</span>);<br>        application.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;application&quot;</span>);<br>    %&gt;<br>    $&#123; key2 &#125; &lt;!-- ä¼šè¾“å‡ºpageContextçš„key2 --&gt;<br>    $&#123; applicationScope.key2 &#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure><h4 id="pageContext-å¯¹è±¡çš„ä½¿ç”¨"><a href="#pageContext-å¯¹è±¡çš„ä½¿ç”¨" class="headerlink" title="pageContext å¯¹è±¡çš„ä½¿ç”¨"></a>pageContext å¯¹è±¡çš„ä½¿ç”¨</h4><ol><li>åè®®ï¼š${ req.scheme }</li><li>æœåŠ¡å™¨ ipï¼š${ pageContext.request.serverName }</li><li>æœåŠ¡å™¨ç«¯å£ï¼š${ pageContext.request.serverPort }</li><li>è·å–å·¥ç¨‹è·¯å¾„ï¼š${ pageContext.request.contextPath }</li><li>è·å–è¯·æ±‚æ–¹æ³•ï¼š${ pageContext.request.method }</li><li>è·å–å®¢æˆ·ç«¯ ip åœ°å€ï¼š${ pageContext.request.remoteHost }</li><li>è·å–ä¼šè¯çš„ id ç¼–å·ï¼š${ pageContext.session.id }</li></ol><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%--<br>    JSP æ–¹å¼è·å–ç›¸å…³ä¿¡æ¯ï¼š<br>        request.getScheme()  å®ƒå¯ä»¥è·å–è¯·æ±‚çš„åè®®<br>        request.getServerName()  è·å–è¯·æ±‚çš„æœåŠ¡å™¨ ip æˆ–åŸŸå<br>        request.getServerPort()  è·å–è¯·æ±‚çš„æœåŠ¡å™¨ç«¯å£å·<br>        request.getContextPath() è·å–å½“å‰å·¥ç¨‹è·¯å¾„<br>        request.getMethod()  è·å–è¯·æ±‚çš„æ–¹å¼ï¼ˆ GET æˆ– POST ï¼‰<br>        request.getRemoteHost()  è·å–å®¢æˆ·ç«¯çš„ ip åœ°å€<br>        session.getId()  è·å–ä¼šè¯çš„å”¯ä¸€æ ‡è¯†<br>    --%&gt;<br>    &lt;%<br>    <span class="hljs-comment">//è®¾ç½®ï¼Œç®€åŒ–ä»£ç </span><br>    pageContext.setAttribute(<span class="hljs-string">&quot;req&quot;</span>, request);  <br>    %&gt;<br>    <span class="hljs-number">1.</span>åè®®ï¼š $&#123; req.scheme &#125; æˆ– &lt;%=request.getScheme() %&gt;&lt;br&gt;<br>    <span class="hljs-number">2.</span>æœåŠ¡å™¨ ipï¼š$&#123; pageContext.request.serverName &#125;&lt;br&gt;<br>    <span class="hljs-number">3.</span>æœåŠ¡å™¨ç«¯å£ï¼š$&#123; pageContext.request.serverPort &#125;&lt;br&gt;<br>    <span class="hljs-number">4.</span>è·å–å·¥ç¨‹è·¯å¾„ï¼š$&#123; pageContext.request.contextPath &#125;&lt;br&gt;<br>    <span class="hljs-number">5.</span>è·å–è¯·æ±‚æ–¹æ³•ï¼š$&#123; pageContext.request.method &#125;&lt;br&gt;<br>    <span class="hljs-number">6.</span>è·å–å®¢æˆ·ç«¯ ip åœ°å€ï¼š$&#123; pageContext.request.remoteHost &#125;&lt;br&gt;<br>    <span class="hljs-number">7.</span>è·å–ä¼šè¯çš„ id ç¼–å·ï¼š$&#123; pageContext.session.id &#125;&lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure><h4 id="EL-è¡¨è¾¾å¼å…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨"><a href="#EL-è¡¨è¾¾å¼å…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨" class="headerlink" title="EL è¡¨è¾¾å¼å…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨"></a>EL è¡¨è¾¾å¼å…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨</h4><ul><li><p>param Map&lt;String,String&gt;    å®ƒå¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼</p></li><li><p>paramValues             Map&lt;String,String[]&gt;              å®ƒä¹Ÿå¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼ï¼Œè·å–å¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ã€‚</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- <br>è¯·æ±‚åœ°å€ä¸ºï¼šhttp:<span class="hljs-comment">//localhost:8080/09_EL_JSTL/other_el_obj.jsp?username=wzg168&amp;password=666666&amp;hobby=java&amp;hobby=cpp </span><br>--&gt;<br>è¾“å‡ºè¯·æ±‚å‚æ•° username çš„å€¼ï¼š$&#123; param.username &#125; &lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å‚æ•° password çš„å€¼ï¼š$&#123; param.password &#125; &lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å‚æ•° username çš„å€¼ï¼š$&#123; paramValues.username[<span class="hljs-number">0</span>] &#125; &lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å‚æ•° hobby çš„å€¼ï¼š$&#123; paramValues.hobby[<span class="hljs-number">0</span>] &#125; &lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å‚æ•° hobby çš„å€¼ï¼š$&#123; paramValues.hobby[<span class="hljs-number">1</span>] &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure></li><li><p>header                      Map&lt;String,String&gt;                 å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯</p></li><li><p>headerValues          Map&lt;String,String[]&gt;               å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯ï¼Œå®ƒå¯ä»¥è·å–å¤šä¸ªå€¼çš„æƒ…å†µ</p><img src="image-20221105105607665.png" alt="image-20221105105607665" style="zoom:80%;" /><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">è¾“å‡ºè¯·æ±‚å¤´ä¿¡æ¯ï¼š$&#123; header &#125;&lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å¤´ã€User-Agentã€‘çš„å€¼ï¼š$&#123; header[<span class="hljs-string">&#x27;User-Agent&#x27;</span>] &#125; &lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å¤´ã€Connectionã€‘çš„å€¼ï¼š$&#123; header.Connection &#125; &lt;br&gt;<br>è¾“å‡ºè¯·æ±‚å¤´ã€User-Agentã€‘çš„å€¼ï¼š$&#123; headerValues[<span class="hljs-string">&#x27;User-Agent&#x27;</span>][<span class="hljs-number">0</span>] &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure></li><li><p>cookie                       Map&lt;String,Cookie&gt;                å®ƒå¯ä»¥è·å–å½“å‰è¯·æ±‚çš„ Cookie ä¿¡æ¯</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsp">è·å– Cookie çš„åç§°ï¼š$&#123; cookie.JSESSIONID.name &#125; &lt;br&gt;<br>è·å– Cookie çš„å€¼ï¼š$&#123; cookie.JSESSIONID.value &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure></li><li><p>initParam           Map&lt;String,String&gt;        å®ƒå¯ä»¥è·å–åœ¨ web.xml ä¸­é…ç½®çš„&lt;context-param&gt;ä¸Šä¸‹æ–‡å‚æ•°</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- xmlä¸­çš„é…ç½® --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql:///test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- ç¤ºä¾‹ä»£ç  --&gt;<br>è¾“å‡º&amp;lt;Context-param&amp;gt;username çš„å€¼ï¼š$&#123; initParam.username &#125; &lt;br&gt;<br>è¾“å‡º&amp;lt;Context-param&amp;gt;url çš„å€¼ï¼š$&#123; initParam.url &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="JSTL-æ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼‰"><a href="#JSTL-æ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼‰" class="headerlink" title="JSTL æ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼‰"></a>JSTL æ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼‰</h2><h3 id="ç®€è¦ä»‹ç»"><a href="#ç®€è¦ä»‹ç»" class="headerlink" title="ç®€è¦ä»‹ç»"></a>ç®€è¦ä»‹ç»</h3><p>JSTL æ ‡ç­¾åº“ å…¨ç§°æ˜¯æŒ‡ JSP Standard Tag Library JSP æ ‡å‡†æ ‡ç­¾åº“ã€‚æ˜¯ä¸€ä¸ªä¸æ–­å®Œå–„çš„å¼€æ”¾æºä»£ç çš„ JSP æ ‡ç­¾åº“ã€‚<br>EL è¡¨è¾¾å¼ä¸»è¦æ˜¯ä¸ºäº†æ›¿æ¢ jsp ä¸­çš„è¡¨è¾¾å¼è„šæœ¬ï¼Œè€Œæ ‡ç­¾åº“åˆ™æ˜¯ä¸ºäº†æ›¿æ¢ä»£ç è„šæœ¬ã€‚è¿™æ ·ä½¿å¾—æ•´ä¸ª jsp é¡µé¢å˜å¾—æ›´ä½³ç®€æ´ã€‚</p><ul><li><p>JSTL ç”±äº”ä¸ªä¸åŒåŠŸèƒ½çš„æ ‡ç­¾åº“ç»„æˆã€‚</p><table><thead><tr><th>åŠŸèƒ½èŒƒå›´</th><th>URI</th><th>å‰ç¼€</th></tr></thead><tbody><tr><td>æ ¸å¿ƒ æ ‡ç­¾åº“ï¼ˆé‡ç‚¹ï¼‰</td><td><a href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a></td><td>c</td></tr><tr><td>æ ¼å¼åŒ–</td><td><a href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a></td><td>fmt</td></tr><tr><td>å‡½æ•°</td><td><a href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a></td><td>fn</td></tr><tr><td>æ•°æ®åº“ï¼ˆä¸ä½¿ç”¨ï¼‰</td><td><a href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a></td><td>sql</td></tr><tr><td>XMLï¼ˆä¸ä½¿ç”¨ï¼‰</td><td><a href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a></td><td>x</td></tr></tbody></table></li><li><p>åœ¨ jsp æ ‡ç­¾åº“ä¸­ä½¿ç”¨ taglib æŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsp">CORE æ ‡ç­¾åº“<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;c&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;<br>XML æ ‡ç­¾åº“<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;x&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/xml&quot;</span> %&gt;<br>FMT æ ‡ç­¾åº“<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;fmt&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;<br>SQL æ ‡ç­¾åº“<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;sql&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/sql&quot;</span> %&gt;<br>FUNCTIONS æ ‡ç­¾åº“<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;fn&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="JSTL-æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤"><a href="#JSTL-æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="JSTL æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤"></a>JSTL æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤</h3><ul><li><p>1ã€å…ˆå¯¼å…¥ jstl æ ‡ç­¾åº“çš„ jar åŒ…ã€‚</p><ul><li>taglibs-standard-impl-1.2.1.jar</li><li>taglibs-standard-spec-1.2.1.jar</li></ul><p> <img src="/2022/10/03/JavaWebNote/image-20221105112814881.png" alt="image-20221105112814881"></p></li><li><p>2ã€ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨ taglib æŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“ã€‚</p><ul><li>&lt;%@ taglib prefix&#x3D;â€câ€ uri&#x3D;â€<a href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a>â€œ %&gt;</li></ul></li></ul><h3 id="core-æ ¸å¿ƒåº“ä½¿ç”¨"><a href="#core-æ ¸å¿ƒåº“ä½¿ç”¨" class="headerlink" title="core æ ¸å¿ƒåº“ä½¿ç”¨"></a>core æ ¸å¿ƒåº“ä½¿ç”¨</h3><ul><li><p>&lt;c:set &#x2F;&gt; ï¼ˆä½¿ç”¨å¾ˆå°‘ï¼‰</p><p>ä½œç”¨ï¼šset æ ‡ç­¾å¯ä»¥å¾€åŸŸä¸­ä¿å­˜æ•°æ®</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<br>    i.&lt;c:set /&gt;<br>    ä½œç”¨ï¼š set æ ‡ç­¾å¯ä»¥å¾€åŸŸä¸­ä¿å­˜æ•°æ®<br>        <br>    åŸŸå¯¹è±¡.setAttribute(key,value);<br>scope å±æ€§è®¾ç½®ä¿å­˜åˆ°å“ªä¸ªåŸŸ<br>        page è¡¨ç¤º PageContext åŸŸï¼ˆé»˜è®¤å€¼ï¼‰<br>        request è¡¨ç¤º Request åŸŸ<br>        session è¡¨ç¤º Session åŸŸ<br>        application è¡¨ç¤º ServletContext åŸŸ<br>    <span class="hljs-keyword">var</span> å±æ€§è®¾ç½® key<br>    value å±æ€§è®¾ç½® å€¼<br>--&gt;<br>ä¿å­˜ä¹‹å‰ï¼š$&#123; sessionScope.abc &#125; &lt;br&gt;<br>&lt;c:set scope=<span class="hljs-string">&quot;session&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;abc&quot;</span> value=<span class="hljs-string">&quot;abcValue&quot;</span>/&gt;<br>ä¿å­˜ä¹‹åï¼š$&#123; sessionScope.abc &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure></li><li><p>&lt;c:if &#x2F;&gt;</p></li></ul><p>  if æ ‡ç­¾ç”¨æ¥åš if åˆ¤æ–­ã€‚(æ³¨ï¼šæ²¡æœ‰elseæ ‡ç­¾)</p>  <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<br>    ii.&lt;c:<span class="hljs-keyword">if</span> /&gt;<br>        <span class="hljs-keyword">if</span> æ ‡ç­¾ç”¨æ¥åš <span class="hljs-keyword">if</span> åˆ¤æ–­ã€‚<br>        test å±æ€§è¡¨ç¤ºåˆ¤æ–­çš„æ¡ä»¶ï¼ˆä½¿ç”¨ EL è¡¨è¾¾å¼è¾“å‡ºï¼‰<br>--&gt;<br>&lt;c:<span class="hljs-keyword">if</span> test=<span class="hljs-string">&quot;$&#123; 12 == 12 &#125;&quot;</span>&gt;<br>    &lt;h1&gt;<span class="hljs-number">12</span> ç­‰äº <span class="hljs-number">12</span>&lt;/h1&gt;<br>&lt;/c:<span class="hljs-keyword">if</span>&gt;<br>&lt;c:<span class="hljs-keyword">if</span> test=<span class="hljs-string">&quot;$&#123; 12 != 12 &#125;&quot;</span>&gt;<br>    &lt;h1&gt;<span class="hljs-number">12</span> ä¸ç­‰äº <span class="hljs-number">12</span>&lt;/h1&gt;<br>&lt;/c:<span class="hljs-keyword">if</span>&gt;<br></code></pre></td></tr></table></figure><ul><li><p>&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt; æ ‡ç­¾</p><p>ä½œç”¨ï¼šå¤šè·¯åˆ¤æ–­ã€‚è·Ÿ switch â€¦ case â€¦. default éå¸¸æ¥è¿‘</p><p>â€‹ä¸åŒä¹‹å¤„ï¼Œä¸éœ€è¦break</p><p>æ³¨æ„ï¼šæ ‡ç­¾é‡Œä¸èƒ½ä½¿ç”¨ html æ³¨é‡Šï¼Œè¦ä½¿ç”¨ jsp æ³¨é‡Š</p><p>â€‹when æ ‡ç­¾çš„çˆ¶æ ‡ç­¾ä¸€å®šè¦æ˜¯ choose æ ‡ç­¾</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<br>    iii.&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt; æ ‡ç­¾<br>        ä½œç”¨ï¼šå¤šè·¯åˆ¤æ–­ã€‚è·Ÿ <span class="hljs-keyword">switch</span> ... <span class="hljs-keyword">case</span> .... <span class="hljs-keyword">default</span> éå¸¸æ¥è¿‘<br>            <br>        choose æ ‡ç­¾å¼€å§‹é€‰æ‹©åˆ¤æ–­<br>        when æ ‡ç­¾è¡¨ç¤ºæ¯ä¸€ç§åˆ¤æ–­æƒ…å†µ<br>        test å±æ€§è¡¨ç¤ºå½“å‰è¿™ç§åˆ¤æ–­æƒ…å†µçš„å€¼<br>        otherwise æ ‡ç­¾è¡¨ç¤ºå‰©ä¸‹çš„æƒ…å†µ<br>        &lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt; æ ‡ç­¾ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çš„ç‚¹ï¼š<br>            <span class="hljs-number">1</span>ã€æ ‡ç­¾é‡Œä¸èƒ½ä½¿ç”¨ html æ³¨é‡Šï¼Œè¦ä½¿ç”¨ jsp æ³¨é‡Š<br>            <span class="hljs-number">2</span>ã€when æ ‡ç­¾çš„çˆ¶æ ‡ç­¾ä¸€å®šè¦æ˜¯ choose æ ‡ç­¾<br>--&gt;<br>&lt;%<br>request.setAttribute(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-number">180</span>);<br>%&gt;<br>&lt;c:choose&gt;<br>    &lt;%--ï¼ˆæ ‡ç­¾é‡Œä¸èƒ½ä½¿ç”¨ html æ³¨é‡Šï¼Œè¦ä½¿ç”¨ jsp æ³¨é‡Šï¼‰--%&gt;  <br>    &lt;c:when test=<span class="hljs-string">&quot;$&#123; requestScope.height &gt; 190 &#125;&quot;</span>&gt;<br>        &lt;h2&gt;å°å·¨äºº&lt;/h2&gt;<br>    &lt;/c:when&gt;<br>    &lt;c:when test=<span class="hljs-string">&quot;$&#123; requestScope.height &gt; 180 &#125;&quot;</span>&gt;<br>        &lt;h2&gt;å¾ˆé«˜&lt;/h2&gt;<br>    &lt;/c:when&gt;<br>    &lt;c:when test=<span class="hljs-string">&quot;$&#123; requestScope.height &gt; 170 &#125;&quot;</span>&gt;<br>        &lt;h2&gt;è¿˜å¯ä»¥&lt;/h2&gt;<br>    &lt;/c:when&gt;<br>    &lt;c:otherwise&gt;<br>        &lt;c:choose&gt;  &lt;%-- when æ ‡ç­¾çš„çˆ¶æ ‡ç­¾ä¸€å®šè¦æ˜¯ choose æ ‡ç­¾ --%&gt; <br>            &lt;c:when test=<span class="hljs-string">&quot;$&#123;requestScope.height &gt; 160&#125;&quot;</span>&gt;<br>                &lt;h3&gt;å¤§äº <span class="hljs-number">160</span>&lt;/h3&gt;<br>            &lt;/c:when&gt;<br>            &lt;c:when test=<span class="hljs-string">&quot;$&#123;requestScope.height &gt; 150&#125;&quot;</span>&gt;<br>                &lt;h3&gt;å¤§äº <span class="hljs-number">150</span>&lt;/h3&gt;<br>            &lt;/c:when&gt;<br>            &lt;c:when test=<span class="hljs-string">&quot;$&#123;requestScope.height &gt; 140&#125;&quot;</span>&gt;<br>                &lt;h3&gt;å¤§äº <span class="hljs-number">140</span>&lt;/h3&gt;<br>            &lt;/c:when&gt;<br>            &lt;c:otherwise&gt;<br>                å…¶ä»–å°äº <span class="hljs-number">140</span><br>            &lt;/c:otherwise&gt;<br>        &lt;/c:choose&gt;<br>    &lt;/c:otherwise&gt;<br>&lt;/c:choose&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>&lt;c:forEach &#x2F;&gt;</strong></p></li></ul><p>  ä½œç”¨ï¼šéå†è¾“å‡ºä½¿ç”¨ã€‚</p><ul><li><p>1ï¼‰éå† 1 åˆ° 10ï¼Œè¾“å‡º</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<span class="hljs-number">1.</span> éå† <span class="hljs-number">1</span> åˆ° <span class="hljs-number">10</span> ï¼Œè¾“å‡º<br>    begin å±æ€§è®¾ç½®å¼€å§‹çš„ç´¢å¼•<br>    end å±æ€§è®¾ç½®ç»“æŸçš„ç´¢å¼•<br>    <span class="hljs-keyword">var</span> å±æ€§è¡¨ç¤ºå¾ªç¯çš„å˜é‡ ( ä¹Ÿæ˜¯å½“å‰æ­£åœ¨éå†åˆ°çš„æ•°æ® )<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++)<br>--&gt;<br>&lt;table border=<span class="hljs-string">&quot;1&quot;</span>&gt;<br>    &lt;c:forEach begin=<span class="hljs-string">&quot;1&quot;</span> end=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;i&quot;</span>&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;ç¬¬$&#123;i&#125;è¡Œ&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/c:forEach&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure></li><li><p>2ï¼‰éå† Object æ•°ç»„</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- <span class="hljs-number">2.</span> éå† Object æ•°ç»„<br>    <span class="hljs-keyword">for</span> (Object item: arr)<br>    items è¡¨ç¤ºéå†çš„æ•°æ®æºï¼ˆéå†çš„é›†åˆï¼‰<br>    <span class="hljs-keyword">var</span> è¡¨ç¤ºå½“å‰éå†åˆ°çš„æ•°æ®<br>--&gt;<br>&lt;%<br>request.setAttribute(<span class="hljs-string">&quot;arr&quot;</span>, <br><span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;18610541354&quot;</span>,<span class="hljs-string">&quot;18688886666&quot;</span>,<span class="hljs-string">&quot;18699998888&quot;</span>&#125;);<br>%&gt;<br>&lt;c:forEach items=<span class="hljs-string">&quot;$&#123; requestScope.arr &#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;<br>    $&#123; item &#125; &lt;br&gt;<br>&lt;/c:forEach&gt;<br></code></pre></td></tr></table></figure></li><li><p>3ï¼‰éå† Map é›†åˆ</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br>    Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br>    map.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br><span class="hljs-comment">//  for ( Map.Entry&lt;String,Object&gt; entry : map.entrySet()) &#123;</span><br><span class="hljs-comment">//  &#125;</span><br>    request.setAttribute(<span class="hljs-string">&quot;map&quot;</span>, map);<br>%&gt;<br>&lt;c:forEach items=<span class="hljs-string">&quot;$&#123; requestScope.map &#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;entry&quot;</span>&gt;<br>    &lt;h1&gt;$&#123;entry.key&#125; = $&#123;entry.value&#125;&lt;/h1&gt;<br>&lt;/c:forEach&gt;<br></code></pre></td></tr></table></figure></li><li><p>4ï¼‰éå† List é›†åˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Student ç±»ï¼š</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">//4. ç¼–å·ï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œå¹´é¾„ï¼Œç”µè¯ä¿¡æ¯</span><br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String phone;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- ç¤ºä¾‹ä»£ç  --&gt;<br>&lt;!--<br>éå† List é›†åˆ ---list ä¸­å­˜æ”¾ Student ç±»ï¼Œæœ‰å±æ€§ï¼šç¼–å·ï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œå¹´é¾„ï¼Œç”µè¯ä¿¡æ¯ <br>--&gt;<br>&lt;%<br>    List&lt;Student&gt; studentList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Student&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>        studentList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(i,<span class="hljs-string">&quot;username&quot;</span>+i ,<span class="hljs-string">&quot;pass&quot;</span>+i,<span class="hljs-number">18</span>+i,<span class="hljs-string">&quot;phone&quot;</span>+i));<br>    &#125;<br>    request.setAttribute(<span class="hljs-string">&quot;stus&quot;</span>, studentList);<br>%&gt;<br>&lt;table&gt;<br>    &lt;tr&gt;<br>        &lt;th&gt;ç¼–å·&lt;/th&gt;<br>        &lt;th&gt;ç”¨æˆ·å&lt;/th&gt;<br>        &lt;th&gt;å¯†ç &lt;/th&gt;<br>        &lt;th&gt;å¹´é¾„&lt;/th&gt;<br>        &lt;th&gt;ç”µè¯&lt;/th&gt;<br>        &lt;th&gt;æ“ä½œ&lt;/th&gt;<br>    &lt;/tr&gt;<br>    &lt;!--<br>        items è¡¨ç¤ºéå†çš„é›†åˆ<br>        <span class="hljs-keyword">var</span> è¡¨ç¤ºéå†åˆ°çš„æ•°æ®<br>        begin è¡¨ç¤ºéå†çš„å¼€å§‹ç´¢å¼•å€¼<br>        end è¡¨ç¤ºç»“æŸçš„ç´¢å¼•å€¼<br>        step å±æ€§è¡¨ç¤ºéå†çš„æ­¥é•¿å€¼<br>        varStatus å±æ€§è¡¨ç¤ºå½“å‰éå†åˆ°çš„æ•°æ®çš„çŠ¶æ€<br>        <span class="hljs-keyword">for</span> ï¼ˆ <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i+=<span class="hljs-number">2</span> ï¼‰<br>    --&gt;<br>    &lt;c:forEach begin=<span class="hljs-string">&quot;2&quot;</span> end=<span class="hljs-string">&quot;7&quot;</span> step=<span class="hljs-string">&quot;2&quot;</span> varStatus=<span class="hljs-string">&quot;status&quot;</span> items=<span class="hljs-string">&quot;$&#123;requestScope.stus&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;stu&quot;</span>&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;$&#123;stu.id&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.username&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.password&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.age&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.phone&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;status.index&#125;&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/c:forEach&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½"><a href="#æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½"></a>æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½</h2><p>æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼Œæ˜¯éå¸¸å¸¸è§çš„åŠŸèƒ½ã€‚å¾ˆå¤šçš„ç³»ç»Ÿä¸­ï¼Œæˆ–è€…è½¯ä»¶ä¸­éƒ½ç»å¸¸ä½¿ç”¨æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ã€‚</p><p>æ¯”å¦‚ï¼šQQå¤´åƒï¼Œä½¿ç”¨äº†ä¸Šä¼ ï¼›é‚®ç®±ä¸­ä¹Ÿæœ‰é™„ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½åŠŸèƒ½ï¼›QAç³»ç»Ÿä¸­å®¡æ‰¹æœ‰é™„ä»¶ææ–™çš„ä¸Šä¼ ã€‚</p><h3 id="æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»"><a href="#æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»" class="headerlink" title="æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»"></a>æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»</h3><ul><li><p>1ã€è¦æœ‰ä¸€ä¸ª form æ ‡ç­¾ï¼Œmethod&#x3D;post è¯·æ±‚</p></li><li><p>2ã€formæ ‡ç­¾çš„ encType å±æ€§å€¼å¿…é¡»ä¸º myltipart&#x2F;form-data å€¼</p></li><li><p>3ã€åœ¨ form æ ‡ç­¾ä¸­ä½¿ç”¨ input type&#x3D;file æ·»åŠ ä¸Šä¼ çš„æ–‡ä»¶</p></li><li><p>4ã€ç¼–å†™æœåŠ¡å™¨ä»£ç ï¼ˆServlet ç¨‹åºï¼‰æ¥æ”¶ï¼Œå¤„ç†ä¸Šä¼ çš„æ•°æ®</p></li><li><p>encType&#x3D;multipart&#x2F;form-data è¡¨ç¤ºæäº¤çš„æ•°æ®ï¼Œ</p><p>ä»¥å¤šæ®µï¼ˆæ¯ä¸€ä¸ªè¡¨å•é¡¹ä¸€ä¸ªæ•°æ®æ®µï¼‰çš„å½¢å¼è¿›è¡Œæ‹¼æ¥ï¼Œç„¶åä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼å‘é€ç»™æœåŠ¡å™¨ã€‚</p></li></ul><h4 id="æ–‡ä»¶ä¸Šä¼ ï¼ŒHTTP-åè®®å†…å®¹çš„è¯´æ˜"><a href="#æ–‡ä»¶ä¸Šä¼ ï¼ŒHTTP-åè®®å†…å®¹çš„è¯´æ˜" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ï¼ŒHTTP åè®®å†…å®¹çš„è¯´æ˜"></a>æ–‡ä»¶ä¸Šä¼ ï¼ŒHTTP åè®®å†…å®¹çš„è¯´æ˜</h4><p><img src="/2022/10/03/JavaWebNote/image-20221105165555719.png" alt="image-20221105165555719"></p><p>å¦‚ä½•è§£æä¸Šä¼ çš„æ•°æ®ï¼Ÿ</p><h4 id="commons-fileupload-jar-å¸¸ç”¨-API-ä»‹ç»è¯´æ˜"><a href="#commons-fileupload-jar-å¸¸ç”¨-API-ä»‹ç»è¯´æ˜" class="headerlink" title="commons-fileupload.jar å¸¸ç”¨ API ä»‹ç»è¯´æ˜"></a>commons-fileupload.jar å¸¸ç”¨ API ä»‹ç»è¯´æ˜</h4><p>commons-fileupload.jar èµ– éœ€è¦ä¾èµ– commons-io.jar è¿™ä¸ªåŒ…ï¼Œæ‰€ä»¥ä¸¤ä¸ªåŒ…æˆ‘ä»¬éƒ½è¦å¼•å…¥ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯éœ€è¦å¯¼å…¥ä¸¤ä¸ª jar åŒ…ï¼šcommons-fileupload-1.2.1.jar å’Œ commons-io-1.4.jar</p><ul><li><p>commons-fileupload.jar å’Œ å’Œ commons-io.jar åŒ…ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ç±»æœ‰å“ªäº›ï¼Ÿ</p><ul><li><p>ServletFileUpload ç±»</p><p>â€‹ç”¨äºè§£æä¸Šä¼ çš„æ•°æ®ã€‚</p></li><li><p>FileItem ç±»</p><p>â€‹è¡¨ç¤ºæ¯ä¸€ä¸ªè¡¨å•é¡¹ã€‚</p></li><li><p>boolean ServletFileUpload.isMultipartContent(HttpServletRequest request);</p><p>â€‹åˆ¤æ–­å½“å‰ä¸Šä¼ çš„æ•°æ®æ ¼å¼æ˜¯å¦æ˜¯å¤šæ®µçš„æ ¼å¼ã€‚</p><p>â€‹è‹¥è¿”å›å€¼ä¸ºtrueåˆ™æ˜¯å¸¦æ–‡ä»¶ä¸Šä¼ çš„è¡¨å•ï¼›è¿”å›å€¼ä¸ºfalseåˆ™æ˜¯æ™®é€šè¡¨å•ã€‚</p></li><li><p>public List&lt;FileItem&gt; parseRequest(HttpServletRequest request)</p><p>â€‹è§£æä¸Šä¼ çš„æ•°æ®</p></li><li><p>boolean FileItem.isFormField()</p><p>â€‹åˆ¤æ–­å½“å‰è¿™ä¸ªè¡¨å•é¡¹ï¼Œæ˜¯å¦æ˜¯æ™®é€šçš„è¡¨å•é¡¹ã€‚è¿˜æ˜¯ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ã€‚</p><p>â€‹true è¡¨ç¤ºæ™®é€šç±»å‹çš„è¡¨å•é¡¹</p><p>â€‹false è¡¨ç¤ºä¸Šä¼ çš„æ˜¯æ–‡ä»¶ç±»å‹</p></li><li><p>String FileItem.getFieldName()</p><p>â€‹è·å–è¡¨å•é¡¹çš„ name å±æ€§å€¼</p></li><li><p>String FileItem.getString()</p><p>â€‹è·å–å½“å‰è¡¨å•é¡¹çš„å€¼ã€‚</p></li><li><p>String FileItem.getName();</p><p>â€‹è·å–ä¸Šä¼ çš„æ–‡ä»¶å</p></li><li><p>void FileItem.write( file );</p><p>â€‹å°†ä¸Šä¼ çš„æ–‡ä»¶å†™åˆ° å‚æ•° file æ‰€æŒ‡å‘çš„ç¡¬ç›˜ä½ç½® ã€‚</p></li></ul></li></ul><h4 id="fileupload-ç±»åº“çš„ä½¿ç”¨"><a href="#fileupload-ç±»åº“çš„ä½¿ç”¨" class="headerlink" title="fileupload ç±»åº“çš„ä½¿ç”¨"></a>fileupload ç±»åº“çš„ä½¿ç”¨</h4><p>ä¸Šä¼ æ–‡ä»¶çš„è¡¨å•ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;form action=<span class="hljs-string">&quot;http://192.168.31.74:8080/09_EL_JSTL/uploadServlet&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span><br>      enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>    ç”¨æˆ·åï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span> /&gt; &lt;br&gt;<br>    å¤´åƒï¼š&lt;input type=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;photo&quot;</span> &gt; &lt;br&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot; ä¸Šä¼ &quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure><p>è§£æä¸Šä¼ çš„æ•°æ®çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* ç”¨æ¥å¤„ç†ä¸Šä¼ çš„æ•°æ®</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">//1 å…ˆåˆ¤æ–­ä¸Šä¼ çš„æ•°æ®æ˜¯å¦å¤šæ®µæ•°æ®ï¼ˆåªæœ‰æ˜¯å¤šæ®µçš„æ•°æ®ï¼Œæ‰æ˜¯æ–‡ä»¶ä¸Šä¼ çš„ï¼‰</span><br>    <span class="hljs-keyword">if</span> (ServletFileUpload.isMultipartContent(req)) &#123;<br>        <span class="hljs-comment">// åˆ›å»º FileItemFactory å·¥å‚å®ç°ç±»</span><br>        <span class="hljs-type">FileItemFactory</span> <span class="hljs-variable">fileItemFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();<br>        <span class="hljs-comment">// åˆ›å»ºç”¨äºè§£æä¸Šä¼ æ•°æ®çš„å·¥å…·ç±» ServletFileUpload ç±»</span><br>        <span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">servletFileUpload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(fileItemFactory);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// è§£æä¸Šä¼ çš„æ•°æ®ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªè¡¨å•é¡¹ FileItem</span><br>            List&lt;FileItem&gt; list = servletFileUpload.parseRequest(req);<br>            <span class="hljs-comment">// å¾ªç¯åˆ¤æ–­ï¼Œæ¯ä¸€ä¸ªè¡¨å•é¡¹ï¼Œæ˜¯æ™®é€šç±»å‹ï¼Œè¿˜æ˜¯ä¸Šä¼ çš„æ–‡ä»¶</span><br>            <span class="hljs-keyword">for</span> (FileItem fileItem : list) &#123;<br>                <span class="hljs-keyword">if</span> (fileItem.isFormField()) &#123;<br>                    <span class="hljs-comment">// æ™®é€šè¡¨å•é¡¹</span><br>                    System.out.println(<span class="hljs-string">&quot; è¡¨å•é¡¹çš„ name å±æ€§å€¼ï¼š&quot;</span> + fileItem.getFieldName());<br>                    <span class="hljs-comment">// å‚æ•° UTF-8. è§£å†³ä¹±ç é—®é¢˜</span><br>                    System.out.println(<span class="hljs-string">&quot; è¡¨å•é¡¹çš„ value å±æ€§å€¼ï¼š&quot;</span> + fileItem.getString(<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-comment">// ä¸Šä¼ çš„æ–‡ä»¶</span><br>                    System.out.println(<span class="hljs-string">&quot; è¡¨å•é¡¹çš„ name å±æ€§å€¼ï¼š&quot;</span> + fileItem.getFieldName());<br>                    System.out.println(<span class="hljs-string">&quot; ä¸Šä¼ çš„æ–‡ä»¶åï¼š&quot;</span> + fileItem.getName());<br>                    fileItem.write(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;e:\\&quot;</span> + fileItem.getName()));<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h3><p>ä¸‹è½½çš„å¸¸ç”¨APIè¯´æ˜ï¼š</p><ul><li>response.getOutputStream();</li><li>servletContext.getResourceAsStream();</li><li>servletContext.getMimeType();</li><li>response.setContentType();</li></ul><p>response.setHeader(â€œContent-Dispositionâ€, â€œattachment; fileName&#x3D;1.jpgâ€);</p><p>è¿™ä¸ªå“åº”å¤´å‘Šè¯‰æµè§ˆå™¨ã€‚è¿™æ˜¯éœ€è¦ä¸‹è½½çš„ã€‚è€Œ attachment è¡¨ç¤ºé™„ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸‹è½½çš„ä¸€ä¸ªæ–‡ä»¶ã€‚fileName&#x3D;åé¢ï¼Œè¡¨ç¤ºä¸‹è½½çš„æ–‡ä»¶åã€‚</p><p>å®Œæˆä¸Šé¢çš„ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸‹è½½æ–‡ä»¶æ˜¯æ²¡é—®é¢˜äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦ä¸‹è½½çš„æ–‡ä»¶æ˜¯ä¸­æ–‡åçš„è¯ã€‚ä½ ä¼šå‘ç°ï¼Œä¸‹è½½æ— æ³•æ­£ç¡®æ˜¾ç¤ºå‡ºæ­£ç¡®çš„ä¸­æ–‡åã€‚</p><p>åŸå› æ˜¯åœ¨å“åº”å¤´ä¸­ï¼Œä¸èƒ½åŒ…å«æœ‰ä¸­æ–‡å­—ç¬¦ï¼Œåªèƒ½åŒ…å« ASCII ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Download</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1ã€è·å–è¦ä¸‹è½½çš„æ–‡ä»¶å</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">downloadFileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;duolaAmeng.png&quot;</span>;<br><br>        <span class="hljs-comment">//2ã€è¯»å–è¦ä¸‹è½½çš„æ–‡ä»¶å†…å®¹ï¼ˆé€šè¿‡ServletContextå¯¹è±¡å¯ä»¥è¯»å–ï¼‰</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> getServletContext();<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> servletContext.getResourceAsStream(<span class="hljs-string">&quot;/file/&quot;</span> + downloadFileName);<br><br>        <span class="hljs-comment">//3ã€åœ¨å›ä¼ å‰ï¼Œé€šè¿‡å“åº”å¤´å‘Šè¯‰å®¢æˆ·ç«¯è¿”å›çš„æ•°æ®ç±»å‹</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">mimeType</span> <span class="hljs-operator">=</span> servletContext.getMimeType(<span class="hljs-string">&quot;/file/&quot;</span> + downloadFileName);<br>        <span class="hljs-comment">//  / æ–œæ†è¢«æœåŠ¡å™¨è§£æè¡¨ç¤ºä¸º http://ip:port/å·¥ç¨‹å/   æ˜ å°„åˆ°ä»£ç çš„Webç›®å½•</span><br>        System.out.println(<span class="hljs-string">&quot;ä¸‹è½½çš„æ–‡ä»¶ç±»å‹ï¼š&quot;</span>+mimeType);<br>        resp.setContentType(mimeType);<br><br>        <span class="hljs-comment">///4ã€è¿˜è¦å‘Šè¯‰å®¢æˆ·ç«¯æ”¶åˆ°çš„æ•°æ®æ˜¯ç”¨äºä¸‹è½½ä½¿ç”¨ï¼ˆè¿˜æ˜¯ä½¿ç”¨å“åº”å¤´ï¼‰</span><br>        <span class="hljs-comment">//è§£å†³ ä¸‹è½½æ–‡ä»¶åï¼ˆä¸­æ–‡ï¼‰ ä¹±ç é—®é¢˜</span><br>        <span class="hljs-keyword">if</span>(req.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>).contains(<span class="hljs-string">&quot;Firefox&quot;</span>))&#123;<br><span class="hljs-comment">//            resp.setHeader(&quot;attachment; fileName=&quot; + &quot;=?utf-8?B?&quot;</span><br><span class="hljs-comment">//                + new BASE64Encoder().encode(&quot;ä¸­æ–‡.jpg&quot;.getBytes(&quot;utf-8&quot;)) + &quot;?=&quot;);</span><br>            <span class="hljs-comment">// jdk9 ä»¥åå°±æ²¡æœ‰BASE64Encoderçš„åŒ…äº†ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸äº†</span><br>        &#125; <span class="hljs-keyword">else</span>&#123;<br>            resp.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>,<span class="hljs-string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;ä¸­æ–‡.png&quot;</span>,<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>            <span class="hljs-comment">// Content-Disposition å“åº”å¤´ï¼Œè¡¨ç¤ºæ”¶åˆ°çš„æ•°æ®æ€ä¹ˆå¤„ç†</span><br>            <span class="hljs-comment">// attachment è¡¨ç¤ºé™„ä»¶ï¼Œè¡¨ç¤ºä¸‹è½½ä½¿ç”¨</span><br>            <span class="hljs-comment">// filename è¡¨ç¤ºæŒ‡å®šä¸‹è½½çš„æ–‡ä»¶å</span><br>        &#125;<br><br>        <span class="hljs-comment">//5ã€æŠŠä¸‹è½½çš„æ–‡ä»¶å†…å®¹å›ä¼ ç»™å®¢æˆ·ç«¯</span><br>        <span class="hljs-comment">//è·å–å“åº”çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> resp.getOutputStream();<br>        <span class="hljs-comment">//è¯»å–è¾“å…¥æµä¸­å…¨éƒ¨çš„æ•°æ®ï¼Œå¤åˆ¶ç»™è¾“å‡ºæµï¼Œè¾“å‡ºç»™å®¢æˆ·ç«¯</span><br>        IOUtils.copy(resourceAsStream,outputStream);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š"><a href="#é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š"></a>é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š</h4><p><strong>æ–¹æ¡ˆä¸€ï¼šURLEncoder å†³ è§£å†³ IE å’Œè°·æ­Œæµè§ˆå™¨çš„ å’Œè°·æ­Œæµè§ˆå™¨çš„ é™„ä»¶ä¸­æ–‡åé—®é¢˜ã€‚</strong></p><p>å¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨æ˜¯ IE æµè§ˆå™¨ æˆ–è€… æ˜¯è°·æ­Œæµè§ˆå™¨ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ URLEncoder ç±»å…ˆå¯¹ä¸­æ–‡åè¿›è¡Œ UTF-8 çš„ç¼–ç æ“ä½œã€‚å› ä¸º IE æµè§ˆå™¨ å’Œ è°·æ­Œæµè§ˆå™¨ æ”¶åˆ°å«æœ‰ç¼–ç åçš„å­—ç¬¦ä¸²åä¼šä»¥ UTF-8 å­—ç¬¦é›†è¿›è¡Œè§£ç æ˜¾ç¤ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŠŠä¸­æ–‡åè¿›è¡Œ UTF-8 ç¼–ç æ“ä½œã€‚</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;ä¸­æ–‡.jpg&quot;</span>, <span class="hljs-string">&quot;UTF-8&quot;</span>);<br><span class="hljs-comment">// ç„¶åæŠŠç¼–ç åçš„å­—ç¬¦ä¸²è®¾ç½®åˆ°å“åº”å¤´ä¸­</span><br>response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br></code></pre></td></tr></table></figure><p><strong>æ–¹æ¡ˆäºŒï¼šBASE64 ç¼–è§£ç  ç¼–è§£ç  å†³ è§£å†³ ç«ç‹æµè§ˆå™¨çš„é™„ä»¶ä¸­æ–‡åé—®é¢˜</strong></p><p>å¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨æ˜¯ç«ç‹æµè§ˆå™¨ã€‚ é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¯¹ä¸­æ–‡åè¿›è¡Œ BASE64 çš„ç¼–ç æ“ä½œã€‚</p><p>è¿™æ—¶å€™éœ€è¦æŠŠè¯·æ±‚å¤´ Content-Disposition: attachment; filename&#x3D;ä¸­æ–‡å</p><p>ç¼–ç æˆä¸ºï¼šContent-Disposition: attachment; filename&#x3D;&#x3D;?charset?B?xxxxx?&#x3D;</p><p>&#x3D;?charset?B?xxxxx?&#x3D;   ç°åœ¨æˆ‘ä»¬å¯¹è¿™æ®µå†…å®¹è¿›è¡Œä¸€ä¸‹è¯´æ˜ã€‚<br>&#x3D;?è¡¨ç¤ºç¼–ç å†…å®¹çš„å¼€å§‹<br>charset   è¡¨ç¤ºå­—ç¬¦é›†<br>B  è¡¨ç¤º BASE64ç¼–ç <br>xxxxè¡¨ç¤ºæ–‡ä»¶å BASE64ç¼–ç åçš„å†…å®¹<br>?&#x3D;è¡¨ç¤ºç¼–ç å†…å®¹çš„ç»“æŸ</p><p>BASE64 ç¼–è§£ç æ“ä½œï¼š</p><p>å› ä¸º ç«ç‹ ä½¿ç”¨çš„æ˜¯ BASE64 çš„ç¼–è§£ç  æ–¹å¼è¿˜åŸå“åº”ä¸­çš„æ±‰å­—ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ BASE64Encoder ç±»è¿›è¡Œç¼–ç æ“ä½œ</p><p>import sun.misc.BASE64Decoder; </p><p>import sun.misc.BASE64Encoder; </p><p>jdk9ä»¥åå°±æ²¡æœ‰è¿™å‡ ä¸ªåŒ…äº†ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼è¿›è¡Œ BASE64 ç¼–ç å</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + <span class="hljs-string">&quot;=?utf-8?B?&quot;</span><br>+ <span class="hljs-keyword">new</span> <span class="hljs-title class_">BASE64Encoder</span>().encode(<span class="hljs-string">&quot;ä¸­æ–‡.jpg&quot;</span>.getBytes(<span class="hljs-string">&quot;utf-8&quot;</span>)) + <span class="hljs-string">&quot;?=&quot;</span>;<br><span class="hljs-comment">// è®¾ç½®åˆ°å“åº”å¤´ä¸­</span><br>response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br></code></pre></td></tr></table></figure><p><strong>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³ä¸Šé¢ä¸¤ç§ä¸åŒç¼–è§£ç æ–¹å¼å‘¢ã€‚</strong></p><p>æˆ‘ä»¬åªéœ€è¦é€šè¿‡åˆ¤æ–­è¯·æ±‚å¤´ä¸­ User-Agent è¿™ä¸ªè¯·æ±‚å¤´æºå¸¦è¿‡æ¥çš„æµè§ˆå™¨ä¿¡æ¯å³å¯åˆ¤æ–­å‡ºæ˜¯ä»€ä¹ˆæµè§ˆå™¨ã€‚</p><p>å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">ua</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>);<br><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç«ç‹æµè§ˆå™¨</span><br><span class="hljs-keyword">if</span> (ua.contains(<span class="hljs-string">&quot;Firefox&quot;</span>)) &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼è¿›è¡Œ BASE64 ç¼–ç å</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + <span class="hljs-string">&quot;=?utf-8?B?&quot;</span><br>        + <span class="hljs-keyword">new</span> <span class="hljs-title class_">BASE64Encoder</span>().encode(<span class="hljs-string">&quot;ä¸­æ–‡.jpg&quot;</span>.getBytes(<span class="hljs-string">&quot;utf-8&quot;</span>)) + <span class="hljs-string">&quot;?=&quot;</span>;<br>    <span class="hljs-comment">// è®¾ç½®åˆ°å“åº”å¤´ä¸­</span><br>    response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// æŠŠä¸­æ–‡åè¿›è¡Œ UTF-8 ç¼–ç æ“ä½œã€‚</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;ä¸­æ–‡.jpg&quot;</span>, <span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    <span class="hljs-comment">// ç„¶åæŠŠç¼–ç åçš„å­—ç¬¦ä¸²è®¾ç½®åˆ°å“åº”å¤´ä¸­</span><br>    response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="Cookieç®€ä»‹"><a href="#Cookieç®€ä»‹" class="headerlink" title="Cookieç®€ä»‹"></a>Cookieç®€ä»‹</h3><ul><li>Cookie ç¿»è¯‘è¿‡æ¥å°±æ˜¯é¥¼å¹²çš„æ„æ€</li><li>Cookie æ˜¯æœåŠ¡å™¨é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜é”®å€¼å¯¹çš„ä¸€ç§æŠ€æœ¯</li><li>å®¢æˆ·ç«¯æœ‰äº† Cookie åï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘é€ç»™æœåŠ¡å™¨</li><li><strong>æ¯ä¸ª Cookie çš„å¤§å°ä¸èƒ½è¶…è¿‡ 4kb</strong></li></ul><h3 id="å¦‚ä½•åˆ›å»º-Cookie"><a href="#å¦‚ä½•åˆ›å»º-Cookie" class="headerlink" title="å¦‚ä½•åˆ›å»º Cookie"></a>å¦‚ä½•åˆ›å»º Cookie</h3><p><img src="/2022/10/03/JavaWebNote/image-20221106092646241.png" alt="image-20221106092646241"></p><p>Servlet ç¨‹åºä¸­çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createCookie</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">//1 åˆ›å»º Cookie å¯¹è±¡</span><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;key4&quot;</span>, <span class="hljs-string">&quot;value4&quot;</span>);<br>    <span class="hljs-comment">//2 é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookie</span><br>    resp.addCookie(cookie);<br>    <span class="hljs-comment">//1 åˆ›å»º Cookie å¯¹è±¡</span><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;key5&quot;</span>, <span class="hljs-string">&quot;value5&quot;</span>);<br>    <span class="hljs-comment">//2 é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookie</span><br>    resp.addCookie(cookie1);<br>    <br>    resp.getWriter().write(<span class="hljs-string">&quot;Cookie åˆ›å»ºæˆåŠŸ&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æœåŠ¡å™¨å¦‚ä½•è·å–-Cookie"><a href="#æœåŠ¡å™¨å¦‚ä½•è·å–-Cookie" class="headerlink" title="æœåŠ¡å™¨å¦‚ä½•è·å– Cookie"></a>æœåŠ¡å™¨å¦‚ä½•è·å– Cookie</h3><p>æœåŠ¡å™¨è·å–å®¢æˆ·ç«¯çš„ Cookie åªéœ€è¦ä¸€è¡Œä»£ç : req.getCookies():Cookie[]</p><p><img src="/2022/10/03/JavaWebNote/image-20221106092817265.png" alt="image-20221106092817265"></p><p>Cookie çš„å·¥å…·ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CookieUtils</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* æŸ¥æ‰¾æŒ‡å®šåç§°çš„ Cookie å¯¹è±¡</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> name</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> cookies</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Cookie <span class="hljs-title function_">findCookie</span><span class="hljs-params">(String name , Cookie[] cookies)</span>&#123;<br>        <span class="hljs-keyword">if</span> (name == <span class="hljs-literal">null</span> || cookies == <span class="hljs-literal">null</span> || cookies.length == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (Cookie cookie : cookies) &#123;<br>            <span class="hljs-keyword">if</span> (name.equals(cookie.getName())) &#123;<br>                <span class="hljs-keyword">return</span> cookie;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Servlet ç¨‹åºä¸­çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getCookie</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    Cookie[] cookies = req.getCookies();<br>    <span class="hljs-keyword">for</span> (Cookie cookie : cookies) &#123;<br>        <span class="hljs-comment">// getName æ–¹æ³•è¿”å› Cookie çš„ key ï¼ˆåï¼‰</span><br>        <span class="hljs-comment">// getValue æ–¹æ³•è¿”å› Cookie çš„ value å€¼</span><br>        resp.getWriter().write(<span class="hljs-string">&quot;Cookie[&quot;</span> + cookie.getName() + <span class="hljs-string">&quot;=&quot;</span> + cookie.getValue() + <span class="hljs-string">&quot;] &lt;br/&gt;&quot;</span>);<br>    &#125;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">iWantCookie</span> <span class="hljs-operator">=</span> CookieUtils.findCookie(<span class="hljs-string">&quot;key1&quot;</span>, cookies);<br>    <span class="hljs-comment">// for (Cookie cookie : cookies) &#123;</span><br>    <span class="hljs-comment">// if (&quot;key2&quot;.equals(cookie.getName())) &#123;</span><br>    <span class="hljs-comment">// iWantCookie = cookie;</span><br>    <span class="hljs-comment">// break;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// å¦‚æœä¸ç­‰äº null ï¼Œè¯´æ˜èµ‹è¿‡å€¼ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº†éœ€è¦çš„ Cookie</span><br>    <span class="hljs-keyword">if</span> (iWantCookie != <span class="hljs-literal">null</span>) &#123;<br>        resp.getWriter().write(<span class="hljs-string">&quot; æ‰¾åˆ°äº†éœ€è¦çš„ Cookie&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Cookie-å€¼çš„ä¿®æ”¹"><a href="#Cookie-å€¼çš„ä¿®æ”¹" class="headerlink" title="Cookie å€¼çš„ä¿®æ”¹"></a>Cookie å€¼çš„ä¿®æ”¹</h3><p>æ³¨æ„ï¼šå¯¹äº Version 0 cookieï¼Œå€¼ä¸åº”åŒ…å«ç©ºæ ¼ã€æ–¹æ‹¬å·ã€åœ†æ‹¬å·ã€ç­‰å·ã€é€—å·ã€åŒå¼•å·ã€æ–œæ ã€é—®å·ã€atç¬¦å·ã€å†’å·å’Œåˆ†å·ã€‚æ§åˆ¶åœ¨ä¸åŒæµè§ˆå™¨ä¸Šçš„è¡Œä¸ºä¸ä¸€å®šç›¸åŒã€‚</p><p>æ–¹æ¡ˆä¸€ï¼š</p><ul><li><p>1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¦ä¿®æ”¹çš„åŒåï¼ˆæŒ‡çš„å°±æ˜¯ keyï¼‰çš„ Cookie å¯¹è±¡</p></li><li><p>2ã€åœ¨æ„é€ å™¨ï¼ŒåŒæ—¶èµ‹äºæ–°çš„ Cookie å€¼ã€‚</p></li><li><p>3ã€è°ƒç”¨ response.addCookie( Cookie );</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ–¹æ¡ˆä¸€ï¼š</span><br><span class="hljs-comment">// 1 ã€å…ˆåˆ›å»ºä¸€ä¸ªè¦ä¿®æ”¹çš„åŒåçš„ Cookie å¯¹è±¡</span><br><span class="hljs-comment">// 2 ã€åœ¨æ„é€ å™¨ï¼ŒåŒæ—¶èµ‹äºæ–°çš„ Cookie å€¼ã€‚</span><br><span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;newValue1&quot;</span>);<br><span class="hljs-comment">// 3 ã€è°ƒç”¨ response.addCookie( Cookie ); é€šçŸ¥ å®¢æˆ·ç«¯ ä¿å­˜ä¿®æ”¹</span><br>resp.addCookie(cookie);<br></code></pre></td></tr></table></figure></li></ul><p>æ–¹æ¡ˆäºŒï¼š</p><ul><li><p>1ã€å…ˆæŸ¥æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„ Cookie å¯¹è±¡</p></li><li><p>2ã€è°ƒç”¨ setValue()æ–¹æ³•èµ‹äºæ–°çš„ Cookie å€¼ã€‚</p></li><li><p>3ã€è°ƒç”¨ response.addCookie()é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ–¹æ¡ˆäºŒï¼š</span><br><span class="hljs-comment">// 1 ã€å…ˆæŸ¥æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„ Cookie å¯¹è±¡</span><br><span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> CookieUtils.findCookie(<span class="hljs-string">&quot;key2&quot;</span>, req.getCookies());<br><span class="hljs-keyword">if</span> (cookie != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-comment">// 2 ã€è°ƒç”¨ setValue() æ–¹æ³•èµ‹äºæ–°çš„ Cookie å€¼ã€‚</span><br>    cookie.setValue(<span class="hljs-string">&quot;newValue2&quot;</span>);<br>    <span class="hljs-comment">// 3 ã€è°ƒç”¨ response.addCookie() é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ä¿®æ”¹</span><br>    resp.addCookie(cookie);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="æµè§ˆå™¨æŸ¥çœ‹-Cookie"><a href="#æµè§ˆå™¨æŸ¥çœ‹-Cookie" class="headerlink" title="æµè§ˆå™¨æŸ¥çœ‹ Cookie"></a>æµè§ˆå™¨æŸ¥çœ‹ Cookie</h3><ul><li><p>è°·æ­Œæµè§ˆå™¨å¦‚ä½•æŸ¥çœ‹ Cookieï¼š</p><p><img src="/2022/10/03/JavaWebNote/image-20221106093217145.png" alt="image-20221106093217145"></p></li><li><p>ç«ç‹æµè§ˆå™¨å¦‚ä½•æŸ¥çœ‹ Cookieï¼š</p><p><img src="/2022/10/03/JavaWebNote/image-20221106093227280.png" alt="image-20221106093227280"></p></li></ul><h3 id="Cookie-ç”Ÿå‘½æ§åˆ¶"><a href="#Cookie-ç”Ÿå‘½æ§åˆ¶" class="headerlink" title="Cookie ç”Ÿå‘½æ§åˆ¶"></a>Cookie ç”Ÿå‘½æ§åˆ¶</h3><ul><li><p>Cookie çš„ç”Ÿå‘½æ§åˆ¶æŒ‡çš„æ˜¯å¦‚ä½•ç®¡ç† Cookie ä»€ä¹ˆæ—¶å€™è¢«é”€æ¯ï¼ˆåˆ é™¤ï¼‰</p></li><li><p>setMaxAge()</p><ul><li>æ­£æ•°ï¼Œè¡¨ç¤ºåœ¨æŒ‡å®šçš„ç§’æ•°åè¿‡æœŸ</li><li>è´Ÿæ•°ï¼Œè¡¨ç¤ºæµè§ˆå™¨ä¸€æ—¦å…³é—­ï¼ŒCookie å°±ä¼šè¢«åˆ é™¤ï¼ˆé»˜è®¤å€¼æ˜¯-1ï¼‰</li><li>é›¶ï¼Œè¡¨ç¤ºé©¬ä¸Šåˆ é™¤ Cookie</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* è®¾ç½®å­˜æ´» 1 ä¸ªå°æ—¶çš„ Cooie</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">life3600</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;life3600&quot;</span>, <span class="hljs-string">&quot;life3600&quot;</span>);<br>    cookie.setMaxAge(<span class="hljs-number">60</span> * <span class="hljs-number">60</span>); <span class="hljs-comment">// è®¾ç½® Cookie ä¸€å°æ—¶ä¹‹åè¢«åˆ é™¤ã€‚æ— æ•ˆ</span><br>    resp.addCookie(cookie);<br>    resp.getWriter().write(<span class="hljs-string">&quot; å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå­˜æ´»ä¸€å°æ—¶çš„ Cookie&quot;</span>);<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* é©¬ä¸Šåˆ é™¤ä¸€ä¸ª Cookie</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteNow</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-comment">// å…ˆæ‰¾åˆ°ä½ è¦åˆ é™¤çš„ Cookie å¯¹è±¡</span><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> CookieUtils.findCookie(<span class="hljs-string">&quot;key4&quot;</span>, req.getCookies());<br>    <span class="hljs-keyword">if</span> (cookie != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// è°ƒç”¨ setMaxAge(0);</span><br>        cookie.setMaxAge(<span class="hljs-number">0</span>); <span class="hljs-comment">// è¡¨ç¤ºé©¬ä¸Šåˆ é™¤ï¼Œéƒ½ä¸éœ€è¦ç­‰å¾…æµè§ˆå™¨å…³é—­</span><br>        <span class="hljs-comment">// è°ƒç”¨ response.addCookie(cookie);</span><br>        resp.addCookie(cookie);<br>        resp.getWriter().write(<span class="hljs-string">&quot;key4 çš„ çš„ Cookie å·²ç»è¢«åˆ é™¤&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* é»˜è®¤çš„ä¼šè¯çº§åˆ«çš„ Cookie</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultLife</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;defalutLife&quot;</span>,<span class="hljs-string">&quot;defaultLife&quot;</span>);<br>    cookie.setMaxAge(-<span class="hljs-number">1</span>);<span class="hljs-comment">// è®¾ç½®å­˜æ´»æ—¶é—´</span><br>    resp.addCookie(cookie);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="Cookie-æœ‰æ•ˆè·¯å¾„-Path-çš„è®¾ç½®"><a href="#Cookie-æœ‰æ•ˆè·¯å¾„-Path-çš„è®¾ç½®" class="headerlink" title="Cookie æœ‰æ•ˆè·¯å¾„ Path çš„è®¾ç½®"></a>Cookie æœ‰æ•ˆè·¯å¾„ Path çš„è®¾ç½®</h3><p>Cookie çš„pathå±æ€§å¯ä»¥æœ‰æ•ˆåœ°è¿‡æ»¤å“ªäº› Cookie å¯ä»¥å‘é€ç»™æœåŠ¡å™¨ï¼Œå“ªäº›ä¸å‘</p><p>path å±æ€§æ˜¯é€šè¿‡è¯·æ±‚çš„åœ°å€æ¥è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ï¼Œé»˜è®¤pathæ˜¯å·¥ç¨‹è·¯å¾„</p><ul><li><p>CookieA path&#x3D;&#x2F;å·¥ç¨‹è·¯å¾„</p></li><li><p>CookieB path&#x3D;&#x2F;å·¥ç¨‹è·¯å¾„&#x2F;abc</p></li><li><p>è¯·æ±‚åœ°å€å¦‚ä¸‹ï¼š</p><ul><li><a href="http://ip:port/å·¥ç¨‹è·¯å¾„/a.html">http://ip:port/å·¥ç¨‹è·¯å¾„/a.html</a><ul><li>CookieA å‘é€</li><li>CookieB ä¸å‘é€</li></ul></li><li><a href="http://ip:port/å·¥ç¨‹è·¯å¾„/abc/a.html">http://ip:port/å·¥ç¨‹è·¯å¾„/abc/a.html</a><ul><li>CookieA å‘é€</li><li>CookieB å‘é€</li></ul></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPath</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;path1&quot;</span>, <span class="hljs-string">&quot;path1&quot;</span>);<br>    <span class="hljs-comment">// getContextPath() ===&gt;&gt;&gt;&gt; å¾—åˆ°å·¥ç¨‹è·¯å¾„</span><br>    cookie.setPath( req.getContextPath() + <span class="hljs-string">&quot;/abc&quot;</span> ); <span class="hljs-comment">// ===&gt;&gt;&gt;&gt; / å·¥ç¨‹è·¯å¾„ /abc</span><br>    resp.addCookie(cookie);<br>    resp.getWriter().write(<span class="hljs-string">&quot; åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰ Path è·¯å¾„çš„ Cookie&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Cookie-ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•"><a href="#Cookie-ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•" class="headerlink" title="Cookie ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•"></a>Cookie ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•</h3><p><img src="/2022/10/03/JavaWebNote/image-20221106093748695.png" alt="image-20221106093748695"></p><ul><li><p>login.jsp é¡µé¢</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;form action=<span class="hljs-string">&quot;http://localhost:8080/13_cookie_session/loginServlet&quot;</span> method=<span class="hljs-string">&quot;get&quot;</span>&gt;<br>    ç”¨æˆ·åï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span> value=<span class="hljs-string">&quot;$&#123;cookie.username.value&#125;&quot;</span>&gt; &lt;br&gt;<br>    å¯†ç ï¼š&lt;input type=<span class="hljs-string">&quot;password&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>&gt; &lt;br&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot; ç™»å½•&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure></li><li><p>LoginServlet ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;wzg168&quot;</span>.equals(username) &amp;&amp; <span class="hljs-string">&quot;123456&quot;</span>.equals(password)) &#123;<br>        <span class="hljs-comment">// ç™»å½• æˆåŠŸ</span><br>        <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;username&quot;</span>, username);<br>        cookie.setMaxAge(<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> * <span class="hljs-number">7</span>);<span class="hljs-comment">// å½“å‰ Cookie ä¸€å‘¨å†…æœ‰æ•ˆ</span><br>        resp.addCookie(cookie);<br>        System.out.println(<span class="hljs-string">&quot;å½• ç™»å½• æˆåŠŸ&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// ç™»å½• å¤±è´¥</span><br>        System.out.println(<span class="hljs-string">&quot;å½• ç™»å½• å¤±è´¥&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="Session-ä¼šè¯"><a href="#Session-ä¼šè¯" class="headerlink" title="Session ä¼šè¯"></a>Session ä¼šè¯</h2><h3 id="ä»€ä¹ˆæ˜¯-Session-ä¼šè¯"><a href="#ä»€ä¹ˆæ˜¯-Session-ä¼šè¯" class="headerlink" title="ä»€ä¹ˆæ˜¯ Session ä¼šè¯"></a>ä»€ä¹ˆæ˜¯ Session ä¼šè¯</h3><ul><li>1ã€Session å°±ä¸€ä¸ªæ¥å£ï¼ˆHttpSessionæ¥å£ï¼‰ã€‚</li><li>2ã€Session å°±æ˜¯ä¼šè¯ã€‚å®ƒæ˜¯ç”¨æ¥ç»´æŠ¤ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å…³è”çš„ä¸€ç§æŠ€æœ¯ã€‚</li><li>3ã€æ¯ä¸ªå®¢æˆ·ç«¯éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ª Session ä¼šè¯ã€‚</li><li>4ã€Session ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨æ¥ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯ã€‚</li></ul><h3 id="å¦‚ä½•åˆ›å»º-Session-å’Œè·å–-id-å·-æ˜¯å¦ä¸ºæ–°"><a href="#å¦‚ä½•åˆ›å»º-Session-å’Œè·å–-id-å·-æ˜¯å¦ä¸ºæ–°" class="headerlink" title="å¦‚ä½•åˆ›å»º Session å’Œè·å–(id å·, æ˜¯å¦ä¸ºæ–°)"></a>å¦‚ä½•åˆ›å»º Session å’Œè·å–(id å·, æ˜¯å¦ä¸ºæ–°)</h3><ul><li><p>å¦‚ä½•åˆ›å»ºå’Œè·å– Sessionï¼Ÿå®ƒä»¬çš„ API æ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>request.getSession()</p><ul><li>ç¬¬ä¸€æ¬¡è°ƒç”¨æ˜¯ï¼š åˆ›å»º Session ä¼šè¯</li><li>ä¹‹åè°ƒç”¨éƒ½æ˜¯ï¼š è·å–å‰é¢åˆ›å»ºå¥½çš„ Session ä¼šè¯å¯¹è±¡ã€‚</li><li>isNew();   åˆ¤æ–­åˆ°åº•æ˜¯ä¸æ˜¯åˆšåˆ›å»ºå‡ºæ¥çš„ï¼ˆæ–°çš„ï¼‰<ul><li>true è¡¨ç¤ºåˆšåˆ›å»º</li><li>false è¡¨ç¤ºè·å–ä¹‹å‰åˆ›å»º</li></ul></li><li>æ¯ä¸ªä¼šè¯éƒ½æœ‰ä¸€ä¸ªèº«ä»½è¯å·ã€‚ä¹Ÿå°±æ˜¯ ID å€¼ã€‚è€Œä¸”è¿™ä¸ª ID æ˜¯å”¯ä¸€çš„ã€‚</li><li>getId() å¾—åˆ° Session çš„ä¼šè¯ id å€¼ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionServlet</span> <span class="hljs-keyword">extends</span>  <span class="hljs-title class_">BaseServlet</span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrGetSession</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå’Œè·å–Sessionä¼šè¯å¯¹è±¡</span><br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>        <span class="hljs-comment">//åˆ¤æ–­å½“å‰Sessionä¼šè¯ï¼Œæ˜¯å¦æ˜¯æ–°åˆ›å»ºå‡ºæ¥çš„</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">isNew</span> <span class="hljs-operator">=</span> session.isNew();<br>        <span class="hljs-comment">//è·å–Sessionä¼šè¯çš„å”¯ä¸€æ ‡è¯†ï¼ˆidï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> session.getId();<br><br>        resp.getWriter().write(<span class="hljs-string">&quot;å¾—åˆ°çš„Sessionçš„idå€¼ä¸ºï¼š&quot;</span>+id+<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span>);<br>        resp.getWriter().write(<span class="hljs-string">&quot;è¿™ä¸ªSessionæ˜¯å¦æ˜¯æ–°åˆ›å»ºçš„ï¼š&quot;</span>+isNew+<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="Session-åŸŸæ•°æ®çš„å­˜å–"><a href="#Session-åŸŸæ•°æ®çš„å­˜å–" class="headerlink" title="Session åŸŸæ•°æ®çš„å­˜å–"></a>Session åŸŸæ•°æ®çš„å­˜å–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* å¾€ Session ä¸­ä¿å­˜æ•°æ®</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAttribute</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    req.getSession().setAttribute(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    resp.getWriter().write(<span class="hljs-string">&quot; å·²ç»å¾€ Session ä¸­ä¿å­˜äº†æ•°æ®&quot;</span>);<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* è·å– Session åŸŸä¸­çš„æ•°æ®</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getAttribute</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">attribute</span> <span class="hljs-operator">=</span> req.getSession().getAttribute(<span class="hljs-string">&quot;key1&quot;</span>);<br>    resp.getWriter().write(<span class="hljs-string">&quot;ä» Session ä¸­è·å–å‡º key1 çš„æ•°æ®æ˜¯ï¼š&quot;</span> + attribute);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Session-ç”Ÿå‘½å‘¨æœŸæ§åˆ¶"><a href="#Session-ç”Ÿå‘½å‘¨æœŸæ§åˆ¶" class="headerlink" title="Session ç”Ÿå‘½å‘¨æœŸæ§åˆ¶"></a>Session ç”Ÿå‘½å‘¨æœŸæ§åˆ¶</h3><ul><li><p>public void setMaxInactiveInterval(int interval) </p><p>â€‹è®¾ç½® Session çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œè¶…è¿‡æŒ‡å®šçš„æ—¶é•¿ï¼ŒSessionå°±ä¼šè¢«é”€æ¯ã€‚</p><p>â€‹å€¼ä¸ºæ­£æ•°çš„æ—¶å€™ï¼Œè®¾å®š Session çš„è¶…æ—¶æ—¶é•¿</p><p>â€‹å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ï¼ˆæå°‘ä½¿ç”¨ï¼Œä¼šä½¿æœåŠ¡å™¨ä¸æ–­å †ç§¯æ•°æ®ï¼‰</p></li><li><p>public int getMaxInactiveInterval()   </p><p>â€‹è·å– Session çš„è¶…æ—¶æ—¶é—´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultLife</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">maxInactiveInterval</span> <span class="hljs-operator">=</span> req.getSession().getMaxInactiveInterval();<br>    resp.getWriter().write(<span class="hljs-string">&quot;Sessionçš„é»˜è®¤è¶…æ—¶æ—¶é•¿ä¸ºï¼š&quot;</span>+maxInactiveInterval+<span class="hljs-string">&quot;ç§’&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>public void invalidate()   </p><p>â€‹è®©å½“å‰ Session ä¼šè¯é©¬ä¸Šè¶…æ—¶æ— æ•ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteNow</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">// å…ˆè·å– Session å¯¹è±¡</span><br>    <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>    <span class="hljs-comment">// è®© Session ä¼šè¯é©¬ä¸Šè¶…æ—¶</span><br>    session.invalidate();<br>    resp.getWriter().write(<span class="hljs-string">&quot;Session å·²ç»è®¾ç½®ä¸ºè¶…æ—¶ï¼ˆæ— æ•ˆï¼‰&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Session é»˜è®¤çš„è¶…æ—¶æ—¶é—´é•¿ä¸º 30 åˆ†é’Ÿã€‚</p><ul><li><p>å› ä¸ºåœ¨TomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶web.xmlä¸­é»˜è®¤æœ‰ä»¥ä¸‹çš„é…ç½®ï¼Œå®ƒå°±è¡¨ç¤ºé…ç½®äº†å½“å‰TomcatæœåŠ¡å™¨ä¸‹æ‰€æœ‰çš„Sessionè¶…æ—¶é…ç½®é»˜è®¤æ—¶é•¿ä¸ºï¼š30 åˆ†é’Ÿã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å¦‚æœè¯´ï¼Œä½ å¸Œæœ›ä½ çš„ web å·¥ç¨‹ï¼Œé»˜è®¤çš„ Session çš„è¶…æ—¶æ—¶é•¿ä¸ºå…¶ä»–æ—¶é•¿ï¼Œä½ å¯ä»¥åœ¨ä½ è‡ªå·±çš„ web.xml é…ç½®æ–‡ä»¶ä¸­åšä»¥ä¸Šç›¸åŒçš„é…ç½®ï¼Œå°±å¯ä»¥ä¿®æ”¹ä½ çš„ web å·¥ç¨‹æ‰€æœ‰ Seession çš„é»˜è®¤è¶…æ—¶æ—¶é•¿ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è¡¨ç¤ºå½“å‰ web å·¥ç¨‹ã€‚åˆ›å»ºå‡ºæ¥ çš„æ‰€æœ‰ Session é»˜è®¤æ˜¯ 20 åˆ†é’Ÿ è¶…æ—¶æ—¶é•¿ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br>&lt;/session-config<br></code></pre></td></tr></table></figure></li></ul></li><li><p>å¦‚æœä½ æƒ³åªä¿®æ”¹ä¸ªåˆ« Session çš„è¶…æ—¶æ—¶é•¿ã€‚å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ APIã€‚setMaxInactiveInterval(int interval)æ¥è¿›è¡Œå•ç‹¬çš„è®¾ç½®ã€‚</p><ul><li><p>session.setMaxInactiveInterval(int interval);å•ç‹¬è®¾ç½®è¶…æ—¶æ—¶é•¿ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">life3</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">// å…ˆè·å– Session å¯¹è±¡</span><br>    <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>    <span class="hljs-comment">// è®¾ç½®å½“å‰ Session3 ç§’åè¶…æ—¶</span><br>    session.setMaxInactiveInterval(<span class="hljs-number">3</span>);<br>    resp.getWriter().write(<span class="hljs-string">&quot; å½“å‰ Session å·²ç»è®¾ç½®ä¸º 3 ç§’åè¶…æ—¶&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Session è¶…æ—¶çš„æ¦‚å¿µä»‹ç»ï¼š</p><p><img src="/2022/10/03/JavaWebNote/image-20221106094417773.png" alt="image-20221106094417773"></p></li></ul></li></ul><h3 id="æµè§ˆå™¨å’Œ-Session-ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•"><a href="#æµè§ˆå™¨å’Œ-Session-ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•" class="headerlink" title="æµè§ˆå™¨å’Œ Session ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•"></a>æµè§ˆå™¨å’Œ Session ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•</h3><p>Session æŠ€æœ¯ï¼Œåº•å±‚å…¶å®æ˜¯åŸºäº Cookie æŠ€æœ¯æ¥å®ç°çš„ã€‚</p><p><img src="/2022/10/03/JavaWebNote/image-20221106094631669.png" alt="image-20221106094631669"></p><h2 id="Filter-è¿‡æ»¤å™¨"><a href="#Filter-è¿‡æ»¤å™¨" class="headerlink" title="Filter è¿‡æ»¤å™¨"></a>Filter è¿‡æ»¤å™¨</h2><h3 id="Filter-è¿‡æ»¤å™¨ä»‹ç»"><a href="#Filter-è¿‡æ»¤å™¨ä»‹ç»" class="headerlink" title="Filter è¿‡æ»¤å™¨ä»‹ç»"></a>Filter è¿‡æ»¤å™¨ä»‹ç»</h3><ul><li>Filter è¿‡æ»¤å™¨æ˜¯ javaWeb çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Listener ç›‘å¬å™¨ã€filter è¿‡æ»¤å™¨</li><li>Filter è¿‡æ»¤å™¨æ˜¯ JavaEE çš„è§„èŒƒï¼Œä¹Ÿå°±æ˜¯æ¥å£</li><li>Filter è¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯ï¼š<strong>æ‹¦æˆªè¯·æ±‚</strong>ï¼Œè¿‡æ»¤å“åº”</li><li>æ‹¦æˆªè¯·æ±‚çš„å¸¸è§çš„åº”ç”¨åœºæ™¯æœ‰ï¼š<ul><li>æƒé™æ£€æŸ¥</li><li>æ—¥è®°æ“ä½œ</li><li>äº‹åŠ¡ç®¡ç†</li><li>â€¦ â€¦ ç­‰ç­‰</li></ul></li></ul><h3 id="Filter-çš„åˆä½“éªŒ"><a href="#Filter-çš„åˆä½“éªŒ" class="headerlink" title="Filter çš„åˆä½“éªŒ"></a>Filter çš„åˆä½“éªŒ</h3><p>è¦æ±‚ï¼šåœ¨ä½ çš„ web å·¥ç¨‹ä¸‹ï¼Œæœ‰ä¸€ä¸ª admin ç›®å½•ã€‚è¿™ä¸ª admin ç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æºï¼ˆhtml é¡µé¢ã€jpg å›¾ç‰‡ã€jsp æ–‡ä»¶ã€ç­‰ç­‰ï¼‰éƒ½å¿…é¡»æ˜¯ç”¨æˆ·ç™»å½•ä¹‹åæ‰å…è®¸è®¿é—®ã€‚</p><p>æ€è€ƒï¼šæ ¹æ®ä¹‹å‰æˆ‘ä»¬å­¦è¿‡å†…å®¹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç”¨æˆ·ç™»å½•ä¹‹åéƒ½ä¼šæŠŠç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ä¿å­˜åˆ° Session åŸŸä¸­ã€‚æ‰€ä»¥è¦æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œå¯ä»¥åˆ¤æ–­ Session ä¸­æ˜¯å¦åŒ…å«æœ‰ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯å³å¯ï¼ï¼ï¼</p><p><strong>Filter çš„å·¥ä½œæµç¨‹å›¾ï¼š</strong></p><p><img src="/2022/10/03/JavaWebNote/image-20221106165954177.png" alt="image-20221106165954177"></p><p><strong>Filter è¿‡æ»¤å™¨çš„ä½¿ç”¨æ­¥éª¤ï¼š</strong></p><ul><li>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç° Filter æ¥å£</li><li>2ã€å®ç°è¿‡æ»¤æ–¹æ³• doFilter()</li><li>3ã€åˆ° web.xml ä¸­å»é…ç½® Filter çš„æ‹¦æˆªè·¯å¾„</li></ul><p><strong>å®Œæ•´çš„ç”¨æˆ·ç™»å½•</strong></p><ul><li><p>Filter çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* doFilter æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºæ‹¦æˆªè¯·æ±‚ã€‚å¯ä»¥åšæƒé™æ£€æŸ¥</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">httpServletRequest</span> <span class="hljs-operator">=</span> (HttpServletRequest) servletRequest;<br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> httpServletRequest.getSession();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> session.getAttribute(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-comment">// å¦‚æœç­‰äº null ï¼Œè¯´æ˜è¿˜æ²¡æœ‰ç™»å½•</span><br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) &#123;<br>servletRequest.getRequestDispatcher(<span class="hljs-string">&quot;/login.jsp&quot;</span>)<br>    .forward(servletRequest,servletResponse);<br>            <span class="hljs-keyword">return</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// è®©ç¨‹åºç»§ç»­å¾€ä¸‹è®¿é—®ç”¨æˆ·çš„ç›®æ ‡èµ„æº</span><br>            filterChain.doFilter(servletRequest,servletResponse);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>web.xml ä¸­çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- filter æ ‡ç­¾ç”¨äºé…ç½®ä¸€ä¸ª Filter è¿‡æ»¤å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç»™ filter èµ·ä¸€ä¸ªåˆ«å --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é…ç½® filter çš„å…¨ç±»å --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.atguigu.filter.AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- filter-mapping é…ç½® Filter è¿‡æ»¤å™¨çš„æ‹¦æˆªè·¯å¾„ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--filter-name è¡¨ç¤ºå½“å‰çš„æ‹¦æˆªè·¯å¾„ç»™å“ªä¸ª filter ä½¿ç”¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        url-pattern é…ç½®æ‹¦æˆªè·¯å¾„</span><br><span class="hljs-comment">        / è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸ºï¼š http://ip:port/ å·¥ç¨‹è·¯å¾„ / æ˜ å°„åˆ° IDEA çš„ web ç›®å½•</span><br><span class="hljs-comment">        /admin/* è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸ºï¼š http://ip:port/ å·¥ç¨‹è·¯å¾„ /admin/*</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/admin/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>login.jsp é¡µé¢ &#x3D;&#x3D; ç™»å½•è¡¨å•</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">è¿™æ˜¯ç™»å½•é¡µé¢ã€‚login.jsp é¡µé¢ &lt;br&gt;<br>&lt;form action=<span class="hljs-string">&quot;http://localhost:8080/15_filter/loginServlet&quot;</span> method=<span class="hljs-string">&quot;get&quot;</span>&gt;<br>    ç”¨æˆ·åï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span>/&gt; &lt;br&gt;<br>    å¯† ç ï¼š&lt;input type=<span class="hljs-string">&quot;password&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>/&gt; &lt;br&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> /&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure></li><li><p>LoginServlet ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        resp.setContentType(<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;wzg168&quot;</span>.equals(username) &amp;&amp; <span class="hljs-string">&quot;123456&quot;</span>.equals(password)) &#123;<br>            req.getSession().setAttribute(<span class="hljs-string">&quot;user&quot;</span>,username);<br>            resp.getWriter().write(<span class="hljs-string">&quot;å½• ç™»å½• æˆåŠŸï¼ï¼ï¼&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/login.jsp&quot;</span>).forward(req,resp);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="Filter-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Filter-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Filter çš„ç”Ÿå‘½å‘¨æœŸ"></a>Filter çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>Filter çš„ç”Ÿå‘½å‘¨æœŸåŒ…å«å‡ ä¸ªæ–¹æ³•</p><ul><li><p>1ã€æ„é€ å™¨æ–¹æ³•</p></li><li><p>2ã€init åˆå§‹åŒ–æ–¹æ³•</p><p>â€‹ç¬¬1ã€2æ­¥ï¼Œåœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œï¼ˆFilter å·²ç»åˆ›å»ºï¼‰</p></li><li><p>3ã€doFilter è¿‡æ»¤æ–¹æ³•</p><p>â€‹ç¬¬3æ­¥ï¼Œæ¯æ¬¡æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œå°±ä¼šæ‰§è¡Œ</p></li><li><p>4ã€destory é”€æ¯</p><p>â€‹ç¬¬ 4 æ­¥ï¼Œåœæ­¢webå·¥ç¨‹çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œï¼ˆåœæ­¢ web å·¥ç¨‹ï¼Œä¹Ÿä¼šé”€æ¯ Filter è¿‡æ»¤å™¨ï¼‰</p></li></ul><h3 id="FilterConfig-ç±»"><a href="#FilterConfig-ç±»" class="headerlink" title="FilterConfig ç±»"></a>FilterConfig ç±»</h3><ul><li><p>FilterConfig ç±»è§åçŸ¥ä¹‰ï¼Œå®ƒæ˜¯ Filter è¿‡æ»¤å™¨çš„é…ç½®æ–‡ä»¶ç±»ã€‚</p></li><li><p>Tomcat æ¯æ¬¡åˆ›å»º Filter çš„æ—¶å€™ï¼Œä¹Ÿä¼šåŒæ—¶åˆ›å»ºä¸€ä¸ª FilterConfig ç±»ï¼Œè¿™é‡ŒåŒ…å«äº† Filter é…ç½®æ–‡ä»¶çš„é…ç½®ä¿¡æ¯ã€‚</p></li><li><p>FilterConfig ç±»çš„ä½œç”¨æ˜¯  è·å– filter è¿‡æ»¤å™¨çš„é…ç½®å†…å®¹</p><ul><li>1ã€è·å– Filter çš„åç§° filter-name çš„å†…å®¹</li><li>2ã€è·å–åœ¨ Filter ä¸­é…ç½®çš„ <strong>init-param åˆå§‹åŒ–å‚æ•°</strong></li><li>3ã€è·å– ServletContext å¯¹è±¡</li></ul></li><li><p>java ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>    System.out.println(<span class="hljs-string">&quot;2.Filter çš„ çš„ init(FilterConfig filterConfig) åˆå§‹åŒ–&quot;</span>);<br>    <br>    <span class="hljs-comment">// 1 ã€è·å– Filter çš„åç§° filter-name çš„å†…å®¹</span><br>    System.out.println(<span class="hljs-string">&quot;filter-name çš„å€¼æ˜¯ï¼š&quot;</span> + filterConfig.getFilterName());<br>    <br>    <span class="hljs-comment">// 2 ã€è·å–åœ¨ web.xml ä¸­é…ç½®çš„ init-param åˆå§‹åŒ–å‚æ•°</span><br>    System.out.println(<span class="hljs-string">&quot; åˆå§‹åŒ–å‚æ•° username çš„å€¼æ˜¯ ï¼š&quot;</span> +   <br>                       filterConfig.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>    System.out.println(<span class="hljs-string">&quot; åˆå§‹åŒ–å‚æ•° url çš„å€¼æ˜¯ï¼š&quot;</span> + <br>                       filterConfig.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>));<br>    <br>    <span class="hljs-comment">// 3 ã€è·å– ServletContext å¯¹è±¡</span><br>    System.out.println(filterConfig.getServletContext());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>web.xml é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--filter æ ‡ç­¾ç”¨äºé…ç½®ä¸€ä¸ª Filter è¿‡æ»¤å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç»™ filter èµ·ä¸€ä¸ªåˆ«å --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é…ç½® filter çš„å…¨ç±»å --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.atguigu.filter.AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost3306/test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="FilterChain-è¿‡æ»¤å™¨é“¾"><a href="#FilterChain-è¿‡æ»¤å™¨é“¾" class="headerlink" title="FilterChain è¿‡æ»¤å™¨é“¾"></a>FilterChain è¿‡æ»¤å™¨é“¾</h3><p><img src="/2022/10/03/JavaWebNote/image-20221106192429369.png" alt="image-20221106192429369"></p><ul><li><p>Filter1 ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>    System.out.println(<span class="hljs-string">&quot;Filter1 å‰ç½®ä»£ç &quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;Filter1 çº¿ç¨‹ï¼š&quot;</span>+Thread.currentThread().getName());<br>    servletRequest.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;value1&quot;</span>);<br>    filterChain.doFilter(servletRequest,servletResponse);<br>    System.out.println(<span class="hljs-string">&quot;Filter1 åç½®ä»£ç &quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Filter2 ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>    System.out.println(<span class="hljs-string">&quot;Filter2 å‰ç½®ä»£ç &quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;Filter2 çº¿ç¨‹ï¼š&quot;</span>+Thread.currentThread().getName());<br>    System.out.println(<span class="hljs-string">&quot;Filter2 å– Filter1 ä¸­ä¿å­˜çš„ key1 çš„å€¼ä¸ºï¼š&quot;</span>+servletRequest.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>    filterChain.doFilter(servletRequest,servletResponse);<br>    System.out.println(<span class="hljs-string">&quot;Filter2 åç½®ä»£ç &quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>target.jsp é¡µé¢ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        System.out.println(<span class="hljs-string">&quot;target&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;target çº¿ç¨‹ï¼š&quot;</span>+Thread.currentThread().getName());<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li><li><p>web.xml æ–‡ä»¶é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter1<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.stuyd.filter.Filter1<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter1<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/target.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter2<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.stuyd.filter.Filter2<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter2<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/target.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>è®¿é—® target.jsp é¡µé¢åçš„è¾“å‡ºä¸ºï¼š</p><p>Filter1 å‰ç½®ä»£ç <br>Filter1 çº¿ç¨‹ï¼šhttp-nio-8080-exec-23<br>Filter2 å‰ç½®ä»£ç <br>Filter2 çº¿ç¨‹ï¼šhttp-nio-8080-exec-23<br>Filter2 å– Filter1 ä¸­ä¿å­˜çš„ key1 çš„å€¼ä¸ºï¼švalue1<br>target<br>target çº¿ç¨‹ï¼šhttp-nio-8080-exec-23<br>Filter2 åç½®ä»£ç <br>Filter1 åç½®ä»£ç </p></li></ul><h3 id="Filter-çš„æ‹¦æˆªè·¯å¾„"><a href="#Filter-çš„æ‹¦æˆªè·¯å¾„" class="headerlink" title="Filter çš„æ‹¦æˆªè·¯å¾„"></a>Filter çš„æ‹¦æˆªè·¯å¾„</h3><p><strong>è¯´æ˜ï¼šFilter è¿‡æ»¤å™¨å®ƒåªå…³å¿ƒè¯·æ±‚çš„åœ°å€æ˜¯å¦åŒ¹é…ï¼Œä¸å…³å¿ƒè¯·æ±‚çš„èµ„æºæ˜¯å¦å­˜åœ¨ï¼ï¼ï¼</strong></p><h4 id="â€“ç²¾ç¡®åŒ¹é…"><a href="#â€“ç²¾ç¡®åŒ¹é…" class="headerlink" title="â€“ç²¾ç¡®åŒ¹é…"></a>â€“ç²¾ç¡®åŒ¹é…</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/target.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä¸ºï¼šhttp://ip:port/å·¥ç¨‹è·¯å¾„/target.jsp --&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â€“ç›®å½•åŒ¹é…"><a href="#â€“ç›®å½•åŒ¹é…" class="headerlink" title="â€“ç›®å½•åŒ¹é…"></a>â€“ç›®å½•åŒ¹é…</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/admin/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä¸ºï¼šhttp://ip:port/å·¥ç¨‹è·¯å¾„/admin/* --&gt;</span><br></code></pre></td></tr></table></figure><h4 id="â€“åç¼€ååŒ¹é…"><a href="#â€“åç¼€ååŒ¹é…" class="headerlink" title="â€“åç¼€ååŒ¹é…"></a>â€“åç¼€ååŒ¹é…</h4><p>æ³¨æ„ï¼šåç¼€ååŒ¹é…ï¼Œä¸å…³å¿ƒåç¼€åæ˜¯å¦æœ‰æ„ä¹‰ï¼Œåªå…³å¿ƒèƒ½å¦åŒ¹é…åˆ°</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.html<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä»¥.html ç»“å°¾æ‰ä¼šæ‹¦æˆªåˆ° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä»¥.do ç»“å°¾æ‰ä¼šæ‹¦æˆªåˆ° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.action<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä»¥.action ç»“å°¾æ‰ä¼šæ‹¦æˆªåˆ° --&gt;</span><br></code></pre></td></tr></table></figure><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><h3 id="JSON-ä»‹ç»"><a href="#JSON-ä»‹ç»" class="headerlink" title="JSON ä»‹ç»"></a>JSON ä»‹ç»</h3><p>JSON (JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚åŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚JSONé‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œè€Œä¸”å¾ˆå¤šè¯­è¨€éƒ½æä¾›äº†å¯¹ json çš„æ”¯æŒï¼ˆåŒ…æ‹¬ C, C++, C#, Java, JavaScript, Perl, Pythonç­‰ï¼‰ã€‚ è¿™æ ·å°±ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p><ul><li>JSON æ˜¯ä¸€ç§<strong>è½»é‡çº§</strong>çš„<strong>æ•°æ®äº¤æ¢æ ¼å¼</strong>ã€‚</li><li><strong>è½»é‡çº§</strong>æŒ‡çš„æ˜¯è·Ÿ xml åšæ¯”è¾ƒã€‚</li><li><strong>æ•°æ®äº¤æ¢</strong>æŒ‡çš„æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¸šåŠ¡æ•°æ®çš„ä¼ é€’æ ¼å¼ã€‚</li></ul><h3 id="JSON-åœ¨-JavaScript-ä¸­çš„ä½¿ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰"><a href="#JSON-åœ¨-JavaScript-ä¸­çš„ä½¿ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰" class="headerlink" title="JSON åœ¨ JavaScript ä¸­çš„ä½¿ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰"></a>JSON åœ¨ JavaScript ä¸­çš„ä½¿ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰</h3><h4 id="json-çš„å®šä¹‰"><a href="#json-çš„å®šä¹‰" class="headerlink" title="json çš„å®šä¹‰"></a>json çš„å®šä¹‰</h4><p>json æ˜¯ç”±é”®å€¼å¯¹ç»„æˆï¼Œå¹¶ä¸”ç”±<strong>èŠ±æ‹¬å·</strong>åŒ…å›´ã€‚æ¯ä¸ªé”®ç”±<strong>å¼•å·</strong>å¼•èµ·æ¥ï¼Œé”®å’Œå€¼ä¹‹é—´ä½¿ç”¨<strong>å†’å·</strong>è¿›è¡Œåˆ†éš”ï¼Œå¤šç»„é”®å€¼å¯¹ä¹‹é—´è¿›è¡Œ<strong>é€—å·</strong>è¿›è¡Œåˆ†éš”ã€‚</p><p>json å®šä¹‰ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// jsonçš„å®šä¹‰</span><br>var json = <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;key1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">12</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//æ•´å‹</span><br>    <span class="hljs-attr">&quot;key2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;abc&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//å­—ç¬¦ä¸²</span><br>    <span class="hljs-attr">&quot;key3&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//å¸ƒå°”å€¼</span><br>    <span class="hljs-attr">&quot;key4&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">11</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;arr&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//æ•°ç»„</span><br>    <span class="hljs-attr">&quot;key5&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span>  <span class="hljs-comment">// JSONå¯¹è±¡</span><br>        <span class="hljs-attr">&quot;key5_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">551</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key5_2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;key5_2_value&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;key6&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span>  <span class="hljs-comment">// JSONæ•°ç»„</span><br>        <span class="hljs-attr">&quot;key6_1_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">6611</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key6_1_2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;key6_1_2_value&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;key6_2_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">6621</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key6_2_2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;key6_2_2_value&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span>;<br></code></pre></td></tr></table></figure><h4 id="json-çš„è®¿é—®"><a href="#json-çš„è®¿é—®" class="headerlink" title="json çš„è®¿é—®"></a>json çš„è®¿é—®</h4><ul><li><p>json æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>json ä¸­çš„ key æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ˜¯å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚</p></li><li><p>json ä¸­çš„ key è®¿é—®å°±è·Ÿè®¿é—®å¯¹è±¡çš„å±æ€§ä¸€æ ·ï¼š json å¯¹è±¡.key</p></li><li><p>json ä¸­çš„ key è®¿é—® è¿˜å¯ä»¥é€šè¿‡ jsonå¯¹è±¡[â€œkeyâ€] æ¥è®¿é—®</p></li><li><p>json è®¿é—®ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json">alert(typeof(jsonObj)); <span class="hljs-comment">// object json å°±æ˜¯ä¸€ä¸ªå¯¹è±¡</span><br>alert(jsonObj.key1); <span class="hljs-comment">//12</span><br>alert(jsonObj.key2); <span class="hljs-comment">// abc</span><br>alert(jsonObj.key3); <span class="hljs-comment">// true</span><br>alert(jsonObj.key4);<span class="hljs-comment">// å¾—åˆ°æ•°ç»„ [11,&quot;arr&quot;,false]</span><br><br><span class="hljs-comment">// json ä¸­ æ•°ç»„å€¼çš„éå†</span><br>for(var i = <span class="hljs-number">0</span>; i &lt; jsonObj.key4.length; i++) <span class="hljs-punctuation">&#123;</span><br>    alert(jsonObj.key4<span class="hljs-punctuation">[</span>i<span class="hljs-punctuation">]</span>);<br><span class="hljs-punctuation">&#125;</span><br>alert(jsonObj.key5.key5_1);<span class="hljs-comment">//551</span><br>alert(jsonObj.key5.key5_2);<span class="hljs-comment">//key5_2_value</span><br><br>alert( jsonObj.key6 );<br><span class="hljs-comment">// å¾—åˆ° json æ•°ç»„ï¼Œå–å‡ºæ¥æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ json å¯¹è±¡</span><br>var jsonItem = jsonObj.key6<span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span>;<br><span class="hljs-comment">// alert( jsonItem.key6_1_1 ); //6611</span><br>alert( jsonItem.key6_1_2 ); <span class="hljs-comment">//key6_1_2_value</span><br><br>alert(json<span class="hljs-punctuation">[</span><span class="hljs-string">&quot;key6&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;key6_2_2&quot;</span><span class="hljs-punctuation">]</span>); <span class="hljs-comment">//key6_2_2_value</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="json-çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•"><a href="#json-çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•" class="headerlink" title="json çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•"></a>json çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•</h4><ul><li><p>json çš„å­˜åœ¨æœ‰ä¸¤ç§å½¢å¼ã€‚</p><ul><li>1ï¼‰ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨ï¼Œæˆ‘ä»¬å«å®ƒ json å¯¹è±¡ã€‚</li><li>2ï¼‰ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜åœ¨ï¼Œæˆ‘ä»¬å«å®ƒ json å­—ç¬¦ä¸²ã€‚</li><li>ä¸€èˆ¬æˆ‘ä»¬è¦<strong>æ“ä½œ json ä¸­çš„æ•°æ®</strong>çš„æ—¶å€™ï¼Œéœ€è¦ <strong>json å¯¹è±¡</strong>çš„æ ¼å¼ã€‚</li><li>ä¸€èˆ¬æˆ‘ä»¬è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œ<strong>æ•°æ®äº¤æ¢</strong>çš„æ—¶å€™ï¼Œä½¿ç”¨ <strong>json å­—ç¬¦ä¸²</strong>ã€‚</li><li><strong>JSON.stringify()</strong>        æŠŠ json å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²</li><li><strong>JSON.parse()</strong>            æŠŠ json å­—ç¬¦ä¸²è½¬æ¢æˆä¸º json å¯¹è±¡</li></ul></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// æŠŠ json å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²</span><br>var jsonObjString = JSON.stringify(jsonObj); <span class="hljs-comment">// ç‰¹åˆ«åƒ Java ä¸­å¯¹è±¡çš„ toString</span><br>alert(jsonObjString)<br><br><span class="hljs-comment">// æŠŠ json å­—ç¬¦ä¸²ã€‚è½¬æ¢æˆä¸º json å¯¹è±¡</span><br>var jsonObj2 = JSON.parse(jsonObjString);<br>alert(jsonObj2.key1);<span class="hljs-comment">// 12</span><br>alert(jsonObj2.key2);<span class="hljs-comment">// abc</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="JSON-åœ¨-java-ä¸­çš„ä½¿ç”¨-ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰"><a href="#JSON-åœ¨-java-ä¸­çš„ä½¿ç”¨-ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰" class="headerlink" title="JSON åœ¨ java ä¸­çš„ä½¿ç”¨ ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰"></a>JSON åœ¨ java ä¸­çš„ä½¿ç”¨ ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰</h3><p>æ³¨æ„ï¼šåœ¨Javaä¸­ï¼Œå¦‚æœè¦æ“ä½œJSONï¼Œè¦å…ˆå¯¼å…¥JSONçš„jaråŒ…</p><p> <img src="/2022/10/03/JavaWebNote/image-20221107150829615.png" alt="image-20221107150829615"></p><h4 id="javaBean-å’Œ-json-çš„äº’è½¬"><a href="#javaBean-å’Œ-json-çš„äº’è½¬" class="headerlink" title="javaBean å’Œ json çš„äº’è½¬"></a>javaBean å’Œ json çš„äº’è½¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot; å›½å“¥å¥½å¸…!&quot;</span>);<br>    <span class="hljs-comment">// åˆ›å»º Gson å¯¹è±¡å®ä¾‹</span><br>    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>    <span class="hljs-comment">// toJson æ–¹æ³•å¯ä»¥æŠŠ java å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>    System.out.println(personJsonString);<br>    <span class="hljs-comment">// fromJson æŠŠ json å­—ç¬¦ä¸²è½¬æ¢å› Java å¯¹è±¡</span><br>    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ json å­—ç¬¦ä¸²</span><br>    <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯è½¬æ¢å›å»çš„ Java å¯¹è±¡ç±»å‹</span><br>    <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> gson.fromJson(personJsonString, Person.class);<br>    System.out.println(person1);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="List-å’Œ-json-çš„äº’è½¬"><a href="#List-å’Œ-json-çš„äº’è½¬" class="headerlink" title="List å’Œ json çš„äº’è½¬"></a>List å’Œ json çš„äº’è½¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 1.2.2 ã€ List å’Œ json çš„äº’è½¬</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>    List&lt;Person&gt; personList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å›½å“¥&quot;</span>));<br>    personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;åº·å¸ˆå‚…&quot;</span>));<br>    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>    <span class="hljs-comment">// æŠŠ List è½¬æ¢ä¸º json å­—ç¬¦ä¸²</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">personListJsonString</span> <span class="hljs-operator">=</span> gson.toJson(personList);<br>    System.out.println(personListJsonString);<br><br>    <span class="hljs-comment">// æŠŠ json å­—ç¬¦ä¸²è½¬æ¢å› List</span><br>    <span class="hljs-comment">//æ–¹æ³•ä¸€ï¼šéœ€è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªç±»ï¼Œè¯¥ç±»è¦ç»§æ‰¿TypeToken&lt;List&lt;ç±»&gt;&gt;ï¼Œé‡Œé¢å¯ä»¥ä»€ä¹ˆéƒ½ä¸å¡«</span><br>    <span class="hljs-comment">//        List&lt;Person&gt; list = gson.fromJson(personListJsonString,</span><br>    <span class="hljs-comment">//                          new PersonListType().getType());</span><br>    <span class="hljs-comment">//æ–¹æ³•äºŒï¼šä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼Œå°±ä¸éœ€è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªç±»</span><br>    List&lt;Person&gt; list = gson.fromJson(personListJsonString,<br>                                <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeToken</span>&lt;ArrayList&lt;Person&gt;&gt;()&#123;&#125;.getType());<br><br>    System.out.println(list);<br>    <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> list.get(<span class="hljs-number">0</span>);<br>    System.out.println(person);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŠŠ json å­—ç¬¦ä¸²è½¬æ¢å› List</span><br><span class="hljs-comment">// éœ€è¦ä¸ºæˆåŠŸè½¬æ¢å›åŸæ¥çš„ List&lt;ç±»&gt; åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿TypeToken&lt;List&lt;ç±»&gt;&gt;ï¼Œé‡Œé¢å¯ä»¥ä»€ä¹ˆéƒ½ä¸å¡«</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonListType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TypeToken</span>&lt;ArrayList&lt;Person&gt;&gt; &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="map-å’Œ-json-çš„äº’è½¬"><a href="#map-å’Œ-json-çš„äº’è½¬" class="headerlink" title="map å’Œ json çš„äº’è½¬"></a>map å’Œ json çš„äº’è½¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 1.2.3 ã€ map å’Œ json çš„äº’è½¬</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    Map&lt;Integer,Person&gt; personMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    personMap.put(<span class="hljs-number">1</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot; å›½å“¥å¥½å¸…&quot;</span>));<br>    personMap.put(<span class="hljs-number">2</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot; åº·å¸ˆå‚…ä¹Ÿå¥½å¸…&quot;</span>));<br>    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>    <br>    <span class="hljs-comment">// æŠŠ map é›†åˆè½¬æ¢æˆä¸º json å­—ç¬¦ä¸²</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">personMapJsonString</span> <span class="hljs-operator">=</span> gson.toJson(personMap);<br>    System.out.println(personMapJsonString);<br>    <br>    <span class="hljs-comment">// æŠŠ json å­—ç¬¦ä¸²è½¬æ¢ä¸º map é›†åˆ</span><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿TypeTokençš„æ–¹æ³•</span><br>    <span class="hljs-comment">// Map&lt;Integer,Person&gt; personMap2 = gson.fromJson(personMapJsonString, new</span><br>    <span class="hljs-comment">//PersonMapType().getType());</span><br>    <span class="hljs-comment">// ä¸éœ€è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªç±»çš„æ–¹æ³•ï¼ˆä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼‰</span><br>    Map&lt;Integer,Person&gt; personMap2 = gson.fromJson(personMapJsonString, <br>                     <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeToken</span>&lt;HashMap&lt;Integer,Person&gt;&gt;()&#123;&#125;.getType());<br>    System.out.println(personMap2);<br>    <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> personMap2.get(<span class="hljs-number">1</span>);<br>    System.out.println(p);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="AJAX-è¯·æ±‚"><a href="#AJAX-è¯·æ±‚" class="headerlink" title="AJAX è¯·æ±‚"></a>AJAX è¯·æ±‚</h2><h3 id="ä»€ä¹ˆæ˜¯-AJAX-è¯·æ±‚"><a href="#ä»€ä¹ˆæ˜¯-AJAX-è¯·æ±‚" class="headerlink" title="ä»€ä¹ˆæ˜¯ AJAX è¯·æ±‚"></a>ä»€ä¹ˆæ˜¯ AJAX è¯·æ±‚</h3><ul><li>AJAX å³â€œAsynchronous Javascript And XMLâ€ï¼ˆå¼‚æ­¥ JavaScript å’Œ XMLï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚</li><li>AJAX æ˜¯ä¸€ç§æµè§ˆå™¨é€šè¿‡ <strong>js å¼‚æ­¥</strong>å‘èµ·è¯·æ±‚ï¼Œ<strong>å±€éƒ¨æ›´æ–°</strong>é¡µé¢çš„æŠ€æœ¯ã€‚</li><li>Ajax è¯·æ±‚çš„å±€éƒ¨æ›´æ–°ï¼Œæµè§ˆå™¨åœ°å€æ ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå±€éƒ¨æ›´æ–°ä¸ä¼šèˆå¼ƒåŸæ¥é¡µé¢çš„å†…å®¹</li></ul><h3 id="åŸç”Ÿ-AJAX-è¯·æ±‚çš„ç¤ºä¾‹"><a href="#åŸç”Ÿ-AJAX-è¯·æ±‚çš„ç¤ºä¾‹" class="headerlink" title="åŸç”Ÿ AJAX è¯·æ±‚çš„ç¤ºä¾‹"></a>åŸç”Ÿ AJAX è¯·æ±‚çš„ç¤ºä¾‹</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- htmlé¡µé¢ï¼ˆå‰ç«¯ï¼‰ --&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;pragma&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;cache-control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Expires&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;0&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Insert title here<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// åœ¨è¿™é‡Œä½¿ç”¨javaScriptè¯­è¨€å‘èµ·Ajaxè¯·æ±‚ï¼Œ</span></span><br><span class="language-javascript"><span class="hljs-comment">// è®¿é—®AjaxServletä¸­çš„javaScriptAjax</span></span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajaxRequest</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-comment">// 1ã€æˆ‘ä»¬é¦–å…ˆè¦åˆ›å»ºXMLHttpRequest </span></span><br><span class="language-javascript"><span class="hljs-keyword">var</span> xmlHttpRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</span><br><span class="language-javascript"><span class="hljs-comment">// 2ã€è°ƒç”¨openæ–¹æ³•è®¾ç½®è¯·æ±‚å‚æ•°</span></span><br><span class="language-javascript">xmlHttpRequest.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;http://localhost:8080/&quot;</span> +</span><br><span class="language-javascript"><span class="hljs-string">&quot;study_16_json_ajax_i18n/ajaxServlet?action=javaScriptAjax&quot;</span>,<span class="hljs-literal">true</span>);</span><br><span class="language-javascript"><span class="hljs-comment">// 3ã€åœ¨sendæ–¹æ³•å‰ç»‘å®šonreadystatechangeäº‹ä»¶ï¼Œå¤„ç†è¯·æ±‚å®Œæˆåçš„æ“ä½œã€‚</span></span><br><span class="language-javascript">xmlHttpRequest.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-keyword">if</span>(xmlHttpRequest.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span> </span><br><span class="language-javascript">                       &amp;&amp; xmlHttpRequest.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>)&#123;</span><br><span class="language-javascript"><span class="hljs-comment">// alert(xmlHttpRequest.responseText);</span></span><br><span class="language-javascript"><span class="hljs-comment">// æŠŠå“åº”è¿”å›çš„æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span></span><br><span class="language-javascript"><span class="hljs-keyword">var</span> jsonObj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xmlHttpRequest.<span class="hljs-property">responseText</span>);</span><br><span class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;div01&quot;</span>).<span class="hljs-property">innerHTML</span> =</span><br><span class="language-javascript"><span class="hljs-string">&quot;ç¼–å·ï¼š&quot;</span>+ jsonObj.<span class="hljs-property">id</span> + <span class="hljs-string">&quot;&lt;br/&gt; å§“åï¼š&quot;</span> + jsonObj.<span class="hljs-property">name</span>;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-comment">// 4ã€è°ƒç”¨sendæ–¹æ³•å‘é€è¯·æ±‚</span></span><br><span class="language-javascript">xmlHttpRequest.<span class="hljs-title function_">send</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;ajaxRequest()&quot;</span>&gt;</span>ajax request<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div01&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸ä¼šå˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// AjaxServlet ç¨‹åºï¼ˆåç«¯ï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AjaxServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">javaScriptAjax</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;Ajaxè¯·æ±‚è¿‡æ¥äº†&quot;</span>);<br><br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- web.xmlé…ç½® --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>AjaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.study.servlet.AjaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>AjaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/ajaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="jQuery-ä¸­çš„-AJAX-è¯·æ±‚"><a href="#jQuery-ä¸­çš„-AJAX-è¯·æ±‚" class="headerlink" title="jQuery ä¸­çš„ AJAX è¯·æ±‚"></a>jQuery ä¸­çš„ AJAX è¯·æ±‚</h3><ul><li><p>$.ajax æ–¹æ³•</p><ul><li>url                       è¡¨ç¤ºè¯·æ±‚çš„åœ°å€</li><li>type                    è¡¨ç¤ºè¯·æ±‚çš„ç±»å‹ GET æˆ– POST è¯·æ±‚</li><li>data                    è¡¨ç¤ºå‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®<ul><li>data çš„æ ¼å¼æœ‰ä¸¤ç§ï¼š</li><li>ä¸€ï¼šname&#x3D;value&amp;name&#x3D;value</li><li>äºŒï¼š{key:value}</li></ul></li><li>success              è¯·æ±‚æˆåŠŸï¼Œå“åº”çš„å›è°ƒå‡½æ•°</li><li>dataType           å“åº”çš„æ•°æ®ç±»å‹ï¼ˆé¢„æœŸæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ï¼‰<ul><li>å¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰ï¼š</li><li>text      è¡¨ç¤ºçº¯æ–‡æœ¬</li><li>xml      è¡¨ç¤º xml æ•°æ®</li><li>json     è¡¨ç¤º json å¯¹è±¡</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;#ajaxBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br><br>    $.<span class="hljs-title function_">ajax</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;http://localhost:8080/study_16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>        <span class="hljs-comment">// data:&quot;action=jQueryAjax&quot;,</span><br>        <span class="hljs-attr">data</span>:&#123;<span class="hljs-attr">action</span>:<span class="hljs-string">&quot;jQueryAjax&quot;</span>&#125;,<br>        <span class="hljs-attr">type</span>:<span class="hljs-string">&quot;GET&quot;</span>,<br>        <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>            <span class="hljs-comment">// å‡½æ•°æ‹¬å·é‡Œéœ€è¦å¡«ä¸Šä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ç”¨æ¥æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br>            <span class="hljs-comment">// alert(&quot;æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ˜¯ï¼š&quot;+data);</span><br>            <span class="hljs-comment">// var jsonObj = JSON.parse(data);</span><br>            $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot;ç¼–å·ï¼š&quot;</span>+ data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot;&lt;br/&gt;å§“åï¼š&quot;</span> + data.<span class="hljs-property">name</span>);<br>        &#125;,<br>        <span class="hljs-comment">// dataType:&quot;text&quot;</span><br>        <span class="hljs-attr">dataType</span>:<span class="hljs-string">&quot;json&quot;</span><br>    &#125;);<br><br>&#125;);<br></code></pre></td></tr></table></figure></li><li><p>$.get æ–¹æ³• å’Œ $.post æ–¹æ³•</p><ul><li>url               è¯·æ±‚çš„ url åœ°å€</li><li>data            å‘é€çš„æ•°æ®</li><li>callback      æˆåŠŸçš„å›è°ƒå‡½æ•°</li><li>type             è¿”å›çš„æ•°æ®ç±»å‹</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ajax--get è¯·æ±‚</span><br>$(<span class="hljs-string">&quot;#getBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    $.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>          <span class="hljs-string">&quot;action=jQueryGet&quot;</span>,<br>          <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; get ç¼–å·ï¼š&quot;</span> + data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot; , å§“åï¼š&quot;</span> + data.<span class="hljs-property">name</span>);<br>      &#125;,<br>          <span class="hljs-string">&quot;json&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// ajax--post è¯·æ±‚</span><br>$(<span class="hljs-string">&quot;#postBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    $.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>        <span class="hljs-string">&quot;action=jQueryPost&quot;</span>,<br>            <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; post ç¼–å·ï¼š&quot;</span> + data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot; , å§“åï¼š&quot;</span> + data.<span class="hljs-property">name</span>);<br>    &#125;,<br>            <span class="hljs-string">&quot;json&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure></li><li><p>$.getJSON æ–¹æ³•</p><ul><li>url              è¯·æ±‚çš„ url åœ°å€</li><li>data           å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®</li><li>callback     æˆåŠŸçš„å›è°ƒå‡½æ•°</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ajax--getJson è¯·æ±‚</span><br>$(<span class="hljs-string">&quot;#getJSONBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    $.<span class="hljs-title function_">getJSON</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>              <span class="hljs-string">&quot;action=jQueryGetJSON&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) &#123;<br>        $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; getJSON ç¼–å·ï¼š&quot;</span> + data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot; , å§“åï¼š&quot;</span> + data.<span class="hljs-property">name</span>);<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure></li><li><p>è¡¨å•åºåˆ—åŒ– serialize()</p><p>serialize() å¯ä»¥æŠŠè¡¨å•ä¸­æ‰€æœ‰è¡¨å•é¡¹çš„å†…å®¹éƒ½è·å–åˆ°ï¼Œå¹¶ä»¥ name&#x3D;value&amp;name&#x3D;value çš„å½¢å¼è¿›è¡Œæ‹¼æ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-comment">// ajax è¯·æ±‚</span><br>$(<span class="hljs-string">&quot;#submit&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// æŠŠå‚æ•°åºåˆ—åŒ–</span><br>    $.<span class="hljs-title function_">getJSON</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>          <span class="hljs-string">&quot;action=jQuerySerialize&amp;&quot;</span> + $(<span class="hljs-string">&quot;#form01&quot;</span>).<span class="hljs-title function_">serialize</span>(),<br>              <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>         $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; Serialize ç¼–å·ï¼š&quot;</span> + data.<span class="hljs-property">id</span> + <br>                                <span class="hljs-string">&quot; , å§“åï¼š&quot;</span> + data.<span class="hljs-property">name</span>);<br>      &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure></li></ul><h3 id="AjaxServlet-åç«¯-java-ç¨‹åº"><a href="#AjaxServlet-åç«¯-java-ç¨‹åº" class="headerlink" title="AjaxServlet åç«¯ java ç¨‹åº"></a>AjaxServlet åç«¯ java ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AjaxServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">javaScriptAjax</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;Ajaxè¯·æ±‚è¿‡æ¥äº†&quot;</span>);<br><br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryAjax</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryAjax == æ–¹æ³•è°ƒç”¨äº†&quot;</span>);<br><br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryGet == æ–¹æ³•è°ƒç”¨äº†&quot;</span>);<br><br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryPost == æ–¹æ³•è°ƒç”¨äº†&quot;</span>);<br><br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryGetJSON</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryGetJSON == æ–¹æ³•è°ƒç”¨äº†&quot;</span>);<br><br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQuerySerialize</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// æŠ¥é”™ï¼šNo &#x27;Access-Control-Allow-Origin&#x27; header è§£å†³æ–¹æ³•ï¼š</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQuerySerialize == æ–¹æ³•è°ƒç”¨äº†&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·å:&quot;</span>+req.getParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;å¯†ç ï¼š&quot;</span>+req.getParameter(<span class="hljs-string">&quot;password&quot;</span>));<br>        <span class="hljs-comment">// å“åº”ï¼Œå›ä¼ æ•°æ®ï¼ˆå‡è®¾è¦å›ä¼  person å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;å›½å“¥&quot;</span>);<br>        <span class="hljs-comment">// äº¤äº’ä¼ è¾“éœ€è¦ jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// å“åº”</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="i18n-å›½é™…åŒ–"><a href="#i18n-å›½é™…åŒ–" class="headerlink" title="i18n å›½é™…åŒ–"></a>i18n å›½é™…åŒ–</h2><h3 id="ä»€ä¹ˆæ˜¯-i18n-å›½é™…åŒ–"><a href="#ä»€ä¹ˆæ˜¯-i18n-å›½é™…åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯ i18n å›½é™…åŒ–"></a>ä»€ä¹ˆæ˜¯ i18n å›½é™…åŒ–</h3><ul><li>å›½é™…åŒ–ï¼ˆInternationalizationï¼‰æŒ‡çš„æ˜¯åŒä¸€ä¸ªç½‘ç«™å¯ä»¥æ”¯æŒå¤šç§ä¸åŒçš„è¯­è¨€ï¼Œä»¥æ–¹ä¾¿ä¸åŒå›½å®¶ï¼Œä¸åŒè¯­ç§çš„ç”¨æˆ·è®¿é—®ã€‚</li><li>å…³äºå›½é™…åŒ–æˆ‘ä»¬æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯ä¸ºä¸åŒçš„å›½å®¶åˆ›å»ºä¸åŒçš„ç½‘ç«™ï¼Œæ¯”å¦‚è‹¹æœå…¬å¸ï¼Œä»–çš„è‹±æ–‡å®˜ç½‘æ˜¯ï¼š<br><a href="http://www.apple.com/">http://www.apple.com</a> è€Œä¸­å›½å®˜ç½‘æ˜¯ <a href="http://www.apple.com/cn">http://www.apple.com/cn</a></li><li>è‹¹æœå…¬å¸è¿™ç§æ–¹æ¡ˆå¹¶ä¸é€‚åˆå…¨éƒ¨å…¬å¸ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›ç›¸åŒçš„ä¸€ä¸ªç½‘ç«™ï¼Œè€Œä¸åŒäººè®¿é—®çš„æ—¶å€™å¯ä»¥æ ¹æ®ç”¨æˆ·æ‰€åœ¨çš„åŒºåŸŸæ˜¾ç¤ºä¸åŒçš„è¯­è¨€æ–‡å­—ï¼Œè€Œç½‘ç«™çš„å¸ƒå±€æ ·å¼ç­‰ä¸å‘ç”Ÿæ”¹å˜ã€‚</li><li>äºæ˜¯å°±æœ‰äº†æˆ‘ä»¬è¯´çš„å›½é™…åŒ–ï¼Œå›½é™…åŒ–æ€»çš„æ¥è¯´å°±æ˜¯åŒä¸€ä¸ªç½‘ç«™ä¸åŒå›½å®¶çš„äººæ¥è®¿é—®å¯ä»¥æ˜¾ç¤ºå‡ºä¸åŒçš„è¯­è¨€ã€‚ä½†å®é™…ä¸Šè¿™ç§éœ€æ±‚å¹¶ä¸å¼ºçƒˆï¼Œä¸€èˆ¬çœŸçš„æœ‰å›½é™…åŒ–éœ€æ±‚çš„å…¬å¸ï¼Œä¸»æµé‡‡ç”¨çš„ä¾ç„¶æ˜¯è‹¹æœå…¬å¸çš„é‚£ç§æ–¹æ¡ˆï¼Œä¸ºä¸åŒçš„å›½å®¶åˆ›å»ºä¸åŒçš„é¡µé¢ã€‚æ‰€ä»¥å›½é™…åŒ–çš„å†…å®¹æˆ‘ä»¬äº†è§£ä¸€ä¸‹å³å¯ã€‚</li><li>å›½é™…åŒ–çš„è‹±æ–‡ Internationalizationï¼Œä½†æ˜¯ç”±äºæ‹¼å†™è¿‡é•¿ï¼Œè€å¤–æƒ³äº†ä¸€ä¸ªç®€å•çš„å†™æ³•å«åš I18Nï¼Œä»£è¡¨çš„æ˜¯ Internationalizationè¿™ä¸ªå•è¯ï¼Œä»¥ I å¼€å¤´ï¼Œä»¥ N ç»“å°¾ï¼Œè€Œä¸­é—´æ˜¯ 18 ä¸ªå­—æ¯ï¼Œæ‰€ä»¥ç®€å†™ä¸º I18Nã€‚ä»¥åæˆ‘ä»¬è¯´ I18N å’Œå›½é™…åŒ–æ˜¯ä¸€ä¸ªæ„æ€ã€‚</li></ul><h3 id="å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»"><a href="#å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»" class="headerlink" title="å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»"></a>å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»</h3><p><img src="/2022/10/03/JavaWebNote/image-20221112143554038.png" alt="image-20221112143554038"></p><h3 id="å›½é™…åŒ–èµ„æº-properties-æµ‹è¯•-æµ‹è¯•"><a href="#å›½é™…åŒ–èµ„æº-properties-æµ‹è¯•-æµ‹è¯•" class="headerlink" title="å›½é™…åŒ–èµ„æº properties æµ‹è¯• æµ‹è¯•"></a>å›½é™…åŒ–èµ„æº properties æµ‹è¯• æµ‹è¯•</h3><ul><li><p>é…ç½®ä¸¤ä¸ªè¯­è¨€çš„é…ç½®æ–‡ä»¶ï¼š</p><ul><li><p>i18n_en_US.properties è‹±æ–‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">username</span>=<span class="hljs-string">username</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">password</span><br><span class="hljs-attr">sex</span>=<span class="hljs-string">sex</span><br><span class="hljs-attr">age</span>=<span class="hljs-string">age</span><br><span class="hljs-attr">regist</span>=<span class="hljs-string">regist</span><br><span class="hljs-attr">boy</span>=<span class="hljs-string">boy</span><br><span class="hljs-attr">email</span>=<span class="hljs-string">email</span><br><span class="hljs-attr">girl</span>=<span class="hljs-string">girl</span><br><span class="hljs-attr">reset</span>=<span class="hljs-string">reset</span><br><span class="hljs-attr">submit</span>=<span class="hljs-string">submit</span><br></code></pre></td></tr></table></figure></li><li><p>i18n_zh_CN.properties ä¸­æ–‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">username</span>= <span class="hljs-string">ç”¨æˆ·å</span><br><span class="hljs-attr">password</span>= <span class="hljs-string">å¯†ç </span><br><span class="hljs-attr">sex</span>= <span class="hljs-string">æ€§åˆ«</span><br><span class="hljs-attr">age</span>= <span class="hljs-string">å¹´é¾„</span><br><span class="hljs-attr">regist</span>= <span class="hljs-string">æ³¨å†Œ</span><br><span class="hljs-attr">boy</span>= <span class="hljs-string">ç”·</span><br><span class="hljs-attr">girl</span>= <span class="hljs-string">å¥³</span><br><span class="hljs-attr">email</span>= <span class="hljs-string">é‚®ç®±</span><br><span class="hljs-attr">reset</span>= <span class="hljs-string">é‡ç½®</span><br><span class="hljs-attr">submit</span>= <span class="hljs-string">æäº¤</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>å›½é™…åŒ–æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">I18nTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLocale</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// è·å–ä½ ç³»ç»Ÿé»˜è®¤çš„è¯­è¨€ã€‚å›½å®¶ä¿¡æ¯</span><br>        <span class="hljs-comment">// Locale locale = Locale.getDefault();</span><br>        <span class="hljs-comment">// System.out.println(locale);</span><br>        <span class="hljs-comment">// for (Locale availableLocale : Locale.getAvailableLocales()) &#123;</span><br>        <span class="hljs-comment">// System.out.println(availableLocale);</span><br>        <span class="hljs-comment">// &#125;</span><br>        <span class="hljs-comment">// è·å–ä¸­æ–‡ï¼Œä¸­æ–‡çš„å¸¸é‡çš„ Locale å¯¹è±¡</span><br>        System.out.println(Locale.CHINA);<br>        <span class="hljs-comment">// è·å–è‹±æ–‡ï¼Œç¾å›½çš„å¸¸é‡çš„ Locale å¯¹è±¡</span><br>        System.out.println(Locale.US);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testI18n</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„ Locale å¯¹è±¡</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> Locale.CHINA;<br>        <span class="hljs-comment">// é€šè¿‡æŒ‡å®šçš„ basename å’Œ Locale å¯¹è±¡ï¼Œè¯»å– ç›¸åº”çš„é…ç½®æ–‡ä»¶</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">bundle</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;i18n&quot;</span>, locale);<br>        <br>        System.out.println(<span class="hljs-string">&quot;username ï¼š&quot;</span> + bundle.getString(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;password ï¼š&quot;</span> + bundle.getString(<span class="hljs-string">&quot;password&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;Sex ï¼š&quot;</span> + bundle.getString(<span class="hljs-string">&quot;sex&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;age ï¼š&quot;</span> + bundle.getString(<span class="hljs-string">&quot;age&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="é€šè¿‡è¯·æ±‚å¤´å›½é™…åŒ–é¡µé¢"><a href="#é€šè¿‡è¯·æ±‚å¤´å›½é™…åŒ–é¡µé¢" class="headerlink" title="é€šè¿‡è¯·æ±‚å¤´å›½é™…åŒ–é¡µé¢"></a>é€šè¿‡è¯·æ±‚å¤´å›½é™…åŒ–é¡µé¢</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.Locale&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.ResourceBundle&quot;</span> %&gt;<br>&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;!DOCTYPE html PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;pragma&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;cache-control&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Expires&quot;</span> content=<span class="hljs-string">&quot;0&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Content-Type&quot;</span> content=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;<br>        &lt;title&gt;Insert title here&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%<br>        <span class="hljs-comment">// ä»è¯·æ±‚å¤´ä¸­è·å– Locale ä¿¡æ¯ï¼ˆè¯­è¨€ï¼‰</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> request.getLocale();<br>        System.out.println(locale);<br>        <span class="hljs-comment">// è·å–è¯»å–åŒ…ï¼ˆæ ¹æ® æŒ‡å®šçš„ baseName å’Œ Locale è¯»å– è¯­è¨€ä¿¡æ¯ï¼‰</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">i18n</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;i18n&quot;</span>, locale);<br>        %&gt;<br>        &lt;a href=<span class="hljs-string">&quot;&quot;</span>&gt;ä¸­æ–‡&lt;/a&gt;|<br>        &lt;a href=<span class="hljs-string">&quot;&quot;</span>&gt;english&lt;/a&gt;<br>        &lt;center&gt;<br>            &lt;h1&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;regist&quot;</span>)%&gt;&lt;/h1&gt;<br>            &lt;table&gt;<br>                &lt;form&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;username&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input name=<span class="hljs-string">&quot;username&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;password&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;sex&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;boy&quot;</span>)%&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;girl&quot;</span>)%&gt;<br>                        &lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;email&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td colspan=<span class="hljs-string">&quot;2&quot;</span> align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;reset&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>reset<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;<br>                            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>submit<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                &lt;/form&gt;<br>            &lt;/table&gt;<br>            &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt;<br>        &lt;/center&gt;<br>        å›½é™…åŒ–æµ‹è¯•ï¼š<br>        &lt;br /&gt; <span class="hljs-number">1</span>ã€è®¿é—®é¡µé¢ï¼Œé€šè¿‡æµè§ˆå™¨è®¾ç½®ï¼Œè¯·æ±‚å¤´ä¿¡æ¯ç¡®å®šå›½é™…åŒ–è¯­è¨€ã€‚<br>        &lt;br /&gt; <span class="hljs-number">2</span>ã€é€šè¿‡å·¦ä¸Šè§’ï¼Œæ‰‹åŠ¨åˆ‡æ¢è¯­è¨€<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><h3 id="é€šè¿‡æ˜¾ç¤ºçš„é€‰æ‹©è¯­è¨€ç±»å‹è¿›è¡Œå›½é™…åŒ–"><a href="#é€šè¿‡æ˜¾ç¤ºçš„é€‰æ‹©è¯­è¨€ç±»å‹è¿›è¡Œå›½é™…åŒ–" class="headerlink" title="é€šè¿‡æ˜¾ç¤ºçš„é€‰æ‹©è¯­è¨€ç±»å‹è¿›è¡Œå›½é™…åŒ–"></a>é€šè¿‡æ˜¾ç¤ºçš„é€‰æ‹©è¯­è¨€ç±»å‹è¿›è¡Œå›½é™…åŒ–</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.Locale&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.ResourceBundle&quot;</span> %&gt;<br>&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;!DOCTYPE html PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;pragma&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;cache-control&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Expires&quot;</span> content=<span class="hljs-string">&quot;0&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Content-Type&quot;</span> content=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;<br>        &lt;title&gt;Insert title here&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%<br>        <span class="hljs-comment">// ä»è¯·æ±‚å¤´ä¸­è·å– Locale ä¿¡æ¯ï¼ˆè¯­è¨€ï¼‰</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">country</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;country&quot;</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;cn&quot;</span>.equals(country)) &#123;<br>            locale = Locale.CHINA;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;usa&quot;</span>.equals(country)) &#123;<br>            locale = Locale.US;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            locale = request.getLocale();<br>        &#125;<br>        System.out.println(locale);<br>        <span class="hljs-comment">// è·å–è¯»å–åŒ…ï¼ˆæ ¹æ® æŒ‡å®šçš„ baseName å’Œ Locale è¯»å– è¯­è¨€ä¿¡æ¯ï¼‰</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">i18n</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;i18n&quot;</span>, locale);<br>        %&gt;<br>        &lt;a href=<span class="hljs-string">&quot;i18n.jsp?country=cn&quot;</span>&gt;ä¸­æ–‡&lt;/a&gt;|<br>        &lt;a href=<span class="hljs-string">&quot;i18n.jsp?country=usa&quot;</span>&gt;english&lt;/a&gt;<br>        &lt;center&gt;<br>            &lt;h1&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;regist&quot;</span>)%&gt;&lt;/h1&gt;<br>            &lt;table&gt;<br>                &lt;form&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;username&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input name=<span class="hljs-string">&quot;username&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;password&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;sex&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;boy&quot;</span>)%&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;girl&quot;</span>)%&gt;<br>                        &lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;email&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td colspan=<span class="hljs-string">&quot;2&quot;</span> align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;reset&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>reset<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;<br>                            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>submit<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                &lt;/form&gt;<br>            &lt;/table&gt;<br>            &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt;<br>        &lt;/center&gt;<br>        å›½é™…åŒ–æµ‹è¯•ï¼š<br>        &lt;br /&gt; <span class="hljs-number">1</span>ã€è®¿é—®é¡µé¢ï¼Œé€šè¿‡æµè§ˆå™¨è®¾ç½®ï¼Œè¯·æ±‚å¤´ä¿¡æ¯ç¡®å®šå›½é™…åŒ–è¯­è¨€ã€‚<br>        &lt;br /&gt; <span class="hljs-number">2</span>ã€é€šè¿‡å·¦ä¸Šè§’ï¼Œæ‰‹åŠ¨åˆ‡æ¢è¯­è¨€<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><h3 id="JSTL-æ ‡ç­¾åº“å®ç°å›½é™…åŒ–"><a href="#JSTL-æ ‡ç­¾åº“å®ç°å›½é™…åŒ–" class="headerlink" title="JSTL æ ‡ç­¾åº“å®ç°å›½é™…åŒ–"></a>JSTL æ ‡ç­¾åº“å®ç°å›½é™…åŒ–</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--<span class="hljs-number">1</span> ä½¿ç”¨æ ‡ç­¾è®¾ç½® Locale ä¿¡æ¯ --%&gt;<br>&lt;fmt:setLocale value=<span class="hljs-string">&quot;&quot;</span> /&gt;<br>&lt;%--<span class="hljs-number">2</span> ä½¿ç”¨æ ‡ç­¾è®¾ç½® baseName--%&gt;<br>&lt;fmt:setBundle basename=<span class="hljs-string">&quot;&quot;</span>/&gt;<br>&lt;%--<span class="hljs-number">3</span> ä½¿ç”¨æ ‡ç­¾è¾“å‡ºæŒ‡å®š key çš„å›½é™…åŒ–ä¿¡æ¯ --%&gt;<br>&lt;fmt:message key=<span class="hljs-string">&quot;&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ taglib prefix=<span class="hljs-string">&quot;fmt&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;<br>&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;!DOCTYPE html PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;pragma&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;cache-control&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Expires&quot;</span> content=<span class="hljs-string">&quot;0&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Content-Type&quot;</span> content=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;<br>        &lt;title&gt;Insert title here&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%--<span class="hljs-number">1</span> ä½¿ç”¨æ ‡ç­¾è®¾ç½® Locale ä¿¡æ¯ --%&gt;<br>        &lt;fmt:setLocale value=<span class="hljs-string">&quot;$&#123;param.locale&#125;&quot;</span> /&gt;<br>        &lt;%--<span class="hljs-number">2</span> ä½¿ç”¨æ ‡ç­¾è®¾ç½® baseName--%&gt;<br>        &lt;fmt:setBundle basename=<span class="hljs-string">&quot;i18n&quot;</span>/&gt;<br>        &lt;a href=<span class="hljs-string">&quot;i18n_fmt.jsp?locale=zh_CN&quot;</span>&gt;ä¸­æ–‡&lt;/a&gt;|<br>        &lt;a href=<span class="hljs-string">&quot;i18n_fmt.jsp?locale=en_US&quot;</span>&gt;english&lt;/a&gt;<br>        &lt;center&gt;<br>            &lt;h1&gt;&lt;fmt:message key=<span class="hljs-string">&quot;regist&quot;</span> /&gt;&lt;/h1&gt;<br>            &lt;table&gt;<br>                &lt;form&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;username&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input name=<span class="hljs-string">&quot;username&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;sex&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;fmt:message key=<span class="hljs-string">&quot;boy&quot;</span> /&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;fmt:message key=<span class="hljs-string">&quot;girl&quot;</span> /&gt;<br>                        &lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;email&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td colspan=<span class="hljs-string">&quot;2&quot;</span> align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;reset&quot;</span> value=<span class="hljs-string">&quot;&lt;fmt:message key=&quot;</span>reset<span class="hljs-string">&quot; /&gt;&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;<br>                            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;&lt;fmt:message key=&quot;</span>submit<span class="hljs-string">&quot; /&gt;&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                &lt;/form&gt;<br>            &lt;/table&gt;<br>            &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt;<br>        &lt;/center&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MySQL</title>
    <link href="/2022/08/12/MySQLNote/"/>
    <url>/2022/08/12/MySQLNote/</url>
    
    <content type="html"><![CDATA[<h2 id="å½»åº•å¸è½½MySQLï¼ˆè§£å‹ç‰ˆï¼‰"><a href="#å½»åº•å¸è½½MySQLï¼ˆè§£å‹ç‰ˆï¼‰" class="headerlink" title="å½»åº•å¸è½½MySQLï¼ˆè§£å‹ç‰ˆï¼‰"></a>å½»åº•å¸è½½MySQLï¼ˆè§£å‹ç‰ˆï¼‰</h2><p><a href="https://blog.csdn.net/m0_48263336/article/details/122294429">å½»åº•å¸è½½-è§£å‹ç‰ˆ MySQL5.7</a></p><p><a href="https://blog.51cto.com/yang/2892037">Windowså¦‚ä½•å¸è½½å¹²å‡€mysql</a></p><h3 id="1-å…³é—­æœåŠ¡"><a href="#1-å…³é—­æœåŠ¡" class="headerlink" title="1.å…³é—­æœåŠ¡"></a>1.å…³é—­æœåŠ¡</h3><p>ä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œcmdï¼Œä½¿ç”¨ <strong>net stop mysql</strong> å‘½ä»¤ï¼Œåœæ­¢æœåŠ¡ã€‚</p><p>æ³¨æ„ï¼šå¾—è¦ç®¡ç†å‘˜çš„èº«ä»½ï¼Œä¸ç„¶æƒé™ä¸å¤Ÿï¼Œæ— æ³•åœæ­¢æœåŠ¡ã€‚</p><p><img src="/2022/08/12/MySQLNote/image-20221114152654023.png" alt="image-20221114152654023"></p><p><img src="/2022/08/12/MySQLNote/image-20221114152750343.png" alt="image-20221114152750343"></p><h3 id="2-å¸è½½æœåŠ¡"><a href="#2-å¸è½½æœåŠ¡" class="headerlink" title="2.å¸è½½æœåŠ¡"></a>2.å¸è½½æœåŠ¡</h3><p>è¾“å…¥å‘½ä»¤ <strong>mysqld -remove mysql</strong> å¸è½½æœåŠ¡ã€‚</p><p><img src="/2022/08/12/MySQLNote/image-20221114152804289.png" alt="image-20221114152804289"></p><p> æ³¨æ„ï¼šå¦‚æœä¸èƒ½æˆåŠŸå¸è½½æœåŠ¡ï¼Œè¯·åœ¨å®‰è£…çš„MYSQLæ–‡ä»¶å¤¹ä¸‹çš„binç›®å½•ä¸‹æ‰§è¡Œ</p><p>ä¸Šè¿°å‘½ä»¤ mysqld -remove mysql </p><h3 id="3-åˆ é™¤MYSQLæ–‡ä»¶"><a href="#3-åˆ é™¤MYSQLæ–‡ä»¶" class="headerlink" title="3.åˆ é™¤MYSQLæ–‡ä»¶"></a>3.åˆ é™¤MYSQLæ–‡ä»¶</h3><p>å°†å®‰è£…çš„MySQLæ–‡ä»¶å¤¹åˆ æ‰ã€‚å¦‚æœæ‹…å¿ƒå¸ä¸å¹²å‡€ï¼Œå¯ä»¥å‰å¾€æ§åˆ¶é¢æ¿çš„å¸è½½ç¨‹åºé‡Œé¢çœ‹çœ‹æ˜¯å¦è¿˜æœ‰MYSQLï¼Œæœ‰çš„è¯å°±æŠŠä¸MYSQLç›¸å…³çš„ä¹Ÿå¸è½½äº†ã€‚</p><p><img src="/2022/08/12/MySQLNote/image-20221114152823190.png" alt="image-20221114152823190"></p><h3 id="4-åˆ é™¤æ³¨å†Œè¡¨çš„MYSQLæœåŠ¡"><a href="#4-åˆ é™¤æ³¨å†Œè¡¨çš„MYSQLæœåŠ¡" class="headerlink" title="4.åˆ é™¤æ³¨å†Œè¡¨çš„MYSQLæœåŠ¡"></a>4.åˆ é™¤æ³¨å†Œè¡¨çš„MYSQLæœåŠ¡</h3><p>è¿è¡Œ win+Rï¼Œè¾“å…¥regedit,æ‰“å¼€æ³¨å†Œè¡¨ã€‚</p><p><img src="/2022/08/12/MySQLNote/image-20221114152831777.png" alt="image-20221114152831777"></p><p>æ‰“å¼€æ³¨å†Œè¡¨ä¹‹åï¼Œåˆ é™¤æ³¨å†Œè¡¨ä¸­çš„MYSQLæœåŠ¡ï¼š</p><p>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQL<br>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet002\Services\Eventlog\Application\MySQL<br>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\MySQL<br>æ³¨æ„ï¼šä¹Ÿè®¸æ³¨å†Œè¡¨ä¸­ä¸æ˜¯æˆ–è€…ä¸åªæœ‰ControlSet001ã€ControlSet002ï¼Œä¹Ÿå¯èƒ½æ˜¯ControlSet006ã€007æˆ–è€…å¦‚ä¸‹å›¾æ‰€ç¤ºä¹‹ç±»ï¼Œåæ­£åˆ çš„æ—¶å€™éƒ½åˆ äº†å°±å¥½äº†ã€‚è¿™é‡Œè¦ç»†å¿ƒä¸€ç‚¹çœ‹ï¼Œä¸ç„¶å®¹æ˜“åˆ æ¼å“¦ï¼</p><p><img src="/2022/08/12/MySQLNote/image-20221114152853236.png" alt="image-20221114152853236"></p><p>è¿™æ ·å°±å¯ä»¥æŠŠè§£å‹ç‰ˆçš„MYSQLå¸è½½å¹²å‡€å•¦ï¼Œæ³¨æ„å“¦ï¼Œè¿™æ˜¯å¸è½½è§£å‹ç‰ˆçš„ ï¼Œä¸æ˜¯å®‰è£…ç‰ˆçš„å“¦ï¼</p><h2 id="MySQL-çš„å®‰è£…ä¸é…ç½®"><a href="#MySQL-çš„å®‰è£…ä¸é…ç½®" class="headerlink" title="MySQL çš„å®‰è£…ä¸é…ç½®"></a>MySQL çš„å®‰è£…ä¸é…ç½®</h2><p>[MySQL8å®‰è£…åŠç¯å¢ƒé…ç½®](<a href="https://blog.csdn.net/weixin_45311418/article/details/123018863#:~:text=MySQL8%E5%AE%89%E8%A3%85%E5%8F%8A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">https://blog.csdn.net/weixin_45311418/article/details/123018863#:~:text=MySQL8å®‰è£…åŠç¯å¢ƒé…ç½®</a> 1ã€å®‰è£…mysql 2ã€ç¼–å†™mysqlé…ç½®æ–‡ä»¶,3ã€åˆå§‹åŒ–MySQLæ•°æ®åº“ 4ã€ç™»å½•MySQLæ•°æ®åº“ 5ã€ä¿®æ”¹mysqlå¯†ç  6ã€é…ç½®ç¯å¢ƒå˜é‡)</p><p><a href="https://bbs.huaweicloud.com/blogs/326904">Windowsç³»ç»Ÿä¸­å®‰è£…MySQL8.0åŠé…ç½®æ–¹æ³•</a></p><p>æ³¨é‡Šå¿«æ·é”®ï¼šshift+ctrl+c</p><p>å–æ¶ˆæ³¨é‡Šå¿«æ·é”®ï¼šshift+ctrl+r</p><h2 id="MySQL-8-å¿˜è®°å¯†ç ï¼Ÿ"><a href="#MySQL-8-å¿˜è®°å¯†ç ï¼Ÿ" class="headerlink" title="MySQL 8 å¿˜è®°å¯†ç ï¼Ÿ"></a>MySQL 8 å¿˜è®°å¯†ç ï¼Ÿ</h2><p><a href="https://blog.csdn.net/u013580397/article/details/89817347">Mysql8.0å¿˜è®° root å¯†ç , å¦‚ä½•ä¿®æ”¹?<em>why_hereçš„åšå®¢-CSDNåšå®¢</em></a></p><h2 id="Mysql-ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#Mysql-ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="Mysql ä¸­æ–‡ä¹±ç é—®é¢˜"></a>Mysql ä¸­æ–‡ä¹±ç é—®é¢˜</h2><p><a href="https://blog.csdn.net/u012410733/article/details/61619656">å½»åº•è§£å†³mysqlä¸­æ–‡ä¹±ç _æ•°æ®åº“ä¹±ç _carl-zhaoçš„åšå®¢-CSDNåšå®¢</a></p><h2 id="ä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿æ¥-MYSQL-æ•°æ®åº“"><a href="#ä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿æ¥-MYSQL-æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿æ¥ MYSQL æ•°æ®åº“"></a>ä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿æ¥ MYSQL æ•°æ®åº“</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">net <span class="hljs-keyword">start</span> mysql<br>net stop mysql<br>mysql <span class="hljs-operator">-</span>h ä¸»æœºå <span class="hljs-operator">-</span>P ç«¯å£ <span class="hljs-operator">-</span>u ç”¨æˆ·å <span class="hljs-operator">-</span>på¯†ç  <br>#æé†’ï¼š<br>#<span class="hljs-number">0</span>ï¼‰ç™»å½•ä¹‹å‰å¿…é¡»ä¿è¯MySQLåœ¨è¿è¡ŒçŠ¶æ€<br>#<span class="hljs-number">1</span>ï¼‰<span class="hljs-operator">-</span>på¯†ç  ä¹‹é—´ä¸è¦æœ‰ç©ºæ ¼<br>#<span class="hljs-number">2</span>ï¼‰<span class="hljs-operator">-</span>pä¹‹åæ²¡æœ‰å†™å¯†ç ï¼Œå›è½¦ä¼šè¦æ±‚è¾“å…¥å¯†ç <br>#<span class="hljs-number">3</span>ï¼‰å¦‚æœæ²¡æœ‰å†™<span class="hljs-operator">-</span>h ä¸»æœºï¼Œé»˜è®¤å°±æ˜¯æœ¬æœº<br>#<span class="hljs-number">4</span>ï¼‰å¦‚æœæ²¡æœ‰å†™<span class="hljs-operator">-</span>P ç«¯å£ï¼Œé»˜è®¤ä½¿ç”¨åœ¨my.iniæ–‡ä»¶é‡Œçš„é…ç½®<br></code></pre></td></tr></table></figure> <img src="image-20221002102838634.png" alt="image-20221002102838634" style="zoom:50%;" /><h2 id="æ•°æ®åº“ä¸‰å±‚ç»“æ„"><a href="#æ•°æ®åº“ä¸‰å±‚ç»“æ„" class="headerlink" title="æ•°æ®åº“ä¸‰å±‚ç»“æ„"></a>æ•°æ®åº“ä¸‰å±‚ç»“æ„</h2><p><strong>é‡ç‚¹ï¼šMySQLæ•°æ®åº“ï¼Œæ™®é€šè¡¨çš„æœ¬è´¨ä»ç„¶æ˜¯æ–‡ä»¶</strong></p><ul><li><p>æ‰€è°“å®‰è£…Mysqlæ•°æ®åº“ï¼Œå°±æ˜¯åœ¨ä¸»æœºå®‰è£…ä¸€ä¸ªæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼Œè¿™ä¸ªç®¡ç†ç¨‹åºå¯ä»¥ç®¡ç†å¤šä¸ªæ•°æ®åº“</p><p>DBMSâ€”â€”database manage system</p></li><li><p>ä¸€ä¸ªæ•°æ®åº“é‡å¯ä»¥åˆ›å»ºå¤šä¸ªè¡¨ï¼Œä»¥ä¿å­˜æ•°æ®ï¼ˆä¿¡æ¯ï¼‰</p></li><li><p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ã€æ•°æ®åº“å’Œè¡¨çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š</p> <img src="image-20221002184209230.png" alt="image-20221002184209230" style="zoom: 45%;" /></li></ul><h2 id="æ•°æ®åœ¨æ•°æ®åº“ä¸­çš„å­˜å‚¨æ–¹å¼"><a href="#æ•°æ®åœ¨æ•°æ®åº“ä¸­çš„å­˜å‚¨æ–¹å¼" class="headerlink" title="æ•°æ®åœ¨æ•°æ®åº“ä¸­çš„å­˜å‚¨æ–¹å¼"></a>æ•°æ®åœ¨æ•°æ®åº“ä¸­çš„å­˜å‚¨æ–¹å¼</h2> <img src="image-20221002183327281.png" alt="image-20221002183327281" style="zoom: 67%;" /><h2 id="SQL-è¯­å¥åˆ†ç±»"><a href="#SQL-è¯­å¥åˆ†ç±»" class="headerlink" title="SQL è¯­å¥åˆ†ç±»"></a>SQL è¯­å¥åˆ†ç±»</h2><ul><li>DDLï¼šæ•°æ®å®šä¹‰è¯­å¥ [create è¡¨ï¼Œåº“â€¦]</li><li>DMLï¼šæ•°æ®æ“ä½œè¯­å¥ [å¢åŠ  insertï¼Œä¿®æ”¹ updateï¼Œåˆ é™¤ delete]</li><li>DQLï¼šæ•°æ®æŸ¥è¯¢è¯­å¥ [select]</li><li>DCLï¼šæ•°æ®æ§åˆ¶è¯­å¥ [ç®¡ç†æ•°æ®åº“ï¼šæ¯”å¦‚ç”¨æˆ·æƒé™ grant revoke]</li></ul><h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE DATABASE [IF NOT EXISTS] db_name [create_specification [,create_specification]...]<br>create_specification:<br>[DEFAULT] CHARACTER SET charset_name<br>[DEFAULT] COLLATE collation_name<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>CHARACTER SETï¼šæŒ‡å®šæ•°æ®åº“é‡‡ç”¨çš„å­—ç¬¦é›†ï¼Œå¦‚æœä¸æŒ‡å®šå­—ç¬¦é›†ï¼Œ<strong>é»˜è®¤utf8</strong></li><li>COLLATEï¼š<ul><li>æŒ‡å®šæ•°æ®åº“å­—ç¬¦é›†çš„æ ¡å¯¹è§„åˆ™ï¼ˆå¸¸ç”¨çš„ utf8_binï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€utf8_general_ciï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼‰</li><li>æ³¨æ„<strong>é»˜è®¤æ˜¯ utf8_general_ci</strong></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºæ•°æ®åº“æ“ä½œ<br><br>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºlyh_db01çš„æ•°æ®åº“<br>CREATE DATABASE lyh_db01<br><br>#åˆ›å»ºä¸€ä¸ªä½¿ç”¨utf8å­—ç¬¦é›†çš„lyh_db02æ•°æ®åº“<br>CREATE DATABASE lyh_db02 CHARACTER SET utf8<br><br>#åˆ›å»ºä¸€ä¸ªä½¿ç”¨utf8å­—ç¬¦é›†ï¼Œå¹¶å¸¦æ ¡å¯¹è§„åˆ™çš„lyh_db03æ•°æ®åº“<br>CREATE DATABASE lyh_db03 CHARACTER SET utf8 COLLATE utf8_bin<br><br>#utf8_binï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€utf8_general_ciï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰<br><br>#ä¸‹é¢æ˜¯ä¸€æ¡æŸ¥è¯¢çš„sqlè¯­å¥ï¼Œselect æŸ¥è¯¢ï¼Œ * è¡¨ç¤ºæ‰€æœ‰å­—æ®µï¼Œ FROM è¡¨ç¤ºä»å“ªä¸ªè¡¨ï¼Œ WHERE è¡¨ç¤ºä»å“ªä¸ªå­—æ®µ<br>SELECT * FROM t1 WHERE NAME = &#x27;tom&#x27;<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ã€åˆ é™¤æ•°æ®åº“"><a href="#æŸ¥çœ‹ã€åˆ é™¤æ•°æ®åº“" class="headerlink" title="æŸ¥çœ‹ã€åˆ é™¤æ•°æ®åº“"></a>æŸ¥çœ‹ã€åˆ é™¤æ•°æ®åº“</h2><ul><li><p>æ˜¾ç¤ºæ•°æ®åº“è¯­å¥ï¼š</p><p>SHOW DATABASES</p></li><li><p>æ˜¾ç¤ºæ•°æ®åº“åˆ›å»ºè¯­å¥ï¼š</p><p>SHOW CREATE DATABASE db_name</p></li><li><p>æ•°æ®åº“åˆ é™¤è¯­å¥ï¼ˆæ…ç”¨ï¼‰ï¼š</p><p>DROP DATABASE [IF EXISTS] db_name</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºåˆ é™¤å’ŒæŸ¥è¯¢æ•°æ®åº“<br><br>#æŸ¥çœ‹å½“å‰æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰æ•°æ®åº“<br>SHOW DATABASES<br><br>#æŸ¥çœ‹å½“å‰çš„lyh_db01æ•°æ®åº“çš„å®šä¹‰ä¿¡æ¯<br>SHOW CREATE DATABASE lyh_db01<br>#è¯´æ˜ï¼š<br>#åœ¨åˆ›å»ºæ•°æ®åº“/è¡¨çš„æ—¶å€™ï¼Œä¸ºäº†è§„é¿å…³é”®å­—é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨åå¼•å·è§£å†³è¯¥é—®é¢˜<br>#ä¸¾ä¾‹ï¼š<br>#CREATE DATABASE CREATE    CREATE æ˜¯å…³é”®è¯ï¼Œæ•…åˆ›å»ºå¤±è´¥<br>#CREATE DATABASE `CREATE`  åŠ ä¸Šåå¼•å·åï¼Œå¯æˆåŠŸåˆ›å»º<br>#å› æ­¤ï¼Œæ›´æ¨èå¸¦åå¼•å·çš„å†™æ³•ï¼Œæ›´è§„èŒƒ<br><br>#åˆ é™¤å½“å‰çš„lyh_db01æ•°æ®åº“<br>DROP DATABASE lyh_db01<br></code></pre></td></tr></table></figure><h2 id="å¤‡ä»½-amp-æ¢å¤æ•°æ®åº“"><a href="#å¤‡ä»½-amp-æ¢å¤æ•°æ®åº“" class="headerlink" title="å¤‡ä»½&amp;æ¢å¤æ•°æ®åº“"></a>å¤‡ä»½&amp;æ¢å¤æ•°æ®åº“</h2><ul><li><p>å¤‡ä»½æ•°æ®åº“ï¼ˆæ³¨æ„ï¼šåœ¨DOSå‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼‰</p><p>mysqldump -u ç”¨æˆ·å -på¯†ç  -B æ•°æ®åº“1 æ•°æ®åº“2 æ•°æ®åº“n &gt; æ–‡ä»¶å.sql</p><p>è‹¥æ²¡æœ‰å¡«å¯†ç ï¼Œå›è½¦åä¼šæç¤ºè¾“å…¥å¯†ç </p></li><li><p>æ¢å¤æ•°æ®åº“ï¼ˆæ³¨æ„ï¼šè¿›å…¥SQLyogå†æ‰§è¡Œï¼‰</p><p>Source æ–‡ä»¶å.sql</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#å¤‡ä»½ï¼ˆè¦åœ¨DOSä¸‹æ‰§è¡ŒmysqldumpæŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤å…¶å®åœ¨mysqlçš„å®‰è£…ç›®å½•çš„\binä¸‹ï¼‰<br>#è¿™ä¸ªå¤‡ä»½çš„æ–‡ä»¶ï¼Œå°±æ˜¯å¯¹äºçš„sqlè¯­å¥<br>mysqldump -u root -p -B lyh_db02 lyh_db03 &gt; d:\\bak.sql<br><br>#æ¢å¤æ•°æ®åº“ï¼ˆè¦åœ¨DOSä¸‹çš„Mysqlå‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼‰<br>source d:\\bak.sql<br>#å¦‚æœä¿å­˜è¯·æŠŠsqlå¤‡ä»½æ–‡ä»¶çš„ç¼–ç è®¾ç½®ä¸ºå¤‡ä»½æ—¶çš„ç¼–ç <br>#ERROR:ASCII &#x27;\0&#x27; appeared in the statementet --binary-mode to 1 if ASCII &#x27;\0&#x27; is expected. <br><br>#ç¬¬äºŒä¸ªæ¢å¤æ–¹æ³•ï¼Œç›´æ¥å°†sqlå¤‡ä»½æ–‡ä»¶çš„å†…å®¹æ”¾åˆ°æŸ¥è¯¢ç¼–è¾‘å™¨ä¸­æ‰§è¡Œ<br></code></pre></td></tr></table></figure><h2 id="å¤‡ä»½-amp-æ¢å¤æ•°æ®åº“çš„è¡¨"><a href="#å¤‡ä»½-amp-æ¢å¤æ•°æ®åº“çš„è¡¨" class="headerlink" title="å¤‡ä»½&amp;æ¢å¤æ•°æ®åº“çš„è¡¨"></a>å¤‡ä»½&amp;æ¢å¤æ•°æ®åº“çš„è¡¨</h2><ul><li><p>å¤‡ä»½æ•°æ®åº“çš„è¡¨</p><p>mysqldump -u  ç”¨æˆ·å -på¯†ç  æ•°æ®åº“ è¡¨1 è¡¨2 è¡¨n &gt; d:\\æ–‡ä»¶å.sql</p></li></ul><h2 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h2><p>å›¾å½¢åŒ–&#x2F;æŒ‡ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE table_name(<br>field1 datatype,<br>field2 datatype,<br>field3 datatype<br>)character set å­—ç¬¦é›† collate æ ¡å¯¹è§„åˆ™ engine å¼•æ“<br>fieldï¼šæŒ‡å®šåˆ—åï¼ˆå­—æ®µåï¼‰datatypeï¼šæŒ‡å®šåˆ—ç±»å‹ï¼ˆå­—æ®µç±»å‹ï¼‰<br>character setï¼šå­—ç¬¦é›†ï¼Œå¦‚ä¸æŒ‡å®šåˆ™é»˜è®¤è®¾ç½®ä¸ºæ‰€åœ¨æ•°æ®åº“çš„å­—ç¬¦é›†<br>collateï¼šæ ¡å¯¹è§„åˆ™ï¼Œå¦‚ä¸æŒ‡å®šåˆ™é»˜è®¤è®¾ç½®ä¸ºæ‰€åœ¨æ•°æ®åº“çš„æ ¡å¯¹è§„åˆ™<br>engineï¼šå¼•æ“ï¼ˆè¿™ä¸ªæ¶‰åŠå†…å®¹è¾ƒå¤šï¼Œåé¢å•ç‹¬è®²è§£ï¼‰<br></code></pre></td></tr></table></figure><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æŒ‡ä»¤åˆ›å»ºè¡¨<br>CREATE TABLE `user` (<br>id INT, <br>`name` VARCHAR(255),<br>`password` VARCHAR(255),<br>`birthday` DATE<br>)CHARACTER SET utf8 COLLATE utf8_bin ENGINE INNODB;<br></code></pre></td></tr></table></figure><h2 id="Mysql-å¸¸ç”¨æ•°æ®ç±»å‹-åˆ—ç±»å‹"><a href="#Mysql-å¸¸ç”¨æ•°æ®ç±»å‹-åˆ—ç±»å‹" class="headerlink" title="Mysql å¸¸ç”¨æ•°æ®ç±»å‹(åˆ—ç±»å‹)"></a>Mysql å¸¸ç”¨æ•°æ®ç±»å‹(åˆ—ç±»å‹)</h2> <img src="image-20221002224057336.png" alt="image-20221002224057336" style="zoom: 65%;" /> <img src="image-20221002211221900.png" alt="image-20221002211221900" style="zoom: 60%;" /><h2 id="æ•°å€¼å‹-æ•´æ•°-çš„åŸºæœ¬ä½¿ç”¨"><a href="#æ•°å€¼å‹-æ•´æ•°-çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="æ•°å€¼å‹(æ•´æ•°)çš„åŸºæœ¬ä½¿ç”¨"></a>æ•°å€¼å‹(æ•´æ•°)çš„åŸºæœ¬ä½¿ç”¨</h2> <img src="image-20221002223721569.png" alt="image-20221002223721569" style="zoom: 67%;" /><p>ä½¿ç”¨è§„èŒƒï¼šåœ¨èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é€‰æ‹©å ç”¨ç©ºé—´å°çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºæ•´å‹çš„ä½¿ç”¨<br>#ä½¿ç”¨tinyintæ¥æ¼”ç¤ºèŒƒå›´<br>#è¯´æ˜ï¼šä¸‹é¢çš„è¡¨çš„å­—ç¬¦é›†ã€æ ¡éªŒè§„åˆ™ã€å­˜å‚¨å¼•æ“ï¼Œä½¿ç”¨é»˜è®¤è®¾ç½®<br>#1. å¦‚æœæ²¡æœ‰æŒ‡å®š unsignedï¼Œåˆ™TINYINTå°±æ˜¯æœ‰ç¬¦å·çš„ -128~127<br>#2. å¦‚æœæŒ‡å®š unsignedï¼Œåˆ™TINYINTå°±æ˜¯æ— ç¬¦å·çš„ 0~255<br>CREATE TABLE t3(<br>id TINYINT);<br><br>CREATE TABLE t4(<br>id TINYINT UNSIGNED);<br><br>INSERT INTO t3 VALUES(-128);<br>INSERT INTO t3 VALUES(127);<br>SELECT * FROM t3 <br><br>INSERT INTO t4 VALUES(0);<br>INSERT INTO t4 VALUES(255);<br>SELECT * FROM t4<br></code></pre></td></tr></table></figure><h2 id="æ•°å€¼å‹-bit-çš„ä½¿ç”¨"><a href="#æ•°å€¼å‹-bit-çš„ä½¿ç”¨" class="headerlink" title="æ•°å€¼å‹(bit)çš„ä½¿ç”¨"></a>æ•°å€¼å‹(bit)çš„ä½¿ç”¨</h2><ul><li>åŸºæœ¬ä½¿ç”¨<ul><li>mysql&gt; create table t05 (num bit(8));</li><li>mysql&gt; insert into t05 (1,3);</li><li>mysql&gt; insert into t05 values (2,65);</li></ul></li><li>ç»†èŠ‚è¯´æ˜<ul><li>bit å­—æ®µæ˜¾ç¤ºæ—¶ï¼ŒæŒ‰ç…§ ä½ çš„æ–¹å¼æ˜¾ç¤º</li><li>æŸ¥è¯¢çš„æ—¶å€™ä»ç„¶å¯ä»¥ç”¨ä½¿ç”¨ æ·»åŠ çš„æ•°å€¼</li><li>å¦‚æœä¸€ä¸ªå€¼åªæœ‰ 0ã€1 å¯ä»¥è€ƒè™‘ä½¿ç”¨ bit(1)ï¼Œå¯ä»¥èŠ‚çº¦ç©ºé—´</li><li>ä½ç±»å‹ï¼šMæŒ‡å®šä½æ•°ï¼Œé»˜è®¤å€¼1ï¼ŒèŒƒå›´1-64</li><li>ä½¿ç”¨ä¸å¤š</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºbitç±»å‹ä½¿ç”¨<br>#è¯´æ˜<br>#1. bit(m) m èŒƒå›´ä¸º 1-64<br>#2. æ·»åŠ æ•°æ® èŒƒå›´ æŒ‰ç…§è®¾ç½®çš„ä½æ•°æ¥ç¡®å®š<br>#3. æ˜¾ç¤ºæŒ‰ç…§ ä½ çš„æ–¹å¼æ˜¾ç¤º<br>#4. æŸ¥è¯¢æ—¶ï¼Œä»ç„¶å¯ä»¥æŒ‰ç…§æ•°å€¼æ¥æŸ¥è¯¢<br>CREATE TABLE t05 (num BIT(8));<br>INSERT INTO t05 VALUES(1);<br>INSERT INTO t05 VALUES(3); <br>INSERT INTO t05 VALUES(255);<br>SELECT * FROM t05;<br>SELECT * FROM t05 WHERE num = 1;<br></code></pre></td></tr></table></figure><h2 id="æ•°å€¼å‹-å°æ•°-çš„åŸºæœ¬ä½¿ç”¨"><a href="#æ•°å€¼å‹-å°æ•°-çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="æ•°å€¼å‹(å°æ•°)çš„åŸºæœ¬ä½¿ç”¨"></a>æ•°å€¼å‹(å°æ•°)çš„åŸºæœ¬ä½¿ç”¨</h2><ul><li><p>FLOAT&#x2F;DOUBLE [UNSIGNED]</p><p>FLOAT å•ç²¾åº¦ï¼›DOUBLE åŒç²¾åº¦</p></li><li><p>DECIMAL[M,D] [UNSIGNED]</p><ul><li>å¯ä»¥æ”¯æŒæ›´åŠ ç²¾ç¡®çš„å°æ•°ä½ã€‚Mæ˜¯è¯¥å°æ•°ä½æ•°ï¼ˆç²¾åº¦ï¼‰çš„æ€»æ•°ï¼ŒDæ˜¯å°æ•°ç‚¹ï¼ˆæ ‡åº¦ï¼‰åé¢çš„ä½æ•°</li><li>å¦‚æœDæ˜¯0ï¼Œåˆ™å€¼æ²¡æœ‰å°æ•°ç‚¹æˆ–åˆ†æ•°éƒ¨åˆ†ã€‚</li><li>Mæœ€å¤§65ï¼ŒDæœ€å¤§30ï¼›å¦‚æœMè¢«çœç•¥ï¼Œé»˜è®¤æ˜¯10ï¼›å¦‚æœDè¢«çœç•¥ï¼Œé»˜è®¤æ˜¯0</li><li>å»ºè®®ï¼šå¦‚æœå¸Œæœ›å°æ•°çš„ç²¾åº¦é«˜ï¼Œæ¨èä½¿ç”¨ decimal</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºdecimalã€floatã€doubleçš„ä½¿ç”¨<br><br>#åˆ›å»ºè¡¨<br>CREATE TABLE t06(<br>num1 FLOAT,<br>num2 DOUBLE,<br>num3 DECIMAL(30,20));<br><br>#æ·»åŠ æ•°æ®<br>INSERT INTO t06 VALUES(88.12345678912345,88.12345678912345,88.12345678912345);<br>SELECT * FROM t06;<br><br>#decimal å¯ä»¥å­˜æ”¾å¾ˆå¤§çš„æ•°<br>CREATE TABLE t07(<br>num DECIMAL(65));<br>INSERT INTO t07 VALUES(888888888844444444444444445555555555555555111111111112222);<br>SELECT * FROM t07;<br>CREATE TABLE t08(<br>num BIGINT UNSIGNED);<br>INSERT INTO t08 VALUES(888888888844444444444444445555555555555555111111111112222);<br>#æŠ¥é”™ï¼šOut of range value for column &#x27;num&#x27; at row 1<br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²çš„åŸºæœ¬ä½¿ç”¨"><a href="#å­—ç¬¦ä¸²çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="å­—ç¬¦ä¸²çš„åŸºæœ¬ä½¿ç”¨"></a>å­—ç¬¦ä¸²çš„åŸºæœ¬ä½¿ç”¨</h2><ul><li><p>CHAR(size)</p><p>å›ºå®šé•¿åº¦å­—ç¬¦ä¸² æœ€å¤§ 255 å­—ç¬¦</p></li><li><p>VARCHAR(size)  0~65535 </p><p>å¯å˜é•¿åº¦å­—ç¬¦ä¸² æœ€å¤§ 65532 å­—èŠ‚   utf8ï¼ˆ65535&#x2F;3ï¼‰ GBKï¼ˆ65535&#x2F;2ï¼‰</p><p><strong>è¯´æ˜ï¼šutf8ç¼–ç æœ€å¤§21844å­—ç¬¦ï¼ˆ65535&#x2F;3ï¼‰ï¼Œ1-3 ä¸ªå­—èŠ‚ç”¨äºè®°å½•å¤§å°</strong></p><p><strong>utf8 ä¸­çš„ varchar(size) çš„ size &#x3D; ï¼ˆ65535-3ï¼‰&#x2F; 3 &#x3D; 21844</strong></p><p><strong>gbk ä¸­çš„ varchar(size) çš„ size &#x3D; ï¼ˆ65535-3ï¼‰&#x2F; 2 &#x3D; 32766</strong></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºå­—ç¬¦ä¸²ç±»å‹ä½¿ç”¨char varchar<br>-- å¦‚æœè¡¨çš„ç¼–ç æ˜¯ utf8 varchar(size) size = ï¼ˆ65535-3ï¼‰/3 = 21844<br>CREATE TABLE t09(<br>`name` CHAR(255));<br>CREATE TABLE t10(<br>`name` VARCHAR(21844));<br>CREATE TABLE t11(<br>`name` VARCHAR(32766)) CHARSET gbk;<br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²ä½¿ç”¨ç»†èŠ‚"><a href="#å­—ç¬¦ä¸²ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="å­—ç¬¦ä¸²ä½¿ç”¨ç»†èŠ‚"></a>å­—ç¬¦ä¸²ä½¿ç”¨ç»†èŠ‚</h2><ul><li>ç»†èŠ‚1ï¼š<ul><li>char(4)  &#x2F;&#x2F;è¿™ä¸ª4è¡¨ç¤ºå­—ç¬¦æ•°ï¼ˆæœ€å¤§255ï¼‰ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ï¼Œä¸ç®¡æ˜¯ä¸­æ–‡è¿˜æ˜¯å­—ç¬¦éƒ½æ˜¯æ”¾4ä¸ªï¼ŒæŒ‰å­—ç¬¦è®¡ç®—</li><li>varchar(4)  &#x2F;&#x2F;è¿™ä¸ª4è¡¨ç¤ºå­—ç¬¦æ•°ï¼Œä¸ç®¡æ˜¯å­—æ¯è¿˜æ˜¯ä¸­æ–‡éƒ½ä»¥å®šä¹‰å¥½çš„è¡¨çš„ç¼–ç æ¥å­˜æ”¾æ•°æ®</li></ul></li><li>ç»†èŠ‚2ï¼š<ul><li>char(4) æ˜¯å®šé•¿ï¼ˆå›ºå®šå¤§å°ï¼‰ï¼Œå³ä½¿åªå­˜å…¥ â€˜aaâ€™ï¼Œä¹Ÿä¼šå ç”¨ åˆ†é…çš„4ä¸ªå­—ç¬¦çš„ç©ºé—´</li><li>varchar(4) æ˜¯å˜é•¿ï¼ˆå˜åŒ–çš„å¤§å°ï¼‰ï¼Œå¦‚æœåªå­˜å…¥ â€˜aaâ€™ï¼Œå®é™…å ç”¨çš„ç©ºé—´å¤§å°å¹¶ä¸æ˜¯4ä¸ªå­—ç¬¦ï¼Œè€Œæ˜¯æŒ‰å®é™…å ç”¨ç©ºé—´æ¥åˆ†é…ï¼ˆè¡¥å……è¯´æ˜ï¼švarcharæœ¬èº«è¿˜éœ€è¦å ç”¨1-3ä¸ªå­—èŠ‚æ¥è®°å½•å­˜æ”¾å†…å®¹é•¿åº¦ï¼‰ï¼ˆL + 1~3å­—èŠ‚ï¼‰</li></ul></li><li>ç»†èŠ‚3ï¼š<ul><li>å¦‚æœæ•°æ®æ˜¯å®šé•¿ï¼Œæ¨èä½¿ç”¨ char ï¼Œæ¯”å¦‚md5çš„å¯†ç ã€é‚®ç¼–ã€æ‰‹æœºå·ã€èº«ä»½è¯å·ç ç­‰</li><li>å¦‚æœä¸€ä¸ªå­—æ®µçš„é•¿åº¦ä¸ç¡®å®šï¼Œæ¨èä½¿ç”¨ varchar ï¼Œæ¯”å¦‚ç•™è¨€ã€æ–‡ç« ç­‰</li><li>æŸ¥è¯¢é€Ÿåº¦ï¼šchar &gt; varchar</li></ul></li><li>ç»†èŠ‚4ï¼š<ul><li>å­˜æ”¾æ–‡æœ¬æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Text æ•°æ®ç±»å‹ï¼Œå¯ä»¥å°† TEXT åˆ—è§†ä¸º VARCHAR åˆ—ï¼Œæ³¨æ„ TEXT ä¸èƒ½æœ‰é»˜è®¤å€¼ã€‚å¤§å° 0-2^16 å­—èŠ‚ï¼›å¦‚æœå¸Œæœ›å­˜æ”¾æ›´å¤šå­—ç¬¦ï¼Œå¯ä»¥é€‰æ‹© MEDIUMTEXT 0-2^24 æˆ–è€… LONGTEXT 0-2^32</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºå­—ç¬¦ä¸²ä½¿ç”¨ç±»å‹çš„ç»†èŠ‚<br>CREATE TABLE t11(<br>`name` CHAR(4));<br><br>INSERT INTO t11 VALUES(&#x27;dzç‰›é€¼&#x27;);<br><br>SELECT * FROM t11;<br><br>CREATE TABLE t12(<br>`name` VARCHAR(4));<br><br>INSERT INTO t12 VALUES(&#x27;dzç‰›é€¼&#x27;);<br><br>SELECT * FROM t12;<br><br>#å¦‚æœvarcharä¸å¤Ÿç”¨ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨mediumtextæˆ–longtext<br>#å¦‚æœæƒ³ç®€å•ç‚¹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨text<br>CREATE TABLE t13(content TEXT,content2 MEDIUMTEXT,content3 LONGTEXT);<br>INSERT INTO t13 VALUES(&#x27;dzç‰›é€¼ç‰›é€¼&#x27;,&#x27;dzç‰›é€¼ç‰›é€¼100&#x27;,&#x27;dzç‰›é€¼ç‰›é€¼1000~&#x27;);<br>SELECT * FROM t13;<br></code></pre></td></tr></table></figure><h2 id="æ—¥æœŸç±»å‹çš„åŸºæœ¬ä½¿ç”¨"><a href="#æ—¥æœŸç±»å‹çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="æ—¥æœŸç±»å‹çš„åŸºæœ¬ä½¿ç”¨"></a>æ—¥æœŸç±»å‹çš„åŸºæœ¬ä½¿ç”¨</h2><p>ç»†èŠ‚è¯´æ˜ï¼šTimeStamp åœ¨ Inser å’Œ update æ—¶ï¼Œä¼šè‡ªåŠ¨æ›´æ–°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤ºæ—¶é—´ç›¸å…³çš„ç±»å‹<br>#åˆ›å»ºä¸€å¼ è¡¨ï¼Œdate, datetime, timestamp<br>CREATE TABLE t14(<br>birthday DATE,  -- ç”Ÿæ—¥<br>job_time DATETIME, -- å¹´æœˆæ—¥æ—¶åˆ†ç§’<br>login_time TIMESTAMP <br>NOT NULL DEFAULT CURRENT_TIMESTAMP <br>ON UPDATE CURRENT_TIMESTAMP); -- ç™»å½•æ—¶é—´,å¦‚æœå¸Œæœ›login_timeè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦é…ç½®<br><br>SELECT * FROM t14;<br><br>INSERT INTO t14(birthday,job_time) <br>VALUES(&#x27;2022-11-11&#x27;,&#x27;2022-11-11 10:10:10&#x27;);<br>-- å¦‚æœæˆ‘ä»¬æ›´æ–°äº† t14è¡¨çš„æŸæ¡è®°å½•ï¼Œlogin_timeåˆ—ä¼šè‡ªåŠ¨ä»¥å½“å‰æ—¶é—´æ›´æ–°<br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºè¡¨ç»ƒä¹ "><a href="#åˆ›å»ºè¡¨ç»ƒä¹ " class="headerlink" title="åˆ›å»ºè¡¨ç»ƒä¹ "></a>åˆ›å»ºè¡¨ç»ƒä¹ </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- sex å­—ç¬¦å‹<br>-- brithday æ—¥æœŸå‹ï¼ˆdateï¼‰<br>-- entry_date æ—¥æœŸå‹ (date)<br>-- job å­—ç¬¦å‹<br>-- Salary å°æ•°å‹<br>-- resume æ–‡æœ¬å‹<br>CREATE TABLE emp(<br>id INT,<br>`name` VARCHAR(32),<br>sex CHAR(1),<br>brithday DATE,<br>entry_date DATETIME,<br>job VARCHAR(32),<br>salary DOUBLE,<br>`resume` TEXT) CHARSET utf8 COLLATE utf8_bin ENGINE INNODB;<br>INSERT INTO `emp`<br>VALUES(100,&#x27;å°å¦–æ€ª&#x27;,&#x27;ç”·&#x27;,&#x27;2000-11-11&#x27;,<br>&#x27;2010-11-10 11:11:11&#x27;,&#x27;å·¡å±±çš„&#x27;,3000,&#x27;å¤§ç‹å«æˆ‘æ¥å·¡å±±&#x27;);<br>SELECT * FROM `emp`;<br></code></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¡¨-åŸºæœ¬ä»‹ç»"><a href="#ä¿®æ”¹è¡¨-åŸºæœ¬ä»‹ç»" class="headerlink" title="ä¿®æ”¹è¡¨-åŸºæœ¬ä»‹ç»"></a>ä¿®æ”¹è¡¨-åŸºæœ¬ä»‹ç»</h2> <img src="image-20221003095205606.png" alt="image-20221003095205606" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#ä¿®æ”¹è¡¨çš„è¯¾å ‚ç»ƒä¹ <br>CREATE TABLE emp(<br>id INT,<br>`name` VARCHAR(32),<br>sex CHAR(1),<br>brithday DATE,<br>entry_date DATETIME,<br>job VARCHAR(32),<br>salary DOUBLE,<br>`resume` TEXT) CHARSET utf8 COLLATE utf8_bin ENGINE INNODB;<br>INSERT INTO `emp`<br>VALUES(100,&#x27;å°å¦–æ€ª&#x27;,&#x27;ç”·&#x27;,&#x27;2000-11-11&#x27;,<br>&#x27;2010-11-10 11:11:11&#x27;,&#x27;å·¡å±±çš„&#x27;,3000,&#x27;å¤§ç‹å«æˆ‘æ¥å·¡å±±&#x27;);<br>SELECT * FROM `emp`;<br><br><br>-- å¢åŠ  image åˆ—ï¼Œvarchar ç±»å‹(è¦æ±‚åœ¨ resume åé¢)ã€‚<br>ALTER TABLE emp <br>ADD image VARCHAR(255)<br>NOT NULL DEFAULT &#x27;&#x27; AFTER `resume`;<br><br>-- ä¿®æ”¹ job åˆ—ï¼Œä½¿å…¶é•¿åº¦ä¸º 60ã€‚<br>ALTER TABLE emp <br>MODIFY job VARCHAR(60) NOT NULL DEFAULT &#x27;&#x27;;<br><br>-- åˆ é™¤ sex åˆ—ã€‚<br>ALTER TABLE emp <br>DROP sex;<br><br>-- è¡¨åæ”¹ä¸º employeeã€‚<br>RENAME TABLE emp TO employee;<br><br>-- ä¿®æ”¹è¡¨çš„å­—ç¬¦é›†ä¸º utf8<br>ALTER TABLE employee CHARACTER SET utf8;<br><br>-- åˆ—å name ä¿®æ”¹ä¸º user_name<br>ALTER TABLE employee CHANGE `name` `user_name` VARCHAR(64) NOT NULL DEFAULT &#x27;&#x27;;<br><br>DESC employee -- æ˜¾ç¤ºè¡¨ç»“æ„ï¼Œå¯ä»¥æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ—<br></code></pre></td></tr></table></figure><h2 id="æ•°æ®åº“-å¢åˆ æ”¹æŸ¥-è¯­å¥"><a href="#æ•°æ®åº“-å¢åˆ æ”¹æŸ¥-è¯­å¥" class="headerlink" title="æ•°æ®åº“ å¢åˆ æ”¹æŸ¥ è¯­å¥"></a>æ•°æ®åº“ å¢åˆ æ”¹æŸ¥ è¯­å¥</h2><ul><li>Insert è¯­å¥ï¼šæ·»åŠ æ•°æ®</li><li>Update è¯­å¥ï¼šæ›´æ–°æ•°æ®</li><li>Delete è¯­å¥ï¼š åˆ é™¤æ•°æ®</li><li>Select è¯­å¥ï¼šæŸ¥æ‰¾æ•°æ®</li></ul><h3 id="Insert-è¯­å¥"><a href="#Insert-è¯­å¥" class="headerlink" title="Insert è¯­å¥"></a>Insert è¯­å¥</h3><ul><li><p>ä½¿ç”¨ INSERT è¯­å¥å‘è¡¨ä¸­æ’å…¥æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO table_name [(column [, column...])]<br>values (value [, value...]);  -- value ä¸ column ä¸€ä¸€å¯¹åº”<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#ç»ƒä¹  insert è¯­å¥<br>-- åˆ›å»ºä¸€å¼ å•†å“è¡¨ goods (id int , goods_name varchar(10), price double );<br>-- æ·»åŠ  2 æ¡è®°å½•<br><br>CREATE TABLE `goods` (<br>id INT,<br>goods_name VARCHAR(10),<br>price DOUBLE);<br><br>-- æ·»åŠ æ•°æ®<br>INSERT INTO `goods`(id,goods_name,price)<br>VALUES(10,&#x27;åä¸ºæ‰‹æœº&#x27;,2000);<br>INSERT INTO `goods`(id,goods_name,price)<br>VALUES(20,&#x27;è‹¹æœæ‰‹æœº&#x27;,3000);<br>SELECT * FROM goods;<br><br></code></pre></td></tr></table></figure><ul><li><p><strong>ç»†èŠ‚è¯´æ˜</strong></p><ul><li><p>æ’å…¥çš„æ•°æ®åº”ä¸å­—æ®µçš„æ•°æ®ç±»å‹ç›¸åŒï¼ˆé™¤éèƒ½è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼‰</p><p>æ¯”å¦‚ æŠŠ â€˜abcâ€™ æ·»åŠ åˆ° int ç±»å‹ä¼šæŠ¥é”™ï¼Œä½† â€˜30â€™ å¯ä»¥æ·»åŠ åˆ° int ç±»å‹ï¼ˆè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼‰</p></li><li><p>æ•°æ®çš„é•¿åº¦åº”åœ¨åˆ—çš„è§„å®šèŒƒå›´å†…ï¼ˆä¸èƒ½å°†ä¸€ä¸ªé•¿åº¦ä¸º80çš„å­—ç¬¦ä¸²åŠ åˆ°é•¿åº¦ä¸º40çš„åˆ—ä¸­ï¼‰</p></li><li><p>åœ¨ values ä¸­åˆ—å‡ºçš„æ•°æ®ä½ç½®å¿…é¡»ä¸è¢«åŠ å…¥çš„åˆ—çš„æ’åˆ—ä½ç½®ç›¸å¯¹åº”</p></li><li><p><strong>å­—ç¬¦å’Œæ—¥æœŸå‹æ•°æ®åº”åŒ…å«åœ¨å•å¼•å·å†…</strong></p></li><li><p>åˆ—å¯ä»¥æ’å…¥ç©ºå€¼ï¼ˆå‰ææ˜¯è¯¥å­—æ®µå…è®¸ä¸ºç©ºï¼‰ï¼ˆinsert into table value(null)ï¼‰</p></li><li><p><strong>insert into tab_name (åˆ—åâ€¦) values (), (), ()  å½¢å¼å¯æ·»åŠ å¤šæ¡è®°å½•</strong></p></li><li><p><strong>å¦‚æœæ˜¯ç»™è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µæ·»åŠ æ•°æ®ï¼Œå¯ä»¥ä¸å†™å‰é¢çš„å­—æ®µåç§°</strong></p></li><li><p>é»˜è®¤å€¼çš„ä½¿ç”¨ï¼Œå½“ä¸ç»™æŸä¸ªå­—æ®µå€¼æ—¶ï¼Œå¦‚æœæœ‰é»˜è®¤å€¼å°±ä¼šæ·»åŠ è¯¥é»˜è®¤å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><p>å¦‚æœæŸä¸ªåˆ— æ²¡æœ‰æŒ‡å®š not null ï¼Œé‚£ä¹ˆå½“æ·»åŠ æ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šå€¼ï¼Œä¼šé»˜è®¤ç»™ NULL</p><p>å¦‚æœå¸Œæœ›æŒ‡å®šæŸä¸ªåˆ—çš„é»˜è®¤å€¼ï¼Œå¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶æŒ‡å®šï¼ˆå­—æ®µ ç±»å‹ NOT NULL DEFAULT é»˜è®¤å€¼ï¼‰</p></li></ul></li></ul><h3 id="update-è¯­å¥"><a href="#update-è¯­å¥" class="headerlink" title="update è¯­å¥"></a>update è¯­å¥</h3><ul><li><p>ä½¿ç”¨ update è¯­å¥ä¿®æ”¹è¡¨ä¸­æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE tb1_name<br>SET col_name1 = expr1 [, col_name2 = expr2...]<br>[WHERE where_definition]  -- å¦‚æœä¸å†™WHEREè¯­å¥ï¼Œç›¸å½“äºæŠŠè¡¨çš„æ‰€æœ‰è®°å½•å‡è¿›è¡Œä¿®æ”¹<br></code></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨ç»†èŠ‚</strong></p><ul><li>UPDATE è¯­å¥å¯ä»¥ç”¨æ–°å€¼æ›´æ–°åŸæœ‰è¡¨è¡Œä¸­çš„å„åˆ—</li><li>SET å­å¥æŒ‡ç¤ºè¦ä¿®æ”¹ å“ªäº›åˆ— å’Œ è¦ç»™äºˆå“ªäº›å€¼</li><li>WHERE å­å¥æŒ‡å®šåº”æ›´æ–°å“ªäº›è¡Œï¼Œå¦‚æœæ²¡æœ‰ WHERE è¯­å¥ï¼Œåˆ™æ›´æ–°æ‰€æœ‰è¡Œ</li><li>å¦‚æœéœ€è¦ä¿®æ”¹å¤šä¸ªå­—æ®µï¼Œå¯ä»¥é€šè¿‡ set å­—æ®µ1&#x3D;å€¼1, å­—æ®µ2&#x3D;å€¼2 â€¦ â€¦</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤º update è¯­å¥<br>-- æ¼”ç¤º update è¯­å¥<br>-- è¦æ±‚: åœ¨ä¸Šé¢åˆ›å»ºçš„ employee è¡¨ä¸­ä¿®æ”¹è¡¨ä¸­çš„çºªå½•<br>-- 1. å°†æ‰€æœ‰å‘˜å·¥è–ªæ°´ä¿®æ”¹ä¸º 5000 å…ƒã€‚[å¦‚æœæ²¡æœ‰å¸¦ where æ¡ä»¶ï¼Œä¼šä¿®æ”¹æ‰€æœ‰çš„è®°å½•ï¼Œå› æ­¤è¦å°å¿ƒ]<br>UPDATE employee SET salary = 5000  -- æŠŠè¡¨ä¸­æ‰€æœ‰è¡Œçš„salaryä¿®æ”¹ä¸º5000ï¼ˆæ…ç”¨ï¼‰<br><br>-- 2. å°†å§“åä¸º å°å¦–æ€ª çš„å‘˜å·¥è–ªæ°´ä¿®æ”¹ä¸º 3000 å…ƒ<br>UPDATE employee <br>SET salary = 3000 <br>WHERE user_name = &#x27;å°å¦–æ€ª&#x27; ;<br><br>-- 3. å°† è€å¦–æ€ª çš„è–ªæ°´åœ¨åŸæœ‰åŸºç¡€ä¸Šå¢åŠ  1000 å…ƒ<br>INSERT INTO employee<br>VALUES(200,&#x27;è€å¦–æ€ª&#x27;,&#x27;1990-11-11&#x27;,&#x27;2000-11-11 10:10:10&#x27;,&#x27;æ¶èƒŒçš„&#x27;,5000,&#x27;ç»™å¤§ç‹æ¶èƒŒ&#x27;);<br>UPDATE employee<br>SET salary = salary + 1000<br>WHERE user_name = &#x27;è€å¦–æ€ª&#x27;;<br><br>-- å¯ä»¥ä¿®æ”¹å¤šä¸ªåˆ—çš„å€¼<br>UPDATE employee<br>SET salary = salary + 1000 , job = &#x27;å‡ºä¸»æ„çš„&#x27;<br>WHERE user_name = &#x27;è€å¦–æ€ª&#x27;<br><br>SELECT * FROM employee;<br></code></pre></td></tr></table></figure><h3 id="delete-è¯­å¥"><a href="#delete-è¯­å¥" class="headerlink" title="delete è¯­å¥"></a>delete è¯­å¥</h3><ul><li><p>ä½¿ç”¨ deleteè¯­å¥åˆ é™¤è¡¨ä¸­æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">delete from tab1_name<br>[WHERE where_definition]  -- å¦‚æœä¸å†™WHERE, ä¼šæŠŠè¡¨ä¸­æ‰€æœ‰æ•°æ®åˆ é™¤<br></code></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨ç»†èŠ‚</strong></p><ul><li>å¦‚æœä¸ä½¿ç”¨ where å­å¥ï¼Œå°†åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®</li><li>delete è¯­å¥ä¸èƒ½åˆ é™¤æŸä¸€åˆ—çš„æ‰€æœ‰å€¼ï¼ˆå¯ä½¿ç”¨ update è®¾ä¸º null æˆ– â€˜â€™ï¼‰</li><li>ä½¿ç”¨ delete è¯­å¥ä»…åˆ é™¤è®°å½•ï¼Œä¸åˆ é™¤è¡¨æœ¬èº«ã€‚ å¦‚æœè¦åˆ é™¤è¡¨ï¼Œä½¿ç”¨  drop table è¡¨å</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#delete è¯­å¥æ¼”ç¤º<br><br>-- åˆ é™¤è¡¨ä¸­åç§°ä¸ºâ€™è€å¦–æ€ªâ€™çš„è®°å½•ã€‚<br>DELETE FROM employee<br>WHERE user_name = &#x27;è€å¦–æ€ª&#x27;;<br><br>-- åˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•, ä¸€å®šè¦å°å¿ƒä½¿ç”¨<br>DELETE FROM employee;<br><br>-- Delete è¯­å¥ä¸èƒ½åˆ é™¤æŸä¸€åˆ—çš„å€¼ï¼ˆå¯ä½¿ç”¨ update è®¾ä¸º null æˆ–è€… &#x27;&#x27;ï¼‰<br>UPDATE employee SET job = &#x27;&#x27; WHERE user_name = &#x27;è€å¦–æ€ª&#x27;;<br><br>-- è¦åˆ é™¤è¿™ä¸ªè¡¨<br>DROP TABLE employee;<br><br>SELECT * FROM employee;<br></code></pre></td></tr></table></figure><h3 id="select-è¯­å¥"><a href="#select-è¯­å¥" class="headerlink" title="select è¯­å¥"></a>select è¯­å¥</h3><p><strong>å†™ sql , å…ˆå†™ä¸€ä¸ªç®€å•ï¼Œç„¶ååŠ å…¥è¿‡æ»¤æ¡ä»¶â€¦</strong></p><h4 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [DISTINCT] *|&#123;column1|expression, column2|expression, ...&#125;<br>FROM table_name;<br>-- select æŒ‡å®šæŸ¥è¯¢å“ªäº›åˆ—çš„æ•°æ®<br>-- column æŒ‡å®šåˆ—å<br>-- *å· ä»£è¡¨æŸ¥è¯¢æ‰€æœ‰åˆ—<br>-- From è‡ªå®šæŸ¥è¯¢å“ªå¼ è¡¨<br>-- DISTINCT å¯é€‰ï¼ŒæŒ‡æ˜¾ç¤ºç»“æœæ—¶ï¼Œæ˜¯å¦å»æ‰é‡å¤æ•°æ®<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># select è¯­å¥ã€é‡ç‚¹ éš¾ç‚¹ã€‘<br>CREATE TABLE student(<br>id INT NOT NULL DEFAULT 1,<br>NAME VARCHAR(20) NOT NULL DEFAULT &#x27;&#x27;,<br>chinese FLOAT NOT NULL DEFAULT 0.0,<br>english FLOAT NOT NULL DEFAULT 0.0,<br>math FLOAT NOT NULL DEFAULT 0.0<br>);<br><br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(1,&#x27;éŸ©é¡ºå¹³&#x27;,89,78,90);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(2,&#x27;å¼ é£&#x27;,67,98,56);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(3,&#x27;å®‹æ±Ÿ&#x27;,87,78,77);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(4,&#x27;å…³ç¾½&#x27;,88,98,90);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(5,&#x27;èµµäº‘&#x27;,82,84,67);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(6,&#x27;æ¬§é˜³é”‹&#x27;,55,85,45);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(7,&#x27;é»„è“‰&#x27;,75,65,30);<br>INSERT INTO student(id,NAME,chinese,english,math) VALUES(8,&#x27;éŸ©ä¿¡&#x27;,45,65,99);<br><br>SELECT * FROM student;<br><br>-- æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯<br>SELECT * FROM student;<br><br>-- æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œå¯¹åº”çš„è‹±è¯­æˆç»©<br>SELECT `name`, english FROM student;<br><br>-- è¿‡æ»¤è¡¨ä¸­é‡å¤æ•°æ® distinct<br>SELECT DISTINCT english FROM student;<br><br>-- è¦æŸ¥è¯¢çš„è®°å½•ï¼Œæ¯ä¸ªå­—æ®µéƒ½ç›¸åŒï¼Œæ‰ä¼šå»é‡<br>SELECT DISTINCT `name`, english FROM student<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨è¡¨è¾¾å¼å¯¹æŸ¥è¯¢çš„åˆ—è¿›è¡Œè¿ç®—"><a href="#ä½¿ç”¨è¡¨è¾¾å¼å¯¹æŸ¥è¯¢çš„åˆ—è¿›è¡Œè¿ç®—" class="headerlink" title="ä½¿ç”¨è¡¨è¾¾å¼å¯¹æŸ¥è¯¢çš„åˆ—è¿›è¡Œè¿ç®—"></a>ä½¿ç”¨è¡¨è¾¾å¼å¯¹æŸ¥è¯¢çš„åˆ—è¿›è¡Œè¿ç®—</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [DISTINCT] *|&#123;column1|expression, column2|expression, ...&#125;<br>FROM table_name;<br></code></pre></td></tr></table></figure><h4 id="åœ¨-select-è¯­å¥ä¸­å¯ä½¿ç”¨-as-è¯­å¥ï¼ˆèµ·åˆ«åï¼‰"><a href="#åœ¨-select-è¯­å¥ä¸­å¯ä½¿ç”¨-as-è¯­å¥ï¼ˆèµ·åˆ«åï¼‰" class="headerlink" title="åœ¨ select è¯­å¥ä¸­å¯ä½¿ç”¨ as è¯­å¥ï¼ˆèµ·åˆ«åï¼‰"></a>åœ¨ select è¯­å¥ä¸­å¯ä½¿ç”¨ as è¯­å¥ï¼ˆèµ·åˆ«åï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT column_name AS åˆ«å FROM è¡¨å<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># select è¯­å¥çš„ä½¿ç”¨<br><br>-- ç»Ÿè®¡æ¯ä¸ªå­¦ç”Ÿçš„æ€»åˆ†<br>SELECT `name`, (chinese + english + math) FROM student;<br>-- åœ¨æ‰€æœ‰å­¦ç”Ÿæ€»åˆ†åŠ  10 åˆ†çš„æƒ…å†µ<br>SELECT `name`, (chinese + english + math + 10) FROM student;<br>-- ä½¿ç”¨åˆ«åè¡¨ç¤ºå­¦ç”Ÿåˆ†æ•°ã€‚<br>SELECT `name` AS &#x27;åå­—&#x27;, (chinese + english + math + 10) AS total_score FROM student;<br></code></pre></td></tr></table></figure><h4 id="åœ¨-where-å­å¥ä¸­ç»å¸¸ä½¿ç”¨çš„è¿ç®—ç¬¦"><a href="#åœ¨-where-å­å¥ä¸­ç»å¸¸ä½¿ç”¨çš„è¿ç®—ç¬¦" class="headerlink" title="åœ¨ where å­å¥ä¸­ç»å¸¸ä½¿ç”¨çš„è¿ç®—ç¬¦"></a>åœ¨ where å­å¥ä¸­ç»å¸¸ä½¿ç”¨çš„è¿ç®—ç¬¦</h4> <img src="image-20221003164355297.png" alt="image-20221003164355297" style="zoom: 60%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># select è¯­å¥çš„ä½¿ç”¨<br>-- æŸ¥è¯¢å§“åä¸ºèµµäº‘çš„å­¦ç”Ÿæˆç»©<br>SELECT * FROM student<br>WHERE `name` = &#x27;èµµäº‘&#x27;;<br>-- æŸ¥è¯¢è‹±è¯­æˆç»©å¤§äº 90 åˆ†çš„åŒå­¦<br>SELECT * FROM student<br>WHERE english &gt; 90<br>-- æŸ¥è¯¢æ€»åˆ†å¤§äº 200 åˆ†çš„æ‰€æœ‰åŒå­¦<br>SELECT * FROM student<br>WHERE (chinese + english + math) &gt; 200<br>-- æŸ¥è¯¢ math å¤§äº 60 å¹¶ä¸”(and) id å¤§äº 4 çš„å­¦ç”Ÿæˆç»©<br>SELECT * FROM student<br>WHERE math &gt; 60 AND id &gt;4<br>-- æŸ¥è¯¢è‹±è¯­æˆç»©å¤§äºè¯­æ–‡æˆç»©çš„åŒå­¦<br>SELECT * FROM student<br>WHERE english &gt; chinese<br>-- æŸ¥è¯¢æ€»åˆ†å¤§äº 200 åˆ† å¹¶ä¸” æ•°å­¦æˆç»©å°äºè¯­æ–‡æˆç»©,çš„å§“èµµçš„å­¦ç”Ÿ.<br>-- èµµ% è¡¨ç¤º åå­—ä»¥èµµå¼€å¤´çš„å°±å¯ä»¥<br>SELECT * FROM student<br>WHERE (chinese + english + math) &gt; 200 <br>AND math &lt; chinese<br>AND `name` LIKE &#x27;èµµ%&#x27;;<br>-- æŸ¥è¯¢è‹±è¯­åˆ†æ•°åœ¨ 80ï¼90 ä¹‹é—´çš„åŒå­¦ã€‚<br>SELECT * FROM student<br>WHERE english &gt;= 80 AND english &lt;=90;<br>SELECT * FROM student<br>WHERE english BETWEEN 80 AND 90;  -- butween .. and .. æ˜¯é—­åŒºé—´<br>-- æŸ¥è¯¢æ•°å­¦åˆ†æ•°ä¸º 89,90,91 çš„åŒå­¦ã€‚<br>SELECT * FROM student<br>WHERE math IN (89,90,91);<br>-- æŸ¥è¯¢æ‰€æœ‰å§“èµµçš„å­¦ç”Ÿæˆç»©ã€‚<br>SELECT * FROM student<br>WHERE `name` LIKE &#x27;èµµ%&#x27;;<br>-- æŸ¥è¯¢æ•°å­¦åˆ†&gt;80ï¼Œè¯­æ–‡åˆ†&gt;80 çš„åŒå­¦<br>SELECT * FROM student<br>WHERE math&gt;80 AND chinese&gt;80;<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-order-by-å­å¥æ’åºæŸ¥è¯¢ç»“æœ"><a href="#ä½¿ç”¨-order-by-å­å¥æ’åºæŸ¥è¯¢ç»“æœ" class="headerlink" title="ä½¿ç”¨ order by å­å¥æ’åºæŸ¥è¯¢ç»“æœ"></a>ä½¿ç”¨ order by å­å¥æ’åºæŸ¥è¯¢ç»“æœ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [DISTINCT] *|&#123;column1|expression, column2|expression, ...&#125;<br>FROM table_name;<br>[WHERE å­å¥]<br>order by column1 asc|desc, column2 asc|desc, ...<br></code></pre></td></tr></table></figure><ul><li>order by æŒ‡å®šæ’åºçš„åˆ—ï¼Œæ’åºçš„åˆ—æ—¢å¯ä»¥æ˜¯è¡¨ä¸­çš„åˆ—åï¼Œä¹Ÿå¯ä»¥æ˜¯ select è¯­å¥åæŒ‡å®šçš„åˆ«å</li><li>acs å‡åºï¼ˆé»˜è®¤ï¼‰ï¼Œdsec é™åº</li><li>order by å­å¥åº”ä½äº SELECT è¯­å¥çš„ç»“å°¾</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ¼”ç¤º order by ä½¿ç”¨<br><br>-- å¯¹æ•°å­¦æˆç»©æ’åºåè¾“å‡ºã€å‡åºã€‘ã€‚<br>SELECT * FROM student<br>ORDER BY math;<br><br>-- å¯¹æ€»åˆ†æŒ‰ä»é«˜åˆ°ä½çš„é¡ºåºè¾“å‡º [é™åº] -- ä½¿ç”¨åˆ«åæ’åº<br>SELECT `name` , (chinese + english + math)AS total_score FROM student<br>ORDER BY total_score DESC;<br><br>-- å¯¹å§“éŸ©çš„å­¦ç”Ÿæˆç»©[æ€»åˆ†]æ’åºè¾“å‡º(é™åº) where + order by<br>SELECT `name`, (chinese + english + math)AS total_score FROM student<br>WHERE `name` LIKE &#x27;éŸ©%&#x27;<br>ORDER BY total_score DESC;<br><br>-- å…ˆæŒ‰æ•°å­¦æˆç»©é™åºï¼Œå†æŒ‰è‹±è¯­æˆç»©å‡åº æ’åºåè¾“å‡º<br>SELECT * FROM student<br>ORDER BY math DESC, english ASC;<br></code></pre></td></tr></table></figure><h4 id="åˆè®¡-x2F-ç»Ÿè®¡å‡½æ•°"><a href="#åˆè®¡-x2F-ç»Ÿè®¡å‡½æ•°" class="headerlink" title="åˆè®¡&#x2F;ç»Ÿè®¡å‡½æ•°"></a>åˆè®¡&#x2F;ç»Ÿè®¡å‡½æ•°</h4><h5 id="count-è¿”å›è¡Œçš„æ€»æ•°"><a href="#count-è¿”å›è¡Œçš„æ€»æ•°" class="headerlink" title="count è¿”å›è¡Œçš„æ€»æ•°"></a>count è¿”å›è¡Œçš„æ€»æ•°</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT count(*)|count(åˆ—å) from table_name<br>[WHERE where_definition]<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># count è¿”å›è¡Œçš„æ€»æ•°<br><br>-- ç»Ÿè®¡ä¸€ä¸ªç­çº§å…±æœ‰å¤šå°‘å­¦ç”Ÿ<br>SELECT COUNT(*) FROM student;<br><br>-- ç»Ÿè®¡æ•°å­¦æˆç»©æ‰“ç¾½90çš„å­¦ç”Ÿæœ‰å¤šå°‘ä¸ª<br>SELECT COUNT(*) FROM student<br>WHERE math &gt; 90;<br><br>-- ç»Ÿè®¡æ€»åˆ†å¤§äº250çš„äººæ•°æœ‰å¤šå°‘<br>SELECT COUNT(*) FROM student<br>WHERE (math+english+chinese)&gt;250;<br><br>-- count(*) å’Œ count(åˆ—) çš„åŒºåˆ«<br>-- è§£é‡Šï¼š<br>-- count(*) è¿”å›æ»¡è¶³æ¡ä»¶çš„è®°å½•çš„è¡Œæ•°<br>-- count(åˆ—)ï¼šç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„æŸåˆ—æœ‰å¤šå°‘ä¸ªï¼Œä½†æ˜¯ä¼šæ’é™¤ ä¸ºNULLçš„æƒ…å†µ<br>CREATE TABLE t15(<br>`name` VARCHAR(20));<br>INSERT INTO t15 VALUES(&#x27;tom&#x27;);<br>INSERT INTO t15 VALUES(&#x27;jack&#x27;);<br>INSERT INTO t15 VALUES(&#x27;mary&#x27;);<br>INSERT INTO t15 VALUES(NULL);<br>SELECT * FROM t15;<br><br>SELECT COUNT(*) FROM t15;  -- 4<br>SELECT COUNT(`name`) FROM t15;  -- 3<br></code></pre></td></tr></table></figure><h5 id="sum-åˆè®¡å‡½æ•°"><a href="#sum-åˆè®¡å‡½æ•°" class="headerlink" title="sum åˆè®¡å‡½æ•°"></a>sum åˆè®¡å‡½æ•°</h5><p>SUM å‡½æ•°è¿”å›æ»¡è¶³ where æ¡ä»¶çš„è¡Œçš„å’Œï¼ˆä¸€èˆ¬ç”¨åœ¨æ•°å€¼çš„åˆ—ä¸Šï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUM(åˆ—å) &#123;, sum(åˆ—å)...&#125; from table_name<br>[WHERE where_definition]<br></code></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼š<ul><li>sum ä»…å¯¹æ•°å€¼èµ·ä½œç”¨</li><li>sum å¯¹å¤šåˆ—æ±‚å’Œæ—¶ï¼Œâ€,â€ å·ä¸èƒ½å°‘</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤º sum å‡½æ•°çš„ä½¿ç”¨<br><br>-- ç»Ÿè®¡ä¸€ä¸ªç­æ•°å­¦çš„æ€»æˆç»©<br>SELECT SUM(math) FROM student;<br><br>-- ç»Ÿè®¡ä¸€ä¸ªç­çº§è¯­æ–‡ã€è‹±è¯­ã€æ•°å­¦å„ç§‘çš„æ€»æˆç»©<br>SELECT SUM(math) AS math_total_score, SUM(english), SUM(chinese) FROM student;<br><br>-- ç»Ÿè®¡ä¸€ä¸ªç­çº§è¯­æ–‡ã€è‹±è¯­ã€æ•°å­¦çš„æˆç»©æ€»å’Œ<br>SELECT SUM(math+english+chinese) FROM student;<br><br>-- ç»Ÿè®¡ä¸€ä¸ªç­çº§è¯­æ–‡æˆç»©å¹³å‡åˆ†<br>SELECT SUM(chinese)/COUNT(*) FROM student;<br></code></pre></td></tr></table></figure><h5 id="avg-å¹³å‡å€¼"><a href="#avg-å¹³å‡å€¼" class="headerlink" title="avg å¹³å‡å€¼"></a>avg å¹³å‡å€¼</h5><p>AVG å‡½æ•°è¿”å›æ»¡è¶³ where æ¡ä»¶çš„ä¸€åˆ—çš„å¹³å‡å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT AVG(åˆ—å) &#123;, AVG(åˆ—å)...&#125; from tablename<br>[WHERE where_definition]<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ¼”ç¤º avg çš„ä½¿ç”¨<br><br>-- æ±‚ä¸€ä¸ªç­çº§æ•°å­¦å¹³å‡åˆ†<br>SELECT AVG(math) FROM student;<br><br>-- æ±‚ä¸€ä¸ªç­çº§æ€»åˆ†å¹³å‡åˆ†<br>SELECT AVG(math + english + chinese) FROM student;<br></code></pre></td></tr></table></figure><h5 id="max-x2F-min"><a href="#max-x2F-min" class="headerlink" title="max &#x2F; min"></a>max &#x2F; min</h5><p>MAX &#x2F; MIN å‡½æ•°è¿”å›æ»¡è¶³ where æ¡ä»¶çš„åˆ—çš„æœ€å¤§&#x2F;æœ€å°å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT MAX/MIN(åˆ—å) from table_name<br>[WHERE where_definition]<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ¼”ç¤º max å’Œ min çš„ä½¿ç”¨<br><br>-- æ±‚ç­çº§æœ€é«˜åˆ†å’Œæœ€ä½åˆ†ï¼ˆæ•°å€¼èŒƒå›´åœ¨ç»Ÿè®¡ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼‰<br>SELECT MAX(math + english + chinese), MIN(math + english + chinese)<br>FROM student;<br><br>-- æ±‚å‡ºç­çº§æ•°å­¦æœ€é«˜åˆ†å’Œæœ€ä½åˆ†<br>SELECT MAX(math) AS math_high_socre, MIN(math) AS math_low_socre<br>FROM student;<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-group-by-å­å¥å¯¹åˆ—è¿›è¡Œåˆ†ç»„"><a href="#ä½¿ç”¨-group-by-å­å¥å¯¹åˆ—è¿›è¡Œåˆ†ç»„" class="headerlink" title="ä½¿ç”¨ group by å­å¥å¯¹åˆ—è¿›è¡Œåˆ†ç»„"></a>ä½¿ç”¨ group by å­å¥å¯¹åˆ—è¿›è¡Œåˆ†ç»„</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT column1, column2, column3... FROM table_name<br>group by column1 [, column2 ...]<br></code></pre></td></tr></table></figure><ul><li><strong>group by ç”¨äºå¯¹æŸ¥è¯¢çš„ç»“æœåˆ†ç»„ç»Ÿè®¡</strong></li></ul><h4 id="ä½¿ç”¨-having-å­å¥å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œè¿‡æ»¤"><a href="#ä½¿ç”¨-having-å­å¥å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œè¿‡æ»¤" class="headerlink" title="ä½¿ç”¨ having å­å¥å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œè¿‡æ»¤"></a>ä½¿ç”¨ having å­å¥å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œè¿‡æ»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT column1, column2, column3...<br>FROM table<br>group by column having ... <br></code></pre></td></tr></table></figure><ul><li><strong>having å­å¥ç”¨äºé™åˆ¶åˆ†ç»„æ˜¾ç¤ºç»“æœ</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#æ¼”ç¤º group by + having çš„ä½¿ç”¨<br>CREATE TABLE dept( /*éƒ¨é—¨è¡¨*/<br>deptno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,<br>dname VARCHAR(20) NOT NULL DEFAULT &quot;&quot;,<br>loc VARCHAR(13) NOT NULL DEFAULT &quot;&quot;<br>);<br><br>INSERT INTO dept VALUES<br>(10, &#x27;ACCOUNTING&#x27;, &#x27;NEWYORK&#x27;),<br>(20, &#x27;RESEARCH&#x27;, &#x27;DALLAS&#x27;),<br>(30, &#x27;SALES&#x27;, &#x27;CHICAGO&#x27;),<br>(40, &#x27;OPERATIONS&#x27;, &#x27;BOSTON&#x27;);<br><br>SELECT * FROM dept;<br><br>-- å‘˜å·¥è¡¨<br>CREATE TABLE emp(<br>empno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0, /*ç¼–å·*/<br>ename VARCHAR(20) NOT NULL DEFAULT &quot;&quot;, /*åå­—*/<br>job VARCHAR(9) NOT NULL DEFAULT &quot;&quot;,/*å·¥ä½œ*/<br>mgr MEDIUMINT UNSIGNED ,/*ä¸Šçº§ç¼–å·*/<br>hiredate DATE NOT NULL,/*å…¥èŒæ—¶é—´*/<br>sal DECIMAL(7,2) NOT NULL,/*è–ªæ°´*/<br>comm DECIMAL(7,2) ,/*çº¢åˆ© å¥–é‡‘*/<br>deptno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0 /*éƒ¨é—¨ç¼–å·*/<br>);<br><br>-- æ·»åŠ æµ‹è¯•æ•°æ®<br>INSERT INTO emp VALUES<br>(7369, &#x27;SMITH&#x27;, &#x27;CLERK&#x27;, 7902, &#x27;1990-12-17&#x27;, 800.00,NULL , 20),<br>(7499, &#x27;ALLEN&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1991-2-20&#x27;, 1600.00, 300.00, 30),<br>(7521, &#x27;WARD&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1991-2-22&#x27;, 1250.00, 500.00, 30),<br>(7566, &#x27;JONES&#x27;, &#x27;MANAGER&#x27;, 7839, &#x27;1991-4-2&#x27;, 2975.00,NULL,20),<br>(7654, &#x27;MARTIN&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1991-9-28&#x27;,1250.00,1400.00,30),<br>(7698, &#x27;BLAKE&#x27;,&#x27;MANAGER&#x27;, 7839,&#x27;1991-5-1&#x27;, 2850.00,NULL,30),<br>(7782, &#x27;CLARK&#x27;,&#x27;MANAGER&#x27;, 7839, &#x27;1991-6-9&#x27;,2450.00,NULL,10),<br>(7788, &#x27;SCOTT&#x27;,&#x27;ANALYST&#x27;,7566, &#x27;1997-4-19&#x27;,3000.00,NULL,20),<br>(7839, &#x27;KING&#x27;,&#x27;PRESIDENT&#x27;,NULL,&#x27;1991-11-17&#x27;,5000.00,NULL,10),<br>(7844, &#x27;TURNER&#x27;, &#x27;SALESMAN&#x27;,7698, &#x27;1991-9-8&#x27;, 1500.00, NULL,30),<br>(7900, &#x27;JAMES&#x27;,&#x27;CLERK&#x27;,7698, &#x27;1991-12-3&#x27;,950.00,NULL,30),<br>(7902, &#x27;FORD&#x27;, &#x27;ANALYST&#x27;,7566,&#x27;1991-12-3&#x27;,3000.00, NULL,20),<br>(7934,&#x27;MILLER&#x27;,&#x27;CLERK&#x27;,7782,&#x27;1992-1-23&#x27;, 1300.00, NULL,10);<br><br>SELECT * FROM emp;<br><br>-- å·¥èµ„çº§åˆ«<br>#å·¥èµ„çº§åˆ«è¡¨<br>CREATE TABLE salgrade(<br>grade MEDIUMINT UNSIGNED NOT NULL DEFAULT 0, /*å·¥èµ„çº§åˆ«*/<br>losal DECIMAL(17,2) NOT NULL, /* è¯¥çº§åˆ«çš„æœ€ä½å·¥èµ„ */<br>hisal DECIMAL(17,2) NOT NULL /* è¯¥çº§åˆ«çš„æœ€é«˜å·¥èµ„*/<br>);<br>INSERT INTO salgrade VALUES (1,700,1200);<br>INSERT INTO salgrade VALUES (2,1201,1400);<br>INSERT INTO salgrade VALUES (3,1401,2000);<br>INSERT INTO salgrade VALUES (4,2001,3000);<br>INSERT INTO salgrade VALUES (5,3001,9999);<br><br>SELECT * FROM salgrade;<br>SELECT * FROM dept;<br>SELECT * FROM emp;<br><br><br># æ¼”ç¤º group by + having <br><br>-- æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å’Œæœ€é«˜å·¥èµ„<br>SELECT AVG(sal), MAX(sal), deptno<br>FROM emp <br>GROUP BY deptno;<br><br>-- æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„æ¯ç§å²—ä½çš„å¹³å‡å·¥èµ„å’Œæœ€ä½å·¥èµ„<br>-- åˆ†æï¼š<br>-- 1. æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å’Œæœ€ä½å·¥èµ„<br>-- 2. æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„æ¯ç§å²—ä½çš„å¹³å‡å·¥èµ„å’Œæœ€ä½å·¥èµ„<br>SELECT AVG(sal), MIN(sal), deptno, job<br>FROM emp <br>GROUP BY deptno, job;<br><br>-- æ˜¾ç¤ºå¹³å‡å·¥èµ„ä½äº2000çš„éƒ¨é—¨å·å’Œå®ƒçš„å¹³å‡å·¥èµ„<br>-- åˆ†æï¼š<br>-- 1. æ˜¾ç¤ºå„ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å’Œéƒ¨é—¨å·<br>SELECT AVG(sal), deptno<br>FROM emp<br>GROUP BY deptno;<br>-- 2. åœ¨1çš„ç»“æœçš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œè¿‡æ»¤ï¼Œä¿ç•™ AVG(sal)&lt;2000<br>SELECT AVG(sal), deptno<br>FROM emp<br>GROUP BY deptno<br>HAVING AVG(sal)&lt;2000;<br>-- 3.ä½¿ç”¨åˆ«åè¿›è¡Œè¿‡æ»¤<br>SELECT AVG(sal) AS avg_sal, deptno<br>FROM emp<br>GROUP BY deptno<br>HAVING avg_sal&lt;2000;<br>-- å®Œæˆ<br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°"><a href="#å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°"></a>å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°</h2> <img src="image-20221004101323640.png" alt="image-20221004101323640" style="zoom:67%;" /><ul><li><p>DUAL äºšå…ƒè¡¨ï¼Œç³»ç»Ÿè¡¨ï¼Œå¯ä»¥ä½œä¸ºæµ‹è¯•è¡¨ä½¿ç”¨</p></li><li><p><strong>æ³¨æ„ï¼šå­—ä¸²ä½ç½®ä» 1 å¼€å§‹</strong></p></li><li><p>CHARSET(str)                                           è¿”å›å­—ç¬¦ä¸²å­—ç¬¦é›†</p></li><li><p>CONCAR(string2 [,â€¦])                             è¿æ¥å­—ç¬¦ä¸²ï¼ˆå°†å¤šä¸ªåˆ—æ‹¼æ¥æˆä¸€åˆ—ï¼‰</p></li><li><p>INSTR(string, substring)                         è¿”å›substringåœ¨stringä¸­å‡ºç°çš„ä½ç½®ï¼Œæ²¡æœ‰åˆ™è¿”å›0</p></li><li><p>UCASE(string2)                                        è½¬æ¢æˆå¤§å†™</p></li><li><p>LCASE(string2)                                         è½¬æ¢æˆå°å†™</p></li><li><p>LEFT(string2, length)                               ä»string2ä¸­çš„å·¦è¾¹èµ·å–lengthä¸ªå­—ç¬¦</p></li><li><p>RIGHT(string2, length)                            ä»string2ä¸­çš„å³è¾¹èµ·å–lengthä¸ªå­—ç¬¦</p></li><li><p>LENGTH(string)                                        stringé•¿åº¦**[æŒ‰ç…§å­—èŠ‚]**</p></li><li><p>REPLACE(str, search_str,replace_str)     åœ¨strä¸­ç”¨replace_stræ›¿æ¢search_str</p></li><li><p>STRCMP(string1,string2)                         é€å­—ç¬¦æ¯”è¾ƒä¸¤å­—ç¬¦ä¸²å¤§å°</p></li><li><p>substring(str, position [, length])           ä»strçš„positionå¼€å§‹ï¼ˆä»1å¼€å§‹è®¡ç®—ï¼‰ï¼Œå–lengthä¸ªå­—ç¬¦</p></li><li><p>LTRIM(srting)        RTRIM(string)             TRIM(string)</p><p>å»é™¤å‰ç«¯ç©ºæ ¼ã€åç«¯ç©ºæ ¼ã€åŒç«¯ç©ºæ ¼</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºå­—ç¬¦ä¸²ç›¸å…³å‡½æ•°çš„ä½¿ç”¨<br>-- CHARSET(str)  è¿”å›å­—ç¬¦ä¸²å­—ç¬¦é›†<br>SELECT CHARSET(ename) FROM emp;<br><br>-- CONCAR(string2 [,...])  è¿æ¥å­—ç¬¦ä¸²<br>-- å°†å¤šä¸ªåˆ—æ‹¼æ¥æˆä¸€åˆ—<br>SELECT CONCAT(ename,&#x27; job is &#x27;,job) FROM emp<br><br>-- INSTR(string, substring)  <br>-- è¿”å›substringåœ¨stringä¸­å‡ºç°çš„ä½ç½®ï¼Œæ²¡æœ‰åˆ™è¿”å›0ï¼ˆä½ç½®ä» 1 å¼€å§‹ï¼‰<br>-- dual äºšå…ƒè¡¨ï¼Œç³»ç»Ÿè¡¨ï¼Œå¯ä»¥ä½œä¸ºæµ‹è¯•è¡¨ä½¿ç”¨<br>SELECT INSTR(&#x27;liangyinghua&#x27;, &#x27;hua&#x27;) FROM DUAL;<br><br>-- UCASE(string2)  è½¬æ¢æˆå¤§å†™<br>SELECT UCASE(ename) FROM emp;<br><br>-- LCASE(string2)  è½¬æ¢æˆå°å†™<br>SELECT LCASE(ename) FROM emp;<br><br>-- LEFT(string2, length)  ä»string2ä¸­çš„å·¦è¾¹èµ·å–lengthä¸ªå­—ç¬¦<br>-- RIGHT(string2, length)  ä»string2ä¸­çš„å³è¾¹èµ·å–lengthä¸ªå­—ç¬¦<br>SELECT LEFT(ename, 2) FROM emp;<br>SELECT RIGHT(ename, 2) FROM emp;<br><br>-- LENGTH(string)  stringé•¿åº¦[æŒ‰ç…§å­—èŠ‚]<br>SELECT LENGTH(&#x27;æ¢é¢å&#x27;) FROM emp;<br><br>-- REPLACE(str, search_str,replace_str)  åœ¨strä¸­ç”¨replace_stræ›¿æ¢search_str<br>SELECT ename, REPLACE(job,&#x27;MANAGER&#x27;,&#x27;ç»ç†&#x27;) FROM emp;<br><br>-- STRCMP(string1,string2)  é€å­—ç¬¦æ¯”è¾ƒä¸¤å­—ç¬¦ä¸²å¤§å°<br>SELECT STRCMP(&#x27;lyh&#x27;,&#x27;abc&#x27;) FROM DUAL;<br><br>-- substring(str, position [, length]) <br>-- ä»strçš„positionå¼€å§‹ï¼ˆä»1å¼€å§‹è®¡ç®—ï¼‰ï¼Œå–lengthä¸ªå­—ç¬¦<br>SELECT SUBSTRING(ename,1,2) FROM emp;<br><br>-- LTRIM(srting)  RTRIM(string)  TRIM(string)<br>-- å»é™¤å‰ç«¯ç©ºæ ¼ã€åç«¯ç©ºæ ¼ã€åŒç«¯ç©ºæ ¼<br>SELECT LTRIM(&#x27;   abc   &#x27;) FROM DUAL;<br>SELECT RTRIM(&#x27;   abc   &#x27;) FROM DUAL;<br>SELECT TRIM(&#x27;   abc   &#x27;) FROM DUAL;<br><br>SELECT CONCAT(LCASE(SUBSTRING(ename,1,1)),SUBSTRING(ename,2)) AS &#x27;new_name&#x27; FROM emp;<br></code></pre></td></tr></table></figure><h2 id="æ•°å­¦ç›¸å…³å‡½æ•°"><a href="#æ•°å­¦ç›¸å…³å‡½æ•°" class="headerlink" title="æ•°å­¦ç›¸å…³å‡½æ•°"></a>æ•°å­¦ç›¸å…³å‡½æ•°</h2><ul><li>abs(num)        ç»å¯¹å€¼</li><li>bin(decimal_number)                          åè¿›åˆ¶è½¬äºŒè¿›åˆ¶</li><li>ceiling(num2)                                        å‘ä¸Šå–æ•´ï¼Œå¾—åˆ°æ¯” num2 å¤§å¾—æœ€å°æ•´æ•°</li><li>conv(num2, form_base, to base)        è¿›åˆ¶è½¬æ¢</li><li>floor(num2)                                            å‘ä¸‹å–æ•´ï¼Œå¾—åˆ°æ¯” num2 å°å¾—æœ€å¤§æ•´æ•°</li><li>format(number, decimal_places)        ä¿ç•™å°æ•°ä½æ•°ï¼ˆå››èˆäº”å…¥ï¼‰</li><li>hex(DecimalNumber)                            è½¬åå…­è¿›åˆ¶</li><li>least(num, num2 [, â€¦])                           æ±‚æœ€å°å€¼</li><li>mod(numerator, denominator)           æ±‚ä½™</li><li>rand([seed])                                              rand([seed])  å…¶èŒƒå›´ä¸º 0 &lt;&#x3D; v &lt;&#x3D; 1.0ï¼ŒåŠ äº†seedéšæœºæ•°å°±ä¼šå›ºå®š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºæ•°å­¦ç›¸å…³å‡½æ•°<br>-- abs(num) ç»å¯¹å€¼<br>SELECT ABS(-10) FROM DUAL;<br><br>-- bin(decimal_number)   åè¿›åˆ¶è½¬äºŒè¿›åˆ¶<br>SELECT BIN(10) FROM DUAL;<br><br>-- ceiling(num2)      å‘ä¸Šå–æ•´ï¼Œå¾—åˆ°æ¯” num2 å¤§å¾—æœ€å°æ•´æ•°<br>SELECT CEILING(-1.1) FROM DUAL;<br><br>-- conv(num2, form_base, to base)  è¿›åˆ¶è½¬æ¢<br>SELECT CONV(8, 10, 2) FROM DUAL;<br><br>-- floor(num2)    å‘ä¸‹å–æ•´ï¼Œå¾—åˆ°æ¯” num2 å°å¾—æœ€å¤§æ•´æ•°<br>SELECT FLOOR(1.1) FROM DUAL;<br><br>-- format(number, decimal_places)  ä¿ç•™å°æ•°ä½æ•°(å››èˆäº”å…¥)<br>SELECT FORMAT(78.125458, 2) FROM DUAL;<br><br>-- hex(DecimalNumber)    è½¬åå…­è¿›åˆ¶<br>SELECT HEX(18) FROM DUAL;<br><br>-- least(num, num2 [, ...])     æ±‚æœ€å°å€¼<br>SELECT LEAST(0,1,-10,4) FROM DUAL;<br><br>-- mod(numerator, denominator)  æ±‚ä½™<br>SELECT MOD(10,3) FROM DUAL;<br><br>-- rand([seed])      rand([seed])  å…¶èŒƒå›´ä¸º 0 &lt;= v &lt;= 1.0<br>-- è¯´æ˜ï¼š<br>-- 1. å¦‚æœä½¿ç”¨ rand() æ¯æ¬¡ä¼šè¿”å›ä¸åŒå¾—è°æŠ€æœ¯ï¼Œåœ¨ 0 &lt;= v &lt;= 1.0<br>-- 2. å¦‚æœä½¿ç”¨ rand(seed) è¿”å›éšæœºæ•°ï¼ŒèŒƒå›´ 0 &lt;= v &lt;= 1.0<br>--    å¦‚æœ seed ä¸å˜ï¼Œè¯¥éšæœºæ•°ä¹Ÿä¸å˜<br>SELECT RAND() FROM DUAL;<br></code></pre></td></tr></table></figure><h2 id="æ—¶é—´æ—¥æœŸç›¸å…³å‡½æ•°"><a href="#æ—¶é—´æ—¥æœŸç›¸å…³å‡½æ•°" class="headerlink" title="æ—¶é—´æ—¥æœŸç›¸å…³å‡½æ•°"></a>æ—¶é—´æ—¥æœŸç›¸å…³å‡½æ•°</h2><ul><li>current_date() å½“å‰æ—¥æœŸ</li><li>current_time() å½“å‰æ—¶é—´</li><li>current_timestamp() å½“å‰æ—¶é—´æˆ³</li><li>date(datetime) è¿”å›datetimeçš„æ—¥æœŸéƒ¨åˆ†</li><li>date_add(date, interval d_value d_type) åœ¨dateä¸­åŠ ä¸Šæ—¥æœŸæˆ–äº‹ä»¶</li><li>date_sub(date, interval d_value d_type) åœ¨dateä¸Šå‡å»ä¸€ä¸ªæ—¶é—´</li><li>datediff(date1, date2) ä¸¤ä¸ªæ—¥æœŸå·®ï¼ˆç»“æœæ˜¯å¤©ï¼‰</li><li>timediff(date1, date2) ä¸¤ä¸ªæ—¶é—´å·®ï¼ˆç»“æœæ˜¯æ—¶åˆ†ç§’ï¼‰</li><li><strong>now()</strong> å½“å‰æ—¶é—´</li><li>YEAR | MONTH  | DAY | DATE(datetime) </li><li>unix_timestamp()  è¿”å›1970-01-01 åˆ°ç°åœ¨çš„ç§’æ•°</li><li>from_unixtime() å¹´æœˆæ—¥</li></ul><p><strong>ç»†èŠ‚è¯´æ˜ï¼š</strong></p><ul><li>date_add() å’Œ date_sub() ä¸­çš„ interval åé¢å¯ä»¥æ˜¯ year minute second day ç­‰</li><li>datediff(date1, date2) å¾—åˆ°çš„æ˜¯ date1 - date2 çš„å¤©æ•°ï¼Œå› æ­¤å¯ä»¥å–è´Ÿæ•°</li><li>ä¸Šé¢å‚æ•°ä¸­çš„çš„ â€˜dateâ€™ çš„æ—¥æœŸç±»å‹å¯ä»¥æ˜¯ date, datetime, timestamp</li><li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä½¿ç”¨ int æ¥ä¿å­˜ä¸€ä¸ª unix æ—¶é—´æˆ³ï¼Œç„¶åä½¿ç”¨ from_unixtime() è¿›è¡Œè½¬æ¢</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºæ—¥æœŸæ—¶é—´ç›¸å…³å‡½æ•°<br><br>--  current_date() å½“å‰æ—¥æœŸ<br>SELECT CURRENT_DATE() FROM DUAL;<br><br>--  current_time å½“å‰æ—¶é—´<br>SELECT CURRENT_TIME() FROM DUAL;<br><br>--  current_timestamp() å½“å‰æ—¶é—´æˆ³<br>SELECT CURRENT_TIMESTAMP() FROM DUAL;<br><br>-- åˆ›å»ºæµ‹è¯•è¡¨ ä¿¡æ¯è¡¨<br>CREATE TABLE mes(<br>id INT,<br>content VARCHAR(30),<br>send_time DATETIME<br>);<br><br>-- æ·»åŠ è®°å½•<br>INSERT INTO mes VALUES(1, &#x27;åŒ—äº¬æ–°é—»&#x27;, CURRENT_TIMESTAMP());<br>INSERT INTO mes VALUES(2, &#x27;ä¸Šæµ·æ–°é—»&#x27;, NOW());<br>INSERT INTO mes VALUES(3, &#x27;å¹¿å·æ–°é—»&#x27;, NOW());<br>SELECT NOW() FROM DUAL;<br>SELECT * FROM mes;<br><br>-- åº”ç”¨å®ä¾‹<br><br>-- date(datetime) è¿”å›datetimeçš„æ—¥æœŸéƒ¨åˆ†<br>-- æ˜¾ç¤ºæ‰€æœ‰æ–°é—»ä¿¡æ¯ï¼Œå‘å¸ƒæ—¥æœŸåªæ˜¾ç¤º æ—¥æœŸï¼Œä¸è¦æ˜¾ç¤ºæ—¶é—´<br>SELECT id, content, DATE(send_time) FROM mes;<br><br>-- æŸ¥è¯¢åœ¨10åˆ†é’Ÿå†…å‘å¸ƒçš„æ–°é—»<br>-- date_add(date, interval d_value d_type) åœ¨dateä¸­åŠ ä¸Šæ—¥æœŸæˆ–äº‹ä»¶<br>SELECT * <br>FROM mes<br>WHERE DATE_ADD(send_time, INTERVAL 10 MINUTE) &gt;= NOW();<br>SELECT * <br>FROM mes<br>WHERE DATE_SUB(NOW(), INTERVAL 10 MINUTE) &lt;= send_time;<br><br>-- date_sub(date, interval d_value d_type) åœ¨dateä¸Šå‡å»ä¸€ä¸ªæ—¶é—´<br><br>-- è¯·åœ¨ mysql çš„sqlè¯­å¥ä¸­æ±‚å‡º 2011-11-11 å’Œ 1990-01-01 ç›¸å·®å¤šå°‘å¤©<br>-- datediff(date1, date2) ä¸¤ä¸ªæ—¥æœŸå·®ï¼ˆç»“æœæ˜¯å¤©ï¼‰<br>SELECT DATEDIFF(&#x27;2011-11-11&#x27;, &#x27;1990-01-01&#x27;) FROM DUAL;<br>-- å¦‚æœä½ èƒ½æ´»åˆ° 80 å²ï¼Œæ±‚å‡ºä½ è¿˜èƒ½è´§å¤šå°‘å¤©<br>SELECT DATEDIFF(DATE_ADD(&#x27;2002-12-19&#x27;, INTERVAL 80 YEAR),NOW()) FROM DUAL;<br><br>-- timediff(date1, date2) ä¸¤ä¸ªæ—¶é—´å·®ï¼ˆç»“æœæ˜¯æ—¶åˆ†ç§’ï¼‰<br>SELECT TIMEDIFF(&#x27;10:11:11&#x27;,&#x27;06:10:10&#x27;) FROM DUAL;<br><br>-- now() å½“å‰æ—¶é—´<br>-- YEAR | MONTH | DATE(datetime) FROM_UNIXTIME() å¹´æœˆæ—¥<br>SELECT NOW() FROM DUAL;<br>SELECT YEAR(NOW()) FROM DUAL;<br>SELECT MONTH(NOW()) FROM DUAL;<br>SELECT DAY(NOW()) FROM DUAL;<br>SELECT MONTH(&#x27;2013-11-10&#x27;) FROM DUAL;<br><br>-- unix_timestamp()  è¿”å›1970-01-01 åˆ°ç°åœ¨çš„ç§’æ•°<br>SELECT UNIX_TIMESTAMP() FROM DUAL;<br><br>-- FROM_unixtime()  æŠŠä¸€ä¸ª unix_timestamp ç§’æ•°ï¼Œè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„æ—¥æœŸ<br>-- %Y-%m-%d %H:%i:%s æ˜¯è§„å®šå¥½çš„æ ¼å¼ï¼Œåˆ†åˆ«è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’<br>-- æ„ä¹‰ï¼šåœ¨å¼€å‘ä¸­ï¼Œå¯ä»¥å­˜æ”¾ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºä¸€ä¸ªæ—¶é—´ï¼Œé€šè¿‡ from_unixtime è½¬æ¢<br>SELECT FROM_UNIXTIME(1664855585, &#x27;%Y-%m-%d&#x27;) FROM DUAL;<br>SELECT FROM_UNIXTIME(1664855585, &#x27;%Y-%m-%d %H:%i:%s&#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure><h2 id="åŠ å¯†å’Œç³»ç»Ÿå‡½æ•°"><a href="#åŠ å¯†å’Œç³»ç»Ÿå‡½æ•°" class="headerlink" title="åŠ å¯†å’Œç³»ç»Ÿå‡½æ•°"></a>åŠ å¯†å’Œç³»ç»Ÿå‡½æ•°</h2><ul><li>user()                 æŸ¥è¯¢ç”¨æˆ·ï¼Œå¯ä»¥æŸ¥çœ‹ç™»å½•åˆ° mysql çš„æœ‰å“ªäº›ç”¨æˆ·ï¼Œä»¥åŠç™»å½•çš„ ip</li><li>database()                        æŸ¥è¯¢å½“å‰ä½¿ç”¨çš„æ•°æ®åº“åç§°</li><li>md5(str)                            ä¸ºå­—ç¬¦ä¸²ç®—å‡ºä¸€ä¸ª md5 32 çš„å­—ç¬¦ä¸²ï¼Œå¸¸ç”¨äºï¼ˆç”¨æˆ·å¯†ç ï¼‰åŠ å¯†</li><li>password(str)                  ä»åŸæ–‡å¯†ç  str è®¡ç®—å¹¶è¿”å›å¯†ç å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨äºå¯¹ mysql æ•°æ®åº“çš„ç”¨æˆ·å¯†ç åŠ å¯†</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºåŠ å¯†å‡½æ•°å’Œç³»ç»Ÿå‡½æ•°<br><br>-- user() æŸ¥è¯¢ç”¨æˆ·<br>-- å¯ä»¥æŸ¥çœ‹ç™»å½•åˆ° mysql çš„æœ‰å“ªäº›ç”¨æˆ·ï¼Œä»¥åŠç™»å½•çš„ ip<br>SELECT USER();  -- ç”¨æˆ·@IPåœ°å€<br><br>-- database() æŸ¥è¯¢å½“å‰ä½¿ç”¨çš„æ•°æ®åº“åç§°<br>SELECT DATABASE();<br><br>-- md5(str) ä¸ºå­—ç¬¦ä¸²ç®—å‡ºä¸€ä¸ª md5 32 çš„å­—ç¬¦ä¸²ï¼Œå¸¸ç”¨äºï¼ˆç”¨æˆ·å¯†ç ï¼‰åŠ å¯†<br>-- root å¯†ç æ˜¯ lyh -&gt; åŠ å¯†md5 -&gt; åœ¨æ•°æ®åº“ä¸­å­˜æ”¾çš„æ˜¯åŠ å¯†åçš„å¯†ç <br>-- ä¸ç®¡åŠ å¯†çš„å­—ç¬¦ä¸²å¤šé•¿ï¼Œæœ€ç»ˆå¾—åˆ°çš„MD5åŠ å¯†ä¸²éƒ½æ˜¯32ä½çš„<br>SELECT MD5(&#x27;lyh&#x27;) FROM DUAL;  -- 7e44b7f2b7a470c7a2bbb734b68dbe8b<br>SELECT LENGTH(MD5(&#x27;lyh&#x27;)) FROM DUAL;  -- 32<br>-- æ¼”ç¤ºç”¨æˆ·è¡¨ï¼Œå­˜æ”¾å¯†ç æ—¶ï¼Œä½¿ç”¨MD5åŠ å¯†<br>CREATE TABLE lyh_user(<br>id INT,<br>`name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;,<br>pwd CHAR(32) NOT NULL DEFAULT &#x27;&#x27;<br>);<br>INSERT INTO lyh_user<br>VALUES(100,&#x27;æ¢é¢å&#x27;,MD5(&#x27;lyh&#x27;));<br>SELECT * FROM lyh_user;<br>SELECT * <br>FROM lyh_user  -- SQLæ³¨å…¥é—®é¢˜<br>WHERE `name` = &#x27;æ¢é¢å&#x27; AND pwd = MD5(&#x27;lyh&#x27;);<br><br>-- password(str) ä»åŸæ–‡å¯†ç  str è®¡ç®—å¹¶è¿”å›å¯†ç å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨äºå¯¹ mysql æ•°æ®åº“çš„ç”¨æˆ·å¯†ç åŠ å¯†<br>SELECT PASSWORD(&#x27;lyh&#x27;) FROM DUAL;<br>-- MySQLæ•°æ®åº“çš„ç”¨æˆ·å¯†ç å°±æ˜¯ PASSWORDå‡½æ•°åŠ å¯†<br>SELECT * FROM mysql.user;<br></code></pre></td></tr></table></figure><h2 id="æµç¨‹æ§åˆ¶å‡½æ•°"><a href="#æµç¨‹æ§åˆ¶å‡½æ•°" class="headerlink" title="æµç¨‹æ§åˆ¶å‡½æ•°"></a>æµç¨‹æ§åˆ¶å‡½æ•°</h2><ul><li>if(expr1, expr2, expr3)  å¦‚æœ expr1 ä¸º trueï¼Œåˆ™è¿”å› expr2ï¼Œå¦åˆ™è¿”å› expr3</li><li>ifnull(expr1, expr2) å¦‚æœ expr1 ä¸ä¸º NULLï¼Œåˆ™è¿”å› expr1ï¼Œå¦åˆ™è¿”å› expr2</li><li>select case when expr1 then expr2 when expr3 then expr4 else expr5 end;  [ç±»ä¼¼å¤šé‡åˆ†æ”¯]</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºæµç¨‹æ§åˆ¶è¯­å¥<br><br>-- IF(expr1, expr2, expr3) å¦‚æœexpr1ä¸ºtrueï¼Œåˆ™è¿”å›expr2ï¼Œå¦åˆ™è¿”å›expr3<br>SELECT IF(TRUE,&#x27;åŒ—äº¬&#x27;,&#x27;ä¸Šæµ·&#x27;) FROM DUAL;<br>SELECT IF(FALSE,&#x27;åŒ—äº¬&#x27;,&#x27;ä¸Šæµ·&#x27;) FROM DUAL;<br><br>-- IFNULL(expr1, expr2) å¦‚æœ expr1 ä¸ä¸º NULLï¼Œåˆ™è¿”å› expr1ï¼Œå¦åˆ™è¿”å› expr2<br>SELECT IFNULL(NULL,&#x27;lyh&#x27;) FROM DUAL;<br>SELECT IFNULL(&#x27;tom&#x27;,&#x27;lyh&#x27;) FROM DUAL;<br><br>-- select case when expr1 then expr2 when expr3 then expr4 else expr5 end;  [ç±»ä¼¼å¤šé‡åˆ†æ”¯]<br>SELECT CASE <br>WHEN FALSE THEN &#x27;expr2&#x27; <br>WHEN TRUE THEN &#x27;expr4&#x27; <br>ELSE &#x27;expr5&#x27; END;<br><br># åº”ç”¨æ¡ˆä¾‹<br>-- 1. æŸ¥è¯¢ emp è¡¨, å¦‚æœ comm æ˜¯ null , åˆ™æ˜¾ç¤º 0.0<br>-- è¯´æ˜: åˆ¤æ–­æ˜¯å¦ä¸º null è¦ä½¿ç”¨ is null, åˆ¤æ–­ä¸ä¸ºç©º ä½¿ç”¨ is not null<br>SELECT ename, IF(comm IS NULL, 0.0, comm) FROM emp;<br>SELECT ename, IFNULL(comm, 0.0) FROM emp;<br><br>-- 2. å¦‚æœ emp è¡¨çš„ job æ˜¯ CLERK åˆ™æ˜¾ç¤º èŒå‘˜ï¼Œ å¦‚æœæ˜¯ MANAGER åˆ™æ˜¾ç¤ºç»ç†<br>-- å¦‚æœæ˜¯ SALESMAN åˆ™æ˜¾ç¤º é”€å”®äººå‘˜ï¼Œå…¶å®ƒæ­£å¸¸æ˜¾ç¤º<br>SELECT ename, (SELECT CASE<br>WHEN job = &#x27;CLERK&#x27; THEN &#x27;èŒå‘˜&#x27;<br>WHEN job = &#x27;MANAGER&#x27; THEN &#x27;ç»ç†&#x27;<br>WHEN job = &#x27;SALESMAN&#x27; THEN &#x27;é”€å”®äººå‘˜&#x27;<br>ELSE job END) AS &#x27;job&#x27;<br>FROM emp;<br></code></pre></td></tr></table></figure><h2 id="mysql-è¡¨æŸ¥è¯¢â€“åŠ å¼º"><a href="#mysql-è¡¨æŸ¥è¯¢â€“åŠ å¼º" class="headerlink" title="mysql è¡¨æŸ¥è¯¢â€“åŠ å¼º"></a>mysql è¡¨æŸ¥è¯¢â€“åŠ å¼º</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p><strong>mysqlè¡¨æŸ¥è¯¢ â€”â€” åŠ å¼º</strong></p><ul><li>ä½¿ç”¨ where å­å¥<ul><li>å¦‚ä½•æŸ¥æ‰¾ 1992.01.01 åå…¥èŒçš„å‘˜å·¥</li></ul></li><li>å¦‚ä½•ä½¿ç”¨ like æ“ä½œç¬¦<ul><li>%ï¼šè¡¨ç¤º 0 åˆ°å¤šä¸ªå­—ç¬¦ </li><li>_ ï¼šè¡¨ç¤ºå•ä¸ªå­—ç¬¦</li><li>å¦‚ä½•æ˜¾ç¤ºé¦–å­—ç¬¦ä¸º S çš„å‘˜å·¥å§“åå’Œå·¥èµ„</li><li>å¦‚ä½•æ˜¾ç¤ºç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºå¤§å†™ O çš„æ‰€æœ‰å‘˜å·¥çš„å§“åå’Œå·¥èµ„</li></ul></li><li>å¦‚ä½•æ˜¾ç¤ºæ²¡æœ‰ä¸Šçº§çš„é›‡å‘˜çš„æƒ…å†µ</li><li>æŸ¥è¯¢è¡¨ç»“æ„</li><li>ä½¿ç”¨ order by å­å¥<ul><li>å¦‚ä½•æŒ‰ç…§å·¥èµ„çš„ä»ä½åˆ°é«˜çš„é¡ºåºï¼Œæ˜¾ç¤ºé›‡å‘˜çš„ä¿¡æ¯</li><li>æŒ‰ç…§éƒ¨é—¨å·å‡åºé›‡å‘˜çš„å·¥èµ„é™åºæ’åˆ—ï¼Œæ˜¾ç¤ºé›‡å‘˜ä¿¡æ¯</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æŸ¥è¯¢åŠ å¼º<br><br>-- ä½¿ç”¨ where å­å¥<br>-- æŸ¥æ‰¾ 1992.01.01 åå…¥èŒçš„å‘˜å·¥<br>-- è¯´æ˜ï¼šåœ¨musqlä¸­ï¼Œæ—¥æœŸç±»å‹å¯ä»¥ç›´æ¥æ¯”è¾ƒ<br>SELECT * FROM emp<br>WHERE hiredate &gt; &#x27;1992-01-01&#x27;;<br><br>-- å¦‚ä½•ä½¿ç”¨ like æ“ä½œç¬¦(æ¨¡ç³ŠæŸ¥è¯¢)<br>-- %ï¼šè¡¨ç¤º 0 åˆ°å¤šä¸ªå­—ç¬¦ <br>-- _ï¼šè¡¨ç¤ºå•ä¸ªä»»æ„å­—ç¬¦<br>-- å¦‚ä½•æ˜¾ç¤ºé¦–å­—ç¬¦ä¸º S çš„å‘˜å·¥å§“åå’Œå·¥èµ„<br>SELECT ename, sal FROM emp<br>WHERE ename LIKE &#x27;S%&#x27;;<br>-- å¦‚ä½•æ˜¾ç¤ºç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºå¤§å†™ O çš„æ‰€æœ‰å‘˜å·¥çš„å§“åå’Œå·¥èµ„<br>SELECT ename, sal FROM emp<br>WHERE ename LIKE &#x27;__O%&#x27;;<br><br>-- å¦‚ä½•æ˜¾ç¤ºæ²¡æœ‰ä¸Šçº§çš„é›‡å‘˜çš„æƒ…å†µ<br>SELECT * FROM emp<br>WHERE mgr IS NULL;<br><br>-- æŸ¥è¯¢è¡¨ç»“æ„<br>DESC emp;<br><br>-- ä½¿ç”¨ order by å­å¥<br>-- å¦‚ä½•æŒ‰ç…§å·¥èµ„çš„ä»ä½åˆ°é«˜çš„é¡ºåºï¼Œæ˜¾ç¤ºé›‡å‘˜çš„ä¿¡æ¯<br>SELECT * FROM emp<br>ORDER BY sal;<br>-- æŒ‰ç…§éƒ¨é—¨å·å‡åºé›‡å‘˜çš„å·¥èµ„é™åºæ’åˆ—ï¼Œæ˜¾ç¤ºé›‡å‘˜ä¿¡æ¯<br>SELECT * FROM emp<br>ORDER BY deptno ASC, sal DESC;<br></code></pre></td></tr></table></figure><h3 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h3><ul><li><p>åŸºæœ¬è¯­æ³•</p><ul><li><p>select â€¦ limit start, rows</p><p>è¡¨ç¤ºä» start + 1 è¡Œå¼€å§‹å–ï¼Œå–å‡º rows è¡Œï¼Œstart ä» 0 å¼€å§‹è®¡ç®—</p></li></ul></li><li><p>æŒ‰é›‡å‘˜çš„ id å·å‡åºå–å‡ºï¼Œæ¯é¡µæ˜¾ç¤º 3 æ¡è®°å½•ï¼Œè¯·åˆ†åˆ«æ˜¾ç¤º ç¬¬ 1 é¡µï¼Œç¬¬ 2 é¡µï¼Œç¬¬ 3 é¡µ</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># åˆ†é¡µæŸ¥è¯¢<br>-- æŒ‰é›‡å‘˜çš„ id å·å‡åºå–å‡ºï¼Œæ¯é¡µæ˜¾ç¤º 3 æ¡è®°å½•ï¼Œè¯·åˆ†åˆ«æ˜¾ç¤º ç¬¬ 1 é¡µï¼Œç¬¬ 2 é¡µï¼Œç¬¬ 3 é¡µ<br><br>-- ç¬¬ 1 é¡µ<br>SELECT * FROM emp<br>ORDER BY empno<br>LIMIT 0, 3<br><br>-- ç¬¬ 2 é¡µ<br>SELECT * FROM emp<br>ORDER BY empno<br>LIMIT 3, 3<br><br>-- ç¬¬ 3 é¡µ<br>SELECT * FROM emp<br>ORDER BY empno<br>LIMIT 6, 3<br><br>-- æ¨å¯¼ä¸€ä¸ªå…¬å¼<br>-- select * from emp<br>-- order by empno<br>-- limit æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°*(ç¬¬å‡ é¡µ-1)ï¼Œæ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°<br>-- æ³¨æ„ï¼šä¸èƒ½ç›´æ¥æŠŠç®—å¼å†™åˆ°æŸ¥è¯¢è¯­å¥ä¸Š<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åˆ†ç»„å‡½æ•°å’Œåˆ†ç»„å­å¥-group-by"><a href="#ä½¿ç”¨åˆ†ç»„å‡½æ•°å’Œåˆ†ç»„å­å¥-group-by" class="headerlink" title="ä½¿ç”¨åˆ†ç»„å‡½æ•°å’Œåˆ†ç»„å­å¥ group by"></a>ä½¿ç”¨åˆ†ç»„å‡½æ•°å’Œåˆ†ç»„å­å¥ group by</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å¢å¼ºgroup byçš„ä½¿ç”¨<br><br>-- æ˜¾ç¤ºæ¯ç§å²—ä½çš„é›‡å‘˜æ€»æ•°ã€å¹³å‡å·¥èµ„<br>SELECT COUNT(*), AVG(sal), job<br>FROM emp<br>GROUP BY job;<br><br>-- æ˜¾ç¤ºé›‡å‘˜æ€»æ•°ï¼Œä»¥åŠè·å¾—è¡¥åŠ©çš„é›‡å‘˜æ•°<br>-- æ€è·¯ï¼šè·å¾—è¡¥åŠ©çš„é›‡å‘˜æ•° å°±æ˜¯ comm åˆ—ä¸ºénull<br>-- count(åˆ—)ï¼Œå¦‚æœè¯¥åˆ—çš„æŸä¸ªå€¼ä¸ºnullï¼Œæ˜¯ä¸ä¼šè¢«ç»Ÿè®¡çš„<br>SELECT COUNT(*), COUNT(comm)<br>FROM emp;<br>-- ç»Ÿè®¡æ²¡æœ‰è·å¾—è¡¥åŠ©çš„é›‡å‘˜æ•°<br>SELECT COUNT(*), COUNT(IF(comm IS NULL, 1, NULL))<br>FROM emp;<br>SELECT COUNT(*), COUNT(*)-COUNT(comm)<br>FROM emp;<br>-- SQLè¯­å¥éå¸¸çµæ´»<br><br>-- æ˜¾ç¤ºç®¡ç†è€…çš„æ€»äººæ•° <br>-- DISTINCTå»é‡<br>SELECT COUNT(DISTINCT mgr)<br>FROM emp;<br><br>-- æ˜¾ç¤ºé›‡å‘˜å·¥èµ„çš„æœ€å¤§å·®é¢<br>-- æ€è·¯ï¼šmax(sal) - min(sal)<br>SELECT MAX(sal)-MIN(sal)<br>FROM emp;<br><br>SELECT * FROM emp;<br></code></pre></td></tr></table></figure><h3 id="æ•°æ®åˆ†ç»„çš„æ€»ç»“"><a href="#æ•°æ®åˆ†ç»„çš„æ€»ç»“" class="headerlink" title="æ•°æ®åˆ†ç»„çš„æ€»ç»“"></a>æ•°æ®åˆ†ç»„çš„æ€»ç»“</h3><p>å¦‚æœ select è¯­å¥åŒæ—¶åŒ…å«æœ‰ group byï¼Œhavingï¼Œorder byï¼Œlimit</p><p><strong>é‚£ä¹ˆå®ƒä»¬çš„é¡ºåºæ˜¯ group byï¼Œhavingï¼Œorder byï¼Œlimit  ä¸èƒ½é¢ å€’é¡ºåº</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT column1, column2, column3 ...<br>FROM table_name1<br>group by column1<br>having condition1<br>order by column1<br>limit startPos, rows;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åº”ç”¨æ¡ˆä¾‹ï¼šè¯·ç»Ÿè®¡å„ä¸ªéƒ¨é—¨ group by çš„å¹³å‡å·¥èµ„ avgï¼Œ<br>-- å¹¶ä¸”æ˜¯å¤§äº 1000 çš„ havingï¼Œå¹¶ä¸”æŒ‰ç…§å¹³å‡å·¥èµ„ä»é«˜åˆ°ä½æ’åºï¼Œorder by<br>-- å–å‡ºå‰ä¸¤è¡Œè®°å½• limit 0, 2<br>SELECT deptno, AVG(sal) AS avg_sal<br>FROM emp<br>GROUP BY deptno<br>HAVING avg_sal &gt; 1000<br>ORDER BY avg_sal DESC<br>LIMIT 0,2<br></code></pre></td></tr></table></figure><h2 id="mysql-å¤šè¡¨æŸ¥è¯¢"><a href="#mysql-å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="mysql å¤šè¡¨æŸ¥è¯¢"></a>mysql å¤šè¡¨æŸ¥è¯¢</h2><p>å¤šè¡¨æŸ¥è¯¢æ˜¯æŒ‡åŸºäºä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨æŸ¥è¯¢ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒæŸ¥è¯¢å•ä¸ªè¡¨å¯èƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚</p><p><strong>è§£å†³å¤šè¡¨é—®é¢˜çš„å…³é”®å°±æ˜¯è¦å†™å‡ºæ­£ç¡®çš„è¿‡æ»¤æ¡ä»¶ WHERE</strong></p><p>æç¤ºï¼šå¤šè¡¨æŸ¥è¯¢çš„è¿‡æ»¤æ¡ä»¶ä¸èƒ½å°‘äº <strong>è¡¨çš„ä¸ªæ•° - 1</strong>ï¼Œå¦åˆ™ä¼šå‡ºç°ç¬›å¡å°”é›†</p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“åŒæ—¶æŸ¥è¯¢ä¸¤ä¸ªè¡¨ï¼ˆmå’Œnï¼‰æ—¶ï¼Œä¼šæŠŠä¸¤ä¸ªè¡¨ä¸­çš„å†…å®¹è¿›è¡Œç»„åˆï¼Œå¾—åˆ° m*n æ¡è®°å½•<br>è¿™æ ·çš„å¤šè¡¨æŸ¥è¯¢é»˜è®¤å¤„ç†è¿”å›çš„ç»“æœç§°ä¸º ç¬›å¡å°”é›†<br>è§£å†³å¤šè¡¨é—®é¢˜çš„å…³é”®å°±æ˜¯è¦å†™å‡ºæ­£ç¡®çš„è¿‡æ»¤æ¡ä»¶ WHERE<br>æç¤ºï¼šå¤šè¡¨æŸ¥è¯¢çš„è¿‡æ»¤æ¡ä»¶ä¸èƒ½å°‘äº è¡¨çš„ä¸ªæ•°-1ï¼Œå¦åˆ™ä¼šå‡ºç°ç¬›å¡å°”é›†<br>å½“éœ€è¦æŒ‡å®šæ˜¾ç¤ºæŸä¸ªè¡¨çš„å…±åŒæ‹¥æœ‰çš„åˆ—æ—¶ï¼Œéœ€è¦  è¡¨.åˆ—è¡¨</li></ul><h3 id="è‡ªè¿æ¥"><a href="#è‡ªè¿æ¥" class="headerlink" title="è‡ªè¿æ¥"></a>è‡ªè¿æ¥</h3><p>è‡ªè¿æ¥æ˜¯æŒ‡åœ¨åŒä¸€å¼ è¡¨çš„è¿æ¥æŸ¥è¯¢ï¼ˆå°†åŒä¸€å¼ è¡¨çœ‹ä½œä¸¤å¼ è¡¨ï¼‰</p><ul><li>è‡ªè¿æ¥çš„ç‰¹ç‚¹<ul><li>æŠŠåŒä¸€å¼ è¡¨å½“åšä¸¤å¼ è¡¨ä½¿ç”¨</li><li>éœ€è¦ç»™è¡¨å–åˆ«å ï¼Œ è¯­æ³•ï¼šè¡¨å è¡¨åˆ«å</li><li>åˆ—åä¸æ˜ç¡®ï¼Œå¯ä»¥æŒ‡å®šåˆ—çš„åˆ«å ï¼Œ è¯­æ³•ï¼šåˆ—å as åˆ—çš„åˆ«å</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å¤šè¡¨æŸ¥è¯¢çš„è‡ªè¿æ¥<br><br>-- æ€è€ƒé¢˜ï¼šæ˜¾ç¤ºå…¬å¸å‘˜å·¥å’Œä»–çš„ä¸Šçº§çš„åå­—<br>-- åˆ†æï¼šå‘˜å·¥åå­—åœ¨empè¡¨ï¼Œä¸Šçº§åå­—çš„åå­—ä¹Ÿåœ¨emp<br>--  å³ï¼Œå‘˜å·¥å’Œä¸Šçº§æ˜¯é€šè¿‡empè¡¨çš„mgråˆ—å…³è”çš„<br>-- è‡ªè¿æ¥çš„ç‰¹ç‚¹ å°ç»“ï¼š<br>-- 1. æŠŠåŒä¸€å¼ è¡¨å½“åšä¸¤å¼ è¡¨ä½¿ç”¨<br>-- 2. éœ€è¦ç»™è¡¨å–åˆ«åï¼šè¡¨å è¡¨åˆ«å<br>-- 3. åˆ—åä¸æ˜ç¡®ï¼Œå¯ä»¥æŒ‡å®šåˆ—çš„åˆ«åï¼šåˆ—å as åˆ—çš„åˆ«å<br>SELECT worker.ename AS &#x27;èŒå‘˜å&#x27;, boss.ename AS &#x27;ä¸Šçº§å&#x27;<br>FROM emp worker,emp boss<br>WHERE worker.mgr = boss.empno;<br><br>SELECT * FROM emp;<br></code></pre></td></tr></table></figure><h2 id="mysql-è¡¨å­æŸ¥è¯¢"><a href="#mysql-è¡¨å­æŸ¥è¯¢" class="headerlink" title="mysql è¡¨å­æŸ¥è¯¢"></a>mysql è¡¨å­æŸ¥è¯¢</h2><p>å­æŸ¥è¯¢æ˜¯æŒ‡åµŒå…¥åœ¨å…¶å®ƒsqlè¯­å¥ä¸­çš„selectè¯­å¥ï¼Œä¹Ÿå«åµŒå¥—æŸ¥è¯¢</p><h3 id="å•è¡Œå­æŸ¥è¯¢"><a href="#å•è¡Œå­æŸ¥è¯¢" class="headerlink" title="å•è¡Œå­æŸ¥è¯¢"></a>å•è¡Œå­æŸ¥è¯¢</h3><p>åªè¿”å›ä¸€è¡Œæ•°æ®çš„å­æŸ¥è¯¢è¯­å¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å­æŸ¥è¯¢çš„æ¼”ç¤º<br>-- å¦‚ä½•æ˜¾ç¤ºä¸ SMITH åŒä¸€éƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥<br>/*<br>1. å…ˆæŸ¥åˆ°SMITHçš„éƒ¨é—¨å·<br>2. æŠŠä¸Šé¢çš„selectè¯­å¥å½“åšä¸€ä¸ªå­æŸ¥è¯¢æ¥ä½¿ç”¨<br>*/<br>SELECT deptno<br>FROM emp<br>WHERE ename = &#x27;SMITH&#x27;<br>-- å•è¡Œå­æŸ¥è¯¢<br>SELECT * <br>FROM emp<br>WHERE deptno = (<br>SELECT deptno<br>FROM emp<br>WHERE ename = &#x27;SMITH&#x27;<br>)<br></code></pre></td></tr></table></figure><h3 id="å¤šè¡Œå­æŸ¥è¯¢"><a href="#å¤šè¡Œå­æŸ¥è¯¢" class="headerlink" title="å¤šè¡Œå­æŸ¥è¯¢"></a>å¤šè¡Œå­æŸ¥è¯¢</h3><p>è¿”å›å¤šè¡Œæ•°æ®çš„å­æŸ¥è¯¢ï¼ˆä½¿ç”¨å…³é”®å­— inï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å¤šè¡Œå­æŸ¥è¯¢çš„æ¼”ç¤º<br>-- å¦‚ä½•æŸ¥è¯¢å’Œéƒ¨é—¨10çš„å·¥ä½œç›¸åŒçš„é›‡å‘˜çš„<br>-- åå­—ã€å²—ä½ã€å·¥èµ„ã€éƒ¨é—¨å·ï¼Œä½†æ˜¯ä¸å«éƒ¨é—¨10è‡ªå·±çš„é›‡å‘˜<br>/*<br>1. æŸ¥è¯¢åˆ°10å·éƒ¨é—¨æœ‰å“ªäº›å·¥ä½œ<br>2. æŠŠä¸Šé¢æŸ¥è¯¢çš„ç»“æœå½“ä½œå­æŸ¥è¯¢ä½¿ç”¨<br>*/<br>SELECT DISTINCT job<br>FROM emp<br>WHERE deptno = 10<br>-- å¤šè¡Œå­æŸ¥è¯¢<br>SELECT ename, job, sal, deptno<br>FROM emp<br>WHERE job IN (<br>SELECT DISTINCT job<br>FROM emp<br>WHERE deptno = 10<br>) AND deptno != 10<br></code></pre></td></tr></table></figure><h3 id="å­æŸ¥è¯¢å½“åšä¸´æ—¶è¡¨ä½¿ç”¨"><a href="#å­æŸ¥è¯¢å½“åšä¸´æ—¶è¡¨ä½¿ç”¨" class="headerlink" title="å­æŸ¥è¯¢å½“åšä¸´æ—¶è¡¨ä½¿ç”¨"></a>å­æŸ¥è¯¢å½“åšä¸´æ—¶è¡¨ä½¿ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æŸ¥è¯¢ecshopä¸­å„ä¸ªç±»åˆ«ä¸­ï¼Œä»·æ ¼æœ€é«˜çš„å•†å“<br>-- æŸ¥è¯¢å•†å“è¡¨<br>-- å…ˆå¾—åˆ° å„ä¸ªç±»åˆ«ä¸­ï¼Œä»·æ ¼æœ€é«˜çš„å•†å“ max + group by cat_id, å½“ä½œä¸´æ—¶è¡¨<br>SELECT cat_id, MAX(shop_price)<br>FROM ecs_goods<br>GROUP BY cat_id<br>-- å­æŸ¥è¯¢å½“åšä¸´æ—¶è¡¨ä½¿ç”¨<br>SELECT goods_id, ecs_goods.cat_id, goods_name, shop_price<br>FROM(<br>SELECT cat_id, MAX(shop_price)<br>FROM ecs_goods<br>GROUP BY cat_id<br>) temp, ecs_goods<br>WHERE temp.cat_id = ecs_goods.cat_id AND<br>temp.max_price = ecs_goods.shop_price<br></code></pre></td></tr></table></figure><h3 id="all-å’Œ-any"><a href="#all-å’Œ-any" class="headerlink" title="all å’Œ any"></a>all å’Œ any</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># all å’Œ any çš„ä½¿ç”¨<br>-- è¯·æ€è€ƒ:æ˜¾ç¤ºå·¥èµ„æ¯”éƒ¨é—¨ 30 çš„æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„é«˜çš„å‘˜å·¥çš„å§“åã€å·¥èµ„å’Œéƒ¨é—¨å·<br>SELECT ename, sal, deptno<br>FROM emp<br>WHERE sal &gt; ALL(<br>SELECT sal<br>FROM emp<br>WHERE deptno = 30<br>)<br>-- æˆ–å¯ä»¥è¿™æ ·å†™<br>SELECT ename, sal, deptno<br>FROM emp<br>WHERE sal &gt; (<br>SELECT MAX(sal)<br>FROM emp<br>WHERE deptno = 30<br>)<br><br>-- è¯·æ€è€ƒ:å¦‚ä½•æ˜¾ç¤ºå·¥èµ„æ¯”éƒ¨é—¨ 30 çš„å…¶ä¸­ä¸€ä¸ªå‘˜å·¥çš„å·¥èµ„é«˜çš„å‘˜å·¥çš„å§“åã€å·¥èµ„å’Œéƒ¨é—¨å·<br>SELECT ename, sal, deptno<br>FROM emp<br>WHERE sal &gt; ANY(<br>SELECT sal<br>FROM emp<br>WHERE deptno = 30<br>)<br>-- æˆ–å¯ä»¥è¿™æ ·å†™<br>SELECT ename, sal, deptno<br>FROM emp<br>WHERE sal &gt; (<br>SELECT MIN(sal)<br>FROM emp<br>WHERE deptno = 30<br>)<br></code></pre></td></tr></table></figure><h3 id="å¤šåˆ—å­æŸ¥è¯¢"><a href="#å¤šåˆ—å­æŸ¥è¯¢" class="headerlink" title="å¤šåˆ—å­æŸ¥è¯¢"></a>å¤šåˆ—å­æŸ¥è¯¢</h3><p>å¤šåˆ—å­æŸ¥è¯¢æŒ‡çš„æ˜¯æŸ¥è¯¢è¿”å›å¤šä¸ªåˆ—æ•°æ®çš„å­æŸ¥è¯¢è¯­å¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å¤šåˆ—å­æŸ¥è¯¢<br><br>-- æŸ¥è¯¢ä¸ ALLEN çš„éƒ¨é—¨å’Œå²—ä½å®Œå…¨ç›¸åŒçš„æ‰€æœ‰é›‡å‘˜(å¹¶ä¸”ä¸å« allen æœ¬äºº)<br>-- (å­—æ®µ 1ï¼Œ å­—æ®µ 2 ...) = (select å­—æ®µ 1ï¼Œå­—æ®µ 2 from ã€‚ã€‚ã€‚ã€‚)<br>-- åˆ†æï¼š<br>-- 1. å¾—åˆ°ALLENçš„éƒ¨é—¨å’Œå²—ä½<br>SELECT deptno, job<br>FROM emp<br>WHERE ename = &#x27;ALLEN&#x27;<br>-- 2. æŠŠä¸Šé¢çš„æŸ¥è¯¢å½“ä½œå­æŸ¥è¯¢ä½¿ç”¨ï¼Œä½¿ç”¨å¤šåˆ—å­æŸ¥è¯¢çš„è¯­æ³•è¿›è¡ŒåŒ¹é…<br>SELECT * <br>FROM emp<br>WHERE (deptno, job) = (<br>SELECT deptno,job<br>FROM emp<br>WHERE ename = &#x27;ALLEN&#x27;<br>) AND ename != &#x27;ALLEN&#x27;<br></code></pre></td></tr></table></figure><h3 id="from-å­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢"><a href="#from-å­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢" class="headerlink" title="from å­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢"></a>from å­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å­æŸ¥è¯¢ç»ƒä¹ <br>-- è¯·æ€è€ƒï¼šæŸ¥æ‰¾æ¯ä¸ªéƒ¨é—¨å·¥èµ„é«˜äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„äººçš„èµ„æ–™<br>-- è¿™é‡Œè¦ç”¨åˆ°æ•°æ®æŸ¥è¯¢çš„å°æŠ€å·§ï¼ŒæŠŠä¸€ä¸ªå­æŸ¥è¯¢å½“ä½œä¸€ä¸ªä¸´æ—¶è¡¨ä½¿ç”¨<br><br>-- 1. å…ˆå¾—åˆ°æ¯ä¸ªéƒ¨é—¨çš„éƒ¨é—¨å·å’Œå¯¹äºçš„å¹³å‡å·¥èµ„<br>SELECT deptno, AVG(sal) AS avg_sal<br>FROM emp<br>GROUP BY deptno<br>-- 2. æŠŠä¸Šé¢çš„ç»“æœå½“ä½œå­æŸ¥è¯¢ï¼Œå’Œ emp è¡¨è¿›è¡Œå¤šè¡¨æŸ¥è¯¢<br>SELECT ename, sal, temp.avg_sal, emp.deptno<br>FROM emp, (<br>SELECT deptno, AVG(sal) AS avg_sal<br>FROM emp<br>GROUP BY deptno<br>) temp<br>WHERE emp.deptno = temp.deptno<br>AND emp.sal &gt; temp.avg_sal<br><br>-- æŸ¥æ‰¾æ¯ä¸ªéƒ¨é—¨å·¥èµ„æœ€é«˜çš„äººçš„è¯¦ç»†èµ„æ–™<br>SELECT ename, sal, temp.max_sal, emp.deptno<br>FROM emp, (<br>SELECT deptno, MAX(sal) AS max_sal<br>FROM emp<br>GROUP BY deptno<br>) temp<br>WHERE emp.deptno = temp.deptno<br>AND emp.sal = temp.max_sal<br><br>-- æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„ä¿¡æ¯(åŒ…æ‹¬ï¼šéƒ¨é—¨å,ç¼–å·,åœ°å€)å’Œäººå‘˜æ•°é‡,æˆ‘ä»¬ä¸€èµ·å®Œæˆã€‚<br>-- 1. éƒ¨é—¨å,ç¼–å·,åœ°å€ æ¥è‡ª dept è¡¨<br>-- 2. å„ä¸ªéƒ¨é—¨çš„äººå‘˜æ•°é‡ -&gt; æ„å»ºä¸€ä¸ªä¸´æ—¶è¡¨<br>SELECT COUNT(*), deptno<br>FROM emp<br>GROUP BY deptno<br>SELECT dname, dept.deptno, loc, tmp.per_num AS &#x27;äººæ•°&#x27;<br>FROM dept, (<br>SELECT COUNT(*) AS per_num, deptno<br>FROM emp<br>GROUP BY deptno<br>) tmp<br>WHERE tmp.deptno = dept.deptno<br>-- å¦ä¸€ç§å†™æ³• è¡¨.* è¡¨ç¤ºå°†è¯¥è¡¨æ‰€æœ‰åˆ—éƒ½æ˜¾ç¤ºå‡ºæ¥,å¯ä»¥ç®€åŒ–è¯­å¥<br>-- åœ¨å¤šè¡¨æŸ¥è¯¢ä¸­ï¼Œå½“å¤šä¸ªè¡¨çš„åˆ—ä¸é‡å¤æ—¶ï¼Œæ‰å¯ä»¥ç›´æ¥å†™åˆ—å<br>SELECT tmp.*, dname, loc<br>FROM dept, (<br>SELECT COUNT(*) AS per_num, deptno<br>FROM emp<br>GROUP BY deptno<br>) tmp<br>WHERE tmp.deptno = dept.deptno<br></code></pre></td></tr></table></figure><h2 id="è¡¨å¤åˆ¶ä¸è¡¨å»é‡"><a href="#è¡¨å¤åˆ¶ä¸è¡¨å»é‡" class="headerlink" title="è¡¨å¤åˆ¶ä¸è¡¨å»é‡"></a>è¡¨å¤åˆ¶ä¸è¡¨å»é‡</h2><p>ä¸ºäº†å¯¹æŸä¸ªsqlè¯­å¥è¿›è¡Œæ•ˆç‡æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦æµ·é‡æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ³•ä¸ºè¡¨åˆ›å»ºæµ·é‡æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># è¡¨çš„å¤åˆ¶<br>-- ä¸ºäº†å¯¹æŸä¸ªsqlè¯­å¥è¿›è¡Œæ•ˆç‡æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦æµ·é‡æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ³•ä¸ºè¡¨åˆ›å»ºæµ·é‡æ•°æ®<br>CREATE TABLE my_tab01<br>( id INT,<br> `name` VARCHAR(32),<br> sal DOUBLE,<br> job VARCHAR(32),<br> deptno INT);<br>DESC my_tab01<br>SELECT * FROM my_tab01;<br>-- æ¼”ç¤ºå¦‚ä½•è‡ªæˆ‘å¤åˆ¶<br>-- 1. å…ˆæŠŠempè¡¨çš„è®°å½•å¤åˆ¶åˆ° my_tab01<br>INSERT INTO my_tab01<br>(id, `name`, sal, job, deptno)<br>SELECT empno,ename,sal,job,deptno FROM emp;<br>-- 2. è‡ªæˆ‘å¤åˆ¶<br>INSERT INTO my_tab01<br>SELECT * FROM my_tab01;<br><br><br>-- å¦‚ä½•åˆ é™¤ä¸€å¼ è¡¨çš„é‡å¤è®°å½•<br>-- 1. å…ˆåˆ›å»ºä¸€å¼ è¡¨ my_tab02,<br>-- 2. è®© my_tab02 æœ‰é‡å¤çš„è®°å½•<br>CREATE TABLE my_tab02 LIKE emp;  -- åˆ›å»ºä¸€ä¸ªå’Œempè¡¨ä¸€æ ·ç»“æ„çš„è¡¨<br>DESC my_tab02<br>INSERT INTO my_tab02<br>SELECT * FROM emp;<br>SELECT * FROM my_tab02;<br>-- 3. å¦‚ä½•å»é‡<br>/*<br>æ€è·¯ï¼š<br>1. å…ˆåˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ my_tmp,è¯¥è¡¨çš„ç»“æ„å’Œmy_tab02ä¸€è‡´<br>2. æŠŠmy_tmpçš„è®°å½•é€šè¿‡distinctå…³é”®å­—å¤„ç†åæŠŠè®°å½•å¤åˆ¶åˆ°my_tmpè¡¨<br>3. æ¸…æ¥šåŸè¡¨ï¼ˆmy_tab02ï¼‰æ‰€æœ‰è®°å½•<br>4. æŠŠmy_tmpè¡¨çš„è®°å½•å¤åˆ¶åˆ°my_tab02<br>5. åˆ é™¤(drop)ä¸´æ—¶è¡¨<br>*/<br>CREATE TABLE my_tmp LIKE my_tab02<br>INSERT INTO my_tmp<br>SELECT DISTINCT * FROM my_tab02;<br>SELECT * FROM my_tmp;<br>DELETE FROM my_tab02;<br>INSERT INTO my_tab02<br>SELECT * FROM my_tmp;<br>DROP TABLE my_tmp;<br></code></pre></td></tr></table></figure><h2 id="åˆå¹¶æŸ¥è¯¢"><a href="#åˆå¹¶æŸ¥è¯¢" class="headerlink" title="åˆå¹¶æŸ¥è¯¢"></a>åˆå¹¶æŸ¥è¯¢</h2><p>æœ‰æ—¶åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸ºäº†åˆå¹¶å¤šä¸ª select è¯­å¥çš„ç»“æœï¼Œå¯ä»¥ä½¿ç”¨é›†åˆæ“ä½œç¬¦å· unionï¼Œunion all</p><ul><li><p>union all</p><p>è¯¥æ“ä½œç¬¦ç”¨äºå–å¾—ä¸¤ä¸ªç»“æœé›†çš„å¹¶é›†ï¼Œå½“ä½¿ç”¨è¯¥æ“ä½œç¬¦æ—¶ï¼Œä¸ä¼šå–æ¶ˆé‡å¤è¡Œ</p></li><li><p>union</p><p>è¯¥æ“ä½œç¬¦ä¸ union all ç›¸ä¼¼ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨å»æ‰ç»“æœé›†ä¸­çš„é‡å¤è¡Œ</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># åˆå¹¶æŸ¥è¯¢<br><br>SELECT ename,sal,job FROM emp WHERE sal &gt;2500<br>SELECT ename,sal,job FROM emp WHERE job = &#x27;MANAGER&#x27;<br><br>-- union all å°±æ˜¯å°†ä¸¤ä¸ªæŸ¥è¯¢ç»“æœåˆå¹¶ï¼Œä¸ä¼šå»é‡<br>SELECT ename,sal,job FROM emp WHERE sal &gt;2500<br>UNION ALL<br>SELECT ename,sal,job FROM emp WHERE job = &#x27;MANAGER&#x27;<br><br>-- union ä¸ union all ç›¸ä¼¼ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨å»æ‰ç»“æœé›†ä¸­çš„é‡å¤è¡Œ<br>SELECT ename,sal,job FROM emp WHERE sal &gt;2500<br>UNION<br>SELECT ename,sal,job FROM emp WHERE job = &#x27;MANAGER&#x27;<br></code></pre></td></tr></table></figure><h2 id="mysql-è¡¨-å¤–è¿æ¥"><a href="#mysql-è¡¨-å¤–è¿æ¥" class="headerlink" title="mysql è¡¨ å¤–è¿æ¥"></a>mysql è¡¨ å¤–è¿æ¥</h2><p><strong>ä½¿ç”¨ä¸å¤š</strong></p><ul><li><p>å·¦å¤–è¿æ¥ï¼ˆå·¦ä¾§çš„è¡¨å®Œå…¨æ˜¾ç¤ºï¼‰</p><p>select â€¦ from è¡¨1 left join è¡¨2 on æ¡ä»¶  ï¼ˆè¡¨1å°±æ˜¯å·¦è¡¨ï¼Œè¡¨2å°±æ˜¯å³è¡¨ï¼‰</p></li><li><p>å³å¤–è¿æ¥ï¼ˆå³ä¾§çš„è¡¨å®Œå…¨æ˜¾ç¤ºï¼‰</p><p>select â€¦ from è¡¨1 right join è¡¨2 on æ¡ä»¶  ï¼ˆè¡¨1å°±æ˜¯å·¦è¡¨ï¼Œè¡¨2å°±æ˜¯å³è¡¨ï¼‰</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºè¡¨stu<br>CREATE TABLE stu(<br>id INT,<br>`name` VARCHAR(32));<br>INSERT INTO stu VALUES(1,&#x27;jack&#x27;),(2,&#x27;tom&#x27;),(3,&#x27;kity&#x27;),(4,&#x27;nono&#x27;);<br>SELECT * FROM stu<br><br>-- åˆ›å»ºè¡¨exam<br>CREATE TABLE exam(<br>id INT,<br>grade INT);<br>INSERT INTO exam VALUES(1,56),(2,76),(11,8);<br>SELECT * FROM exam<br><br>-- å·¦å¤–è¿æ¥<br>-- æ˜¾ç¤ºæ‰€æœ‰äººçš„æˆç»©ï¼Œå¦‚æœæ²¡æœ‰æˆç»©å°±æ˜¾ç¤ºè¯¥äººçš„å§“åå’Œidï¼Œæˆç»©ä¸ºç©º<br>SELECT `name`,stu.id,grade<br>FROM stu LEFT JOIN exam<br>ON stu.id = exam.id;<br><br>-- å³å¤–è¿æ¥<br>-- æ˜¾ç¤ºæ‰€æœ‰æˆç»©ï¼Œå¦‚æœæ²¡æœ‰åå­—åŒ¹é…å°±æ˜¾ç¤ºç©º<br>SELECT `name`,stu.id,grade<br>FROM stu RIGHT JOIN exam<br>ON stu.id = exam.id;<br><br><br>-- åˆ—å‡ºéƒ¨é—¨åç§°å’Œè¿™äº›éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ï¼ˆåå­—å’Œå·¥ä½œï¼‰<br>-- åŒæ—¶åˆ—å‡ºé‚£äº›ï¼Œæ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨å<br>-- ä½¿ç”¨å·¦å¤–è¿æ¥å®ç°<br>SELECT * FROM dept<br>SELECT * FROM emp<br>SELECT dname,ename,job<br>FROM dept LEFT JOIN emp<br>ON dept.deptno = emp.deptno<br>-- ä½¿ç”¨å³å¤–è¿æ¥å®ç°<br>SELECT dname,ename,job<br>FROM emp RIGHT JOIN dept<br>ON dept.deptno = emp.deptno<br></code></pre></td></tr></table></figure><h2 id="mysql-çº¦æŸ"><a href="#mysql-çº¦æŸ" class="headerlink" title="mysql çº¦æŸ"></a>mysql çº¦æŸ</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p>çº¦æŸç”¨äºç¡®ä¿æ•°æ®åº“çš„æ•°æ®æ»¡è¶³ç‰¹å®šçš„å•†ä¸šè§„åˆ™</p><p>åœ¨mysqlä¸­ï¼Œçº¦æŸåŒ…æ‹¬ï¼š<strong>not null</strong>ã€<strong>unique</strong>ã€<strong>primary key</strong>ã€<strong>foreign key</strong>ã€<strong>check</strong> äº”ç§</p><h3 id="primary-key-ä¸»é”®"><a href="#primary-key-ä¸»é”®" class="headerlink" title="primary key(ä¸»é”®)"></a>primary key(ä¸»é”®)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">å­—æ®µå å­—æ®µç±»å‹ primary key<br></code></pre></td></tr></table></figure><p>ç”¨äºå”¯ä¸€æ ‡è¯†è¡¨è¡Œçš„æ•°æ®ï¼Œå½“å®šä¹‰ä¸»é”®çº¦æŸåï¼Œè¯¥åˆ—çš„å€¼ä¸èƒ½é‡å¤</p><p><strong>ç»†èŠ‚è¯´æ˜ï¼š</strong></p><ul><li>primary key çš„å€¼ä¸èƒ½é‡å¤è€Œä¸”ä¸èƒ½ä¸º null</li><li>ä¸€å¼ è¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†å¯ä»¥æ—¶å¤åˆä¸»é”®</li><li>ä¸»é”®çš„æŒ‡å®šæ–¹å¼ æœ‰ä¸¤ç§<ul><li>ç›´æ¥åœ¨å­—æ®µååæŒ‡å®šï¼šå­—æ®µå primary key</li><li>åœ¨è¡¨å®šä¹‰æœ€åå†™ primary key(åˆ—å);</li></ul></li><li>ä½¿ç”¨descè¡¨åï¼Œå¯ä»¥çœ‹åˆ° primary key çš„æƒ…å†µ</li><li>æé†’ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¯ä¸ªè¡¨å¾€å¾€éƒ½ä¼šè®¾è®¡ä¸€ä¸ªä¸»é”®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># ä¸»é”®ä½¿ç”¨<br><br>CREATE TABLE t17(<br>id INT PRIMARY KEY,<br>`name` VARCHAR(32),<br>email VARCHAR(32));<br><br>SELECT * FROM t17<br><br>INSERT INTO t17<br>VALUES(1,&#x27;jack&#x27;,&#x27;jack@sohu.com&#x27;);<br>INSERT INTO t17<br>VALUES(2,&#x27;tom&#x27;,&#x27;tom@sohu.com&#x27;);<br><br>-- primary key çš„å€¼ä¸èƒ½é‡å¤è€Œä¸”ä¸èƒ½ä¸º null<br>INSERT INTO t17<br>VALUES(1,&#x27;lyh&#x27;,&#x27;lyh@sohu.com&#x27;);<br>INSERT INTO t17<br>VALUES(NULL,&#x27;lyh&#x27;,&#x27;lyh@sohu.com&#x27;);<br><br>-- ä¸€å¼ è¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†å¯ä»¥æ—¶å¤åˆä¸»é”®<br>-- é”™è¯¯çš„<br>CREATE TABLE t18(<br>id INT PRIMARY KEY,<br>`name` VARCHAR(32) PRIMARY KEY,<br>email VARCHAR(32));<br>-- å¤åˆä¸»é”®ï¼ˆid å’Œ name åšå‡ºå¤åˆä¸»é”®ï¼‰<br>-- åªæœ‰å¤åˆå†…å®¹éƒ½ç›¸åŒæ—¶æ‰åˆ¤å®šç›¸åŒ<br>CREATE TABLE t18(<br>id INT,<br>`name` VARCHAR(32),<br>email VARCHAR(32),<br>PRIMARY KEY(id,`name`) -- å¤åˆä¸»é”®<br>);<br><br>-- ä¸»é”®çš„æŒ‡å®šæ–¹å¼ æœ‰ä¸¤ç§<br>-- ç›´æ¥åœ¨å­—æ®µååæŒ‡å®šï¼šå­—æ®µå primary key<br>-- åœ¨è¡¨å®šä¹‰æœ€åå†™ primary key(åˆ—å);<br>CREATE TABLE t19(<br>id INT PRIMARY KEY  -- ä¸»é”®<br>`name` VARCHAR(32),<br>email VARCHAR(32),<br>);<br>CREATE TABLE t19(<br>id INT,<br>`name` VARCHAR(32),<br>email VARCHAR(32),<br>PRIMARY KEY(id) -- ä¸»é”®<br>);<br><br>-- ä½¿ç”¨ desc è¡¨åï¼Œå¯ä»¥çœ‹åˆ° primary key çš„æƒ…å†µ<br>DESC t18<br>DESC t19<br></code></pre></td></tr></table></figure><h3 id="not-null-éç©º"><a href="#not-null-éç©º" class="headerlink" title="not null(éç©º)"></a>not null(éç©º)</h3><p>å¦‚æœåœ¨åˆ—ä¸Šå®šä¹‰äº† not nullï¼Œé‚£ä¹ˆå½“æ’å…¥æ•°æ®æ—¶ï¼Œå¿…é¡»ä¸ºåˆ—æä¾›æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">å­—æ®µå å­—æ®µç±»å‹ not null<br></code></pre></td></tr></table></figure><h3 id="unique-å”¯ä¸€"><a href="#unique-å”¯ä¸€" class="headerlink" title="unique(å”¯ä¸€)"></a>unique(å”¯ä¸€)</h3><p>å½“å®šä¹‰äº†å”¯ä¸€çº¦æŸåï¼Œè¯¥åˆ—çš„å€¼æ˜¯ä¸èƒ½é‡å¤çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">å­—æ®µå å­—æ®µç±»å‹ unique<br></code></pre></td></tr></table></figure><p><strong>ç»†èŠ‚è¯´æ˜ï¼š</strong></p><ul><li>å¦‚æœæ²¡æœ‰æŒ‡å®š not nullï¼Œåˆ™ unique å­—æ®µå¯ä»¥æœ‰å¤šä¸ª null</li><li>ä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ª unique å­—æ®µ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># unique çš„ä½¿ç”¨<br> CREATE TABLE t21(<br>id INT UNIQUE, -- è¡¨ç¤ºidåˆ—çš„å€¼æ˜¯ä¸å¯ä»¥é‡å¤çš„<br>`name` VARCHAR(32),<br>email VARCHAR(32)<br>);<br>SELECT * FROM t21<br><br>INSERT INTO t21<br>VALUES(1,&#x27;jack&#x27;,&#x27;jack@sohu.com&#x27;);<br>INSERT INTO t21<br>VALUES(1,&#x27;tom&#x27;,&#x27;tom@sohu.com&#x27;);<br><br>-- å¦‚æœæ²¡æœ‰æŒ‡å®šnot nullï¼Œåˆ™ uniqueå­—æ®µå¯ä»¥æœ‰å¤šä¸ªnull<br>-- å¦‚æœä¸€ä¸ªåˆ—ï¼ˆå­—æ®µï¼‰ï¼Œæ˜¯ unique not nullï¼Œä½¿ç”¨æ•ˆæœç±»ä¼¼ä¸»é”®<br>INSERT INTO t21<br>VALUES(NULL,&#x27;tom&#x27;,&#x27;tom@sohu.com&#x27;);<br><br>-- ä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ª unique å­—æ®µ<br>CREATE TABLE t22(<br>id INT UNIQUE, -- è¡¨ç¤ºidåˆ—çš„å€¼æ˜¯ä¸å¯ä»¥é‡å¤çš„<br>`name` VARCHAR(32) UNIQUE, -- è¡¨ç¤ºnameåˆ—çš„å€¼æ˜¯ä¸å¯ä»¥é‡å¤çš„<br>email VARCHAR(32)<br>);<br>DESC t22<br></code></pre></td></tr></table></figure><h3 id="foreign-key-å¤–é”®"><a href="#foreign-key-å¤–é”®" class="headerlink" title="foreign key(å¤–é”®)"></a>foreign key(å¤–é”®)</h3><p>ç”¨äºå®šä¹‰ä¸»è¡¨å’Œä»è¡¨ä¹‹é—´çš„å…³ç³»ï¼šå¤–é”®çº¦æŸè¦å®šä¹‰åœ¨ä»è¡¨ä¸Šï¼Œä¸»è¡¨åˆ™å¿…é¡»å…·æœ‰ä¸»é”®çº¦æŸæˆ–æ˜¯uniqueçº¦æŸã€‚</p><p>å½“å®šä¹‰å¤–é”®çº¦æŸåï¼Œè¦æ±‚å¤–é”®åˆ—æ•°æ®å¿…é¡»åœ¨ä¸»è¡¨çš„ä¸»é”®åˆ—å­˜åœ¨æˆ–æ˜¯ä¸ºnull</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">foreign key (æœ¬è¡¨å­—æ®µå) references<br>ä¸»è¡¨å(ä¸»é”®åæˆ–uniqueå­—æ®µå)<br></code></pre></td></tr></table></figure><p>ç»†èŠ‚è¯´æ˜ï¼š</p><ul><li>å¤–é”®æŒ‡å‘çš„è¡¨çš„å­—æ®µï¼Œè¦æ±‚æ˜¯ primary key æˆ–è€…æ˜¯ unique</li><li>è¡¨çš„ç±»å‹æ˜¯ innodb æ‰æ”¯æŒå¤–é”®</li><li>å¤–é”®å­—æ®µçš„ç±»å‹è¦å’Œä¸»é”®å­—æ®µçš„ç±»å‹ä¸€è‡´ï¼ˆé•¿åº¦å¯ä»¥ä¸åŒï¼‰</li><li>å¤–é”®å­—æ®µçš„å€¼ï¼Œå¿…é¡»åœ¨ä¸»é”®å­—æ®µä¸­å‡ºç°è¿‡ï¼Œæˆ–è€…ä¸ºnullï¼ˆå¦‚æœå¯ä»¥ä¸ºnullçš„è¯ï¼‰</li><li>ä¸€æ—¦å»ºç«‹ä¸»å¤–é”®çš„å…³ç³»ï¼Œæ•°æ®å°±ä¸èƒ½éšæ„åˆ é™¤äº†ï¼ˆéœ€è¦å…ˆæŠŠå¤–é”®ç›¸å…³å†…å®¹å…ˆåˆ é™¤æ‰èƒ½åˆ é™¤ç›¸åº”çš„ä¸»é”®å†…å®¹ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å¤–é”®æ¼”ç¤º<br><br>-- åˆ›å»º ä¸»è¡¨ my_class<br>CREATE TABLE my_class(<br>id INT PRIMARY KEY,  -- ç­çº§ç¼–å·<br>`name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;<br>);<br><br>-- åˆ›å»º ä»è¡¨ my_stu<br>CREATE TABLE my_stu(<br>id INT PRIMARY KEY, -- å­¦ç”Ÿç¼–å·<br>`name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;,<br>class_id INT,  -- å­¦ç”Ÿæ‰€åœ¨ç­çº§çš„ç¼–å· å¤–é”®<br>-- ä¸‹é¢æŒ‡å®šå¤–é”®å…³ç³»<br>FOREIGN KEY (class_id) REFERENCES my_class(id)<br>);<br><br>-- æµ‹è¯•æ•°æ®<br>INSERT INTO my_class<br>VALUES(100,&#x27;java&#x27;),(200,&#x27;web&#x27;);<br>SELECT * FROM my_class;<br><br>INSERT INTO my_stu<br>VALUES(1,&#x27;tom&#x27;,100);<br>INSERT INTO my_stu<br>VALUES(2,&#x27;jack&#x27;,200);<br>INSERT INTO my_stu<br>VALUES(3,&#x27;lyh&#x27;,300);  -- è¯¥è¯­å¥ä¼šé”™è¯¯ï¼Œå› ä¸º300ç­çº§ä¸å­˜åœ¨<br>INSERT INTO my_stu<br>VALUES(4,&#x27;marry&#x27;,NULL);  -- å¯ä»¥ä¸ºç©ºï¼ˆå¦‚æœè¯¥åˆ—å…è®¸ä¸ºç©ºï¼‰<br>SELECT * FROM my_stu;<br><br>-- ä¸€æ—¦å»ºç«‹ä¸»å¤–é”®çš„å…³ç³»ï¼Œæ•°æ®å°±ä¸èƒ½éšæ„åˆ é™¤äº†<br>DELETE FROM my_class<br>WHERE id = 100<br></code></pre></td></tr></table></figure><h3 id="check"><a href="#check" class="headerlink" title="check"></a>check</h3><p>ç”¨äºå¼ºåˆ¶è¡Œæ•°æ®å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼Œå‡å®šåœ¨ sal åˆ—ä¸Šå®šä¹‰äº† check çº¦æŸï¼Œå¹¶è¦æ±‚ sal åˆ—å€¼åœ¨ 1000 ~ 2000 ä¹‹é—´ï¼Œå¦‚æœä¸åœ¨ 1000 ~ 2000 ä¹‹é—´å°±ä¼šæç¤ºé”™è¯¯ã€‚</p><p>æç¤ºï¼šoracle å’Œ sql server å‡æ”¯æŒ checkï¼Œä½†æ˜¯ MySQL5.7 ç›®å‰è¿˜ä¸æ”¯æŒ checkï¼Œåªæ˜¯åšè¯­æ³•æ ¡éªŒï¼Œä½†ä¸ä¼šç”Ÿæ•ˆ</p><p>â€‹åœ¨mysqlä¸­å®ç°checkçš„åŠŸèƒ½ï¼Œä¸€èˆ¬æ˜¯åœ¨ç¨‹åºä¸­æ§åˆ¶ï¼Œæˆ–è€…é€šè¿‡è§¦å‘å™¨å®Œæˆã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">åˆ—å ç±»å‹ check (checkæ¡ä»¶)<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºcheckçš„ä½¿ç”¨<br><br>-- MySQL5.7 ç›®å‰è¿˜ä¸æ”¯æŒ checkï¼Œåªæ˜¯åšè¯­æ³•æ ¡éªŒï¼Œä½†ä¸ä¼šç”Ÿæ•ˆ<br>CREATE TABLE t23(<br>id INT PRIMARY KEY,<br>`name` VARCHAR(32),<br>sex VARCHAR(6) CHECK (sex IN(&#x27;man&#x27;,&#x27;woman&#x27;)),<br>sal DOUBLE CHECK (sal&gt;1000 AND sal&lt;2000)<br>);<br>INSERT INTO t23<br>VALUES(1,&#x27;jack&#x27;,&#x27;mid&#x27;,100);<br>SELECT * FROM t23<br></code></pre></td></tr></table></figure><h2 id="è‡ªå¢é•¿"><a href="#è‡ªå¢é•¿" class="headerlink" title="è‡ªå¢é•¿"></a>è‡ªå¢é•¿</h2><p>åœ¨æŸå¼ è¡¨ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªåˆ—ï¼Œåœ¨æ·»åŠ è®°å½•æ—¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¢é•¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">å­—æ®µå æ•´å‹ primary key auto_increment<br></code></pre></td></tr></table></figure><p>æ·»åŠ è‡ªå¢é•¿çš„å­—æ®µæ–¹å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">insert into xxx (å­—æ®µ1, å­—æ®µ2...) values (null, &#x27;å€¼&#x27;...);<br>insert into xxx (å­—æ®µ2...) values (&#x27;å€¼1&#x27;, &#x27;å€¼2&#x27;...);<br>insert into xxx values(null, &#x27;å€¼1&#x27;, ...)<br></code></pre></td></tr></table></figure><p><strong>ç»†èŠ‚è¯´æ˜ï¼š</strong></p><ul><li><p>ä¸€èˆ¬æ¥è¯´è‡ªå¢é•¿æ˜¯å’Œ primary key é…åˆä½¿ç”¨çš„</p></li><li><p>è‡ªå¢é•¿ä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼ˆä½†æ˜¯éœ€è¦é…åˆä¸€ä¸ª uniqueï¼‰</p></li><li><p>è‡ªå¢é•¿ä¿®é¥°çš„å­—æ®µæ˜¯ä¸ºæ•´æ•°å‹çš„ï¼ˆè™½ç„¶å°æ•°ä¹Ÿå¯ä»¥ä½†æ˜¯å¾ˆå°‘è¿™æ ·ä½¿ç”¨ï¼‰</p></li><li><p>è‡ªå¢é•¿é»˜è®¤ä» 1 å¼€å§‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table è¡¨å auto_increment = æ–°çš„å¼€å§‹å€¼;<br></code></pre></td></tr></table></figure></li><li><p>å¦‚æœåœ¨æ·»åŠ æ•°æ®æ—¶ï¼Œç»™è‡ªå¢é•¿å­—æ®µï¼ˆåˆ—ï¼‰æŒ‡å®šçš„æœ‰å€¼ï¼Œåˆ™ä»¥æŒ‡å®šçš„å€¼ä¸ºå‡†ï¼Œå¦‚æœæŒ‡å®šäº†è‡ªå¢é•¿ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå°±æŒ‰è‡ªå¢é•¿çš„è§„åˆ™æ¥æ·»åŠ æ•°æ®ï¼Œ<strong>åç»­æ·»åŠ çš„å€¼ä¼šå…ˆæ‰¾åˆ°æœ€å¤§å€¼å†ç»§ç»­å¢é•¿</strong></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºè‡ªå¢é•¿çš„ä½¿ç”¨<br><br>CREATE TABLE t24(<br>id INT PRIMARY KEY AUTO_INCREMENT,<br>email VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;,<br>`name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;<br>);<br>DESC t24<br><br>-- æµ‹è¯•è‡ªå¢é•¿çš„ä½¿ç”¨<br>SELECT * FROM t24<br>INSERT INTO t24<br>VALUES(NULL,&#x27;jack@qq.com&#x27;,&#x27;jack&#x27;);<br>INSERT INTO t24<br>VALUES(NULL,&#x27;tom@qq.com&#x27;,&#x27;tom&#x27;);<br>INSERT INTO t24<br>(email,`name`) VALUES (&#x27;lyh@sohu.com&#x27;,&#x27;lyh&#x27;);<br><br><br>SELECT * FROM t25<br>CREATE TABLE t25(<br>id INT PRIMARY KEY AUTO_INCREMENT,<br>email VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;,<br>`name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;<br>);<br><br>-- ä¿®æ”¹é»˜è®¤çš„è‡ªå¢é•¿å¼€å§‹å€¼<br>ALTER TABLE t25 AUTO_INCREMENT = 100;<br>INSERT INTO t25<br>VALUES(NULL,&#x27;jack@qq.com&#x27;,&#x27;jack&#x27;);<br><br>-- å¦‚æœåœ¨æ·»åŠ æ•°æ®æ—¶ï¼Œç»™è‡ªå¢é•¿å­—æ®µï¼ˆåˆ—ï¼‰æŒ‡å®šçš„æœ‰å€¼ï¼Œåˆ™ä»¥æŒ‡å®šçš„å€¼ä¸ºå‡†<br>INSERT INTO t25<br>VALUES(666,&#x27;lyh@qq.com&#x27;,&#x27;lyh&#x27;);<br><br>-- åç»­æ·»åŠ çš„å€¼ä¼šå…ˆæ‰¾åˆ°æœ€å¤§å€¼å†ç»§ç»­å¢é•¿<br>INSERT INTO t25<br>VALUES(NULL,&#x27;tom@qq.com&#x27;,&#x27;tom&#x27;);<br></code></pre></td></tr></table></figure><h2 id="mysql-ç´¢å¼•"><a href="#mysql-ç´¢å¼•" class="headerlink" title="mysql ç´¢å¼•"></a>mysql ç´¢å¼•</h2><p>è¯´èµ·æé«˜æ•°æ®åº“æ€§èƒ½ï¼Œç´¢å¼•æ˜¯æœ€ç‰©ç¾ä»·å»‰çš„ä¸œè¥¿ã€‚ä¸éœ€è¦åŠ å†…å­˜ï¼Œä¸éœ€è¦æ”¹ç¨‹åºï¼Œä¸éœ€è¦è°ƒsqlï¼ŒæŸ¥è¯¢é€Ÿåº¦å°±å¯ä»¥æé«˜åƒç™¾å€</p><h3 id="ç´¢å¼•å¿«é€Ÿå…¥é—¨"><a href="#ç´¢å¼•å¿«é€Ÿå…¥é—¨" class="headerlink" title="ç´¢å¼•å¿«é€Ÿå…¥é—¨"></a>ç´¢å¼•å¿«é€Ÿå…¥é—¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># åˆ›å»ºæµ‹è¯•æ•°æ®åº“ tmp<br>CREATE DATABASE tmp;<br><br>CREATE TABLE dept( /*éƒ¨é—¨è¡¨*/<br>deptno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,<br>dname VARCHAR(20) NOT NULL DEFAULT &quot;&quot;,<br>loc VARCHAR(13) NOT NULL DEFAULT &quot;&quot;<br>) ;<br><br># åˆ›å»ºè¡¨ EMP é›‡å‘˜<br>CREATE TABLE emp(<br>    empno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0, /*ç¼–å·*/<br>    ename VARCHAR(20) NOT NULL DEFAULT &quot;&quot;, /*åå­—*/<br>    job VARCHAR(9) NOT NULL DEFAULT &quot;&quot;,/*å·¥ä½œ*/<br>    mgr MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,/*ä¸Šçº§ç¼–å·*/<br>    hiredate DATE NOT NULL,/*å…¥èŒæ—¶é—´*/<br>    sal DECIMAL(7,2) NOT NULL,/*è–ªæ°´*/<br>    comm DECIMAL(7,2) NOT NULL,/*çº¢åˆ©*/<br>    deptno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0 /*éƒ¨é—¨ç¼–å·*/<br>) ;<br><br># å·¥èµ„çº§åˆ«è¡¨<br>CREATE TABLE salgrade(<br>grade MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,<br>losal DECIMAL(17,2) NOT NULL,<br>hisal DECIMAL(17,2) NOT NULL<br>);<br><br>#æµ‹è¯•æ•°æ®<br>INSERT INTO salgrade VALUES (1,700,1200);<br>INSERT INTO salgrade VALUES (2,1201,1400);<br>INSERT INTO salgrade VALUES (3,1401,2000);<br>INSERT INTO salgrade VALUES (4,2001,3000);<br>INSERT INTO salgrade VALUES (5,3001,9999);<br>DELIMITER $$<br><br>#åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œåå­— rand_stringï¼Œå¯ä»¥éšæœºè¿”å›æˆ‘æŒ‡å®šçš„ä¸ªæ•°å­—ç¬¦ä¸²<br>CREATE FUNCTION rand_string(n INT)<br>    RETURNS VARCHAR(255) #è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²<br>    BEGIN<br>    #å®šä¹‰äº†ä¸€ä¸ªå˜é‡ chars_strï¼Œ ç±»å‹ varchar(100)<br>    #é»˜è®¤ç»™ chars_str åˆå§‹å€¼ &#x27;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#x27;<br>    DECLARE chars_str VARCHAR(100) DEFAULT<br>    &#x27;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#x27;;<br>    DECLARE return_str VARCHAR(255) DEFAULT &#x27;&#x27;;<br>    DECLARE i INT DEFAULT 0;<br>    WHILE i &lt; n DO<br>    # concat å‡½æ•° : è¿æ¥å‡½æ•° mysql å‡½æ•°<br>    SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));<br>    SET i = i + 1;<br>    END WHILE;<br>    RETURN return_str;<br>END $$<br><br>#è¿™é‡Œæˆ‘ä»¬åˆè‡ªå®šäº†ä¸€ä¸ªå‡½æ•°,è¿”å›ä¸€ä¸ªéšæœºçš„éƒ¨é—¨å·<br>CREATE FUNCTION rand_num( )<br>    RETURNS INT(5)<br>    BEGIN<br>    DECLARE i INT DEFAULT 0;<br>    SET i = FLOOR(10+RAND()*500);<br>    RETURN i;<br>END $$<br><br>#åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œ å¯ä»¥æ·»åŠ é›‡å‘˜<br>CREATE PROCEDURE insert_emp(IN START INT(10),IN max_num INT(10))<br>BEGIN<br>DECLARE i INT DEFAULT 0;<br><br>#set autocommit =0 æŠŠ autocommit è®¾ç½®æˆ 0<br>#autocommit = 0 å«ä¹‰: ä¸è¦è‡ªåŠ¨æäº¤<br>SET autocommit = 0; #é»˜è®¤ä¸æäº¤ sql è¯­å¥<br>REPEAT<br>SET i = i + 1;<br><br>#é€šè¿‡å‰é¢å†™çš„å‡½æ•°éšæœºäº§ç”Ÿå­—ç¬¦ä¸²å’Œéƒ¨é—¨ç¼–å·ï¼Œç„¶ååŠ å…¥åˆ° emp è¡¨<br>INSERT INTO emp VALUES ((START+i) ,rand_string(6),&#x27;SALESMAN&#x27;,0001,CURDATE(),2000,400,rand_num());<br>UNTIL i = max_num<br>END REPEAT;<br><br>#commit æ•´ä½“æäº¤æ‰€æœ‰ sql è¯­å¥ï¼Œæé«˜æ•ˆç‡<br>COMMIT;<br>END $$<br><br>#æ·»åŠ  8000000 æ•°æ®<br>CALL insert_emp(100001,8000000)$$<br><br>#å‘½ä»¤ç»“æŸç¬¦ï¼Œå†é‡æ–°è®¾ç½®ä¸º;<br>DELIMITER ;<br><br><br>SELECT COUNT(*) FROM emp;<br>-- åœ¨æ²¡æœ‰åˆ›å»ºç´¢å¼•æ—¶ï¼Œæˆ‘ä»¬çš„æŸ¥è¯¢ä¸€æ¡è®°å½•<br>SELECT *<br>FROM emp<br>WHERE empno = 1234567<br>-- ä½¿ç”¨ç´¢å¼•æ¥ä¼˜åŒ–ä¸€ä¸‹ï¼Œ ä½“éªŒç´¢å¼•çš„ç‰›<br>-- åœ¨æ²¡æœ‰åˆ›å»ºç´¢å¼•å‰ , emp.ibd æ–‡ä»¶å¤§å° æ˜¯ 524m<br>-- åˆ›å»ºç´¢å¼•å emp.ibd æ–‡ä»¶å¤§å° æ˜¯ 655m [ç´¢å¼•æœ¬èº«ä¹Ÿä¼šå ç”¨ç©ºé—´.]<br>-- åˆ›å»º ename åˆ—ç´¢å¼•,emp.ibd æ–‡ä»¶å¤§å° æ˜¯ 827m<br>-- empno_index ç´¢å¼•åç§°<br>-- ON emp (empno) : è¡¨ç¤ºåœ¨ emp è¡¨çš„ empno åˆ—åˆ›å»ºç´¢å¼•<br>CREATE INDEX empno_index ON emp (empno)<br>-- åˆ›å»ºç´¢å¼•åï¼Œ æŸ¥è¯¢çš„é€Ÿåº¦å¦‚ä½•<br>SELECT *<br>FROM emp<br>WHERE empno = 1234578 -- 0.003s åŸæ¥æ˜¯ 4.5s<br>-- åˆ›å»ºç´¢å¼•åï¼Œåªå¯¹åˆ›å»ºäº†ç´¢å¼•çš„åˆ—æœ‰æ•ˆ<br>SELECT *<br>FROM emp<br>WHERE ename = &#x27;PjDlwy&#x27; -- æ²¡æœ‰åœ¨ ename åˆ›å»ºç´¢å¼•æ—¶ï¼Œæ—¶é—´ 4.7s<br>CREATE INDEX ename_index ON emp (ename) -- åœ¨ ename ä¸Šåˆ›å»ºç´¢å¼•<br></code></pre></td></tr></table></figure><h3 id="ç´¢å¼•çš„åŸç†"><a href="#ç´¢å¼•çš„åŸç†" class="headerlink" title="ç´¢å¼•çš„åŸç†"></a>ç´¢å¼•çš„åŸç†</h3><ul><li><p>æ²¡æœ‰ç´¢å¼•ä¸ºä»€ä¹ˆä¼šæ…¢ï¼Ÿ</p><p>å› ä¸ºå…¨è¡¨æ‰«æ</p></li><li><p>ä½¿ç”¨ç´¢å¼•ä¸ºä»€ä¹ˆä¼šå¿«ï¼Ÿ</p><p>å½¢æˆä¸€ä¸ªç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚äºŒå‰æ ‘</p></li><li><p>ç´¢å¼•çš„ä»£ä»·</p><ul><li>ç£ç›˜å ç”¨</li><li>å¯¹ dml ï¼ˆupdate delete insertï¼‰è¯­å¥çš„æ•ˆç‡å½±å“</li></ul></li></ul><h3 id="ç´¢å¼•çš„ç±»å‹"><a href="#ç´¢å¼•çš„ç±»å‹" class="headerlink" title="ç´¢å¼•çš„ç±»å‹"></a>ç´¢å¼•çš„ç±»å‹</h3><ul><li><p>ä¸»é”®ç´¢å¼•ï¼ˆprimary keyï¼‰ï¼Œä¸»é”®å°±æ˜¯ä¸€ç§ç´¢å¼•</p></li><li><p>å”¯ä¸€ç´¢å¼•ï¼ˆuniqueï¼‰ï¼Œ</p></li><li><p>æ™®é€šç´¢å¼•ï¼ˆindexï¼‰ï¼Œ</p></li><li><p>å…¨æ–‡ç´¢å¼•ï¼ˆfulltextï¼‰[é€‚ç”¨äºMyISAM]</p><p>ä¸€èˆ¬å¼€å‘ä¸ä½¿ç”¨mysqlè‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•ï¼Œè€Œæ˜¯ä½¿ç”¨ å…¨æ–‡æœç´¢ Solr å’Œ ElasticSearch</p></li><li><p>uniqueç´¢å¼• å’Œ æ™®é€šç´¢å¼•ï¼ˆå¦‚æœæŸåˆ—çš„å€¼ä¿è¯ä¸é‡å¤ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨uniqueç´¢å¼•ï¼‰</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs MYSQL">create table t1(<br>id int primary key, -- ä¸»é”®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç´¢å¼•ï¼Œç§°ä¸ºä¸»é”®ç´¢å¼•ã€‚<br>    name varchar(32);<br>);<br>create table t1(<br>id int unique, -- idæ˜¯å”¯ä¸€çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç´¢å¼•ï¼Œç§°ä¸ºuniqueç´¢å¼•<br>);<br></code></pre></td></tr></table></figure><h3 id="ç´¢å¼•ä½¿ç”¨"><a href="#ç´¢å¼•ä½¿ç”¨" class="headerlink" title="ç´¢å¼•ä½¿ç”¨"></a>ç´¢å¼•ä½¿ç”¨</h3><ul><li><p>æ·»åŠ ç´¢å¼•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create [unique] index index_name on tbl_name(col_name[(length)]) [asc | desc], ...);<br></code></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä¸»é”®ï¼ˆç´¢å¼•ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table è¡¨å add primary key(åˆ—å, ...);<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç´¢å¼•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop index index_name on tbl_name;<br><br>alter table table_name drop index index_name;<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ä¸»é”®ç´¢å¼• æ¯”è¾ƒç‰¹åˆ«ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table t_b drop primary key;<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ç´¢å¼•ï¼ˆä¸‰ç§æ–¹å¼ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">show index(es) from table_name;<br>show keys from table_name;<br>desc table_name;<br></code></pre></td></tr></table></figure></li><li><p>å°ç»“ï¼šé‚£äº›åˆ—ä¸Šé€‚åˆä½¿ç”¨ç´¢å¼•</p><ul><li>è¾ƒé¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•</li><li>å”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸é€‚åˆå•ç‹¬åˆ›å»ºç´¢å¼•ï¼Œå³ä½¿é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ˆå¦‚ æ€§åˆ«ï¼‰</li><li>æ›´æ–°éå¸¸é¢‘ç¹çš„å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼•</li><li>ä¸ä¼šå‡ºç°åœ¨ where å­å¥ä¸­çš„å­—æ®µä¸æ”¹åˆ›å»ºç´¢å¼•</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºmysqlçš„ç´¢å¼•çš„ä½¿ç”¨<br><br>-- åˆ›å»ºç´¢å¼•<br>CREATE TABLE t25(<br>id INT,<br>`name` VARCHAR(32)<br>);<br><br>-- æŸ¥è¯¢è¡¨æ˜¯å¦æœ‰ç´¢å¼•<br>SHOW INDEXES FROM t25;<br><br>-- æ·»åŠ ç´¢å¼•<br>-- æ·»åŠ å”¯ä¸€ç´¢å¼•<br>CREATE UNIQUE INDEX id_index ON t25 (id);<br><br>-- æ·»åŠ æ™®é€šç´¢å¼• æ–¹å¼1<br>CREATE INDEX id_index ON t25 (id);<br>-- æ·»åŠ æ™®é€šç´¢å¼• æ–¹å¼2<br>ALTER TABLE t25 ADD INDEX id_index (id);<br><br>-- æ·»åŠ ä¸»é”®ç´¢å¼•<br>CREATE TABLE t26(<br>id INT,<br>`name` VARCHAR(32)<br>);<br>ALTER TABLE t26 ADD PRIMARY KEY (id)<br>SHOW INDEX FROM t26<br><br>-- åˆ é™¤ç´¢å¼•<br>DROP INDEX id_index ON t25<br>-- åˆ é™¤ä¸»é”®ç´¢å¼•<br>ALTER TABLE t26 DROP PRIMARY KEY<br><br>-- ä¿®æ”¹ç´¢å¼•ï¼šå…ˆåˆ é™¤ï¼Œå†é‡æ–°æ·»åŠ æ–°çš„ç´¢å¼•<br>-- æŸ¥è¯¢ç´¢å¼•<br>-- æ–¹å¼1<br>SHOW INDEX FROM t25<br>-- æ–¹å¼2<br>SHOW INDEXES FROM t25<br>-- æ–¹å¼3<br>SHOW KEYS FROM t25 <br>-- æ–¹å¼4<br>DESC t25<br></code></pre></td></tr></table></figure><h2 id="mysql-äº‹åŠ¡"><a href="#mysql-äº‹åŠ¡" class="headerlink" title="mysql äº‹åŠ¡"></a>mysql äº‹åŠ¡</h2><p>äº‹åŠ¡ç”¨äºä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå®ƒç”±ä¸€ç»„ç›¸å…³çš„ dml è¯­å¥ç»„æˆï¼Œè¯¥ç»„çš„ dml è¯­å¥è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</p><p>å¦‚ï¼šè½¬è´¦å°±è¦ç”¨äº‹åŠ¡æ¥å¤„ç†ï¼Œæ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</p><h3 id="äº‹åŠ¡å’Œé”"><a href="#äº‹åŠ¡å’Œé”" class="headerlink" title="äº‹åŠ¡å’Œé”"></a>äº‹åŠ¡å’Œé”</h3><p>å½“æ‰§è¡Œäº‹åŠ¡æ“ä½œæ—¶ï¼ˆdmlè¯­å¥ï¼‰ï¼ŒMySQLä¼šåœ¨è¡¨ä¸ŠåŠ é”ï¼Œé˜²æ­¢å…¶å®ƒç”¨æˆ·æ”¹è¡¨çš„æ•°æ®ã€‚</p><p>MySQL æ•°æ®åº“æ§åˆ¶å°äº‹åŠ¡çš„å‡ ä¸ªé‡è¦æ“ä½œ</p><ul><li>start transaction    å¼€å§‹ä¸€ä¸ªäº‹åŠ¡</li><li>savepoint                            ä¿å­˜ç‚¹å  è®¾ç½®ä¿å­˜ç‚¹</li><li>rollback to                           ä¿å­˜ç‚¹å  å›é€€äº‹åŠ¡</li><li>rollback                                å›é€€å…¨éƒ¨äº‹åŠ¡</li><li>commit                                 æäº¤äº‹åŠ¡ï¼Œæ‰€æœ‰çš„æ“ä½œç”Ÿæ•ˆï¼Œä¸èƒ½å›é€€</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># äº‹åŠ¡çš„ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µå’Œå…·ä½“æ“ä½œ<br>-- çœ‹ä¸€ä¸ªå›¾<br>-- æ¼”ç¤º<br><br>-- 1. åˆ›å»ºä¸€å¼ æµ‹è¯•è¡¨<br>CREATE TABLE t27(<br>id INT,<br>`name` VARCHAR(32)<br>);<br><br>-- 2. å¼€å§‹äº‹åŠ¡<br>START TRANSACTION<br><br>-- 3. è®¾ç½®ä¿å­˜ç‚¹<br>SAVEPOINT a<br><br>-- æ‰§è¡Œ dml æ“ä½œ<br>INSERT INTO t27 VALUES(100,&#x27;tom&#x27;);<br>SELECT * FROM t27;<br><br>SAVEPOINT b;<br><br>-- æ‰§è¡Œ dml æ“ä½œ<br>INSERT INTO t27 VALUES(200,&#x27;jack&#x27;);<br><br>-- å›é€€åˆ° b<br>ROLLBACK TO b<br><br>-- ç»§ç»­å›é€€ a<br>ROLLBACK TO a<br><br>-- ç›´æ¥å›é€€åˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€<br>ROLLBACK<br><br>-- æäº¤äº‹åŠ¡<br>COMMIT<br></code></pre></td></tr></table></figure><h3 id="å›é€€äº‹åŠ¡"><a href="#å›é€€äº‹åŠ¡" class="headerlink" title="å›é€€äº‹åŠ¡"></a>å›é€€äº‹åŠ¡</h3><p>åœ¨ä»‹ç»å›é€€äº‹åŠ¡å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸‹ä¿å­˜ç‚¹ï¼ˆsavepointï¼‰ï¼Œä¿å­˜ç‚¹æ˜¯äº‹åŠ¡ä¸­çš„ç‚¹ï¼Œç”¨äºå–æ¶ˆéƒ¨åˆ†äº‹åŠ¡ï¼Œå½“ç»“æŸäº‹åŠ¡æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤è¯¥äº‹åŠ¡æ‰€å®šä¹‰åœ°æ‰€æœ‰ä¿å­˜ç‚¹ã€‚</p><p>å½“æ‰§è¡Œå›é€€äº‹åŠ¡æ—¶ï¼Œé€šè¿‡æŒ‡å®šä¿å­˜ç‚¹keä»¥å›é€€åˆ°æŒ‡å®šåœ°ç‚¹</p><h3 id="æäº¤äº‹åŠ¡"><a href="#æäº¤äº‹åŠ¡" class="headerlink" title="æäº¤äº‹åŠ¡"></a>æäº¤äº‹åŠ¡</h3><p>ä½¿ç”¨ commit è¯­å¥å¯ä»¥æäº¤äº‹åŠ¡ï¼Œå½“æ‰§è¡Œäº† commit è¯­å¥ä¹‹åï¼Œä¼šç¡®è®¤äº‹åŠ¡çš„å˜åŒ–ã€ç»“æŸäº‹åŠ¡ã€åˆ é™¤ä¿å­˜ç‚¹ã€é‡Šæ”¾é”ï¼Œæ•°æ®ç”Ÿæ•ˆã€‚</p><p>å½“ä½¿ç”¨ commit è¯­å¥ç»“æŸäº‹åŠ¡åï¼Œå…¶å®ƒä¼šè¯ï¼ˆå…¶å®ƒè¿æ¥ï¼‰å°†å¯ä»¥æŸ¥çœ‹äº‹åŠ¡å˜åŒ–åçš„æ–°æ•°æ®ï¼ˆæ‰€æœ‰æ•°æ®æ­£å¼ç”Ÿæ•ˆï¼‰</p><h3 id="ç»†èŠ‚è¯´æ˜"><a href="#ç»†èŠ‚è¯´æ˜" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><ul><li>å¦‚æœä¸å¼€å§‹äº‹åŠ¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œdml æ“ä½œæ—¶è‡ªåŠ¨æäº¤çš„ï¼Œä¸èƒ½å›æ»š</li><li>å¦‚æœå¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œæ²¡æœ‰åˆ›å»ºä¿å­˜ç‚¹ï¼Œå¯ä»¥æ‰§è¡Œrollbackï¼Œé»˜è®¤å°±æ˜¯å›é€€åˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€</li><li>å¯ä»¥åœ¨äº‹åŠ¡ä¸­åˆ›å»ºå¤šä¸ªä¿å­˜ç‚¹</li><li>åœ¨äº‹åŠ¡æ²¡æœ‰æäº¤å‰ï¼Œå¯ä»¥é€‰æ‹©å›é€€åˆ°å“ªä¸ªä¿å­˜ç‚¹</li><li>MySQL çš„äº‹åŠ¡æœºåˆ¶éœ€è¦ innodb çš„å­˜å‚¨å¼•æ“æ‰å¯ä»¥ä½¿ç”¨ï¼Œmyisam ä¸æ”¯æŒ</li><li>å¼€å§‹ä¸€ä¸ªäº‹åŠ¡   start transaction  æˆ–  set autocommit &#x3D; off;</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># äº‹åŠ¡ ç»†èŠ‚è¯´æ˜<br><br>-- å¦‚æœä¸å¼€å§‹äº‹åŠ¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œdml æ“ä½œæ—¶è‡ªåŠ¨æäº¤çš„ï¼Œä¸èƒ½å›æ»š<br>INSERT INTO t27 VALUES(300,&#x27;milan&#x27;);  -- è‡ªåŠ¨æäº¤<br><br>SELECT * FROM t27<br><br>-- å¦‚æœå¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œæ²¡æœ‰åˆ›å»ºä¿å­˜ç‚¹ï¼Œå¯ä»¥æ‰§è¡Œrollbackï¼Œé»˜è®¤å°±æ˜¯å›é€€åˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€<br>START TRANSACTION<br>INSERT INTO t27 VALUES(400, &#x27;king&#x27;);<br>INSERT INTO t27 VALUES(500, &#x27;scott&#x27;);<br>ROLLBACK  -- è¡¨ç¤ºç›´æ¥å›é€€åˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€<br><br>-- å¯ä»¥åœ¨äº‹åŠ¡ä¸­åˆ›å»ºå¤šä¸ªä¿å­˜ç‚¹<br><br>-- åœ¨äº‹åŠ¡æ²¡æœ‰æäº¤å‰ï¼Œå¯ä»¥é€‰æ‹©å›é€€åˆ°å“ªä¸ªä¿å­˜ç‚¹<br><br>-- MySQL çš„äº‹åŠ¡æœºåˆ¶éœ€è¦ innodb çš„å­˜å‚¨å¼•æ“æ‰å¯ä»¥ä½¿ç”¨ï¼Œmyisam ä¸æ”¯æŒ<br><br>-- å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ start transaction æˆ– set autocommit = off;<br></code></pre></td></tr></table></figure><h2 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h2><h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«ä»‹ç»"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«ä»‹ç»" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«ä»‹ç»"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«ä»‹ç»</h3><ul><li>å¤šä¸ªè¿æ¥å¼€å¯å„è‡ªäº‹åŠ¡æ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿè¦è´Ÿè´£éš”ç¦»æ“ä½œï¼Œä»¥ä¿è¯å„ä¸ªè¿æ¥åœ¨è·å–æ•°æ®æ—¶çš„å‡†ç¡®æ€§ã€‚</li><li>å¦‚æœä¸è€ƒè™‘éš”ç¦»æ€§ï¼Œå¯èƒ½ä¼šå¼•å‘å¦‚ä¸‹é—®é¢˜ï¼š<ul><li>è„è¯»</li><li>ä¸å¯é‡å¤è¯»</li><li>å¹»è¯»</li></ul></li></ul><h3 id="æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><ul><li>è„è¯»ï¼ˆdirty readï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„ä¿®æ”¹ï¼ˆupdate, insert, deleteï¼‰</li><li>ä¸å¯é‡å¤è¯»ï¼ˆnonrepeatable readï¼‰ï¼šåŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶å®ƒæäº¤äº‹åŠ¡æ‰€åšçš„<strong>ä¿®æ”¹æˆ–åˆ é™¤</strong>ï¼Œæ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿä¸å¯é‡å¤è¯»</li><li>å¹»è¯»ï¼ˆphantom readï¼‰ï¼šåŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶å®ƒæäº¤äº‹åŠ¡æ‰€åšçš„<strong>æ’å…¥</strong>æ“ä½œï¼Œæ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿå¹»è¯»</li><li>ä¸å¯é‡å¤è¯» å’Œ å¹»è¯» éƒ½æ˜¯æŸä¸ªäº‹åŠ¡æäº¤ååœ¨å¦ä¸€ä¸ªä»æœªæäº¤çš„äº‹åŠ¡ä¸­å‡ºç°çš„é—®é¢˜</li></ul><p><strong>éš”ç¦»çº§åˆ«ï¼šäº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´çš„éš”ç¦»ç¨‹åº¦</strong></p> <img src="image-20221007152542892.png" alt="image-20221007152542892" style="zoom:67%;" /> <img src="image-20221007152604537.png" alt="image-20221007152604537" style="zoom:80%;" /><p><strong>ç›¸å…³æ“ä½œï¼š</strong></p><ul><li><p>æŸ¥çœ‹å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select @@tx_isolation;<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹ç³»ç»Ÿå½“å‰éš”ç¦»çº§åˆ«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select @@global.tx_isolation;<br></code></pre></td></tr></table></figure></li><li><p>è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set session transaction isolation level repetable read;<br></code></pre></td></tr></table></figure></li><li><p>è®¾ç½®ç³»ç»Ÿå½“å‰éš”ç¦»çº§åˆ«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set global session transaction isolation level repetable read;<br></code></pre></td></tr></table></figure></li><li><p>mysql é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯ repeatable readï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œæ²¡æœ‰å¿…è¦ä¿®æ”¹</p><p>ï¼ˆå› ä¸ºè¯¥çº§åˆ«å¯ä»¥æ»¡è¶³ç»å¤§éƒ¨åˆ†é¡¹ç›®éœ€æ±‚ï¼‰</p></li><li><p>å…¨å±€ä¿®æ”¹ï¼šä¿®æ”¹my.inié…ç½®æ–‡ä»¶ï¼Œåœ¨æœ€ååŠ ä¸Š transaction-isolation &#x3D; READ-UNCOMMITTED;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å¯é€‰å‚æ•°æœ‰ï¼šREAD-UNCOMMITTED, READ-COMMITTED, REPEATABLE-READ, SERIALIZABLE<br>[mysqld]<br>transaction-isolation = READ-UNCOMMITTED;<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤ºMySQLçš„äº‹åŠ¡éš”ç¦»çº§åˆ«<br><br>-- 1. å¼€äº†ä¸¤ä¸ª mysql çš„æ§åˆ¶å°<br><br>-- 2. æŸ¥çœ‹å½“å‰ mysql çš„éš”ç¦»çº§åˆ«<br>SELECT @@tx_isolation;<br>/*<br>mysql&gt; SELECT @@tx_isolation;<br>+-----------------+<br>| @@tx_isolation |<br>+-----------------+<br>| REPEATABLE-READ |<br>+-----------------+<br>*/<br><br>-- 3.æŠŠå…¶ä¸­ä¸€ä¸ªæ§åˆ¶å°çš„éš”ç¦»çº§åˆ«è®¾ç½® Read uncommitted<br>SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED<br><br>-- 4. åˆ›å»ºè¡¨<br>CREATE TABLE `account`(<br>id INT,<br>`name` VARCHAR(32),<br>money INT);<br><br>-- æŸ¥çœ‹å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«<br>SELECT @@tx_isolation<br><br>-- æŸ¥çœ‹ç³»ç»Ÿå½“å‰éš”ç¦»çº§åˆ«<br>SELECT @@global.tx_isolation<br><br>-- è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«<br>SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED<br><br>-- è®¾ç½®ç³»ç»Ÿå½“å‰éš”ç¦»çº§åˆ«<br>SET GLOBALTRANSACTION ISOLATION LEVEL [ä½ è®¾ç½®çš„çº§åˆ«]<br></code></pre></td></tr></table></figure><h2 id="mysql-äº‹åŠ¡çš„-ACID-ç‰¹æ€§"><a href="#mysql-äº‹åŠ¡çš„-ACID-ç‰¹æ€§" class="headerlink" title="mysql äº‹åŠ¡çš„ ACID ç‰¹æ€§"></a>mysql äº‹åŠ¡çš„ ACID ç‰¹æ€§</h2><ul><li><p>åŸå­æ€§ï¼ˆAtomicityï¼‰</p><p>åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿ</p></li><li><p>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</p><p>äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€</p></li><li><p>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</p><p>ä¹¦å±‹çš„éš”ç¦»æ€§æ˜¯å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶å®ƒäº‹åŠ¡çš„æ“ä½œæ•°æ®æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»</p></li><li><p>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</p><p>æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥å³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“</p></li></ul><h2 id="mysql-è¡¨ç±»å‹å’Œå­˜å‚¨å¼•æ“"><a href="#mysql-è¡¨ç±»å‹å’Œå­˜å‚¨å¼•æ“" class="headerlink" title="mysql è¡¨ç±»å‹å’Œå­˜å‚¨å¼•æ“"></a>mysql è¡¨ç±»å‹å’Œå­˜å‚¨å¼•æ“</h2><h3 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><ul><li><p>MySQL çš„è¡¨ç±»å‹ç”±å­˜å‚¨å¼•æ“å†³å®šï¼Œä¸»è¦åŒ…æ‹¬ MyISAMã€innoDBã€Memoryç­‰</p></li><li><p>MySQL æ•°æ®è¡¨ä¸»è¦æ”¯æŒå…­ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>CSVã€Memoryã€ARCHIVEã€MRG_MYISAMã€MYISAMã€InnoBDB</p></li><li><p>è¿™å…­ç§åˆåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ â€œäº‹åŠ¡å®‰å…¨å‹â€ ï¼Œæ¯”å¦‚InnoDB;</p><p>å…¶ä½™éƒ½å±äºç¬¬äºŒç±»ï¼Œç§°ä¸º â€œéäº‹åŠ¡å®‰å…¨å‹â€</p></li></ul><h3 id="ä¸»è¦çš„å­˜å‚¨å¼•æ“-x2F-è¡¨ç±»å‹ç‰¹ç‚¹"><a href="#ä¸»è¦çš„å­˜å‚¨å¼•æ“-x2F-è¡¨ç±»å‹ç‰¹ç‚¹" class="headerlink" title="ä¸»è¦çš„å­˜å‚¨å¼•æ“&#x2F;è¡¨ç±»å‹ç‰¹ç‚¹"></a>ä¸»è¦çš„å­˜å‚¨å¼•æ“&#x2F;è¡¨ç±»å‹ç‰¹ç‚¹</h3> <img src="image-20221007164226870.png" alt="image-20221007164226870" style="zoom: 67%;" /><h3 id="ç»†èŠ‚è¯´æ˜-1"><a href="#ç»†èŠ‚è¯´æ˜-1" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><p><strong>é‡ç‚¹ä»‹ç»ä¸‰ç§: MyISAMã€InnoDBã€MEMORY</strong></p><ul><li>MyISAM ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¹Ÿä¸æ”¯æŒå¤–é”®ï¼Œä½†æ˜¯è®¿é—®é€Ÿåº¦å—ï¼Œå¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚</li><li>InnoDB å­˜å‚¨å¼•æ“æé«˜äº†å…·æœ‰æäº¤ã€å›æ»šå’Œå´©æºƒæ¢å¤èƒ½åŠ›çš„äº‹åŠ¡å®‰å…¨ã€‚ä½†æ˜¯æ¯”èµ· MyISAM å­˜å‚¨å¼•æ“ã€InnoDB å†™çš„å¤„ç†æ•ˆç‡å·®ä¸€äº›ï¼Œå¹¶ä¸”ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ä»¥ä¿ç•™æ•°æ®å’Œç´¢å¼•</li><li>MEMORY å­˜å‚¨å¼•æ“ä½¿ç”¨å­˜åœ¨å†…å­˜ä¸­çš„å†…å®¹æ¥åˆ›å»ºè¡¨ã€‚æ¯ä¸ª MEMORY è¡¨åªå®é™…å¯¹åº”ä¸€ä¸ªç£ç›˜æ–‡ä»¶ã€‚MEMORYç±»å‹çš„è¡¨è®¿é—®éå¸¸çš„å¿«ï¼Œå› ä¸ºå®ƒçš„æ•°æ®æ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œå¹¶ä¸”é»˜è®¤ä½¿ç”¨ HASH ç´¢å¼•ã€‚ä½†æ˜¯ä¸€æ—¦ MySQL æœåŠ¡å…³é—­ï¼Œè¡¨ä¸­çš„æ•°æ®å°±ä¼šä¸¢å¤±ï¼Œä½†è¡¨çš„ç»“æ„è¿˜åœ¨ã€‚</li></ul><h3 id="å¦‚ä½•é€‰æ‹©è¡¨çš„å­˜å‚¨å¼•æ“"><a href="#å¦‚ä½•é€‰æ‹©è¡¨çš„å­˜å‚¨å¼•æ“" class="headerlink" title="å¦‚ä½•é€‰æ‹©è¡¨çš„å­˜å‚¨å¼•æ“"></a>å¦‚ä½•é€‰æ‹©è¡¨çš„å­˜å‚¨å¼•æ“</h3><ul><li><p>å¦‚æœåº”ç”¨ä¸éœ€è¦äº‹åŠ¡ï¼Œå¤„ç†çš„åªæ˜¯åŸºæœ¬çš„CRUDæ“ä½œï¼Œé‚£ä¹ˆMyISAMæ˜¯ä¸äºŒé€‰æ‹©ï¼Œé€Ÿåº¦å¿«</p></li><li><p>å¦‚æœéœ€è¦æ”¯æŒäº‹åŠ¡ï¼Œé€‰æ‹© InnoDB</p></li><li><p>Memory å­˜å‚¨å¼•æ“å°±æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œç”±äºæ²¡æœ‰ç£ç›˜ I&#x2F;O çš„ç­‰å¾…ï¼Œé€Ÿåº¦æå¿«ã€‚</p><p>ä½†ç”±äºæ˜¯å†…å­˜å­˜å‚¨å¼•æ“ï¼Œæ‰€åšçš„ä»»ä½•ä¿®æ”¹åœ¨æœåŠ¡å™¨é‡å¯åéƒ½å°†æ¶ˆå¤±ï¼ˆç”¨æ³•å¦‚ï¼šç”¨æˆ·çš„åœ¨çº¿çŠ¶æ€ï¼‰</p></li></ul><h3 id="ä¿®æ”¹å­˜å‚¨å¼•æ“"><a href="#ä¿®æ”¹å­˜å‚¨å¼•æ“" class="headerlink" title="ä¿®æ”¹å­˜å‚¨å¼•æ“"></a>ä¿®æ”¹å­˜å‚¨å¼•æ“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table `è¡¨å` engine = å‚¨å­˜å¼•æ“;<br></code></pre></td></tr></table></figure><p>\</p><h3 id="æœ¬ç« ä»£ç "><a href="#æœ¬ç« ä»£ç " class="headerlink" title="æœ¬ç« ä»£ç "></a>æœ¬ç« ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># è¡¨ç±»å‹å’Œå­˜å‚¨å¼•æ“<br><br>-- æŸ¥çœ‹æ‰€æœ‰å­˜å‚¨å¼•æ“<br>SHOW ENGINES;<br><br>-- InnoDB å­˜å‚¨å¼•æ“ï¼Œæ˜¯å‰é¢ä¸€ç›´ä½¿ç”¨çš„<br>-- 1.æ”¯æŒäº‹åŠ¡  2.æ”¯æŒå¤–é”®  3.æ”¯æŒè¡Œçº§é”<br><br>-- MyISAM å­˜å‚¨å¼•æ“<br>-- 1.æ·»åŠ é€Ÿåº¦å¿«  2.ä¸æ”¯æŒäº‹åŠ¡å’Œå¤–é”® 3.æ”¯æŒè¡¨çº§é”<br>CREATE TABLE t28(<br>id INT,<br>`name` VARCHAR(32)) ENGINE MYISAM<br><br>START TRANSACTION;<br>SAVEPOINT t1<br>INSERT INTO t28 VALUES(1,&#x27;jack&#x27;);<br>SELECT * FROM t28;<br>ROLLBACK TO t1<br><br>-- MEMORY å­˜å‚¨å¼•æ“<br>-- 1.æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆå…³é—­mysqlæœåŠ¡ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼Œä½†è¡¨ç»“æ„è¿˜åœ¨ï¼‰<br>-- 2.æ‰§è¡Œé€Ÿåº¦å¾ˆå¿« 3.é»˜è®¤æ”¯æŒç´¢å¼•(hashè¡¨)<br>CREATE TABLE t29(<br>id INT,<br>`name` VARCHAR(32)) ENGINE MEMORY<br>INSERT INTO t29<br>VALUES(1,&#x27;tom&#x27;),(2,&#x27;jack&#x27;),(3,&#x27;lyh&#x27;);<br>SELECT * FROM t29<br><br>-- æŒ‡ä»¤ä¿®æ”¹å­˜å‚¨å¼•æ“<br>ALTER TABLE `t29` ENGINE = INNODB<br></code></pre></td></tr></table></figure><h2 id="è§†å›¾-view"><a href="#è§†å›¾-view" class="headerlink" title="è§†å›¾(view)"></a>è§†å›¾(view)</h2><h3 id="çœ‹ä¸€ä¸ªéœ€æ±‚"><a href="#çœ‹ä¸€ä¸ªéœ€æ±‚" class="headerlink" title="çœ‹ä¸€ä¸ªéœ€æ±‚"></a>çœ‹ä¸€ä¸ªéœ€æ±‚</h3> <img src="image-20221007170916796.png" alt="image-20221007170916796" style="zoom:50%;" /><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><ul><li><p>è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå…¶å†…å®¹ç”±æŸ¥è¯¢å®šä¹‰ã€‚åŒçœŸå®çš„è¡¨ä¸€æ ·ï¼Œè§†å›¾åŒ…å«åˆ—ï¼Œå…¶æ•°æ®æ¥è‡ªå¯¹åº”çš„çœŸå®è¡¨ï¼ˆåŸºè¡¨ï¼‰</p></li><li><p>è§†å›¾å’ŒåŸºè¡¨çš„å…³ç³»ï¼ˆ<strong>æ˜ å°„</strong>ï¼‰ [ç¤ºæ„å›¾]</p></li></ul> <img src="image-20221007171037767.png" alt="image-20221007171037767" style="zoom: 58%;" /> <h3 id="è§†å›¾çš„åŸºæœ¬ä½¿ç”¨"><a href="#è§†å›¾çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="è§†å›¾çš„åŸºæœ¬ä½¿ç”¨"></a>è§†å›¾çš„åŸºæœ¬ä½¿ç”¨</h3><ul><li>create view è§†å›¾å as selectè¯­å¥    â€“ åˆ›å»ºè§†å›¾</li><li>alter view è§†å›¾å as selectè¯­å¥    â€“ æ›´æ–°ä¸ºæ–°çš„è§†å›¾</li><li>show create view è§†å›¾å</li><li>drop view è§†å›¾å1, è§†å›¾å2    â€“ åˆ é™¤è§†å›¾</li></ul><h3 id="è§†å›¾ç»†èŠ‚è®¨è®º"><a href="#è§†å›¾ç»†èŠ‚è®¨è®º" class="headerlink" title="è§†å›¾ç»†èŠ‚è®¨è®º"></a>è§†å›¾ç»†èŠ‚è®¨è®º</h3><ul><li>åˆ›å»ºè§†å›¾åï¼Œåˆ°æ•°æ®åº“å»çœ‹ï¼Œå¯¹åº”è§†å›¾åªæœ‰ä¸€ä¸ªè§†å›¾ç»“æ„æ–‡ä»¶ï¼ˆå½¢å¼ï¼šè§†å›¾å.frmï¼‰</li><li>è§†å›¾çš„æ•°æ®å˜åŒ–ä¼šå½±å“åˆ°åŸºè¡¨ï¼ŒåŸºè¡¨çš„æ•°æ®å˜åŒ–ä¹Ÿä¼šå½±å“åˆ°è§†å›¾ [insert update delete]</li><li>è§†å›¾ä¸­å¯ä»¥å†ä½¿ç”¨è§†å›¾ï¼Œæ•°æ®ä»ç„¶æ¥è‡ªåŸºè¡¨</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># è§†å›¾çš„ä½¿ç”¨<br><br>-- åˆ›å»ºä¸€ä¸ªè§†å›¾ emp_view01ï¼Œåªèƒ½æŸ¥è¯¢ emp è¡¨çš„(empnoã€ename, job å’Œ deptno ) ä¿¡æ¯<br><br>-- åˆ›å»ºè§†å›¾<br>CREATE VIEW emp_view01<br>AS<br>SELECT empno,ename,job,deptno FROM emp;<br><br>-- æŸ¥çœ‹è§†å›¾<br>DESC emp_view01<br>SELECT * FROM emp_view01<br><br>-- æŸ¥çœ‹åˆ›å»ºè§†å›¾çš„æŒ‡ä»¤<br>SHOW CREATE VIEW emp_view01<br><br>-- åˆ é™¤è§†å›¾<br>DROP VIEW emp_view01<br><br>-- è§†å›¾çš„ç»†èŠ‚<br>-- 1.åˆ›å»ºè§†å›¾åï¼Œåˆ°æ•°æ®åº“å»çœ‹ï¼Œå¯¹åº”è§†å›¾åªæœ‰ä¸€ä¸ªè§†å›¾ç»“æ„æ–‡ä»¶ï¼ˆå½¢å¼ï¼šè§†å›¾å.frmï¼‰<br>-- 2.è§†å›¾çš„æ•°æ®å˜åŒ–ä¼šå½±å“åˆ°åŸºè¡¨ï¼ŒåŸºè¡¨çš„æ•°æ®å˜åŒ–ä¹Ÿä¼šå½±å“åˆ°è§†å›¾ [insert update delete]<br>-- ä¿®æ”¹è§†å›¾<br>UPDATE emp_view01<br>SET job=&#x27;MANAGER&#x27;<br>WHERE empno = 7369<br>SELECT * FROM emp;  -- æŸ¥è¯¢åŸºè¡¨<br>-- ä¿®æ”¹åŸºè¡¨<br>UPDATE emp<br>SET job=&#x27;SALESMAN&#x27;<br>WHERE empno = 7369<br>SELECT * FROM emp_view01<br><br>-- 3.è§†å›¾ä¸­å¯ä»¥å†ä½¿ç”¨è§†å›¾<br>--   æ¯”å¦‚å†²emp_view01è§†å›¾ä¸­ï¼Œé€‰å‡ºempnoå’Œenameåšå‡ºæ–°è§†å›¾<br>DESC emp_view01<br>CREATE VIEW emp_view02<br>AS<br>SELECT empno,ename FROM emp_view01<br>SELECT * FROM emp_view02<br></code></pre></td></tr></table></figure><h3 id="è§†å›¾æœ€ä½³å®è·µ"><a href="#è§†å›¾æœ€ä½³å®è·µ" class="headerlink" title="è§†å›¾æœ€ä½³å®è·µ"></a>è§†å›¾æœ€ä½³å®è·µ</h3> <img src="image-20221007173644504.png" alt="image-20221007173644504" style="zoom: 50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- è§†å›¾çš„è¯¾å ‚ç»ƒä¹ <br>-- é’ˆå¯¹ emp ï¼Œdept , å’Œ salgrade å¼ ä¸‰è¡¨.åˆ›å»ºä¸€ä¸ªè§†å›¾ emp_view03ï¼Œ<br>-- å¯ä»¥æ˜¾ç¤ºé›‡å‘˜ç¼–å·ï¼Œé›‡å‘˜åï¼Œé›‡å‘˜éƒ¨é—¨åç§°å’Œ è–ªæ°´çº§åˆ«[å³ä½¿ç”¨ä¸‰å¼ è¡¨ï¼Œæ„å»ºä¸€ä¸ªè§†å›¾]<br>/*<br>åˆ†æ: ä½¿ç”¨ä¸‰è¡¨è”åˆæŸ¥è¯¢ï¼Œå¾—åˆ°ç»“æœ<br>å°†å¾—åˆ°çš„ç»“æœï¼Œæ„å»ºæˆè§†å›¾<br>*/<br>CREATE VIEW emp_view03<br>AS<br>SELECT empno, ename, dname, grade<br>FROM emp, dept, salgrade<br>WHERE emp.deptno = dept.deptno AND<br>(sal BETWEEN losal AND hisal)<br>DESC emp_view03<br>SELECT * FROM emp_view03<br></code></pre></td></tr></table></figure><h2 id="mysql-ç®¡ç†"><a href="#mysql-ç®¡ç†" class="headerlink" title="mysql ç®¡ç†"></a>mysql ç®¡ç†</h2><h3 id="Mysql-ç”¨æˆ·"><a href="#Mysql-ç”¨æˆ·" class="headerlink" title="Mysql ç”¨æˆ·"></a>Mysql ç”¨æˆ·</h3><p>mysql ä¸­çš„ç”¨æˆ·ï¼Œéƒ½å­˜å‚¨å†ç³»ç»Ÿæ•°æ®åº“ mysql ä¸­çš„ user è¡¨ä¸­</p> <img src="image-20221007174753742.png" alt="image-20221007174753742" style="zoom:80%;" /><p>å…¶ä¸­ user è¡¨çš„é‡è¦å­—æ®µè¯´æ˜ï¼š</p><ul><li>hostï¼šå…è®¸ç™»å½•çš„ â€œä½ç½®â€ ï¼Œlocalhost è¡¨ç¤ºè¯¥ç”¨æˆ·åªå…è®¸æœ¬æœºç™»å½•ï¼Œä¹Ÿå¯ä»¥æŒ‡å®š ip åœ°å€ï¼Œå¦‚ï¼š192.168.1.100</li><li>userï¼šç”¨æˆ·å</li><li>authentication_stringï¼šå¯†ç ï¼Œæ˜¯é€šè¿‡ mysql çš„ password() å‡½æ•°åŠ å¯†ä¹‹åçš„å¯†ç </li></ul><h3 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create user &#x27;ç”¨æˆ·å&#x27;@&#x27;å…è®¸ç™»å½•ä½ç½®&#x27; identified by &#x27;å¯†ç &#x27;;<br>-- è¯´æ˜ï¼šåˆ›å»ºç”¨æˆ·ï¼ŒåŒæ—¶æŒ‡å®šå¯†ç <br></code></pre></td></tr></table></figure><h3 id="åˆ é™¤ç”¨æˆ·"><a href="#åˆ é™¤ç”¨æˆ·" class="headerlink" title="åˆ é™¤ç”¨æˆ·"></a>åˆ é™¤ç”¨æˆ·</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop user &#x27;ç”¨æˆ·å&#x27;@&#x27;å…è®¸ç™»å½•ä½ç½®&#x27;;<br></code></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ä¿®æ”¹å¯†ç "><a href="#ç”¨æˆ·ä¿®æ”¹å¯†ç " class="headerlink" title="ç”¨æˆ·ä¿®æ”¹å¯†ç "></a>ç”¨æˆ·ä¿®æ”¹å¯†ç </h3><ul><li><p>ä¿®æ”¹è‡ªå·±çš„å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set password = password(&#x27;å¯†ç &#x27;);<br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ä»–äººçš„å¯†ç ï¼ˆéœ€è¦æœ‰ä¿®æ”¹ç”¨æˆ·å¯†ç çš„æƒé™ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set password for &#x27;ç”¨æˆ·å&#x27; @ &#x27;ç™»å½•ä½ç½®&#x27; = password(&#x27;å¯†ç &#x27;);<br></code></pre></td></tr></table></figure></li></ul><h3 id="mysql-ä¸­çš„æƒé™"><a href="#mysql-ä¸­çš„æƒé™" class="headerlink" title="mysql ä¸­çš„æƒé™"></a>mysql ä¸­çš„æƒé™</h3> <img src="image-20221007175951702.png" alt="image-20221007175951702"  /><h3 id="ç»™ç”¨æˆ·æˆæƒ"><a href="#ç»™ç”¨æˆ·æˆæƒ" class="headerlink" title="ç»™ç”¨æˆ·æˆæƒ"></a>ç»™ç”¨æˆ·æˆæƒ</h3><p>åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">grant æƒé™åˆ—è¡¨ on åº“.å¯¹è±¡å to &#x27;ç”¨æˆ·å&#x27; @ &#x27;ç™»å½•ä½ç½®&#x27;   [identified by &#x27;å¯†ç &#x27;]<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li>æƒé™åˆ—è¡¨ï¼Œå¤šä¸ªæƒé™ç”¨é€—å·åˆ†å¼€<ul><li>grant select on â€¦</li><li>grant select, delete, create on â€¦</li><li>grant all [privileges] on â€¦</li></ul></li><li>ç‰¹åˆ«è¯´æ˜<ul><li>*.*ï¼šä»£è¡¨æœ¬ç³»ç»Ÿä¸­æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰å¯¹è±¡ï¼ˆè¡¨ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ï¼‰</li><li>åº“.*ï¼šè¡¨ç¤ºæŸä¸ªæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®å¯¹è±¡ï¼ˆè¡¨ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ç­‰ï¼‰</li></ul></li><li>identified by å¯ä»¥çœç•¥ï¼Œä¹Ÿå¯ä»¥å†™å‡º<ul><li>å¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œå°±æ˜¯ä¿®æ”¹è¯¥ç”¨æˆ·çš„å¯†ç </li><li>å¦‚æœè¯¥ç”¨æˆ·ä¸å­˜åœ¨ï¼Œå°±æ˜¯åˆ›å»ºè¯¥ç”¨æˆ·</li></ul></li></ul><h3 id="å›æ”¶ç”¨æˆ·æˆæƒ"><a href="#å›æ”¶ç”¨æˆ·æˆæƒ" class="headerlink" title="å›æ”¶ç”¨æˆ·æˆæƒ"></a>å›æ”¶ç”¨æˆ·æˆæƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">revoke æƒé™åˆ—è¡¨ on åº“.å¯¹è±¡å from &#x27;ç”¨æˆ·å&#x27; @ &#x27;ç™»å½•ä½ç½®&#x27;;<br></code></pre></td></tr></table></figure><h3 id="æƒé™ç”Ÿæ•ˆæŒ‡ä»¤"><a href="#æƒé™ç”Ÿæ•ˆæŒ‡ä»¤" class="headerlink" title="æƒé™ç”Ÿæ•ˆæŒ‡ä»¤"></a>æƒé™ç”Ÿæ•ˆæŒ‡ä»¤</h3><p>å¦‚æœæƒé™æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">FLUSH PRIVILEGES;<br></code></pre></td></tr></table></figure><h3 id="ç»†èŠ‚è¯´æ˜-2"><a href="#ç»†èŠ‚è¯´æ˜-2" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><ul><li><p>åœ¨åˆ›å»ºç”¨æˆ·çš„æ—¶å€™ï¼Œå¦‚æœä¸æŒ‡å®š Hostï¼Œåˆ™ä¸º % ï¼Œ% è¡¨ç¤ºæ‰€æœ‰ IP éƒ½æœ‰è¿æ¥æƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create user xxx;<br></code></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥è¿™æ ·æŒ‡å®š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create user &#x27;xxx&#x27; @ &#x27;192.168.1.%&#x27; -- è¡¨ç¤ºxxxç”¨æˆ·åœ¨192.168.1.*çš„IPå¯ä»¥ç™»å½• mysql<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç”¨æˆ·çš„æ—¶å€™ï¼Œå¦‚æœ host ä¸æ˜¯ % ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®š â€˜ç”¨æˆ· @ â€˜hostå€¼â€™</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs MYSQl">-- è¯´æ˜ ç”¨æˆ·ç®¡ç†çš„ç»†èŠ‚<br><br>-- åœ¨åˆ›å»ºç”¨æˆ·çš„æ—¶å€™ï¼Œå¦‚æœä¸æŒ‡å®š Host, åˆ™ä¸º% , %è¡¨ç¤ºè¡¨ç¤ºæ‰€æœ‰ IP éƒ½æœ‰è¿æ¥æƒé™<br>-- create user xxx;<br>CREATE USER jack<br>SELECT `host`, `user` FROM mysql.user<br><br>-- ä½ ä¹Ÿå¯ä»¥è¿™æ ·æŒ‡å®š<br>-- create user &#x27;xxx&#x27;@&#x27;192.168.1.%&#x27; è¡¨ç¤º xxx ç”¨æˆ·åœ¨ 192.168.1.*çš„ ip å¯ä»¥ç™»å½• mysql<br>CREATE USER &#x27;smith&#x27;@&#x27;192.168.1.%&#x27;<br><br>-- åœ¨åˆ é™¤ç”¨æˆ·çš„æ—¶å€™ï¼Œå¦‚æœ host ä¸æ˜¯ %, éœ€è¦æ˜ç¡®æŒ‡å®š &#x27;ç”¨æˆ·&#x27;@&#x27;host å€¼&#x27;<br>DROP USER jack -- é»˜è®¤å°±æ˜¯ DROP USER &#x27;jack&#x27;@&#x27;%&#x27;<br>DROP USER &#x27;smith&#x27;@&#x27;192.168.1.%&#x27;<br></code></pre></td></tr></table></figure><h3 id="è¯¾å ‚ç»ƒä¹ é¢˜"><a href="#è¯¾å ‚ç»ƒä¹ é¢˜" class="headerlink" title="è¯¾å ‚ç»ƒä¹ é¢˜"></a>è¯¾å ‚ç»ƒä¹ é¢˜</h3> <img src="image-20221007180632103.png" alt="image-20221007180632103" style="zoom:67%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ¼”ç¤º ç”¨æˆ·æƒé™çš„ç®¡ç†<br><br>-- åˆ›å»ºç”¨æˆ· shunping å¯†ç  123 , ä»æœ¬åœ°ç™»å½•<br>CREATE USER &#x27;shunping&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;123&#x27;<br><br>-- ä½¿ç”¨ root ç”¨æˆ·åˆ›å»º testdb ,è¡¨ news<br>CREATE DATABASE testdb<br>CREATE TABLE news (<br>    id INT ,<br>    content VARCHAR(32));<br>    <br>-- æ·»åŠ ä¸€æ¡æµ‹è¯•æ•°æ®<br>INSERT INTO news VALUES(100, &#x27;åŒ—äº¬æ–°é—»&#x27;);<br>SELECT * FROM news;<br><br>-- ç»™ shunping åˆ†é…æŸ¥çœ‹ news è¡¨å’Œ æ·»åŠ  news çš„æƒé™<br>GRANT SELECT , INSERT<br>    ON testdb.news<br>    TO &#x27;shunping&#x27;@&#x27;localhost&#x27;<br><br>-- å¯ä»¥å¢åŠ  update æƒé™<br>GRANT UPDATE<br>    ON testdb.news<br>    TO &#x27;shunping&#x27;@&#x27;localhost&#x27;<br><br>-- ä¿®æ”¹ shunping çš„å¯†ç ä¸º abc<br>SET PASSWORD FOR &#x27;shunping&#x27;@&#x27;localhost&#x27; = PASSWORD(&#x27;abc&#x27;);<br><br>-- å›æ”¶ shunping ç”¨æˆ·åœ¨ testdb.news è¡¨çš„æ‰€æœ‰æƒé™<br>REVOKE SELECT, UPDATE, INSERT ON testdb.news FROM &#x27;shunping&#x27;@&#x27;localhost&#x27;<br>REVOKE ALL ON testdb.news FROM &#x27;shunping&#x27;@&#x27;localhost&#x27;<br><br>-- åˆ é™¤ shunping<br>DROP USER &#x27;shunping&#x27;@&#x27;localhost&#x27;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaåŸºç¡€</title>
    <link href="/2022/06/30/JavaNote/"/>
    <url>/2022/06/30/JavaNote/</url>
    
    <content type="html"><![CDATA[<h2 id="Java-è½¬ä¹‰å­—ç¬¦"><a href="#Java-è½¬ä¹‰å­—ç¬¦" class="headerlink" title="Java è½¬ä¹‰å­—ç¬¦"></a>Java è½¬ä¹‰å­—ç¬¦</h2><h3 id="Java-å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦"><a href="#Java-å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦" class="headerlink" title="Java å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦"></a>Java å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">åœ¨æ§åˆ¶å°ï¼Œè¾“å…¥ tab é”®ï¼Œå¯ä»¥å®ç°å‘½ä»¤è¡¥å…¨<br>\t ï¼šä¸€ä¸ªåˆ¶è¡¨ä½ï¼Œå®ç°å¯¹é½çš„åŠŸèƒ½<br>\n ï¼šæ¢è¡Œç¬¦<br>\\ ï¼šä¸€ä¸ª\<br>\<span class="hljs-string">&quot; :ä¸€ä¸ª&quot;</span><br>\<span class="hljs-string">&#x27; ï¼šä¸€ä¸ª&#x27;</span><br>\r :ä¸€ä¸ªå›è½¦ System.out.println(<span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²\r åŒ—äº¬&quot;</span>);<br></code></pre></td></tr></table></figure><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><ul><li><p>å˜é‡è¡¨ç¤ºå†…å­˜ä¸­çš„ä¸€ä¸ªå­˜å‚¨åŒºåŸŸ [ä¸åŒçš„å˜é‡ï¼Œç±»å‹ä¸åŒï¼Œå ç”¨çš„ç©ºé—´å¤§å°ä¸åŒ]</p><p>æ¯”å¦‚ï¼š int 4 ä¸ªå­—èŠ‚ï¼Œdouble å°±æ˜¯ 8 ä¸ªå­—èŠ‚</p></li><li><p>è¯¥åŒºåŸŸæœ‰è‡ªå·±çš„åç§°[å˜é‡å] å’Œç±»å‹[æ•°æ®ç±»å‹]</p></li><li><p>å˜é‡å¿…é¡»å…ˆå£°æ˜ï¼Œåä½¿ç”¨ï¼Œå³æœ‰é¡ºåº</p></li><li><p>è¯¥åŒºåŸŸçš„æ•°æ®&#x2F;å€¼å¯ä»¥åœ¨åŒä¸€ç±»å‹èŒƒå›´å†…ä¸æ–­å˜åŒ–</p></li><li><p>å˜é‡åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…ä¸èƒ½é‡å</p></li><li><p>å˜é‡ &#x3D; å˜é‡å + å€¼ + æ•°æ®ç±»å‹ ã€å˜é‡ä¸‰è¦ç´ ã€‘</p></li></ul><h3 id="ç¨‹åºä¸­-å·çš„ä½¿ç”¨"><a href="#ç¨‹åºä¸­-å·çš„ä½¿ç”¨" class="headerlink" title="ç¨‹åºä¸­ +å·çš„ä½¿ç”¨"></a>ç¨‹åºä¸­ +å·çš„ä½¿ç”¨</h3><ul><li>å½“å·¦å³ä¸¤è¾¹éƒ½æ˜¯æ•°å€¼å‹æ—¶ï¼Œåˆ™åšåŠ æ³•è¿ç®—</li><li>å½“å·¦å³ä¸¤è¾¹æœ‰ä¸€æ–¹ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™åšæ‹¼æ¥è¿ç®—</li><li>è¿ç®—é¡ºåºä¸ºä»å·¦åˆ°å³</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(<span class="hljs-number">10</span> + <span class="hljs-number">98</span>);  <span class="hljs-comment">//198</span><br>System.out.println(<span class="hljs-string">&quot;100&quot;</span> + <span class="hljs-number">98</span>);  <span class="hljs-comment">//10098</span><br>System.out.println(<span class="hljs-number">100</span> + <span class="hljs-number">3</span> + <span class="hljs-string">&quot;hello&quot;</span>);  <span class="hljs-comment">//103hello</span><br>System.out.println(<span class="hljs-string">&quot;hello&quot;</span> + <span class="hljs-number">100</span> + <span class="hljs-number">3</span>);  <span class="hljs-comment">//hello1003</span><br></code></pre></td></tr></table></figure><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><p>æ¯ä¸€ç§æ•°æ®éƒ½å®šä¹‰äº†æ˜ç¡®çš„æ•°æ®ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…äº†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´(å­—èŠ‚)ã€‚</p> <img src="image-20220914094409741.png" alt="image-20220914094409741" style="zoom:60%;" /><h3 id="æ•´æ•°ç±»å‹"><a href="#æ•´æ•°ç±»å‹" class="headerlink" title="æ•´æ•°ç±»å‹"></a>æ•´æ•°ç±»å‹</h3><h4 id="æ•´å‹çš„ç±»å‹"><a href="#æ•´å‹çš„ç±»å‹" class="headerlink" title="æ•´å‹çš„ç±»å‹"></a>æ•´å‹çš„ç±»å‹</h4> <img src="image-20220914095054681.png" alt="image-20220914095054681" style="zoom:50%;" /><h4 id="æ•´å‹çš„ä½¿ç”¨ç»†èŠ‚"><a href="#æ•´å‹çš„ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="æ•´å‹çš„ä½¿ç”¨ç»†èŠ‚"></a>æ•´å‹çš„ä½¿ç”¨ç»†èŠ‚</h4><ul><li>Java å„æ•´æ•°ç±»å‹æœ‰å›ºå®šçš„èŒƒå›´å’Œå­—æ®µé•¿åº¦ï¼Œä¸å—å…·ä½“OS[æ“ä½œç³»ç»Ÿ]çš„å½±å“ï¼Œä»¥ä¿è¯javaç¨‹åºçš„å¯ç§»æ¤æ€§</li><li>Java çš„æ•´å‹å¸¸é‡ï¼ˆå…·ä½“å€¼ï¼‰é»˜è®¤ä¸º int å‹ï¼Œå£°æ˜ long å‹å¸¸é‡é¡»ååŠ  â€˜lâ€™ æˆ– â€˜Lâ€™</li><li>Java ç¨‹åºä¸­å˜é‡å¸¸å£°æ˜ä¸º int å‹ï¼Œé™¤éä¸è¶³ä»¥è¡¨ç¤ºå¤§æ•°ï¼Œæ‰ä½¿ç”¨ long</li><li>bitï¼ˆæ¯”ç‰¹ï¼‰ï¼šè®¡ç®—æœºä¸­çš„æœ€å°å­˜å‚¨å•ä½ã€‚</li><li>byteï¼ˆå­—èŠ‚ï¼‰ï¼šè®¡ç®—æœºä¸­åŸºæœ¬å­˜å‚¨å•å…ƒï¼Œ1 byte &#x3D; 8 bit</li></ul><h3 id="æµ®ç‚¹ç±»å‹"><a href="#æµ®ç‚¹ç±»å‹" class="headerlink" title="æµ®ç‚¹ç±»å‹"></a>æµ®ç‚¹ç±»å‹</h3><h4 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><p>Java çš„æµ®ç‚¹ç±»å‹å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå°æ•°ï¼Œæ¯”å¦‚ 123.4 ï¼Œ7.8 ï¼Œ0.12 ç­‰ç­‰</p><h4 id="æµ®ç‚¹å‹çš„åˆ†ç±»"><a href="#æµ®ç‚¹å‹çš„åˆ†ç±»" class="headerlink" title="æµ®ç‚¹å‹çš„åˆ†ç±»"></a>æµ®ç‚¹å‹çš„åˆ†ç±»</h4> <img src="image-20220914095723827.png" alt="image-20220914095723827" style="zoom:60%;" /><h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><ol><li><p>å…³äºæµ®ç‚¹æ•°åœ¨æœºå™¨ä¸­å­˜æ”¾å½¢å¼çš„ç®€å•è¯´æ˜ï¼Œ<strong>æµ®ç‚¹æ•° &#x3D; ç¬¦å·ä½ + æŒ‡æ•°ä½ + å°¾æ•°ä½</strong></p></li><li><p>å°¾æ•°éƒ¨åˆ†å¯èƒ½ä¸¢å¤±ï¼Œé€ æˆç²¾åº¦æŸå¤±(å°æ•°éƒ½æ˜¯è¿‘ä¼¼å€¼)ã€‚</p></li></ol><h4 id="æµ®ç‚¹å‹ä½¿ç”¨ç»†èŠ‚"><a href="#æµ®ç‚¹å‹ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="æµ®ç‚¹å‹ä½¿ç”¨ç»†èŠ‚"></a>æµ®ç‚¹å‹ä½¿ç”¨ç»†èŠ‚</h4><ul><li><p>ä¸æ•´æ•°ç±»ä¼¼ï¼ŒJava æµ®ç‚¹ç±»å‹ä¹Ÿæœ‰å›ºå®šçš„èŒƒå›´å’Œå­—æ®µé•¿åº¦ï¼Œä¸å—å…·ä½“OSçš„å½±å“ã€‚</p><p>[float 4 ä¸ªå­—èŠ‚ï¼Œdouble 8 ä¸ªå­—èŠ‚]</p></li><li><p>Java çš„æµ®ç‚¹å‹å¸¸é‡ï¼ˆå…·ä½“å€¼ï¼‰é»˜è®¤ä¸º double å‹ï¼Œå£°æ˜ float å‹å¸¸é‡ï¼Œé¡»ååŠ  â€˜fâ€™ æˆ– â€˜Fâ€™</p></li><li><p>æµ®ç‚¹å‹å¸¸é‡æœ‰ä¸¤ç§è¡¨ç¤ºå½¢å¼</p><p>åè¿›åˆ¶æ•°å½¢å¼ï¼šå¦‚ï¼š5.12512.0f        .572      ï¼ˆå¿…é¡»æœ‰å°æ•°ç‚¹ï¼‰</p><p>ç§‘å­¦è®¡æ•°æ³•å½¢å¼ï¼šå¦‚ï¼š5.12e2ï¼ˆ5.12*10çš„2æ¬¡æ–¹ï¼‰  5.12E-2ï¼ˆ5.12&#x2F;10çš„2æ¬¡æ–¹ï¼‰</p></li><li><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯ä½¿ç”¨ double å‹ï¼Œå› ä¸ºå®ƒæ¯” float å‹æ›´ç²¾ç¡®</p></li><li><p>æµ®ç‚¹æ•°ä½¿ç”¨é™·é˜±ï¼š2.7 å’Œ 8.1&#x2F;3 æ¯”è¾ƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æµ®ç‚¹æ•°ä½¿ç”¨é™·é˜±: 2.7 å’Œ 8.1 / 3 æ¯”è¾ƒ</span><br><span class="hljs-comment">//çœ‹çœ‹ä¸€æ®µä»£ç </span><br><span class="hljs-type">double</span> <span class="hljs-variable">num11</span> <span class="hljs-operator">=</span> <span class="hljs-number">2.7</span>;<br><span class="hljs-type">double</span> <span class="hljs-variable">num12</span> <span class="hljs-operator">=</span> <span class="hljs-number">8.1</span>/<span class="hljs-number">3</span>; <span class="hljs-comment">//8.1 / 3; //2.7</span><br>System.out.println(num11);<span class="hljs-comment">//2.7</span><br>System.out.println(num12);<span class="hljs-comment">//æ¥è¿‘ 2.7 çš„ä¸€ä¸ªå°æ•°ï¼Œè€Œä¸æ˜¯ 2.7</span><br><span class="hljs-comment">//å¾—åˆ°ä¸€ä¸ªé‡è¦çš„ä½¿ç”¨ç‚¹: å½“æˆ‘ä»¬å¯¹è¿ç®—ç»“æœæ˜¯å°æ•°çš„è¿›è¡Œç›¸ç­‰åˆ¤æ–­æ˜¯ï¼Œè¦å°å¿ƒ</span><br><span class="hljs-comment">//åº”è¯¥æ˜¯ä»¥ä¸¤ä¸ªæ•°çš„å·®å€¼çš„ç»å¯¹å€¼ï¼Œåœ¨æŸä¸ªç²¾åº¦èŒƒå›´ç±»åˆ¤æ–­</span><br><span class="hljs-keyword">if</span>( num11 == num12) &#123;  <span class="hljs-comment">//é”™è¯¯</span><br>System.out.println(<span class="hljs-string">&quot;num11 == num12 ç›¸ç­‰&quot;</span>);<br>&#125;<br><span class="hljs-comment">//æ­£ç¡®çš„å†™æ³•</span><br><span class="hljs-type">double</span> num1=<span class="hljs-number">2.7</span>;<br><span class="hljs-type">double</span> num2=<span class="hljs-number">8.1</span>/<span class="hljs-number">3</span>;<br><span class="hljs-keyword">if</span>(Math.abs(num7-num8)&lt;<span class="hljs-number">0.00001</span>)&#123;  <span class="hljs-comment">//æ­£ç¡®</span><br>System.out.println(<span class="hljs-string">&quot;ç›¸ç­‰~~&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="å­—ç¬¦ç±»å‹-char"><a href="#å­—ç¬¦ç±»å‹-char" class="headerlink" title="å­—ç¬¦ç±»å‹(char)"></a>å­—ç¬¦ç±»å‹(char)</h3><h4 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><p>å­—ç¬¦ç±»å‹ï¼ˆcharï¼‰å¯è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œchar æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼ˆJava ä¸­ char ä½¿ç”¨ Unicode ç¼–ç ï¼Œå¯ä»¥å­˜æ”¾æ±‰å­—ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">char</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;\t&#x27;</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">c3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;éŸ©&#x27;</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">c4</span> <span class="hljs-operator">=</span> <span class="hljs-number">97</span>;<br></code></pre></td></tr></table></figure><h4 id="å­—ç¬¦ç±»å‹ä½¿ç”¨ç»†èŠ‚"><a href="#å­—ç¬¦ç±»å‹ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="å­—ç¬¦ç±»å‹ä½¿ç”¨ç»†èŠ‚"></a>å­—ç¬¦ç±»å‹ä½¿ç”¨ç»†èŠ‚</h4><ul><li>å­—ç¬¦å¸¸é‡æ˜¯ç”¨å•å¼•å·ï¼ˆâ€™â€™ï¼‰æ‹¬èµ·æ¥çš„å•ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ char c1 &#x3D; â€˜aâ€™;  char c2 &#x3D; â€˜\tâ€™;  char c3 &#x3D; â€˜éŸ©â€™;  char c4 &#x3D; 97;</li><li>Java ä¸­è¿˜å…è®¸ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ â€˜\â€˜ æ¥å°†å…¶åçš„å­—ç¬¦è½¬å˜ä¸ºç‰¹æ®Šå­—ç¬¦å‹å¸¸é‡ã€‚ä¾‹å¦‚ char c &#x3D; â€˜\nâ€™;  â€˜\nâ€™ è¡¨ç¤ºæ¢è¡Œç¬¦</li><li>åœ¨javaä¸­ï¼Œcharçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåœ¨è¾“å‡ºæ—¶ï¼Œæ—¶unicodeç å¯¹åº”çš„å­—ç¬¦</li><li>å¯ä»¥ç›´æ¥ç»™charèµ‹ä¸€ä¸ªæ•´æ•°ï¼Œç„¶åè¾“å‡ºæ—¶ï¼Œä¼šæŒ‰ç…§å¯¹åº”çš„unicodeå­—ç¬¦è¾“å‡º  [97 -&gt; a]</li><li>char ç±»å‹æ˜¯å¯ä»¥è¿›è¡Œè¿ç®—çš„ï¼Œç›¸å½“äºä¸€ä¸ªæ•´æ•°ï¼Œå› ä¸ºå®ƒéƒ½å¯¹åº”æœ‰ Unicode ç ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CharDetail</span> &#123;<br>    <span class="hljs-comment">//ç¼–å†™ä¸€ä¸ª main æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åœ¨ java ä¸­ï¼Œchar çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåœ¨é»˜è®¤è¾“å‡ºæ—¶ï¼Œæ˜¯ unicode ç å¯¹åº”çš„å­—ç¬¦</span><br>        <span class="hljs-comment">//è¦è¾“å‡ºå¯¹åº”çš„æ•°å­—ï¼Œå¯ä»¥(int)å­—ç¬¦</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-number">97</span>;<br>        System.out.println(c1); <span class="hljs-comment">// a</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span>; <span class="hljs-comment">//è¾“å‡º&#x27;a&#x27; å¯¹åº”çš„ æ•°å­—</span><br>        System.out.println((<span class="hljs-type">int</span>)c2);<br>        <span class="hljs-type">char</span> <span class="hljs-variable">c3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;éŸ©&#x27;</span>;<br>        System.out.println((<span class="hljs-type">int</span>)c3);<span class="hljs-comment">//38889</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c4</span> <span class="hljs-operator">=</span> <span class="hljs-number">38889</span>;<br>        System.out.println(c4);<span class="hljs-comment">//éŸ©</span><br>        <span class="hljs-comment">//char ç±»å‹æ˜¯å¯ä»¥è¿›è¡Œè¿ç®—çš„ï¼Œç›¸å½“äºä¸€ä¸ªæ•´æ•°ï¼Œå› ä¸ºå®ƒéƒ½å¯¹åº”æœ‰ Unicode ç .</span><br>        System.out.println(<span class="hljs-string">&#x27;a&#x27;</span> + <span class="hljs-number">10</span>);<span class="hljs-comment">//107</span><br>        <span class="hljs-comment">//è¯¾å ‚å°æµ‹è¯•</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c5</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;b&#x27;</span> + <span class="hljs-number">1</span>;<span class="hljs-comment">//98+1==&gt; 99</span><br>        System.out.println((<span class="hljs-type">int</span>)c5); <span class="hljs-comment">//99</span><br>        System.out.println(c5); <span class="hljs-comment">//99-&gt;å¯¹åº”çš„å­—ç¬¦-&gt;ç¼–ç è¡¨ ASCII(è§„å®šå¥½çš„)=&gt;c</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>é¢å‘å¯¹è±¡ç¼–ç¨‹</h2><h2 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">//è¡¥å……äº†ä¸€ä¸ªå¢å¼ºfor</span><br><span class="hljs-type">int</span>[] nums = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>&#125;;<br><span class="hljs-comment">//æ™®é€šçš„forå¾ªç¯</span><br>System.out.println(<span class="hljs-string">&quot;=====æ™®é€šçš„for=====&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    System.out.println(nums[i]);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;=====å¢å¼ºçš„for=====&quot;</span>);<br><span class="hljs-comment">//æ‰§è¡Œæµç¨‹æ˜¯ ä¾æ¬¡ä»numsæ•°ç»„ä¸­å–å‡ºæ•°æ®ï¼Œèµ‹ç»™i, å¦‚æœå–å‡ºå®Œæ¯•ï¼Œåˆ™é€€å‡ºfor</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i : nums) &#123;<br>    System.out.println(<span class="hljs-string">&quot;i=&quot;</span> + i);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¢å¼º for ä¸èƒ½åšåˆ é™¤å…ƒç´ ç­‰æ“ä½œï¼Œå¦åˆ™ä¼šå‡ºé”™</p><p>ä¸‰å…ƒè¿ç®—ç¬¦  æ˜¯ä¸€ä¸ªæ•´ä½“</p><p>IDEA æ˜¾ç¤ºæ‰€æœ‰çš„å¿«æ·é”®çš„çš„å¿«æ·é”® ctrl + j</p><h2 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h2><h3 id="åŒ…çš„ä¸‰å¤§ä½œç”¨"><a href="#åŒ…çš„ä¸‰å¤§ä½œç”¨" class="headerlink" title="åŒ…çš„ä¸‰å¤§ä½œç”¨"></a>åŒ…çš„ä¸‰å¤§ä½œç”¨</h3><ol><li>åŒºåˆ†ç›¸åŒåå­—çš„ç±»</li><li>å½“ç±»å¾ˆå¤šæ—¶ï¼Œå¯ä»¥å¾ˆå¥½çš„ç®¡ç†ç±» [çœ‹Java api æ–‡æ¡£ï¼Œä¸€ä¸ªåŒ…é‡Œé¢å­˜æ”¾ç›¸å¯¹åº”çš„æ¥å£å’Œç±»ç­‰ç­‰]</li><li>æ§åˆ¶è®¿é—®èŒƒå›´</li></ol><h3 id="åŒ…çš„åŸºæœ¬è¯­æ³•"><a href="#åŒ…çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="åŒ…çš„åŸºæœ¬è¯­æ³•"></a>åŒ…çš„åŸºæœ¬è¯­æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ol><li>packageï¼šå…³é”®å­—ï¼Œè¡¨ç¤ºæ‰“åŒ…</li><li>com.java_studyï¼šè¡¨ç¤ºåŒ…åï¼Œå®é™…ä¸Šå°±æ˜¯æ–‡ä»¶å¤¹ com\java_study\</li></ol><h3 id="åŒ…çš„æœ¬è´¨åˆ†æï¼ˆåŸç†ï¼‰"><a href="#åŒ…çš„æœ¬è´¨åˆ†æï¼ˆåŸç†ï¼‰" class="headerlink" title="åŒ…çš„æœ¬è´¨åˆ†æï¼ˆåŸç†ï¼‰"></a>åŒ…çš„æœ¬è´¨åˆ†æï¼ˆåŸç†ï¼‰</h3><p>åŒ…çš„æœ¬è´¨å®é™…ä¸Šå°±æ˜¯åˆ›å»ºä¸åŒçš„æ–‡ä»¶å¤¹æ¥ä¿å­˜ç±»æ–‡ä»¶</p><p> <img src="/2022/06/30/JavaNote/image-20220830151659522.png" alt="image-20220830151659522"></p><h3 id="åŒ…çš„å¿«é€Ÿå…¥é—¨"><a href="#åŒ…çš„å¿«é€Ÿå…¥é—¨" class="headerlink" title="åŒ…çš„å¿«é€Ÿå…¥é—¨"></a>åŒ…çš„å¿«é€Ÿå…¥é—¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.use;<br><br><span class="hljs-keyword">import</span> com.xiaoqiang.Dog;<br><span class="hljs-comment">//import com.xiaoming.Dog;  //æŠ¥é”™ï¼šå·²åœ¨å•ç±»å‹å¯¼å…¥ä¸­å®šä¹‰ &#x27;com.xiaoqiang.Dog&#x27;</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        <span class="hljs-comment">// com.xiaoqiang.Dog dog = new com.xiaoqiang.Dog(); //æŠŠåŒ…åå†™å…¨ä¹Ÿå¯ä»¥</span><br>        System.out.println(dog);  <span class="hljs-comment">//com.xiaoqiang.Dog@7c30a502</span><br><br>        com.xiaoming.<span class="hljs-type">Dog</span> <span class="hljs-variable">dog1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.xiaoming.Dog(); <span class="hljs-comment">//å¸¦æœ‰åŒ…å</span><br>        System.out.println(dog1);  <span class="hljs-comment">//com.xiaoming.Dog@49e4cb85</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.xiaoming;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.xiaoqiang;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŒ…çš„å‘½å"><a href="#åŒ…çš„å‘½å" class="headerlink" title="åŒ…çš„å‘½å"></a>åŒ…çš„å‘½å</h3><ul><li><p>å‘½åè§„åˆ™ï¼š</p><p>åªèƒ½åŒ…å«æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ã€å°åœ†ç‚¹ï¼Œä½†ä¸èƒ½ç”¨æ•°å­—å¼€å¤´ï¼Œä¸èƒ½æ˜¯å…³é”®å­—æˆ–ä¿ç•™å­—</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">demo</span>.<span class="hljs-number">12</span>a  //é”™è¯¯ï¼Œ<span class="hljs-number">12</span>aæ˜¯æ•°å­—å¼€å¤´<br></code></pre></td></tr></table></figure></li><li><p>å‘½åè§„èŒƒ</p><p>ä¸€èˆ¬æ—¶å°å†™å­—æ¯ + å°åœ†ç‚¹ï¼šcom.å…¬å¸å.é¡¹ç›®å.ä¸šåŠ¡æ¨¡å—å</p></li></ul><h3 id="å¸¸ç”¨çš„åŒ…"><a href="#å¸¸ç”¨çš„åŒ…" class="headerlink" title="å¸¸ç”¨çš„åŒ…"></a>å¸¸ç”¨çš„åŒ…</h3><ul><li>java.lang.*  &#x2F;&#x2F;langåŒ…æ˜¯åŸºæœ¬åŒ…ï¼Œé»˜è®¤å¼•å…¥ï¼Œä¸éœ€è¦å†æ‰‹åŠ¨å¼•å…¥</li><li>java.util.*  &#x2F;&#x2F;utilåŒ…ï¼Œç³»ç»Ÿæä¾›çš„å·¥å…·åŒ…ï¼Œå·¥å…·ç±»ï¼Œä½¿ç”¨ Scanner</li><li>java.net.*  &#x2F;&#x2F;ç½‘ç»œåŒ…ï¼Œç½‘ç»œå¼€å‘</li><li>java.awt.*  &#x2F;&#x2F;æ˜¯åšjavaçš„ç•Œé¢å¼€å‘ï¼ŒGUI</li></ul><h3 id="åŒ…çš„ä½¿ç”¨ç»†èŠ‚"><a href="#åŒ…çš„ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="åŒ…çš„ä½¿ç”¨ç»†èŠ‚"></a>åŒ…çš„ä½¿ç”¨ç»†èŠ‚</h3><ul><li><p>å¦‚ä½•å¼•å…¥åŒ…</p><ol><li>import åŒ….ç±»  &#x2F;&#x2F;åªå¼•å…¥è¯¥åŒ…é‡Œé¢çš„è¿™ä¸€ä¸ªç±»</li><li>import åŒ….*  &#x2F;&#x2F;è¯¥åŒ…é‡Œé¢çš„æ‰€æœ‰ç±»éƒ½å¼•å…¥</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.java_study.pkg;<br><br><span class="hljs-keyword">import</span>  java.util.Scanner;  <span class="hljs-comment">//è¡¨ç¤ºåªä¼šå¼•å…¥java.util åŒ…ä¸‹çš„ Scannerç±»</span><br><span class="hljs-keyword">import</span>  java.util.*;  <span class="hljs-comment">//è¡¨ç¤ºå°†java.util åŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½å¼•å…¥(å¯¼å…¥)</span><br><span class="hljs-comment">//å»ºè®®ï¼šéœ€è¦ä½¿ç”¨å“ªä¸ªç±»ï¼Œå°±å¯¼å…¥å“ªä¸ªç±»å³å¯ï¼Œå³æ¨èä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Import01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//... ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚</p><ol><li>package çš„ä½œç”¨æ˜¯å£°æ˜å½“å‰ç±»æ‰€åœ¨çš„åŒ…ï¼Œéœ€è¦æ”¾åœ¨classçš„æœ€ä¸Šé¢ï¼Œä¸€ä¸ªç±»ä¸­æœ€å¤šåªæœ‰ä¸€æ¡packageè¯­å¥</li><li>importæŒ‡ä»¤ ä½ç½®æ”¾åœ¨packageçš„ä¸‹é¢ï¼Œåœ¨ç±»å®šä¹‰å‰é¢ï¼Œå¯ä»¥æœ‰å¤šå¥ä¸”æ²¡æœ‰é¡ºåºè¦æ±‚</li><li><strong>åŒåŒ…çš„ä¸åŒç±»ä¹‹é—´å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦å¯¼å…¥</strong></li></ol></li></ul><h2 id="è®¿é—®ä¿®é¥°ç¬¦"><a href="#è®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦"></a>è®¿é—®ä¿®é¥°ç¬¦</h2><h3 id="åŸºæœ¬ä»‹ç»-2"><a href="#åŸºæœ¬ä»‹ç»-2" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p>java æä¾›å››ç§è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦å·ï¼Œç”¨äºæ§åˆ¶ æ–¹æ³•å’Œå±æ€§ çš„è®¿é—®æƒé™ï¼š</p><ol><li>publicï¼šå¯¹å¤–å…¬å¼€</li><li>protectedï¼šå¯¹å­ç±»å’ŒåŒä¸€ä¸ªåŒ…ä¸­çš„ç±»å…¬å¼€</li><li>é»˜è®¤ï¼šå‘åŒä¸€ä¸ªåŒ…çš„ç±»å…¬å¼€</li><li>privateï¼šåªæœ‰æœ¬ç±»å¯ä»¥è®¿é—®ï¼Œä¸å¯¹å¤–å…¬å¼€</li></ol> <img src="image-20220830161016547.png" alt="image-20220830161016547" style="zoom: 80%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.modifier;<br><span class="hljs-keyword">import</span> com.java_study.pkg.D;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        a.func1();  <span class="hljs-comment">//æœ¬ç±»æ–¹æ³•ï¼Œå››ç§è®¿é—®ä¿®é¥°ç¬¦å‡å¯è®¿é—®</span><br><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>        b.func2();  <span class="hljs-comment">//åŒåŒ…ä¸åŒç±»æ–¹æ³•ï¼Œprivate ä¸å¯è®¿é—®ï¼Œå…¶å®ƒä¸‰ç§å‡å¯</span><br><br>        <span class="hljs-type">D</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>();<br>        d.func4();  <span class="hljs-comment">//ä¸åŒåŒ…ä¸‹ï¼Œåªèƒ½è®¿é—® public</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åªæœ‰ public å’Œ é»˜è®¤ å¯ä»¥ä¿®é¥°ç±»</span><br><span class="hljs-comment">// åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ª public ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span>&#123;<br><br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.modifier;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><br>    <span class="hljs-comment">//å››ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸åŒçš„è®¿é—®ä¿®é¥°ç¬¦ä¿®é¥°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">protected</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> <span class="hljs-number">400</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//æœ¬ç±»çš„æ–¹æ³•ï¼Œå››ç§è®¿é—®ä¿®é¥°çš„éƒ½å¯ä»¥è®¿é—®åˆ°</span><br>        <span class="hljs-comment">//è¯¥æ–¹æ³•å¯ä»¥è®¿é—®ä¸Šé¢å››ä¸ªå±æ€§</span><br>        System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + n1 + <span class="hljs-string">&quot; n2=&quot;</span> + n2 + <span class="hljs-string">&quot; n3=&quot;</span> + n3 + <span class="hljs-string">&quot; n4=&quot;</span> + n4);<br>    &#125;<br><br>    <span class="hljs-comment">//æˆå‘˜æ–¹æ³•ä¹Ÿä¸€æ ·</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span>&#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//åœ¨åŒä¸€ç±»ä¸­ï¼Œå››ç§æƒé™å‡å¯è®¿é—®</span><br>        m1();<br>        m2();<br>        m3();<br>        m4();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.modifier;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        <span class="hljs-comment">//åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼Œå¯ä»¥è®¿é—® publicã€protectedã€é»˜è®¤ ï¼Œä¸å¯ä»¥è®¿é—®private</span><br>        System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + a.n1 + <span class="hljs-string">&quot; n2=&quot;</span> + a.n2 + <span class="hljs-string">&quot; n3=&quot;</span> + a.n3);<br>        <span class="hljs-comment">//åŠ  n4 ä¹‹åå°†ä¼šæŠ¥é”™ï¼š&#x27;n4&#x27; åœ¨ &#x27;com.java_study.modifier.A&#x27; ä¸­å…·æœ‰ private è®¿é—®æƒé™</span><br><br>        <span class="hljs-comment">//åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼Œå¯ä»¥è®¿é—® publicã€protectedã€é»˜è®¤ ï¼Œä¸å¯ä»¥è®¿é—®private</span><br>        a.m1();<br>        a.m2();<br>        a.m3();<br>        <span class="hljs-comment">// a.m4(); //æŠ¥é”™</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.pkg;<br><br><span class="hljs-keyword">import</span> com.java_study.modifier.A;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func4</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        <span class="hljs-comment">//åœ¨ä¸åŒåŒ…ä¸­ï¼Œåªèƒ½è®¿é—® public æƒé™</span><br>        System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + a.n1);<br><br>        <span class="hljs-comment">//åœ¨ä¸åŒåŒ…ä¸­ï¼Œåªèƒ½è®¿é—® public æƒé™</span><br>        a.m1();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li>ä¿®é¥°ç¬¦å¯ä»¥ç”¨æ¥ä¿®é¥°ç±»ä¸­çš„å±æ€§ï¼Œæˆå‘˜æ–¹æ³•ä»¥åŠç±»</li><li><strong>åªæœ‰ é»˜è®¤ å’Œ public æ‰èƒ½ä¿®é¥°ç±»</strong></li><li>æˆå‘˜æ–¹æ³•çš„è®¿é—®è§„åˆ™å’Œå±æ€§å®Œå…¨ä¸€æ ·</li><li><strong>å…³äºåœ¨å­ç±»ä¸­çš„è®¿é—®æƒé™åé¢å†å­¦</strong></li></ul><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>å°è£…å°±æ˜¯æŠŠæŠ½è±¡å‡ºçš„æ•°æ®[å±æ€§]å’Œå¯¹æ•°æ®çš„æ“ä½œ[æ–¹æ³•]å°è£…åœ¨ä¸€èµ·ï¼Œæ•°æ®èƒŒä¿æŠ¤åœ¨å†…éƒ¨ï¼Œç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†åªæœ‰é€šè¿‡è¢«æˆæƒçš„æ“ä½œ[æ–¹æ³•]ï¼Œæ‰èƒ½å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚</p><h3 id="å°è£…çš„ç†è§£ä¸å¥½å¤„"><a href="#å°è£…çš„ç†è§£ä¸å¥½å¤„" class="headerlink" title="å°è£…çš„ç†è§£ä¸å¥½å¤„"></a>å°è£…çš„ç†è§£ä¸å¥½å¤„</h3><ul><li><p>éšè—å®ç°ç»†èŠ‚ï¼šæ–¹æ³•(è¿æ¥æ•°æ®åº“) &lt;â€“ è°ƒç”¨(ä¼ å…¥å‚æ•°â€¦)</p></li><li><p>å¯ä»¥å¯¹æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œä¿è¯å®‰å…¨åˆç†  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Person &#123;name, age&#125;<br><span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>p.name = <span class="hljs-string">&quot;jack&quot;</span>;<br>p.age = <span class="hljs-number">1200</span>;  <span class="hljs-comment">//ä¸åˆç†çš„æ•°æ®</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="å°è£…çš„å®ç°æ­¥éª¤"><a href="#å°è£…çš„å®ç°æ­¥éª¤" class="headerlink" title="å°è£…çš„å®ç°æ­¥éª¤"></a>å°è£…çš„å®ç°æ­¥éª¤</h3><ol><li>å°†å±æ€§è¿›è¡Œç§æœ‰åŒ– private [ä¸èƒ½ç›´æ¥ä¿®æ”¹å±æ€§]</li><li>æä¾›ä¸€ä¸ªå…¬å…±çš„ set æ–¹æ³•ï¼Œç”¨äºå¯¹å±æ€§è¾“å…¥åˆ¤æ–­å¹¶èµ‹å€¼</li><li>æä¾›ä¸€ä¸ªå…¬å…±çš„ get æ–¹æ³•ï¼Œç”¨äºè·å–å±æ€§çš„å€¼</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.encap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Encapsulation01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>        <span class="hljs-comment">//person.age = 3000;  //æŠ¥é”™ï¼šç§æœ‰æƒé™ä¸èƒ½è®¿é—®</span><br>        person.setName(<span class="hljs-string">&quot;jack&quot;</span>);<br>        person.setAge(<span class="hljs-number">18</span>);<br>        person.setSalary(<span class="hljs-number">30000</span>);<br>        System.out.println(person.info());<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">public</span> String name;  <span class="hljs-comment">//åå­—å…¬å¼€</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;  <span class="hljs-comment">//age ç§æœ‰åŒ–</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary; <span class="hljs-comment">//è–ªæ°´ ç§æœ‰åŒ–</span><br><br>    <span class="hljs-comment">// æ„é€ å™¨ ä¸ setXXX ç»“åˆ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> salary)</span> &#123;<br><span class="hljs-comment">//        this.name = name;</span><br><span class="hljs-comment">//        this.age = age;</span><br><span class="hljs-comment">//        this.salary = salary;</span><br>        <span class="hljs-comment">//æˆ‘ä»¬å¯ä»¥å°† set æ–¹æ³•å†™åœ¨æ„é€ å™¨ä¸­ï¼Œè¿™æ ·ä»ç„¶å¯ä»¥éªŒè¯</span><br>        setName(name);<br>        setAge(age);<br>        setSalary(salary);<br>    &#125;<br><br>    <span class="hljs-comment">// å¿«æ·é”®å†™ set å’Œ get</span><br>    <span class="hljs-comment">// Alt + ins</span><br>    <span class="hljs-comment">// ç„¶åæ ¹æ®è¦æ±‚å®Œå–„ä»£ç </span><br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-comment">//åŠ å…¥å¯¹æ•°æ®çš„æ ¡éªŒ</span><br>        <span class="hljs-keyword">if</span>(name.length() &gt;=<span class="hljs-number">2</span> &amp;&amp; name.length()&lt;=<span class="hljs-number">6</span>)&#123;<br>            <span class="hljs-built_in">this</span>.name = name;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;åå­—é•¿åº¦ä¸å¯¹ï¼Œéœ€è¦ 2-6 ä¸ªå­—ç¬¦ï¼Œé»˜è®¤ä¸º æ— å&quot;</span>);<br>            <span class="hljs-built_in">this</span>.name = <span class="hljs-string">&quot;æ— å&quot;</span>;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-keyword">if</span>(age&gt;=<span class="hljs-number">1</span> &amp;&amp; age&lt;=<span class="hljs-number">120</span>)&#123;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;å¹´é¾„åº”åœ¨ 1-120 ä¹‹é—´ï¼Œé»˜è®¤å€¼ä¸º18&quot;</span>);<br>            <span class="hljs-built_in">this</span>.age = <span class="hljs-number">18</span>;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSalary</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å¢åŠ å¯¹å½“å‰å¯¹è±¡çš„æƒé™åˆ¤æ–­</span><br>        <span class="hljs-keyword">return</span> salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">double</span> salary)</span> &#123;<br> <span class="hljs-keyword">if</span>(salary&gt;=<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-built_in">this</span>.salary = salary;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-built_in">this</span>.salary = <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">info</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ä¿¡æ¯ä¸º name=&quot;</span> + name + <span class="hljs-string">&quot; age=&quot;</span> + age + <span class="hljs-string">&quot; è–ªæ°´=&quot;</span> + salary;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><h3 id="ç»§æ‰¿åŸºæœ¬ä»‹ç»å’Œç¤ºæ„å›¾"><a href="#ç»§æ‰¿åŸºæœ¬ä»‹ç»å’Œç¤ºæ„å›¾" class="headerlink" title="ç»§æ‰¿åŸºæœ¬ä»‹ç»å’Œç¤ºæ„å›¾"></a>ç»§æ‰¿åŸºæœ¬ä»‹ç»å’Œç¤ºæ„å›¾</h3><p>ç»§æ‰¿å¯ä»¥è§£å†³ä»£ç å¤ç”¨ï¼Œè®©æˆ‘ä»¬çš„ç¼–ç¨‹æ›´åŠ é è¿‘äººç±»æ€ç»´ã€‚å½“å¤šä¸ªç±»å­˜åœ¨ç›¸åŒçš„å±æ€§(å˜é‡)å’Œæ–¹æ³•æ—¶ï¼Œå¯ä»¥ä»è¿™äº›ç±»ä¸­æŠ½è±¡å‡ºçˆ¶ç±»ï¼Œåœ¨çˆ¶ç±»ä¸­å®šä¹‰è¿™äº›ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€æœ‰çš„å­ç±»ä¸éœ€è¦é‡æ–°å®šä¹‰è¿™äº›å±æ€§å’Œæ–¹æ³•ï¼Œåªéœ€è¦é€šè¿‡ extends æ¥å£°æ˜ç»§æ‰¿çˆ¶ç±»å³å¯ã€‚</p> <img src="image-20220830221838618.png" alt="image-20220830221838618" style="zoom:40%;" /><h3 id="ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•"><a href="#ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•"></a>ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">class å­ç±» extends çˆ¶ç±» &#123;<br>  <span class="hljs-comment">//... ...</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å­ç±»ä¼šè‡ªåŠ¨æ‹¥æœ‰çˆ¶ç±»å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•</li><li>çˆ¶ç±» åˆå« è¶…ç±»ï¼ŒåŸºç±»</li><li>å­ç±» åˆå« æ´¾ç”Ÿç±»</li></ul><p><strong>å¿«é€Ÿå…¥é—¨</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.extend;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Extends01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Pupil</span> <span class="hljs-variable">pupil</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pupil</span>();<br>        pupil.name = <span class="hljs-string">&quot;é“¶è§’å¤§ç‹~&quot;</span>;<br>        pupil.age = <span class="hljs-number">11</span>;<br>        pupil.testing();<br>        pupil.setScore(<span class="hljs-number">50</span>);<br>        pupil.showInfo();<br>        System.out.println(<span class="hljs-string">&quot;=======&quot;</span>);<br>        <span class="hljs-type">Graduate</span> <span class="hljs-variable">graduate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Graduate</span>();<br>        graduate.name = <span class="hljs-string">&quot;é‡‘è§’å¤§ç‹~&quot;</span>;<br>        graduate.age = <span class="hljs-number">23</span>;<br>        graduate.testing();<br>        graduate.setScore(<span class="hljs-number">80</span>);<br>        graduate.showInfo();<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.extend;<br><span class="hljs-comment">//çˆ¶ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">//å…±æœ‰å±æ€§</span><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-comment">//å…±æœ‰æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showInfo</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å­¦ç”Ÿ &quot;</span> + name + <span class="hljs-string">&quot; å¹´é¾„ &quot;</span> + age + <span class="hljs-string">&quot; æˆç»© &quot;</span> + score);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.extend;<br><span class="hljs-comment">//å¤§å­¦ç”Ÿ ç±» -&gt; æ¨¡æ‹Ÿå¤§å­¦ç”Ÿçš„è€ƒè¯•ç®€å•æƒ…å†µ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Graduate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Student</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testing</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å¤§å­¦ç”Ÿ &quot;</span> + name + <span class="hljs-string">&quot; æ­£åœ¨è€ƒå¤§å­¦æ•°å­¦&quot;</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.extend;<br><span class="hljs-comment">// å°å­¦ç”Ÿ ç±» -&gt; æ¨¡æ‹Ÿå°å­¦ç”Ÿè€ƒè¯•çš„æƒ…å†µ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pupil</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Student</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testing</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å°å­¦ç”Ÿ &quot;</span>+ name +<span class="hljs-string">&quot; æ­£åœ¨è€ƒå°å­¦æ•°å­¦&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ç»§æ‰¿çš„ç»†èŠ‚é—®é¢˜-é‡è¦"><a href="#ç»§æ‰¿çš„ç»†èŠ‚é—®é¢˜-é‡è¦" class="headerlink" title="ç»§æ‰¿çš„ç»†èŠ‚é—®é¢˜(é‡è¦)"></a>ç»§æ‰¿çš„ç»†èŠ‚é—®é¢˜(é‡è¦)</h3><p>ç»§æ‰¿çš„å¥½å¤„ï¼š</p><ul><li>æé«˜ä»£ç å¤ç”¨æ€§</li><li>æé«˜ä»£ç çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§</li></ul><p><strong>ç»§æ‰¿çš„ç»†èŠ‚é—®é¢˜ï¼ˆé‡è¦ï¼‰ï¼š</strong></p><ul><li><p>å­ç±»ç»§æ‰¿äº†çˆ¶ç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­éç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œ</p><p>ä½†æ˜¯å­ç±»ä¸èƒ½ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¦é€šè¿‡çˆ¶ç±»ä¸­çš„å…¬æœ‰æ–¹æ³•å»è®¿é—®</p></li><li><p>å­ç±»å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ï¼Œå®Œæˆçˆ¶ç±»çš„åˆå§‹åŒ–</p></li><li><p>å½“åˆ›å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œä¸ç®¡ä½¿ç”¨å­ç±»çš„å“ªä¸ªæ„é€ å™¨ï¼Œ<strong>é»˜è®¤æƒ…å†µä¸‹æ€»ä¼šå»è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨</strong>ï¼Œ</p><p>å¦‚æœçˆ¶ç±»æ²¡æœ‰æä¾›æ— å‚æ„é€ å™¨ï¼Œåˆ™å¿…é¡»åœ¨å­ç±»çš„æ„é€ å™¨ä¸­ç”¨ super å»æŒ‡å®šä½¿ç”¨çˆ¶ç±»çš„å“ªä¸ªæ„é€ å™¨å®Œæˆå¯¹çˆ¶ç±»</p><p>çš„åˆå§‹åŒ–å·¥ä½œã€‚å¦åˆ™ï¼Œç¼–è¯‘ä¸ä¼šé€šè¿‡</p></li><li><p>å¦‚æœå¸Œæœ›æŒ‡å®šå»è°ƒç”¨çˆ¶ç±»çš„æŸä¸ªæ„é€ å™¨ï¼Œåˆ™å¯ä»¥æ˜¾å¼åœ°è°ƒç”¨ä¸€ä¸‹</p></li><li><p>super åœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ”¾åœ¨æ„é€ å™¨ç¬¬ä¸€è¡Œ</p></li><li><p>super() å’Œ this() éƒ½åªèƒ½æ”¾åœ¨æ„é€ å™¨ç¬¬ä¸€è¡Œï¼Œå› æ­¤è¿™ä¸¤ä¸ªæ–¹æ³•ä¸èƒ½å…±å­˜åœ¨ä¸€ä¸ªæ„é€ å™¨é‡Œé¢</p></li><li><p>java æ‰€æœ‰ç±»éƒ½æ˜¯ Object ç±»çš„å­ç±», Object æ˜¯æ‰€æœ‰ç±»çš„åŸºç±»</p></li><li><p><strong>çˆ¶ç±»æ„é€ å™¨çš„è°ƒç”¨ä¸é™äºç›´æ¥çˆ¶ç±»ï¼Œå°†ä¸€ç›´å¾€ä¸Šè¿½æº¯ç›´åˆ° Object ç±»(é¡¶çº§çˆ¶ç±»)</strong></p></li><li><p><strong>å­ç±»æœ€å¤šåªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»(æŒ‡ç›´æ¥ç»§æ‰¿)ï¼Œå³ java ä¸­æ˜¯ å•ç»§æ‰¿æœºåˆ¶ã€‚</strong></p><p>æ€è€ƒï¼šå¦‚ä½•è®© A ç±»ç»§æ‰¿ B ç±»å’Œ C ç±»ï¼Ÿ ã€A ç»§æ‰¿ Bï¼Œ B ç»§æ‰¿ Cã€‘</p></li><li><p>ä¸èƒ½æ»¥ç”¨ç»§æ‰¿ï¼Œå­ç±»å’Œçˆ¶ç±»ä¹‹é—´å¿…é¡»æ»¡è¶³ is-a çš„é€»è¾‘å…³ç³»</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// System.out.println(&quot;===ç¬¬ 1 ä¸ªå¯¹è±¡====&quot;);</span><br>        <span class="hljs-comment">// Sub sub = new Sub(); //åˆ›å»ºäº†å­ç±»å¯¹è±¡ sub</span><br>        <span class="hljs-comment">// System.out.println(&quot;===ç¬¬ 2 ä¸ªå¯¹è±¡====&quot;);</span><br>        <span class="hljs-comment">// Sub sub2 = new Sub(&quot;jack&quot;); //åˆ›å»ºäº†å­ç±»å¯¹è±¡ sub2</span><br>        System.out.println(<span class="hljs-string">&quot;===ç¬¬ 3 å¯¹è±¡====&quot;</span>);<br>        <span class="hljs-type">Sub</span> <span class="hljs-variable">sub3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sub</span>(<span class="hljs-string">&quot;king&quot;</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">//åˆ›å»ºäº†å­ç±»å¯¹è±¡ sub2</span><br>        <span class="hljs-comment">//sub.sayOk();</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TopBase</span> &#123; <span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-comment">//4 ä¸ªå±æ€§</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> <span class="hljs-number">400</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//æ— å‚æ„é€ å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;çˆ¶ç±» Base()æ„é€ å™¨è¢«è°ƒç”¨....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-comment">//æœ‰å‚æ„é€ å™¨</span><br>        <span class="hljs-comment">//é»˜è®¤ super()</span><br>        System.out.println(<span class="hljs-string">&quot;çˆ¶ç±» Base(String name, int age)æ„é€ å™¨è¢«è°ƒç”¨....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-comment">//æœ‰å‚æ„é€ å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;çˆ¶ç±» Base(String name)æ„é€ å™¨è¢«è°ƒç”¨....&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//çˆ¶ç±»æä¾›ä¸€ä¸ª public çš„æ–¹æ³•,è¿”å›äº† n4</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getN4</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> n4;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test100</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test100&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test200</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test200&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">test300</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test300&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test400</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test400&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//call</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callTest400</span><span class="hljs-params">()</span> &#123;<br>        test400();<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-comment">//è¾“å…¥ ctrl + H å¯ä»¥çœ‹åˆ°ç±»çš„ç»§æ‰¿å…³ç³»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123; <span class="hljs-comment">//å­ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Sub</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-comment">//1. è€å¸ˆè¦è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨, å¦‚ä¸‹æˆ–è€… ä»€ä¹ˆéƒ½ä¸å†™,é»˜è®¤å°±æ˜¯è°ƒç”¨ super()</span><br>        <span class="hljs-comment">//super();//çˆ¶ç±»çš„æ— å‚æ„é€ å™¨</span><br>        <span class="hljs-comment">//2. è€å¸ˆè¦è°ƒç”¨çˆ¶ç±»çš„ Base(String name) æ„é€ å™¨</span><br>        <span class="hljs-comment">//super(&quot;hsp&quot;);</span><br>        <span class="hljs-comment">//3. è€å¸ˆè¦è°ƒç”¨çˆ¶ç±»çš„ Base(String name, int age) æ„é€ å™¨</span><br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;king&quot;</span>, <span class="hljs-number">20</span>);<br>        <span class="hljs-comment">//ç»†èŠ‚ï¼š super åœ¨ä½¿ç”¨æ—¶ï¼Œå¿…é¡»æ”¾åœ¨æ„é€ å™¨ç¬¬ä¸€è¡Œ</span><br>        <span class="hljs-comment">//ç»†èŠ‚: super() å’Œ this() éƒ½åªèƒ½æ”¾åœ¨æ„é€ å™¨ç¬¬ä¸€è¡Œï¼Œå› æ­¤è¿™ä¸¤ä¸ªæ–¹æ³•ä¸èƒ½å…±å­˜åœ¨ä¸€ä¸ªæ„é€ å™¨</span><br>        <span class="hljs-comment">//this() ä¸èƒ½å†ä½¿ç”¨äº†</span><br>        System.out.println(<span class="hljs-string">&quot;å­ç±» Sub(String name, int age)æ„é€ å™¨è¢«è°ƒç”¨....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Sub</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ— å‚æ„é€ å™¨</span><br>        <span class="hljs-comment">//super(); //é»˜è®¤è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨</span><br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-number">10</span>);<br>        System.out.println(<span class="hljs-string">&quot;å­ç±» Sub()æ„é€ å™¨è¢«è°ƒç”¨....&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//å½“åˆ›å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œä¸ç®¡ä½¿ç”¨å­ç±»çš„å“ªä¸ªæ„é€ å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ€»ä¼šå»è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Sub</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">30</span>);<br>        <span class="hljs-comment">//do nothing...</span><br>        System.out.println(<span class="hljs-string">&quot;å­ç±» Sub(String name)æ„é€ å™¨è¢«è°ƒç”¨....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayOk</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//å­ç±»æ–¹æ³•</span><br>        <span class="hljs-comment">//éç§æœ‰çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥åœ¨å­ç±»ç›´æ¥è®¿é—®</span><br>        <span class="hljs-comment">//ä½†æ˜¯ç§æœ‰å±æ€§å’Œæ–¹æ³•ä¸èƒ½åœ¨å­ç±»ç›´æ¥è®¿é—®</span><br>        System.out.println(n1 + <span class="hljs-string">&quot; &quot;</span> + n2 + <span class="hljs-string">&quot; &quot;</span> + n3);<br>        test100();<br>        test200();<br>        test300();<br>        <span class="hljs-comment">//test400();é”™è¯¯</span><br>        <span class="hljs-comment">//è¦é€šè¿‡çˆ¶ç±»æä¾›å…¬å…±çš„æ–¹æ³•å»è®¿é—®</span><br>        System.out.println(<span class="hljs-string">&quot;n4=&quot;</span> + getN4());<br>        callTest400();<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopBase</span> &#123; <span class="hljs-comment">//çˆ¶ç±»æ˜¯ Object</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TopBase</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//super(); Object çš„æ— å‚æ„é€ å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;æ„é€ å™¨ TopBase() è¢«è°ƒç”¨...&quot;</span>);<span class="hljs-comment">//1</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»§æ‰¿çš„æœ¬è´¨åˆ†æ-é‡è¦"><a href="#ç»§æ‰¿çš„æœ¬è´¨åˆ†æ-é‡è¦" class="headerlink" title="ç»§æ‰¿çš„æœ¬è´¨åˆ†æ(é‡è¦)"></a>ç»§æ‰¿çš„æœ¬è´¨åˆ†æ(é‡è¦)</h3><p>å½“å­ç±»å¯¹è±¡åˆ›å»ºå¥½åï¼Œå°†ä¼šå»ºç«‹ æŸ¥æ‰¾çš„å…³ç³»</p><p><strong>(1)</strong> é¦–å…ˆçœ‹å­ç±»æ˜¯å¦æœ‰è¯¥å±æ€§</p><p><strong>(2)</strong> å¦‚æœå­ç±»æœ‰è¿™ä¸ªå±æ€§ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ï¼Œåˆ™è¿”å›ä¿¡æ¯</p><p><strong>(3)</strong> å¦‚æœå­ç±»æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå°±çœ‹çˆ¶ç±»æœ‰æ²¡æœ‰è¿™ä¸ªå±æ€§</p><p>â€‹ï¼ˆå¦‚æœçˆ¶ç±»æœ‰è¯¥å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ï¼Œå°±è¿”å›ä¿¡æ¯..ï¼‰</p><p>â€‹ï¼ˆå¦‚æœçˆ¶ç±»æœ‰è¯¥å±æ€§ï¼Œä½†ä¸å¯è®¿é—®ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œä¸ä¼šç»§ç»­æ‰¾ä¸Šçº§çˆ¶ç±»ï¼‰</p><p><strong>(4)</strong> å¦‚æœçˆ¶ç±»æ²¡æœ‰å°±æŒ‰ç…§(3)çš„è§„åˆ™ï¼Œç»§ç»­æ‰¾ä¸Šçº§çˆ¶ç±»ï¼Œç›´åˆ° Objectâ€¦</p><p><strong>å­ç±»åˆ›å»ºçš„å†…å­˜å¸ƒå±€ï¼š</strong></p><img src="image-20220830225514550.png" alt="image-20220830225514550" style="zoom:50%;" /><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.extend;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è®²è§£ç»§æ‰¿çš„æœ¬è´¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsTheory</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Son</span> <span class="hljs-variable">son</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Son</span>();<span class="hljs-comment">//å†…å­˜çš„å¸ƒå±€</span><br>        <span class="hljs-comment">//?-&gt; è¿™æ—¶è¯·å¤§å®¶æ³¨æ„ï¼Œè¦æŒ‰ç…§æŸ¥æ‰¾å…³ç³»æ¥è¿”å›ä¿¡æ¯</span><br>        <span class="hljs-comment">//(1) é¦–å…ˆçœ‹å­ç±»æ˜¯å¦æœ‰è¯¥å±æ€§</span><br>        <span class="hljs-comment">//(2) å¦‚æœå­ç±»æœ‰è¿™ä¸ªå±æ€§ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ï¼Œåˆ™è¿”å›ä¿¡æ¯</span><br>        <span class="hljs-comment">//(3) å¦‚æœå­ç±»æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå°±çœ‹çˆ¶ç±»æœ‰æ²¡æœ‰è¿™ä¸ªå±æ€§(å¦‚æœçˆ¶ç±»æœ‰è¯¥å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ï¼Œå°±è¿”å›ä¿¡æ¯..)</span><br>        <span class="hljs-comment">//(4) å¦‚æœçˆ¶ç±»æ²¡æœ‰å°±æŒ‰ç…§(3)çš„è§„åˆ™ï¼Œç»§ç»­æ‰¾ä¸Šçº§çˆ¶ç±»ï¼Œç›´åˆ° Object...</span><br>        System.out.println(son.name);<span class="hljs-comment">//è¿”å›å°±æ˜¯å¤§å¤´å„¿å­</span><br>        <span class="hljs-comment">//System.out.println(son.age);//è¿”å›çš„å°±æ˜¯ 39</span><br>        <span class="hljs-comment">//System.out.println(son.getAge());//è¿”å›çš„å°±æ˜¯ 39</span><br>        System.out.println(son.hobby);<span class="hljs-comment">//è¿”å›çš„å°±æ˜¯æ—…æ¸¸</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GrandPa</span> &#123; <span class="hljs-comment">//çˆ·ç±»</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¤§å¤´çˆ·çˆ·&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">hobby</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æ—…æ¸¸&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;  <span class="hljs-comment">//å› ä¸ºFatherçš„ageæ˜¯ç§æœ‰å±æ€§ï¼ŒSonç±»ä¸èƒ½ç›´æ¥ä½¿ç”¨ageæ‰¾åˆ°Grandpaçš„age</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GrandPa</span> &#123;<span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¤§å¤´çˆ¸çˆ¸&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">39</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123; <span class="hljs-comment">//å­ç±»</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¤§å¤´å„¿å­&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="super"><a href="#super" class="headerlink" title="super"></a>super</h2><ul><li>åŸºæœ¬ä»‹ç»</li></ul><p>super ä»£è¡¨çˆ¶ç±»çš„å¼•ç”¨ï¼Œç”¨äºè®¿é—®çˆ¶ç±»çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨</p><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><ul><li><p>è®¿é—®çˆ¶ç±»çš„å±æ€§ï¼Œä½†ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ private å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">super</span>.å±æ€§å<br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ private æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">super</span>.æ–¹æ³•å(å‚æ•°åˆ—è¡¨)<br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®çˆ¶ç±»çš„æ„é€ å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">super</span>(å‚æ•°åˆ—è¡¨);  <span class="hljs-comment">//åªèƒ½æ”¾åœ¨æ„é€ å™¨çš„ç¬¬ä¸€å¥ï¼Œå¹¶ä¸”åªèƒ½å‡ºç°ä¸€æ¬¡</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="super-çš„ç›¸å…³ç»†èŠ‚"><a href="#super-çš„ç›¸å…³ç»†èŠ‚" class="headerlink" title="super çš„ç›¸å…³ç»†èŠ‚"></a>super çš„ç›¸å…³ç»†èŠ‚</h3><p>super å¸¦æ¥çš„å¥½å¤„</p><ul><li><p>è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨çš„å¥½å¤„ï¼ˆåˆ†å·¥æ˜ç¡®ï¼Œçˆ¶ç±»å±æ€§ç”±çˆ¶ç±»åˆå§‹åŒ–ï¼Œå­ç±»çš„å±æ€§ç”±å­ç±»åˆå§‹åŒ–ï¼‰</p></li><li><p>å½“å­ç±»ä¸­æœ‰å’Œçˆ¶ç±»ä¸­çš„æˆå‘˜ï¼ˆå±æ€§&#x2F;æ–¹æ³•ï¼‰é‡åæ—¶ï¼Œä¸ºäº†è®¿é—®çˆ¶ç±»çš„æˆå‘˜ï¼Œå¿…é¡»é€šè¿‡ super ã€‚</p><p>å¦‚æœæ²¡æœ‰é‡åï¼Œä½¿ç”¨ superã€thisã€ç›´æ¥è®¿é—® æ˜¯ä¸€æ ·çš„æ•ˆæœ</p></li><li><p>super çš„è®¿é—®ä¸é™äºç›´æ¥çˆ¶ç±»ï¼Œå¦‚æœçˆ·çˆ·ç±»å’Œæœ¬ç±»ä¸­æœ‰åŒåçš„æˆå‘˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ super å»è®¿é—®çˆ·çˆ·ç±»çš„æˆå‘˜</p><p>å¦‚æœå¤šä¸ªåŸºç±»ï¼ˆä¸Šçº§ç±»ï¼‰ä¸­éƒ½æœ‰åŒåçš„æˆå‘˜ï¼Œä½¿ç”¨ super è®¿é—®éµå¾ªå°±è¿‘åŸåˆ™ï¼ŒåŒæ—¶éµå¾ªç»§æ‰¿çš„è®¿é—®æƒé™è§„åˆ™</p></li><li><p>æ³¨æ„ï¼šå¦‚æœæŸ¥æ‰¾å±æ€§çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¾åˆ°äº†ä½†ä¸èƒ½è®¿é—®ï¼Œåˆ™æŠ¥é”™  cannot accessï¼›å¦‚æœæŸ¥æ‰¾å±æ€§çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æç¤ºå±æ€§ä¸å­˜åœ¨</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">888</span>;<br>    <span class="hljs-comment">//ç¼–å†™æµ‹è¯•æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//super çš„è®¿é—®ä¸é™äºç›´æ¥çˆ¶ç±»ï¼Œå¦‚æœçˆ·çˆ·ç±»å’Œæœ¬ç±»ä¸­æœ‰åŒåçš„æˆå‘˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ super å»è®¿é—®çˆ·çˆ·ç±»çš„æˆå‘˜ï¼›</span><br>        <span class="hljs-comment">// å¦‚æœå¤šä¸ªåŸºç±»(ä¸Šçº§ç±»)ä¸­éƒ½æœ‰åŒåçš„æˆå‘˜ï¼Œä½¿ç”¨ super è®¿é—®éµå¾ªå°±è¿‘åŸåˆ™ã€‚A-&gt;B-&gt;C</span><br>        System.out.println(<span class="hljs-string">&quot;super.n1=&quot;</span> + <span class="hljs-built_in">super</span>.n1);<br>        <span class="hljs-built_in">super</span>.cal();<br>    &#125;<br>    <span class="hljs-comment">//è®¿é—®çˆ¶ç±»çš„å±æ€§ , ä½†ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ private å±æ€§ [æ¡ˆä¾‹]super.å±æ€§å</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-built_in">super</span>.n1 + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">super</span>.n2 + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">super</span>.n3 );<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cal</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B ç±»çš„ cal() æ–¹æ³•...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sum</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B ç±»çš„ sum()&quot;</span>);<br>        <span class="hljs-comment">//å¸Œæœ›è°ƒç”¨çˆ¶ç±»-A çš„ cal æ–¹æ³•</span><br>        <span class="hljs-comment">//è¿™æ—¶ï¼Œå› ä¸ºå­ç±» B æ²¡æœ‰ cal æ–¹æ³•ï¼Œå› æ­¤æˆ‘å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹å¼</span><br>        <span class="hljs-comment">//æ‰¾ cal æ–¹æ³•æ—¶(cal() å’Œ this.cal())ï¼Œé¡ºåºæ˜¯:</span><br>        <span class="hljs-comment">// (1)å…ˆæ‰¾æœ¬ç±»ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨</span><br>        <span class="hljs-comment">// (2)å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ‰¾çˆ¶ç±»(å¦‚æœæœ‰ï¼Œå¹¶å¯ä»¥è°ƒç”¨ï¼Œåˆ™è°ƒç”¨)</span><br>        <span class="hljs-comment">// (3)å¦‚æœçˆ¶ç±»æ²¡æœ‰ï¼Œåˆ™ç»§ç»­æ‰¾çˆ¶ç±»çš„çˆ¶ç±»,æ•´ä¸ªè§„åˆ™ï¼Œå°±æ˜¯ä¸€æ ·çš„,ç›´åˆ° Object ç±»</span><br>        <span class="hljs-comment">// æç¤ºï¼šå¦‚æœæŸ¥æ‰¾æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¾åˆ°äº†ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®ï¼Œ åˆ™æŠ¥é”™, cannot access</span><br>        <span class="hljs-comment">// å¦‚æœæŸ¥æ‰¾æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æç¤ºæ–¹æ³•ä¸å­˜åœ¨</span><br>        <span class="hljs-comment">//cal();</span><br>        <span class="hljs-built_in">this</span>.cal(); <span class="hljs-comment">//ç­‰ä»· cal</span><br>        <span class="hljs-comment">//æ‰¾ cal æ–¹æ³•(super.call()) çš„é¡ºåºæ˜¯ç›´æ¥æŸ¥æ‰¾çˆ¶ç±»ï¼Œå…¶ä»–çš„è§„åˆ™ä¸€æ ·</span><br>        <span class="hljs-comment">//super.cal();</span><br>        <span class="hljs-comment">//æ¼”ç¤ºè®¿é—®å±æ€§çš„è§„åˆ™</span><br>        <span class="hljs-comment">//n1 å’Œ this.n1 æŸ¥æ‰¾çš„è§„åˆ™æ˜¯</span><br>        <span class="hljs-comment">//(1) å…ˆæ‰¾æœ¬ç±»ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨</span><br>        <span class="hljs-comment">//(2) å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ‰¾çˆ¶ç±»(å¦‚æœæœ‰ï¼Œå¹¶å¯ä»¥è°ƒç”¨ï¼Œåˆ™è°ƒç”¨)</span><br>        <span class="hljs-comment">//(3) å¦‚æœçˆ¶ç±»æ²¡æœ‰ï¼Œåˆ™ç»§ç»­æ‰¾çˆ¶ç±»çš„çˆ¶ç±»,æ•´ä¸ªè§„åˆ™ï¼Œå°±æ˜¯ä¸€æ ·çš„,ç›´åˆ° Object ç±»</span><br>        <span class="hljs-comment">// æç¤ºï¼šå¦‚æœæŸ¥æ‰¾å±æ€§çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¾åˆ°äº†ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®ï¼Œ åˆ™æŠ¥é”™, cannot access</span><br>        <span class="hljs-comment">// å¦‚æœæŸ¥æ‰¾å±æ€§çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æç¤ºå±æ€§ä¸å­˜åœ¨</span><br>        System.out.println(n1);<br>        System.out.println(<span class="hljs-built_in">this</span>.n1);<br>        <span class="hljs-comment">//æ‰¾ n1 (super.n1) çš„é¡ºåºæ˜¯ç›´æ¥æŸ¥æ‰¾çˆ¶ç±»å±æ€§ï¼Œå…¶ä»–çš„è§„åˆ™ä¸€æ ·</span><br>        System.out.println(<span class="hljs-built_in">super</span>.n1);<br>    &#125;<br>    <span class="hljs-comment">//è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ï¼Œä¸èƒ½è®¿é—®çˆ¶ç±»çš„ private æ–¹æ³•      super.æ–¹æ³•å(å‚æ•°åˆ—è¡¨);</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.test100();<br>        <span class="hljs-built_in">super</span>.test200();<br>        <span class="hljs-built_in">super</span>.test300();<br>        <span class="hljs-comment">//super.test400();//ä¸èƒ½è®¿é—®çˆ¶ç±» private æ–¹æ³•</span><br>    &#125;<br>    <span class="hljs-comment">//è®¿é—®çˆ¶ç±»çš„æ„é€ å™¨(è¿™ç‚¹å‰é¢ç”¨è¿‡)ï¼šsuper(å‚æ•°åˆ—è¡¨);åªèƒ½æ”¾åœ¨æ„é€ å™¨çš„ç¬¬ä¸€å¥ï¼Œåªèƒ½å‡ºç°ä¸€å¥ï¼</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//super();</span><br>        <span class="hljs-comment">//super(&quot;jack&quot;, 10);</span><br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;jack&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="super-å’Œ-this-çš„æ¯”è¾ƒ"><a href="#super-å’Œ-this-çš„æ¯”è¾ƒ" class="headerlink" title="super å’Œ this çš„æ¯”è¾ƒ"></a>super å’Œ this çš„æ¯”è¾ƒ</h3> <img src="image-20220901151016279.png" alt="image-20220901151016279" style="zoom: 48%;" /><h2 id="æ–¹æ³•é‡å†™-x2F-è¦†ç›–"><a href="#æ–¹æ³•é‡å†™-x2F-è¦†ç›–" class="headerlink" title="æ–¹æ³•é‡å†™&#x2F;è¦†ç›–"></a>æ–¹æ³•é‡å†™&#x2F;è¦†ç›–</h2><ul><li>åŸºæœ¬ä»‹ç»</li></ul><p>ç®€å•åœ°è¯´ï¼š<strong>æ–¹æ³•é‡å†™ï¼ˆè¦†ç›–ï¼‰</strong>å°±æ˜¯å­ç±»æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå’Œçˆ¶ç±»çš„æŸä¸ªæ–¹æ³•çš„ <strong>åç§°ã€è¿”å›ç±»å‹ã€å‚æ•°</strong> å‡ä¸€è‡´ï¼Œé‚£ä¹ˆå°±ç§°å­ç±»çš„è¿™ä¸ªæ–¹æ³•è¦†ç›–äº†çˆ¶ç±»çš„æ–¹æ³•ï¼ˆå…¶ä¸­çš„çˆ¶ç±»ä¸è¦æ±‚æ˜¯ç›´æ¥çˆ¶ç±»ï¼‰</p><h3 id="æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"><a href="#æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚" class="headerlink" title="æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"></a>æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚</h3><p>æ–¹æ³•é‡å†™éœ€è¦æ»¡è¶³çš„æ¡ä»¶</p><ul><li><p>å­ç±»æ–¹æ³•çš„ <strong>å‚æ•°ï¼Œæ–¹æ³•åç§°</strong> å‡è¦å’Œçˆ¶ç±»æ–¹æ³•ä¸€è‡´</p></li><li><p>å­ç±»æ–¹æ³•çš„ <strong>è¿”å›ç±»å‹</strong> è¦å’Œçˆ¶ç±»æ–¹æ³•çš„ <strong>è¿”å›ç±»å‹ä¸€è‡´</strong>ï¼Œæˆ–è€…æ˜¯çˆ¶ç±»<strong>è¿”å›ç±»å‹çš„å­ç±»</strong></p><p>æ¯”å¦‚ï¼šçˆ¶ç±»æ–¹æ³•è¿”å›ç±»å‹æ˜¯ Objectï¼Œå­ç±»è¿”å›ç±»å‹å¯ä»¥æ˜¯ String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//çˆ¶ç±»æ–¹æ³•</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-keyword">public</span> A <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-comment">//å­ç±»æ–¹æ³•</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-keyword">public</span> B <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-comment">//å…¶ä¸­Bæ˜¯Açš„å­ç±»</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å­ç±»æ–¹æ³•ä¸èƒ½ç¼©å°çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™</strong></p></li></ul><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><ul><li>å¤šæ€çš„åŸºæœ¬ä»‹ç»</li></ul><p>æ–¹æ³•æˆ–å¯¹è±¡å…·æœ‰å¤šç§å½¢æ€</p><h3 id="å¤šæ€çš„å…·ä½“ä½“ç°"><a href="#å¤šæ€çš„å…·ä½“ä½“ç°" class="headerlink" title="å¤šæ€çš„å…·ä½“ä½“ç°"></a>å¤šæ€çš„å…·ä½“ä½“ç°</h3><ul><li><h4 id="æ–¹æ³•çš„å¤šæ€"><a href="#æ–¹æ³•çš„å¤šæ€" class="headerlink" title="æ–¹æ³•çš„å¤šæ€"></a>æ–¹æ³•çš„å¤šæ€</h4><p><strong>é‡å†™å’Œé‡è½½å‡ä½“ç°å¤šæ€</strong></p></li><li><h4 id="å¯¹è±¡çš„å¤šæ€ï¼ˆ-æ ¸å¿ƒï¼Œå›°éš¾ï¼Œé‡ç‚¹ï¼‰"><a href="#å¯¹è±¡çš„å¤šæ€ï¼ˆ-æ ¸å¿ƒï¼Œå›°éš¾ï¼Œé‡ç‚¹ï¼‰" class="headerlink" title="å¯¹è±¡çš„å¤šæ€ï¼ˆ æ ¸å¿ƒï¼Œå›°éš¾ï¼Œé‡ç‚¹ï¼‰"></a><strong>å¯¹è±¡çš„å¤šæ€ï¼ˆ æ ¸å¿ƒï¼Œå›°éš¾ï¼Œé‡ç‚¹ï¼‰</strong></h4><ul><li><strong>ä¸€ä¸ªå¯¹è±¡çš„ç¼–è¯‘ç±»å‹å’Œè¿è¡Œç±»å‹å¯ä»¥ä¸ä¸€è‡´</strong></li><li>ç¼–è¯‘ç±»å‹åœ¨å®šä¹‰å¯¹è±¡æ˜¯å°±å·²ç»ç¡®å®šäº†ï¼Œä¸èƒ½æ”¹å˜</li><li>è¿è¡Œç±»å‹æ˜¯å¯ä»¥å˜åŒ–çš„</li><li><strong>ç¼–è¯‘ç±»å‹çœ‹ å®šä¹‰æ—¶ &#x3D; å·çš„ å·¦è¾¹ï¼Œè¿è¡Œç±»å‹çœ‹ &#x3D; å·çš„ å³è¾¹</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();  <span class="hljs-comment">// animal ç¼–è¯‘ç±»å‹æ˜¯ Animalï¼Œè¿è¡Œç±»å‹æ˜¯ Dog</span><br>animal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();  <span class="hljs-comment">// animal ç¼–è¯‘ç±»å‹ä»ç„¶æ˜¯ Animalï¼Œä½†è¿è¡Œç±»å‹å˜æˆäº† Cat</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.objectPoly;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyObject</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä½“éªŒå¯¹è±¡å¤šæ€ç‰¹ç‚¹</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(); <span class="hljs-comment">// animal ç¼–è¯‘ç±»å‹å°±æ˜¯ Animalï¼Œè¿è¡Œç±»å‹æ˜¯ Dog</span><br>        animal.cry(); <span class="hljs-comment">// å› ä¸ºè¿è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œanimal çš„è¿è¡Œç±»å‹æ˜¯ Dogï¼Œæ‰€ä»¥æ˜¯Dogçš„cry()</span><br><br>        animal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(); <span class="hljs-comment">// animal ç¼–è¯‘ç±»å‹ä»æ˜¯ Animalï¼Œè¿è¡Œç±»å‹æ˜¯ Cat</span><br>        animal.cry(); <span class="hljs-comment">// å› ä¸ºè¿è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œanimal çš„è¿è¡Œç±»å‹æ˜¯ Catï¼Œæ‰€ä»¥æ˜¯Catçš„cry()</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.objectPoly;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Dog cry()&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.objectPoly;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Cat cry()&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="å¤šæ€æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"><a href="#å¤šæ€æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚" class="headerlink" title="å¤šæ€æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"></a>å¤šæ€æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚</h3><p><strong>å¤šæ€çš„å‰æï¼š ä¸¤ä¸ªå¯¹è±¡ï¼ˆç±»ï¼‰å­˜åœ¨ç»§æ‰¿å…³ç³»</strong></p><h4 id="å¤šæ€çš„å‘ä¸Šè½¬å‹"><a href="#å¤šæ€çš„å‘ä¸Šè½¬å‹" class="headerlink" title="å¤šæ€çš„å‘ä¸Šè½¬å‹"></a>å¤šæ€çš„å‘ä¸Šè½¬å‹</h4><ul><li><p><strong>æœ¬è´¨ï¼šçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘äº†å­ç±»çš„å¯¹è±¡</strong></p></li><li><p>è¯­æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Java">çˆ¶ç±»ç±»å‹ å¼•ç”¨å = <span class="hljs-keyword">new</span> å­ç±»ç±»å‹();<br></code></pre></td></tr></table></figure></li><li><p><strong>ç‰¹ç‚¹ï¼š</strong>ç¼–è¯‘ç±»å‹çœ‹å·¦è¾¹ï¼Œè¿è¡Œç±»å‹çœ‹å³è¾¹</p><p>â€‹å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜ï¼ˆéœ€éµå®ˆè®¿é—®æƒé™ï¼‰</p><p>â€‹ä¸èƒ½è°ƒç”¨å­ç±»ä¸­çš„ç‰¹æœ‰æˆå‘˜ï¼ˆå› ä¸ºåœ¨ç¼–è¯‘é˜¶æ®µï¼Œèƒ½è°ƒç”¨å“ªäº›æˆå‘˜ï¼Œæ˜¯ç”±ç¼–è¯‘ç±»å‹å†³å®šçš„ï¼‰</p><p>â€‹<strong>æœ€ç»ˆè¿è¡Œæ•ˆæœçœ‹å­ç±»çš„å…·ä½“å®ç°ï¼ˆè¿è¡Œ(è°ƒç”¨æ–¹æ³•)æ—¶ï¼ŒæŒ‰ç…§ä»è¿è¡Œç±»å‹(å­ç±»)å¼€å§‹æŸ¥æ‰¾æ–¹æ³•ï¼‰</strong></p></li></ul><h4 id="å¤šæ€çš„å‘ä¸‹è½¬å‹"><a href="#å¤šæ€çš„å‘ä¸‹è½¬å‹" class="headerlink" title="å¤šæ€çš„å‘ä¸‹è½¬å‹"></a>å¤šæ€çš„å‘ä¸‹è½¬å‹</h4><ul><li><p>è¯­æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">å­ç±»ç±»å‹ å¼•ç”¨å = (å­ç±»ç±»å‹) çˆ¶ç±»å¼•ç”¨;<br></code></pre></td></tr></table></figure></li><li><p>åªèƒ½å¼ºè½¬çˆ¶ç±»çš„å¼•ç”¨ï¼Œä¸èƒ½å¼ºè½¬çˆ¶ç±»çš„å¯¹è±¡</p></li><li><p>è¦æ±‚çˆ¶ç±»çš„å¼•ç”¨å½“å‰å¿…é¡»æŒ‡å‘ç›®æ ‡ç±»å‹çš„å¯¹è±¡</p></li><li><p><strong>å‘ä¸‹è½¬å‹åï¼Œå¯ä»¥è°ƒç”¨å­ç±»ç±»å‹ä¸­æ‰€æœ‰çš„æˆå‘˜</strong></p></li><li><p>ï¼ˆç”¨ å¼•ç”¨çš„æŒ‡å‘ çš„æ€æƒ³æ¥æ€è€ƒï¼‰</p></li></ul><p>æ¡ˆä¾‹ï¼šå‘ä¸Šè½¬å‹å’Œå‘ä¸‹è½¬å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å‘ä¸Šè½¬å‹ï¼šçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘äº†å­ç±»çš„å¯¹è±¡</span><br>        <span class="hljs-comment">//è¯­æ³•ï¼šçˆ¶ç±»ç±»å‹ å¼•ç”¨å = new å­ç±»ç±»å‹();</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(); <span class="hljs-comment">// è¿™ä¸ªä¹Ÿæ²¡æœ‰é—®é¢˜ï¼ŒObject æ˜¯ Animal çš„çˆ¶ç±»</span><br><br>        <span class="hljs-comment">//å‘ä¸Šè½¬å‹è°ƒç”¨æ–¹æ³•çš„è§„åˆ™å¦‚ä¸‹:</span><br>        <span class="hljs-comment">//(1)å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜(éœ€éµå®ˆè®¿é—®æƒé™)</span><br>        <span class="hljs-comment">//(2)ä½†æ˜¯ä¸èƒ½è°ƒç”¨å­ç±»çš„ç‰¹æœ‰çš„æˆå‘˜</span><br>        <span class="hljs-comment">//   å› ä¸ºåœ¨ç¼–è¯‘é˜¶æ®µï¼Œèƒ½è°ƒç”¨å“ªäº›æˆå‘˜,æ˜¯ç”±ç¼–è¯‘ç±»å‹æ¥å†³å®šçš„</span><br>        <span class="hljs-comment">//   animal.catchMouse();é”™è¯¯</span><br>        <span class="hljs-comment">//(3)æœ€ç»ˆè¿è¡Œæ•ˆæœçœ‹å­ç±»(è¿è¡Œç±»å‹)çš„å…·ä½“å®ç°, å³è¿è¡Œ(è°ƒç”¨æ–¹æ³•)æ—¶ï¼Œä»å­ç±»(è¿è¡Œç±»å‹)å¼€å§‹æŸ¥æ‰¾æ–¹æ³•</span><br>        <span class="hljs-comment">//   ç„¶åè°ƒç”¨ï¼Œè§„åˆ™å’Œå‰é¢æˆ‘ä»¬è®²çš„æ–¹æ³•è°ƒç”¨è§„åˆ™ä¸€è‡´ã€‚</span><br>        animal.eat(); <span class="hljs-comment">//çŒ«åƒé±¼..</span><br>        animal.run(); <span class="hljs-comment">//è·‘</span><br>        animal.sleep(); <span class="hljs-comment">//ç¡</span><br>        animal.show(); <span class="hljs-comment">//hello,ä½ å¥½</span><br>        <br>        System.out.println(<span class="hljs-string">&quot;=============&quot;</span>);<br>        <br>        <span class="hljs-comment">//å¸Œæœ›å¯ä»¥è°ƒç”¨å­ç±»çš„ç‰¹æœ‰æ–¹æ³•ï¼ˆCatçš„catchMouse()æ–¹æ³•ï¼‰</span><br>        <span class="hljs-comment">//å¤šæ€çš„å‘ä¸‹è½¬å‹</span><br>        <span class="hljs-comment">//è¯­æ³•ï¼šå­ç±»ç±»å‹ å¼•ç”¨å = (å­ç±»ç±»å‹) çˆ¶ç±»å¼•ç”¨;</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> (Cat) animal;  <span class="hljs-comment">//ç¼–è¯‘ç±»å‹å˜æˆäº†Catï¼Œè¿è¡Œç±»å‹ä¹Ÿæ˜¯Cat</span><br>        cat.catchMouse();  <span class="hljs-comment">//çŒ«æŠ“è€é¼ </span><br>        <span class="hljs-comment">//(2)è¦æ±‚çˆ¶ç±»çš„å¼•ç”¨å¿…é¡»æŒ‡å‘çš„æ˜¯å½“å‰ç›®æ ‡ç±»å‹çš„å¯¹è±¡</span><br>        <span class="hljs-comment">// Dog dog = (Dog) animal; //é”™è¯¯</span><br>        <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;åŠ¨ç‰©&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;åƒ&quot;</span>);&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;è·‘&quot;</span>);&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sleep</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;ç¡&quot;</span>);&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;hello,ä½ å¥½&quot;</span>);&#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">// æ–¹æ³•é‡å†™</span><br>        System.out.println(<span class="hljs-string">&quot;çŒ«åƒé±¼&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">catchMouse</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">// Catçš„ç‰¹æœ‰æ–¹æ³•</span><br>        System.out.println(<span class="hljs-string">&quot;çŒ«æŠ“è€é¼ &quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">// æ–¹æ³•é‡å†™</span><br>        System.out.println(<span class="hljs-string">&quot;ç‹—åƒéª¨å¤´&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¤šæ€çš„å±æ€§é—®é¢˜"><a href="#å¤šæ€çš„å±æ€§é—®é¢˜" class="headerlink" title="å¤šæ€çš„å±æ€§é—®é¢˜"></a>å¤šæ€çš„å±æ€§é—®é¢˜</h4><ul><li><strong>å±æ€§æ²¡æœ‰é‡å†™ä¹‹è¯´ï¼Œå±æ€§çš„å€¼çœ‹ç¼–è¯‘ç±»å‹</strong></li><li><strong>instanceOf æ¯”è¾ƒæ“ä½œç¬¦</strong>ï¼Œç”¨äºåˆ¤æ–­å¯¹è±¡çš„ <strong>è¿è¡Œç±»å‹</strong> æ˜¯å¦ä¸º XXç±»å‹ æˆ– XXç±»å‹ çš„ å­ç±»å‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å±æ€§æ²¡æœ‰é‡å†™ä¹‹è¯´ï¼å±æ€§çš„å€¼çœ‹ç¼–è¯‘ç±»å‹</span><br>        <span class="hljs-type">Base</span> <span class="hljs-variable">base</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sub</span>();<span class="hljs-comment">//å‘ä¸Šè½¬å‹</span><br>        System.out.println(base.count);<span class="hljs-comment">// ï¼Ÿ çœ‹ç¼–è¯‘ç±»å‹ 10</span><br>        <span class="hljs-type">Sub</span> <span class="hljs-variable">sub</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sub</span>();<br>        System.out.println(sub.count);<span class="hljs-comment">//? çœ‹ç¼–è¯‘ç±»å‹ 20</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123; <span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<span class="hljs-comment">//å±æ€§</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123;<span class="hljs-comment">//å­ç±»</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<span class="hljs-comment">//å±æ€§</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyDetail03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">BB</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        System.out.println(bb <span class="hljs-keyword">instanceof</span> BB);  <span class="hljs-comment">//true</span><br>        System.out.println(bb <span class="hljs-keyword">instanceof</span> AA);  <span class="hljs-comment">//true</span><br><br>        <span class="hljs-comment">//aa ç¼–è¯‘ç±»å‹ AA, è¿è¡Œç±»å‹æ˜¯ BB</span><br>        <span class="hljs-comment">//BB æ˜¯ AA å­ç±»</span><br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        System.out.println(aa <span class="hljs-keyword">instanceof</span> AA);  <span class="hljs-comment">//true</span><br>        System.out.println(aa <span class="hljs-keyword">instanceof</span> BB);  <span class="hljs-comment">//true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;&#125;  <span class="hljs-comment">//çˆ¶ç±»</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AA</span> &#123;&#125;  <span class="hljs-comment">//å­ç±»</span><br></code></pre></td></tr></table></figure><h3 id="åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼ˆå¾ˆé‡è¦ï¼‰"><a href="#åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼ˆå¾ˆé‡è¦ï¼‰" class="headerlink" title="åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼ˆå¾ˆé‡è¦ï¼‰"></a>åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼ˆå¾ˆé‡è¦ï¼‰</h3><ul><li>å½“è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•ä¼šå’Œè¯¥å¯¹è±¡çš„ å†…å­˜åœ°å€&#x2F;è¿è¡Œç±»å‹ ç»‘å®š</li><li>å½“è°ƒç”¨å¯¹è±¡å±æ€§æ—¶ï¼Œæ²¡æœ‰åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼Œå“ªé‡Œå£°æ˜ï¼Œå“ªé‡Œä½¿ç”¨<strong>ï¼ˆç”¨è°çš„æ–¹æ³•å°±ç”¨è°çš„å±æ€§ï¼‰</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.dynamic_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicBinding</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//a çš„ç¼–è¯‘ç±»å‹ A, è¿è¡Œç±»å‹ B</span><br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">//å‘ä¸Šè½¬å‹</span><br>        System.out.println(a.sum()); <span class="hljs-comment">//? 40 -&gt; 30</span><br>        System.out.println(a.sum1()); <span class="hljs-comment">//? 30 -&gt; 20</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//åŠ¨æ€ç»‘å®šæœºåˆ¶:</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//çˆ¶ç±» sum()</span><br>        <span class="hljs-keyword">return</span> getI() + <span class="hljs-number">10</span>; <span class="hljs-comment">//20 + 10</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum1</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//çˆ¶ç±» sum1()</span><br>        <span class="hljs-keyword">return</span> i + <span class="hljs-number">10</span>; <span class="hljs-comment">//10 + 10</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getI</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//çˆ¶ç±» getI</span><br>        <span class="hljs-keyword">return</span> i;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span>&#123; <span class="hljs-comment">//å­ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<br>    <span class="hljs-comment">// public int sum() &#123;</span><br>    <span class="hljs-comment">// return i + 20;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getI</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//å­ç±» getI()</span><br>        <span class="hljs-keyword">return</span> i;<br>    &#125;<br>    <span class="hljs-comment">// public int sum1() &#123;</span><br>    <span class="hljs-comment">// return i + 10;</span><br>    <span class="hljs-comment">// &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¤šæ€æ•°ç»„"><a href="#å¤šæ€æ•°ç»„" class="headerlink" title="å¤šæ€æ•°ç»„"></a>å¤šæ€æ•°ç»„</h3><p>æ•°ç»„çš„å®šä¹‰ç±»å‹ä¸ºçˆ¶ç±»ç±»å‹ï¼Œé‡Œé¢ä¿å­˜çš„å®é™…å…ƒç´ ç±»å‹ä¸ºå­ç±»ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyArray</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åº”ç”¨å®ä¾‹ï¼šç°æœ‰ä¸€ä¸ªç»§æ‰¿ç»“æ„å¦‚ä¸‹ï¼šè¦æ±‚åˆ›å»º 1 ä¸ª Person å¯¹è±¡ã€2 ä¸ª Student å¯¹è±¡å’Œ 2 ä¸ª Teacher å¯¹è±¡,</span><br>        <span class="hljs-comment">// ç»Ÿä¸€æ”¾åœ¨æ•°ç»„ä¸­ï¼Œå¹¶è°ƒç”¨æ¯ä¸ªå¯¹è±¡say æ–¹æ³•.</span><br>        Person[] person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>[<span class="hljs-number">5</span>];<br>        person[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">20</span>);<br>        person[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;marry&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">100</span>);<br>        person[<span class="hljs-number">2</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-number">17</span>,<span class="hljs-number">30.1</span>);<br>        person[<span class="hljs-number">3</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teather</span>(<span class="hljs-string">&quot;scott&quot;</span>,<span class="hljs-number">30</span>,<span class="hljs-number">20000</span>);<br>        person[<span class="hljs-number">4</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teather</span>(<span class="hljs-string">&quot;king&quot;</span>,<span class="hljs-number">50</span>,<span class="hljs-number">30000</span>);<br>        <span class="hljs-comment">//å¾ªç¯éå†å¤šæ€æ•°ç»„ï¼Œè°ƒç”¨say</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; person.length; i++) &#123;<br>            <span class="hljs-comment">// æç¤ºï¼šperson[i]çš„ç¼–è¯‘ç±»å‹æ—¶Personï¼Œè¿è¡Œæƒ…å†µæ—¶æ ¹æ®å®é™…æƒ…å†µç”±JVMåˆ¤æ–­</span><br>            System.out.println(person[i].say()); <span class="hljs-comment">//åŠ¨æ€ç»‘å®šæœºåˆ¶</span><br>            <span class="hljs-comment">//åº”ç”¨å®ä¾‹å‡çº§ï¼šå¦‚ä½•è°ƒç”¨å­ç±»ç‰¹æœ‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚</span><br>            <span class="hljs-comment">//Teacher æœ‰ä¸€ä¸ª teach , Student æœ‰ä¸€ä¸ª study</span><br>            <span class="hljs-comment">//æ€ä¹ˆè°ƒç”¨ï¼Ÿ</span><br>            <span class="hljs-comment">//æ–¹æ³•ï¼šç±»å‹åˆ¤æ–­ + å‘ä¸‹è½¬å‹</span><br>            <span class="hljs-keyword">if</span> (person[i] <span class="hljs-keyword">instanceof</span> Teather) &#123;<br>                <span class="hljs-type">Teather</span> <span class="hljs-variable">teather</span> <span class="hljs-operator">=</span>(Teather) person[i]; <span class="hljs-comment">//å‘ä¸‹è½¬å‹</span><br>                teather.teach();<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (person[i] <span class="hljs-keyword">instanceof</span> Student) &#123;<br>                ((Student)person[i]).study();  <span class="hljs-comment">// åˆå¹¶ä¸ºä¸€æ¡è¯­å¥</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// è¿”å›åå­—å’Œå¹´é¾„</span><br>        <span class="hljs-keyword">return</span> name + <span class="hljs-string">&quot;\t&quot;</span> + age;<br>    &#125;<br>&#125;<br><br><br><br><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teather</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teather</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, age);<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSalary</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡å†™çˆ¶ç±»say</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è€å¸ˆ &quot;</span> + <span class="hljs-built_in">super</span>.say() + <span class="hljs-string">&quot; salary = &quot;</span> + salary;<br>    &#125;<br>    <span class="hljs-comment">//ç‰¹æœ‰æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;è€å¸ˆ &quot;</span> + getName() + <span class="hljs-string">&quot; æ­£åœ¨æˆè¯¾&quot;</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, age);<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡å†™çˆ¶ç±»say</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å­¦ç”Ÿ &quot;</span> + <span class="hljs-built_in">super</span>.say() + <span class="hljs-string">&quot; score = &quot;</span> + score;<br>    &#125;<br>    <span class="hljs-comment">//ç‰¹æœ‰æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">study</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å­¦ç”Ÿ &quot;</span> + getName() + <span class="hljs-string">&quot; æ­£åœ¨å­¦ä¹ &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¤šæ€å‚æ•°"><a href="#å¤šæ€å‚æ•°" class="headerlink" title="å¤šæ€å‚æ•°"></a>å¤šæ€å‚æ•°</h3><ul><li><p>æ–¹æ³•å®šä¹‰çš„å½¢å‚ç±»å‹ä¸ºçˆ¶ç±»ç±»å‹ï¼Œå®å‚ç±»å‹å…è®¸ä¸ºå­ç±»ç±»å‹</p><p>åº”ç”¨å®ä¾‹1ï¼šå‰é¢çš„ä¸»äººå–‚åŠ¨ç‰©</p><p>åº”ç”¨å®ä¾‹2ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyParameter</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Worker</span> <span class="hljs-variable">tom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">2500</span>);<br>        <span class="hljs-type">Manager</span> <span class="hljs-variable">milan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Manager</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">200000</span>);<br>        <span class="hljs-type">PolyParameter</span> <span class="hljs-variable">polyParameter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PolyParameter</span>();<br>        polyParameter.showEmpAnnual(tom);<br>        polyParameter.showEmpAnnual(milan);<br>        polyParameter.testWork(tom);<br>        polyParameter.testWork(milan);<br>    &#125;<br><span class="hljs-comment">//å®ç°è·å–ä»»ä½•å‘˜å·¥å¯¹è±¡çš„å¹´å·¥èµ„,å¹¶åœ¨ main æ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showEmpAnnual</span><span class="hljs-params">(Employee e)</span>&#123;<br>        System.out.println(e.getAnnual());<br>    &#125;<br><span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼ŒtestWork,å¦‚æœæ˜¯æ™®é€šå‘˜å·¥ï¼Œåˆ™è°ƒç”¨ work æ–¹æ³•ï¼Œå¦‚æœæ˜¯ç»ç†ï¼Œåˆ™è°ƒç”¨ manage æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWork</span><span class="hljs-params">(Employee e)</span>&#123;<br>        <span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> Worker)&#123;<br>            ((Worker) e).work();<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> Manager)&#123;<br>            ((Manager) e).manage();<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;ä¸åšå¤„ç†...&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br><br>    <span class="hljs-comment">//å¾—åˆ°å¹´å·¥èµ„çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAnnual</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">12</span> * salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSalary</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Manager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Employee</span>&#123;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-type">double</span> bonus;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Manager</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> salary, <span class="hljs-type">double</span> bonus)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, salary);<br>        <span class="hljs-built_in">this</span>.bonus = bonus;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getBonus</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bonus;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBonus</span><span class="hljs-params">(<span class="hljs-type">double</span> bonus)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bonus = bonus;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">manage</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç»ç† &quot;</span> + getName() + <span class="hljs-string">&quot; æ­£åœ¨ç®¡ç†&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//é‡å†™è·å–å¹´è–ªæ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAnnual</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getAnnual() + bonus;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Worker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Employee</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Worker</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, salary);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ™®é€šå‘˜å·¥ &quot;</span> + getName() + <span class="hljs-string">&quot; æ­£åœ¨å·¥ä½œ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAnnual</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//å› ä¸ºå…¶å®ƒå‘˜å·¥æ²¡æœ‰å…¶å®ƒæ”¶å…¥ï¼Œæ•…ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getAnnual();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h2 id="Object-ç±»è¯¦è§£"><a href="#Object-ç±»è¯¦è§£" class="headerlink" title="Object ç±»è¯¦è§£"></a>Object ç±»è¯¦è§£</h2><h3 id="equals-æ–¹æ³•"><a href="#equals-æ–¹æ³•" class="headerlink" title="equals æ–¹æ³•"></a>equals æ–¹æ³•</h3><ul><li><p>&#x3D;&#x3D; å’Œ equals çš„å¯¹æ¯”</p><ul><li><p>&#x3D;&#x3D; æ˜¯ä¸€ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ—¢å¯ä»¥åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œåˆå¯ä»¥åˆ¤æ–­å¼•ç”¨ç±»å‹</p><p>&#x3D;&#x3D; ï¼šå¦‚æœåˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œåˆ¤æ–­çš„æ˜¯å€¼æ˜¯å¦ç›¸ç­‰</p><p><strong>&#x3D;&#x3D; ï¼šå¦‚æœåˆ¤æ–­å¼•ç”¨ç±»å‹ï¼Œåˆ¤æ–­çš„æ˜¯åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ªç±»çš„å¯¹è±¡</strong></p></li><li><p>equals æ˜¯Objectç±»ä¸­çš„æ–¹æ³•ï¼Œåªèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹</p><p><strong>é»˜è®¤åˆ¤æ–­çš„æ˜¯åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œå­ç±»ä¸­å¾€å¾€é‡å†™è¯¥æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰</strong></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Integer</span> <span class="hljs-variable">integer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1000</span>);<br><span class="hljs-type">Integer</span> <span class="hljs-variable">integer2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1000</span>);<br>System.out.println(integer1 == integer2); <span class="hljs-comment">//false</span><br>System.out.println(integer1.equals(integer2)); <span class="hljs-comment">//true</span><br><br><span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;java_study&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;java_study&quot;</span>);<br>System.out.println(str1 == str2); <span class="hljs-comment">//false</span><br>System.out.println(str1.equals(str2)); <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure></li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EqualExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br>        System.out.println(person1.equals(person2));  <br>        <span class="hljs-comment">//æœªé‡å†™equals() -&gt; flase</span><br>        <span class="hljs-comment">//é‡å†™åequals() -&gt; true</span><br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">char</span> gender;<br><br>    <span class="hljs-comment">//é‡å†™equalsæ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span> &#123;<br>        <span class="hljs-comment">//åˆ¤æ–­å¦‚æœæ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›true</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span> == obj) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> Person) &#123; <span class="hljs-comment">//å¦‚æœobjæ˜¯Personï¼Œåˆ™è¿›è¡Œæ¯”è¾ƒ</span><br>            <span class="hljs-comment">//è¿›è¡Œå‘ä¸‹è½¬å‹ï¼Œå› ä¸ºéœ€è¦å¾—åˆ°objçš„å„ä¸ªå±æ€§</span><br>            <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> (Person) obj;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name.equals(p.name) &amp;&amp; <br>                <span class="hljs-built_in">this</span>.age == p.age &amp;&amp; <span class="hljs-built_in">this</span>.gender == p.gender;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">char</span> gender)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.gender = gender;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">char</span> <span class="hljs-title function_">getGender</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> gender;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setGender</span><span class="hljs-params">(<span class="hljs-type">char</span> gender)</span> &#123;<span class="hljs-built_in">this</span>.gender = gender;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="hashCode-æ–¹æ³•"><a href="#hashCode-æ–¹æ³•" class="headerlink" title="hashCode æ–¹æ³•"></a>hashCode æ–¹æ³•</h3><ul><li><p>æé«˜å…·æœ‰å“ˆå¸Œç»“æ„çš„å®¹å™¨çš„æ•ˆç‡</p></li><li><p>ä¸¤ä¸ªå¼•ç”¨ï¼Œå¦‚æœæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å“ˆå¸Œå€¼è‚¯å®šæ˜¯ä¸€æ ·çš„</p><p>ä¸¤ä¸ªå¼•ç”¨ï¼Œå¦‚æœæŒ‡å‘çš„æ˜¯ä¸åŒå¯¹è±¡ï¼Œåˆ™å“ˆå¸Œå€¼æ˜¯ä¸ä¸€æ ·çš„ï¼ˆæ­¤å¤„ä¸ä¸¥è°¨ï¼‰</p></li><li><p>å“ˆå¸Œå€¼ä¸»è¦æ ¹æ®åœ°å€å·æ¥çš„ï¼Œä¸èƒ½å®Œå…¨çš„å°†å“ˆå¸Œå€¼ç­‰ä»·äºåœ°å€</p></li><li><p>åé¢åœ¨é›†åˆä¸­ hashCode å¦‚æœéœ€è¦çš„è¯ä¹Ÿä¼šé‡å†™ï¼ˆåœ¨è®²è§£é›†åˆæ—¶å­¦ä¹ é‡å†™ hashCode æ–¹æ³•ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HsahCode</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa3</span> <span class="hljs-operator">=</span> aa;<br>        System.out.println(<span class="hljs-string">&quot;aa.hashCode()=&quot;</span> + aa.hashCode());  <span class="hljs-comment">//93122545</span><br>        System.out.println(<span class="hljs-string">&quot;aa2.hashCode()=&quot;</span> + aa2.hashCode());  <span class="hljs-comment">//1449621165</span><br>        System.out.println(<span class="hljs-string">&quot;aa3.hashCode()=&quot;</span> + aa3.hashCode());  <span class="hljs-comment">//93122545</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;&#125;<br><br></code></pre></td></tr></table></figure><h3 id="toString-æ–¹æ³•"><a href="#toString-æ–¹æ³•" class="headerlink" title="toString æ–¹æ³•"></a>toString æ–¹æ³•</h3><ul><li><p>åŸºæœ¬ä»‹ç»</p><p>é»˜è®¤è¿”å›ï¼šå…¨ç±»å + @ + å“ˆå¸Œå€¼çš„åå…­è¿›åˆ¶</p><p>å­ç±»å¾€å¾€é‡å†™ toString æ–¹æ³•ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„å±æ€§ä¿¡æ¯</p></li><li><p>é‡å†™ toString æ–¹æ³•ï¼Œæ‰“å°å¯¹è±¡æˆ–æ‹¼æ¥å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„ toString å½¢å¼</p></li><li><p>å½“ç›´æ¥è¾“å‡ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒtoString æ–¹æ³•ä¼šè¢«é»˜è®¤çš„è°ƒç”¨</p><p>ä¾‹å¦‚ System.out.plintln(monster);  &#x2F;&#x2F;å°±ä¼šé»˜è®¤è°ƒç”¨ monster.toString()</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToString</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        Object çš„ toString() æºç </span><br><span class="hljs-comment">        (1)getClass().getName() ç±»çš„å…¨ç±»å(åŒ…å+ç±»å )</span><br><span class="hljs-comment">        (2)Integer.toHexString(hashCode()) å°†å¯¹è±¡çš„ hashCode å€¼è½¬æˆ 16 è¿›åˆ¶å­—ç¬¦ä¸²</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        public String toString() &#123;</span><br><span class="hljs-comment">            return getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode());</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br><br>        <span class="hljs-type">Monster</span> <span class="hljs-variable">monster</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>(<span class="hljs-string">&quot;å°å¦–æ€ª&quot;</span>, <span class="hljs-string">&quot;å·¡å±±&quot;</span>, <span class="hljs-number">1000</span>);<br>        System.out.println(monster.toString());<br>        <span class="hljs-comment">//æœªé‡å†™ com.java_study.object_.Monster@58ceff1</span><br>        <br>        System.out.println(monster);<br>        <span class="hljs-comment">//å½“ç›´æ¥è¾“å‡ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒtoString æ–¹æ³•ä¼šè¢«é»˜è®¤çš„è°ƒç”¨</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String job;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Monster</span><span class="hljs-params">(String name, String job, <span class="hljs-type">double</span> sal)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.job = job;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡å†™ toString æ–¹æ³•ï¼Œè¾“å‡ºå¯¹è±¡çš„å±æ€§</span><br>    <span class="hljs-comment">//å¯ä½¿ç”¨å¿«æ·é”® alt+insert -&gt; toString</span><br>    <span class="hljs-comment">//é‡å†™åä¸€èˆ¬æ—¶æŠŠå¯¹è±¡çš„å±æ€§å€¼è¾“å‡ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Monster&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, job=&#x27;&quot;</span> + job + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="finalize-æ–¹æ³•ï¼ˆå·²å¼ƒç”¨ï¼‰"><a href="#finalize-æ–¹æ³•ï¼ˆå·²å¼ƒç”¨ï¼‰" class="headerlink" title="finalize æ–¹æ³•ï¼ˆå·²å¼ƒç”¨ï¼‰"></a>finalize æ–¹æ³•ï¼ˆå·²å¼ƒç”¨ï¼‰</h3><ul><li><p>å½“å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„ finalize æ–¹æ³•ã€‚å­ç±»å¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œåšä¸€äº›é‡Šæ”¾èµ„æºçš„æ“ä½œ</p></li><li><p>ä»€ä¹ˆæ—¶å€™è¢«å›æ”¶ï¼šå½“æŸä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨æ—¶ï¼Œåˆ™ jvm å°±è®¤ä¸ºè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªåƒåœ¾å¯¹è±¡ï¼Œå°±ä¼šä½¿ç”¨åƒåœ¾å›æ”¶</p><p>æœºåˆ¶æ¥é”€æ¯è¯¥å¯¹è±¡ï¼Œåœ¨é”€æ¯è¯¥å¯¹è±¡å‰ï¼Œä¼šå…ˆè°ƒç”¨ finalize æ–¹æ³•ã€‚</p></li><li><p>åƒåœ¾å›æ”¶æœºåˆ¶çš„è°ƒç”¨ï¼Œæ˜¯ç”±ç³»ç»Ÿæ¥å†³å®š(å³æœ‰è‡ªå·±çš„ GC ç®—æ³•)</p><p>ä¹Ÿå¯ä»¥é€šè¿‡ System.gc() ä¸»åŠ¨è§¦å‘åƒåœ¾å›æ”¶æœºåˆ¶</p></li><li><p>æç¤ºï¼š æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡ ä¹ä¸ä¼šè¿ç”¨ finalizeï¼Œæ‰€ä»¥æ›´å¤šå°±æ˜¯ä¸ºäº†åº”ä»˜é¢è¯•</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Finalize_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;å®é©¬&quot;</span>);<br>        car = <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//è¿™æ—¶ car åŸæœ¬æŒ‡å‘çš„å¯¹è±¡å°±æˆä¸ºä¸€ä¸ªåƒåœ¾ï¼Œåƒåœ¾å›æ”¶å™¨å°±ä¼šå›æ”¶ï¼ˆé”€æ¯ï¼‰å¯¹è±¡ï¼Œ</span><br>        <span class="hljs-comment">//åœ¨é”€æ¯å¯¹è±¡å‰ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„ finalize æ–¹æ³•</span><br>        <span class="hljs-comment">//ç¨‹åºå‘˜å°±å¯ä»¥åœ¨ finalize ä¸­ï¼Œå†™è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ä»£ç (æ¯”å¦‚é‡Šæ”¾èµ„æºï¼šæ•°æ®åº“è¿æ¥,æˆ–è€…æ‰“å¼€æ–‡ä»¶..)</span><br>        <span class="hljs-comment">//å¦‚æœç¨‹åºå‘˜ä¸é‡å†™ finalizeï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨ Object ç±»çš„ finalizeï¼Œå³é»˜è®¤å¤„ç†</span><br>        System.gc();<span class="hljs-comment">//ä¸»åŠ¨è°ƒç”¨åƒåœ¾å›æ”¶å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;ç¨‹åºé€€å‡ºäº†....&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Car</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡å†™ finalize</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">finalize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>        <span class="hljs-built_in">super</span>.finalize();<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘ä»¬é”€æ¯æ±½è½¦&quot;</span> + name);<br>        System.out.println(<span class="hljs-string">&quot;é‡Šæ”¾äº†å†…å­˜ç©ºé—´&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ–­ç‚¹è°ƒè¯•-Debug"><a href="#æ–­ç‚¹è°ƒè¯•-Debug" class="headerlink" title="æ–­ç‚¹è°ƒè¯•(Debug)"></a>æ–­ç‚¹è°ƒè¯•(Debug)</h2><ul><li><p>æ–­ç‚¹è°ƒè¯•æ˜¯æŒ‡åœ¨ç¨‹åºçš„æŸä¸€è¡Œè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œè°ƒè¯•æ—¶ï¼Œç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œå°±ä¼šåœä½ï¼Œç„¶åä½ å¯ä»¥ä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è°ƒè¯•ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°å„ä¸ªå˜é‡å½“å‰çš„å€¼ï¼Œå‡ºé”™çš„è¯ï¼Œè°ƒè¯•åˆ°å‡ºé”™çš„ä»£ç è¡Œå³æ˜¾ç¤ºé”™è¯¯ï¼Œåœä¸‹ï¼Œè¿›è€Œåˆ†æä»è€Œæ‰¾åˆ°è¿™ä¸ªBug</p></li><li><p>æ–­ç‚¹è°ƒè¯•ä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬æŸ¥çœ‹ java åº•å±‚æºä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæé«˜ç¨‹åºå‘˜çš„ java æ°´å¹³</p></li><li><p><strong>é‡è¦æç¤º</strong>ï¼šåœ¨æ–­ç‚¹è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæ˜¯è¿è¡ŒçŠ¶æ€ï¼Œæ˜¯ä»¥å¯¹è±¡çš„ è¿è¡Œç±»å‹ æ¥æ‰§è¡Œçš„</p></li><li><p>å¿«æ·é”®</p><p>F9(resume,æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹)<br>F7ï¼šè·³å…¥æ–¹æ³•å†…<br>F8: é€è¡Œæ‰§è¡Œä»£ç .<br>shift+F8: è·³å‡ºæ–¹æ³•</p><p> <img src="/2022/06/30/JavaNote/image-20220902150812545.png" alt="image-20220902150812545"></p></li></ul><h2 id="ç±»å˜é‡å’Œç±»æ–¹æ³•"><a href="#ç±»å˜é‡å’Œç±»æ–¹æ³•" class="headerlink" title="ç±»å˜é‡å’Œç±»æ–¹æ³•"></a>ç±»å˜é‡å’Œç±»æ–¹æ³•</h2><h3 id="ç±»å˜é‡"><a href="#ç±»å˜é‡" class="headerlink" title="ç±»å˜é‡"></a>ç±»å˜é‡</h3><p>ç±»å˜é‡ä¹Ÿå«é™æ€å˜é‡&#x2F;é™æ€å±æ€§ï¼Œæ˜¯è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«çš„å˜é‡ï¼Œä»»ä½•ä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡å»è®¿é—®å®ƒæ—¶ï¼Œå–åˆ°çš„éƒ½æ˜¯ç›¸åŒçš„å€¼ï¼ŒåŒæ ·ä»»ä½•ä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡å»ä¿®æ”¹å®ƒæ—¶ï¼Œä¿®æ”¹çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªå˜é‡ã€‚</p><ul><li>ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰è¢«åŒä¸€ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«</li><li>static ç±»å˜é‡ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ç”Ÿæˆäº†</li><li><strong>è¯´æ˜ï¼š</strong>ç±»å˜é‡æ˜¯éšç€ç±»çš„åŠ è½½è€Œåˆ›å»ºçš„ï¼Œæ‰€ä»¥æ²¡æœ‰åˆ›å»ºå¯¹è±¡å®ä¾‹ä¹Ÿå¯ä»¥è®¿é—®</li></ul><p>JDK8ä»¥å‰ï¼Œç±»å˜é‡æ˜¯æ”¾åœ¨æ–¹æ³•åŒºçš„é™æ€åŸŸ</p><p>JDK8ä»¥åï¼Œç±»å˜é‡æ˜¯æ”¾åœ¨å †é‡Œé¢çš„ï¼Œé€šè¿‡åå°„æœºåˆ¶åŠ è½½ä¸€ä¸ªå«è¯¥ç±»çš„Classå¯¹è±¡â€¦ â€¦</p><ul><li><h4 id="å¦‚ä½•å®šä¹‰ç±»å˜é‡"><a href="#å¦‚ä½•å®šä¹‰ç±»å˜é‡" class="headerlink" title="å¦‚ä½•å®šä¹‰ç±»å˜é‡"></a>å¦‚ä½•å®šä¹‰ç±»å˜é‡</h4><p>å®šä¹‰è¯­æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">è®¿é—®ä¿®é¥°ç¬¦ <span class="hljs-keyword">static</span> æ•°æ®ç±»å‹ å˜é‡å;  <span class="hljs-comment">//æ¨è</span><br><span class="hljs-keyword">static</span> è®¿é—®ä¿®é¥°ç¬¦ æ•°æ®ç±»å‹ å˜é‡å;  <br></code></pre></td></tr></table></figure></li><li><h4 id="å¦‚ä½•è®¿é—®ç±»å˜é‡"><a href="#å¦‚ä½•è®¿é—®ç±»å˜é‡" class="headerlink" title="å¦‚ä½•è®¿é—®ç±»å˜é‡"></a>å¦‚ä½•è®¿é—®ç±»å˜é‡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ç±»å.ç±»å˜é‡å  <span class="hljs-comment">//æ¨è</span><br>å¯¹è±¡å.ç±»å˜é‡å  <br><span class="hljs-comment">//æ³¨ï¼šé™æ€å˜é‡çš„è®¿é—®ä¿®é¥°ç¬¦çš„è®¿é—®æƒé™è§„åˆ™å’Œæ™®é€šå±æ€§æ˜¯ä¸€æ ·çš„</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="ç±»å˜é‡æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#ç±»å˜é‡æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="ç±»å˜é‡æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>ç±»å˜é‡æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><ul><li><p>ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨ç±»å˜é‡</p><p>å½“æˆ‘ä»¬éœ€è¦è®©æŸä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½å…±äº«ä¸€ä¸ªå˜é‡æ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰</p></li><li><p>ç±»å˜é‡ä¸æ™®é€šå±æ€§çš„åŒºåˆ«</p><p>ç±»å˜é‡æ—¶è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«çš„ï¼Œè€Œå®ä¾‹å˜é‡æ˜¯æ¯ä¸ªå¯¹è±¡ç‹¬äº«çš„</p></li><li><p>ç±»å˜é‡å¯ä»¥é€šè¿‡ ç±»å.ç±»å˜é‡å æˆ–è€… å¯¹è±¡å.ç±»å˜é‡å æ¥è®¿é—®ï¼ˆæ¨èä½¿ç”¨ ç±»å.ç±»å˜é‡åï¼‰</p></li><li><p>ç±»å˜é‡æ˜¯åœ¨ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–äº†ï¼Œå› æ­¤å³ä½¿æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œåªè¦ç±»åŠ è½½äº†å°±å¯ä»¥ä½¿ç”¨ç±»å˜é‡</p></li><li><p>ç±»å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ—¶éšç±»çš„åŠ è½½å¼€å§‹ï¼Œéšç€ç±»çš„æ¶ˆäº¡è€Œé”€æ¯</p></li></ul><h3 id="ç±»æ–¹æ³•"><a href="#ç±»æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h3><ul><li><p>ç±»æ–¹æ³•ä¹Ÿå«é™æ€æ–¹æ³•</p></li><li><p>å½¢å¼å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">è®¿é—®ä¿®é¥°ç¬¦ <span class="hljs-keyword">static</span> æ•°æ®è¿”å›ç±»å‹ æ–¹æ³•å()&#123;&#125;  <span class="hljs-comment">//æ¨è</span><br><span class="hljs-keyword">static</span> è®¿é—®ä¿®é¥°ç¬¦ æ•°æ®è¿”å›ç±»å‹ æ–¹æ³•å()&#123;&#125; <br></code></pre></td></tr></table></figure></li><li><p>ç±»æ–¹æ³•çš„è°ƒç”¨ï¼ˆä½¿ç”¨æ–¹å¼ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ç±»å.ç±»æ–¹æ³•å<br>å¯¹è±¡å.ç±»æ–¹æ³•å<br><span class="hljs-comment">//åŒæ ·éœ€è¦æ»¡è¶³è®¿é—®ä¿®é¥°ç¬¦çš„è®¿é—®æƒé™è§„åˆ™</span><br></code></pre></td></tr></table></figure></li><li><p>ç±»æ–¹æ³•ç»å…¸ä½¿ç”¨åœºæ™¯</p><p><strong>å½“æ–¹æ³•ä¸­ä¸æ¶‰åŠåˆ°ä»»ä½•å’Œå¯¹è±¡ç›¸å…³çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥å°†æ–¹æ³•è®¾è®¡æˆé™æ€æ–¹æ³•ï¼Œæé«˜å¼€å‘æ•ˆç‡</strong></p><p>æ¯”å¦‚ï¼šå·¥å…·ç±»ä¸­çš„æ–¹æ³• utils çš„ Mathç±»ã€Arraysç±»ã€Collectionsé›†åˆç±» ç­‰ç­‰</p></li></ul><h4 id="ç±»æ–¹æ³•æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#ç±»æ–¹æ³•æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="ç±»æ–¹æ³•æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>ç±»æ–¹æ³•æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><ul><li><p>ç±»æ–¹æ³•å’Œæ™®é€šæ–¹æ³•éƒ½æ˜¯éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå°†ç»“æ„ä¿¡æ¯å­˜å‚¨åœ¨æ–¹æ³•åŒº</p><p>ç±»æ–¹æ³•ä¸­æ—  this çš„å‚æ•°ï¼Œæ™®é€šæˆå‘˜æ–¹æ³•ä¸­éšå«ç€ this çš„å‚æ•°</p></li><li><p>ç±»æ–¹æ³•å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡åè°ƒç”¨</p><p>æ™®é€šæˆå‘˜æ–¹æ³•ä¸å¯¹è±¡æœ‰å…³ï¼Œä¸å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œéœ€è¦é€šè¿‡å¯¹è±¡åè°ƒç”¨ï¼ˆå¯¹è±¡å.æ–¹æ³•å(å‚æ•°)ï¼‰</p></li><li><p>ç±»æ–¹æ³•ä¸­ä¸å…è®¸ä½¿ç”¨å’Œå¯¹è±¡æœ‰å…³çš„å…³é”®å­—ï¼Œæ¯”å¦‚ this å’Œ super</p><p>æ™®é€šæˆå‘˜æ–¹æ³•å¯ä»¥ä½¿ç”¨å’Œå¯¹è±¡æœ‰å…³çš„å…³é”®å­—ï¼Œæ¯”å¦‚ this å’Œ super</p></li><li><p><strong>ç±»æ–¹æ³•ï¼ˆé™æ€æ–¹æ³•ï¼‰åªèƒ½è®¿é—® é™æ€å˜é‡ å’Œ é™æ€æ–¹æ³• (ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œå¯ä»¥åœ¨æ–¹æ³•å†…å…ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡å†è®¿é—®)</strong></p><p>æ™®é€šæˆå‘˜æ–¹æ³• æ—¢å¯ä»¥è®¿é—® éé™æ€æˆå‘˜ï¼Œä¹Ÿå¯ä»¥è®¿é—® é™æ€æˆå‘˜</p></li><li><p><strong>æ³¨æ„ï¼šç±»æ–¹æ³• é€šè¿‡åˆ›å»ºæœ¬ç±»å¯¹è±¡çš„æ–¹å¼ä¹Ÿå¯ä»¥è®¿é—® éé™æ€æˆå‘˜</strong></p></li><li><p><strong>å°ç»“ï¼šé™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œéé™æ€æ–¹æ³•å¯ä»¥è®¿é—®é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜ï¼ˆå‡éœ€è¦éµå®ˆè®¿é—®æƒé™ï¼‰</strong></p></li><li><p>è¡¥å……ï¼š<strong>Javaä¸­çš„é™æ€æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™</strong></p><p>ç‰¹ç‚¹ï¼šé™æ€æ–¹æ³•å±äºç±»çš„æ–¹æ³•ï¼Œä¹Ÿå±äºå¯¹è±¡çš„æ–¹æ³•ï¼Œä½†æ˜¯é™æ€æ–¹æ³•éšç±»çš„å­˜åœ¨ã€‚</p><p>ç»“è®ºï¼šJavaä¸­çš„é™æ€æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ï¼Œå®é™…ä¸Šï¼Œå­ç±»çš„é™æ€æ–¹æ³•éšè—äº†çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå› æ­¤çˆ¶ç±»çš„å­ç±»çš„é™æ€æ–¹æ³•åŒæ—¶å­˜åœ¨ï¼Œåªä¸è¿‡çˆ¶ç±»é€šè¿‡ç±»åï¼ˆæˆ–å¯¹è±¡åï¼‰è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå­ç±»é€šè¿‡ç±»åï¼ˆæˆ–å¯¹è±¡åï¼‰è°ƒç”¨çš„æ˜¯å­ç±»çš„é™æ€æ–¹æ³•ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.static_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticMethodDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        D.hi();<span class="hljs-comment">//ok</span><br>        <span class="hljs-comment">//éé™æ€æ–¹æ³•ï¼Œä¸èƒ½é€šè¿‡ç±»åè°ƒç”¨</span><br>        <span class="hljs-comment">//D.say();, é”™è¯¯ï¼Œéœ€è¦å…ˆåˆ›å»ºå¯¹è±¡ï¼Œå†è°ƒç”¨</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>().say();<span class="hljs-comment">//å¯ä»¥</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//éé™æ€æ–¹æ³•,æ™®é€šæ–¹æ³•</span><br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//é™æ€æ–¹æ³•,ç±»æ–¹æ³•</span><br>        <span class="hljs-comment">//ç±»æ–¹æ³•ä¸­ä¸å…è®¸ä½¿ç”¨å’Œå¯¹è±¡æœ‰å…³çš„å…³é”®å­—ï¼Œ</span><br>        <span class="hljs-comment">//æ¯”å¦‚thiså’Œsuperã€‚æ™®é€šæ–¹æ³•(æˆå‘˜æ–¹æ³•)å¯ä»¥ã€‚</span><br>        <span class="hljs-comment">//System.out.println(this.n1);</span><br>    &#125;<br><br>    <span class="hljs-comment">//ç±»æ–¹æ³•(é™æ€æ–¹æ³•)ä¸­ åªèƒ½è®¿é—® é™æ€å˜é‡ æˆ–é™æ€æ–¹æ³•</span><br>    <span class="hljs-comment">//å£è¯€:é™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(n2);<br>        System.out.println(D.n2);<br>        <span class="hljs-comment">//System.out.println(this.n2);ä¸èƒ½ä½¿ç”¨</span><br>        hi();<span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//say();//é”™è¯¯</span><br>    &#125;<br>    <span class="hljs-comment">//æ™®é€šæˆå‘˜æ–¹æ³•ï¼Œæ—¢å¯ä»¥è®¿é—®  éé™æ€æˆå‘˜ï¼Œä¹Ÿå¯ä»¥è®¿é—®é™æ€æˆå‘˜</span><br>    <span class="hljs-comment">//å°ç»“: éé™æ€æ–¹æ³•å¯ä»¥è®¿é—® é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//éé™æ€æˆå‘˜</span><br>        System.out.println(n1);<br>        say();<br>        <span class="hljs-comment">//é™æ€æˆå‘˜</span><br>        System.out.println(n2);<br>        hello();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ·±å…¥ç†è§£-main-æ–¹æ³•"><a href="#æ·±å…¥ç†è§£-main-æ–¹æ³•" class="headerlink" title="æ·±å…¥ç†è§£ main æ–¹æ³•"></a>æ·±å…¥ç†è§£ main æ–¹æ³•</h2><p><strong>è§£é‡Š main æ–¹æ³•çš„å½¢å¼ï¼špublic static void main(String[] args) {}</strong></p><ul><li>main æ–¹æ³•æ˜¯ç”± javaè™šæ‹Ÿæœº è°ƒç”¨çš„</li><li>java è™šæ‹Ÿæœºéœ€è¦è°ƒç”¨ç±»çš„main()æ–¹æ³•ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»æ˜¯public</li><li>java è™šæ‹Ÿæœºåœ¨æ‰§è¡Œmain()æ–¹æ³•æ—¶ä¸å¿…åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¿…é¡»æ˜¯static</li><li>è¯¥æ–¹æ³•æ¥å—Stringç±»å‹çš„æ•°ç»„å‚æ•°ï¼Œè¯¥æ•°ç»„ä¸­ä¿å­˜æ‰§è¡Œjavaå‘½ä»¤æ—¶ä¼ é€’ç»™æ‰€è¿è¡Œçš„ç±»çš„å‚æ•°</li><li>java æ‰§è¡Œçš„ç¨‹åº å‚æ•°1 å‚æ•°2 å‚æ•°3 [ä¸¾ä¾‹è¯´æ˜]</li></ul><p> <img src="/2022/06/30/JavaNote/image-20220903110827060.png" alt="image-20220903110827060"></p><p><strong>ç‰¹åˆ«æç¤º</strong></p><ul><li>åœ¨main()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨mainæ–¹æ³•æ‰€åœ¨ç±»çš„é™æ€æ–¹æ³•æˆ–é™æ€å±æ€§ï¼ˆä¸éœ€è¦æƒé™ï¼‰</li><li>ä½†æ˜¯ï¼Œä¸èƒ½ç›´æ¥è®¿é—®è¯¥ç±»ä¸­çš„éé™æ€æˆå‘˜ï¼Œå¿…é¡»åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡åï¼Œæ‰èƒ½é€šè¿‡è¿™ä¸ªå¯¹è±¡å»è®¿é—®ç±»ä¸­çš„éé™æ€æˆå‘˜</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.static_.main_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main01</span> &#123;<br>    <span class="hljs-comment">//é™æ€æˆå‘˜</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å­¦ä¹ Java&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi1</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Main01çš„hi1æ–¹æ³•&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//éé™æ€æˆå‘˜</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>    <span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi2</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Main01çš„hi2æ–¹æ³•&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1ã€é™æ€æ–¹æ³•mainå¯ä»¥ç›´æ¥è®¿é—®æœ¬ç±»çš„é™æ€æˆå‘˜</span><br>        System.out.println(n1);<br>        hi1();<br>        <span class="hljs-comment">// 2ã€é™æ€æ–¹æ³•mainä¸å¯ä»¥ç›´æ¥è®¿é—®æœ¬ç±»çš„éé™æ€æˆå‘˜</span><br>        <span class="hljs-comment">//stem.out.println(n2);  //é”™è¯¯</span><br>        <span class="hljs-comment">//hi2();  //é”™è¯¯</span><br>        <span class="hljs-comment">// 3ã€å¦‚æœé™æ€æ–¹æ³•mainè¦è®¿é—®æœ¬ç±»çš„éé™æ€æˆå‘˜ï¼Œéœ€è¦å…ˆåˆ›å»ºå¯¹è±¡å†è°ƒç”¨</span><br>        <span class="hljs-type">Main01</span> <span class="hljs-variable">main01</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Main01</span>();<br>        System.out.println(main01.n2);<br>        main01.hi2();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h2><p>ä»£ç å—åˆç§°ä¸ºåˆå§‹åŒ–å—ï¼Œå±äºç±»ä¸­çš„æˆå‘˜[ å³ æ˜¯ç±»çš„ä¸€éƒ¨åˆ† ]ï¼Œç±»ä¼¼äºæ–¹æ³•ï¼Œå°†é€»è¾‘è¯­å¥å°è£…å†æ–¹æ³•ä½“ä¸­ï¼Œé€šè¿‡{}åŒ…å›´èµ·æ¥ï¼›ä½†å’Œæ–¹æ³•ä¸åŒï¼Œæ²¡æœ‰æ–¹æ³•åï¼Œæ²¡æœ‰è¿”å›ï¼Œæ²¡æœ‰å‚æ•°ï¼Œåªæœ‰æ–¹æ³•ä½“ï¼Œè€Œä¸”<strong>ä¸ç”¨é€šè¿‡å¯¹è±¡æˆ–ç±»æ˜¾å¼è°ƒç”¨ï¼Œè€Œæ˜¯åŠ è½½ç±»æ—¶ï¼Œæˆ–è€…åˆ›å»ºå¯¹è±¡æ—¶éšå¼è°ƒç”¨ã€‚</strong></p><p><strong>åŸºæœ¬è¯­æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">[ä¿®é¥°ç¬¦(å¯é€‰é¡¹)] &#123;<br>    <span class="hljs-comment">//ä»£ç </span><br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><ul><li><strong>ä¿®é¥°ç¬¦ å¯é€‰ï¼Œè¦å†™çš„è¯ä¹Ÿåªèƒ½å†™ static</strong></li><li>ä»£ç å—åˆ†ä¸ºä¸¤ç±»ï¼Œä½¿ç”¨ static ä¿®é¥°çš„å«é™æ€ä»£ç å—ï¼Œæ²¡æœ‰ static ä¿®é¥°çš„ï¼Œå«æ™®é€šä»£ç å—&#x2F;éé™æ€ä»£ç å—</li><li>é€»è¾‘è¯­å¥å¯ä»¥åˆ†ä¸ºä»»ä½•é€»è¾‘è¯­å¥ï¼ˆè¾“å…¥ã€è¾“å‡ºã€æ–¹æ³•è°ƒç”¨ã€å¾ªç¯ã€åˆ¤æ–­ç­‰ï¼‰</li><li>{}; ä¸­çš„åˆ†å· ( ; ) å¯ä»¥å†™ä¸Šï¼Œä¹Ÿå¯ä»¥çœç•¥</li></ul><p><strong>ç”¨å¤„ï¼š</strong></p><ul><li>ç›¸å½“äºå¦å¤–ä¸€ç§å½¢å¼çš„æ„é€ å™¨ï¼ˆå¯¹æ„é€ å™¨çš„è¡¥å……æœºåˆ¶ï¼‰ï¼Œå¯ä»¥åšåˆå§‹åŒ–çš„æ“ä½œ</li><li>åœºæ™¯ï¼šå¦‚æœå¤šä¸ªæ„é€ å™¨ä¸­éƒ½æœ‰é‡å¤çš„è¯­å¥ï¼Œå¯ä»¥æŠ½å–åˆ°åˆå§‹åŒ–å—ä¸­ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§</li></ul><h3 id="ä»£ç å—æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"><a href="#ä»£ç å—æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚" class="headerlink" title="ä»£ç å—æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"></a>ä»£ç å—æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚</h3><ul><li><p>æ™®é€šçš„ä»£ç å—ï¼Œåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹æ—¶ï¼Œä¼šè¢«éšå¼çš„è°ƒç”¨ï¼›æ¯åˆ›å»ºä¸€æ¬¡ï¼Œå°±ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚</p><p>å¦‚æœåªæ˜¯ä½¿ç”¨ç±»çš„é™æ€æˆå‘˜æ—¶ï¼Œæ™®é€šä»£ç å—å¹¶ä¸ä¼šæ‰§è¡Œã€‚</p></li><li><p>staticä»£ç å—ä¹Ÿå«é™æ€ä»£ç å—ï¼Œä½œç”¨å°±æ˜¯å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸”å®ƒéšç€ç±»çš„åŠ è½½è€Œæ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p></li><li><p>ç±»ä»€ä¹ˆæ—¶å€™è¢«åŠ è½½ [ é‡è¦ ]</p><ul><li>åˆ›å»ºå¯¹è±¡å®ä¾‹æ—¶ï¼ˆnewï¼‰</li><li>åŠ è½½å­ç±»æ—¶ï¼Œçˆ¶ç±»ä¹Ÿä¼šè¢«åŠ è½½</li><li>ä½¿ç”¨ç±»çš„é™æ€æˆå‘˜æ—¶ï¼ˆé™æ€å±æ€§ã€é™æ€æ–¹æ³•ï¼‰</li><li>æ³¨ï¼šæ¯ä¸ªç±»æœ€å¤šåªä¼šåŠ è½½ä¸€æ¬¡</li></ul></li><li><p><strong>åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåœ¨ ä¸€ä¸ªç±»ä¸­ çš„è°ƒç”¨é¡ºåºæ˜¯ï¼ˆé‡éš¾ç‚¹ï¼‰ï¼š</strong></p><ol><li>è°ƒç”¨é™æ€ä»£ç å—å’Œé™æ€å±æ€§åˆå§‹åŒ–ï¼ˆåŒä¼˜å…ˆçº§ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ¥è°ƒç”¨ï¼‰</li><li>è°ƒç”¨æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§çš„åˆå§‹åŒ–ï¼ˆåŒä¼˜å…ˆçº§ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ¥è°ƒç”¨ï¼‰</li><li>è°ƒç”¨æ„é€ æ–¹æ³•</li></ol><p>æ³¨æ„ï¼šé™æ€ä»£ç å—å’Œé™æ€å±æ€§åˆå§‹åŒ–çš„è°ƒç”¨ä¼˜å…ˆçº§ä¸€æ ·ï¼Œå¦‚æœæœ‰å¤šä¸ªé™æ€ä»£ç å—å’Œå¤šä¸ªé™æ€å˜é‡åˆå§‹åŒ–ï¼Œåˆ™æŒ‰å®ƒä»¬å®šä¹‰çš„é¡ºåºè°ƒç”¨ï¼›  åŒæ ·ï¼Œæ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§åˆå§‹åŒ–çš„è°ƒç”¨ä¼˜å…ˆçº§ä¸€æ ·ï¼Œå¦‚æœæœ‰å¤šä¸ªæ™®é€šä»£ç å—å’Œå¤šä¸ªæ™®é€šå±æ€§åˆå§‹åŒ–ï¼Œåˆ™æŒ‰å®šä¹‰é¡ºåºè°ƒç”¨ã€‚</p></li><li><p>æ„é€ æ–¹æ³•ï¼ˆæ„é€ å™¨ï¼‰çš„æœ€å‰é¢å…¶å®éšå«äº† super() å’Œ è°ƒç”¨æ™®é€šä»£ç å—åŠæ™®é€šå±æ€§åˆå§‹åŒ–ï¼Œè€Œé™æ€ç›¸å…³çš„ä»£ç å—å’Œå±æ€§åˆå§‹åŒ–åœ¨ç±»åŠ è½½æ—¶å°±æ‰§è¡Œå®Œæ¯•ï¼Œå› æ­¤æ˜¯ä¼˜å…ˆäºæ„é€ å™¨å’Œæ™®é€šä»£ç å—æ‰§è¡Œçš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//æ„é€ å™¨</span><br>        <span class="hljs-comment">//è¿™é‡Œæœ‰éšè—çš„æ‰§è¡Œè¦æ±‚</span><br>        <span class="hljs-comment">// åœ¨æ­¤ä¹‹å‰å…ˆä¼šè¿›è¡Œ ç±»çš„åŠ è½½ (å¦‚æœè¿˜æ²¡åŠ è½½çš„è¯)</span><br>        <span class="hljs-comment">//ï¼ˆ0ï¼‰é™æ€ç›¸å…³çš„ä»£ç å—å’Œå±æ€§åˆå§‹åŒ–ä¼šåœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œå®Œæ¯•</span><br>        <span class="hljs-comment">//ï¼ˆ1ï¼‰super();</span><br>        <span class="hljs-comment">//ï¼ˆ2ï¼‰è°ƒç”¨æ™®é€šä»£ç å—ä»¥åŠæ™®é€šå±æ€§åˆå§‹åŒ–</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç»§æ‰¿å…³ç³»ä¸­ é™æ€ä»£ç å—ã€é™æ€å±æ€§åˆå§‹åŒ–ã€æ™®é€šä»£ç å—ã€æ™®é€šå±æ€§åˆå§‹åŒ–ã€æ„é€ æ–¹æ³• çš„è°ƒç”¨é¡ºåºï¼š</p><ol><li>çˆ¶ç±»çš„é™æ€ä»£ç å—å’Œé™æ€å±æ€§ï¼ˆåŒä¼˜å…ˆçº§ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ¥è°ƒç”¨ï¼‰</li><li>å­ç±»çš„é™æ€ä»£ç å—å’Œé™æ€å±æ€§ï¼ˆåŒä¼˜å…ˆçº§ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ¥è°ƒç”¨ï¼‰</li><li>çˆ¶ç±»çš„æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§åˆå§‹åŒ–ï¼ˆåŒä¼˜å…ˆçº§ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ¥è°ƒç”¨ï¼‰</li><li>çˆ¶ç±»çš„æ„é€ æ–¹æ³•</li><li>å­ç±»çš„æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§åˆå§‹åŒ–ï¼ˆåŒä¼˜å…ˆçº§ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ¥è°ƒç”¨ï¼‰</li><li>å­ç±»çš„æ„é€ æ–¹æ³•</li></ol></li><li><p>é™æ€ä»£ç å—ç›´æ¥è°ƒç”¨çš„è¯åªèƒ½è°ƒç”¨è°ƒç”¨é™æ€æˆå‘˜(é™æ€å±æ€§å’Œé™æ€æ–¹æ³•)ï¼Œæ™®é€šä»£ç å—å¯ä»¥è°ƒç”¨ä»»æ„æˆå‘˜</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.codeblock_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlockDetail04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è€å¸ˆè¯´æ˜</span><br>        <span class="hljs-comment">//(1) è¿›è¡Œç±»çš„åŠ è½½</span><br>        <span class="hljs-comment">//1.1 å…ˆåŠ è½½ çˆ¶ç±» A02   1.2 å†åŠ è½½ B02</span><br>        <span class="hljs-comment">//(2) åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-comment">//2.1 ä»å­ç±»çš„æ„é€ å™¨å¼€å§‹</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">B02</span>();<span class="hljs-comment">//å¯¹è±¡</span><br>        System.out.println(<span class="hljs-string">&quot;==========&quot;</span>);<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">C02</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A02</span> &#123; <span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> getVal01();<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02çš„ä¸€ä¸ªé™æ€ä»£ç å—..&quot;</span>);<span class="hljs-comment">//(2)</span><br>    &#125;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02çš„ç¬¬ä¸€ä¸ªæ™®é€šä»£ç å—..&quot;</span>);<span class="hljs-comment">//(5)</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> getVal02();<span class="hljs-comment">//æ™®é€šå±æ€§çš„åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal01</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02çš„é™æ€å±æ€§åˆå§‹åŒ–&quot;</span>);<span class="hljs-comment">//(1)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal02</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02çš„æ™®é€šå±æ€§åˆå§‹åŒ–&quot;</span>);<span class="hljs-comment">//(6)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A02</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ„é€ å™¨</span><br>        <span class="hljs-comment">//éšè—</span><br>        <span class="hljs-comment">//super()</span><br>        <span class="hljs-comment">//æ™®é€šä»£ç å’Œæ™®é€šå±æ€§çš„åˆå§‹åŒ–......</span><br>        System.out.println(<span class="hljs-string">&quot;A02çš„æ„é€ å™¨&quot;</span>);<span class="hljs-comment">//(7)</span><br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B02</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A02</span> &#123; <span class="hljs-comment">//</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> getVal03();<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02çš„ä¸€ä¸ªé™æ€ä»£ç å—..&quot;</span>);<span class="hljs-comment">//(4)</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n5</span> <span class="hljs-operator">=</span> getVal04();<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02çš„ç¬¬ä¸€ä¸ªæ™®é€šä»£ç å—..&quot;</span>);<span class="hljs-comment">//(9)</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal03</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02çš„é™æ€å±æ€§åˆå§‹åŒ–&quot;</span>);<span class="hljs-comment">//(3)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal04</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02çš„æ™®é€šå±æ€§åˆå§‹åŒ–&quot;</span>);<span class="hljs-comment">//(8)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-comment">//ä¸€å®šè¦æ…¢æ…¢çš„å»å“..</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B02</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ„é€ å™¨</span><br>        <span class="hljs-comment">//éšè—äº†</span><br>        <span class="hljs-comment">//super()</span><br>        <span class="hljs-comment">//æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§çš„åˆå§‹åŒ–...</span><br>        System.out.println(<span class="hljs-string">&quot;B02çš„æ„é€ å™¨&quot;</span>);<span class="hljs-comment">//(10)</span><br>        <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C02</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-comment">//é™æ€ä»£ç å—ï¼Œåªèƒ½è°ƒç”¨é™æ€æˆå‘˜</span><br>        <span class="hljs-comment">//System.out.println(n1);é”™è¯¯</span><br>        System.out.println(n2);<span class="hljs-comment">//ok</span><br>        <span class="hljs-comment">//m1();//é”™è¯¯</span><br>        m2();<br>    &#125;<br>    &#123;<br>        <span class="hljs-comment">//æ™®é€šä»£ç å—ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„æˆå‘˜</span><br>        System.out.println(n1);<br>        System.out.println(n2);<span class="hljs-comment">//ok</span><br>        m1();<br>        m2();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="å•ä¾‹è®¾è®¡æ¨¡å¼"></a>å•ä¾‹è®¾è®¡æ¨¡å¼</h2><p>PSï¼šç›®å‰å…¬è®¤çš„è®¾è®¡æ¨¡å¼æœ‰ï¼ˆ23ç§ï¼‰</p><p>â€‹<strong>ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼</strong></p><ul><li>é‡‡ç”¨ä¸€å®šçš„æ–¹æ³•ä¿è¯åœ¨æ•´ä¸ªçš„è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå¯¹æŸä¸ªç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå¹¶ä¸”è¯¥ç±»åªæä¾›ä¸€ä¸ªå–å¾—å…¶å¯¹è±¡å®ä¾‹çš„æ–¹æ³•ã€‚</li><li>å•ä¾‹æ¨¡å¼æœ‰ä¸¤ç§æ–¹å¼ï¼šï¼ˆ1ï¼‰é¥¿æ±‰å¼  ï¼ˆ2ï¼‰æ‡’æ±‰å¼</li></ul><p><strong>å•ä¾‹è®¾è®¡æ¨¡å¼åº”ç”¨å®ä¾‹ï¼š</strong></p><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ„é€ å™¨ç§æœ‰åŒ–ï¼ˆé˜²æ­¢ç›´æ¥newï¼‰</li><li>ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡</li><li>å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•   getInstance</li><li>ä»£ç å®ç°</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¥¿æ±‰å¼</span><br><span class="hljs-keyword">package</span> com.hspedu.single_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleTon01</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        GirlFriend xh = new GirlFriend(&quot;å°çº¢&quot;);</span><br><span class="hljs-comment">//        GirlFriend xb = new GirlFriend(&quot;å°ç™½&quot;);</span><br><br>        <span class="hljs-comment">//é€šè¿‡æ–¹æ³•å¯ä»¥è·å–å¯¹è±¡</span><br>        <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> GirlFriend.getInstance();<br>        System.out.println(instance);<br><br>        <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">instance2</span> <span class="hljs-operator">=</span> GirlFriend.getInstance();<br>        System.out.println(instance2);<br><br>        System.out.println(instance == instance2);<span class="hljs-comment">//T</span><br>        <span class="hljs-comment">//System.out.println(GirlFriend.n1);</span><br><br>        <span class="hljs-comment">//...</span><br><br><br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">//æœ‰ä¸€ä¸ªç±»ï¼Œ GirlFriend</span><br><span class="hljs-comment">//åªèƒ½æœ‰ä¸€ä¸ªå¥³æœ‹å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GirlFriend</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">//public static  int n1 = 100;</span><br>    <span class="hljs-comment">//ä¸ºäº†èƒ½å¤Ÿåœ¨é™æ€æ–¹æ³•ä¸­ï¼Œè¿”å› gfå¯¹è±¡ï¼Œéœ€è¦å°†å…¶ä¿®é¥°ä¸ºstatic</span><br>    <span class="hljs-comment">//å°è±¡ï¼Œé€šå¸¸æ˜¯é‡é‡ç´šçš„å°è±¡, é¤“æ¼¢å¼å¯èƒ½é€ æˆå‰µå»ºäº†å°è±¡ï¼Œä½†æ˜¯æ²’æœ‰ä½¿ç”¨.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">gf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GirlFriend</span>(<span class="hljs-string">&quot;å°çº¢çº¢&quot;</span>);<br>    <span class="hljs-comment">//å¦‚ä½•ä¿éšœæˆ‘ä»¬åªèƒ½åˆ›å»ºä¸€ä¸ª GirlFriend å¯¹è±¡</span><br>    <span class="hljs-comment">//æ­¥éª¤[å•ä¾‹æ¨¡å¼-é¥¿æ±‰å¼]</span><br>    <span class="hljs-comment">//1. å°†æ„é€ å™¨ç§æœ‰åŒ–</span><br>    <span class="hljs-comment">//2. åœ¨ç±»çš„å†…éƒ¨ç›´æ¥åˆ›å»ºå¯¹è±¡(è¯¥å¯¹è±¡æ˜¯static)</span><br>    <span class="hljs-comment">//3. æä¾›ä¸€ä¸ªå…¬å…±çš„staticæ–¹æ³•ï¼Œè¿”å› gfå¯¹è±¡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">GirlFriend</span><span class="hljs-params">(String name)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ§‹é€ å™¨è¢«èª¿ç”¨.&quot;</span>);<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GirlFriend <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> gf;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GirlFriend&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.single_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleTon02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//new Cat(&quot;å¤§é»ƒ&quot;);</span><br>        <span class="hljs-comment">//System.out.println(Cat.n1);</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> Cat.getInstance();<br>        System.out.println(instance);<br><br><br>        <span class="hljs-comment">//å†æ¬¡èª¿ç”¨getInstance</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">instance2</span> <span class="hljs-operator">=</span> Cat.getInstance();<br>        System.out.println(instance2);<br><br>        System.out.println(instance == instance2);<span class="hljs-comment">//T</span><br><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//å¸Œæœ›åœ¨ç¨‹åºé‹è¡Œéç¨‹ä¸­ï¼Œåªèƒ½å‰µå»ºä¸€å€‹Catå°è±¡</span><br><span class="hljs-comment">//ä½¿ç”¨å–®ä¾‹æ¨¡å¼</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">999</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Cat cat ; <span class="hljs-comment">//é»˜èªæ˜¯null</span><br><br>    <span class="hljs-comment">//æ­¥é©Ÿ</span><br>    <span class="hljs-comment">//1.ä»ç„¶æ§‹é€ å™¨ç§æœ‰åŒ–</span><br>    <span class="hljs-comment">//2.å®šç¾©ä¸€å€‹staticéœæ…‹å±¬æ€§å°è±¡</span><br>    <span class="hljs-comment">//3.æä¾›ä¸€å€‹publicçš„staticæ–¹æ³•ï¼Œå¯ä»¥è¿”å›ä¸€å€‹Catå°è±¡</span><br>    <span class="hljs-comment">//4.æ‡¶æ¼¢å¼ï¼Œåªæœ‰ç•¶ç”¨æˆ¶ä½¿ç”¨getInstanceæ™‚ï¼Œæ‰è¿”å›catå°è±¡, å¾Œé¢å†æ¬¡èª¿ç”¨æ™‚ï¼Œæœƒè¿”å›ä¸Šæ¬¡å‰µå»ºçš„catå°è±¡</span><br>    <span class="hljs-comment">//  å¾è€Œä¿è­‰äº†å–®ä¾‹</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Cat</span><span class="hljs-params">(String name)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ§‹é€ å™¨èª¿ç”¨...&quot;</span>);<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Cat <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-keyword">if</span>(cat == <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//å¦‚æœé‚„æ²’æœ‰å‰µå»ºcatå°è±¡</span><br>            cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">&quot;å°å¯æ„›&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> cat;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Cat&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é¥¿æ±‰å¼-VS-æ‡’æ±‰å¼"><a href="#é¥¿æ±‰å¼-VS-æ‡’æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼ VS æ‡’æ±‰å¼"></a>é¥¿æ±‰å¼ VS æ‡’æ±‰å¼</h3><ul><li><p>äºŒè€…æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºåˆ›å»ºå¯¹è±¡çš„æ—¶æœºä¸åŒï¼š</p><p>é¥¿æ±‰å¼æ˜¯åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºäº†å¯¹è±¡å®ä¾‹ï¼Œè€Œæ‡’æ±‰å¼æ˜¯åœ¨ä½¿ç”¨æ—¶æ‰åˆ›å»ºå¯¹è±¡å®ä¾‹</p></li><li><p>é¥¿æ±‰å¼ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‡’æ±‰å¼å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p></li><li><p>é¥¿æ±‰å¼å­˜åœ¨æµªè´¹èµ„æºçš„å¯èƒ½ï¼Œè€Œæ‡’æ±‰å¼ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚</p></li></ul><h2 id="finalå…³é”®å­—"><a href="#finalå…³é”®å­—" class="headerlink" title="finalå…³é”®å­—"></a>finalå…³é”®å­—</h2><p>final å¯ä»¥ä¿®é¥° ç±»ã€å±æ€§ã€æ–¹æ³• å’Œ å±€éƒ¨å˜é‡</p><p>â€‹<strong>ä½¿ç”¨ final çš„æƒ…æ™¯ï¼š</strong></p><ul><li>å½“ä¸å¸Œæœ›ç±»è¢«ç»§æ‰¿æ—¶ï¼Œå¯ä»¥ç”¨ final ä¿®é¥° </li><li>å½“ä¸å¸Œæœ›çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•è¢«å­ç±»è¦†ç›–&#x2F;é‡å†™ï¼ˆoverrideï¼‰æ—¶ï¼Œå¯ä»¥ç”¨ final ä¿®é¥°</li><li>å½“ä¸å¸Œæœ›ç±»çš„æŸä¸ªå±æ€§çš„å€¼è¢«ä¿®æ”¹ï¼Œå¯ä»¥ç”¨ final ä¿®é¥°</li><li>å½“ä¸å¸Œæœ›æŸä¸ªå±€éƒ¨å˜é‡è¢«ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ final ä¿®é¥°</li></ul><h3 id="final-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#final-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="final æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>final æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ul><li><p>final ä¿®é¥°çš„å±æ€§åˆå«å¸¸é‡ï¼Œä¸€èˆ¬ç”¨ XX_XX_XX æ¥å‘½å</p></li><li><p>final ä¿®é¥°çš„å±æ€§åœ¨å®šä¹‰æ—¶ï¼Œå¿…é¡»èµ‹åˆå€¼ï¼Œå¹¶ä¸”ä»¥åä¸èƒ½å†ä¿®æ”¹ï¼Œèµ‹å€¼å¯ä»¥åœ¨å¦‚ä¸‹ä½ç½®ä¹‹ä¸€</p><ul><li>å®šä¹‰æ—¶ï¼šå¦‚ public final double TAX_RATE &#x3D; 0.08;</li><li>åœ¨æ„é€ å™¨ä¸­</li><li>åœ¨ä»£ç å—ä¸­</li></ul></li><li><p>å¦‚æœ final ä¿®é¥°çš„å±æ€§æ˜¯é™æ€çš„ï¼Œåˆ™åˆå§‹åŒ–çš„ä½ç½®åªèƒ½æ˜¯</p><p>ï¼ˆ1ï¼‰å®šä¹‰æ—¶ï¼ˆ2ï¼‰åœ¨é™æ€ä»£ç å—ä¸­ï¼ˆä¸èƒ½åœ¨æ„é€ å™¨ä¸­èµ‹å€¼ï¼‰</p></li><li><p><em>final ç±»ä¸èƒ½ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥å®ä¾‹åŒ–å¯¹è±¡</em></p></li><li><p><em>å¦‚æœç±»ä¸æ˜¯ final ç±»ï¼Œä½†æ˜¯å«æœ‰ final æ–¹æ³•ï¼Œåˆ™è¯¥æ–¹æ³•è™½ç„¶ä¸èƒ½é‡å†™ï¼Œä½†æ˜¯å¯ä»¥è¢«ç»§æ‰¿</em></p></li><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªç±»å·²ç»æ˜¯ final ç±»äº†ï¼Œå°±æ²¡æœ‰å¿…è¦å†å°†æ–¹æ³•ä¿®é¥°æˆ final æ–¹æ³•äº†</p></li><li><p>final ä¸èƒ½ä¿®é¥°æ„é€ æ–¹æ³•ï¼ˆå³æ„é€ å™¨ï¼‰</p></li><li><p>final å’Œ static å¾€å¾€æ­é…ä½¿ç”¨ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä¸ä¼šå¯¼è‡´ç±»åŠ è½½ï¼ˆåº•å±‚ç¼–è¯‘å™¨åšäº†ä¼˜åŒ–å¤„ç†ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.final_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(BBB.num);<br>        <span class="hljs-comment">//åŒ…è£…ç±»ï¼ˆStringã€Doubleç­‰ï¼‰æ˜¯finalç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//final å’Œ static å¾€å¾€æ­é…ä½¿ç”¨ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä¸ä¼šå¯¼è‡´ç±»åŠ è½½ï¼ˆåº•å±‚ç¼–è¯‘å™¨åšäº†ä¼˜åŒ–å¤„ç†ï¼‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;BBB é™æ€ä»£ç å—è¢«æ‰§è¡Œ&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//10000</span><br><span class="hljs-comment">//ä¸ä¼šè¾“å‡º &quot;BBB é™æ€ä»£ç å—è¢«æ‰§è¡Œ&quot;</span><br></code></pre></td></tr></table></figure><h2 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h2><p>å½“çˆ¶ç±»çš„æŸäº›æ–¹æ³•ï¼Œéœ€è¦å£°æ˜ï¼Œä½†æ˜¯åˆä¸ç¡®å®šå¦‚ä½•å®ç°æ—¶ï¼Œå¯ä»¥å°†å…¶å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±»</p><p>æŠ½è±¡ç±»çš„ä»‹ç»ï¼š</p><ul><li><p>ç”¨ abstract å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªç±»å°±å«æŠ½è±¡ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">è®¿é—®ä¿®é¥°ç¬¦ <span class="hljs-keyword">abstract</span> ç±»å &#123;&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç”¨ abstract å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æŠ½è±¡æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">è®¿é—®ä¿®é¥°ç¬¦ <span class="hljs-keyword">abstract</span> è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨);  <span class="hljs-comment">//æ²¡æœ‰æ–¹æ³•ä½“</span><br></code></pre></td></tr></table></figure></li><li><p>æŠ½è±¡ç±»çš„ä»·å€¼æ›´å¤šä½œç”¨æ˜¯åœ¨äºè®¾è®¡ï¼Œæ˜¯è®¾è®¡è€…è®¾è®¡å¥½åï¼Œè®©å­ç±»ç»§æ‰¿å¹¶å®ç°æŠ½è±¡ç±»()</p></li><li><p>æŠ½è±¡ç±»ï¼Œæ˜¯è€ƒå®˜æ¯”è¾ƒçˆ±é—®çš„çŸ¥è¯†ç‚¹ï¼Œåœ¨æ¡†æ¶å’Œè®¾è®¡æ¨¡å¼ä½¿ç”¨è¾ƒå¤š</p></li></ul><h3 id="æŠ½è±¡ç±»æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#æŠ½è±¡ç±»æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="æŠ½è±¡ç±»æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>æŠ½è±¡ç±»æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ul><li>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–</li><li><strong>æŠ½è±¡ç±»ä¸ä¸€å®šè¦åŒ…å« abstract æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠ½è±¡ç±»å¯ä»¥æ²¡æœ‰ abstract æ–¹æ³•</strong></li><li><strong>ä¸€æ—¦ç±»åŒ…å«äº† abstract æ–¹æ³•ï¼Œåˆ™è¿™ä¸ªç±»å¿…é¡»å£°æ˜ä¸º abstract</strong> </li><li>abstract åªèƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ï¼Œä¸èƒ½ä¿®é¥°å±æ€§å’Œå…¶å®ƒçš„</li><li>æŠ½è±¡ç±»å¯ä»¥æœ‰ä»»æ„æˆå‘˜ [æŠ½è±¡ç±»æœ¬è´¨è¿˜æ˜¯ç±»] ï¼Œæ¯”å¦‚ï¼šéæŠ½è±¡æˆå‘˜ã€æ„é€ å™¨ã€é™æ€å±æ€§ç­‰ç­‰ï¼ˆå¯ç”¨äºç»§æ‰¿ï¼‰</li><li>æŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰ä¸»ä½“ï¼Œå³ä¸èƒ½å®ç°</li><li>å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œåˆ™å®ƒå¿…é¡»å®ç°æŠ½è±¡ç±»çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œé™¤éå®ƒè‡ªå·±ä¹Ÿå£°æ˜ä¸º abstract ç±»</li><li><strong>æŠ½è±¡æ–¹æ³•ä¸èƒ½ä½¿ç”¨ privateã€final å’Œ static æ¥ä¿®é¥°ï¼Œå› ä¸ºè¿™äº›å…³é”®å­—éƒ½æ˜¯å’Œé‡å†™ç›¸è¿èƒŒçš„</strong></li></ul><h3 id="æŠ½è±¡ç±»æœ€ä½³å®è·µ-â€”â€”-æ¨¡æ¿è®¾è®¡æ¨¡å¼"><a href="#æŠ½è±¡ç±»æœ€ä½³å®è·µ-â€”â€”-æ¨¡æ¿è®¾è®¡æ¨¡å¼" class="headerlink" title="æŠ½è±¡ç±»æœ€ä½³å®è·µ â€”â€” æ¨¡æ¿è®¾è®¡æ¨¡å¼"></a>æŠ½è±¡ç±»æœ€ä½³å®è·µ â€”â€” æ¨¡æ¿è®¾è®¡æ¨¡å¼</h3><ul><li><p>åŸºæœ¬ä»‹ç»ï¼š</p><p>æŠ½è±¡ç±»ä½“ç°çš„æ˜¯ä¸€ç§æ¨¡æ¿æ¨¡å¼çš„è®¾è®¡ï¼ŒæŠ½è±¡ç±»ä½œä¸ºå¤šä¸ªå­ç±»çš„é€šç”¨æ¨¡æ¿ï¼Œå­ç±»åœ¨æŠ½è±¡ç±»çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ã€æ”¹é€ ï¼Œä½†å­ç±»æ€»ä½“ä¸Šä¼šä¿ç•™æŠ½è±¡ç±»çš„è¡Œä¸ºæ–¹å¼</p></li><li><p>æ¨¡æ¿è®¾è®¡æ¨¡å¼èƒ½è§£å†³çš„é—®é¢˜ï¼š</p><ul><li>å½“åŠŸèƒ½å®ç°å†…éƒ¨ä¸€éƒ¨åˆ†æ˜¯ç¡®å®šçš„ï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™æ˜¯å¯ä»¥æŠŠä¸ç¡®å®šçš„éƒ¨åˆ†æš´éœ²å‡ºå»ï¼Œè®©å­ç±»å»å®ç°</li><li>ç¼–å†™ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œçˆ¶ç±»æä¾›äº†å¤šä¸ªå­ç±»çš„é€šç”¨æ–¹æ³•ï¼Œå¹¶æŠŠä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ç•™ç»™å…¶å­ç±»å®ç°</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¡ˆä¾‹</span><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTemplate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        aa.calculateTime(); <span class="hljs-comment">//è¿™é‡Œè¿˜æ˜¯éœ€è¦æœ‰è‰¯å¥½çš„OOPåŸºç¡€ï¼Œå¯¹å¤šæ€</span><br><br>        <span class="hljs-type">BB</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        bb.calculateTime();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Template</span> &#123; <span class="hljs-comment">//æŠ½è±¡ç±»-æ¨¡æ¿è®¾è®¡æ¨¡å¼</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span>;<span class="hljs-comment">//æŠ½è±¡æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculateTime</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//å®ç°æ–¹æ³•ï¼Œè°ƒç”¨jobæ–¹æ³•</span><br>        <span class="hljs-comment">//å¾—åˆ°å¼€å§‹çš„æ—¶é—´</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        job(); <span class="hljs-comment">//åŠ¨æ€ç»‘å®šæœºåˆ¶</span><br>        <span class="hljs-comment">//å¾—çš„ç»“æŸçš„æ—¶é—´</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;ä»»åŠ¡æ‰§è¡Œæ—¶é—´ &quot;</span> + (end - start));<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Template</span> &#123;<br>    <span class="hljs-comment">//è®¡ç®—ä»»åŠ¡</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//å®ç°Templateçš„æŠ½è±¡æ–¹æ³•job</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">800000</span>; i++) &#123;<br>            num += i;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Template</span>&#123;<br>    <span class="hljs-comment">//è®¡ç®—ä»»åŠ¡</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//è¿™é‡Œä¹Ÿå»ï¼Œé‡å†™äº†Templateçš„jobæ–¹æ³•</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">80000</span>; i++) &#123;<br>            num *= i;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><h3 id="åŸºæœ¬ä»‹ç»-3"><a href="#åŸºæœ¬ä»‹ç»-3" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p>æ¥å£å°±æ˜¯ç»™å‡ºä¸€äº›æ²¡æœ‰å®ç°çš„æ–¹æ³•å¹¶å°è£…åˆ°ä¸€èµ·ï¼Œåˆ°æŸä¸ªç±»è¦ä½¿ç”¨æ—¶ï¼Œå†æ ¹æ®å…·ä½“æƒ…å†µæŠŠè¿™äº›æ–¹æ³•å†™å‡ºæ¥</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">interface æ¥å£å &#123;<br>    <span class="hljs-comment">//å±æ€§</span><br>    <span class="hljs-comment">//æŠ½è±¡æ–¹æ³•ï¼ˆåœ¨æ¥å£ä¸­ï¼ŒæŠ½è±¡æ–¹æ³•å¯ä»¥çœç•¥abstractå…³é”®å­—ï¼‰</span><br>&#125;<br>class ç±»å implements æ¥å£ &#123;<br>    <span class="hljs-comment">//è‡ªå·±å±æ€§;</span><br>    <span class="hljs-comment">//è‡ªå·±æ–¹æ³•;</span><br>    <span class="hljs-comment">//å¿…é¡»å®ç°çš„æ¥å£çš„æŠ½è±¡æ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å°ç»“ï¼šæ¥å£æ˜¯æ›´åŠ æŠ½è±¡çš„æŠ½è±¡çš„ç±»ï¼ŒæŠ½è±¡ç±»é‡Œçš„æ–¹æ³•å¯ä»¥æœ‰æ–¹æ³•ä½“ï¼Œæ¥å£é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“ [JDK7.0]ã€‚</p><p>â€‹æ¥å£ä¸€çº¿äº†ç¨‹åºè®¾è®¡çš„å¤šæ€å’Œé«˜å†…èšä½è€¦åˆçš„è®¾è®¡æ€æƒ³</p><p>â€‹<strong>è¡¥å……ï¼šJDK8.0 åæ¥å£ç±»å¯ä»¥æœ‰ é™æ€æ–¹æ³• å’Œ é»˜è®¤æ–¹æ³• ï¼Œä¹Ÿå°±æ˜¯è¯´æ¥å£ä¸­å¯ä»¥æœ‰æ–¹æ³•çš„å…·ä½“å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¡ˆä¾‹ï¼š</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AInterface</span> &#123;<br>    <span class="hljs-comment">//å†™å±æ€§</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//å†™æ–¹æ³•</span><br>    <span class="hljs-comment">//åœ¨æ¥å£ä¸­ï¼ŒæŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥çœç•¥abstractå…³é”®å­—</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//åœ¨jdk8åï¼Œå¯ä»¥æœ‰é»˜è®¤å®ç°æ–¹æ³•,éœ€è¦ä½¿ç”¨defaultå…³é”®å­—ä¿®é¥°</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;ok ...&quot;</span>);&#125;<br>    <span class="hljs-comment">//åœ¨jdk8å, å¯ä»¥æœ‰é™æ€æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;cry ....&quot;</span>);&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥å£çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ï¼šç»Ÿä¸€è§„èŒƒ</p><h3 id="æ¥å£æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#æ¥å£æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="æ¥å£æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>æ¥å£æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ul><li><p>æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–</p></li><li><p>æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ˜¯ public æ–¹æ³•ï¼Œæ¥å£ä¸­æŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥ä¸ç”¨ abstract ä¿®é¥°</p><p>ï¼ˆä¿®é¥°ç¬¦ â€˜publicâ€™ å¯¹äºæ¥å£æˆå‘˜æ˜¯å†—ä½™çš„ï¼Œå¯ä»¥ä¸å†™ ï¼‰</p></li><li><p>ä¸€ä¸ªæ™®é€šç±»å®ç°æ¥å£ï¼Œå°±å¿…é¡»å°†è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½å®ç°</p></li><li><p>æŠ½è±¡ç±»å®ç°æ¥å£ï¼Œå¯ä»¥ä¸ç”¨å®ç°æ¥å£çš„æ–¹æ³•</p></li><li><p>ä¸€ä¸ªç±»åŒæ—¶å¯ä»¥å®ç°å¤šä¸ªæ¥å£</p></li><li><p>æ¥å£ä¸­çš„å±æ€§ï¼Œåªèƒ½æ˜¯ final çš„ï¼Œè€Œä¸”æ˜¯ <strong>public static final</strong> ä¿®é¥°ç¬¦ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">æ¯”å¦‚ï¼š <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;   å®é™…ä¸Šæ˜¯ <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; ï¼ˆå¿…é¡»åˆå§‹åŒ–ï¼‰<br></code></pre></td></tr></table></figure></li><li><p>æ¥å£ä¸­å±æ€§çš„è®¿é—®å½¢å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">æ¥å£å.å±æ€§å<br></code></pre></td></tr></table></figure></li><li><p><strong>æ¥å£ä¸èƒ½ç»§æ‰¿ç±»ï¼Œä½†æ˜¯å¯ä»¥ç»§æ‰¿å¤šä¸ªåˆ«çš„æ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span>,C &#123;&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ¥å£çš„ä¿®é¥°ç¬¦åªèƒ½æ˜¯ public å’Œ é»˜è®¤ï¼Œè¿™ç‚¹å’Œç±»çš„ä¿®é¥°ç¬¦æ˜¯ä¸€æ ·çš„</strong></p></li></ul><h3 id="å®ç°æ¥å£-VS-ç»§æ‰¿ç±»"><a href="#å®ç°æ¥å£-VS-ç»§æ‰¿ç±»" class="headerlink" title="å®ç°æ¥å£ VS ç»§æ‰¿ç±»"></a>å®ç°æ¥å£ VS ç»§æ‰¿ç±»</h3><p>â€‹æ¥å£å’Œç»§æ‰¿è§£å†³çš„é—®é¢˜ä¸åŒ</p><ul><li><p>ç»§æ‰¿çš„ä»·å€¼ä¸»è¦åœ¨äºï¼šè§£å†³ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</p></li><li><p>æ¥å£çš„ä»·å€¼ä¸»è¦åœ¨äºï¼šè®¾è®¡å¥½å„ç§è§„èŒƒ (æ–¹æ³•) ï¼Œè®©å…¶å®ƒç±»å»å®ç°è¿™äº›æ–¹æ³•ï¼Œæ›´åŠ çµæ´»</p></li><li><p>ç»§æ‰¿æ˜¯æ»¡è¶³ is - a çš„å…³ç³»ï¼Œè€Œæ¥å£åªéœ€æ»¡è¶³ like - a çš„å…³ç³»</p></li><li><p>æ¥å£å†ä¸€å®šç¨‹åº¦ä¸Šå®ç°ä»£ç è§£è€¦ [å³ï¼šæ¥å£è§„èŒƒæ€§ + åŠ¨æ€ç»‘å®šæœºåˆ¶]</p></li></ul><p><strong>å°ç»“:</strong>   å½“å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå°±è‡ªåŠ¨çš„æ‹¥æœ‰çˆ¶ç±»çš„åŠŸèƒ½<br>            å¦‚æœå­ç±»éœ€è¦æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å®ç°æ¥å£çš„æ–¹å¼æ‰©å±•.<br>            å¯ä»¥ç†è§£ å®ç°æ¥å£ æ˜¯å¯¹ java å•ç»§æ‰¿æœºåˆ¶ çš„ä¸€ç§è¡¥å…….</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsVsInterface</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">LittleMonkey</span> <span class="hljs-variable">wuKong</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LittleMonkey</span>(<span class="hljs-string">&quot;æ‚Ÿç©º&quot;</span>);<br>        wuKong.climbing();<br>        wuKong.swimming();<br>        wuKong.flying();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Fishable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">swimming</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Birdable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">flying</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">//çŒ´å­</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monkey</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Monkey</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">climbing</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot; ä¼šçˆ¬æ ‘...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ç»§æ‰¿</span><br><span class="hljs-comment">//å°ç»“:  å½“å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå°±è‡ªåŠ¨çš„æ‹¥æœ‰çˆ¶ç±»çš„åŠŸèƒ½</span><br><span class="hljs-comment">//      å¦‚æœå­ç±»éœ€è¦æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å®ç°æ¥å£çš„æ–¹å¼æ‰©å±•.</span><br><span class="hljs-comment">//      å¯ä»¥ç†è§£ å®ç°æ¥å£ æ˜¯ å¯¹java å•ç»§æ‰¿æœºåˆ¶çš„ä¸€ç§è¡¥å…….</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LittleMonkey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Monkey</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fishable</span>,Birdable &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LittleMonkey</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swimming</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(getName() + <span class="hljs-string">&quot; é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥åƒé±¼å„¿ä¸€æ ·æ¸¸æ³³...&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flying</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(getName() + <span class="hljs-string">&quot; é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥åƒé¸Ÿå„¿ä¸€æ ·é£ç¿”...&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æ¥å£å¤šæ€ç‰¹æ€§"><a href="#æ¥å£å¤šæ€ç‰¹æ€§" class="headerlink" title="æ¥å£å¤šæ€ç‰¹æ€§"></a>æ¥å£å¤šæ€ç‰¹æ€§</h3><ul><li><h4 id="å¤šæ€å‚æ•°ï¼ˆå‰é¢æ¡ˆä¾‹ä½“ç°ï¼‰"><a href="#å¤šæ€å‚æ•°ï¼ˆå‰é¢æ¡ˆä¾‹ä½“ç°ï¼‰" class="headerlink" title="å¤šæ€å‚æ•°ï¼ˆå‰é¢æ¡ˆä¾‹ä½“ç°ï¼‰"></a>å¤šæ€å‚æ•°ï¼ˆå‰é¢æ¡ˆä¾‹ä½“ç°ï¼‰</h4><p>åœ¨å‰é¢çš„USBæ¥å£æ¡ˆä¾‹ï¼ŒUsbInterface usbï¼Œæ—¢å¯ä»¥æ¥æ”¶æ‰‹æœºå¯¹è±¡ï¼Œåˆå¯ä»¥æ¥æ”¶ç›¸æœºå¯¹è±¡ï¼Œå°±ä½“ç°äº†æ¥å£å¤šæ€</p><p>ï¼ˆæ¥å£å¼•ç”¨å¯ä»¥æŒ‡å‘å®ç°äº†æ¥å£çš„ç±»çš„å¯¹è±¡ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å¤šæ€å‚æ•°</span><br><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyParameter</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//æ¥å£çš„å¤šæ€ä½“ç°</span><br>        <span class="hljs-comment">//æ¥å£ç±»å‹çš„å˜é‡ if01 å¯ä»¥æŒ‡å‘ å®ç°äº†IFæ¥å£ç±»çš„å¯¹è±¡å®ä¾‹</span><br>        <span class="hljs-type">IF</span> <span class="hljs-variable">if01</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>();<br>        if01 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br><br>        <span class="hljs-comment">//ç»§æ‰¿ä½“ç°çš„å¤šæ€</span><br>        <span class="hljs-comment">//çˆ¶ç±»ç±»å‹çš„å˜é‡ a å¯ä»¥æŒ‡å‘ ç»§æ‰¿AAAçš„å­ç±»çš„å¯¹è±¡å®ä¾‹</span><br>        <span class="hljs-type">AAA</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BBB</span>();<br>        a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CCC</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IF</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IF</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">implements</span>  <span class="hljs-title class_">IF</span>&#123;&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AAA</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CCC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span> &#123;&#125;<br></code></pre></td></tr></table></figure></li><li><h4 id="å¤šæ€æ•°ç»„-1"><a href="#å¤šæ€æ•°ç»„-1" class="headerlink" title="å¤šæ€æ•°ç»„"></a>å¤šæ€æ•°ç»„</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyArr</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å¤šæ€æ•°ç»„ -&gt; æ¥å£ç±»å‹æ•°ç»„</span><br>        Usb[] usbs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Usb</span>[<span class="hljs-number">2</span>];<br>        usbs[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone_</span>();<br>        usbs[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Camera_</span>();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        ç»™Usbæ•°ç»„ä¸­ï¼Œå­˜æ”¾ Phone  å’Œ  ç›¸æœºå¯¹è±¡ï¼ŒPhoneç±»è¿˜æœ‰ä¸€ä¸ªç‰¹æœ‰çš„æ–¹æ³•callï¼ˆï¼‰ï¼Œ</span><br><span class="hljs-comment">        è¯·éå†Usbæ•°ç»„ï¼Œå¦‚æœæ˜¯Phoneå¯¹è±¡ï¼Œé™¤äº†è°ƒç”¨Usb æ¥å£å®šä¹‰çš„æ–¹æ³•å¤–ï¼Œ</span><br><span class="hljs-comment">        è¿˜éœ€è¦è°ƒç”¨Phone ç‰¹æœ‰æ–¹æ³• call</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; usbs.length; i++) &#123;<br>            usbs[i].work();<span class="hljs-comment">//åŠ¨æ€ç»‘å®š..</span><br>            <span class="hljs-comment">//å’Œå‰é¢ä¸€æ ·ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦è¿›è¡Œç±»å‹çš„å‘ä¸‹è½¬å‹</span><br>            <span class="hljs-keyword">if</span>(usbs[i] <span class="hljs-keyword">instanceof</span> Phone_) &#123;<span class="hljs-comment">//åˆ¤æ–­ä»–çš„è¿è¡Œç±»å‹æ˜¯ Phone_</span><br>                ((Phone_) usbs[i]).call();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Usb</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone_</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Usb</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰‹æœºå¯ä»¥æ‰“ç”µè¯...&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰‹æœºå·¥ä½œä¸­...&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Camera_</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Usb</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç›¸æœºå·¥ä½œä¸­...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><h4 id="æ¥å£å­˜åœ¨-å¤šæ€ä¼ é€’-ç°è±¡"><a href="#æ¥å£å­˜åœ¨-å¤šæ€ä¼ é€’-ç°è±¡" class="headerlink" title="æ¥å£å­˜åœ¨ å¤šæ€ä¼ é€’ ç°è±¡"></a>æ¥å£å­˜åœ¨ å¤šæ€ä¼ é€’ ç°è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyPass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ¥å£ç±»å‹çš„å˜é‡å¯ä»¥æŒ‡å‘ï¼Œå®ç°äº†è¯¥æ¥å£çš„ç±»çš„å¯¹è±¡å®ä¾‹</span><br>        <span class="hljs-type">IG</span> <span class="hljs-variable">ig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>        <span class="hljs-type">IH</span> <span class="hljs-variable">ih</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>        <span class="hljs-comment">//å¦‚æœIG ç»§æ‰¿äº† IH æ¥å£ï¼Œè€ŒTeacher ç±»å®ç°äº† IGæ¥å£</span><br>        <span class="hljs-comment">//é‚£ä¹ˆï¼Œå®é™…ä¸Šå°±ç›¸å½“äº Teacher ç±»ä¹Ÿå®ç°äº† IHæ¥å£.</span><br>        <span class="hljs-comment">//è¿™å°±æ˜¯æ‰€è°“çš„ æ¥å£å¤šæ€ä¼ é€’ç°è±¡.</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IH</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IG</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IH</span>&#123; &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IG</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123; &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfaceExercise02</span> &#123;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">A</span> &#123; <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; &#125;  <span class="hljs-comment">//æƒ³åˆ° ç­‰ä»· public static final int x = 0;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123; <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; &#125; <span class="hljs-comment">//æ™®é€šå±æ€§</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pX</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//System.out.println(x); //é”™è¯¯ï¼ŒåŸå› ï¼šxä¸æ˜ç¡®</span><br>        <span class="hljs-comment">//å¯ä»¥æ˜ç¡®çš„æŒ‡å®šx</span><br>        <span class="hljs-comment">//è®¿é—®æ¥å£çš„ x å°±ä½¿ç”¨ A.x</span><br>        <span class="hljs-comment">//è®¿é—®çˆ¶ç±»çš„ x å°±ä½¿ç”¨ super.x</span><br>        System.out.println(A.x + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">super</span>.x);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">C</span>().pX();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰"><a href="#å†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰" class="headerlink" title="å†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰"></a>å†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰</h2><p>å¦‚æœå®šä¹‰ç±»åœ¨å±€éƒ¨ä½ç½®ï¼ˆæ–¹æ³•ä¸­&#x2F;ä»£ç å—ï¼‰ï¼šï¼ˆ1ï¼‰å±€éƒ¨å†…éƒ¨ç±»    ï¼ˆ2ï¼‰åŒ¿åå†…éƒ¨ç±»</p><p>å®šä¹‰åœ¨æˆå‘˜ä½ç½®ï¼šï¼ˆ1ï¼‰æˆå‘˜å†…éƒ¨ç±»    ï¼ˆ2ï¼‰é™æ€å†…éƒ¨ç±»</p><ul><li><p>åŸºæœ¬ä»‹ç»</p><p>ä¸€ä¸ªç±»çš„å†…éƒ¨åˆå®Œæ•´çš„åµŒå¥—äº†å¦ä¸€ä¸ªç±»ç»“æ„ï¼Œè¢«åµŒå¥—çš„ç±»ç§°ä¸ºå†…éƒ¨ç±»ï¼ŒåµŒå¥—å…¶å®ƒç±»çš„ç±»ç§°ä¸ºå¤–éƒ¨ç±»</p><p>å†…éƒ¨ç±»æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥ä½“ç°ç±»ä¸ç±»ä¹‹é—´çš„åŒ…å«å…³ç³»</p></li><li><p>åŸºæœ¬è¯­æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span>&#123;  <span class="hljs-comment">//å¤–éƒ¨ç±»</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span>&#123;  <span class="hljs-comment">//å†…éƒ¨ç±»</span><br>        <br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span>&#123;  <span class="hljs-comment">//å¤–éƒ¨å…¶å®ƒç±»</span><br>    <br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="å†…éƒ¨ç±»çš„åˆ†ç±»"><a href="#å†…éƒ¨ç±»çš„åˆ†ç±»" class="headerlink" title="å†…éƒ¨ç±»çš„åˆ†ç±»"></a>å†…éƒ¨ç±»çš„åˆ†ç±»</h3><ul><li>å®šä¹‰åœ¨å¤–éƒ¨ç±»å±€éƒ¨ä½ç½®ä¸Šï¼ˆæ¯”å¦‚è¯´æ–¹æ³•å†…ã€ä»£ç å—ï¼‰<ul><li>å±€éƒ¨å†…éƒ¨ç±»ï¼ˆæœ‰ç±»åï¼‰</li><li><strong>åŒ¿åå†…éƒ¨ç±»ï¼ˆæ²¡æœ‰ç±»åï¼‰ï¼ˆé‡ç‚¹ï¼‰</strong></li></ul></li><li>å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ä¸Š<ul><li>æˆå‘˜å†…éƒ¨ç±»ï¼ˆæ—  static ä¿®é¥°ï¼‰</li><li>é™æ€å†…éƒ¨ç±»ï¼ˆæœ‰ static ä¿®é¥°ï¼‰</li></ul></li></ul><h3 id="å±€éƒ¨å†…éƒ¨ç±»"><a href="#å±€éƒ¨å†…éƒ¨ç±»" class="headerlink" title="å±€éƒ¨å†…éƒ¨ç±»"></a>å±€éƒ¨å†…éƒ¨ç±»</h3><p>å±€éƒ¨å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„å±€éƒ¨ä½ç½®ï¼Œæ¯”å¦‚æ–¹æ³•ä½“ä¸­ï¼Œå¹¶ä¸”æœ‰ç±»å</p><ul><li><p>å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰æˆå‘˜</p></li><li><p>ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè€Œå±€éƒ¨å˜é‡æ˜¯ä¸èƒ½ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦çš„</p><p>ä½†æ˜¯å¯ä»¥ä½¿ç”¨ final ä¿®é¥°ï¼Œå› ä¸ºå±€éƒ¨å˜é‡ä¹Ÿå¯ä»¥ä½¿ç”¨ final </p></li><li><p>ä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­</p></li><li><p>å±€éƒ¨å†…éƒ¨ç±» â€” è®¿é—® â€”&gt; å¤–éƒ¨ç±»çš„æˆå‘˜ [ è®¿é—®æ–¹å¼ï¼šç›´æ¥è®¿é—® ]</p></li><li><p>å¤–éƒ¨ç±» â€” è®¿é—® â€”&gt; å±€éƒ¨ç±»å†…éƒ¨çš„æˆå‘˜ [ è®¿é—®æ–¹å¼ï¼šå…ˆåˆ›å»ºå¯¹è±¡å†è®¿é—®ï¼ˆæ³¨ï¼šå¿…é¡»åœ¨ä½œç”¨åŸŸå†…ï¼‰ ]</p></li><li><p>å¤–éƒ¨å…¶ä»–ç±» â€” ä¸èƒ½è®¿é—® â€”&gt; å±€éƒ¨å†…éƒ¨ç±»ï¼ˆå› ä¸ºå±€éƒ¨å†…éƒ¨ç±»åœ°ä½æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼‰</p></li><li><p>å¦‚æœå¤–éƒ¨ç±»å’Œå±€éƒ¨å†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™ã€‚</p><p>å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalinnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer02</span> <span class="hljs-variable">outer02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer02</span>();<br>        outer02.m1();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer02</span> &#123;  <span class="hljs-comment">//å¤–éƒ¨ç±»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Ouner02 m2()&quot;</span>);<br>    &#125;;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//æ–¹æ³•</span><br>        <span class="hljs-comment">// * å±€éƒ¨å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„å±€éƒ¨ä½ç½®ï¼Œé€šå¸¸åœ¨æ–¹æ³•</span><br>        <span class="hljs-comment">// * ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ final ä¿®é¥°</span><br>        <span class="hljs-comment">// * ä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­</span><br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner02</span> &#123;  <span class="hljs-comment">//å±€éƒ¨å†…éƒ¨ç±»</span><br>            <span class="hljs-comment">// * å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜</span><br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + n1);<br>                m2();<br>                <span class="hljs-comment">// * å¦‚æœå¤–éƒ¨ç±»å’Œå±€éƒ¨å†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™</span><br>                <span class="hljs-comment">//   å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®</span><br>                <span class="hljs-comment">//   è§£è¯»ï¼šOuter02.this æœ¬è´¨å°±æ˜¯å¤–éƒ¨ç±»çš„å¯¹è±¡</span><br>                <span class="hljs-comment">//        å³å“ªä¸ªå¯¹è±¡è°ƒç”¨äº†m1ï¼ŒOuter02.thiså°±æŒ‡å‘å“ªä¸ªå¯¹è±¡</span><br>                System.out.println(<span class="hljs-string">&quot;å°±è¿‘n1=&quot;</span> + n1 + <span class="hljs-string">&quot; å¤–éƒ¨ç±»çš„n1=&quot;</span> + Outer02.<span class="hljs-built_in">this</span>.n1);<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// * å¤–éƒ¨ç±»è®¿é—®å±€éƒ¨å†…éƒ¨ç±»æˆå‘˜ï¼šåœ¨æ–¹æ³•ä¸­ï¼Œå¯ä»¥åˆ›å»º Inner02å¯¹è±¡ï¼Œç„¶åè®¿é—®</span><br>        <span class="hljs-type">Inner02</span> <span class="hljs-variable">inner02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner02</span>();<br>        inner02.f1();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="åŒ¿åå†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰"><a href="#åŒ¿åå†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰"></a>åŒ¿åå†…éƒ¨ç±»ï¼ˆé‡éš¾ç‚¹ï¼‰</h3><p>ï¼ˆ1ï¼‰æœ¬è´¨æ˜¯ç±»  ï¼ˆ2ï¼‰å†…éƒ¨ç±»  ï¼ˆ3ï¼‰è¯¥ç±»æ²¡æœ‰åå­—  ï¼ˆ4ï¼‰åŒæ—¶è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡</p><ul><li><p>åŒ¿åå†…éƒ¨ç±»çš„åŸºæœ¬è¯­æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">new</span> ç±»æˆ–æ¥å£(å‚æ•°åˆ—è¡¨)&#123;<br>    ç±»ä½“<br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p>åŒ¿åå†…éƒ¨ç±»çš„è¯­æ³•æ¯”è¾ƒå¥‡ç‰¹ï¼Œå› ä¸ºåŒ¿åå†…éƒ¨ç±»æ—¢æ˜¯ä¸€ä¸ªç±»çš„å®šä¹‰ï¼ŒåŒæ—¶å®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä»è¯­æ³•ä¸Šçœ‹ï¼Œå®ƒæ—¢æœ‰ å®šä¹‰ç±» çš„ç‰¹å¾ï¼Œä¹Ÿæœ‰ åˆ›å»ºå¯¹è±¡ çš„ç‰¹å¾ï¼Œå› æ­¤å¯ä»¥è°ƒç”¨åŒ¿åå†…éƒ¨ç±»æ–¹æ³•</p></li><li><p>å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰æˆå‘˜</p></li><li><p>ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡</p></li><li><p>ä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­</p></li><li><p>åŒ¿åå†…éƒ¨ç±» â€” è®¿é—® â€”&gt; å¤–éƒ¨ç±»æˆå‘˜ [ è®¿é—®æ–¹å¼ï¼šç›´æ¥è®¿é—® ]</p></li><li><p>å¤–éƒ¨å…¶ä»–ç±» â€” ä¸èƒ½è®¿é—® â€”&gt; åŒ¿åå†…éƒ¨ç±» ï¼ˆå› ä¸ºåŒ¿åå†…éƒ¨ç±»åœ°ä½æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼‰</p></li><li><p>å¦‚æœå¤–éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®æˆå‘˜é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™</p><p>å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®</p><p>ï¼ˆåœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ï¼Œå¤–éƒ¨ç±»å.this å³æ˜¯ è¯¥å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">//åŒ¿åå†…éƒ¨ç±»çš„ æœ¬è´¨ ä¸ ä½¿ç”¨ </span><br><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousinnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer04</span> <span class="hljs-variable">outer04</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer04</span>();<br>        outer04.method();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer04</span>&#123;  <span class="hljs-comment">//å¤–éƒ¨ç±»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//æ–¹æ³•</span><br>        <span class="hljs-comment">//åŸºäºæ¥å£çš„åŒ¿åå†…éƒ¨ç±»</span><br>        <span class="hljs-comment">//è§£è¯»ï¼š</span><br>        <span class="hljs-comment">//1.éœ€æ±‚ï¼šæƒ³ä½¿ç”¨æ¥å£IAå¹¶åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-comment">//  ä¼ ç»Ÿæ–¹å¼ï¼šå†™ä¸€ä¸ªç±»ï¼Œå®ç°æ¥å£ï¼Œå¹¶åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-comment">//  ä½†å¸Œæœ› Tiger åªç”¨ä¸€æ¬¡ï¼Œåé¢ä¸å†ä½¿ç”¨ï¼Œä¼ ç»Ÿæ–¹å¼è€—è´¹èµ„æº</span><br>        <span class="hljs-comment">//  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¥ç®€åŒ–å¼€å‘</span><br>        <span class="hljs-comment">//  tiger çš„ç¼–è¯‘ç±»å‹ï¼šIA</span><br>        <span class="hljs-comment">//  tiger çš„è¿è¡Œç±»å‹ï¼šåŒ¿åå†…éƒ¨ç±» XXX =&gt; Outer04$1</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            æˆ‘ä»¬çœ‹åº•å±‚.åº•å±‚ä¼šåˆ†é…ç±»åï¼šå¤–éƒ¨ç±»åç§°$1</span><br><span class="hljs-comment">            class XXX implements IA&#123;</span><br><span class="hljs-comment">                @Override</span><br><span class="hljs-comment">                public void cry() &#123;</span><br><span class="hljs-comment">                    System.out.println(&quot;è€è™å«å”¤...&quot;);</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//  JDKåº•å±‚åœ¨åˆ›å»ºåŒ¿åå†…éƒ¨ç±» Outerus04$1ï¼Œç«‹é©¬å°±åˆ›å»ºäº† Outer04$1å®ä¾‹</span><br>        <span class="hljs-comment">//  å¹¶ä¸”æŠŠåœ°å€è¿”å›ç»™ tiger</span><br>        <span class="hljs-comment">//  åŒ¿åå†…éƒ¨ç±»ä½¿ç”¨ä¸€æ¬¡åå°±ä¸èƒ½å†ä½¿ç”¨ï¼Œä½†åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å¯ç»§ç»­åå¤ä½¿ç”¨</span><br><span class="hljs-comment">//        IA tiger = new Tiger();</span><br><span class="hljs-comment">//        tiger.cry();</span><br>        <span class="hljs-type">IA</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IA</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;è€è™å«å”¤...&quot;</span>);<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;tigerçš„è¿è¡Œç±»å‹ï¼š&quot;</span> + tiger.getClass());<br>        tiger.cry();<br><br>        <span class="hljs-comment">//åŸºäºç±»çš„åŒ¿åå†…éƒ¨ç±»</span><br>        <span class="hljs-comment">//åˆ†æï¼š</span><br>        <span class="hljs-comment">//1.father ç¼–è¯‘ç±»å‹ï¼šFather</span><br>        <span class="hljs-comment">//  father è¿è¡Œç±»å‹ï¼šOuter04$2</span><br>        <span class="hljs-comment">//  åº•å±‚ä¼šåˆ›å»ºåŒ¿åå†…éƒ¨ç±»</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            class Outer04$2 extends Father&#123;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//  åŒæ—¶ä¹Ÿç›´æ¥è¿”å›äº† åŒ¿åå†…éƒ¨äº† Outer04$2 çš„å¯¹è±¡</span><br>        <span class="hljs-comment">//  æ³¨æ„ï¼šå‚æ•°åˆ—è¡¨(&quot;jack&quot;)ä¼šä¼ é€’ç»™ æ„é€ å™¨</span><br>        <span class="hljs-type">Father</span> <span class="hljs-variable">father</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Father</span>(<span class="hljs-string">&quot;jack&quot;</span>)&#123;<br>            <span class="hljs-comment">//public Father(String name)&#123; &#125;  //æ„é€ å™¨ä¸èƒ½é‡å†™</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;åŒ¿åå†…éƒ¨ç±»é‡å†™äº†testæ–¹æ³•&quot;</span>);<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;fatherçš„è¿è¡Œç±»å‹ï¼š&quot;</span> + father.getClass());<br>        father.test();<br><br>        <span class="hljs-comment">//åŸºäºæŠ½è±¡ç±»çš„åŒ¿åå†…éƒ¨ç±»ï¼Œæ–¹æ³•å¿…é¡»å®ç°</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;å°ç‹—åƒéª¨å¤´...&quot;</span>);<br>            &#125;<br>        &#125;;<br>        animal.eat();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span>&#123;  <span class="hljs-comment">//æ¥å£</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//class Tiger implements IA&#123;</span><br><span class="hljs-comment">//    @Override</span><br><span class="hljs-comment">//    public void cry() &#123;</span><br><span class="hljs-comment">//        System.out.println(&quot;è€è™å«å”¤...&quot;);</span><br><span class="hljs-comment">//    &#125;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;  <span class="hljs-comment">//å¤–éƒ¨å…¶å®ƒç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Father</span><span class="hljs-params">(String name)</span>&#123;  <span class="hljs-comment">//æ„é€ å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;æ¥æ”¶åˆ°nameï¼š&quot;</span> + name);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//æ–¹æ³•</span><br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åŒ¿åå†…éƒ¨ç±» çš„ ç»†èŠ‚</span><br><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousInnerClassDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer05</span> <span class="hljs-variable">outer05</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer05</span>();<br>        outer05.f1();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer05</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªåŸºäºç±»çš„åŒ¿åå†…éƒ¨ç±»</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>() &#123;<br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">111</span>;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;åŒ¿åå†…éƒ¨ç±»é‡å†™äº†hiæ–¹æ³•&quot;</span>);<br>                <span class="hljs-comment">//å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜</span><br>                System.out.println(<span class="hljs-string">&quot;è®¿é—®å¤–éƒ¨ç±»ç§æœ‰æˆå‘˜n1ï¼š&quot;</span> + n1);<br>                <span class="hljs-comment">//å¦‚æœå¤–éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®æˆå‘˜é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™</span><br>                <span class="hljs-comment">//å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®</span><br>                System.out.println(<span class="hljs-string">&quot;å°±è¿‘n2ï¼š&quot;</span> + n2);<br>                System.out.println(<span class="hljs-string">&quot;å¤–éƒ¨ç±»n2ï¼š&quot;</span> + Outer05.<span class="hljs-built_in">this</span>.n2);<br>                <span class="hljs-comment">// ï¼ˆå¤–éƒ¨ç±»å.thisï¼‰å³æ˜¯è¯¥å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨</span><br>            &#125;<br>        &#125;;<br>        p.hi(); <span class="hljs-comment">// åŠ¨æ€ç»‘å®šï¼Œè¿è¡Œç±»å‹æ—¶Outer05$1</span><br>        <span class="hljs-comment">// ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ï¼ŒåŒ¿åå†…éƒ¨ç±»æœ¬èº«ä¹Ÿæ˜¯è¿”å›å¯¹è±¡</span><br>        <span class="hljs-comment">// class åŒ¿åå†…éƒ¨ç±» extends Person &#123;&#125;</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span> &#123;<br>                <span class="hljs-built_in">super</span>.ok(str);<br>            &#125;<br>        &#125;.ok(<span class="hljs-string">&quot;jack&quot;</span>);<br>    &#125;<br>    <br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;  <span class="hljs-comment">//ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Person hi()&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Peson ok()ï¼š&quot;</span> + str);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æŠ½è±¡ç±»/æ¥å£...</span><br></code></pre></td></tr></table></figure><h4 id="åŒ¿åå†…éƒ¨ç±»æœ€ä½³å®è·µ"><a href="#åŒ¿åå†…éƒ¨ç±»æœ€ä½³å®è·µ" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»æœ€ä½³å®è·µ"></a>åŒ¿åå†…éƒ¨ç±»æœ€ä½³å®è·µ</h4><p>å½“åšå®å‚ç›´æ¥ä¼ é€’ï¼Œç®€æ´é«˜æ•ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®è·µ1</span><br><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å½“åšå®å‚ç›´æ¥ä¼ é€’ï¼Œç®€æ´é«˜æ•ˆï¼Œæ›´åŠ çµæ´»</span><br>        f1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IL</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;è¿™æ˜¯ä¸€å‰¯åç”»~~...&quot;</span>);<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//ä¼ ç»Ÿæ–¹æ³•ï¼Œæ›´åŠ ç»Ÿä¸€</span><br>        f1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Picture</span>());<br>    &#125;<br>    <span class="hljs-comment">//é™æ€æ–¹æ³•,å½¢å‚æ˜¯æ¥å£ç±»å‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(IL il)</span> &#123;<br>        il.show();<br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IL</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//ç±» -&gt; å®ç°IL =&gt; åœ¨ç¼–ç¨‹é¢†åŸŸç§°ä¸ºç¡¬ç¼–ç </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Picture</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IL</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;è¿™æ˜¯ä¸€å‰¯åç”»XX...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">//å®è·µ2</span><br><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        1.æœ‰ä¸€ä¸ªé“ƒå£°æ¥å£Bellï¼Œé‡Œé¢æœ‰ä¸ªringæ–¹æ³•ã€‚(å³å›¾)</span><br><span class="hljs-comment">        2.æœ‰ä¸€ä¸ªæ‰‹æœºç±»Cellphoneï¼Œå…·æœ‰é—¹é’ŸåŠŸèƒ½alarmClockï¼Œå‚æ•°æ˜¯Bellç±»å‹(å³å›¾)</span><br><span class="hljs-comment">        3.æµ‹è¯•æ‰‹æœºç±»çš„é—¹é’ŸåŠŸèƒ½ï¼Œé€šè¿‡åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)ä½œä¸ºå‚æ•°ï¼Œæ‰“å°ï¼šæ‡’çŒªèµ·åºŠäº†</span><br><span class="hljs-comment">        4.å†ä¼ å…¥å¦ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)ï¼Œæ‰“å°ï¼šå°ä¼™ä¼´ä¸Šè¯¾äº†</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">CellPhone</span> <span class="hljs-variable">cellPhone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellPhone</span>();<br>        <span class="hljs-comment">//è§£è¯»ï¼š</span><br>        <span class="hljs-comment">//1. ä¼ é€’çš„æ˜¯å®ç°äº† Bellæ¥å£çš„åŒ¿åå†…éƒ¨ç±» InnerClassExercise02$1</span><br>        <span class="hljs-comment">//2. é‡å†™äº† ring</span><br>        <span class="hljs-comment">//3. ç›¸å½“äº Bell bell = new Bell() &#123;</span><br>        <span class="hljs-comment">//            @Override</span><br>        <span class="hljs-comment">//            public void ring() &#123;</span><br>        <span class="hljs-comment">//                System.out.println(&quot;æ‡’çŒªèµ·åºŠäº†&quot;);</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">//         &#125;</span><br>        <span class="hljs-comment">//         cellPhone.alarmClock(bell);</span><br>        cellPhone.alarmClock(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bell</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;æ‡’çŒªèµ·åºŠäº†&quot;</span>);<br>            &#125;<br>        &#125;);<br><br>        cellPhone.alarmClock(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bell</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;å°ä¼™ä¼´ä¸Šè¯¾äº†&quot;</span>);<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bell</span>&#123; <span class="hljs-comment">//æ¥å£</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span>;<span class="hljs-comment">//æ–¹æ³•</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CellPhone</span>&#123;<span class="hljs-comment">//ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">alarmClock</span><span class="hljs-params">(Bell bell)</span>&#123;<span class="hljs-comment">//å½¢å‚æ˜¯Bellæ¥å£ç±»å‹</span><br>        System.out.println(bell.getClass());<br>        bell.ring();<span class="hljs-comment">//åŠ¨æ€ç»‘å®š</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æˆå‘˜å†…éƒ¨ç±»"><a href="#æˆå‘˜å†…éƒ¨ç±»" class="headerlink" title="æˆå‘˜å†…éƒ¨ç±»"></a>æˆå‘˜å†…éƒ¨ç±»</h3><p>æˆå‘˜å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼Œå¹¶ä¸”æ²¡æœ‰staticä¿®é¥°</p><ul><li><p>å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜</p></li><li><p>å¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦(publicã€protectedã€é»˜è®¤ã€private)ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªæˆå‘˜</p></li><li><p>ä½œç”¨åŸŸå’Œå¤–éƒ¨ç±»çš„å…¶å®ƒæˆå‘˜ä¸€æ ·ï¼Œä¸ºæ•´ä¸ªç±»ä½“</p></li><li><p>æˆå‘˜å†…éƒ¨ç±» â€” è®¿é—® â€”&gt; å¤–éƒ¨ç±»æˆå‘˜ [ è®¿é—®æ–¹å¼ï¼šç›´æ¥è®¿é—® ]</p></li><li><p>å¤–éƒ¨ç±» â€” è®¿é—® â€”&gt; æˆå‘˜å†…éƒ¨ç±» [ è®¿é—®æ–¹å¼ï¼šå…ˆåˆ›å»ºå¯¹è±¡å†è®¿é—®ï¼Œç§æœ‰å±æ€§ä¹Ÿå¯è®¿é—® ]</p></li><li><p>å¤–éƒ¨å…¶ä»–ç±» â€” è®¿é—® â€”&gt; æˆå‘˜å†…éƒ¨ç±» [ ä¸¤ç§æ–¹å¼ ä¸‹é¢æ¡ˆä¾‹å±•ç¤º ]</p></li><li><p>å¦‚æœå¤–éƒ¨ç±»å’Œå†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œå†…éƒ¨ç±»è®¿é—®çš„è¯ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™</p><p>å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberInnerClass01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer08</span> <span class="hljs-variable">outer08</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer08</span>();<br>        outer08.t1();<br>        <br>        <span class="hljs-comment">//å¤–éƒ¨å…¶ä»–ç±»ï¼Œä½¿ç”¨æˆå‘˜å†…éƒ¨ç±»çš„ä¸¤ç§ç§æ–¹å¼</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">// ç¬¬ä¸€ç§æ–¹å¼</span><br>        <span class="hljs-comment">// outer08.new Inner08(); ç›¸å½“äºæŠŠ new Inner08()å½“åšæ˜¯outer08æˆå‘˜</span><br>        <span class="hljs-comment">// è¿™å°±æ˜¯ä¸€ä¸ªè¯­æ³•ï¼Œä¸è¦ç‰¹åˆ«çš„çº ç»“.</span><br>        Outer08.<span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08</span> <span class="hljs-operator">=</span> outer08.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>        <span class="hljs-comment">//Outer08.Inner08 inner081 = new Outer08.Inner08();  //é”™è¯¯</span><br>        inner08.say();<br>        <span class="hljs-comment">// ç¬¬äºŒæ–¹å¼ åœ¨å¤–éƒ¨ç±»ä¸­ï¼Œç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è¿”å› Inner08å¯¹è±¡</span><br>        Outer08.<span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08Instance</span> <span class="hljs-operator">=</span> outer08.getInner08Instance();<br>        inner08Instance.say();<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer08</span> &#123; <span class="hljs-comment">//å¤–éƒ¨ç±»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123; System.out.println(<span class="hljs-string">&quot;hi()æ–¹æ³•...&quot;</span>); &#125;<br>    <span class="hljs-comment">//1.æ³¨æ„: æˆå‘˜å†…éƒ¨ç±»ï¼Œæ˜¯å®šä¹‰åœ¨å¤–éƒ¨å†…çš„æˆå‘˜ä½ç½®ä¸Š</span><br>    <span class="hljs-comment">//2.å¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦(publicã€protected ã€é»˜è®¤ã€private),å› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªæˆå‘˜</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner08</span> &#123;  <span class="hljs-comment">//æˆå‘˜å†…éƒ¨ç±»</span><br>        <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-variable">sal</span> <span class="hljs-operator">=</span> <span class="hljs-number">99.8</span>;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">66</span>;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-comment">// å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„</span><br>            <span class="hljs-comment">// å¦‚æœæˆå‘˜å†…éƒ¨ç±»çš„æˆå‘˜å’Œå¤–éƒ¨ç±»çš„æˆå‘˜é‡åï¼Œä¼šéµå®ˆå°±è¿‘åŸåˆ™.</span><br>            <span class="hljs-comment">// å¯ä»¥é€šè¿‡  å¤–éƒ¨ç±»å.this.å±æ€§ æ¥è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜</span><br>            System.out.println(<span class="hljs-string">&quot;n1 = &quot;</span> + n1 + <span class="hljs-string">&quot; name = &quot;</span> + name + <span class="hljs-string">&quot; å¤–éƒ¨ç±»çš„n1=&quot;</span> + Outer08.<span class="hljs-built_in">this</span>.n1);<br>            hi();<br>            <span class="hljs-comment">// t1(); // ä¸èƒ½ç›¸äº’ä½¿ç”¨</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªInner08å®ä¾‹</span><br>    <span class="hljs-keyword">public</span> Inner08 <span class="hljs-title function_">getInner08Instance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>    &#125;<br><br>    <span class="hljs-comment">//å†™æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">t1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨æˆå‘˜å†…éƒ¨ç±»</span><br>        <span class="hljs-comment">//åˆ›å»ºæˆå‘˜å†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ç›¸å…³çš„æ–¹æ³•</span><br>        <span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>        inner08.say();<br>        System.out.println(inner08.sal);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h3><p>é™æ€å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼Œå¹¶ä¸”æœ‰ static ä¿®é¥°</p><ul><li><p>å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰æˆå‘˜ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®éé™æ€æˆå‘˜</p></li><li><p>å¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublicã€protectedã€é»˜è®¤ã€privateï¼‰ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªæˆå‘˜</p></li><li><p>ä½œç”¨åŸŸï¼šåŒå…¶å®ƒæˆå‘˜ï¼Œä¸ºæ•´ä¸ªç±»ä½“</p></li><li><p>é™æ€å†…éƒ¨ç±» â€” è®¿é—® â€”&gt; å¤–éƒ¨ç±»ï¼ˆæ¯”å¦‚é™æ€å±æ€§ï¼‰[ è®¿é—®æ–¹å¼ï¼šç›´æ¥è®¿é—®æ‰€æœ‰é™æ€æˆå‘˜ ]</p></li><li><p>å¤–éƒ¨ç±» â€” è®¿é—® â€”&gt; é™æ€å†…éƒ¨ç±» [ è®¿é—®æ–¹å¼ï¼šå…ˆåˆ›å»ºå¯¹è±¡å†è®¿é—® ]</p></li><li><p>å¤–éƒ¨å…¶å®ƒç±» â€” è®¿é—® â€”&gt; é™æ€å†…éƒ¨ç±»</p></li><li><p>å¦‚æœå¤–éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œé™æ€å†…éƒ¨ç±»è®¿é—®çš„è¯ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™</p><p>å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.æˆå‘˜ï¼‰å»è®¿é—®</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer10</span> <span class="hljs-variable">outer10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer10</span>();<br>        outer10.m1();<br>        <span class="hljs-comment">//å¤–éƒ¨å…¶å®ƒç±» ä½¿ç”¨é™æ€å†…éƒ¨ç±»</span><br>        <span class="hljs-comment">//æ–¹å¼1</span><br>        <span class="hljs-comment">//å› ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œæ˜¯å¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®çš„ï¼ˆå‰ææ˜¯æ»¡è¶³è®¿é—®æƒé™ï¼‰</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer10</span>.Inner10();<br>        <span class="hljs-comment">//Inner10 inner101 = Outer10.new Inner10();  //é”™è¯¯</span><br>        <span class="hljs-comment">//æ–¹å¼2</span><br>        <span class="hljs-comment">//ç¼–å†™ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œå¯ä»¥è¿”å›é™æ€å†…éƒ¨ç±»çš„å¯¹è±¡å®ä¾‹</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner101</span> <span class="hljs-operator">=</span> outer10.getInner10();<br>        <span class="hljs-comment">//ç¼–å†™ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥è¿”å›é™æ€å†…éƒ¨ç±»çš„å¯¹è±¡å®ä¾‹</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10_</span> <span class="hljs-operator">=</span> Outer10.getInner10_();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer10</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Outer10 cry()...&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//Inner10å°±æ˜¯é™æ€å†…éƒ¨ç±»</span><br>    <span class="hljs-comment">//1.æ”¾åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®</span><br>    <span class="hljs-comment">//2.ä½¿ç”¨staticä¿®é¥°</span><br>    <span class="hljs-comment">//3.å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜</span><br>    <span class="hljs-comment">//4.å¯ä»¥æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦</span><br>    <span class="hljs-comment">//5.ä½œç”¨åŸŸï¼šåŒå…¶å®ƒæˆå‘˜ï¼Œä¸ºæ•´ä¸ªä½œç”¨åŸŸ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner10</span>&#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æå››&quot;</span>;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;<br>            <span class="hljs-comment">//System.out.println(n1);  //é”™è¯¯</span><br>            System.out.println(<span class="hljs-string">&quot;nameï¼š&quot;</span> + name);<br>            System.out.println(<span class="hljs-string">&quot;name2ï¼š&quot;</span> + name2);<br>            cry();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Inner10 <span class="hljs-title function_">getInner10</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Inner10 <span class="hljs-title function_">getInner10_</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();<br>        inner10.say();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>æšä¸¾æ˜¯ä¸€ç»„å¸¸é‡çš„é›†åˆï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šæšä¸¾å±äºä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œé‡Œé¢åªåŒ…å«ä¸€ç»„æœ‰é™çš„ç‰¹å®šçš„å¯¹è±¡</p><p><strong>æšä¸¾çš„ä¸¤ç§å®ç°æ–¹å¼</strong></p><ul><li>è‡ªå®šä¹‰ç±»å®ç°æšä¸¾</li><li>ä½¿ç”¨ enum å…³é”®å­—å®ç°æšä¸¾</li></ul><h3 id="è‡ªå®šä¹‰ç±»å®ç°æšä¸¾"><a href="#è‡ªå®šä¹‰ç±»å®ç°æšä¸¾" class="headerlink" title="è‡ªå®šä¹‰ç±»å®ç°æšä¸¾"></a>è‡ªå®šä¹‰ç±»å®ç°æšä¸¾</h3><ul><li>ä¸éœ€è¦æä¾› setXXX æ–¹æ³•ï¼Œå› ä¸ºæšä¸¾å¯¹è±¡å€¼é€šå¸¸ä¸ºåªè¯»</li><li>å¯¹æšä¸¾å¯¹è±¡&#x2F;å±æ€§ä½¿ç”¨ final + static å…±åŒä¿®é¥°ï¼Œå®ç°åº•å±‚ä¼˜åŒ–</li><li>æšä¸¾å¯¹è±¡åé€šå¸¸ä½¿ç”¨å…¨éƒ¨å¤§å†™ï¼Œå¸¸é‡çš„å‘½åè§„èŒƒ</li><li>æšä¸¾å¯¹è±¡æ ¹æ®éœ€è¦ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªå±æ€§</li></ul><p><strong>ä¸€èˆ¬æ­¥éª¤ï¼š</strong></p><ul><li><ol><li>æ„é€ å™¨ç§æœ‰åŒ–</li></ol></li><li><ol start="2"><li>æœ¬ç±»å†…éƒ¨åˆ›å»ºä¸€ç»„å¯¹è±¡  æ¯”å¦‚ï¼š[å››ä¸ª æ˜¥å¤ç§‹å†¬]</li></ol></li><li><ol start="3"><li>å¯¹å¤–æš´éœ²å¯¹è±¡ï¼ˆé€šè¿‡ä¸ºå¯¹è±¡æ·»åŠ  public final static ä¿®é¥°ç¬¦ï¼‰</li></ol></li><li><ol start="4"><li>å¯ä»¥æä¾› get æ–¹æ³•ï¼Œä½†æ˜¯ä¸è¦æä¾› set<br> final å’Œ static å¾€å¾€æ­é…ä½¿ç”¨ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä¸ä¼šå¯¼è‡´ç±»åŠ è½½ï¼ˆåº•å±‚ç¼–è¯‘å™¨åšäº†ä¼˜åŒ–å¤„ç†ï¼‰</li></ol></li></ul><h3 id="enum-å…³é”®å­—å®ç°æšä¸¾"><a href="#enum-å…³é”®å­—å®ç°æšä¸¾" class="headerlink" title="enum å…³é”®å­—å®ç°æšä¸¾"></a>enum å…³é”®å­—å®ç°æšä¸¾</h3><p><strong>ä¸€èˆ¬æ­¥éª¤ï¼š</strong></p><ul><li>(1) ä½¿ç”¨å…³é”®å­— enum æ¥æ›¿ä»£ class</li><li>(2) public static final Season SPRING &#x3D; new Season(â€œæ˜¥å¤©â€, â€œæ¸©æš–â€)<br> ç›´æ¥ä½¿ç”¨ SPRING(â€œæ˜¥å¤©â€,â€æ¸©æš–â€);    å³ï¼šå¸¸é‡å(å®å‚åˆ—è¡¨)</li><li>(3) å¦‚æœæœ‰å¤šä¸ªå¸¸é‡(å¯¹è±¡)ï¼Œä½¿ç”¨é€—å·( , )é—´éš”å³å¯</li><li>(4) å¦‚æœä½¿ç”¨ enum å®ç°æšä¸¾ï¼Œè¦æ±‚æŠŠå®šä¹‰çš„å¸¸é‡å¯¹è±¡å†™åœ¨è¡Œé¦–</li></ul><p> <strong>enum å…³é”®å­—å®ç°æšä¸¾æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li><p>å½“æˆ‘ä»¬ä½¿ç”¨ enum å…³é”®å­—å¼€å‘ä¸€ä¸ªæšä¸¾ç±»æ—¶ï¼Œé»˜è®¤ä¼šç»§æ‰¿ Enum ç±»ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ª final ç±»</p></li><li><p>ä¼ ç»Ÿçš„ public static final Season2 SPRING &#x3D; new Season2(â€œæ˜¥å¤©â€,â€æ¸©æš–â€); ç®€åŒ–æˆ SPRING(â€œæ˜¥å¤©â€,â€æ¸©æš–â€)</p><p>è¿™é‡Œå¿…é¡»çŸ¥é“ï¼Œå®ƒè°ƒç”¨çš„æ˜¯å“ªä¸ªæ„é€ å™¨</p></li><li><p>å¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºæšä¸¾å¯¹è±¡ï¼Œåˆ™å®å‚åˆ—è¡¨å’Œå°æ‹¬å·éƒ½å¯ä»¥çœç•¥</p></li><li><p>å½“æœ‰å¤šä¸ªæšä¸¾å¯¹è±¡æ—¶ï¼Œä½¿ç”¨ é€—å· ( , ) é—´éš”ï¼Œæœ€åæœ‰ä¸€ä¸ªåˆ†å·ç»“å°¾</p></li><li><p>æšä¸¾å¯¹è±¡å¿…é¡»æ”¾åœ¨æšä¸¾ç±»çš„è¡Œé¦–</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.javaStudy.enum_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Enumeration03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Season2.AUTUMN);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Season2</span> &#123;<br><br><span class="hljs-comment">//    public static final Season2 SPRING = new Season2(&quot;æ˜¥å¤©&quot;,&quot;æ¸©æš–&quot;);</span><br><span class="hljs-comment">//    public static final Season2 WINTER = new Season2(&quot;å†¬å¤©&quot;,&quot;å«é‡&quot;);</span><br><span class="hljs-comment">//    public static final Season2 AUTUMN = new Season2(&quot;ç§‹å¤©&quot;,&quot;å‡‰çˆ½&quot;);</span><br><span class="hljs-comment">//    public static final Season2 SUMMER = new Season2(&quot;å¤å¤©&quot;,&quot;ç‚çƒ­&quot;);</span><br><br>    <span class="hljs-comment">//å¦‚æœä½¿ç”¨enumerateæ¥å®ç°æšä¸¾ç±»:</span><br>    <span class="hljs-comment">//1.ä½¿ç”¨å…³é”®å­— enum æ¥æ›¿ä»£ class</span><br>    <span class="hljs-comment">//2.public static final Season SPRING = new Season(&quot;æ˜¥å¤©&quot;, &quot;æ¸©æš–&quot;)</span><br>    <span class="hljs-comment">//  ç›´æ¥ä½¿ç”¨ SPRING(&quot;æ˜¥å¤©&quot;,&quot;æ¸©æš–&quot;);  å³ï¼šå¸¸é‡å(å®å‚åˆ—è¡¨)</span><br>    <span class="hljs-comment">//3.å¦‚æœæœ‰å¤šä¸ªå¸¸é‡(å¯¹è±¡)ï¼Œä½¿ç”¨é€—å·(,)é—´éš”å³å¯</span><br>    <span class="hljs-comment">//4.å¦‚æœä½¿ç”¨ enum å®ç°æšä¸¾ï¼Œè¦æ±‚æŠŠå®šä¹‰çš„å¸¸é‡å¯¹è±¡å†™åœ¨å‰é¢</span><br><br>    SPRING(<span class="hljs-string">&quot;æ˜¥å¤©&quot;</span>,<span class="hljs-string">&quot;æ¸©æš–&quot;</span>),WINTER(<span class="hljs-string">&quot;å†¬å¤©&quot;</span>,<span class="hljs-string">&quot;å«é‡&quot;</span>),AUTUMN(<span class="hljs-string">&quot;ç§‹å¤©&quot;</span>,<span class="hljs-string">&quot;å‡‰çˆ½&quot;</span>),SUMMER(<span class="hljs-string">&quot;å¤å¤©&quot;</span>,<span class="hljs-string">&quot;ç‚çƒ­&quot;</span>);<br>    <span class="hljs-comment">//What;  //ä½¿ç”¨ æ— å‚æ„é€ å™¨</span><br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String desc;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Season2</span><span class="hljs-params">()</span>&#123;&#125;  <span class="hljs-comment">//æ— å‚æ„é€ å™¨</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Season2</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Season&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, desc=&#x27;&quot;</span> + desc + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¯¾å ‚ç»ƒä¹ </strong></p> <img src="image-20220905151511623.png" alt="image-20220905151511623" style="zoom:50%;" /><p> è¡¥å……ï¼ˆåŸæ³¨é‡Šï¼‰ï¼š[ è¿”å›å€¼: the name of this enum constant ]</p><h3 id="enum-å¸¸ç”¨æ–¹æ³•"><a href="#enum-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="enum å¸¸ç”¨æ–¹æ³•"></a>enum å¸¸ç”¨æ–¹æ³•</h3><p>è¯´æ˜ï¼šä½¿ç”¨å…³é”®å­— enum æ—¶ï¼Œä¼šéšå¼ç»§æ‰¿ Enum ç±», è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Enum ç±»ç›¸å…³çš„æ–¹æ³•ã€‚</p><p> <img src="/2022/06/30/JavaNote/image-20220905215119841.png" alt="image-20220905215119841"></p><ul><li><ol><li>toStringï¼šEnum ç±»å·²ç»é‡å†™è¿‡äº†ï¼Œè¿”å›çš„æ˜¯å½“å‰å¯¹è±¡åï¼Œå­ç±»å¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„å±æ€§ä¿¡æ¯</li></ol></li><li><ol start="2"><li>nameï¼šè¿”å›å½“å‰å¯¹è±¡åï¼ˆå¸¸é‡åï¼‰ï¼Œå­ç±»ä¸­ä¸èƒ½é‡å†™</li></ol></li><li><ol start="3"><li>ordinalï¼šè¿”å›å½“å‰å¯¹è±¡çš„ä½ç½®å·ï¼Œé»˜è®¤ä» 0 å¼€å§‹</li></ol></li><li><ol start="4"><li>valuesï¼šè¿”å›å½“å‰æšä¸¾ç±»ä¸­æ‰€æœ‰çš„å¸¸é‡</li></ol></li><li><ol start="5"><li>valueOfï¼šå°†å­—ç¬¦ä¸²è½¬æ¢æˆæšä¸¾å¯¹è±¡ï¼Œè¦æ±‚å­—ç¬¦ä¸²å¿…é¡»ä¸ºå·²æœ‰çš„å¸¸é‡åï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ï¼</li></ol></li><li><ol start="6"><li>compareToï¼šæ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¸¸é‡ï¼Œæ¯”è¾ƒçš„å°±æ˜¯ç¼–å·ï¼</li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨Season2 æšä¸¾ç±»ï¼Œæ¥æ¼”ç¤ºå„ç§æ–¹æ³•</span><br>        <span class="hljs-type">Season2</span> <span class="hljs-variable">autumn</span> <span class="hljs-operator">=</span> Season2.AUTUMN;<br><br>        <span class="hljs-comment">//è¾“å‡ºæšä¸¾å¯¹è±¡çš„åå­—</span><br>        System.out.println(autumn.name());<br>        <span class="hljs-comment">//ordinal() è¾“å‡ºçš„æ˜¯è¯¥æšä¸¾å¯¹è±¡çš„æ¬¡åº/ç¼–å·ï¼Œä»0å¼€å§‹ç¼–å·</span><br>        <span class="hljs-comment">//AUTUMN æšä¸¾å¯¹è±¡æ˜¯ç¬¬ä¸‰ä¸ªï¼Œå› æ­¤è¾“å‡º 2</span><br>        System.out.println(autumn.ordinal());<br>        <span class="hljs-comment">//ä»åç¼–è¯‘å¯ä»¥çœ‹å‡º valuesæ–¹æ³•ï¼Œè¿”å› Season2[]</span><br>        <span class="hljs-comment">//å«æœ‰å®šä¹‰çš„æ‰€æœ‰æšä¸¾å¯¹è±¡</span><br>        Season2[] values = Season2.values();<br>        System.out.println(<span class="hljs-string">&quot;===éå†å–å‡ºæšä¸¾å¯¹è±¡(å¢å¼ºfor)====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Season2 season: values) &#123;<span class="hljs-comment">//å¢å¼ºforå¾ªç¯</span><br>            System.out.println(season);<br>        &#125;<br><br>        <span class="hljs-comment">//valueOfï¼šå°†å­—ç¬¦ä¸²è½¬æ¢æˆæšä¸¾å¯¹è±¡ï¼Œè¦æ±‚å­—ç¬¦ä¸²å¿…é¡»ä¸ºå·²æœ‰çš„å¸¸é‡åï¼Œå¦åˆ™æŠ¥å¼‚å¸¸</span><br>        <span class="hljs-comment">//æ‰§è¡Œæµç¨‹</span><br>        <span class="hljs-comment">//1. æ ¹æ®ä½ è¾“å…¥çš„ &quot;AUTUMN&quot; åˆ° Season2çš„æšä¸¾å¯¹è±¡å»æŸ¥æ‰¾</span><br>        <span class="hljs-comment">//2. å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŠ¥é”™</span><br>        <span class="hljs-type">Season2</span> <span class="hljs-variable">autumn1</span> <span class="hljs-operator">=</span> Season2.valueOf(<span class="hljs-string">&quot;AUTUMN&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;autumn1=&quot;</span> + autumn1);<br>        System.out.println(autumn == autumn1);<br><br>        <span class="hljs-comment">//compareToï¼šæ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¸¸é‡ï¼Œæ¯”è¾ƒçš„å°±æ˜¯ç¼–å·</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. å°±æ˜¯æŠŠ Season2.AUTUMN æšä¸¾å¯¹è±¡çš„ç¼–å· å’Œ Season2.SUMMER æšä¸¾å¯¹è±¡çš„ç¼–å·æ¯”è¾ƒ</span><br>        <span class="hljs-comment">//2. çœ‹çœ‹ç»“æœ</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        public final int compareTo(E o) &#123;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">            return self.ordinal - other.ordinal;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        Season2.AUTUMNçš„ç¼–å·(3) - Season2.SUMMERçš„ç¼–å·(2)</span><br><span class="hljs-comment">         */</span><br>        System.out.println(Season2.AUTUMN.compareTo(Season2.SUMMER));  <span class="hljs-comment">// 1</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="enum-å®ç°æ¥å£"><a href="#enum-å®ç°æ¥å£" class="headerlink" title="enum å®ç°æ¥å£"></a>enum å®ç°æ¥å£</h3><ul><li><ol><li>ä½¿ç”¨ enum å…³é”®å­—åï¼Œå°±ä¸èƒ½å†ç»§æ‰¿å…¶å®ƒç±»äº†ï¼Œå› ä¸º enum ä¼šéšå¼ç»§æ‰¿ Enumï¼Œè€Œ Java æ˜¯å•ç»§æ‰¿æœºåˆ¶ã€‚</li></ol></li><li><ol start="2"><li>æšä¸¾ç±»å’Œæ™®é€šç±»ä¸€æ ·ï¼Œå¯ä»¥å®ç°æ¥å£ï¼Œå¦‚ä¸‹å½¢å¼ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> ç±»å implements æ¥å£ <span class="hljs-number">1</span>ï¼Œæ¥å£ <span class="hljs-number">2</span>&#123;&#125;<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Music.CLASSICMUSIC.playing();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><br>&#125;<br><span class="hljs-comment">//1.ä½¿ç”¨enumå…³é”®å­—åï¼Œå°±ä¸èƒ½å†ç»§æ‰¿å…¶å®ƒç±»äº†ï¼Œå› ä¸ºenumä¼šéšå¼ç»§æ‰¿Enumï¼Œè€ŒJavaæ˜¯å•ç»§æ‰¿æœºåˆ¶</span><br><span class="hljs-comment">//  enum Season3 extends A &#123;  &#125;  //é”™è¯¯</span><br><span class="hljs-comment">//2.enumå®ç°çš„æšä¸¾ç±»ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥è¿˜æ˜¯å¯ä»¥å®ç°æ¥å£çš„.</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IPlaying</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">playing</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Music</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IPlaying</span> &#123;<br>    CLASSICMUSIC;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">playing</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ’­æ”¾å¥½å¬çš„éŸ³ä¹...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h2><ul><li><p>æ³¨è§£(Annotation) ä¹Ÿè¢«ç§°ä¸ºå…ƒæ•°æ®ï¼Œç”¨äºä¿®é¥°è§£é‡Š åŒ…ã€ç±»ã€æ–¹æ³•ã€å±æ€§ã€æ„é€ å™¨ã€å±€éƒ¨å˜é‡ç­‰æ•°æ®ä¿¡æ¯</p></li><li><p>å’Œæ³¨é‡Šä¸€æ ·ï¼Œæ³¨è§£ä¸å½±å“ç¨‹åºé€»è¾‘ï¼Œä½†æ³¨è§£å¯ä»¥è¢«ç¼–è¯‘æˆ–è¿è¡Œï¼Œç›¸å½“äºåµŒå…¥åœ¨ä»£ç ä¸­çš„è¡¥å……ä¿¡æ¯</p></li><li><p>åœ¨ JavaSE ä¸­ï¼Œæ³¨è§£çš„ä½¿ç”¨ç›®çš„æ¯”è¾ƒç®€å•ï¼Œä¾‹å¦‚æ ‡è®°è¿‡æ—¶çš„åŠŸèƒ½ï¼Œå¿½ç•¥è­¦å‘Šç­‰ã€‚</p><p>åœ¨ JavaEE ä¸­ï¼Œæ³¨è§£å æ®äº†æ›´é‡è¦çš„è§’è‰²ï¼Œä¾‹å¦‚ç”¨æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ä»»ä½•åˆ‡é¢ï¼Œä»£æ›¿ JacaEE æ—§ç‰ˆä¸­æ‰€é—ç•™çš„è‡ƒè‚¿ä»£ç å’Œ XML é…ç½®ç­‰</p></li></ul><h3 id="åŸºæœ¬çš„-Annotation-ä»‹ç»"><a href="#åŸºæœ¬çš„-Annotation-ä»‹ç»" class="headerlink" title="åŸºæœ¬çš„ Annotation ä»‹ç»"></a>åŸºæœ¬çš„ Annotation ä»‹ç»</h3><p>ä½¿ç”¨ Annotation æ—¶è¦åœ¨å…¶å‰é¢å¢åŠ  @ ç¬¦å·, å¹¶æŠŠè¯¥ Annotation å½“æˆä¸€ä¸ªä¿®é¥°ç¬¦ä½¿ç”¨, ç”¨äºä¿®é¥°å®ƒæ”¯æŒçš„ç¨‹åºå…ƒç´ </p><p><strong>ä¸‰ä¸ªåŸºæœ¬çš„ Annotationï¼š</strong></p><ul><li><ol><li>@Override: é™å®šæŸä¸ªæ–¹æ³•ï¼Œæ˜¯é‡å†™çˆ¶ç±»æ–¹æ³•, è¯¥æ³¨è§£åªèƒ½ç”¨äºæ–¹æ³•</li></ol></li><li><ol start="2"><li>@Deprecated: ç”¨äºè¡¨ç¤ºæŸä¸ªç¨‹åºå…ƒç´ (ç±», æ–¹æ³•ç­‰)å·²è¿‡æ—¶</li></ol></li><li><ol start="3"><li>@SuppressWarnings: æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Š</li></ol></li></ul><h3 id="Override-ä½¿ç”¨è¯´æ˜"><a href="#Override-ä½¿ç”¨è¯´æ˜" class="headerlink" title="@Override ä½¿ç”¨è¯´æ˜"></a>@Override ä½¿ç”¨è¯´æ˜</h3><p><strong>@Override: é™å®šæŸä¸ªæ–¹æ³•ï¼Œæ˜¯é‡å†™çˆ¶ç±»æ–¹æ³•, è¯¥æ³¨è§£åªèƒ½ç”¨äºæ–¹æ³•</strong></p><ul><li>@Override è¡¨ç¤ºçŸ¥é“é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼ˆä»ç¼–è¯‘å±‚é¢éªŒè¯ï¼‰ï¼Œå¦‚æœçˆ¶ç±»æ²¡æœ‰è¯¥æ–¹æ³•ï¼Œåˆ™ä¼šæŠ¥é”™</li><li>å¦‚æœä¸å†™ @Override æ³¨è§£ï¼Œä¹Ÿå¯ä»¥æ„æˆé‡å†™</li><li>@Override åªèƒ½ä¿®é¥°æ–¹æ³•ï¼Œä¸èƒ½ä¿®é¥°å…¶å®ƒç±»ã€åŒ…ã€å±æ€§ç­‰</li><li>æŸ¥çœ‹ @Override æ³¨è§£æºç ä¸º @Target(ElementType.METHOD)ï¼Œè¯´æ˜åªæ˜¯ä¿®é¥°æ–¹æ³•</li><li>@Target æ˜¯ä¿®é¥°æ³¨è§£çš„æ³¨è§£ï¼Œç§°ä¸ºå…ƒæ³¨è§£</li><li>å…³äº@interfaceçš„è¡¥å……è¯´æ˜ï¼š@è¡¥å……interfaceä¸æ˜¯interfaceï¼Œè€Œæ˜¯æ³¨è§£ç±»ï¼ˆJDK5.0ä¹‹ååŠ å…¥çš„ï¼‰</li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;<span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        System.out.println(<span class="hljs-string">&quot;Father fly...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123;<span class="hljs-comment">//å­ç±»</span><br>    <span class="hljs-meta">@Override</span>   <span class="hljs-comment">//è¯´æ˜</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Son fly....&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-comment">//è§£è¯»ï¼š</span><br>    <span class="hljs-comment">//1. @Override æ³¨è§£æ”¾åœ¨flyæ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºå­ç±»çš„flyæ–¹æ³•æ—¶é‡å†™äº†çˆ¶ç±»çš„fly</span><br>    <span class="hljs-comment">//2. è¿™é‡Œå¦‚æœæ²¡æœ‰å†™ @Override è¿˜æ˜¯é‡å†™äº†çˆ¶ç±»fly</span><br>    <span class="hljs-comment">//3. å¦‚æœä½ å†™äº†@Overrideæ³¨è§£ï¼Œç¼–è¯‘å™¨å°±ä¼šå»æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦çœŸçš„é‡å†™äº†çˆ¶ç±»çš„</span><br>    <span class="hljs-comment">//   æ–¹æ³•ï¼Œå¦‚æœçš„ç¡®é‡å†™äº†ï¼Œåˆ™ç¼–è¯‘é€šè¿‡ï¼Œå¦‚æœæ²¡æœ‰æ„æˆé‡å†™ï¼Œåˆ™ç¼–è¯‘é”™è¯¯</span><br>    <span class="hljs-comment">//4. çœ‹çœ‹ @Overrideçš„å®šä¹‰</span><br>    <span class="hljs-comment">//   è§£è¯»ï¼š å¦‚æœå‘ç° @interface è¡¨ç¤ºä¸€ä¸ª æ³¨è§£ç±»</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        @Target(ElementType.METHOD)</span><br><span class="hljs-comment">        @Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-comment">        public @interface Override &#123;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">     */</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Deprecated-ä½¿ç”¨è¯´æ˜"><a href="#Deprecated-ä½¿ç”¨è¯´æ˜" class="headerlink" title="@Deprecated ä½¿ç”¨è¯´æ˜"></a>@Deprecated ä½¿ç”¨è¯´æ˜</h3><p><strong>@Deprecated: ç”¨äºè¡¨ç¤ºæŸä¸ªç¨‹åºå…ƒç´ (ç±», æ–¹æ³•ç­‰)å·²è¿‡æ—¶ï¼ˆå³ä¸å†æ¨èä½¿ç”¨ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼‰</strong></p><ul><li><p>ç”¨äºè¡¨ç¤ºæŸä¸ªç¨‹åºå…ƒç´ ï¼ˆç±»ï¼Œæ–¹æ³•ç­‰ï¼‰å·²è¿‡æ—¶ï¼ˆå³ä¸å†æ¨èä½¿ç”¨ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼‰</p></li><li><p>å¯ä»¥ä¿®é¥°æ–¹æ³•ã€ç±»ã€å­—æ®µã€åŒ…ã€å‚æ•° ç­‰ç­‰</p><p>@Target(value&#x3D;{TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})</p></li><li><p>@Deprecated çš„ä½œç”¨å¯ä»¥åšåˆ°æ–°æ—§ç‰ˆæœ¬çš„å…¼å®¹ä¸è¿‡æ¸¡</p></li></ul><h3 id="SuppressWarnings-ä½¿ç”¨è¯´æ˜"><a href="#SuppressWarnings-ä½¿ç”¨è¯´æ˜" class="headerlink" title="@SuppressWarnings ä½¿ç”¨è¯´æ˜"></a>@SuppressWarnings ä½¿ç”¨è¯´æ˜</h3><p><strong>@SuppressWarnings: æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Š</strong></p><p><strong>è¯´æ˜å„ç§å€¼ï¼š</strong></p><ul><li><p>unchecked æ˜¯å¿½ç•¥æ²¡æœ‰æ£€æŸ¥çš„è­¦å‘Š</p></li><li><p>rawtypes æ˜¯å¿½ç•¥æ²¡æœ‰æŒ‡å®šæ³›å‹çš„è­¦å‘Šï¼ˆä¼ å‚æ—¶æ²¡æœ‰æŒ‡å®šæ³›å‹çš„è­¦å‘Šé”™è¯¯ï¼‰</p></li><li><p>unused æ˜¯å¿½ç•¥æ²¡æœ‰ä½¿ç”¨æŸä¸ªå˜é‡çš„è­¦å‘Šé”™è¯¯</p></li><li><p>@SuppressWarnings å¯ä»¥ä¿®é¥°çš„å…ƒç´ ä¸º</p><p>(1) æ”¾ç½®çš„ä½ç½®å°±æ˜¯ TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE<br>(2) è¯¥æ³¨è§£ç±»æœ‰æ•°ç»„ String[] values() è®¾ç½®ä¸€ä¸ªæ•°ç»„æ¯”å¦‚ {â€œrawtypesâ€, â€œuncheckedâ€, â€œunusedâ€}</p></li><li><p>ç”Ÿæˆ@SuppressWarningsæ—¶ï¼Œä¸ç”¨èƒŒï¼Œç›´æ¥ç‚¹å‡»å·¦ä¾§çš„é»„è‰²æç¤ºå°±å¯ä»¥é€‰æ‹©</p></li><li><p>å…³äºSuppressWarnings ä½œç”¨èŒƒå›´æ˜¯å’Œä½ æ”¾ç½®çš„ä½ç½®ç›¸å…³<br>æ¯”å¦‚ @SuppressWarningsæ”¾ç½®åœ¨ mainæ–¹æ³•ï¼Œé‚£ä¹ˆæŠ‘åˆ¶è­¦å‘Šçš„èŒƒå›´å°±æ˜¯ main<br>é€šå¸¸æˆ‘ä»¬å¯ä»¥æ”¾ç½®å…·ä½“çš„è¯­å¥, æ–¹æ³•, ç±».</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.hspedu.annotation_;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;, &quot;unchecked&quot;, &quot;unused&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SuppressWarnings_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>        <span class="hljs-type">int</span> i;<br>        System.out.println(list.get(<span class="hljs-number">1</span>));<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//        @SuppressWarnings(&#123;&quot;rawtypes&quot;&#125;)</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;mary&quot;</span>);<br><span class="hljs-comment">//        @SuppressWarnings(&#123;&quot;unused&quot;&#125;)</span><br>        <span class="hljs-type">int</span> i;<br>        System.out.println(list.get(<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br><span class="hljs-comment">// è§£è¯»</span><br><span class="hljs-comment">// 1. å½“æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°è¿™äº›è­¦å‘Šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ SuppressWarningsæ³¨è§£æ¥æŠ‘åˆ¶è­¦å‘Šä¿¡æ¯</span><br><span class="hljs-comment">// 2. åœ¨&#123;&quot;&quot;&#125; ä¸­ï¼Œå¯ä»¥å†™å…¥ä½ å¸Œæœ›æŠ‘åˆ¶(ä¸æ˜¾ç¤º)è­¦å‘Šä¿¡æ¯</span><br><span class="hljs-comment">// 3. å¯ä»¥æŒ‡å®šçš„è­¦å‘Šç±»å‹æœ‰</span><br><span class="hljs-comment">//        //allï¼ŒæŠ‘åˆ¶æ‰€æœ‰è­¦å‘Š</span><br><span class="hljs-comment">//        //boxingï¼ŒæŠ‘åˆ¶ä¸å°è£…/æ‹†è£…ä½œä¸šç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //castï¼ŒæŠ‘åˆ¶ä¸å¼ºåˆ¶è½¬å‹ä½œä¸šç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //dep-annï¼ŒæŠ‘åˆ¶ä¸æ·˜æ±°æ³¨é‡Šç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //deprecationï¼ŒæŠ‘åˆ¶ä¸æ·˜æ±°çš„ç›¸å…³è­¦å‘Š</span><br><span class="hljs-comment">//        //fallthroughï¼ŒæŠ‘åˆ¶ä¸switché™ˆè¿°å¼ä¸­é—æ¼breakç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //finallyï¼ŒæŠ‘åˆ¶ä¸æœªä¼ å›finallyåŒºå—ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //hidingï¼ŒæŠ‘åˆ¶ä¸éšè—å˜æ•°çš„åŒºåŸŸå˜æ•°ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //incomplete-switchï¼ŒæŠ‘åˆ¶ä¸switché™ˆè¿°å¼(enum case)ä¸­é—æ¼é¡¹ç›®ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //javadocï¼ŒæŠ‘åˆ¶ä¸javadocç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //nlsï¼ŒæŠ‘åˆ¶ä¸énlså­—ä¸²æ–‡å­—ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //nullï¼ŒæŠ‘åˆ¶ä¸ç©ºå€¼åˆ†æç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //rawtypesï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨rawç±»å‹ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //resourceï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨Closeableç±»å‹çš„èµ„æºç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //restrictionï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨ä¸å»ºè®®æˆ–ç¦æ­¢å‚ç…§ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //serialï¼ŒæŠ‘åˆ¶ä¸å¯åºåˆ—åŒ–çš„ç±»åˆ«é—æ¼serialVersionUIDæ ä½ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //static-accessï¼ŒæŠ‘åˆ¶ä¸é™æ€å­˜å–ä¸æ­£ç¡®ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //static-methodï¼ŒæŠ‘åˆ¶ä¸å¯èƒ½å®£å‘Šä¸ºstaticçš„æ–¹æ³•ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //superï¼ŒæŠ‘åˆ¶ä¸ç½®æ¢æ–¹æ³•ç›¸å…³ä½†ä¸å«superå‘¼å«çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //synthetic-accessï¼ŒæŠ‘åˆ¶ä¸å†…éƒ¨ç±»åˆ«çš„å­˜å–æœªæœ€ä½³åŒ–ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //sync-overrideï¼ŒæŠ‘åˆ¶å› ä¸ºç½®æ¢åŒæ­¥æ–¹æ³•è€Œé—æ¼åŒæ­¥åŒ–çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //uncheckedï¼ŒæŠ‘åˆ¶ä¸æœªæ£€æŸ¥çš„ä½œä¸šç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //unqualified-field-accessï¼ŒæŠ‘åˆ¶ä¸æ ä½å­˜å–ä¸åˆæ ¼ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">//        //unusedï¼ŒæŠ‘åˆ¶ä¸æœªç”¨çš„ç¨‹å¼ç åŠåœç”¨çš„ç¨‹å¼ç ç›¸å…³çš„è­¦å‘Š</span><br><span class="hljs-comment">// 4. å…³äºSuppressWarnings ä½œç”¨èŒƒå›´æ˜¯å’Œä½ æ”¾ç½®çš„ä½ç½®ç›¸å…³</span><br><span class="hljs-comment">//    æ¯”å¦‚ @SuppressWarningsæ”¾ç½®åœ¨ mainæ–¹æ³•ï¼Œé‚£ä¹ˆæŠ‘åˆ¶è­¦å‘Šçš„èŒƒå›´å°±æ˜¯ main</span><br><span class="hljs-comment">//    é€šå¸¸æˆ‘ä»¬å¯ä»¥æ”¾ç½®å…·ä½“çš„è¯­å¥, æ–¹æ³•, ç±».</span><br><span class="hljs-comment">// 5.  çœ‹çœ‹ @SuppressWarnings æºç </span><br><span class="hljs-comment">// (1) æ”¾ç½®çš„ä½ç½®å°±æ˜¯ TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE</span><br><span class="hljs-comment">// (2) è¯¥æ³¨è§£ç±»æœ‰æ•°ç»„ String[] values() è®¾ç½®ä¸€ä¸ªæ•°ç»„æ¯”å¦‚ &#123;&quot;rawtypes&quot;, &quot;unchecked&quot;, &quot;unused&quot;&#125;</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        @Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span><br><span class="hljs-comment">            @Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-comment">            public @interface SuppressWarnings &#123;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                String[] value();</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">     */</span><br></code></pre></td></tr></table></figure><h3 id="JDK-çš„å…ƒ-Annotation-å…ƒæ³¨è§£ï¼Œ-äº†è§£"><a href="#JDK-çš„å…ƒ-Annotation-å…ƒæ³¨è§£ï¼Œ-äº†è§£" class="headerlink" title="JDK çš„å…ƒ Annotation(å…ƒæ³¨è§£ï¼Œ äº†è§£)"></a>JDK çš„å…ƒ Annotation(å…ƒæ³¨è§£ï¼Œ äº†è§£)</h3><p><strong>å…ƒæ³¨è§£çš„åŸºæœ¬ä»‹ç»ï¼š</strong></p><p> JDK çš„å…ƒ Annotation ç”¨äºä¿®é¥°å…¶ä»– Annotation</p><p>å…ƒæ³¨è§£ï¼š æœ¬èº«ä½œç”¨ä¸å¤§ï¼Œè®²è¿™ä¸ªåŸå› å¸Œæœ›åŒå­¦ä»¬ï¼Œçœ‹æºç æ—¶ï¼Œå¯ä»¥çŸ¥é“ä»–æ˜¯å¹²ä»€ä¹ˆçš„</p><p><strong>å…ƒæ³¨è§£çš„ç§ç±» (ä½¿ç”¨ä¸å¤šï¼Œäº†è§£, ä¸ç”¨æ·±å…¥ç ”ç©¶)</strong></p><ul><li><ol><li>Retention &#x2F;&#x2F;æŒ‡å®šæ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼Œä¸‰ç§ SOURCE,CLASS,RUNTIME</li></ol></li><li><ol start="2"><li>Target &#x2F;&#x2F; æŒ‡å®šæ³¨è§£å¯ä»¥åœ¨å“ªäº›åœ°æ–¹ä½¿ç”¨</li></ol></li><li><ol start="3"><li>Documented &#x2F;&#x2F;æŒ‡å®šè¯¥æ³¨è§£æ˜¯å¦ä¼šåœ¨ javadoc ä½“ç°</li></ol></li><li><ol start="4"><li>Inherited &#x2F;&#x2F;å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»æ³¨è§£</li></ol></li></ul><p><strong>@Retention æ³¨è§£ï¼š</strong><br>è¯´æ˜ï¼š<br>åªèƒ½ç”¨äºä¿®é¥°ä¸€ä¸ª Annotation å®šä¹‰ï¼Œç”¨äºæŒ‡å®šè¯¥ Annotation å¯ä»¥ä¿ç•™å¤šé•¿æ—¶é—´ï¼Œ@Rentention åŒ…å«ä¸€ä¸ªRetentionPolicyç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä½¿ç”¨ @Rentention æ—¶å¿…é¡»ä¸ºè¯¥ value æˆå‘˜å˜é‡æŒ‡å®šå€¼</p><p>@Retention çš„ä¸‰ç§å€¼</p><ul><li><ol><li>RetentionPolicy.SOURCE: ç¼–è¯‘å™¨ä½¿ç”¨åï¼Œç›´æ¥ä¸¢å¼ƒè¿™ç§ç­–ç•¥çš„æ³¨è§£ã€‚</li></ol></li><li><ol start="2"><li>RetentionPolicy.CLASS: ç¼–è¯‘å™¨å°†æŠŠæ³¨è§£è®°å½•åœ¨ class æ–‡ä»¶ä¸­ï¼Œå½“è¿è¡Œ Java ç¨‹åºæ—¶ï¼ŒJVM ä¸ä¼šä¿ç•™æ³¨è§£ã€‚</li></ol><p>â€‹    è¿™æ˜¯é»˜è®¤å€¼</p></li><li><ol start="3"><li>RetentionPolicy.RUNTIME:ç¼–è¯‘å™¨å°†æŠŠæ³¨è§£è®°å½•åœ¨ class æ–‡ä»¶ä¸­ï¼Œå½“è¿è¡Œ Java ç¨‹åºæ—¶, JVM ä¼šä¿ç•™æ³¨è§£ã€‚</li></ol><p>â€‹    ç¨‹åºå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨è§£</p></li></ul> <img src="image-20220905232940982.png" alt="image-20220905232940982" style="zoom:45%;" /><p><strong>@Target æ³¨è§£ï¼š</strong></p><p>ç”¨äºä¿®é¥° Annotation å®šä¹‰ï¼Œç”¨äºæŒ‡å®šè¢«ä¿®é¥°çš„ Annotation èƒ½ç”¨äºä¿®é¥°å“ªäº›ç¨‹åºå…ƒç´ </p><p>@Target ä¹ŸåŒ…å«ä¸€ä¸ªåä¸º value çš„æˆå‘˜å˜é‡</p><p>ä¾‹å¦‚ï¼š</p><p>&#x2F;&#x2F;Deprecated.class ä¸­</p><p>@Target({TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})</p><p>ä»£è¡¨å¯åœ¨  TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE  ç­‰ç±»å‹ä¸­ä½¿ç”¨</p><p><strong>@Target çš„æºç è¯´æ˜</strong></p> <img src="image-20220905233716325.png" alt="image-20220905233716325" style="zoom:55%;" /><p><strong>@Documented æ³¨è§£</strong></p><p>@Documented ç”¨äºæŒ‡å®šè¢«è¯¥å…ƒ Annotation ä¿®é¥°çš„ Annotation ç±»å°†è¢« javadoc å·¥å…·æå–æˆæ–‡æ¡£ï¼Œå³åœ¨ç”Ÿæˆæ–‡æ¡£æ—¶ï¼Œå¯ä»¥çœ‹åˆ°è¯¥æ³¨è§£</p><p>è¯´æ˜ï¼šå®šä¹‰ä¸º Documented çš„æ³¨è§£å¿…é¡»è®¾ç½® Retention å€¼ä¸º RUNTIME</p> <img src="image-20220905234255887.png" alt="image-20220905234255887" style="zoom: 80%;" /> <img src="image-20220905234323810.png" alt="image-20220905234323810" style="zoom: 80%;" /><p><strong>@Inherited æ³¨è§£</strong></p> <img src="image-20220905234400437.png" alt="image-20220905234400437" style="zoom: 45%;" /><h2 id="å¼‚å¸¸-Exception"><a href="#å¼‚å¸¸-Exception" class="headerlink" title="å¼‚å¸¸ Exception"></a>å¼‚å¸¸ Exception</h2><p>Java è¯­è¨€ä¸­ï¼Œå°†ç¨‹åºæ‰§è¡Œä¸­å‘ç”Ÿçš„ä¸æ­£å¸¸æƒ…å†µç§°ä¸º â€œå¼‚å¸¸â€ ã€‚  </p><p>æ³¨ï¼šå¼€å‘è¿‡ç¨‹ä¸­çš„è¯­æ³•é”™è¯¯å’Œé€»è¾‘é”™è¯¯ä¸æ˜¯å¼‚å¸¸</p><p>æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„å¼‚å¸¸äº‹ä»¶å¯åˆ†ä¸ºä¸¤å¤§ç±»</p><ul><li><p>Error (é”™è¯¯)ï¼šJava è™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡äº‹ä»¶ã€‚å¦‚ JVM ç³»ç»Ÿå†…éƒ¨é”™è¯¯ã€èµ„æºè€—å°½ç­‰ä¸¥é‡æƒ…å†µã€‚</p><p>æ¯”å¦‚ï¼šStackOverflowError[æ ˆæº¢å‡º] å’Œ OOM(out of memory)ï¼ŒError æ˜¯ä¸¥é‡é”™è¯¯ï¼Œç¨‹åºä¼šå´©æºƒ</p></li><li><p>Exceptionï¼šå…¶å®ƒå› ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ å¯¼è‡´çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚</p><p>ä¾‹å¦‚ç©ºæŒ‡é’ˆè®¿é—®ï¼Œè¯•å›¾è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œç½‘ç»œè¿æ¥ä¸­æ–­ç­‰ç­‰</p><p>Exception åˆ†ä¸ºä¸¤å¤§ç±»ï¼šè¿è¡Œæ—¶å¼‚å¸¸ å’Œ ç¼–è¯‘æ—¶å¼‚å¸¸</p></li></ul><h3 id="å¼‚å¸¸ä½“ç³»å›¾"><a href="#å¼‚å¸¸ä½“ç³»å›¾" class="headerlink" title="å¼‚å¸¸ä½“ç³»å›¾"></a>å¼‚å¸¸ä½“ç³»å›¾</h3><p><img src="/2022/06/30/JavaNote/image-20220906143123342.png" alt="image-20220906143123342"></p><ul><li><p>å¼‚å¸¸åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ å’Œ ç¼–è¯‘æ—¶å¼‚å¸¸</p></li><li><p>è¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¼–è¯‘å™¨æ£€æŸ¥ä¸å‡ºæ¥ã€‚ä¸€èˆ¬æ˜¯æŒ‡ç¼–ç¨‹æ—¶çš„é€»è¾‘é”™è¯¯ï¼Œæ˜¯ç¨‹åºå‘˜åº”è¯¥é¿å…å…¶å‡ºç°çš„å¼‚å¸¸</p><p>java.lang.RuntimeException ç±»åŠå®ƒçš„å­ç±»éƒ½æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ ï¼ˆå¦‚ é™¤0å¼‚å¸¸ï¼‰</p></li><li><p>å¯¹äºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯ä»¥ä¸åšå¤„ç†ï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸å¾ˆæ™®éï¼Œè‹¥å…¨å¤„ç†å¯èƒ½ä¼šå¯¹ç¨‹åºçš„å¯è¯»æ€§å’Œè¿è¡Œæ•ˆç‡äº§ç”Ÿå½±å“</p></li><li><p>ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œæ˜¯ç¼–è¯‘å™¨è¦æ±‚å¿…é¡»å¤„ç½®çš„å¼‚å¸¸ï¼ˆä¸ç„¶ç¼–è¯‘ä¸èƒ½é€šè¿‡ï¼‰</p></li></ul><h3 id="å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸"><a href="#å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸" class="headerlink" title="å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸"></a>å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸</h3><ul><li>NullPointerException ç©ºæŒ‡é’ˆå¼‚å¸¸</li><li>ArithmeticException æ•°å­¦è¿ç®—å¼‚å¸¸</li><li>ArrayIndexOutOfBoundsException æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸</li><li>ClassCastException ç±»å‹è½¬æ¢å¼‚å¸¸</li><li>NumberFormatException æ•°å­—æ ¼å¼ä¸æ­£ç¡®å¼‚å¸¸</li></ul><p>NullPointerException ç©ºæŒ‡é’ˆå¼‚å¸¸</p><p>å½“åº”ç”¨ç¨‹åºè¯•å›¾åœ¨éœ€è¦å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨ null æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;  <br></code></pre></td></tr></table></figure><p>ArithmeticException æ•°å­¦è¿ç®—å¼‚å¸¸</p><p>å½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¾‹å¦‚ é™¤0é”™è¯¯</span><br></code></pre></td></tr></table></figure><p>ArrayIndexOutOfBoundsException æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸</p><p>ç”¨éæ³•ç´¢å¼•è®¿é—®æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚å¦‚æœç´¢å¼•ä¸ºè´Ÿæˆ–å¤§äºç­‰äºæ•°ç»„å¤§å°ï¼Œåˆ™è¯¥ç´¢å¼•ä¸ºéæ³•ç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>&#125;;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= arr.length; i++) &#123;<br>    System.out.println(arr[i]);<br>&#125;<br><span class="hljs-comment">//å½“ i = arr.length æ—¶ï¼Œæ•°ç»„è¶Šç•Œ</span><br></code></pre></td></tr></table></figure><p>ClassCastException ç±»å‹è½¬æ¢å¼‚å¸¸</p><p>å½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassCastException_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">//å‘ä¸Šè½¬å‹</span><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b2</span> <span class="hljs-operator">=</span> (B)b; <span class="hljs-comment">//å‘ä¸‹è½¬å‹ï¼Œè¿™é‡Œæ˜¯OK</span><br>        <span class="hljs-type">C</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> (C)b; <span class="hljs-comment">//è¿™é‡ŒæŠ›å‡ºClassCastException</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>NumberFormatException æ•°å­—æ ¼å¼ä¸æ­£ç¡®å¼‚å¸¸</p><p>å½“åº”ç”¨ç¨‹åºè¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ç§æ•°å€¼ç±»å‹ï¼Œä½†è¯¥å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¸ºé€‚å½“æ ¼å¼æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ </p><p>ï¼ˆä½¿ç”¨å¼‚å¸¸æˆ‘ä»¬å¯ä»¥ç¡®ä¿è¾“å…¥æ˜¯æ»¡è¶³æ¡ä»¶æ•°å­—ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberFormatException_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å­¦ä¹ Java&quot;</span>;<br>        <span class="hljs-comment">//å°† String è½¬æˆ int</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Integer.parseInt(name); <span class="hljs-comment">//æŠ›å‡º NumberFormatException</span><br>        System.out.println(num);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¼–è¯‘å¼‚å¸¸"><a href="#ç¼–è¯‘å¼‚å¸¸" class="headerlink" title="ç¼–è¯‘å¼‚å¸¸"></a>ç¼–è¯‘å¼‚å¸¸</h3><p>ç¼–è¯‘å¼‚å¸¸æ˜¯æŒ‡åœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±å¿…é¡»å¤„ç†çš„å¼‚å¸¸ï¼Œå¦åˆ™ä»£ç ä¸èƒ½é€šè¿‡ç¼–è¯‘</p><p><strong>å¸¸è§çš„ç¼–è¯‘å¼‚å¸¸</strong></p><ul><li>SQLException  &#x2F;&#x2F;æ“ä½œæ•°æ®åº“æ—¶ï¼ŒæŸ¥è¯¢è¡¨å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸</li><li>IOException  &#x2F;&#x2F;æ“ä½œæ–‡ä»¶æ—¶ï¼Œå‘ç”Ÿçš„å¼‚å¸¸</li><li>FileNotFoundException  &#x2F;&#x2F;å½“æ“ä½œä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼Œå‘ç”Ÿçš„å¼‚å¸¸</li><li>ClassNotFoundException  &#x2F;&#x2F;åŠ è½½ç±»ï¼Œè€Œè¯¥ç±»ä¸å­˜åœ¨æ—¶ï¼Œå‘ç”Ÿçš„å¼‚å¸¸</li><li>EOFException  &#x2F;&#x2F;æ“ä½œæ–‡ä»¶ï¼Œåˆ°æ–‡ä»¶æœ«å°¾ï¼Œå‘ç”Ÿçš„å¼‚å¸¸</li><li>IllegalArguementException  &#x2F;&#x2F;å‚æ•°å¼‚å¸¸</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Exception02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è¿™é‡Œå¦‚æœä¸å¤„ç†å¼‚å¸¸ï¼Œåˆ™ç¼–è¯‘ä¸èƒ½é€šè¿‡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            FileInputStream fis;<br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;d:\\aa.jpg&quot;</span>);<br>            <span class="hljs-type">int</span> len;<br>            <span class="hljs-keyword">while</span> ((len = fis.read()) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.println(len);<br>            &#125;<br>            fis.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><p>å¼‚å¸¸å¤„ç†å°±æ˜¯å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå¯¹å¼‚å¸¸å¤„ç†çš„æ–¹å¼</p><p><strong>å¼‚å¸¸å¤„ç†çš„æ–¹å¼ï¼š</strong></p><ul><li>try-catch-finally  ç¨‹åºå‘˜åœ¨ä»£ç ä¸­æ•è·å‘ç”Ÿçš„å¼‚å¸¸ï¼Œè‡ªè¡Œå¤„ç†</li><li>throws å°†å‘ç”Ÿçš„å¼‚å¸¸æŠ›å‡ºï¼Œäº¤ç»™è°ƒç”¨è€…ï¼ˆæ–¹æ³•ï¼‰æ¥å¤„ç†ï¼Œæœ€é¡¶çº§çš„å¤„ç†è€…å°±æ˜¯ JVM</li></ul><p><strong>ç¤ºæ„å›¾</strong></p> <img src="image-20220906153040367.png" alt="image-20220906153040367" style="zoom:50%;" /> <img src="image-20220906153102442.png" alt="image-20220906153102442" style="zoom:50%;" /><h4 id="try-catch-å¼‚å¸¸å¤„ç†"><a href="#try-catch-å¼‚å¸¸å¤„ç†" class="headerlink" title="try-catch å¼‚å¸¸å¤„ç†"></a>try-catch å¼‚å¸¸å¤„ç†</h4><p>Java æä¾› try å’Œ catch å—æ¥å¤„ç†å¼‚å¸¸ã€‚tryå— ç”¨äºåŒ…å«å¯èƒ½å‡ºé”™çš„ä»£ç ï¼Œcatchå— ç”¨æ¥å¤„ç† tryå— ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚</p><p>å¯ä»¥æ ¹æ®éœ€è¦åœ¨ç¨‹åºä¸­æœ‰å¤šä¸ª tryâ€¦catch å—</p><ul><li>å¦‚æœæ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œ tryå— ä¸­æ‰€æœ‰è¯­å¥ï¼Œä¸æ‰§è¡Œ catchå— ä¸­è¯­å¥ï¼Œå¦‚æœæœ‰ finallyï¼Œæœ€åè¿˜éœ€è¦æ‰§è¡Œ finallyé‡Œé¢çš„è¯­å¥</li><li>å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™ tryå— ä¸­å¼‚å¸¸å‘ç”Ÿåï¼Œtryå—å‰©ä¸‹çš„è¯­å¥ä¸å†æ‰§è¡Œã€‚å°†æ‰§è¡Œ catchå— ä¸­çš„è¯­å¥ï¼Œå¦‚æœæœ‰finallyï¼Œæœ€åè¿˜è¦æ‰§è¡Œ finally é‡Œé¢çš„è¯­å¥</li></ul><p>åŸºæœ¬è¯­æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">//å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç </span><br>    <span class="hljs-comment">//å°†å¼‚å¸¸ç”Ÿæˆçš„å¯¹åº”çš„å¼‚å¸¸å¯¹è±¡ï¼Œä¼ é€’ç»™catchå—</span><br>&#125; <span class="hljs-keyword">catch</span>(å¼‚å¸¸) &#123;<br>    <span class="hljs-comment">//å¯¹å¼‚å¸¸çš„å¤„ç†</span><br>&#125; <span class="hljs-keyword">finally</span> &#123;<br>    <span class="hljs-comment">//ä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½è¦æ‰§è¡Œçš„ä»£ç </span><br>&#125;<br><span class="hljs-comment">//å¦‚æœæ²¡æœ‰finallyï¼Œè¯­æ³•ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡çš„</span><br></code></pre></td></tr></table></figure><p><strong>try-catch æ³¨æ„äº‹é¡¹</strong></p><ul><li><p>å¦‚æœå¼‚å¸¸å‘ç”Ÿäº†ï¼Œåˆ™å¼‚å¸¸å‘ç”Ÿåé¢çš„ tryå— çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œç›´æ¥è¿›å…¥åˆ°catchå—</p></li><li><p>å¦‚æœå¼‚å¸¸æ²¡æœ‰å‘ç”Ÿï¼Œåˆ™é¡ºåºæ‰§è¡Œ try çš„ä»£ç å—ï¼Œä¸ä¼šè¿›å…¥åˆ° catch</p></li><li><p>å¦‚æœå¸Œæœ›ä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½æ‰§è¡ŒæŸæ®µä»£ç ï¼ˆæ¯”å¦‚å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºç­‰ï¼‰ï¼Œåˆ™éœ€ä½¿ç”¨ finally { }</p></li><li><p>å¯ä»¥æœ‰å¤šä¸ª catch è¯­å¥ï¼Œæ•è·ä¸åŒçš„å¼‚å¸¸ï¼ˆè¿›è¡Œä¸åŒçš„ä¸šåŠ¡å¤„ç†ï¼‰ï¼Œè¦æ±‚çˆ¶ç±»å¼‚å¸¸åœ¨åï¼Œå­ç±»å¼‚å¸¸åœ¨å‰</p><p>æ¯”å¦‚ï¼ˆException åœ¨åï¼ŒNullPointerException åœ¨å‰ï¼‰ï¼Œ<strong>å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåªä¼šåŒ¹é…ä¸€ä¸ª catch</strong></p></li><li><p>å¯ä»¥è¿›è¡Œ try-finally é…åˆä½¿ç”¨ï¼Œè¿™ç§ç”¨æ³•ç›¸å½“äºæ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå› æ­¤ç¨‹åºä¼šç›´æ¥å´©æ‰&#x2F;é€€å‡ºã€‚</p><p>åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½å¿…é¡»æ‰§è¡ŒæŸä¸ªä¸šåŠ¡é€»è¾‘</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ³¨æ„äº‹é¡¹4</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1.å¦‚æœtryä»£ç å—æœ‰å¯èƒ½æœ‰å¤šä¸ªå¼‚å¸¸</span><br>        <span class="hljs-comment">//2.å¯ä»¥ä½¿ç”¨å¤šä¸ªcatch åˆ†åˆ«æ•è·ä¸åŒçš„å¼‚å¸¸ï¼Œç›¸åº”å¤„ç†</span><br>        <span class="hljs-comment">//3.è¦æ±‚å­ç±»å¼‚å¸¸å†™åœ¨å‰é¢ï¼Œçˆ¶ç±»å¼‚å¸¸å†™åœ¨åé¢</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>            <span class="hljs-comment">//person = null;</span><br>            System.out.println(person.getName()); <span class="hljs-comment">//NullPointerException</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n1 / n2; <span class="hljs-comment">//ArithmeticException</span><br>        &#125; <span class="hljs-keyword">catch</span> (NullPointerException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ç©ºæŒ‡é’ˆå¼‚å¸¸=&quot;</span> + e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ç®—æœ¯å¼‚å¸¸=&quot;</span> + e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ³¨æ„äº‹é¡¹5</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchDetail03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        å¯ä»¥è¿›è¡Œ try-finally é…åˆä½¿ç”¨, è¿™ç§ç”¨æ³•ç›¸å½“äºæ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œ</span><br><span class="hljs-comment">        å› æ­¤ç¨‹åºä¼šç›´æ¥å´©æ‰/é€€å‡ºã€‚åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œ</span><br><span class="hljs-comment">        éƒ½å¿…é¡»æ‰§è¡ŒæŸä¸ªä¸šåŠ¡é€»è¾‘</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            System.out.println(n1 / n2);<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†finally..&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;ç¨‹åºç»§ç»­æ‰§è¡Œ..&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¯¾å ‚ç»ƒä¹ </strong></p> <img src="image-20220906194448537.png" alt="image-20220906194448537" style="zoom:50%;" /><p><strong>try-catch æœ€ä½³å®è·µä¹‹ä¸€</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchExercise04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å¦‚æœç”¨æˆ·è¾“å…¥çš„ä¸æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå°±æç¤ºä»–åå¤è¾“å…¥ï¼Œç›´åˆ°è¾“å…¥ä¸€ä¸ªæ•´æ•°ä¸ºæ­¢</span><br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. åˆ›å»ºScannerå¯¹è±¡</span><br>        <span class="hljs-comment">//2. ä½¿ç”¨æ— é™å¾ªç¯ï¼Œå»æ¥æ”¶ä¸€ä¸ªè¾“å…¥</span><br>        <span class="hljs-comment">//3. ç„¶åå°†è¯¥è¾“å…¥çš„å€¼ï¼Œè½¬æˆä¸€ä¸ªint</span><br>        <span class="hljs-comment">//4. å¦‚æœåœ¨è½¬æ¢æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè¯´æ˜è¾“å…¥çš„å†…å®¹ä¸æ˜¯ä¸€ä¸ªå¯ä»¥è½¬æˆintçš„å†…å®¹</span><br>        <span class="hljs-comment">//5. å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™break è¯¥å¾ªç¯</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">inputStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°:&quot;</span>); <span class="hljs-comment">//</span><br>            inputStr = scanner.next();<br>            <span class="hljs-keyword">try</span> &#123;<br>                num = Integer.parseInt(inputStr); <span class="hljs-comment">//è¿™é‡Œæ˜¯å¯èƒ½æŠ›å‡ºå¼‚å¸¸</span><br>                <span class="hljs-keyword">break</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (NumberFormatException e) &#123;<br>                System.out.println(<span class="hljs-string">&quot;ä½ è¾“å…¥çš„ä¸æ˜¯ä¸€ä¸ªæ•´æ•°:&quot;</span>);<br>            &#125;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;ä½ è¾“å…¥çš„å€¼æ˜¯=&quot;</span> + num);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="throws-å¼‚å¸¸å¤„ç†"><a href="#throws-å¼‚å¸¸å¤„ç†" class="headerlink" title="throws å¼‚å¸¸å¤„ç†"></a>throws å¼‚å¸¸å¤„ç†</h4><p>å¦‚æœä¸€ä¸ªæ–¹æ³•ï¼ˆæ–¹æ³•ä¸­çš„è¯­å¥æ‰§è¡Œæ—¶ï¼‰å¯èƒ½ç”ŸæˆæŸç§å¼‚å¸¸ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®å®šå¦‚ä½•å¤„ç†è¿™ç§å¼‚å¸¸ï¼Œåˆ™æ­¤æ–¹æ³•åº”æ˜¾å¼åœ°å£°æ˜æŠ›å‡ºå¼‚å¸¸ï¼Œè¡¨æ˜è¯¥æ–¹æ³•å°†ä¸å¯¹è¿™äº›å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œè€Œç”±æ–¹æ³•çš„è°ƒç”¨è€…è´Ÿè´£å¤„ç†</p><p>åœ¨æ–¹æ³•å£°æ˜ä¸­ç”¨ throws è¯­å¥å¯ä»¥å£°æ˜æŠ›å‡ºå¼‚å¸¸çš„åˆ—è¡¨ï¼Œthrows åé¢çš„å¼‚å¸¸ç±»å‹å¯ä»¥æ˜¯æ–¹æ³•ä¸­äº§ç”Ÿçš„å¼‚å¸¸ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å®ƒçš„çˆ¶ç±»</p><p>æ³¨æ„ï¼šå½“ throw è¯­å¥æ‰§è¡Œæ—¶ï¼Œå®ƒ<strong>åé¢çš„è¯­å¥å°†ä¸æ‰§è¡Œ</strong>ï¼Œæ­¤æ—¶ç¨‹åºè½¬å‘è°ƒç”¨è€…ç¨‹åºï¼Œå¯»æ‰¾ä¸ä¹‹ç›¸åŒ¹é…çš„ catch è¯­å¥ï¼Œæ‰§è¡Œç›¸åº”çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚</p><p><strong>throws æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</strong></p><ul><li><p>å¯¹äºç¼–è¯‘å¼‚å¸¸ï¼Œç¨‹åºä¸­å¿…é¡»å¤„ç†ï¼Œæ¯”å¦‚ try-catch æˆ–è€… throws</p></li><li><p>å¯¹äºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¨‹åºä¸­å¦‚æœæ²¡æœ‰å¤„ç†ï¼Œé»˜è®¤å°±æ˜¯ throws çš„æ–¹å¼å¤„ç†</p></li><li><p>å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œå¯¹æŠ›å‡ºå¼‚å¸¸çš„è§„å®šï¼šå­ç±»é‡å†™çš„æ–¹æ³•ï¼Œæ‰€æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹è¦ä¹ˆå’Œçˆ¶ç±»æŠ›å‡ºçš„å¼‚å¸¸ä¸€è‡´ï¼Œè¦ä¹ˆä¸ºçˆ¶ç±»æŠ›å‡ºçš„å¼‚å¸¸çš„ç±»å‹çš„å­ç±»å‹</p></li><li><p>åœ¨ throws è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰æ–¹æ³• try-catchï¼Œå°±ç›¸å½“äºå¤„ç†å¼‚å¸¸ï¼Œå°±å¯ä»¥ä¸å¿… throws</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThrowsDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        f2();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f2</span><span class="hljs-params">()</span> <span class="hljs-comment">/*throws ArithmeticException*/</span> &#123;<br>        <span class="hljs-comment">//1.å¯¹äºç¼–è¯‘å¼‚å¸¸ï¼Œç¨‹åºä¸­å¿…é¡»å¤„ç†ï¼Œæ¯”å¦‚ try-catch æˆ–è€… throws</span><br>        <span class="hljs-comment">//2.å¯¹äºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¨‹åºä¸­å¦‚æœæ²¡æœ‰å¤„ç†ï¼Œé»˜è®¤å°±æ˜¯throwsçš„æ–¹å¼å¤„ç†</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n1 / n2;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> FileNotFoundException &#123;<br>        <span class="hljs-comment">//è¿™é‡Œå¤§å®¶æ€è€ƒé—®é¢˜ è°ƒç”¨f3() æŠ¥é”™</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. å› ä¸º f3() æ–¹æ³•æŠ›å‡ºçš„æ˜¯ä¸€ä¸ªç¼–è¯‘å¼‚å¸¸</span><br>        <span class="hljs-comment">//2. å³è¿™æ—¶ï¼Œå°±è¦ f1() å¿…é¡»å¤„ç†è¿™ä¸ªç¼–è¯‘å¼‚å¸¸</span><br>        <span class="hljs-comment">//3. åœ¨ f1() ä¸­ï¼Œè¦ä¹ˆ try-catch-finally ï¼Œæˆ–è€…ç»§ç»­ throws è¿™ä¸ªç¼–è¯‘å¼‚å¸¸</span><br>        f3(); <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> FileNotFoundException &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;d://aa.txt&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f4</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//è§£è¯»:</span><br>        <span class="hljs-comment">//1. åœ¨ f4() ä¸­è°ƒç”¨æ–¹æ³• f5() æ˜¯ OK çš„</span><br>        <span class="hljs-comment">//2. åŸå› æ˜¯ f5() æŠ›å‡ºçš„æ˜¯è¿è¡Œå¼‚å¸¸</span><br>        <span class="hljs-comment">//3. è€Œjavaä¸­ï¼Œå¹¶ä¸è¦æ±‚ç¨‹åºå‘˜æ˜¾ç¤ºå¤„ç†ï¼Œå› ä¸ºæœ‰é»˜è®¤å¤„ç†æœºåˆ¶</span><br>        f5();<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f5</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ArithmeticException &#123; <br>    <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> &#123; <span class="hljs-comment">//çˆ¶ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> RuntimeException &#123;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123;<span class="hljs-comment">//å­ç±»</span><br>    <span class="hljs-comment">//3. å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œå¯¹æŠ›å‡ºå¼‚å¸¸çš„è§„å®š:å­ç±»é‡å†™çš„æ–¹æ³•ï¼Œ</span><br>    <span class="hljs-comment">//   æ‰€æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹è¦ä¹ˆå’Œçˆ¶ç±»æŠ›å‡ºçš„å¼‚å¸¸ä¸€è‡´ï¼Œè¦ä¹ˆä¸ºçˆ¶ç±»æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹çš„å­ç±»å‹</span><br>    <span class="hljs-comment">//4. åœ¨throws è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰æ–¹æ³• try-catch , å°±ç›¸å½“äºå¤„ç†å¼‚å¸¸ï¼Œå°±å¯ä»¥ä¸å¿…throws</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ArithmeticException &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰å¼‚å¸¸"><a href="#è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸"></a>è‡ªå®šä¹‰å¼‚å¸¸</h4><p>å½“ç¨‹åºä¸­å‡ºç°äº†æŸäº› â€ é”™è¯¯ â€œ ï¼Œä½†è¯¥é”™è¯¯ä¿¡æ¯å¹¶æ²¡æœ‰åœ¨ Throwable å­ç±»ä¸­æè¿°å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è‡ªå·±è®¾è®¡å¼‚å¸¸ç±»ï¼Œç”¨äºæè¿°è¯¥é”™è¯¯ä¿¡æ¯</p><p><strong>è‡ªå®šä¹‰å¼‚å¸¸çš„æ­¥éª¤</strong></p><ul><li>ï¼ˆ1ï¼‰å®šä¹‰ç±»ï¼šè‡ªå®šä¹‰å¼‚å¸¸ç±»åï¼Œç»§æ‰¿ Exception æˆ– RuntimeException </li><li>ï¼ˆ2ï¼‰å¦‚æœç»§æ‰¿ Exceptionï¼Œå±äºç¼–è¯‘å¼‚å¸¸</li><li>ï¼ˆ3ï¼‰å¦‚æœç»§æ‰¿ RuntimeExceptionï¼Œå±äºè¿è¡Œå¼‚å¸¸ï¼ˆä¸€èˆ¬æ¥è¯´ï¼Œç»§æ‰¿ RuntimeExceptionï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-comment">/*throws AgeException*/</span> &#123;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">180</span>;<br>        <span class="hljs-comment">//è¦æ±‚èŒƒå›´åœ¨ 18 â€“ 120 ä¹‹é—´ï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸</span><br>        <span class="hljs-keyword">if</span>(!(age &gt;= <span class="hljs-number">18</span> &amp;&amp; age &lt;= <span class="hljs-number">120</span>)) &#123;<br>            <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å™¨ï¼Œè®¾ç½®ä¿¡æ¯</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgeException</span>(<span class="hljs-string">&quot;å¹´é¾„éœ€è¦åœ¨ 18~120ä¹‹é—´&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;ä½ çš„å¹´é¾„èŒƒå›´æ­£ç¡®.&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸</span><br><span class="hljs-comment">//è§£è¯»ï¼š</span><br><span class="hljs-comment">//1. ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰å¼‚å¸¸æ˜¯ç»§æ‰¿ RuntimeException</span><br><span class="hljs-comment">//2. å³æŠŠè‡ªå®šä¹‰å¼‚å¸¸åšæˆ è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¥½å¤„æ˜¯ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é»˜è®¤çš„å¤„ç†æœºåˆ¶ï¼Œæ¯”è¾ƒæ–¹ä¾¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AgeException</span><span class="hljs-params">(String message)</span> &#123;<span class="hljs-comment">//æ„é€ å™¨</span><br>        <span class="hljs-built_in">super</span>(message);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>throw å’Œ throws çš„åŒºåˆ«</strong></p> <img src="image-20220906220808765.png" alt="image-20220906220808765" style="zoom:50%;" /><p><strong>æµ‹è¯•é¢˜</strong></p> <img src="image-20220906221636588.png" alt="image-20220906221636588" style="zoom:50%;" /><h3 id="å¼‚å¸¸ä¹ é¢˜"><a href="#å¼‚å¸¸ä¹ é¢˜" class="headerlink" title="å¼‚å¸¸ä¹ é¢˜"></a>å¼‚å¸¸ä¹ é¢˜</h3> <img src="image-20220906222649017.png" alt="image-20220906222649017" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        ç¼–å†™åº”ç”¨ç¨‹åºEcmDef.javaï¼Œæ¥æ”¶å‘½ä»¤è¡Œçš„ä¸¤ä¸ªå‚æ•°(æ•´æ•°)ï¼Œè®¡ç®—ä¸¤æ•°ç›¸é™¤ã€‚</span><br><span class="hljs-comment">        è®¡ç®—ä¸¤ä¸ªæ•°ç›¸é™¤ï¼Œè¦æ±‚ä½¿ç”¨æ–¹æ³• cal(int n1, int n2)</span><br><span class="hljs-comment">        å¯¹æ•°æ®æ ¼å¼ä¸æ­£ç¡®(NumberFormatException)ã€</span><br><span class="hljs-comment">        ç¼ºå°‘å‘½ä»¤è¡Œå‚æ•°(ArrayIndexOutOfBoundsException)ã€</span><br><span class="hljs-comment">        é™¤0 è¿›è¡Œå¼‚å¸¸å¤„ç†(ArithmeticException)ã€‚</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//å…ˆéªŒè¯è¾“å…¥çš„å‚æ•°çš„ä¸ªæ•°æ˜¯å¦æ­£ç¡® ä¸¤ä¸ªå‚æ•°</span><br>            <span class="hljs-keyword">if</span>(args.length != <span class="hljs-number">2</span>) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayIndexOutOfBoundsException</span>(<span class="hljs-string">&quot;å‚æ•°ä¸ªæ•°ä¸å¯¹&quot;</span>);<br>            &#125;<br>            <span class="hljs-comment">//å…ˆæŠŠæ¥æ”¶åˆ°çš„å‚æ•°ï¼Œè½¬æˆæ•´æ•°</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">1</span>]);<br><br>            <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> cal(n1, n2);<span class="hljs-comment">//è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºArithmeticException</span><br>            System.out.println(<span class="hljs-string">&quot;è®¡ç®—ç»“æœæ˜¯=&quot;</span> + res);<br>            <br>        &#125; <span class="hljs-keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;<br>            System.out.println(e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (NumberFormatException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;å‚æ•°æ ¼å¼ä¸æ­£ç¡®ï¼Œéœ€è¦è¾“å‡ºæ•´æ•°&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;å‡ºç°äº†é™¤0çš„å¼‚å¸¸&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//ç¼–å†™calæ–¹æ³•ï¼Œå°±æ˜¯ä¸¤ä¸ªæ•°çš„å•†</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n1, <span class="hljs-type">int</span> n2)</span> &#123; <span class="hljs-keyword">return</span> n1 / n2; &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¸¸ç”¨ç±»"><a href="#å¸¸ç”¨ç±»" class="headerlink" title="å¸¸ç”¨ç±»"></a>å¸¸ç”¨ç±»</h2><h3 id="åŒ…è£…ç±»"><a href="#åŒ…è£…ç±»" class="headerlink" title="åŒ…è£…ç±»"></a>åŒ…è£…ç±»</h3><p>é’ˆå¯¹å…«ç§åŸºæœ¬å®šä¹‰ç›¸åº”çš„å¼•ç”¨ç±»å‹ â€”â€” åŒ…è£…ç±»</p><p>æœ‰äº†ç±»çš„ç‰¹ç‚¹ï¼Œå°±å¯ä»¥è°ƒç”¨ç±»ä¸­çš„æ–¹æ³•</p> <img src="image-20220907141229236.png" alt="image-20220907141229236" style="zoom:50%;" /><h4 id="åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®çš„è½¬æ¢"><a href="#åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®çš„è½¬æ¢" class="headerlink" title="åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®çš„è½¬æ¢"></a>åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®çš„è½¬æ¢</h4><ul><li><p>jdk5 å‰çš„æ‰‹åŠ¨è£…ç®±å’Œæ‹†ç®±æ–¹å¼ï¼Œè£…ç®±ï¼šåŸºæœ¬ç±»å‹ -&gt; åŒ…è£…ç±»å‹ï¼Œåæ­£ï¼Œæ‹†ç®±</p></li><li><p>jdk5 åŠä»¥åçš„è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±æ–¹å¼</p></li><li><p>è‡ªåŠ¨è£…ç®±åº•å±‚è°ƒç”¨çš„æ˜¯ valueOf æ–¹æ³•ï¼Œæ¯”å¦‚ Integer.valueOf()</p><p>è‡ªåŠ¨æ‹†ç®±åº•å±‚è°ƒç”¨çš„æ˜¯ xxxValue æ–¹æ³•ï¼Œæ¯”å¦‚ intValue() æ–¹æ³•</p></li><li><p>å…¶å®ƒåŒ…è£…ç±»çš„ç”¨æ³•ç±»ä¼¼</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Integer01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ¼”ç¤º int &lt;--&gt; Integer çš„è£…ç®±å’Œæ‹†ç®±</span><br>        <span class="hljs-comment">//æ‰‹åŠ¨è£…ç®±</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">integer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(n1);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">integer1</span> <span class="hljs-operator">=</span> Integer.valueOf(n1);<br>        <span class="hljs-comment">//æ‰‹åŠ¨æ‹†ç®±</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> integer.intValue();<br>        <span class="hljs-comment">//è‡ªåŠ¨è£…ç®±</span><br>        <span class="hljs-type">int</span> n3=<span class="hljs-number">300</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">integer2</span> <span class="hljs-operator">=</span> n3;<br>        <span class="hljs-comment">//è‡ªåŠ¨æ‹†ç®±</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> integer2;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹ é¢˜</p> <img src="image-20220907143322876.png" alt="image-20220907143322876" style="zoom:50%;" /><h4 id="åŒ…è£…ç±»å‹å’Œ-String-ç±»å‹çš„ç›¸äº’è½¬æ¢"><a href="#åŒ…è£…ç±»å‹å’Œ-String-ç±»å‹çš„ç›¸äº’è½¬æ¢" class="headerlink" title="åŒ…è£…ç±»å‹å’Œ String ç±»å‹çš„ç›¸äº’è½¬æ¢"></a>åŒ…è£…ç±»å‹å’Œ String ç±»å‹çš„ç›¸äº’è½¬æ¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperVSString</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åŒ…è£…ç±»(Integer)-&gt;String</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<span class="hljs-comment">//è‡ªåŠ¨è£…ç®±</span><br>        <span class="hljs-comment">//æ–¹å¼1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> i + <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-comment">//æ–¹å¼2</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> i.toString();<br>        <span class="hljs-comment">//æ–¹å¼3</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str3</span> <span class="hljs-operator">=</span> String.valueOf(i);<br><br>        <span class="hljs-comment">//String -&gt; åŒ…è£…ç±»(Integer)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;12345&quot;</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> Integer.parseInt(str4);<span class="hljs-comment">//ä½¿ç”¨åˆ°è‡ªåŠ¨è£…ç®±</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(str4);<span class="hljs-comment">//æ„é€ å™¨</span><br><br>        System.out.println(<span class="hljs-string">&quot;ok~~&quot;</span>);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Integerç±»å’ŒCharacterç±»çš„å¸¸ç”¨æ–¹æ³•"><a href="#Integerç±»å’ŒCharacterç±»çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Integerç±»å’ŒCharacterç±»çš„å¸¸ç”¨æ–¹æ³•"></a>Integerç±»å’ŒCharacterç±»çš„å¸¸ç”¨æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Integer.MIN_VALUE); <span class="hljs-comment">//è¿”å›æœ€å°å€¼</span><br>        System.out.println(Integer.MAX_VALUE);<span class="hljs-comment">//è¿”å›æœ€å¤§å€¼</span><br><br>        System.out.println(Character.isDigit(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­—</span><br>        System.out.println(Character.isLetter(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯å­—æ¯</span><br>        System.out.println(Character.isUpperCase(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯å¤§å†™</span><br>        System.out.println(Character.isLowerCase(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯å°å†™</span><br><br>        System.out.println(Character.isWhitespace(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºæ ¼</span><br>        System.out.println(Character.toUpperCase(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//è½¬æˆå¤§å†™</span><br>        System.out.println(Character.toLowerCase(<span class="hljs-string">&#x27;A&#x27;</span>));<span class="hljs-comment">//è½¬æˆå°å†™</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Integer-ç±»é¢è¯•é¢˜-1"><a href="#Integer-ç±»é¢è¯•é¢˜-1" class="headerlink" title="Integer ç±»é¢è¯•é¢˜ 1"></a>Integer ç±»é¢è¯•é¢˜ 1</h4><ol><li>å¦‚æœ i åœ¨ IntegerCache.low(-128)~IntegerCache.high(127)ï¼Œå°±ç›´æ¥ä»æ•°ç»„è¿”å›</li><li>å¦‚æœä¸åœ¨ -128~127ï¼Œå°±ç›´æ¥ new Integer(i)</li><li>åªè¦æœ‰åŸºæœ¬æ•°æ®ç±»å‹ åˆ¤æ–­çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1</span>);<br>        System.out.println(i == j); <span class="hljs-comment">//False</span><br>        <span class="hljs-comment">//æ‰€ä»¥ï¼Œè¿™é‡Œä¸»è¦æ˜¯çœ‹èŒƒå›´ -128 ~ 127 å°±æ˜¯ç›´æ¥è¿”å›</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //è§£è¯»</span><br><span class="hljs-comment">        //1. å¦‚æœi åœ¨ IntegerCache.low(-128)~IntegerCache.high(127)ï¼Œå°±ç›´æ¥ä»æ•°ç»„è¿”å›</span><br><span class="hljs-comment">        //2. å¦‚æœä¸åœ¨ -128~127,å°±ç›´æ¥ new Integer(i)</span><br><span class="hljs-comment">             public static Integer valueOf(int i) &#123;</span><br><span class="hljs-comment">                if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="hljs-comment">                    return IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="hljs-comment">                return new Integer(i);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//åº•å±‚ Integer.valueOf(1); -&gt; é˜…è¯»æºç </span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//åº•å±‚ Integer.valueOf(1);</span><br>        System.out.println(m == n); <span class="hljs-comment">//True</span><br>        <span class="hljs-comment">//æ‰€ä»¥ï¼Œè¿™é‡Œä¸»è¦æ˜¯çœ‹èŒƒå›´ -128 ~ 127 å°±æ˜¯ç›´æ¥è¿”å›</span><br>        <span class="hljs-comment">//å¦åˆ™ï¼Œå°±new Integer(xx);</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>; <span class="hljs-comment">//åº•å±‚Integer.valueOf(1);</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>; <span class="hljs-comment">//åº•å±‚Integer.valueOf(1);</span><br>        System.out.println(x == y); <span class="hljs-comment">//False</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperExercise03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ç¤ºä¾‹ä¸€</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>        System.out.println(i1 == i2); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//ç¤ºä¾‹äºŒ</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">128</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">128</span>);<br>        System.out.println(i3 == i4); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//ç¤ºä¾‹ä¸‰</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i5</span> <span class="hljs-operator">=</span> <span class="hljs-number">127</span>;<span class="hljs-comment">//åº•å±‚Integer.valueOf(127)</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i6</span> <span class="hljs-operator">=</span> <span class="hljs-number">127</span>;<span class="hljs-comment">//-128~127</span><br>        System.out.println(i5 == i6); <span class="hljs-comment">//T</span><br>        <span class="hljs-comment">//ç¤ºä¾‹å››</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i7</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i8</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>;<br>        System.out.println(i7 == i8); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//ç¤ºä¾‹äº”</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i9</span> <span class="hljs-operator">=</span> <span class="hljs-number">127</span>; <span class="hljs-comment">//Integer.valueOf(127)</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>        System.out.println(i9 == i10); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//ç¤ºä¾‹å…­</span><br>        <span class="hljs-comment">//åªè¦æœ‰åŸºæœ¬æ•°æ®ç±»å‹ åˆ¤æ–­çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ</span><br>        Integer i11=<span class="hljs-number">127</span>;<br>        <span class="hljs-type">int</span> i12=<span class="hljs-number">127</span>;<br>        System.out.println(i11==i12); <span class="hljs-comment">//T</span><br>        <span class="hljs-comment">//ç¤ºä¾‹ä¸ƒ</span><br>        Integer i13=<span class="hljs-number">128</span>;<br>        <span class="hljs-type">int</span> i14=<span class="hljs-number">128</span>;<br>        System.out.println(i13==i14); <span class="hljs-comment">//T</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="String-ç±»"><a href="#String-ç±»" class="headerlink" title="String ç±»"></a>String ç±»</h3><ul><li><p>String å¯¹è±¡ç”¨äºä¿å­˜å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„å­—ç¬¦åºåˆ—</p></li><li><p>å­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡æ˜¯ç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦åºåˆ—ã€‚ä¾‹å¦‚ï¼šâ€ä½ å¥½â€ã€â€12.97â€ã€â€beyâ€ ç­‰</p></li><li><p>å­—ç¬¦ä¸²çš„å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦ç¼–ç ï¼Œä¸€ä¸ªå­—ç¬¦ï¼ˆä¸ç®¡æ˜¯å­—æ¯è¿˜æ˜¯æ±‰å­—ï¼‰å ä¸¤ä¸ªå­—èŠ‚</p></li><li><p>String ç±»è¾ƒå¸¸ç”¨æ„é€ æ–¹æ³•ï¼ˆå…¶å®ƒçœ‹æ‰‹å†Œï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>();<br><span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(String original);<br><span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-type">char</span>[] a);<br><span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-type">char</span>[] a, <span class="hljs-type">int</span> startIndex, <span class="hljs-type">int</span> count);<br><span class="hljs-type">String</span> <span class="hljs-variable">s5</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-type">byte</span>[] b);<br></code></pre></td></tr></table></figure></li><li><p>è¯´æ˜ï¼š</p> <img src="image-20220907151045071.png" alt="image-20220907151045071" style="zoom:50%;" /></li><li><p>String ç±»å®ç°äº† æ¥å£ Serializable [String å¯ä»¥ä¸²è¡ŒåŒ–:å¯ä»¥åœ¨ç½‘ç»œä¼ è¾“]</p></li><li><p>String ç±»å®ç°äº† æ¥å£ Comparable [String å¯¹è±¡å¯ä»¥æ¯”è¾ƒå¤§å°]</p></li><li><p>String æœ‰å±æ€§ private final char value[];   ç”¨äºå­˜æ”¾å­—ç¬¦ä¸²å†…å®¹</p></li><li><p>ä¸€å®šè¦æ³¨æ„ï¼švalue æ˜¯ä¸€ä¸ª final ç±»å‹ï¼Œä¸å¯ä»¥ä¿®æ”¹(éœ€è¦åŠŸåŠ›)ï¼š</p><p>å³ value ä¸èƒ½æŒ‡å‘æ–°çš„åœ°å€ï¼Œä½†æ˜¯å•ä¸ªå­—ç¬¦å†…å®¹æ˜¯å¯ä»¥å˜åŒ–</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">String01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.String å¯¹è±¡ç”¨äºä¿å­˜å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„å­—ç¬¦åºåˆ—</span><br>        <span class="hljs-comment">//2. &quot;jack&quot; å­—ç¬¦ä¸²å¸¸é‡, åŒå¼•å·æ‹¬èµ·çš„å­—ç¬¦åºåˆ—</span><br>        <span class="hljs-comment">//3. å­—ç¬¦ä¸²çš„å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦ç¼–ç ï¼Œä¸€ä¸ªå­—ç¬¦(ä¸åŒºåˆ†å­—æ¯è¿˜æ˜¯æ±‰å­—)å ä¸¤ä¸ªå­—èŠ‚</span><br>        <span class="hljs-comment">//4. String ç±»æœ‰å¾ˆå¤šæ„é€ å™¨ï¼Œæ„é€ å™¨çš„é‡è½½</span><br>        <span class="hljs-comment">//   å¸¸ç”¨çš„æœ‰ String  s1 = new String(); //</span><br>        <span class="hljs-comment">//String  s2 = new String(String original);</span><br>        <span class="hljs-comment">//String  s3 = new String(char[] a);</span><br>        <span class="hljs-comment">//String  s4 =  new String(char[] a,int startIndex,int count)</span><br>        <span class="hljs-comment">//String s5 = new String(byte[] b)</span><br>        <span class="hljs-comment">//5. String ç±»å®ç°äº† æ¥å£ Serializable [String å¯ä»¥ä¸²è¡ŒåŒ–:å¯ä»¥åœ¨ç½‘ç»œä¼ è¾“]</span><br>        <span class="hljs-comment">//                 æ¥å£ Comparable [String å¯¹è±¡å¯ä»¥æ¯”è¾ƒå¤§å°]</span><br>        <span class="hljs-comment">//6. String æ˜¯ final ç±»ï¼Œä¸èƒ½è¢«å…¶ä»–çš„ç±»ç»§æ‰¿</span><br>        <span class="hljs-comment">//7. String æœ‰å±æ€§ private final char value[]; ç”¨äºå­˜æ”¾å­—ç¬¦ä¸²å†…å®¹</span><br>        <span class="hljs-comment">//8. ä¸€å®šè¦æ³¨æ„ï¼švalue æ˜¯ä¸€ä¸ªfinalç±»å‹ï¼Œä¸å¯ä»¥ä¿®æ”¹(éœ€è¦åŠŸåŠ›)ï¼šå³valueä¸èƒ½æŒ‡å‘</span><br>        <span class="hljs-comment">//   æ–°çš„åœ°å€ï¼Œä½†æ˜¯å•ä¸ªå­—ç¬¦å†…å®¹æ˜¯å¯ä»¥å˜åŒ–</span><br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br>        name = <span class="hljs-string">&quot;tom&quot;</span>;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] value = &#123;<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>&#125;;<br>        <span class="hljs-type">char</span>[] v2 = &#123;<span class="hljs-string">&#x27;t&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>,<span class="hljs-string">&#x27;m&#x27;</span>&#125;;<br>        value[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;H&#x27;</span>;<br>        <span class="hljs-comment">//value = v2; //ä¸å¯ä»¥ä¿®æ”¹ valueåœ°å€</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="String-åˆ›å»ºå‰–æ"><a href="#String-åˆ›å»ºå‰–æ" class="headerlink" title="String åˆ›å»ºå‰–æ"></a>String åˆ›å»ºå‰–æ</h4><ul><li><p>æ–¹å¼ä¸€ï¼šç›´æ¥èµ‹å€¼  String s1 &#x3D; â€œhspâ€;</p><p>å…ˆä»å¸¸é‡æ± æŸ¥çœ‹æ˜¯å¦æœ‰ â€œhspâ€ æ•°æ®ç©ºé—´ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥æŒ‡å‘ï¼›å¦‚æœæ²¡æœ‰åˆ™å…ˆåˆ›å»ºå¦‚ä½•æŒ‡å‘</p><p>s1 æœ€ç»ˆæŒ‡å‘çš„æ˜¯å¸¸é‡æ± çš„ç©ºé—´åœ°å€</p></li><li><p>æ–¹å¼äºŒï¼šè°ƒç”¨æ„é€ å™¨  String s2 &#x3D; new String(â€œhspâ€)</p><p>å…ˆåœ¨å †ä¸­åˆ›å»ºç©ºé—´ï¼Œé‡Œé¢ç»´æŠ¤äº† value å±æ€§ï¼ŒæŒ‡å‘å¸¸é‡æ± çš„ hsp ç©ºé—´</p><p>å¦‚æœå¸¸é‡æ± ä¸­æœ‰ â€œhspâ€ åˆ™ç›´æ¥é€šè¿‡valueæŒ‡å‘ï¼Œå¦‚æœæ²¡æœ‰åˆ™å…ˆåˆ›å»ºå†æŒ‡å‘</p><p>s2 æœ€ç»ˆæŒ‡å‘çš„æ˜¯å †ä¸­çš„ç©ºé—´åœ°å€</p></li><li><p>å› æ­¤ s1 !&#x3D; s2</p></li><li><p>ä¸¤ç§æ–¹å¼çš„å†…å­˜åˆ†å¸ƒå›¾ï¼š</p> <img src="image-20220907194812227.png" alt="image-20220907194812227" style="zoom: 80%;" /></li></ul><h4 id="æµ‹è¯•é¢˜"><a href="#æµ‹è¯•é¢˜" class="headerlink" title="æµ‹è¯•é¢˜"></a>æµ‹è¯•é¢˜</h4> <img src="image-20220907212648493.png" alt="image-20220907212648493" style="zoom:50%;" /><h4 id="å­—ç¬¦ä¸²çš„ç‰¹æ€§"><a href="#å­—ç¬¦ä¸²çš„ç‰¹æ€§" class="headerlink" title="å­—ç¬¦ä¸²çš„ç‰¹æ€§"></a>å­—ç¬¦ä¸²çš„ç‰¹æ€§</h4><ul><li>String æ˜¯ä¸€ä¸ª final ç±»ï¼Œä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—</li><li>å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ä¸€æ—¦è¢«åˆ†é…ï¼Œå…¶å†…å®¹æ˜¯ä¸å¯å˜çš„</li></ul><h4 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h4> <img src="image-20220907225007862.png" alt="image-20220907225007862" style="zoom:50%;" /> <img src="image-20220907225026693.png" alt="image-20220907225026693" style="zoom: 50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">// é¢˜2</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringExercise08</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>; <span class="hljs-comment">//åˆ›å»º aå¯¹è±¡</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc&quot;</span>;<span class="hljs-comment">//åˆ›å»º bå¯¹è±¡</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. å…ˆåˆ›å»ºä¸€ä¸ª StringBuilder sb = StringBuilder()</span><br>        <span class="hljs-comment">//2. æ‰§è¡Œ sb.append(&quot;hello&quot;);</span><br>        <span class="hljs-comment">//3. sb.append(&quot;abc&quot;);</span><br>        <span class="hljs-comment">//4. String c = sb.toString()  // toString() çš„åº•å±‚æ˜¯ new</span><br>        <span class="hljs-comment">//æœ€åå…¶å®æ˜¯ c æŒ‡å‘å †ä¸­çš„å¯¹è±¡(String) value[] -&gt; æ± ä¸­ &quot;helloabc&quot;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> a + b;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;helloabc&quot;</span>;<br>        System.out.println(c == d);<span class="hljs-comment">//çœŸè¿˜æ˜¯å‡? æ˜¯false</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span> + <span class="hljs-string">&quot;abc&quot;</span>;<span class="hljs-comment">//ç›´æ¥çœ‹æ± ï¼Œ eæŒ‡å‘å¸¸é‡æ± </span><br>        System.out.println(d == e);<span class="hljs-comment">//çœŸè¿˜æ˜¯å‡? æ˜¯true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> <img src="image-20220907230439422.png" alt="image-20220907230439422" style="zoom: 56%;" /><p><strong>ï¼ï¼ï¼</strong></p> <img src="image-20220907231315310.png" alt="image-20220907231315310" style="zoom: 80%;" /><h4 id="String-ç±»çš„å¸¸è§æ–¹æ³•"><a href="#String-ç±»çš„å¸¸è§æ–¹æ³•" class="headerlink" title="String ç±»çš„å¸¸è§æ–¹æ³•"></a>String ç±»çš„å¸¸è§æ–¹æ³•</h4><p>String ç±»æ˜¯ä¿å­˜å­—ç¬¦ä¸²å¸¸é‡çš„ã€‚æ¯æ¬¡æ›´æ–°éƒ½éœ€è¦é‡æ–°å¼€è¾Ÿç©ºé—´ï¼Œæ•ˆç‡è¾ƒä½ï¼Œå› æ­¤ java è®¾è®¡è€…è¿˜æä¾›äº† StringBuilder å’Œ StringBuffer æ¥å¢å¼º String çš„åŠŸèƒ½ï¼Œå¹¶æé«˜æ•ˆç‡ã€‚</p><ul><li><p>equals  &#x2F;&#x2F;åŒºåˆ†å¤§å°å†™ï¼Œåˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰</p></li><li><p>equalslgnoreCase  &#x2F;&#x2F;å¿½ç•¥å¤§å°å†™çš„åˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰</p></li><li><p>length  &#x2F;&#x2F;è·å–å­—ç¬¦çš„ä¸ªæ•°ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦</p></li><li><p>indexOf  &#x2F;&#x2F;è·å–å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬1æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œç´¢å¼•ä»0å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™è¿”å›-1</p></li><li><p>lastIndexOf  &#x2F;&#x2F;è·å–å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­æœ€å1æ­¤å‡ºç°çš„ç´¢å¼•ï¼Œç´¢å¼•ä»0å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™è¿”å›-1</p></li><li><p>substring  &#x2F;&#x2F;æˆªå–æŒ‡å®šèŒƒå›´çš„å­—ä¸²</p></li><li><p>trim  &#x2F;&#x2F;å»å‰åç©ºæ ¼</p></li><li><p>charAt  &#x2F;&#x2F;è·å–æŸç´¢å¼•å¤„çš„å­—ç¬¦ï¼Œæ³¨æ„ä¸èƒ½ä½¿ç”¨ Str[index] è¿™ç§æ–¹æ³•</p></li><li><p>toUpperCase  &#x2F;&#x2F;è½¬æˆå¤§å†™</p></li><li><p>toLowerCase  &#x2F;&#x2F;è½¬æˆå°å†™</p></li><li><p>concat  &#x2F;&#x2F;æ‹¼æ¥å­—ç¬¦ä¸²</p></li><li><p>replace  &#x2F;&#x2F;æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦</p></li><li><p>split  &#x2F;&#x2F;åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¯¹äºæŸäº›åˆ†å‰²å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦è½¬ä¹‰ æ¯”å¦‚ | \\  ç­‰</p></li><li><p>compareTo  &#x2F;&#x2F;æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°</p></li><li><p>toCharArray  &#x2F;&#x2F;è½¬æ¢æˆå­—ç¬¦æ•°ç»„</p></li><li><p>format  &#x2F;&#x2F;æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œ%s å­—ç¬¦ä¸²ã€%c å­—ç¬¦ã€%d æ•´å‹ã€%.2f æµ®ç‚¹å‹</p><p>æ¡ˆä¾‹ï¼šå°†ä¸€ä¸ªäººçš„ä¿¡æ¯æ ¼å¼åŒ–è¾“å‡º</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringMethod01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1. equals å‰é¢å·²ç»è®²è¿‡äº†. æ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸åŒï¼ŒåŒºåˆ†å¤§å°å†™</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello&quot;</span>;<br>        System.out.println(str1.equals(str2)); <span class="hljs-comment">//false</span><br>        <span class="hljs-comment">// 2.equalsIgnoreCase å¿½ç•¥å¤§å°å†™çš„åˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;johN&quot;</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;john&quot;</span>.equalsIgnoreCase(username)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;Success!&quot;</span>);  <span class="hljs-comment">//Success!</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;Failure!&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// 3.length è·å–å­—ç¬¦çš„ä¸ªæ•°ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦</span><br>        System.out.println(<span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>.length());  <span class="hljs-comment">//3</span><br>        <span class="hljs-comment">// 4.indexOf è·å–å­—ç¬¦/å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²å¯¹è±¡ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œç´¢å¼•ä»0å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›-1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;wer@terwe@g&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> s1.indexOf(<span class="hljs-string">&#x27;@&#x27;</span>);<br>        System.out.println(index);  <span class="hljs-comment">//3</span><br>        System.out.println(<span class="hljs-string">&quot;weIndex=&quot;</span> + s1.indexOf(<span class="hljs-string">&quot;we&quot;</span>));  <span class="hljs-comment">//0</span><br>        <span class="hljs-comment">// 5.lastIndexOf è·å–å­—ç¬¦/å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œç´¢å¼•ä»0å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›-1</span><br>        s1 = <span class="hljs-string">&quot;wer@terwe@g@&quot;</span>;<br>        index = s1.lastIndexOf(<span class="hljs-string">&#x27;@&#x27;</span>);<br>        System.out.println(index);  <span class="hljs-comment">//11</span><br>        System.out.println(<span class="hljs-string">&quot;terçš„ä½ç½®=&quot;</span> + s1.lastIndexOf(<span class="hljs-string">&quot;ter&quot;</span>));  <span class="hljs-comment">//4</span><br>        <span class="hljs-comment">// 6.substring æˆªå–æŒ‡å®šèŒƒå›´çš„å­ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello,å¼ ä¸‰&quot;</span>;<br>        <span class="hljs-comment">//ä¸‹é¢name.substring(6) ä»ç´¢å¼•6å¼€å§‹æˆªå–åé¢æ‰€æœ‰çš„å†…å®¹</span><br>        System.out.println(name.substring(<span class="hljs-number">6</span>));  <span class="hljs-comment">//å¼ ä¸‰</span><br>        <span class="hljs-comment">//name.substring(0,5)è¡¨ç¤ºä»ç´¢å¼•0å¼€å§‹æˆªå–ï¼Œæˆªå–åˆ°ç´¢å¼• 5-1=4ä½ç½®</span><br>        System.out.println(name.substring(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>));  <span class="hljs-comment">//llo</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringMethod02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1.toUpperCaseè½¬æ¢æˆå¤§å†™</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;heLLo&quot;</span>;<br>        System.out.println(s.toUpperCase()); <span class="hljs-comment">//HELLO</span><br>        <span class="hljs-comment">// 2.toLowerCase</span><br>        System.out.println(s.toLowerCase()); <span class="hljs-comment">//hello</span><br>        <span class="hljs-comment">// 3.concatæ‹¼æ¥å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å®ç‰&quot;</span>;<br>        s1 = s1.concat(<span class="hljs-string">&quot;æ—é»›ç‰&quot;</span>).concat(<span class="hljs-string">&quot;è–›å®é’—&quot;</span>).concat(<span class="hljs-string">&quot;together&quot;</span>);<br>        System.out.println(s1); <span class="hljs-comment">//å®ç‰æ—é»›ç‰è–›å®é’—together</span><br>        <span class="hljs-comment">// 4.replace æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦</span><br>        s1 = <span class="hljs-string">&quot;å®ç‰ and æ—é»›ç‰ æ—é»›ç‰ æ—é»›ç‰&quot;</span>;<br>        <span class="hljs-comment">//åœ¨s1ä¸­ï¼Œå°† æ‰€æœ‰çš„ æ—é»›ç‰ æ›¿æ¢æˆè–›å®é’—</span><br>        <span class="hljs-comment">// è€éŸ©è§£è¯»: s1.replace() æ–¹æ³•æ‰§è¡Œåï¼Œè¿”å›çš„ç»“æœæ‰æ˜¯æ›¿æ¢è¿‡çš„.</span><br>        <span class="hljs-comment">// æ³¨æ„ å¯¹s1æ²¡æœ‰ä»»ä½•å½±å“</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s11</span> <span class="hljs-operator">=</span> s1.replace(<span class="hljs-string">&quot;å®ç‰&quot;</span>, <span class="hljs-string">&quot;jack&quot;</span>);<br>        System.out.println(s1);<span class="hljs-comment">//å®ç‰ and æ—é»›ç‰ æ—é»›ç‰ æ—é»›ç‰</span><br>        System.out.println(s11);<span class="hljs-comment">//jack and æ—é»›ç‰ æ—é»›ç‰ æ—é»›ç‰</span><br>        <span class="hljs-comment">// 5.split åˆ†å‰²å­—ç¬¦ä¸², å¯¹äºæŸäº›åˆ†å‰²å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦ è½¬ä¹‰æ¯”å¦‚ | \\ç­‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">poem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;é”„ç¦¾æ—¥å½“åˆ,æ±—æ»´ç¦¾ä¸‹åœŸ,è°çŸ¥ç›˜ä¸­é¤,ç²’ç²’çš†è¾›è‹¦&quot;</span>;<br>        <span class="hljs-comment">//è€éŸ©è§£è¯»ï¼š</span><br>        <span class="hljs-comment">// 1. ä»¥ , ä¸ºæ ‡å‡†å¯¹ poem è¿›è¡Œåˆ†å‰² , è¿”å›ä¸€ä¸ªæ•°ç»„</span><br>        <span class="hljs-comment">// 2. åœ¨å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²æ—¶ï¼Œå¦‚æœæœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦åŠ å…¥ è½¬ä¹‰ç¬¦ \</span><br>        String[] split = poem.split(<span class="hljs-string">&quot;,&quot;</span>);<br>        poem = <span class="hljs-string">&quot;E:\\aaa\\bbb&quot;</span>;<br>        split = poem.split(<span class="hljs-string">&quot;\\\\&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;==åˆ†å‰²åå†…å®¹===&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; split.length; i++) &#123;<br>            System.out.println(split[i]);<br>        &#125;<br>        <span class="hljs-comment">// 6.toCharArray è½¬æ¢æˆå­—ç¬¦æ•°ç»„</span><br>        s = <span class="hljs-string">&quot;happy&quot;</span>;<br>        <span class="hljs-type">char</span>[] chs = s.toCharArray();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; chs.length; i++) &#123;<br>            System.out.println(chs[i]);<br>        &#125;<br>        <span class="hljs-comment">// 7.compareTo æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ï¼Œå¦‚æœå‰è€…å¤§ï¼Œ</span><br>        <span class="hljs-comment">// åˆ™è¿”å›æ­£æ•°ï¼Œåè€…å¤§ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼Œå¦‚æœç›¸ç­‰ï¼Œè¿”å›0</span><br>        <span class="hljs-comment">// è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">// (1) å¦‚æœé•¿åº¦ç›¸åŒï¼Œå¹¶ä¸”æ¯ä¸ªå­—ç¬¦ä¹Ÿç›¸åŒï¼Œå°±è¿”å› 0</span><br>        <span class="hljs-comment">// (2) å¦‚æœåœ¨è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¯ä»¥åŒºåˆ†å¤§å°</span><br>        <span class="hljs-comment">//     å°±è¿”å› if (c1 != c2) &#123;</span><br>        <span class="hljs-comment">//                return c1 - c2;</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">// (3) å¦‚æœå‰é¢çš„éƒ¨åˆ†éƒ½ç›¸åŒï¼Œå°±è¿”å› str1.len - str2.len</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jcck&quot;</span>;<span class="hljs-comment">// len = 4</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<span class="hljs-comment">// len = 4</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jac&quot;</span>;<span class="hljs-comment">// len = 3</span><br>        System.out.println(a.compareTo(b)); <span class="hljs-comment">// è¿”å›å€¼æ˜¯ &#x27;c&#x27; - &#x27;a&#x27; = 2çš„å€¼</span><br>        System.out.println(a.compareTo(c)); <span class="hljs-comment">//a.length() - c.length() = 1</span><br>        <span class="hljs-comment">// 8.format æ ¼å¼å­—ç¬¦ä¸²</span><br>        <span class="hljs-comment">/* å ä½ç¬¦æœ‰:</span><br><span class="hljs-comment">         * %s å­—ç¬¦ä¸² %c å­—ç¬¦ %d æ•´å‹ %.2f æµ®ç‚¹å‹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;john&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>        <span class="hljs-type">double</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> <span class="hljs-number">56.857</span>;<br>        <span class="hljs-type">char</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç”·&#x27;</span>;<br>        <span class="hljs-comment">//å°†æ‰€æœ‰çš„ä¿¡æ¯éƒ½æ‹¼æ¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸².</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span><br>                <span class="hljs-string">&quot;æˆ‘çš„å§“åæ˜¯&quot;</span> + name + <span class="hljs-string">&quot;å¹´é¾„æ˜¯&quot;</span> + age + <span class="hljs-string">&quot;,æˆç»©æ˜¯&quot;</span> + score + <span class="hljs-string">&quot;æ€§åˆ«æ˜¯&quot;</span> + gender + <span class="hljs-string">&quot;ã€‚å¸Œæœ›å¤§å®¶å–œæ¬¢æˆ‘ï¼&quot;</span>;<br>        System.out.println(info);<br>        <span class="hljs-comment">//formatè§£è¯»</span><br>        <span class="hljs-comment">//1. %s , %d , %.2f %c ç§°ä¸ºå ä½ç¬¦</span><br>        <span class="hljs-comment">//2. è¿™äº›å ä½ç¬¦ç”±åé¢å˜é‡æ¥æ›¿æ¢</span><br>        <span class="hljs-comment">//3. %s è¡¨ç¤ºåé¢ç”± å­—ç¬¦ä¸²æ¥æ›¿æ¢</span><br>        <span class="hljs-comment">//4. %d æ˜¯æ•´æ•°æ¥æ›¿æ¢</span><br>        <span class="hljs-comment">//5. %.2f è¡¨ç¤ºä½¿ç”¨å°æ•°æ¥æ›¿æ¢ï¼Œæ›¿æ¢åï¼Œåªä¼šä¿ç•™å°æ•°ç‚¹ä¸¤ä½, å¹¶ä¸”è¿›è¡Œå››èˆäº”å…¥çš„å¤„ç†</span><br>        <span class="hljs-comment">//6. %c ä½¿ç”¨char ç±»å‹æ¥æ›¿æ¢</span><br>        <span class="hljs-comment">//String info0 = String.format(&quot;æˆ‘çš„å§“åæ˜¯%s å¹´é¾„æ˜¯%dï¼Œæˆç»©æ˜¯%.2f æ€§åˆ«æ˜¯%c.å¸Œæœ›å¤§å®¶å–œæ¬¢æˆ‘ï¼&quot;, name, age, score, gender);</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">formatStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æˆ‘çš„å§“åæ˜¯%s å¹´é¾„æ˜¯%dï¼Œæˆç»©æ˜¯%.2f æ€§åˆ«æ˜¯%c.å¸Œæœ›å¤§å®¶å–œæ¬¢æˆ‘ï¼&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">info2</span> <span class="hljs-operator">=</span> String.format(formatStr, name, age, score, gender);<br>        System.out.println(<span class="hljs-string">&quot;info2=&quot;</span> + info2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="StringBuffer-ç±»"><a href="#StringBuffer-ç±»" class="headerlink" title="StringBuffer ç±»"></a>StringBuffer ç±»</h3><p>java.lang.StringBuffer ä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œå¯ä»¥å¯¹å­—ç¬¦ä¸²å†…å®¹è¿›è¡Œå¢åˆ </p><p>StringBuffer å¾ˆå¤šæ–¹æ³•ä¸ String ç›¸åŒï¼Œä½† StringBuffer æ˜¯å¯å˜é•¿åº¦çš„</p><p>StringBuffer æ˜¯ä¸€ä¸ªå®¹å™¨</p> <img src="image-20220908152913126.png" alt="image-20220908152913126" style="zoom: 80%;" /><ul><li>1ï¼‰StringBuffer å®ç°äº† Serializable, å³StringBufferçš„å¯¹è±¡å¯ä»¥ä¸²è¡ŒåŒ–</li><li>2ï¼‰StringBuffer çš„ç›´æ¥çˆ¶ç±» æ˜¯ AbstractStringBuilder</li><li>3ï¼‰åœ¨çˆ¶ç±» AbstractStringBuilder ä¸­æœ‰å±æ€§ char[] value,ä¸æ˜¯final<br>  è¯¥ value æ•°ç»„å­˜æ”¾ å­—ç¬¦ä¸²å†…å®¹ï¼Œå› æ­¤æ˜¯å­˜æ”¾åœ¨å †ä¸­çš„</li><li>4ï¼‰StringBuffer æ˜¯ä¸€ä¸ª finalç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿</li><li>5ï¼‰å› ä¸ºStringBuffer å­—ç¬¦å†…å®¹æ˜¯å­˜åœ¨ char[] value, æ‰€æœ‰åœ¨å˜åŒ–(å¢åŠ &#x2F;åˆ é™¤)<br>   ä¸ç”¨æ¯æ¬¡éƒ½æ›´æ¢åœ°å€(å³ä¸æ˜¯æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡)ï¼Œ æ‰€ä»¥æ•ˆç‡é«˜äº String</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBuffer01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. StringBuffer å®ç°äº† Serializable, å³StringBufferçš„å¯¹è±¡å¯ä»¥ä¸²è¡ŒåŒ–</span><br>        <span class="hljs-comment">//2. StringBuffer çš„ç›´æ¥çˆ¶ç±» æ˜¯ AbstractStringBuilder</span><br>        <span class="hljs-comment">//3. åœ¨çˆ¶ç±» AbstractStringBuilder ä¸­æœ‰å±æ€§ char[] value,ä¸æ˜¯final</span><br>        <span class="hljs-comment">//   è¯¥ value æ•°ç»„å­˜æ”¾ å­—ç¬¦ä¸²å†…å®¹ï¼Œå› æ­¤æ˜¯å­˜æ”¾åœ¨å †ä¸­çš„</span><br>        <span class="hljs-comment">//4. StringBuffer æ˜¯ä¸€ä¸ª finalç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿</span><br>        <span class="hljs-comment">//5. å› ä¸ºStringBuffer å­—ç¬¦å†…å®¹æ˜¯å­˜åœ¨ char[] value, æ‰€æœ‰åœ¨å˜åŒ–(å¢åŠ /åˆ é™¤)</span><br>        <span class="hljs-comment">//   ä¸ç”¨æ¯æ¬¡éƒ½æ›´æ¢åœ°å€(å³ä¸æ˜¯æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡)ï¼Œ æ‰€ä»¥æ•ˆç‡é«˜äº String</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Srting-VS-StringBuffer"><a href="#Srting-VS-StringBuffer" class="headerlink" title="Srting VS StringBuffer"></a>Srting VS StringBuffer</h4><ul><li>String ä¿å­˜çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œé‡Œé¢çš„å€¼ä¸èƒ½æ›´æ”¹ï¼Œæ¯æ¬¡ String ç±»çš„æ›´æ–°å®é™…ä¸Šå°±æ˜¯æ›´æ”¹åœ°å€ï¼Œæ•ˆç‡è¾ƒä½</li><li>StringBuffer ä¿å­˜çš„æ˜¯å­—ç¬¦ä¸²å˜é‡ï¼Œé‡Œé¢çš„å€¼å¯ä»¥æ›´æ”¹ï¼Œæ¯æ¬¡ StringBuffer çš„æ›´æ–°å®é™…ä¸Šå¯ä»¥æ›´æ–°å†…å®¹ï¼Œä¸ç”¨æ¯æ¬¡æ›´æ–°åœ°å€ï¼Œæ•ˆç‡è¾ƒé«˜ï¼ˆå› ä¸ºStringBuffer å­—ç¬¦å†…å®¹æ˜¯å­˜åœ¨åœ¨å †ä¸­çš„ char[] value ä¸­çš„ï¼‰</li></ul><h4 id="StringBuffer-æ„é€ å™¨"><a href="#StringBuffer-æ„é€ å™¨" class="headerlink" title="StringBuffer æ„é€ å™¨"></a>StringBuffer æ„é€ å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBuffer02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ„é€ å™¨çš„ä½¿ç”¨</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. åˆ›å»ºä¸€ä¸ª å¤§å°ä¸º 16çš„ char[] ,ç”¨äºå­˜æ”¾å­—ç¬¦å†…å®¹</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>        <span class="hljs-comment">//2 é€šè¿‡æ„é€ å™¨æŒ‡å®š char[] å¤§å°</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-number">100</span>);<br>        <span class="hljs-comment">//3. é€šè¿‡ ç»™ä¸€ä¸ª String åˆ›å»º StringBuffer, char[] å¤§å°å°±æ˜¯ str.length() + 16</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="String-å’Œ-StringBuffer-ç›¸äº’è½¬æ¢"><a href="#String-å’Œ-StringBuffer-ç›¸äº’è½¬æ¢" class="headerlink" title="String å’Œ StringBuffer ç›¸äº’è½¬æ¢"></a>String å’Œ StringBuffer ç›¸äº’è½¬æ¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringAndStringBuffer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//çœ‹ String --&gt; StringBuffer</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello tom&quot;</span>;<br>        <span class="hljs-comment">//æ–¹å¼1 ä½¿ç”¨æ„é€ å™¨</span><br>        <span class="hljs-comment">//æ³¨æ„ï¼š è¿”å›çš„æ‰æ˜¯StringBufferå¯¹è±¡ï¼Œå¯¹str æœ¬èº«æ²¡æœ‰å½±å“</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(str);<br>        <span class="hljs-comment">//æ–¹å¼2 ä½¿ç”¨çš„æ˜¯appendæ–¹æ³•</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>        stringBuffer1 = stringBuffer1.append(str);<br><br>        <span class="hljs-comment">//çœ‹ StringBuffer --&gt; String</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span>);<br>        <span class="hljs-comment">//æ–¹å¼1: ä½¿ç”¨æ„é€ å™¨æ¥æå®š</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(stringBuffer3);<br>        <span class="hljs-comment">//æ–¹å¼2 ä½¿ç”¨StringBufferæä¾›çš„ toStringæ–¹æ³•</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> stringBuffer3.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="StringBuffer-ç±»å¸¸è§æ–¹æ³•"><a href="#StringBuffer-ç±»å¸¸è§æ–¹æ³•" class="headerlink" title="StringBuffer ç±»å¸¸è§æ–¹æ³•"></a>StringBuffer ç±»å¸¸è§æ–¹æ³•</h4><ul><li>å¢  append(string)</li><li>åˆ   delete(start, end)</li><li>æ”¹  replace(start, end, string)</li><li>æŸ¥  indexOf(string)</li><li>æ’  insert(string)</li><li>è·å–é•¿åº¦  length()</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBufferMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>        <span class="hljs-comment">//å¢</span><br>        s.append(<span class="hljs-string">&#x27;,&#x27;</span>); <span class="hljs-comment">// &quot;hello,&quot;</span><br>        s.append(<span class="hljs-string">&quot;å¼ ä¸‰ä¸°&quot;</span>); <span class="hljs-comment">//&quot;hello,å¼ ä¸‰ä¸°&quot;</span><br>        s.append(<span class="hljs-string">&quot;èµµæ•&quot;</span>).append(<span class="hljs-number">100</span>).append(<span class="hljs-literal">true</span>).append(<span class="hljs-number">10.5</span>); <span class="hljs-comment">//&quot;hello,å¼ ä¸‰ä¸°èµµæ•100true10.5&quot;</span><br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,å¼ ä¸‰ä¸°èµµæ•100true10.5&quot;</span><br>        <span class="hljs-comment">//åˆ </span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * åˆ é™¤ç´¢å¼•ä¸º&gt;=start &amp;&amp; &lt;end å¤„çš„å­—ç¬¦</span><br><span class="hljs-comment">         * è§£è¯»: åˆ é™¤ 11~14 çš„å­—ç¬¦ [11, 14)</span><br><span class="hljs-comment">         */</span><br>        s.delete(<span class="hljs-number">11</span>, <span class="hljs-number">14</span>);<br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,å¼ ä¸‰ä¸°èµµæ•true10.5&quot;</span><br>        <span class="hljs-comment">//æ”¹</span><br>        <span class="hljs-comment">//ä¾‹ï¼šä½¿ç”¨ å‘¨èŠ·è‹¥ æ›¿æ¢ ç´¢å¼•9-11çš„å­—ç¬¦ [9,11)</span><br>        s.replace(<span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-string">&quot;å‘¨èŠ·è‹¥&quot;</span>);<br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,å¼ ä¸‰ä¸°å‘¨èŠ·è‹¥true10.5&quot;</span><br>        <span class="hljs-comment">//æŸ¥</span><br>        <span class="hljs-comment">//æŸ¥æ‰¾æŒ‡å®šçš„å­ä¸²åœ¨å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿”å›-1</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">indexOf</span> <span class="hljs-operator">=</span> s.indexOf(<span class="hljs-string">&quot;å¼ ä¸‰ä¸°&quot;</span>);<br>        System.out.println(indexOf); <span class="hljs-comment">//6</span><br>        <span class="hljs-comment">//æ’</span><br>        <span class="hljs-comment">//ä¾‹ï¼šåœ¨ç´¢å¼•ä¸º9çš„ä½ç½®æ’å…¥ &quot;èµµæ•&quot;,åŸæ¥ç´¢å¼•ä¸º9çš„å†…å®¹è‡ªåŠ¨åç§»</span><br>        s.insert(<span class="hljs-number">9</span>, <span class="hljs-string">&quot;èµµæ•&quot;</span>);<br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,å¼ ä¸‰ä¸°èµµæ•å‘¨èŠ·è‹¥true10.5&quot;</span><br>        <span class="hljs-comment">//é•¿åº¦</span><br>        System.out.println(s.length()); <span class="hljs-comment">//22</span><br>        System.out.println(s);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æµ‹è¯•é¢˜-1"><a href="#æµ‹è¯•é¢˜-1" class="headerlink" title="æµ‹è¯•é¢˜"></a>æµ‹è¯•é¢˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//çŸ¥è¯†ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBufferExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">// ok</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(); <span class="hljs-comment">//ok</span><br>        sb.append(str);<span class="hljs-comment">//éœ€è¦çœ‹æºç  , åº•å±‚è°ƒç”¨çš„æ˜¯ AbstractStringBuilder çš„ appendNull</span><br>        System.out.println(sb.length());<span class="hljs-comment">//4</span><br>        System.out.println(sb);<span class="hljs-comment">//null</span><br>        <span class="hljs-comment">//ä¸‹é¢çš„æ„é€ å™¨ï¼Œä¼šæŠ›å‡ºNullpointerException</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(str); <span class="hljs-comment">//çœ‹åº•å±‚æºç  super(str.length() + 16);</span><br>        System.out.println(sb1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åº”ç”¨ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBufferExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        è¾“å…¥å•†å“åç§°å’Œå•†å“ä»·æ ¼ï¼Œè¦æ±‚æ‰“å°æ•ˆæœç¤ºä¾‹, ä½¿ç”¨å‰é¢å­¦ä¹ çš„æ–¹æ³•å®Œæˆï¼š</span><br><span class="hljs-comment">        å•†å“åå•†å“ä»·æ ¼</span><br><span class="hljs-comment">        æ‰‹æœº123,564.59  //æ¯”å¦‚ ä»·æ ¼ 3,456,789.88</span><br><span class="hljs-comment">        è¦æ±‚ï¼šä»·æ ¼çš„å°æ•°ç‚¹å‰é¢æ¯ä¸‰ä½ç”¨é€—å·éš”å¼€, å†è¾“å‡ºã€‚</span><br><span class="hljs-comment">        æ€è·¯åˆ†æ</span><br><span class="hljs-comment">        1. å®šä¹‰ä¸€ä¸ªScanner å¯¹è±¡ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„ ä»·æ ¼(String)</span><br><span class="hljs-comment">        2. å¸Œæœ›ä½¿ç”¨åˆ° StringBufferçš„ insert ï¼Œéœ€è¦å°† String è½¬æˆ StringBuffer</span><br><span class="hljs-comment">        3. ç„¶åä½¿ç”¨ç›¸å…³æ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²çš„å¤„ç†</span><br><span class="hljs-comment">        ä»£ç å®ç°</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//new Scanner(System.in)</span><br><span class="hljs-comment">//å…ˆå®Œæˆä¸€ä¸ªæœ€ç®€å•çš„å®ç°123,564.59</span><br>        <span class="hljs-comment">//æ‰¾åˆ°å°æ•°ç‚¹çš„ç´¢å¼•ï¼Œç„¶ååœ¨è¯¥ä½ç½®çš„å‰3ä½ï¼Œæ’å…¥,å³å¯</span><br>        <span class="hljs-comment">//int i = sb.lastIndexOf(&quot;.&quot;);</span><br>        <span class="hljs-comment">//sb = sb.insert(i - 3, &quot;,&quot;);</span><br>        <span class="hljs-comment">//ä¸Šé¢çš„ä¸¤æ­¥éœ€è¦åšä¸€ä¸ªå¾ªç¯å¤„ç†,æ‰æ˜¯æ­£ç¡®çš„</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;8123564.59&quot;</span>;<br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(price);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> sb.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>) - <span class="hljs-number">3</span>; i &gt; <span class="hljs-number">0</span>; i -= <span class="hljs-number">3</span>) &#123;<br>            sb = sb.insert(i, <span class="hljs-string">&quot;,&quot;</span>);<br>        &#125;<br>        System.out.println(sb);<span class="hljs-comment">//8,123,564.59</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="StringBuilder-ç±»"><a href="#StringBuilder-ç±»" class="headerlink" title="StringBuilder ç±»"></a>StringBuilder ç±»</h3><p>ä¸€ä¸ªå¯å˜çš„å­—ç¬¦åºåˆ—ã€‚æ­¤ç±»æä¾›ä¸€ä¸ªä¸ StringBuffer å…¼å®¹çš„ APIï¼Œä½†ä¸ä¿è¯åŒæ­¥ï¼ˆå³StringBuilder ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚è¯¥ç±»è¢«è®¾è®¡ç”¨ä½œ StringBuffer çš„ä¸€ä¸ªç®€æ˜“æ›¿æ¢ï¼Œç”¨åœ¨å­—ç¬¦ä¸²ç¼“å†²åŒºè¢«å•ä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ—¶å€™ã€‚å¦‚æœå¯èƒ½ï¼Œå»ºè®®ä¼˜å…ˆé‡‡ç”¨è¯¥ç±»ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°å®ç°ä¸­ï¼Œå®ƒæ¯” StringBuffer è¦å¿«</p><p>StringBuilder å’Œ StringBuffer å‡ä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä½¿ç”¨å’Œ StringBuffer ä¸€æ ·</p><p>åœ¨ StringBuilder ä¸Šçš„ä¸»è¦æ“ä½œæ˜¯ append å’Œ insert æ–¹æ³•ï¼Œå¯é‡è½½è¿™äº›æ–¹æ³•ï¼Œä»¥æ¥å—ä»»æ„ç±»å‹çš„æ•°æ®</p><ul><li>1ï¼‰StringBuilder ç»§æ‰¿ AbstractStringBuilder ç±»</li><li>2ï¼‰å®ç°äº† Serializable ,è¯´æ˜StringBuilderå¯¹è±¡æ˜¯å¯ä»¥ä¸²è¡ŒåŒ–(å¯¹è±¡å¯ä»¥ç½‘ç»œä¼ è¾“ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åˆ°æ–‡ä»¶ä¸­)</li><li>3ï¼‰StringBuilder æ˜¯ final ç±», ä¸èƒ½è¢«ç»§æ‰¿</li><li>4ï¼‰StringBuilder å¯¹è±¡å­—ç¬¦åºåˆ—ä»ç„¶æ˜¯å­˜æ”¾åœ¨å…¶çˆ¶ç±» AbstractStringBuilder çš„ char[] value;<br>   å› æ­¤ï¼Œå­—ç¬¦åºåˆ—æ˜¯å­˜æ”¾åœ¨å †ä¸­</li><li>5ï¼‰StringBuilder çš„æ–¹æ³•ï¼Œæ²¡æœ‰åšäº’æ–¥çš„å¤„ç†ï¼Œå³ æ²¡æœ‰ synchronized å…³é”®å­—ï¼Œå› æ­¤åœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹ä½¿ç”¨</li></ul><h3 id="Stringã€StringBuffer-å’Œ-StringBuilder-çš„æ¯”è¾ƒ"><a href="#Stringã€StringBuffer-å’Œ-StringBuilder-çš„æ¯”è¾ƒ" class="headerlink" title="Stringã€StringBuffer å’Œ StringBuilder çš„æ¯”è¾ƒ"></a>Stringã€StringBuffer å’Œ StringBuilder çš„æ¯”è¾ƒ</h3><ul><li><p>StringBuilder å’Œ StringBuffer éå¸¸ç±»ä¼¼ï¼Œå‡ä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œè€Œä¸”æ–¹æ³•ä¹Ÿä¸€æ ·</p></li><li><p>Stringï¼šä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œæ•ˆç‡ä½ï¼Œä½†æ˜¯å¤ç”¨ç‡é«˜</p></li><li><p>StringBufferï¼šå¯å˜å­—ç¬¦åºåˆ—ã€æ•ˆç‡è¾ƒé«˜ï¼ˆå¢åˆ ï¼‰ã€çº¿ç¨‹å®‰å…¨</p></li><li><p>StringBuilderï¼šå¯å˜å­—ç¬¦åºåˆ—ã€æ•ˆç‡æœ€é«˜ï¼ˆå¢åˆ ï¼‰ã€çº¿ç¨‹ä¸å®‰å…¨</p></li><li><p>String ä½¿ç”¨æ³¨æ„äº‹é¡¹è¯´æ˜ï¼š</p><p>string s &#x3D; â€œaâ€;  &#x2F;&#x2F;åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²</p><p>s +&#x3D; â€œbâ€;  &#x2F;&#x2F;å®é™…ä¸ŠåŸæ¥çš„â€aâ€å­—ç¬¦ä¸²å¯¹è±¡å·²ç»ä¸¢å¼ƒäº†ï¼Œç°åœ¨åˆäº§ç”Ÿäº†ä¸€ä¸ªå­—ç¬¦ä¸² s + â€œbâ€ï¼ˆä¹Ÿå°±æ˜¯â€abâ€ï¼‰ã€‚</p><p>â€‹&#x2F;&#x2F;å¦‚æœå¤šæ¬¡æ‰§è¡Œè¿™äº›æ”¹å˜ä¸²å†…å®¹çš„æ“ä½œï¼Œä¼šå¯¼è‡´å¤§é‡å‰¯æœ¬å­—ç¬¦ä¸²å¯¹è±¡å­˜ç•™åœ¨å†…å­˜ä¸­ï¼Œé™ä½æ•ˆç‡</p><p>â€‹&#x2F;&#x2F;å¦‚æœè¿™æ ·çš„æ“ä½œæ”¾åˆ°å¾ªç¯ä¸­ï¼Œä¼šæå¤§å½±å“ç¨‹åºçš„æ€§èƒ½</p><p>&#x2F;&#x2F;å› æ­¤ï¼šå¦‚æœæˆ‘ä»¬è¦å¯¹å­—ç¬¦ä¸²åšå¤§é‡ä¿®æ”¹ï¼Œä¸è¦ä½¿ç”¨ String</p></li></ul><h4 id="Stringã€StringBuffer-å’Œ-StringBuilder-çš„é€‰æ‹©"><a href="#Stringã€StringBuffer-å’Œ-StringBuilder-çš„é€‰æ‹©" class="headerlink" title="Stringã€StringBuffer å’Œ StringBuilder çš„é€‰æ‹©"></a>Stringã€StringBuffer å’Œ StringBuilder çš„é€‰æ‹©</h4><ul><li>å¦‚æœå­—ç¬¦ä¸²å­˜åœ¨å¤§é‡çš„ä¿®æ”¹æ“ä½œï¼Œå¹¶åœ¨å•çº¿ç¨‹çš„æƒ…å†µï¼Œä½¿ç”¨ StringBuilder</li><li>å¦‚æœå­—ç¬¦ä¸²å­˜åœ¨å¤§é‡çš„ä¿®æ”¹æ“ä½œï¼Œå¹¶åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µï¼Œä½¿ç”¨ StringBuffer</li><li>å¦‚æœå­—ç¬¦ä¸²å¾ˆå°‘ä¿®æ”¹ï¼Œè¢«å¤šä¸ªå¯¹è±¡å¼•ç”¨ï¼Œä½¿ç”¨ String ï¼ˆæ¯”å¦‚é…ç½®ä¿¡æ¯ç­‰ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Stringã€StringBuffer å’Œ StringBuilder çš„ æ•ˆç‡æµ‹è¯•</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringVsStringBufferVsStringBuilder</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>        <span class="hljs-comment">//StringBuffer</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        startTime = System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<span class="hljs-comment">//StringBuffer æ‹¼æ¥ 20000æ¬¡</span><br>            buffer.append(String.valueOf(i));<br>        &#125;<br>        endTime = System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;StringBufferçš„æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + (endTime - startTime));<br>        <span class="hljs-comment">//StringBuilder</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        startTime = System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<span class="hljs-comment">//StringBuilder æ‹¼æ¥ 20000æ¬¡</span><br>            builder.append(String.valueOf(i));<br>        &#125;<br>        endTime = System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;StringBuilderçš„æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + (endTime - startTime));<br>        <span class="hljs-comment">//String</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        startTime = System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<span class="hljs-comment">//String æ‹¼æ¥ 20000æ¬¡</span><br>            text = text + i;<br>        &#125;<br>        endTime = System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;Stringçš„æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + (endTime - startTime));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Math-ç±»"><a href="#Math-ç±»" class="headerlink" title="Math ç±»"></a>Math ç±»</h3><p>Math ç±»åŒ…å«ç”¨äºæ‰§è¡ŒåŸºæœ¬æ•°å­¦è¿ç®—çš„æ–¹æ³•ï¼Œå¦‚åˆç­‰æŒ‡æ•°ã€å¯¹æ•°ã€å¹³æ–¹æ ¹å’Œä¸‰è§’å‡½æ•° ç­‰ç­‰ï¼ˆå‡ä¸ºé™æ€æ–¹æ³•ï¼‰</p><ul><li>abs  &#x2F;&#x2F;ç»å¯¹å€¼</li><li>pow  &#x2F;&#x2F;æ±‚å¹‚</li><li>ceil  &#x2F;&#x2F;å‘ä¸Šå–æ•´</li><li>floor  &#x2F;&#x2F;å‘ä¸‹å–æ•´</li><li>round  &#x2F;&#x2F;å››èˆäº”å…¥</li><li>sqrt  &#x2F;&#x2F;æ±‚å¼€æ–¹</li><li>random  &#x2F;&#x2F;æ±‚éšæœºæ•°</li><li>max  &#x2F;&#x2F;æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼</li><li>min  &#x2F;&#x2F;æ±‚ä¸¤ä¸ªæ•°çš„æœ€å°å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MathMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//çœ‹çœ‹Mathå¸¸ç”¨çš„æ–¹æ³•(é™æ€æ–¹æ³•)</span><br>        <span class="hljs-comment">//1.abs ç»å¯¹å€¼</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">abs</span> <span class="hljs-operator">=</span> Math.abs(-<span class="hljs-number">9</span>);<br>        System.out.println(abs);  <span class="hljs-comment">//9</span><br>        <span class="hljs-comment">//2.pow æ±‚å¹‚</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">pow</span> <span class="hljs-operator">=</span> Math.pow(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>);  <span class="hljs-comment">//2çš„4æ¬¡æ–¹</span><br>        System.out.println(pow);  <span class="hljs-comment">//16</span><br>        <span class="hljs-comment">//3.ceil å‘ä¸Šå–æ•´,è¿”å›&gt;=è¯¥å‚æ•°çš„doubleç±»å‹çš„æœ€å°æ•´æ•°;</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">ceil</span> <span class="hljs-operator">=</span> Math.ceil(<span class="hljs-number">3.9</span>);<br>        System.out.println(ceil);  <span class="hljs-comment">//4.0</span><br>        <span class="hljs-comment">//4.floor å‘ä¸‹å–æ•´ï¼Œè¿”å›&lt;=è¯¥å‚æ•°çš„doubleç±»å‹çš„æœ€å¤§æ•´æ•°;</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">floor</span> <span class="hljs-operator">=</span> Math.floor(<span class="hljs-number">4.001</span>);<br>        System.out.println(floor);  <span class="hljs-comment">//4.0</span><br>        <span class="hljs-comment">//5.round å››èˆäº”å…¥  Math.floor(è¯¥å‚æ•°+0.5)  è¿”å›longç±»å‹</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">round</span> <span class="hljs-operator">=</span> Math.round(<span class="hljs-number">5.51</span>);<br>        System.out.println(round);  <span class="hljs-comment">//6</span><br>        <span class="hljs-comment">//6.sqrt æ±‚å¼€æ–¹</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">sqrt</span> <span class="hljs-operator">=</span> Math.sqrt(<span class="hljs-number">9.0</span>);<br>        System.out.println(sqrt);  <span class="hljs-comment">//3.0</span><br>        <span class="hljs-comment">//7.random æ±‚éšæœºæ•°</span><br>        <span class="hljs-comment">//  random è¿”å›çš„æ˜¯ 0 &lt;= x &lt; 1 ä¹‹é—´çš„ä¸€ä¸ªéšæœºå°æ•°</span><br>        <span class="hljs-comment">// æ€è€ƒï¼šè¯·å†™å‡ºè·å– a-bä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•´æ•°,a,bå‡ä¸ºæ•´æ•° ï¼Œæ¯”å¦‚ a = 2, b=7</span><br>        <span class="hljs-comment">//  å³è¿”å›ä¸€ä¸ªæ•° x  2 &lt;= x &lt;= 7</span><br>        <span class="hljs-comment">// è§£è¯»ï¼š Math.random() * (b-a) è¿”å›çš„å°±æ˜¯ 0 &lt;= æ•° &lt; b-a</span><br>        <span class="hljs-comment">// (1) (int)(a) &lt;= x &lt;= (int)(a + Math.random() * (b-a+1) )</span><br>        <span class="hljs-comment">// (2) ä½¿ç”¨å…·ä½“çš„æ•°ç»™å°ä¼™ä¼´ä»‹ç» a = 2  b = 7</span><br>        <span class="hljs-comment">//  (int)(a + Math.random() * (b-a +1) ) = (int)( 2 + Math.random()*6)</span><br>        <span class="hljs-comment">//  Math.random()*6 è¿”å›çš„æ˜¯ 0 &lt;= x &lt; 6 å°æ•°</span><br>        <span class="hljs-comment">//  2 + Math.random()*6 è¿”å›çš„å°±æ˜¯ 2&lt;= x &lt; 8 å°æ•°</span><br>        <span class="hljs-comment">//  (int)(2 + Math.random()*6) == 2 &lt;= x &lt;= 7</span><br>        <span class="hljs-comment">// (3) å…¬å¼å°±æ˜¯  (int)(a + Math.random() * (b-a + 1) )</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println((<span class="hljs-type">int</span>)(<span class="hljs-number">2</span> +  Math.random() * (<span class="hljs-number">7</span> - <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)));<br>        &#125;<br>        <span class="hljs-comment">//8.max , min è¿”å›æœ€å¤§å€¼å’Œæœ€å°å€¼</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Math.min(<span class="hljs-number">1</span>, <span class="hljs-number">9</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> Math.max(<span class="hljs-number">45</span>, <span class="hljs-number">90</span>);<br>        System.out.println(<span class="hljs-string">&quot;min=&quot;</span> + min);<br>        System.out.println(<span class="hljs-string">&quot;max=&quot;</span> + max);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Arrays-ç±»"><a href="#Arrays-ç±»" class="headerlink" title="Arrays ç±»"></a>Arrays ç±»</h3><p>Arrays è°œé¢åŒ…å«äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œç”¨äºç®¡ç†æˆ–æ“ä½œæ•°ç»„ï¼ˆæ¯”å¦‚æ’åºå’Œæœç´¢ï¼‰</p><ul><li><p>toString è¿”å›æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼</p><p>Arrays.toString(arr)</p></li><li><p>sort æ’åºï¼ˆè‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼‰ Integer arr[] &#x3D; {1, -1, 7, 0, 89};</p></li><li><p>binarySearch é€šè¿‡äºŒåˆ†æœç´¢æ³•è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¦æ±‚å¿…é¡»æ’å¥½åº</p><p>int index &#x3D; Arrays.binarySearch(arr, 3);</p></li><li><p>copyOf æ•°ç»„å…ƒç´ çš„å¤åˆ¶</p><p>Integer[] newArr &#x3D; Arrays.copyOf(arr,arr,length);</p></li><li><p>fill æ•°ç»„å…ƒç´ çš„å¡«å……</p><p>Integer[] num &#x3D; new Integer[]{9, 3, 2};</p><p>Arrays.fill(num, 99);</p></li><li><p>equals æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å…ƒç´ å†…å®¹æ˜¯å¦å®Œå…¨ä¸€è‡´</p><p>boolean equals &#x3D; Arrays.equals(arr, arr2);</p></li><li><p>asList å°†ä¸€ç»„å€¼ï¼Œè½¬æ¢æˆlist</p><p>List&lt;Integer&gt; asListt &#x3D; Arrays.asList(2, 3, 4, 5, 6, 1);</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArraysMethod01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        Integer[] integers = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">20</span>, <span class="hljs-number">90</span>&#125;;<br>        <span class="hljs-comment">//éå†æ•°ç»„</span><br>        <span class="hljs-comment">//for(int i = 0; i &lt; integers.length; i++) &#123;</span><br>        <span class="hljs-comment">//    System.out.println(integers[i]);</span><br>        <span class="hljs-comment">//&#125;</span><br>        <span class="hljs-comment">//ç›´æ¥ä½¿ç”¨Arrays.toStringæ–¹æ³•ï¼Œæ˜¾ç¤ºæ•°ç»„</span><br>        <span class="hljs-comment">//System.out.println(Arrays.toString(integers));//</span><br><br>        <span class="hljs-comment">//æ¼”ç¤º sortæ–¹æ³•çš„ä½¿ç”¨</span><br>        Integer arr[] = &#123;<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">89</span>&#125;;<br>        <span class="hljs-comment">//è¿›è¡Œæ’åº</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. å¯ä»¥ç›´æ¥ä½¿ç”¨å†’æ³¡æ’åº , ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨Arraysæä¾›çš„sortæ–¹æ³•æ’åº</span><br>        <span class="hljs-comment">//2. å› ä¸ºæ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥é€šè¿‡sortæ’åºåï¼Œä¼šç›´æ¥å½±å“åˆ° å®å‚ arr</span><br>        <span class="hljs-comment">//3. sorté‡è½½çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥ä¸€ä¸ªæ¥å£ Comparator å®ç°å®šåˆ¶æ’åº</span><br>        <span class="hljs-comment">//4. è°ƒç”¨ å®šåˆ¶æ’åº æ—¶ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•° (1) æ’åºçš„æ•°ç»„ arr</span><br>        <span class="hljs-comment">//   (2) å®ç°äº†Comparatoræ¥å£çš„åŒ¿åå†…éƒ¨ç±» , è¦æ±‚å®ç°  compareæ–¹æ³•</span><br>        <span class="hljs-comment">//5. å…ˆæ¼”ç¤ºæ•ˆæœï¼Œå†è§£é‡Š</span><br>        <span class="hljs-comment">//6. è¿™é‡Œä½“ç°äº†æ¥å£ç¼–ç¨‹çš„æ–¹å¼ , çœ‹çœ‹æºç ï¼Œå°±æ˜ç™½</span><br>        <span class="hljs-comment">//   æºç åˆ†æ</span><br>        <span class="hljs-comment">//(1) Arrays.sort(arr, new Comparator()</span><br>        <span class="hljs-comment">//(2) æœ€ç»ˆåˆ° TimSortç±»çš„ private static &lt;T&gt; void binarySort(T[] a, int lo, int hi, int start,</span><br>        <span class="hljs-comment">//                                       Comparator&lt;? super T&gt; c)()</span><br>        <span class="hljs-comment">//(3) æ‰§è¡Œåˆ° binarySortæ–¹æ³•çš„ä»£ç , ä¼šæ ¹æ®åŠ¨æ€ç»‘å®šæœºåˆ¶ c.compare()æ‰§è¡Œæˆ‘ä»¬ä¼ å…¥çš„</span><br>        <span class="hljs-comment">//    åŒ¿åå†…éƒ¨ç±»çš„ compare ()</span><br>        <span class="hljs-comment">//     while (left &lt; right) &#123;</span><br>        <span class="hljs-comment">//                int mid = (left + right) &gt;&gt;&gt; 1;</span><br>        <span class="hljs-comment">//                if (c.compare(pivot, a[mid]) &lt; 0)</span><br>        <span class="hljs-comment">//                    right = mid;</span><br>        <span class="hljs-comment">//                else</span><br>        <span class="hljs-comment">//                    left = mid + 1;</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">//(4) new Comparator() &#123;</span><br>        <span class="hljs-comment">//            @Override</span><br>        <span class="hljs-comment">//            public int compare(Object o1, Object o2) &#123;</span><br>        <span class="hljs-comment">//                Integer i1 = (Integer) o1;</span><br>        <span class="hljs-comment">//                Integer i2 = (Integer) o2;</span><br>        <span class="hljs-comment">//                return i2 - i1;</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">//(5) public int compare(Object o1, Object o2) è¿”å›çš„å€¼&gt;0 è¿˜æ˜¯ &lt;0</span><br>        <span class="hljs-comment">//    ä¼šå½±å“æ•´ä¸ªæ’åºç»“æœ, è¿™å°±å……åˆ†ä½“ç°äº† æ¥å£ç¼–ç¨‹+åŠ¨æ€ç»‘å®š+åŒ¿åå†…éƒ¨ç±»çš„ç»¼åˆä½¿ç”¨</span><br>        <span class="hljs-comment">//    å°†æ¥çš„åº•å±‚æ¡†æ¶å’Œæºç çš„ä½¿ç”¨æ–¹å¼ï¼Œä¼šéå¸¸å¸¸è§</span><br>        <span class="hljs-comment">//Arrays.sort(arr); // é»˜è®¤æ’åºæ–¹æ³•</span><br>        <span class="hljs-comment">//å®šåˆ¶æ’åº</span><br>        Arrays.sort(arr, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">i1</span> <span class="hljs-operator">=</span> (Integer) o1;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> (Integer) o2;<br>                <span class="hljs-keyword">return</span> i2 - i1;<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;===æ’åºå===&quot;</span>);<br>        System.out.println(Arrays.toString(arr));<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArraysMethod02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Integer[] arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">90</span>, <span class="hljs-number">123</span>, <span class="hljs-number">567</span>&#125;;<br>        <span class="hljs-comment">// binarySearch é€šè¿‡äºŒåˆ†æœç´¢æ³•è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¦æ±‚å¿…é¡»æ’å¥½</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨ binarySearch äºŒå‰æŸ¥æ‰¾</span><br>        <span class="hljs-comment">//2. è¦æ±‚è¯¥æ•°ç»„æ˜¯æœ‰åºçš„. å¦‚æœè¯¥æ•°ç»„æ˜¯æ— åºçš„ï¼Œä¸èƒ½ä½¿ç”¨binarySearch</span><br>        <span class="hljs-comment">//3. å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œå°±è¿”å› return -(low + 1);  //lowä»£è¡¨åº”è¯¥åœ¨çš„ä½ç½®</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Arrays.binarySearch(arr, <span class="hljs-number">567</span>);<br>        System.out.println(<span class="hljs-string">&quot;index=&quot;</span> + index);<br><br>        <span class="hljs-comment">//copyOf æ•°ç»„å…ƒç´ çš„å¤åˆ¶</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. ä» arr æ•°ç»„ä¸­ï¼Œæ‹·è´ arr.lengthä¸ªå…ƒç´ åˆ° newArræ•°ç»„ä¸­</span><br>        <span class="hljs-comment">//2. å¦‚æœæ‹·è´çš„é•¿åº¦ &gt; arr.length å°±åœ¨æ–°æ•°ç»„çš„åé¢ å¢åŠ  null</span><br>        <span class="hljs-comment">//3. å¦‚æœæ‹·è´é•¿åº¦ &lt; 0 å°±æŠ›å‡ºå¼‚å¸¸NegativeArraySizeException</span><br>        <span class="hljs-comment">//4. è¯¥æ–¹æ³•çš„åº•å±‚ä½¿ç”¨çš„æ˜¯ System.arraycopy()</span><br>        Integer[] newArr = Arrays.copyOf(arr, arr.length);<br>        System.out.println(<span class="hljs-string">&quot;==æ‹·è´æ‰§è¡Œå®Œæ¯•å==&quot;</span>);<br>        System.out.println(Arrays.toString(newArr));<br><br>        <span class="hljs-comment">//fill æ•°ç»„å…ƒç´ çš„å¡«å……</span><br>        Integer[] num = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[]&#123;<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>&#125;;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨ 99 å»å¡«å…… numæ•°ç»„ï¼Œå¯ä»¥ç†è§£æˆæ˜¯æ›¿æ¢åŸæ¥çš„å…ƒç´ </span><br>        Arrays.fill(num, <span class="hljs-number">99</span>);<br>        System.out.println(<span class="hljs-string">&quot;==numæ•°ç»„å¡«å……å==&quot;</span>);<br>        System.out.println(Arrays.toString(num));<br><br>        <span class="hljs-comment">//equals æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å…ƒç´ å†…å®¹æ˜¯å¦å®Œå…¨ä¸€è‡´</span><br>        Integer[] arr2 = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">90</span>, <span class="hljs-number">123</span>&#125;;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. å¦‚æœarr å’Œ arr2 æ•°ç»„çš„å…ƒç´ ä¸€æ ·ï¼Œåˆ™æ–¹æ³•true;</span><br>        <span class="hljs-comment">//2. å¦‚æœä¸æ˜¯å®Œå…¨ä¸€æ ·ï¼Œå°±è¿”å› false</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">equals</span> <span class="hljs-operator">=</span> Arrays.equals(arr, arr2);<br>        System.out.println(<span class="hljs-string">&quot;equals=&quot;</span> + equals);<br><br>        <span class="hljs-comment">//asList å°†ä¸€ç»„å€¼ï¼Œè½¬æ¢æˆlist</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. asListæ–¹æ³•ï¼Œä¼šå°†(2,3,4,5,6,1)æ•°æ®è½¬æˆä¸€ä¸ªListé›†åˆ</span><br>        <span class="hljs-comment">//2. è¿”å›çš„ asList çš„ç¼–è¯‘ç±»å‹æ˜¯ List(æ¥å£)</span><br>        <span class="hljs-comment">//3. asList çš„è¿è¡Œç±»å‹æ˜¯ java.util.Arrays#ArrayList, æ˜¯Arraysç±»çš„</span><br>        <span class="hljs-comment">//   é™æ€å†…éƒ¨ç±» private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br>        <span class="hljs-comment">//              implements RandomAccess, java.io.Serializable</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">asList</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>);<br>        System.out.println(<span class="hljs-string">&quot;asList=&quot;</span> + asList);<br>        System.out.println(<span class="hljs-string">&quot;asListçš„è¿è¡Œç±»å‹&quot;</span> + asList.getClass());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//sortæ’åºç±»</span><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        æ¡ˆä¾‹ï¼šè‡ªå®šä¹‰Bookç±»ï¼Œé‡Œé¢åŒ…å«nameå’Œpriceï¼ŒæŒ‰priceæ’åº(ä»å¤§åˆ°å°)ã€‚</span><br><span class="hljs-comment">        è¦æ±‚ä½¿ç”¨ä¸¤ç§æ–¹å¼æ’åº , æœ‰ä¸€ä¸ª Book[] books = 4æœ¬ä¹¦å¯¹è±¡.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        ä½¿ç”¨å‰é¢å­¦ä¹ è¿‡çš„ä¼ é€’ å®ç°Comparatoræ¥å£åŒ¿åå†…éƒ¨ç±»ï¼Œä¹Ÿç§°ä¸ºå®šåˆ¶æ’åºã€‚</span><br><span class="hljs-comment">        [åŒå­¦ä»¬å®Œæˆè¿™ä¸ªå³å¯ 10min  ],</span><br><span class="hljs-comment">        å¯ä»¥æŒ‰ç…§ price (1)ä»å¤§åˆ°å° (2)ä»å°åˆ°å¤§ (3) æŒ‰ç…§ä¹¦åé•¿åº¦ä»å¤§åˆ°å°</span><br><span class="hljs-comment">         */</span><br>        Book[] books = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>[<span class="hljs-number">4</span>];<br>        books[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;çº¢æ¥¼æ¢¦&quot;</span>, <span class="hljs-number">100</span>);<br>        books[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;é‡‘ç“¶æ¢…æ–°&quot;</span>, <span class="hljs-number">90</span>);<br>        books[<span class="hljs-number">2</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;é’å¹´æ–‡æ‘˜20å¹´&quot;</span>, <span class="hljs-number">5</span>);<br>        books[<span class="hljs-number">3</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;javaä»å…¥é—¨åˆ°æ”¾å¼ƒ~&quot;</span>, <span class="hljs-number">300</span>);<br><br>        <span class="hljs-comment">//(1)priceä»å¤§åˆ°å°</span><br><span class="hljs-comment">//        Arrays.sort(books, new Comparator() &#123;</span><br><span class="hljs-comment">//            //è¿™é‡Œæ˜¯å¯¹Bookæ•°ç»„æ’åºï¼Œå› æ­¤  o1 å’Œ o2 å°±æ˜¯Bookå¯¹è±¡</span><br><span class="hljs-comment">//            @Override</span><br><span class="hljs-comment">//            public int compare(Object o1, Object o2) &#123;</span><br><span class="hljs-comment">//                Book book1 = (Book) o1;</span><br><span class="hljs-comment">//                Book book2 = (Book) o2;</span><br><span class="hljs-comment">//                double priceVal = book2.getPrice() - book1.getPrice();</span><br><span class="hljs-comment">//                //è¿™é‡Œè€å¸ˆè¿›è¡Œäº†ä¸€ä¸ªè½¬æ¢</span><br><span class="hljs-comment">//                //å¦‚æœå‘ç°è¿”å›ç»“æœå’Œæˆ‘ä»¬è¾“å‡ºçš„ä¸ä¸€è‡´ï¼Œå°±ä¿®æ”¹ä¸€ä¸‹è¿”å›çš„ 1 å’Œ -1</span><br><span class="hljs-comment">//                if(priceVal &gt; 0) &#123;</span><br><span class="hljs-comment">//                    return  1;</span><br><span class="hljs-comment">//                &#125; else  if(priceVal &lt; 0) &#123;</span><br><span class="hljs-comment">//                    return -1;</span><br><span class="hljs-comment">//                &#125; else &#123;</span><br><span class="hljs-comment">//                    return 0;</span><br><span class="hljs-comment">//                &#125;</span><br><span class="hljs-comment">//            &#125;</span><br><span class="hljs-comment">//        &#125;);</span><br><br>        <span class="hljs-comment">//(2)priceä»å°åˆ°å¤§</span><br><span class="hljs-comment">//        Arrays.sort(books, new Comparator() &#123;</span><br><span class="hljs-comment">//            //è¿™é‡Œæ˜¯å¯¹Bookæ•°ç»„æ’åºï¼Œå› æ­¤  o1 å’Œ o2 å°±æ˜¯Bookå¯¹è±¡</span><br><span class="hljs-comment">//            @Override</span><br><span class="hljs-comment">//            public int compare(Object o1, Object o2) &#123;</span><br><span class="hljs-comment">//                Book book1 = (Book) o1;</span><br><span class="hljs-comment">//                Book book2 = (Book) o2;</span><br><span class="hljs-comment">//                double priceVal = book2.getPrice() - book1.getPrice();</span><br><span class="hljs-comment">//                //è¿™é‡Œè€å¸ˆè¿›è¡Œäº†ä¸€ä¸ªè½¬æ¢</span><br><span class="hljs-comment">//                //å¦‚æœå‘ç°è¿”å›ç»“æœå’Œæˆ‘ä»¬è¾“å‡ºçš„ä¸ä¸€è‡´ï¼Œå°±ä¿®æ”¹ä¸€ä¸‹è¿”å›çš„ 1 å’Œ -1</span><br><span class="hljs-comment">//                if(priceVal &gt; 0) &#123;</span><br><span class="hljs-comment">//                    return  -1;</span><br><span class="hljs-comment">//                &#125; else  if(priceVal &lt; 0) &#123;</span><br><span class="hljs-comment">//                    return 1;</span><br><span class="hljs-comment">//                &#125; else &#123;</span><br><span class="hljs-comment">//                    return 0;</span><br><span class="hljs-comment">//                &#125;</span><br><span class="hljs-comment">//            &#125;</span><br><span class="hljs-comment">//        &#125;);</span><br><br>        <span class="hljs-comment">//(3)æŒ‰ç…§ä¹¦åé•¿åº¦ä»å¤§åˆ°å°</span><br>        Arrays.sort(books, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-comment">//è¿™é‡Œæ˜¯å¯¹Bookæ•°ç»„æ’åºï¼Œå› æ­¤  o1 å’Œ o2 å°±æ˜¯Bookå¯¹è±¡</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) o1;<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) o2;<br>                <span class="hljs-comment">//è¦æ±‚æŒ‰ç…§ä¹¦åçš„é•¿åº¦æ¥è¿›è¡Œæ’åº</span><br>                <span class="hljs-keyword">return</span> book2.getName().length() - book1.getName().length();<br>            &#125;<br>        &#125;);<br>        System.out.println(Arrays.toString(books));<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> price;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> &#123;<span class="hljs-built_in">this</span>.price = price;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Book&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="System-ç±»"><a href="#System-ç±»" class="headerlink" title="System ç±»"></a>System ç±»</h3><ul><li><p>exit é€€å‡ºå½“å‰ç¨‹åº</p></li><li><p>arraycopy  å¤åˆ¶æ•°ç»„å…ƒç´ ï¼Œæ¯”è¾ƒé€‚åˆåº•å±‚è°ƒç”¨ï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Arrays.copy() å®Œæˆå¤åˆ¶æ•°ç»„</p><p>int[] src &#x3D; {1, 2, 3}</p><p>int[] dest &#x3D; new int[3];</p><p>System.arraycopy(src, 0, dest, 0, 3);</p></li><li><p>currentTimeMillens  è¿”å›å½“å‰æ—¶é—´è·ç¦» 1970-1-1 çš„æ¯«ç§’æ•°</p></li><li><p>gc()  è¿è¡Œåƒåœ¾å›æ”¶æœºåˆ¶ System.gc();</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">System_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//exit é€€å‡ºå½“å‰ç¨‹åº</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. exit(0) è¡¨ç¤ºç¨‹åºé€€å‡º</span><br>        <span class="hljs-comment">//2. 0 è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ , æ­£å¸¸çš„çŠ¶æ€</span><br>        <span class="hljs-comment">//System.out.println(&quot;ok1&quot;);</span><br>        <span class="hljs-comment">//System.exit(0);</span><br>        <span class="hljs-comment">//System.out.println(&quot;ok2&quot;);</span><br><br>        <span class="hljs-comment">//arraycopy ï¼šå¤åˆ¶æ•°ç»„å…ƒç´ ï¼Œæ¯”è¾ƒé€‚åˆåº•å±‚è°ƒç”¨ï¼Œ</span><br>        <span class="hljs-comment">// ä¸€èˆ¬ä½¿ç”¨Arrays.copyOfå®Œæˆå¤åˆ¶æ•°ç»„</span><br>        <span class="hljs-type">int</span>[] src=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<br>        <span class="hljs-type">int</span>[] dest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">3</span>]; <span class="hljs-comment">// dest å½“å‰æ˜¯ &#123;0,0,0&#125;</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. ä¸»è¦æ˜¯ææ¸…æ¥šè¿™äº”ä¸ªå‚æ•°çš„å«ä¹‰</span><br>        <span class="hljs-comment">//     srcï¼šæºæ•°ç»„</span><br>        <span class="hljs-comment">//     * @param      src      the source array.</span><br>        <span class="hljs-comment">//     srcPosï¼š ä»æºæ•°ç»„çš„å“ªä¸ªç´¢å¼•ä½ç½®å¼€å§‹æ‹·è´</span><br>        <span class="hljs-comment">//     * @param      srcPos   starting position in the source array.</span><br>        <span class="hljs-comment">//     dest : ç›®æ ‡æ•°ç»„ï¼Œå³æŠŠæºæ•°ç»„çš„æ•°æ®æ‹·è´åˆ°å“ªä¸ªæ•°ç»„</span><br>        <span class="hljs-comment">//     * @param      dest     the destination array.</span><br>        <span class="hljs-comment">//     destPos: æŠŠæºæ•°ç»„çš„æ•°æ®æ‹·è´åˆ° ç›®æ ‡æ•°ç»„çš„å“ªä¸ªç´¢å¼•</span><br>        <span class="hljs-comment">//     * @param      destPos  starting position in the destination data.</span><br>        <span class="hljs-comment">//     length: ä»æºæ•°ç»„æ‹·è´å¤šå°‘ä¸ªæ•°æ®åˆ°ç›®æ ‡æ•°ç»„ï¼ˆæ³¨æ„ä¸èƒ½è¶Šç•Œï¼‰</span><br>        <span class="hljs-comment">//     * @param      length   the number of array elements to be copied.</span><br>        System.arraycopy(src, <span class="hljs-number">0</span>, dest, <span class="hljs-number">0</span>, src.length);<br>        <span class="hljs-comment">// int[] src=&#123;1,2,3&#125;;</span><br>        System.out.println(<span class="hljs-string">&quot;dest=&quot;</span> + Arrays.toString(dest));<span class="hljs-comment">//[1, 2, 3]</span><br><br>        <span class="hljs-comment">//currentTimeMillens:è¿”å›å½“å‰æ—¶é—´è·ç¦»1970-1-1 çš„æ¯«ç§’æ•°</span><br>        <span class="hljs-comment">// è§£è¯»:</span><br>        System.out.println(System.currentTimeMillis());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="BigInteger-å’Œ-BigDecimal-ç±»"><a href="#BigInteger-å’Œ-BigDecimal-ç±»" class="headerlink" title="BigInteger å’Œ BigDecimal ç±»"></a>BigInteger å’Œ BigDecimal ç±»</h3><ul><li>BigInteger é€‚åˆä¿å­˜æ¯”è¾ƒå¤§çš„æ•´å½¢</li><li>BigDecimal é€‚åˆä¿å­˜ç²¾åº¦æ›´é«˜çš„æµ®ç‚¹å‹</li></ul><p><strong>BigInteger å’Œ BigDecimal å¸¸è§æ–¹æ³•</strong></p><ul><li>add  åŠ </li><li>subtract  å‡</li><li>multiply  ä¹˜</li><li>divide  é™¤</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigInteger_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//å½“æˆ‘ä»¬ç¼–ç¨‹ä¸­ï¼Œéœ€è¦å¤„ç†å¾ˆå¤§çš„æ•´æ•°ï¼Œlong ä¸å¤Ÿç”¨</span><br>        <span class="hljs-comment">//å¯ä»¥ä½¿ç”¨BigIntegerçš„ç±»æ¥æå®š</span><br><span class="hljs-comment">//        long l = 23788888899999999999999999999l;</span><br><span class="hljs-comment">//        System.out.println(&quot;l=&quot; + l);</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;23788888899999999999999999999&quot;</span>);<br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;10099999999999999999999999999999999999999999999999999999999999999999999999999999999&quot;</span>);<br>        System.out.println(bigInteger);<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. åœ¨å¯¹ BigInteger è¿›è¡ŒåŠ å‡ä¹˜é™¤çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥è¿›è¡Œ + - * /</span><br>        <span class="hljs-comment">//2. å¯ä»¥åˆ›å»ºä¸€ä¸ª è¦æ“ä½œçš„ BigInteger ç„¶åè¿›è¡Œç›¸åº”æ“ä½œ</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">add</span> <span class="hljs-operator">=</span> bigInteger.add(bigInteger2);<br>        System.out.println(add);<span class="hljs-comment">//åŠ </span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">subtract</span> <span class="hljs-operator">=</span> bigInteger.subtract(bigInteger2);<br>        System.out.println(subtract);<span class="hljs-comment">//å‡</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">multiply</span> <span class="hljs-operator">=</span> bigInteger.multiply(bigInteger2);<br>        System.out.println(multiply);<span class="hljs-comment">//ä¹˜</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">divide</span> <span class="hljs-operator">=</span> bigInteger.divide(bigInteger2);<br>        System.out.println(divide);<span class="hljs-comment">//é™¤</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.math.BigDecimal;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigDecimal_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å½“æˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€ä¸ªç²¾åº¦å¾ˆé«˜çš„æ•°æ—¶ï¼Œdouble ä¸å¤Ÿç”¨</span><br>        <span class="hljs-comment">//å¯ä»¥æ˜¯ BigDecimal</span><br><span class="hljs-comment">//        double d = 1999.11111111111999999999999977788d;</span><br><span class="hljs-comment">//        System.out.println(d);</span><br>        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;1999.11&quot;</span>);<br>        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;3&quot;</span>);<br>        System.out.println(bigDecimal);<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. å¦‚æœå¯¹ BigDecimalè¿›è¡Œè¿ç®—ï¼Œæ¯”å¦‚åŠ å‡ä¹˜é™¤ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•</span><br>        <span class="hljs-comment">//2. åˆ›å»ºä¸€ä¸ªéœ€è¦æ“ä½œçš„ BigDecimal ç„¶åè°ƒç”¨ç›¸åº”çš„æ–¹æ³•å³å¯</span><br>        System.out.println(bigDecimal.add(bigDecimal2));<br>        System.out.println(bigDecimal.subtract(bigDecimal2));<br>        System.out.println(bigDecimal.multiply(bigDecimal2));<br>        <span class="hljs-comment">//System.out.println(bigDecimal.divide(bigDecimal2));//å¯èƒ½æŠ›å‡ºå¼‚å¸¸ArithmeticException</span><br>        <span class="hljs-comment">//åœ¨è°ƒç”¨divide æ–¹æ³•æ—¶ï¼ŒæŒ‡å®šç²¾åº¦å³å¯. BigDecimal.ROUND_CEILING</span><br>        <span class="hljs-comment">//å¦‚æœæœ‰æ— é™å¾ªç¯å°æ•°ï¼Œå°±ä¼šä¿ç•™ åˆ†å­ çš„ç²¾åº¦</span><br>        System.out.println(bigDecimal.divide(bigDecimal2, BigDecimal.ROUND_CEILING));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ—¥æœŸç±»"><a href="#æ—¥æœŸç±»" class="headerlink" title="æ—¥æœŸç±»"></a>æ—¥æœŸç±»</h3><h4 id="ç¬¬ä¸€ä»£æ—¥æœŸç±»"><a href="#ç¬¬ä¸€ä»£æ—¥æœŸç±»" class="headerlink" title="ç¬¬ä¸€ä»£æ—¥æœŸç±»"></a>ç¬¬ä¸€ä»£æ—¥æœŸç±»</h4><p><strong>Date</strong>ï¼šç²¾ç¡®åˆ°æ¯«ç§’ï¼Œä»£è¡¨ç‰¹å®šçš„ç¬é—´</p><p><strong>SimpleDateFormat</strong>ï¼šæ ¼å¼åŒ–ï¼ˆæ—¥æœŸ-&gt;æ–‡æœ¬ï¼‰å’Œè§£æï¼ˆæ–‡æœ¬-&gt;æ—¥æœŸï¼‰æ—¥æœŸçš„ç±»</p><ul><li><p>æä¾›ä¸¤å¸¸ç”¨çš„æ–¹æ³•ï¼ˆåŠŸèƒ½ï¼‰</p><ul><li>1ï¼‰.format()   &#x2F;&#x2F;å¯ä»¥æŠŠæ—¶é—´æˆ³Dateæ ¼å¼åŒ–æˆæŒ‡å®šçš„èŒƒå¼ï¼ˆæ ¼å¼ï¼‰å­—ç¬¦ä¸²</li><li>2ï¼‰.parse()   &#x2F;&#x2F;å¯ä»¥æŠŠç¬¦åˆèŒƒå¼çš„å­—ç¬¦ä¸²è§£ææˆä¸€ä¸ªDateå¯¹è±¡</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.ParseException;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Date01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ParseException &#123;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. è·å–å½“å‰ç³»ç»Ÿæ—¶é—´</span><br>        <span class="hljs-comment">//2. è¿™é‡Œçš„Date ç±»æ˜¯åœ¨java.utilåŒ…</span><br>        <span class="hljs-comment">//3. é»˜è®¤è¾“å‡ºçš„æ—¥æœŸæ ¼å¼æ˜¯å›½å¤–çš„æ–¹å¼, å› æ­¤é€šå¸¸éœ€è¦å¯¹æ ¼å¼è¿›è¡Œè½¬æ¢</span><br>        <span class="hljs-type">Date</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(); <span class="hljs-comment">//è·å–å½“å‰ç³»ç»Ÿæ—¶é—´</span><br>        System.out.println(<span class="hljs-string">&quot;å½“å‰æ—¥æœŸ=&quot;</span> + d1);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">9234567</span>); <span class="hljs-comment">//é€šè¿‡æŒ‡å®šæ¯«ç§’æ•°å¾—åˆ°æ—¶é—´</span><br>        System.out.println(<span class="hljs-string">&quot;d2=&quot;</span> + d2); <span class="hljs-comment">//è·å–æŸä¸ªæ—¶é—´å¯¹åº”çš„æ¯«ç§’æ•°</span><br><br>        <span class="hljs-comment">//SimpleDateFormat</span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. åˆ›å»º SimpleDateFormatå¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®šç›¸åº”çš„æ ¼å¼</span><br>        <span class="hljs-comment">//2. è¿™é‡Œçš„æ ¼å¼ä½¿ç”¨çš„å­—æ¯æ˜¯è§„å®šå¥½ï¼Œä¸èƒ½ä¹±å†™</span><br>        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyyå¹´MMæœˆddæ—¥ hh:mm:ss E&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> sdf.format(d1); <span class="hljs-comment">// format:å°†æ—¥æœŸè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>        System.out.println(<span class="hljs-string">&quot;å½“å‰æ—¥æœŸ=&quot;</span> + format);<br><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. å¯ä»¥æŠŠä¸€ä¸ªæ ¼å¼åŒ–çš„String è½¬æˆå¯¹åº”çš„ Date</span><br>        <span class="hljs-comment">//2. å¾—åˆ°Date ä»ç„¶åœ¨è¾“å‡ºæ—¶ï¼Œè¿˜æ˜¯æŒ‰ç…§å›½å¤–çš„å½¢å¼ï¼Œå¦‚æœå¸Œæœ›æŒ‡å®šæ ¼å¼è¾“å‡ºï¼Œéœ€è¦è½¬æ¢</span><br>        <span class="hljs-comment">//3. åœ¨æŠŠ String -&gt; Date ï¼Œ ä½¿ç”¨çš„ sdf æ ¼å¼éœ€è¦å’Œä½ ç»™çš„Stringçš„æ ¼å¼ä¸€æ ·ï¼Œå¦åˆ™ä¼šæŠ›å‡ºè½¬æ¢å¼‚å¸¸</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1996å¹´01æœˆ01æ—¥ 10:20:30 æ˜ŸæœŸä¸€&quot;</span>;<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">parse</span> <span class="hljs-operator">=</span> sdf.parse(s);<br>        System.out.println(<span class="hljs-string">&quot;parse=&quot;</span> + sdf.format(parse));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¬¬äºŒä»£æ—¥æœŸç±»"><a href="#ç¬¬äºŒä»£æ—¥æœŸç±»" class="headerlink" title="ç¬¬äºŒä»£æ—¥æœŸç±»"></a>ç¬¬äºŒä»£æ—¥æœŸç±»</h4><p>ç¬¬äºŒä»£æ—¥æœŸç±»ï¼Œä¸»è¦å°±æ˜¯ Calendar ç±»ï¼ˆæ—¥å†ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calendar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>,Cloneable,Comparable&lt;Calendar&gt;<br></code></pre></td></tr></table></figure><p>Calendar ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸ºç‰¹å®šç¬é—´ä¸ä¸€ç»„è¯¸å¦‚ YEARã€MONTHã€DAY_OF|MONTH\HOUR ç­‰ æ—¥å†å­—æ®µ ä¹‹é—´çš„è½¬æ¢æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œå¹¶ä¸ºæ“ä½œæ—¥å†å­—æ®µï¼ˆä¾‹å¦‚è·å¾—ä¸‹æ˜ŸæœŸçš„æ—¥æœŸï¼‰æä¾›äº†ä¸€äº›æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Calendar;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calendar_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. Calendaræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œ å¹¶ä¸”æ„é€ å™¨æ˜¯private</span><br>        <span class="hljs-comment">//2. å¯ä»¥é€šè¿‡ getInstance() æ¥è·å–å®ä¾‹</span><br>        <span class="hljs-comment">//3. æä¾›å¤§é‡çš„æ–¹æ³•å’Œå­—æ®µæä¾›ç»™ç¨‹åºå‘˜</span><br>        <span class="hljs-comment">//4. Calendaræ²¡æœ‰æä¾›å¯¹åº”çš„æ ¼å¼åŒ–çš„ç±»ï¼Œå› æ­¤éœ€è¦ç¨‹åºå‘˜è‡ªå·±ç»„åˆæ¥è¾“å‡º(çµæ´»)</span><br>        <span class="hljs-comment">//5. å¦‚æœæˆ‘ä»¬éœ€è¦æŒ‰ç…§ 24å°æ—¶è¿›åˆ¶æ¥è·å–æ—¶é—´ï¼Œ Calendar.HOUR ==æ”¹æˆ=&gt; Calendar.HOUR_OF_DAY</span><br>        <span class="hljs-type">Calendar</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> Calendar.getInstance(); <span class="hljs-comment">//åˆ›å»ºæ—¥å†ç±»å¯¹è±¡//æ¯”è¾ƒç®€å•ï¼Œè‡ªç”±</span><br>        System.out.println(<span class="hljs-string">&quot;c=&quot;</span> + c);<br>        <span class="hljs-comment">//2.è·å–æ—¥å†å¯¹è±¡çš„æŸä¸ªæ—¥å†å­—æ®µ</span><br>        System.out.println(<span class="hljs-string">&quot;å¹´ï¼š&quot;</span> + c.get(Calendar.YEAR));<br>        <span class="hljs-comment">// è¿™é‡Œä¸ºä»€ä¹ˆè¦ + 1, å› ä¸ºCalendar è¿”å›æœˆæ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ 0 å¼€å§‹ç¼–å·</span><br>        System.out.println(<span class="hljs-string">&quot;æœˆï¼š&quot;</span> + (c.get(Calendar.MONTH) + <span class="hljs-number">1</span>));<br>        System.out.println(<span class="hljs-string">&quot;æ—¥ï¼š&quot;</span> + c.get(Calendar.DAY_OF_MONTH));<br>        System.out.println(<span class="hljs-string">&quot;å°æ—¶ï¼š&quot;</span> + c.get(Calendar.HOUR));<br>        System.out.println(<span class="hljs-string">&quot;åˆ†é’Ÿï¼š&quot;</span> + c.get(Calendar.MINUTE));<br>        System.out.println(<span class="hljs-string">&quot;ç§’ï¼š&quot;</span> + c.get(Calendar.SECOND));<br>        <span class="hljs-comment">//Calender æ²¡æœ‰ä¸“é—¨çš„æ ¼å¼åŒ–æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦ç¨‹åºå‘˜è‡ªå·±æ¥ç»„åˆæ˜¾ç¤º</span><br>        System.out.println(c.get(Calendar.YEAR) + <span class="hljs-string">&quot;-&quot;</span> + (c.get(Calendar.MONTH) + <span class="hljs-number">1</span>) + <span class="hljs-string">&quot;-&quot;</span> + c.get(Calendar.DAY_OF_MONTH) +<br>                <span class="hljs-string">&quot; &quot;</span> + c.get(Calendar.HOUR_OF_DAY) + <span class="hljs-string">&quot;:&quot;</span> + c.get(Calendar.MINUTE) + <span class="hljs-string">&quot;:&quot;</span> + c.get(Calendar.SECOND) );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å‰ä¸¤ä»£æ—¥æœŸç±»çš„ä¸è¶³"><a href="#å‰ä¸¤ä»£æ—¥æœŸç±»çš„ä¸è¶³" class="headerlink" title="å‰ä¸¤ä»£æ—¥æœŸç±»çš„ä¸è¶³"></a>å‰ä¸¤ä»£æ—¥æœŸç±»çš„ä¸è¶³</h4><p>JDK 1.0ä¸­åŒ…å«äº†ä¸€ä¸ª java.util.Date ç±»ï¼Œä½†æ˜¯å®ƒçš„å¤§å¤šæ•°æ–¹æ³•å·²ç»åœ¨ JDK 1.1 å¼•å…¥ Calendar ç±»ä¹‹åå°±è¢«å¼ƒç”¨äº†ã€‚</p><p>è€Œ Calendar ä¹Ÿå­˜åœ¨é—®é¢˜ï¼š</p><ul><li>å¯å˜æ€§ï¼šåƒæ—¥æœŸå’Œæ—¶é—´è¿™æ ·çš„ç±»åº”è¯¥æ˜¯ä¸å¯å˜çš„</li><li>åç§»æ€§ï¼šDate ä¸­çš„å¹´ä»½æ˜¯ä» 1900 å¼€å§‹çš„ï¼Œè€Œæœˆä»½éƒ½ä» 0 å¼€å§‹</li><li>æ ¼å¼åŒ–ï¼šæ ¼å¼åŒ–åªå¯¹ Date æœ‰ç”¨ï¼ŒCalendar åˆ™ä¸è¡Œ</li><li>æ­¤å¤–ï¼Œå®ƒä»¬ä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸èƒ½å¤„ç†é—°ç§’ç­‰ï¼ˆæ¯éš”ä¸¤å¤©ï¼Œå¤šå‡º 1 sï¼‰</li></ul><h4 id="ç¬¬ä¸‰ä»£æ—¥æœŸç±»"><a href="#ç¬¬ä¸‰ä»£æ—¥æœŸç±»" class="headerlink" title="ç¬¬ä¸‰ä»£æ—¥æœŸç±»"></a>ç¬¬ä¸‰ä»£æ—¥æœŸç±»</h4><p>LocalDateï¼ˆæ—¥æœŸ&#x2F;å¹´æœˆæ—¥ï¼‰ã€LocalTimeï¼ˆæ—¶é—´&#x2F;æ—¶åˆ†ç§’ï¼‰ã€LocalDateTimeï¼ˆæ—¥æœŸæ—¶é—´&#x2F;å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰JDK8 åŠ å…¥</p><ul><li>LocalDate åªåŒ…å«æ—¥æœŸï¼Œå¯ä»¥è·å–æ—¥æœŸå­—æ®µ</li><li>LocalTime åªåŒ…å«æ—¶é—´ï¼Œå¯ä»¥è·å–æ—¶é—´å­—æ®µ</li><li>LocalDateTime åŒ…å«æ—¥æœŸ+æ—¶é—´ï¼Œå¯ä»¥è·å–æ—¥æœŸå’Œæ—¶é—´å­—æ®µ</li></ul><p><strong>ç¬¬ä¸‰ä»£æ—¥æœŸç±»æ›´å¤šæ–¹æ³•</strong></p><ul><li>MonthDayç±»ï¼šæ£€æŸ¥é‡å¤äº‹ä»¶</li><li>æ˜¯å¦æ˜¯é—°å¹´</li><li>å¢åŠ æ—¥æœŸçš„æŸä¸ªéƒ¨åˆ†</li><li>ä½¿ç”¨plusæ–¹æ³•æµ‹è¯•å¢åŠ æ—¶é—´çš„æŸä¸ªéƒ¨åˆ†</li><li>ä½¿ç”¨minusæ–¹æ³•æµ‹è¯•æŸ¥çœ‹ä¸€å¹´å‰å’Œä¸€å¹´åçš„æ—¥æœŸ</li><li>å…¶ä»–çš„æ–¹æ³•ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œå†æŸ¥çœ‹APIä½¿ç”¨å³å¯</li></ul><p><strong>DateTimeFormatter æ ¼å¼æ—¥æœŸç±»</strong></p><p>ç±»ä¼¼äº SimpleDateFormat</p><p>DateTimeFormat dtf &#x3D; DateTimeFormatter.ofPattern(æ ¼å¼);</p><p>String str &#x3D; dtf.format(æ—¥æœŸå¯¹è±¡);</p><p>DateTimeFormatter dateTimeFormatter &#x3D; DateTimeFormatter.ofPattern(â€œyyyy-MM-dd HH:mm:ssâ€);</p><p>æ¡ˆä¾‹æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.time.LocalDate;<br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><span class="hljs-keyword">import</span> java.time.LocalTime;<br><span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalDate_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ç¬¬ä¸‰ä»£æ—¥æœŸ</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨now() è¿”å›è¡¨ç¤ºå½“å‰æ—¥æœŸæ—¶é—´çš„ å¯¹è±¡</span><br>        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">ldt</span> <span class="hljs-operator">=</span> LocalDateTime.now(); <span class="hljs-comment">//LocalDate.now();//LocalTime.now()</span><br>        System.out.println(ldt);<br><br>        <span class="hljs-comment">//2. ä½¿ç”¨DateTimeFormatter å¯¹è±¡æ¥è¿›è¡Œæ ¼å¼åŒ–</span><br>        <span class="hljs-comment">// åˆ›å»º DateTimeFormatterå¯¹è±¡</span><br>        <span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">dateTimeFormatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> dateTimeFormatter.format(ldt);<br>        System.out.println(<span class="hljs-string">&quot;æ ¼å¼åŒ–çš„æ—¥æœŸ=&quot;</span> + format);<br><br>        System.out.println(<span class="hljs-string">&quot;å¹´=&quot;</span> + ldt.getYear());<br>        System.out.println(<span class="hljs-string">&quot;æœˆ=&quot;</span> + ldt.getMonth());<br>        System.out.println(<span class="hljs-string">&quot;æœˆ=&quot;</span> + ldt.getMonthValue());<br>        System.out.println(<span class="hljs-string">&quot;æ—¥=&quot;</span> + ldt.getDayOfMonth());<br>        System.out.println(<span class="hljs-string">&quot;æ—¶=&quot;</span> + ldt.getHour());<br>        System.out.println(<span class="hljs-string">&quot;åˆ†=&quot;</span> + ldt.getMinute());<br>        System.out.println(<span class="hljs-string">&quot;ç§’=&quot;</span> + ldt.getSecond());<br><br>        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> LocalDate.now(); <span class="hljs-comment">//å¯ä»¥è·å–å¹´æœˆæ—¥</span><br>        <span class="hljs-type">LocalTime</span> <span class="hljs-variable">now2</span> <span class="hljs-operator">=</span> LocalTime.now();<span class="hljs-comment">//è·å–åˆ°æ—¶åˆ†ç§’</span><br><br>        <span class="hljs-comment">//æä¾› plus å’Œ minusæ–¹æ³•å¯ä»¥å¯¹å½“å‰æ—¶é—´è¿›è¡ŒåŠ æˆ–è€…å‡</span><br>        <span class="hljs-comment">//çœ‹çœ‹890å¤©åï¼Œæ˜¯ä»€ä¹ˆæ—¶å€™ æŠŠ å¹´æœˆæ—¥-æ—¶åˆ†ç§’</span><br>        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">localDateTime</span> <span class="hljs-operator">=</span> ldt.plusDays(<span class="hljs-number">890</span>);<br>        System.out.println(<span class="hljs-string">&quot;890å¤©å=&quot;</span> + dateTimeFormatter.format(localDateTime));<br><br>        <span class="hljs-comment">//çœ‹çœ‹åœ¨ 3456åˆ†é’Ÿå‰æ˜¯ä»€ä¹ˆæ—¶å€™ï¼ŒæŠŠ å¹´æœˆæ—¥-æ—¶åˆ†ç§’è¾“å‡º</span><br>        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">localDateTime2</span> <span class="hljs-operator">=</span> ldt.minusMinutes(<span class="hljs-number">3456</span>);<br>        System.out.println(<span class="hljs-string">&quot;3456åˆ†é’Ÿå‰ æ—¥æœŸ=&quot;</span> + dateTimeFormatter.format(localDateTime2));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Instant-æ—¶é—´æˆ³"><a href="#Instant-æ—¶é—´æˆ³" class="headerlink" title="Instant æ—¶é—´æˆ³"></a>Instant æ—¶é—´æˆ³</h4><p>ç±»ä¼¼äº Date</p><p>æä¾›äº†ä¸€ç³»åˆ—å’Œ Date ç±»è½¬æ¢çš„æ–¹å¼</p><p>Instant â€“&gt; Date</p><p>Date date &#x3D; Date.form(instant);</p><p>Date â€“&gt; Instant</p><p>Instant instant &#x3D; date.toInstant();</p><p>æ¡ˆä¾‹æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.time.Instant;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Instant_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.é€šè¿‡ é™æ€æ–¹æ³• now() è·å–è¡¨ç¤ºå½“å‰æ—¶é—´æˆ³çš„å¯¹è±¡</span><br>        <span class="hljs-type">Instant</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> Instant.now();<br>        System.out.println(now);<br>        <span class="hljs-comment">//2. é€šè¿‡ from å¯ä»¥æŠŠ Instantè½¬æˆ Date</span><br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> Date.from(now);<br>        <span class="hljs-comment">//3. é€šè¿‡ dateçš„toInstant() å¯ä»¥æŠŠ date è½¬æˆInstantå¯¹è±¡</span><br>        <span class="hljs-type">Instant</span> <span class="hljs-variable">instant</span> <span class="hljs-operator">=</span> date.toInstant();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.ParseException;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Calendar;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AboutDateAndTime</span> &#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ParseException &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * è®°å½•äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ï¼šDate  æ—¶é—´æˆ³</span><br><span class="hljs-comment"> * ä»1970-1-1 0ï¼š0ï¼š0 å¼€å§‹åˆ°ç°åœ¨å·²ç»ç»çš„æ¯«ç§’æ•°</span><br><span class="hljs-comment"> * long ç±»å‹çš„é•¿æ•´æ•°</span><br><span class="hljs-comment"> * yyyy-mm-dd hh:mm:ss</span><br><span class="hljs-comment"> * SimpleDateFormat ç±»</span><br><span class="hljs-comment"> * æä¾›ä¸¤å¸¸ç”¨çš„æ–¹æ³•ï¼ˆåŠŸèƒ½ï¼‰</span><br><span class="hljs-comment"> * 1ï¼‰.format() å¯ä»¥æŠŠæ—¶é—´æˆ³Dateæ ¼å¼åŒ–æˆæŒ‡å®šçš„èŒƒå¼ï¼ˆæ ¼å¼ï¼‰å­—ç¬¦ä¸²</span><br><span class="hljs-comment">   2ï¼‰.parse() å¯ä»¥æŠŠç¬¦åˆèŒƒå¼çš„å­—ç¬¦ä¸²è§£ææˆä¸€ä¸ªDateå¯¹è±¡ </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment"> * Calendar æ—¥å†å¯¹è±¡</span><br><span class="hljs-comment"> * ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªæŒ‡å‘ä»»æ„æ—¶é—´æˆ³çš„æ—¥å†å¯¹è±¡</span><br><span class="hljs-comment"> * å®ƒæä¾›äº†éå¸¸æ–¹ä¾¿çš„æ—¶é—´å’Œæ—¥æœŸè®¡ç®—æ–¹æ³•</span><br><span class="hljs-comment"> * add()</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> */</span><br><br>  <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>  System.out.println(date.getTime());  <span class="hljs-comment">//1663403451711</span><br>  <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>          System.out.println(sdf.format(date));  <span class="hljs-comment">//2022-09-17</span><br>         <span class="hljs-comment">// Scanner sc = new Scanner(System.in);</span><br>         <span class="hljs-comment">// System.out.println(&quot;è¯·è¾“å…¥yyyy-mm-dd æ—¶é—´èŒƒå¼çš„å­—ç¬¦ä¸²&quot;);</span><br>         <span class="hljs-comment">// String s =sc.nextLine();</span><br>         <span class="hljs-comment">// Date myDate = sdf.parse(s);</span><br>          <span class="hljs-type">Calendar</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span>  Calendar.getInstance(); <span class="hljs-comment">//é™æ€å·¥å‚æ–¹æ³•æ„æˆå¯¹è±¡</span><br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-17</span><br>          cl.add(cl.DAY_OF_YEAR, <span class="hljs-number">1</span>);  <span class="hljs-comment">// é—°å¹´é—®é¢˜</span><br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-18</span><br>          cl.set(cl.DAY_OF_WEEK, cl.SATURDAY);<br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-24</span><br>          cl.add(cl.DAY_OF_YEAR, -<span class="hljs-number">7</span>);<br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-17</span><br>          System.out.println(cl.get(cl.MONTH));  <span class="hljs-comment">//8</span><br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p>å‰é¢æˆ‘ä»¬ä¿å­˜å¤šä¸ªæ•°æ®ä½¿ç”¨çš„æ˜¯æ•°ç»„ï¼Œè€Œæ•°ç»„æœ‰ä¸è¶³çš„åœ°æ–¹ï¼š</p><ul><li>é•¿åº¦å¼€å§‹æ—¶å¿…é¡»æŒ‡å®šï¼Œè€Œä¸”ä¸€æ—¦æŒ‡å®šï¼Œä¸èƒ½æ›´æ”¹</li><li>ä¿å­˜çš„å¿…é¡»ä¸ºåŒä¸€ç±»å‹çš„å…ƒç´ </li><li>ä½¿ç”¨æ•°ç»„è¿›è¡Œå¢åŠ &#x2F;åˆ é™¤å…ƒç´ æ—¶æ¯”è¾ƒéº»çƒ¦</li></ul><p><strong>é›†åˆï¼š</strong></p><ul><li>å¯ä»¥åŠ¨æ€ä¿å­˜ä»»æ„å¤šä¸ªå¯¹è±¡ï¼ˆå¯ä¸åŒç±»å‹ï¼‰ï¼Œä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿</li><li>æä¾›äº†ä¸€ç³»åˆ—æ–¹ä¾¿æ“ä½œå¯¹è±¡çš„æ–¹æ³•ï¼šaddã€removeã€setã€get ç­‰</li></ul><p><strong>é›†åˆçš„æ¡†æ¶ä½“ç³»ï¼š</strong></p><p>Java çš„é›†åˆç±»å¾ˆå¤šï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå¦‚å›¾ ï¼š[èƒŒä¸‹æ¥]</p><p> <img src="image-20220912090212994.png" alt="image-20220912090212994" style="zoom:33%;" /><img src="image-20220912090402260.png" alt="image-20220912090402260" style="zoom:44%;" /></p><p>â€‹å•åˆ—é›†åˆåŒåˆ—é›†åˆ</p><h3 id="Collection-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"><a href="#Collection-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Collection æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"></a>Collection æ¥å£å’Œå¸¸ç”¨æ–¹æ³•</h3><h4 id="Collection-æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹"><a href="#Collection-æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹" class="headerlink" title="Collection æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹"></a>Collection æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Collection</span>&lt;E&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Iterable</span>&lt;E&gt;<br></code></pre></td></tr></table></figure><ul><li><p>Collection å®ç°å­ç±»å¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ Object</p></li><li><p>æœ‰äº› Collection çš„å®ç°ç±»ï¼Œå¯ä»¥å­˜æ”¾é‡å¤çš„å…ƒç´ ï¼Œæœ‰äº›ä¸å¯ä»¥</p></li><li><p>æœ‰äº› Collection çš„å®ç°ç±»ï¼Œæœ‰äº›æ˜¯æœ‰åºçš„ï¼ˆListï¼‰ï¼Œæœ‰äº›ä¸æ˜¯æœ‰åºçš„ï¼ˆSetï¼‰</p></li><li><p>Collection æ¥å£æ²¡æœ‰ç›´æ¥çš„å®ç°å­ç±»ï¼Œæ˜¯é€šè¿‡å®ƒçš„å­æ¥å£ Set å’Œ List æ¥å®ç°çš„</p></li><li><p>æ–¹æ³•ï¼š</p><ul><li>addï¼šæ·»åŠ å•ä¸ªå…ƒç´ </li><li>removeï¼šåˆ é™¤æŒ‡å®šå…ƒç´ </li><li>containsï¼šæŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨</li><li>sizeï¼šè·å–å…ƒç´ ä¸ªæ•°</li><li>isEmptyï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©º</li><li>clearï¼šæ¸…ç©º</li><li>addAllï¼šæ·»åŠ å¤šä¸ªå…ƒç´ </li><li>containsALLï¼šæŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨</li><li>removeAllï¼šåˆ é™¤å¤šä¸ªå…ƒç´ </li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä»¥Listæ¥æ¼”ç¤º</span><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionMethod</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><span class="hljs-comment">//        add:æ·»åŠ å•ä¸ªå…ƒç´ </span><br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-number">10</span>);<span class="hljs-comment">//ä¼šè‡ªåŠ¨è£…ç®±ä¸ºlist.add(new Integer(10))</span><br>        list.add(<span class="hljs-literal">true</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        remove:åˆ é™¤æŒ‡å®šå…ƒç´ </span><br>        list.remove(<span class="hljs-number">0</span>);<span class="hljs-comment">//åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span><br>        list.remove(<span class="hljs-literal">true</span>);<span class="hljs-comment">//æŒ‡å®šåˆ é™¤æŸä¸ªå…ƒç´ </span><br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        contains:æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨</span><br>        System.out.println(list.contains(<span class="hljs-string">&quot;jack&quot;</span>));<span class="hljs-comment">//T</span><br><span class="hljs-comment">//        size:è·å–å…ƒç´ ä¸ªæ•°</span><br>        System.out.println(list.size());<span class="hljs-comment">//2</span><br><span class="hljs-comment">//        isEmpty:åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br>        System.out.println(list.isEmpty());<span class="hljs-comment">//F</span><br><span class="hljs-comment">//        clear:æ¸…ç©º</span><br>        list.clear();<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        addAll:æ·»åŠ å¤šä¸ªå…ƒç´ </span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list2.add(<span class="hljs-string">&quot;çº¢æ¥¼æ¢¦&quot;</span>);<br>        list2.add(<span class="hljs-string">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span>);<br>        list.addAll(list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        containsAll:æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨</span><br>        System.out.println(list.containsAll(list2));<span class="hljs-comment">//T</span><br><span class="hljs-comment">//        removeAllï¼šåˆ é™¤å¤šä¸ªå…ƒç´ </span><br>        list.add(<span class="hljs-string">&quot;èŠæ–‹&quot;</span>);<br>        list.removeAll(list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<span class="hljs-comment">//[èŠæ–‹]</span><br><span class="hljs-comment">//        è¯´æ˜ï¼šä»¥ArrayListå®ç°ç±»æ¥æ¼”ç¤º.</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Collection-æ¥å£éå†å…ƒç´ æ–¹å¼"><a href="#Collection-æ¥å£éå†å…ƒç´ æ–¹å¼" class="headerlink" title="Collection æ¥å£éå†å…ƒç´ æ–¹å¼"></a>Collection æ¥å£éå†å…ƒç´ æ–¹å¼</h4><p><strong>æ–¹å¼1ï¼šä½¿ç”¨ Iteratorï¼ˆè¿­ä»£å™¨ï¼‰</strong></p><ul><li><p>Iterator å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼Œä¸»è¦ç”¨äºéå† Collection é›†åˆä¸­çš„å…ƒç´ </p></li><li><p>æ‰€æœ‰å®ç°äº† Collection æ¥å£çš„é›†åˆç±»éƒ½æœ‰ä¸€ä¸ª iterator() æ–¹æ³•ï¼Œç”¨ä»¥è¿”å›ä¸€ä¸ªå®ç°äº† Iterator æ¥å£çš„å¯¹è±¡ï¼Œå³å¯ä»¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨</p></li><li><p>Iterator çš„ç»“æ„</p> <img src="image-20220912090212994.png" alt="image-20220912090212994" style="zoom:33%;" /></li><li><p>Iterator ä»…ç”¨äºéå†é›†åˆï¼ŒIterator æœ¬èº«å¹¶ä¸å­˜æ”¾å¯¹è±¡</p></li><li><p>è¿­ä»£å™¨çš„æ‰§è¡ŒåŸç†ï¼š</p> <img src="image-20220912104049727.png" alt="image-20220912104049727" style="zoom:50%;" /></li><li><p>Iterator æ¥å£çš„æ–¹æ³•ï¼š</p> <img src="image-20220912104348570.png" alt="image-20220912104348570" style="zoom:50%;" /></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionIterator</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span>, <span class="hljs-string">&quot;ç½—è´¯ä¸­&quot;</span>, <span class="hljs-number">10.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;å°æé£åˆ€&quot;</span>, <span class="hljs-string">&quot;å¤é¾™&quot;</span>, <span class="hljs-number">5.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;çº¢æ¥¼æ¢¦&quot;</span>, <span class="hljs-string">&quot;æ›¹é›ªèŠ¹&quot;</span>, <span class="hljs-number">34.6</span>));<br>        <span class="hljs-comment">//System.out.println(&quot;col=&quot; + col);</span><br>        <span class="hljs-comment">//ç°åœ¨è€å¸ˆå¸Œæœ›èƒ½å¤Ÿéå† colé›†åˆ</span><br>        <span class="hljs-comment">//1. å…ˆå¾—åˆ° col å¯¹åº”çš„ è¿­ä»£å™¨</span><br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> col.iterator();<br>        <span class="hljs-comment">//2. ä½¿ç”¨whileå¾ªç¯éå†</span><br><span class="hljs-comment">//        while (iterator.hasNext()) &#123;//åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ•°æ®</span><br><span class="hljs-comment">//            //è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç±»å‹æ˜¯Object</span><br><span class="hljs-comment">//            Object obj = iterator.next();</span><br><span class="hljs-comment">//            System.out.println(&quot;obj=&quot; + obj);</span><br><span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">//å¿«æ·é”®å¿«é€Ÿç”Ÿæˆ while =&gt; itit</span><br>        <span class="hljs-comment">//æ˜¾ç¤ºæ‰€æœ‰çš„å¿«æ·é”®çš„çš„å¿«æ·é”® ctrl + j</span><br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;obj=&quot;</span> + obj);<br>        &#125;<br>        <br>        <span class="hljs-comment">//3. å½“é€€å‡ºwhileå¾ªç¯å , è¿™æ—¶iteratorè¿­ä»£å™¨ï¼ŒæŒ‡å‘æœ€åçš„å…ƒç´ </span><br>        <span class="hljs-comment">//   iterator.next();//NoSuchElementException</span><br>        <span class="hljs-comment">//4. å¦‚æœå¸Œæœ›å†æ¬¡éå†ï¼Œéœ€è¦é‡ç½®æˆ‘ä»¬çš„è¿­ä»£å™¨</span><br>        iterator = col.iterator();<br>        System.out.println(<span class="hljs-string">&quot;===ç¬¬äºŒæ¬¡éå†===&quot;</span>);<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;obj=&quot;</span> + obj);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String author;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, String author, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.author = author;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAuthor</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> author;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAuthor</span><span class="hljs-params">(String author)</span> &#123;<span class="hljs-built_in">this</span>.author = author;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> price;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> &#123;<span class="hljs-built_in">this</span>.price = price;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Book&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, author=&#x27;&quot;</span> + author + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ–¹å¼2ï¼šå¢å¼º for</strong></p><p>å¢å¼º for å¾ªç¯ï¼Œå¯ä»¥ä»£æ›¿ iterator è¿­ä»£å™¨ï¼Œç‰¹ç‚¹ï¼šå¢å¼º for å°±æ˜¯ç®€åŒ–ç‰ˆçš„ iteratorã€‚</p><p>æœ¬è´¨ä¸€æ ·ã€‚åªèƒ½ç”¨äºéå†é›†åˆæˆ–æ•°ç»„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(å…ƒç´ ç±»å‹ å…ƒç´ å : é›†åˆåæˆ–æ•°ç»„å) &#123;<br><span class="hljs-comment">//è®¿é—®å…ƒç´ </span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionFor</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span>, <span class="hljs-string">&quot;ç½—è´¯ä¸­&quot;</span>, <span class="hljs-number">10.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;å°æé£åˆ€&quot;</span>, <span class="hljs-string">&quot;å¤é¾™&quot;</span>, <span class="hljs-number">5.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;çº¢æ¥¼æ¢¦&quot;</span>, <span class="hljs-string">&quot;æ›¹é›ªèŠ¹&quot;</span>, <span class="hljs-number">34.6</span>));<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨å¢å¼ºfor, åœ¨Collectioné›†åˆ</span><br>        <span class="hljs-comment">//2. å¢å¼ºforï¼Œ åº•å±‚ä»ç„¶æ˜¯è¿­ä»£å™¨</span><br>        <span class="hljs-comment">//3. å¢å¼ºforå¯ä»¥ç†è§£æˆå°±æ˜¯ç®€åŒ–ç‰ˆæœ¬çš„ è¿­ä»£å™¨éå†</span><br>        <span class="hljs-comment">//4. å¿«æ·é”®æ–¹å¼ I</span><br>        <span class="hljs-keyword">for</span> (Object obj : col) &#123;<br>            System.out.println(<span class="hljs-string">&quot;book=&quot;</span> + obj);<br>        &#125;<br>        <span class="hljs-comment">//å¢å¼ºforï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ•°ç»„ä½¿ç”¨</span><br><span class="hljs-comment">//        int[] nums = &#123;1, 8, 10, 90&#125;;</span><br><span class="hljs-comment">//        for (int i : nums) &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;i=&quot; + i);</span><br><span class="hljs-comment">//        &#125;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="List-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"><a href="#List-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•" class="headerlink" title="List æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"></a>List æ¥å£å’Œå¸¸ç”¨æ–¹æ³•</h3><ul><li>List é›†åˆç±»ä¸­å…ƒç´ æœ‰åºï¼ˆå³æ·»åŠ é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´ï¼‰ã€ä¸”å¯é‡å¤</li><li>List é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ï¼Œå³æ”¯æŒç´¢å¼•</li><li>List å®¹å™¨ä¸­çš„å…ƒç´ éƒ½å¯¹åº”ä¸€ä¸ªæ•´æ•°å‹çš„åºå·è®°è½½å…¶åœ¨å®¹å™¨ä¸­çš„ä½ç½®ï¼Œå¯ä»¥æ ¹æ®åºå·å­˜å–å®¹å™¨ä¸­çš„å…ƒç´ </li><li>JDK API ä¸­ List æ¥å£çš„å®ç°ç±» æœ‰ï¼šArrayListã€LinkedListã€Vector ç­‰ï¼ˆè¿™ä¸‰ä¸ªæœ€ä¸ºå¸¸ç”¨ï¼‰</li><li>å¸¸ç”¨æ–¹æ³•ï¼š<ul><li>void add(int index, Object ele)ï¼šåœ¨indexä½ç½®æ’å…¥eleå…ƒç´ </li><li>boolean addAll(int index, Collection eles)ï¼šä»indexä½ç½®å¼€å§‹å°†elesä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥</li><li>Object get(int index)ï¼šè·å–æŒ‡å®šindexä½ç½®çš„å…ƒç´ </li><li>int indexOf(Object obj)ï¼šè¿”å›objåœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®</li><li>int lastIndexOf(Object obj)ï¼šè¿”å›objåœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®</li><li>Object remove(int index)ï¼šç§»é™¤æŒ‡å®šindexä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ </li><li>Object set(int index, Object ele)ï¼šè®¾ç½®æŒ‡å®šindexä½ç½®çš„å…ƒç´ ä¸ºele , ç›¸å½“äºæ˜¯æ›¿æ¢.</li><li>List subList(int fromIndex, int toIndex)ï¼šè¿”å›ä» fromIndexï¼ˆåŒ…å«ï¼‰åˆ° toIndexï¼ˆä¸å«ï¼‰ä½ç½®çš„å­é›†åˆ</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List_</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1. Listé›†åˆç±»ä¸­å…ƒç´ æœ‰åº(å³æ·»åŠ é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´)ã€ä¸”å¯é‡å¤ [æ¡ˆä¾‹]</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;hsp&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br>        <span class="hljs-comment">//2. Listé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ï¼Œå³æ”¯æŒç´¢å¼•</span><br>        <span class="hljs-comment">//   ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„</span><br>        System.out.println(list.get(<span class="hljs-number">3</span>));<span class="hljs-comment">//hsp</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListMethod</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;å¼ ä¸‰ä¸°&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;è´¾å®ç‰&quot;</span>);<br><span class="hljs-comment">//        void add(int index, Object ele):åœ¨indexä½ç½®æ’å…¥eleå…ƒç´ </span><br><span class="hljs-comment">//        è‹¥ä¸å¡«ç´¢å¼•ï¼Œåˆ™é»˜è®¤æ’å…¥åœ¨æœ«å°¾</span><br>        <span class="hljs-comment">//åœ¨index = 1çš„ä½ç½®æ’å…¥ä¸€ä¸ªå¯¹è±¡</span><br>        list.add(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        boolean addAll(int index, Collection eles):ä»indexä½ç½®å¼€å§‹å°†elesä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list2.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list2.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.addAll(<span class="hljs-number">1</span>, list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        Object get(int index):è·å–æŒ‡å®šindexä½ç½®çš„å…ƒç´ </span><br>        <span class="hljs-comment">//è®²è¿‡äº†ï¼Œè·³è¿‡</span><br><span class="hljs-comment">//        int indexOf(Object obj):è¿”å›objåœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®</span><br>        System.out.println(list.indexOf(<span class="hljs-string">&quot;tom&quot;</span>));<span class="hljs-comment">//2</span><br><span class="hljs-comment">//        int lastIndexOf(Object obj):è¿”å›objåœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®</span><br>        list.add(<span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br>        System.out.println(list.lastIndexOf(<span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>));<br><span class="hljs-comment">//        Object remove(int index):ç§»é™¤æŒ‡å®šindexä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ </span><br>        list.remove(<span class="hljs-number">0</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        Object set(int index, Object ele):è®¾ç½®æŒ‡å®šindexä½ç½®çš„å…ƒç´ ä¸ºele , ç›¸å½“äºæ˜¯æ›¿æ¢.</span><br>        list.set(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ç›ä¸½&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        List subList(int fromIndex, int toIndex):è¿”å›ä»fromIndexåˆ°toIndexä½ç½®çš„å­é›†åˆ</span><br>        <span class="hljs-comment">// æ³¨æ„è¿”å›çš„å­é›†åˆ fromIndex &lt;= subList &lt; toIndex</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">returnlist</span> <span class="hljs-operator">=</span> list.subList(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>        System.out.println(<span class="hljs-string">&quot;returnlist=&quot;</span> + returnlist);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="List-çš„ä¸‰ç§éå†æ–¹å¼"><a href="#List-çš„ä¸‰ç§éå†æ–¹å¼" class="headerlink" title="List çš„ä¸‰ç§éå†æ–¹å¼"></a>List çš„ä¸‰ç§éå†æ–¹å¼</h4><ul><li><p>æ–¹å¼ä¸€ï¼šä½¿ç”¨ iterator</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Iterator</span> <span class="hljs-variable">iter</span> <span class="hljs-operator">=</span> col.inertaor();<br><span class="hljs-keyword">while</span>(iter.hasNext)&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> iter.next();<br>    System.out.println(o);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼äºŒï¼šä½¿ç”¨å¢å¼º for</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(Object o:col)&#123;<br>    System.out.println(o);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ™®é€š for</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++)&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> list.get(i);<br>    System.out.println(obj);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h4 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListExercise02</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//List list = new ArrayList();</span><br>        <span class="hljs-comment">//List list = new Vector();</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;çº¢æ¥¼æ¢¦&quot;</span>, <span class="hljs-string">&quot;æ›¹é›ªèŠ¹&quot;</span>, <span class="hljs-number">100</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;è¥¿æ¸¸è®°&quot;</span>, <span class="hljs-string">&quot;å´æ‰¿æ©&quot;</span>, <span class="hljs-number">10</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;æ°´æµ’ä¼ &quot;</span>, <span class="hljs-string">&quot;æ–½è€åºµ&quot;</span>, <span class="hljs-number">19</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;ä¸‰å›½&quot;</span>, <span class="hljs-string">&quot;ç½—è´¯ä¸­&quot;</span>, <span class="hljs-number">80</span>));<br>        <span class="hljs-comment">//list.add(new Book(&quot;è¥¿æ¸¸è®°&quot;, &quot;å´æ‰¿æ©&quot;, 10));</span><br><br>        <span class="hljs-comment">//å¦‚ä½•å¯¹é›†åˆè¿›è¡Œæ’åº</span><br>        System.out.println(<span class="hljs-string">&quot;==æ’åºå‰==&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o : list) &#123;System.out.println(o);&#125;<br>        <span class="hljs-comment">//å†’æ³¡æ’åº</span><br>        sort(list);<br>        System.out.println(<span class="hljs-string">&quot;==æ’åºå==&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o : list) &#123;System.out.println(o);&#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">//é™æ€æ–¹æ³•</span><br>    <span class="hljs-comment">//ä»·æ ¼è¦æ±‚æ˜¯ä»å°åˆ°å¤§</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">(List list)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">listSize</span> <span class="hljs-operator">=</span> list.size();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; listSize - <span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; listSize - <span class="hljs-number">1</span> - i; j++) &#123;<br>                <span class="hljs-comment">//å–å‡ºå¯¹è±¡Book å¹¶å‘ä¸‹è½¬å‹</span><br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) list.get(j);<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) list.get(j + <span class="hljs-number">1</span>);<br>                <span class="hljs-keyword">if</span> (book1.getPrice() &gt; book2.getPrice()) &#123;<span class="hljs-comment">//äº¤æ¢</span><br>                    list.set(j, book2);  <span class="hljs-comment">//book1 ä»ç„¶æœ‰å¼•ç”¨ï¼Œä¸ä¼šè¢«å›æ”¶</span><br>                    list.set(j + <span class="hljs-number">1</span>, book1); <span class="hljs-comment">//å› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ArrayList-åº•å±‚ç»“æ„å’Œæºç åˆ†æ"><a href="#ArrayList-åº•å±‚ç»“æ„å’Œæºç åˆ†æ" class="headerlink" title="ArrayList åº•å±‚ç»“æ„å’Œæºç åˆ†æ"></a>ArrayList åº•å±‚ç»“æ„å’Œæºç åˆ†æ</h3><h4 id="ArrayList-æ³¨æ„äº‹é¡¹"><a href="#ArrayList-æ³¨æ„äº‹é¡¹" class="headerlink" title="ArrayList æ³¨æ„äº‹é¡¹"></a>ArrayList æ³¨æ„äº‹é¡¹</h4><ul><li><p>â€œ permits all elements, including null â€, ArrayList å¯ä»¥åŠ å…¥ null, å¹¶ä¸”å¯ä»¥åŠ å…¥å¤šä¸ª</p></li><li><p>ArrayList åº•å±‚æ˜¯ç”±æ•°ç»„æ¥å®ç°æ•°æ®å­˜å‚¨çš„</p></li><li><p>ArrayList åŸºæœ¬ç­‰åŒäº Vector, é™¤äº† ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨ï¼ˆä½†æ‰§è¡Œæ•ˆç‡é«˜ï¼‰ï¼ˆçœ‹æºç ï¼‰</p><p>åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨ ArrayList  ï¼ˆæ²¡æœ‰å®ç° synchronized æ¥å£ï¼‰</p></li></ul><h4 id="ArrayList-çš„åº•å±‚åˆ†æ"><a href="#ArrayList-çš„åº•å±‚åˆ†æ" class="headerlink" title="ArrayList çš„åº•å±‚åˆ†æ"></a>ArrayList çš„åº•å±‚åˆ†æ</h4><ul><li><p>ArrayList ä¸­ç»´æŠ¤äº†ä¸€ä¸ª Object ç±»å‹çš„æ•°ç»„ elementData</p><p>transient Object[] elementData;  &#x2F;&#x2F;transient è¡¨ç¤ºç¬é—´ã€çŸ­æš‚çš„ï¼Œè¡¨ç¤ºè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–</p></li><li><p>å½“åˆ›å»º ArrayList å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ—¶æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸º0ï¼Œ</p><p>ç¬¬1æ¬¡æ·»åŠ ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 10ï¼Œå¦‚éœ€å†æ¬¡æ‰©å®¹ï¼Œåˆ™æ‰©å®¹ elementData ä¸º1.5å€</p></li><li><p>å¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå¤§å°çš„æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸ºæŒ‡å®šå¤§å°ï¼Œ</p><p>å¦‚éœ€æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹ elementData ä¸º1.5å€</p></li><li><p>æºç åˆ†æï¼š</p></li></ul><img src="image-20220912170319607.png" alt="image-20220912170319607" style="zoom: 80%;" /><img src="image-20220912170402225.png" alt="image-20220912170402225" style="zoom:87%;" /><h3 id="Vectoer-åº•å±‚ç»“æ„å’Œæºç åˆ†æ"><a href="#Vectoer-åº•å±‚ç»“æ„å’Œæºç åˆ†æ" class="headerlink" title="Vectoer åº•å±‚ç»“æ„å’Œæºç åˆ†æ"></a>Vectoer åº•å±‚ç»“æ„å’Œæºç åˆ†æ</h3><ul><li><p>vector åº•å±‚ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„    protected Object[] elementData;</p></li><li><p>Vector æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œå³çº¿ç¨‹å®‰å…¨ï¼ŒVector ç±»çš„æ“ä½œæ–¹æ³•å¸¦æœ‰ synchronized</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> sysnchronized E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>&#123;<br>    <span class="hljs-keyword">if</span>(index &gt;= elementCount)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayIndexOutOfBoundsException</span>(index);<br>    <span class="hljs-keyword">return</span> elementData(index);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨å¼€å‘ä¸­ï¼Œéœ€è¦çº¿ç¨‹åŒæ­¥å®‰å…¨æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ Vector</p></li><li><p>æ‰©å®¹è§„åˆ™ï¼š</p><ul><li>å¦‚æœæ˜¯æ— å‚æ„é€ ï¼Œåˆ™ä¼šé»˜è®¤æŒ‡å®šä¸º10ï¼Œå¦‚éœ€å†æ¬¡æ‰©å®¹ã€‚åˆ™æŒ‰ 2 å€æ‰©å®¹</li><li>å¦‚æœæ˜¯æŒ‡å®šå¤§å°ï¼Œåˆ™æ¯æ¬¡ç›´æ¥æŒ‰ 2 å€æ‰©å®¹</li></ul></li><li><p>Vector å’Œ ArrayList çš„æ¯”è¾ƒ</p> <img src="image-20220913142121290.png" alt="image-20220913142121290" style="zoom:50%;" /></li></ul> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ— å‚æ„é€ å™¨</span><br>        <span class="hljs-comment">//æœ‰å‚æ•°çš„æ„é€ </span><br>        <span class="hljs-type">Vector</span> <span class="hljs-variable">vector</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>();<br><span class="hljs-comment">//        Vector vector = new Vector(8);</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            vector.add(i);<br>        &#125;<br>        vector.add(<span class="hljs-number">100</span>);<br>        System.out.println(<span class="hljs-string">&quot;vector=&quot;</span> + vector);<br>        <span class="hljs-comment">//è§£è¯»æºç </span><br>        <span class="hljs-comment">//1. new Vector() åº•å±‚</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public Vector() &#123;</span><br><span class="hljs-comment">                this(10);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         è¡¥å……ï¼šå¦‚æœæ˜¯  Vector vector = new Vector(8);</span><br><span class="hljs-comment">            èµ°çš„æ–¹æ³•:</span><br><span class="hljs-comment">            public Vector(int initialCapacity) &#123;</span><br><span class="hljs-comment">                this(initialCapacity, 0);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         2. vector.add(i)</span><br><span class="hljs-comment">         2.1  //ä¸‹é¢è¿™ä¸ªæ–¹æ³•å°±æ·»åŠ æ•°æ®åˆ°vectoré›†åˆ</span><br><span class="hljs-comment">            public synchronized boolean add(E e) &#123;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">                ensureCapacityHelper(elementCount + 1);</span><br><span class="hljs-comment">                elementData[elementCount++] = e;</span><br><span class="hljs-comment">                return true;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          2.2  //ç¡®å®šæ˜¯å¦éœ€è¦æ‰©å®¹ æ¡ä»¶ ï¼š minCapacity - elementData.length &gt; 0</span><br><span class="hljs-comment">            private void ensureCapacityHelper(int minCapacity) &#123;</span><br><span class="hljs-comment">                // overflow-conscious code</span><br><span class="hljs-comment">                if (minCapacity - elementData.length &gt; 0)</span><br><span class="hljs-comment">                    grow(minCapacity);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          2.3 //å¦‚æœ éœ€è¦çš„æ•°ç»„å¤§å° ä¸å¤Ÿç”¨ï¼Œå°±æ‰©å®¹ , æ‰©å®¹çš„ç®—æ³•</span><br><span class="hljs-comment">              //newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?</span><br><span class="hljs-comment">              //                             capacityIncrement : oldCapacity);</span><br><span class="hljs-comment">              //å°±æ˜¯æ‰©å®¹ä¸¤å€.</span><br><span class="hljs-comment">            private void grow(int minCapacity) &#123;</span><br><span class="hljs-comment">                // overflow-conscious code</span><br><span class="hljs-comment">                int oldCapacity = elementData.length;</span><br><span class="hljs-comment">                int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?</span><br><span class="hljs-comment">                                                 capacityIncrement : oldCapacity);</span><br><span class="hljs-comment">                if (newCapacity - minCapacity &lt; 0)</span><br><span class="hljs-comment">                    newCapacity = minCapacity;</span><br><span class="hljs-comment">                if (newCapacity - MAX_ARRAY_SIZE &gt; 0)</span><br><span class="hljs-comment">                    newCapacity = hugeCapacity(minCapacity);</span><br><span class="hljs-comment">                elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="LinkedList-åº•å±‚ç»“æ„"><a href="#LinkedList-åº•å±‚ç»“æ„" class="headerlink" title="LinkedList åº•å±‚ç»“æ„"></a>LinkedList åº•å±‚ç»“æ„</h3><ul><li>LinkedList åº•å±‚å®ç°äº†åŒå‘é“¾è¡¨å’ŒåŒç«¯é˜Ÿåˆ—ç‰¹ç‚¹</li><li>å¯ä»¥æ·»åŠ ä»»æ„å…ƒç´ ï¼ˆå…ƒç´ å¯ä»¥é‡å¤ï¼Œä¹Ÿå¯ä»¥æ˜¯ null ï¼‰</li><li>çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ²¡æœ‰å®ç°åŒæ­¥</li></ul><h4 id="LinkedList-çš„åº•å±‚æ“ä½œæœºåˆ¶"><a href="#LinkedList-çš„åº•å±‚æ“ä½œæœºåˆ¶" class="headerlink" title="LinkedList çš„åº•å±‚æ“ä½œæœºåˆ¶"></a>LinkedList çš„åº•å±‚æ“ä½œæœºåˆ¶</h4><ul><li>LinkedList åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨</li><li>LinkedList ä¸­ç»´æŠ¤äº†ä¸¤ä¸ªå±æ€§ finst å’Œ last åˆ†åˆ«æŒ‡å‘ é¦–èŠ‚ç‚¹ å’Œ å°¾èŠ‚ç‚¹</li><li>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆNode å¯¹è±¡ï¼‰ï¼Œé‡Œé¢åˆç»´æŠ¤äº† prevã€nextã€item ä¸‰ä¸ªå±æ€§ï¼Œå…¶ä¸­é€šè¿‡ prev æŒ‡å‘å‰ä¸€ä¸ªï¼Œé€šè¿‡ next æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€ç»ˆå®ç°åŒå‘é“¾è¡¨</li><li>æ‰€ä»¥ LinkedList çš„å…ƒç´ çš„ æ·»åŠ å’Œåˆ é™¤ï¼Œä¸æ˜¯é€šè¿‡æ•°ç»„å®Œæˆçš„ï¼Œç›¸å¯¹æ¥è¯´æ•ˆç‡è¾ƒé«˜</li><li>æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„åŒå‘é“¾è¡¨</li></ul><h4 id="LinkedList-ä½¿ç”¨æ¡ˆä¾‹"><a href="#LinkedList-ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="LinkedList ä½¿ç”¨æ¡ˆä¾‹"></a>LinkedList ä½¿ç”¨æ¡ˆä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListCRUD</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">LinkedList</span> <span class="hljs-variable">linkedList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();<br>        linkedList.add(<span class="hljs-number">1</span>);<br>        linkedList.add(<span class="hljs-number">2</span>);<br>        linkedList.add(<span class="hljs-number">3</span>);<br>        System.out.println(<span class="hljs-string">&quot;linkedList=&quot;</span> + linkedList);<br><br>        <span class="hljs-comment">//æ¼”ç¤ºä¸€ä¸ªåˆ é™¤ç»“ç‚¹çš„</span><br>        linkedList.remove(); <span class="hljs-comment">// è¿™é‡Œé»˜è®¤åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªç»“ç‚¹</span><br>        <span class="hljs-comment">//linkedList.remove(2); // åˆ é™¤æŒ‡å®šä½ç½®èŠ‚ç‚¹ï¼ˆä½ç½®ä»0å¼€å§‹ï¼‰</span><br>        System.out.println(<span class="hljs-string">&quot;linkedList=&quot;</span> + linkedList);<br><br>        <span class="hljs-comment">//ä¿®æ”¹æŸä¸ªç»“ç‚¹å¯¹è±¡ï¼ˆä½ç½®ä»0å¼€å§‹ï¼‰</span><br>        linkedList.set(<span class="hljs-number">1</span>, <span class="hljs-number">999</span>);<br>        System.out.println(<span class="hljs-string">&quot;linkedList=&quot;</span> + linkedList);<br><br>        <span class="hljs-comment">//å¾—åˆ°æŸä¸ªç»“ç‚¹å¯¹è±¡ï¼ˆä½ç½®ä»0å¼€å§‹ï¼‰</span><br>        <span class="hljs-comment">//get(1) æ˜¯å¾—åˆ°åŒå‘é“¾è¡¨çš„ç¬¬äºŒä¸ªå¯¹è±¡</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> linkedList.get(<span class="hljs-number">1</span>);<br>        System.out.println(o);<span class="hljs-comment">//999</span><br><br>        <span class="hljs-comment">//LinkedList éå†</span><br>        <span class="hljs-comment">//å› ä¸ºLinkedList æ˜¯ å®ç°äº†Listæ¥å£, éå†æ–¹å¼</span><br>        System.out.println(<span class="hljs-string">&quot;===LinkeListéå†è¿­ä»£å™¨====&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> linkedList.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span>  iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;next=&quot;</span> + next);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;===LinkeListéå†å¢å¼ºfor====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o1 : linkedList) &#123;<br>            System.out.println(<span class="hljs-string">&quot;o1=&quot;</span> + o1);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;===LinkeListéå†æ™®é€šfor====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; linkedList.size(); i++) &#123;<br>            System.out.println(linkedList.get(i));<br>        &#125;<br><br><br>        <span class="hljs-comment">//æºç é˜…è¯».</span><br>        <span class="hljs-comment">/* 1. LinkedList linkedList = new LinkedList();</span><br><span class="hljs-comment">              public LinkedList() &#123;&#125;</span><br><span class="hljs-comment">           2. è¿™æ—¶ linkeList çš„å±æ€§ first = null  last = null</span><br><span class="hljs-comment">           3. æ‰§è¡Œ æ·»åŠ </span><br><span class="hljs-comment">               public boolean add(E e) &#123;</span><br><span class="hljs-comment">                    linkLast(e);</span><br><span class="hljs-comment">                    return true;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            4.å°†æ–°çš„ç»“ç‚¹ï¼ŒåŠ å…¥åˆ°åŒå‘é“¾è¡¨çš„æœ€å</span><br><span class="hljs-comment">             void linkLast(E e) &#123;</span><br><span class="hljs-comment">                final Node&lt;E&gt; l = last;</span><br><span class="hljs-comment">                final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);</span><br><span class="hljs-comment">                last = newNode;</span><br><span class="hljs-comment">                if (l == null)</span><br><span class="hljs-comment">                    first = newNode;</span><br><span class="hljs-comment">                else</span><br><span class="hljs-comment">                    l.next = newNode;</span><br><span class="hljs-comment">                size++;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">          æºç é˜…è¯» linkedList.remove(); // è¿™é‡Œé»˜è®¤åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªç»“ç‚¹</span><br><span class="hljs-comment">          1. æ‰§è¡Œ removeFirst</span><br><span class="hljs-comment">            public E remove() &#123;</span><br><span class="hljs-comment">                return removeFirst();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          2. æ‰§è¡Œ</span><br><span class="hljs-comment">            public E removeFirst() &#123;</span><br><span class="hljs-comment">                final Node&lt;E&gt; f = first;</span><br><span class="hljs-comment">                if (f == null)</span><br><span class="hljs-comment">                    throw new NoSuchElementException();</span><br><span class="hljs-comment">                return unlinkFirst(f);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          3. æ‰§è¡Œ unlinkFirst, å°† f æŒ‡å‘çš„åŒå‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹æ‹¿æ‰</span><br><span class="hljs-comment">            private E unlinkFirst(Node&lt;E&gt; f) &#123;</span><br><span class="hljs-comment">                // assert f == first &amp;&amp; f != null;</span><br><span class="hljs-comment">                final E element = f.item;</span><br><span class="hljs-comment">                final Node&lt;E&gt; next = f.next;</span><br><span class="hljs-comment">                f.item = null;</span><br><span class="hljs-comment">                f.next = null; // help GC</span><br><span class="hljs-comment">                first = next;</span><br><span class="hljs-comment">                if (next == null)</span><br><span class="hljs-comment">                    last = null;</span><br><span class="hljs-comment">                else</span><br><span class="hljs-comment">                    next.prev = null;</span><br><span class="hljs-comment">                size--;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">                return element;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ArrayList-å’Œ-LinkedList-çš„æ¯”è¾ƒ"><a href="#ArrayList-å’Œ-LinkedList-çš„æ¯”è¾ƒ" class="headerlink" title="ArrayList å’Œ LinkedList çš„æ¯”è¾ƒ"></a>ArrayList å’Œ LinkedList çš„æ¯”è¾ƒ</h4> <img src="image-20220913153254219.png" alt="image-20220913153254219" style="zoom:50%;" /><h3 id="Set-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"><a href="#Set-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Set æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"></a>Set æ¥å£å’Œå¸¸ç”¨æ–¹æ³•</h3><h4 id="Set-æ¥å£åŸºæœ¬ä»‹ç»"><a href="#Set-æ¥å£åŸºæœ¬ä»‹ç»" class="headerlink" title="Set æ¥å£åŸºæœ¬ä»‹ç»"></a>Set æ¥å£åŸºæœ¬ä»‹ç»</h4><ul><li><p>æ— åºï¼ˆæ·»åŠ å’Œå–å‡ºçš„é¡ºåºä¸ä¸€è‡´ï¼‰ï¼Œæ²¡æœ‰ç´¢å¼•</p></li><li><p>ä¸å…è®¸é‡å¤å…ƒç´ ï¼ˆé‡å¤æ·»åŠ åŒä¸€å…ƒç´ ä¼šè¢«å¿½ç•¥ï¼‰ï¼Œæ‰€ä»¥æœ€å¤šåŒ…å«ä¸€ä¸ª null</p></li><li><p>JDK API ä¸­ Set æ¥å£çš„å®ç°ç±»æœ‰ï¼š</p><p>HashSetã€TreeSetã€EnumSet â€¦ â€¦</p></li></ul><h4 id="Set-æ¥å£çš„å¸¸ç”¨æ–¹æ³•"><a href="#Set-æ¥å£çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Set æ¥å£çš„å¸¸ç”¨æ–¹æ³•"></a>Set æ¥å£çš„å¸¸ç”¨æ–¹æ³•</h4><p>åŒ Collection çš„éå†æ–¹å¼ä¸€æ ·ï¼Œå› ä¸º Set æ¥å£æ—¶ Collection æ¥å£çš„å­æ¥å£</p><h4 id="Set-æ¥å£çš„éå†æ–¹å¼"><a href="#Set-æ¥å£çš„éå†æ–¹å¼" class="headerlink" title="Set æ¥å£çš„éå†æ–¹å¼"></a>Set æ¥å£çš„éå†æ–¹å¼</h4><ul><li>å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨</li><li>å¢å¼º for</li><li>ä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼æ¥è·å–</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//set ç®€å•è§£è¯»æ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SetMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. ä»¥ Set æ¥å£çš„å®ç°ç±» HashSet æ¥è®²è§£ Set æ¥å£çš„æ–¹æ³•</span><br>        <span class="hljs-comment">//2. set æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡(Setæ¥å£å¯¹è±¡), ä¸èƒ½å­˜æ”¾é‡å¤çš„å…ƒç´ , å¯ä»¥æ·»åŠ ä¸€ä¸ªnull</span><br>        <span class="hljs-comment">//3. set æ¥å£å¯¹è±¡å­˜æ”¾æ•°æ®æ˜¯æ— åº(å³æ·»åŠ çš„é¡ºåºå’Œå–å‡ºçš„é¡ºåºä¸ä¸€è‡´)</span><br>        <span class="hljs-comment">//4. æ³¨æ„ï¼šå–å‡ºçš„é¡ºåºçš„é¡ºåºè™½ç„¶ä¸æ˜¯æ·»åŠ çš„é¡ºåºï¼Œä½†æ˜¯ä»–çš„å›ºå®š.</span><br>        <span class="hljs-comment">//è¡¥å……ï¼š</span><br>        <span class="hljs-comment">//1. åœ¨æ‰§è¡Œaddæ–¹æ³•åï¼Œä¼šè¿”å›ä¸€ä¸ªbooleanå€¼</span><br>        <span class="hljs-comment">//2. å¦‚æœæ·»åŠ æˆåŠŸï¼Œè¿”å› true, å¦åˆ™è¿”å›false</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        set.add(<span class="hljs-string">&quot;john&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;john&quot;</span>);<span class="hljs-comment">//é‡å¤</span><br>        set.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;hsp&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>        set.add(<span class="hljs-literal">null</span>);<span class="hljs-comment">//</span><br>        set.add(<span class="hljs-literal">null</span>);<span class="hljs-comment">//å†æ¬¡æ·»åŠ null</span><br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br><br>        <span class="hljs-comment">//éå†</span><br>        <span class="hljs-comment">//æ–¹å¼1ï¼š ä½¿ç”¨è¿­ä»£å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;=====ä½¿ç”¨è¿­ä»£å™¨====&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> set.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span>  iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;obj=&quot;</span> + obj);<br>        &#125;<br><br>        set.remove(<span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//æ–¹å¼2: å¢å¼ºfor</span><br>        System.out.println(<span class="hljs-string">&quot;=====å¢å¼ºfor====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o : set) &#123;<br>            System.out.println(<span class="hljs-string">&quot;o=&quot;</span> + o);<br>        &#125;<br><br>        <span class="hljs-comment">//set æ¥å£å¯¹è±¡ï¼Œä¸èƒ½é€šè¿‡ç´¢å¼•æ¥è·å–</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="HashSet-è¯´æ˜"><a href="#HashSet-è¯´æ˜" class="headerlink" title="HashSet è¯´æ˜"></a>HashSet è¯´æ˜</h3><ul><li><p>HashSet å®ç°äº† Set æ¥å£</p></li><li><p>HashSet å®é™…ä¸Šæ˜¯ HashMap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span>&#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯ä»¥å­˜æ”¾ null å€¼ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ª null</p></li><li><p>HashSet ä¸ä¿è¯å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œå–å†³äº hash åï¼Œå†ç¡®å®šç´¢å¼•çš„ç»“æœ</p><p>å³ ä¸ä¿è¯å­˜æ”¾å…ƒç´ çš„é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´</p></li><li><p>ä¸èƒ½æœ‰é‡å¤å…ƒç´ &#x2F;å¯¹è±¡ï¼ˆä¸ Set ä¸€è‡´ï¼‰</p></li></ul><h4 id="HashSet-æ¡ˆä¾‹è¯´æ˜"><a href="#HashSet-æ¡ˆä¾‹è¯´æ˜" class="headerlink" title="HashSet æ¡ˆä¾‹è¯´æ˜"></a>HashSet æ¡ˆä¾‹è¯´æ˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSet01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">//1. åœ¨æ‰§è¡Œaddæ–¹æ³•åï¼Œä¼šè¿”å›ä¸€ä¸ªbooleanå€¼</span><br>        <span class="hljs-comment">//2. å¦‚æœæ·»åŠ æˆåŠŸï¼Œè¿”å› true, å¦åˆ™è¿”å›false</span><br>        <span class="hljs-comment">//3. å¯ä»¥é€šè¿‡ remove æŒ‡å®šåˆ é™¤å“ªä¸ªå¯¹è±¡</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;john&quot;</span>));<span class="hljs-comment">//T</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;lucy&quot;</span>));<span class="hljs-comment">//T</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;john&quot;</span>));<span class="hljs-comment">//F</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;jack&quot;</span>));<span class="hljs-comment">//T</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;Rose&quot;</span>));<span class="hljs-comment">//T</span><br>        <br>        set.remove(<span class="hljs-string">&quot;john&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<span class="hljs-comment">//3ä¸ª</span><br><br>        <span class="hljs-comment">//</span><br>        set  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<span class="hljs-comment">//0</span><br>        <span class="hljs-comment">//4 Hashset ä¸èƒ½æ·»åŠ ç›¸åŒçš„å…ƒç´ /æ•°æ®?</span><br>        set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<span class="hljs-comment">//æ·»åŠ æˆåŠŸ</span><br>        set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<span class="hljs-comment">//åŠ å…¥ä¸äº†</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>));<span class="hljs-comment">//OK</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>));<span class="hljs-comment">//Ok</span><br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br><br>        <span class="hljs-comment">//åœ¨åŠ æ·±ä¸€ä¸‹. éå¸¸ç»å…¸çš„é¢è¯•é¢˜.</span><br>        <span class="hljs-comment">//çœ‹æºç ï¼Œåšåˆ†æï¼Œ å…ˆç»™å°ä¼™ä¼´ç•™ä¸€ä¸ªå‘ï¼Œä»¥åè®²å®Œæºç ï¼Œä½ å°±äº†ç„¶</span><br>        <span class="hljs-comment">//å»çœ‹ä»–çš„æºç ï¼Œå³ add åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ?=&gt; åº•å±‚æœºåˆ¶.</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>));<span class="hljs-comment">//ok</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>));<span class="hljs-comment">//åŠ å…¥ä¸äº†.</span><br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123; <span class="hljs-comment">//å®šä¹‰äº†Dogç±»</span><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="HashSet-åº•å±‚æœºåˆ¶è¯´æ˜"><a href="#HashSet-åº•å±‚æœºåˆ¶è¯´æ˜" class="headerlink" title="HashSet åº•å±‚æœºåˆ¶è¯´æ˜"></a>HashSet åº•å±‚æœºåˆ¶è¯´æ˜</h4><p><strong>å›¾è§£ï¼š</strong></p><p> <img src="/2022/06/30/JavaNote/image-20220913212131074.png" alt="image-20220913212131074"></p><p><strong>åˆ†æ HashSet åº•å±‚æ˜¯ HashMapï¼Œè€Œ HashMap åº•å±‚æ˜¯ï¼ˆæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¨¡æ‹Ÿ æ•°ç»„+é“¾è¡¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetStructure</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ¨¡æ‹Ÿä¸€ä¸ªHashSetçš„åº•å±‚ (HashMap çš„åº•å±‚ç»“æ„)</span><br>        <span class="hljs-comment">//1. åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç±»å‹æ˜¯ Node[]</span><br>        <span class="hljs-comment">//2. æœ‰äº›äººï¼Œç›´æ¥æŠŠ Node[] æ•°ç»„ç§°ä¸º è¡¨</span><br>        Node[] table = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[<span class="hljs-number">16</span>];<br>        <span class="hljs-comment">//3. åˆ›å»ºç»“ç‚¹</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">john</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-literal">null</span>);<br><br>        table[<span class="hljs-number">2</span>] = john;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">jack</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-literal">null</span>);<br>        john.next = jack;<span class="hljs-comment">// å°†jack ç»“ç‚¹æŒ‚è½½åˆ°john</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">rose</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;Rose&quot;</span>, <span class="hljs-literal">null</span>);<br>        jack.next = rose;<span class="hljs-comment">// å°†rose ç»“ç‚¹æŒ‚è½½åˆ°jack</span><br><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">lucy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-literal">null</span>);<br>        table[<span class="hljs-number">3</span>] = lucy; <span class="hljs-comment">// æŠŠlucy æ”¾åˆ° tableè¡¨çš„ç´¢å¼•ä¸º3çš„ä½ç½®.</span><br>        System.out.println(<span class="hljs-string">&quot;table=&quot;</span> + table);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123; <span class="hljs-comment">//ç»“ç‚¹, å­˜å‚¨æ•°æ®, å¯ä»¥æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œä»è€Œå½¢æˆé“¾è¡¨</span><br>    Object item; <span class="hljs-comment">//å­˜æ”¾æ•°æ®</span><br>    Node next; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(Object item, Node next)</span> &#123;<br>        <span class="hljs-built_in">this</span>.item = item;<br>        <span class="hljs-built_in">this</span>.next = next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ†æ HashSet çš„æ·»åŠ å…ƒç´ åº•å±‚æ˜¯å¦‚ä½•å®ç°ï¼ˆhash() + equals()ï¼‰</strong></p><p><strong>æ¦‚æ‹¬ï¼š</strong></p><p>1ï¼‰å…ˆè·å–å…ƒç´ çš„å“ˆå¸Œå€¼ï¼ˆhashCodeæ–¹æ³•ï¼‰</p><p>2ï¼‰å¯¹å“ˆå¸Œå€¼è¿›è¡Œè¿ç®—ï¼Œå¾—å‡ºä¸€ä¸ªç´¢å¼•å€¼å³ä¸ºè¦å­˜æ”¾åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®å·</p><p>3ï¼‰å¦‚æœè¯¥ä½ç½®ä¸Šæœ‰å…¶å®ƒå…ƒç´ ï¼Œåˆ™éœ€è¦è¿›è¡Œ equals åˆ¤æ–­ï¼ˆequals å¯ä»¥ç”±ç¨‹åºå‘˜é‡å†™æ¥å®šä¹‰åˆ¤æ–­æ ‡å‡†ï¼‰</p><p>â€‹  å¦‚æœç›¸ç­‰ï¼Œåˆ™ä¸å†æ·»åŠ ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™ä»¥é“¾è¡¨çš„æ–¹å¼æ·»åŠ ã€‚</p><p><strong>ç»†èŠ‚ï¼š</strong></p><p>1ï¼‰HashSet åº•å±‚æ˜¯ HashMap </p><p>2ï¼‰æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå…ˆå¾—åˆ° hash å€¼ - ä¼šè½¬æˆ â€“&gt; ç´¢å¼•å€¼</p><p>3ï¼‰æ‰¾åˆ°å­˜å‚¨æ•°æ®è¡¨ tableï¼Œçœ‹è¿™ä¸ªç´¢å¼•ä½ç½®æ˜¯å¦å·²ç»å­˜æ”¾çš„æœ‰å…ƒç´ </p><p>4ï¼‰å¦‚æœæ²¡æœ‰ï¼Œç›´æ¥åŠ å…¥</p><p>5ï¼‰å¦‚æœæœ‰ï¼Œè°ƒç”¨ equals æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œå°±æ”¾å¼ƒæ·»åŠ ï¼Œå¦‚æœä¸ç›¸åŒï¼Œåˆ™æ·»åŠ åˆ°æœ€å</p><p>6ï¼‰åœ¨ Java8 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°åˆ°è¾¾ TREEIFY_THRESHOLDï¼ˆé»˜è®¤æ˜¯ 8ï¼‰ï¼Œå¹¶ä¸” table(æ•°ç»„) çš„å¤§å° &gt;&#x3D; MIN_TREEIFY_CAPACITYï¼ˆé»˜è®¤64ï¼‰ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–ï¼ˆçº¢é»‘æ ‘ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetSource</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        hashSet.add(<span class="hljs-string">&quot;java&quot;</span>);<span class="hljs-comment">//åˆ°æ­¤ä½ç½®ï¼Œç¬¬1æ¬¡addåˆ†æå®Œæ¯•.</span><br>        hashSet.add(<span class="hljs-string">&quot;php&quot;</span>);<span class="hljs-comment">//åˆ°æ­¤ä½ç½®ï¼Œç¬¬2æ¬¡addåˆ†æå®Œæ¯•</span><br>        hashSet.add(<span class="hljs-string">&quot;java&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + hashSet);<br><br><span class="hljs-comment">// ==========================================================================</span><br><span class="hljs-comment">// å¯¹HashSet çš„æºç è§£è¯»</span><br><span class="hljs-number">1.</span> æ‰§è¡Œ HashSet()<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>&#125;<br><span class="hljs-number">2.</span> æ‰§è¡Œ add()<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<span class="hljs-comment">//e = &quot;java&quot;</span><br>    <span class="hljs-keyword">return</span> map.put(e, PRESENT)==<span class="hljs-literal">null</span>;  <span class="hljs-comment">//(static) PRESENT = new Object();</span><br>&#125;<br><span class="hljs-number">3.</span>æ‰§è¡Œ put() , è¯¥æ–¹æ³•ä¼šå…ˆæ‰§è¡Œ hash(key) å¾—åˆ°keyå¯¹åº”çš„hashå€¼<br>    å†é€šè¿‡ç®—æ³•å¾—åˆ° (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>)<br>    <span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<span class="hljs-comment">//key = &quot;java&quot;  value = PRESENT (é™æ€=&gt;å…±äº«)</span><br>    <span class="hljs-keyword">return</span> putVal(hash(key), key, value, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);<br>&#125;<br><span class="hljs-number">4.</span>æ‰§è¡Œ putVal<br>    <span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,<span class="hljs-type">boolean</span> evict)</span> &#123;<br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i; <span class="hljs-comment">// å®šä¹‰äº†è¾…åŠ©å˜é‡</span><br><br>    <span class="hljs-comment">// table å°±æ˜¯ HashMap çš„ä¸€ä¸ªæ•°ç»„ï¼Œç±»å‹æ˜¯ Node[]</span><br>    <span class="hljs-comment">// if è¯­å¥è¡¨ç¤ºå¦‚æœå½“å‰table æ˜¯null, æˆ–è€… å¤§å°=0</span><br>    <span class="hljs-comment">// å°±æ˜¯ç¬¬ä¸€æ¬¡æ‰©å®¹ï¼Œåˆ°16ä¸ªç©ºé—´.</span><br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)<br>        n = (tab = resize()).length;<br><br>    <span class="hljs-comment">// (1)æ ¹æ®keyï¼Œå¾—åˆ°hash å»è®¡ç®—è¯¥keyåº”è¯¥å­˜æ”¾åˆ°tableè¡¨çš„å“ªä¸ªç´¢å¼•ä½ç½®</span><br>    <span class="hljs-comment">//    å¹¶æŠŠè¿™ä¸ªä½ç½®çš„å¯¹è±¡ï¼Œèµ‹ç»™ p</span><br>    <span class="hljs-comment">// (2)åˆ¤æ–­ p æ˜¯å¦ä¸ºnull</span><br>    <span class="hljs-comment">// (2.1) å¦‚æœ p ä¸º null, è¡¨ç¤ºè¿˜æ²¡æœ‰å­˜æ”¾å…ƒç´ , å°±åˆ›å»ºä¸€ä¸ª Node (key=&quot;java&quot;,value=PRESENT)</span><br>    <span class="hljs-comment">// (2.2) å°±æ”¾åœ¨è¯¥ä½ç½® tab[i] = newNode(hash, key, value, null)</span><br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>)<br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>    <span class="hljs-comment">//</span><br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸€ä¸ªå¼€å‘æŠ€å·§æç¤ºï¼š åœ¨éœ€è¦å±€éƒ¨å˜é‡(è¾…åŠ©å˜é‡)æ—¶å€™ï¼Œå†åˆ›å»º</span><br>        Node&lt;K,V&gt; e; K k; <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//å¦‚æœå½“å‰ç´¢å¼•ä½ç½®å¯¹åº”çš„é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå‡†å¤‡æ·»åŠ çš„keyçš„hashå€¼ä¸€æ ·</span><br>        <span class="hljs-comment">//å¹¶ä¸”æ»¡è¶³ ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€:</span><br>        <span class="hljs-comment">//(1) å‡†å¤‡åŠ å…¥çš„key å’Œ p æŒ‡å‘çš„Node ç»“ç‚¹çš„ key æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br>        <span class="hljs-comment">//(2) p æŒ‡å‘çš„Node ç»“ç‚¹çš„ key çš„ equals() å’Œå‡†å¤‡åŠ å…¥çš„keyæ¯”è¾ƒåç›¸åŒ</span><br>        <span class="hljs-comment">//å°±ä¸èƒ½åŠ å…¥</span><br>        <span class="hljs-keyword">if</span> (p.hash == hash &amp;&amp;<br>            ((k = p.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>            e = p;<br>        <span class="hljs-comment">//å†åˆ¤æ–­ p æ˜¯ä¸æ˜¯ä¸€é¢—çº¢é»‘æ ‘,</span><br>        <span class="hljs-comment">//å¦‚æœæ˜¯ä¸€é¢—çº¢é»‘æ ‘ï¼Œå°±è°ƒç”¨ putTreeVal , æ¥è¿›è¡Œæ·»åŠ </span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode)<br>            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="hljs-built_in">this</span>, tab, hash, key, value);<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//å¦‚æœtableå¯¹åº”ç´¢å¼•ä½ç½®ï¼Œå·²ç»æ˜¯ä¸€ä¸ªé“¾è¡¨, å°±ä½¿ç”¨forå¾ªç¯ä¾æ¬¡æ¯”è¾ƒ</span><br>            <span class="hljs-comment">//(1) ä¾æ¬¡å’Œè¯¥é“¾è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒåï¼Œéƒ½ä¸ç›¸åŒ, åˆ™åŠ å…¥åˆ°è¯¥é“¾è¡¨çš„æœ€å</span><br>            <span class="hljs-comment">//    æ³¨æ„åœ¨æŠŠå…ƒç´ æ·»åŠ åˆ°é“¾è¡¨åï¼Œç«‹å³åˆ¤æ–­ è¯¥é“¾è¡¨æ˜¯å¦å·²ç»è¾¾åˆ°8ä¸ªç»“ç‚¹</span><br>            <span class="hljs-comment">//    , å°±è°ƒç”¨ treeifyBin() å¯¹å½“å‰è¿™ä¸ªé“¾è¡¨è¿›è¡Œæ ‘åŒ–(è½¬æˆçº¢é»‘æ ‘)</span><br>            <span class="hljs-comment">//    æ³¨æ„ï¼Œåœ¨è½¬æˆçº¢é»‘æ ‘æ—¶ï¼Œè¦è¿›è¡Œåˆ¤æ–­, åˆ¤æ–­æ¡ä»¶</span><br>            <span class="hljs-comment">//    if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY(64))</span><br>            <span class="hljs-comment">//            resize();</span><br>            <span class="hljs-comment">//    å¦‚æœä¸Šé¢æ¡ä»¶æˆç«‹ï¼Œå…ˆtableæ‰©å®¹ï¼Œè€Œä¸ä¼šè½¬æˆçº¢é»‘æ ‘</span><br>            <span class="hljs-comment">//    åªæœ‰ä¸Šé¢æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œæ‰è¿›è¡Œè½¬æˆçº¢é»‘æ ‘</span><br>            <span class="hljs-comment">//(2) ä¾æ¬¡å’Œè¯¥é“¾è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒæƒ…å†µ,å°±ç›´æ¥break</span><br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123;<br>                <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;<br>                    p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>                    <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD(<span class="hljs-number">8</span>) - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span><br>                        treeifyBin(tab, hash);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp;<br>                    ((k = e.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>                    <span class="hljs-keyword">break</span>;<br>                p = e;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// existing mapping for key</span><br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;<br>            <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-literal">null</span>)<br>                e.value = value;<br>            afterNodeAccess(e);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br>    ++modCount;<br>    <span class="hljs-comment">//size å°±æ˜¯æˆ‘ä»¬æ¯åŠ å…¥ä¸€ä¸ªç»“ç‚¹Node(k,v,h,next), size++</span><br>    <span class="hljs-comment">//ä¸ç®¡æ˜¯åŠ åˆ°tableè¡¨ä¸Šè¿˜æ˜¯åŠ åˆ°é“¾è¡¨ä¸Š</span><br>    <span class="hljs-keyword">if</span> (++size &gt; threshold)<br>        resize();<span class="hljs-comment">//æ‰©å®¹</span><br>    afterNodeInsertion(evict);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><span class="hljs-comment">// ==========================================================================</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ†æ HashSet çš„æ‰©å®¹å’Œè½¬æˆçº¢é»‘æ ‘æœºåˆ¶</strong></p><p>1ï¼‰HashSet åº•å±‚æ˜¯ HashMapï¼Œç¬¬ä¸€æ¬¡æ·»åŠ æ—¶ï¼Œtable æ•°ç»„æ‰©å®¹åˆ° 16ï¼Œä¸´ç•Œå€¼ï¼ˆthresholdï¼‰æ˜¯ 16*åŠ è½½å› å­ï¼ˆloadFactorï¼‰æ˜¯ 0.75 &#x3D; 12       &#x2F;&#x2F; ä¸´ç•Œå€¼ï¼ˆthresholdï¼‰ä½œä¸º ç¼“å†²ï¼Œæå‰æ‰©å®¹</p><p>2ï¼‰å¦‚æœ table æ•°ç»„ä½¿ç”¨äº†ä¸´ç•Œå€¼ 12ï¼Œå°±ä¼šæ‰©å®¹åˆ° 16 * 2 &#x3D; 32ï¼Œæ–°çš„ä¸´ç•Œå€¼å°±æ˜¯ 32 * 0.75 &#x3D; 24ï¼Œä¾æ¬¡ç±»æ¨</p><p>3ï¼‰åœ¨ Java8-17 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°åˆ°è¾¾ TREEIFY_THRESHOLDï¼ˆé»˜è®¤æ˜¯ 8ï¼‰ï¼Œå¹¶ä¸” table çš„å¤§å° &gt;&#x3D; MIN_TREEIFY_CAPACITYï¼ˆé»˜è®¤ï¼‰ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼Œå¦åˆ™ä»ç„¶é‡‡ç”¨æ•°ç»„æ‰©å®¹æœºåˆ¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetIncrement</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        HashSetåº•å±‚æ˜¯HashMap, ç¬¬ä¸€æ¬¡æ·»åŠ æ—¶ï¼Œtable æ•°ç»„æ‰©å®¹åˆ° 16ï¼Œ</span><br><span class="hljs-comment">        ä¸´ç•Œå€¼(threshold)æ˜¯ 16*åŠ è½½å› å­(loadFactor)æ˜¯0.75 = 12</span><br><span class="hljs-comment">        å¦‚æœtable æ•°ç»„ä½¿ç”¨åˆ°äº†ä¸´ç•Œå€¼ 12,å°±ä¼šæ‰©å®¹åˆ° 16 * 2 = 32,</span><br><span class="hljs-comment">        æ–°çš„ä¸´ç•Œå€¼å°±æ˜¯ 32*0.75 = 24, ä¾æ¬¡ç±»æ¨</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><span class="hljs-comment">//        for(int i = 1; i &lt;= 100; i++) &#123;</span><br><span class="hljs-comment">//            hashSet.add(i);//1,2,3,4,5...100</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        åœ¨Java8ä¸­, å¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°åˆ°è¾¾ TREEIFY_THRESHOLD(é»˜è®¤æ˜¯ 8 )ï¼Œ</span><br><span class="hljs-comment">        å¹¶ä¸”tableçš„å¤§å° &gt;= MIN_TREEIFY_CAPACITY(é»˜è®¤64),å°±ä¼šè¿›è¡Œæ ‘åŒ–(çº¢é»‘æ ‘),</span><br><span class="hljs-comment">        å¦åˆ™ä»ç„¶é‡‡ç”¨æ•°ç»„æ‰©å®¹æœºåˆ¶</span><br><span class="hljs-comment">         */</span><br><br><span class="hljs-comment">//        for(int i = 1; i &lt;= 12; i++) &#123;</span><br><span class="hljs-comment">//            hashSet.add(new A(i));//</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            å½“æˆ‘ä»¬å‘hashsetå¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œ-&gt; åŠ å…¥Node æˆ– -&gt; åŠ å…¥table , å°±ç®—æ˜¯ä¸€ä¸ªsize++</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">7</span>; i++) &#123;<span class="hljs-comment">//åœ¨tableçš„æŸä¸€æ¡é“¾è¡¨ä¸Šæ·»åŠ äº† 7ä¸ªAå¯¹è±¡</span><br>            hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>(i));<span class="hljs-comment">//</span><br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">7</span>; i++) &#123;<span class="hljs-comment">//åœ¨tableçš„å¦å¤–ä¸€æ¡é“¾è¡¨ä¸Šæ·»åŠ äº† 7ä¸ªBå¯¹è±¡</span><br>            hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(i));<span class="hljs-comment">//</span><br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<span class="hljs-built_in">this</span>.n = n;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">200</span>;&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<span class="hljs-built_in">this</span>.n = n;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="HashSet-è¯¾å ‚ç»ƒä¹ "><a href="#HashSet-è¯¾å ‚ç»ƒä¹ " class="headerlink" title="HashSet è¯¾å ‚ç»ƒä¹ "></a>HashSet è¯¾å ‚ç»ƒä¹ </h4><p> &#x2F;&#x2F;alt + ins å¿«æ·é”® å¿«é€Ÿé‡å†™ equals å’Œ hashCode </p> <img src="image-20220914225605186.png" alt="image-20220914225605186" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         å®šä¹‰ä¸€ä¸ªEmployeeç±»ï¼Œè¯¥ç±»åŒ…å«ï¼šprivateæˆå‘˜å±æ€§name,age è¦æ±‚:</span><br><span class="hljs-comment">         åˆ›å»º3ä¸ªEmployee å¯¹è±¡æ”¾å…¥ HashSetä¸­</span><br><span class="hljs-comment">         å½“ nameå’Œageçš„å€¼ç›¸åŒæ—¶ï¼Œè®¤ä¸ºæ˜¯ç›¸åŒå‘˜å·¥, ä¸èƒ½æ·»åŠ åˆ°HashSeté›†åˆä¸­</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">18</span>));<span class="hljs-comment">//ok</span><br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-number">28</span>));<span class="hljs-comment">//ok</span><br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">18</span>));<span class="hljs-comment">//åŠ å…¥ä¸æˆåŠŸ.</span><br><br>        <span class="hljs-comment">//å›ç­”,åŠ å…¥äº†å‡ ä¸ª? 3ä¸ª</span><br>        System.out.println(<span class="hljs-string">&quot;hashSet=&quot;</span> + hashSet);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//åˆ›å»ºEmployee</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Employee&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//alt + ins å¿«æ·é”® å¿«é€Ÿé‡å†™ equals å’Œ hashCode </span><br>    <span class="hljs-comment">//é‡å†™ equals åˆ¤æ–­</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> (Employee) o;<br>        <span class="hljs-keyword">return</span> age == employee.age &amp;&amp;<br>                Objects.equals(name, employee.name);<br>    &#125;<br>    <span class="hljs-comment">//å¦‚æœ name å’Œ age å€¼ç›¸åŒï¼Œåˆ™è¿”å›ç›¸åŒçš„hashå€¼</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(name, age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="LinkedHashSet-å…¨é¢è¯´æ˜"><a href="#LinkedHashSet-å…¨é¢è¯´æ˜" class="headerlink" title="LinkedHashSet å…¨é¢è¯´æ˜"></a>LinkedHashSet å…¨é¢è¯´æ˜</h3><ul><li>LinkedHashSet æ˜¯ HashSet çš„å­ç±»</li><li>LinkedHashSet åº•å±‚æ˜¯ä¸€ä¸ª LinkedHashMapï¼Œåº•å±‚ç»´æŠ¤äº†ä¸€ä¸ª æ•°ç»„ + åŒå‘é“¾è¡¨</li><li>LinkedHashSet æ ¹æ®å…ƒç´ çš„ hashCode å€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼ŒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼ˆå›¾ï¼‰ï¼Œè¿™ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ï¼ˆå³ï¼šå–å‡ºå…ƒç´ çš„é¡ºåºä¸æ·»åŠ å…ƒç´ çš„é¡ºåºä¸€è‡´ï¼‰</li><li>LinkedHashSet ä¸å…è®¸æ·»é‡å¤å…ƒç´ </li><li>LinkedHashSet åº•å±‚æœºåˆ¶ç¤ºæ„å›¾</li></ul> <img src="image-20220915192249886.png" alt="image-20220915192249886" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.LinkedHashSet;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedHashSetSource</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ†æä¸€ä¸‹LinkedHashSetçš„åº•å±‚æœºåˆ¶</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>();<br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;AA&quot;</span>));<br>        set.add(<span class="hljs-number">456</span>);<br>        set.add(<span class="hljs-number">456</span>);<br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Customer</span>(<span class="hljs-string">&quot;åˆ˜&quot;</span>, <span class="hljs-number">1001</span>));<br>        set.add(<span class="hljs-number">123</span>);<br>        set.add(<span class="hljs-string">&quot;HSP&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. LinkedHashSet åŠ å…¥é¡ºåºå’Œå–å‡ºå…ƒç´ /æ•°æ®çš„é¡ºåºä¸€è‡´</span><br>        <span class="hljs-comment">//2. LinkedHashSet åº•å±‚ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªLinkedHashMap(æ˜¯HashMapçš„å­ç±»)</span><br>        <span class="hljs-comment">//3. LinkedHashSet åº•å±‚ç»“æ„ (æ•°ç»„table+åŒå‘é“¾è¡¨)</span><br>        <span class="hljs-comment">//4. æ·»åŠ ç¬¬ä¸€æ¬¡æ—¶ï¼Œç›´æ¥å°† æ•°ç»„ table æ‰©å®¹åˆ° 16ï¼Œå­˜æ”¾çš„ç»“ç‚¹ç±»å‹æ˜¯ LinkedHashMap$Entry</span><br>        <span class="hljs-comment">//5. æ•°ç»„æ˜¯ HashMap$Node[] å­˜æ”¾çš„å…ƒç´ /æ•°æ®æ˜¯ LinkedHashMap$Entryç±»å‹</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //ç»§æ‰¿å…³ç³»æ˜¯åœ¨å†…éƒ¨ç±»å®Œæˆ.</span><br><span class="hljs-comment">        static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123;</span><br><span class="hljs-comment">            Entry&lt;K,V&gt; before, after;</span><br><span class="hljs-comment">            Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="hljs-comment">                super(hash, key, value, next);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> no;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Customer</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> no)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.no = no;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="LinkedHashSet-è¯¾åç»ƒä¹ é¢˜"><a href="#LinkedHashSet-è¯¾åç»ƒä¹ é¢˜" class="headerlink" title="LinkedHashSet è¯¾åç»ƒä¹ é¢˜"></a>LinkedHashSet è¯¾åç»ƒä¹ é¢˜</h4> <img src="image-20220915192932489.png" alt="image-20220915192932489" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.LinkedHashSet;<br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedHashSetExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">LinkedHashSet</span> <span class="hljs-variable">linkedHashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>();<br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;å¥¥æ‹“&quot;</span>, <span class="hljs-number">1000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;å¥¥è¿ª&quot;</span>, <span class="hljs-number">300000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;æ³•æ‹‰åˆ©&quot;</span>, <span class="hljs-number">10000000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;å¥¥è¿ª&quot;</span>, <span class="hljs-number">300000</span>));<span class="hljs-comment">//é»˜è®¤æƒ…å†µOKï¼Œä¿®æ”¹åno</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;ä¿æ—¶æ·&quot;</span>, <span class="hljs-number">70000000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;å¥¥è¿ª&quot;</span>, <span class="hljs-number">300000</span>));<span class="hljs-comment">//é»˜è®¤æƒ…å†µOKï¼Œä¿®æ”¹åno</span><br><br>        System.out.println(<span class="hljs-string">&quot;linkedHashSet=&quot;</span> + linkedHashSet);<br><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Car ç±»(å±æ€§:name,price)ï¼Œ  å¦‚æœ name å’Œ price ä¸€æ ·ï¼Œ</span><br><span class="hljs-comment"> * åˆ™è®¤ä¸ºæ˜¯ç›¸åŒå…ƒç´ ï¼Œå°±ä¸èƒ½æ·»åŠ ã€‚ 5min</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Car</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> price;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> &#123;<span class="hljs-built_in">this</span>.price = price;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;\nCar&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡å†™equals æ–¹æ³• å’Œ hashCode</span><br>    <span class="hljs-comment">//å½“ name å’Œ price ç›¸åŒæ—¶ï¼Œ å°±è¿”å›ç›¸åŒçš„ hashCodeå€¼ï¼Œequals è¿”å› ture</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> (Car) o;<br>        <span class="hljs-keyword">return</span> Double.compare(car.price, price) == <span class="hljs-number">0</span> &amp;&amp;<br>                Objects.equals(name, car.name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(name, price);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Map-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"><a href="#Map-æ¥å£å’Œå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Map æ¥å£å’Œå¸¸ç”¨æ–¹æ³•"></a>Map æ¥å£å’Œå¸¸ç”¨æ–¹æ³•</h3><h4 id="Map-æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹-å¾ˆå®ç”¨"><a href="#Map-æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹-å¾ˆå®ç”¨" class="headerlink" title="Map æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹ [å¾ˆå®ç”¨]"></a>Map æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹ [å¾ˆå®ç”¨]</h4><p>æ³¨æ„ï¼šæ­¤å¤„ä»¥ JDK8 ä¸ºä¾‹</p><ul><li><p>Map ä¸ Collection å¹¶åˆ—å­˜åœ¨ï¼Œç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼šKey - Valueï¼ˆSetåªç”¨åˆ°äº†Keyï¼Œvalueæ˜¯å¸¸é‡ï¼‰</p></li><li><p>Map ä¸­çš„ key å’Œ value å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œä¼šå°è£…åˆ° HsahMap$Node å¯¹è±¡ä¸­</p><p>åŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿä¼šè¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼Œä»»ä½•æŠŠè‡ªåŠ¨è£…ç®±ç”Ÿæˆçš„å¯¹è±¡å°è£…åˆ° HsahMap$Node å¯¹è±¡ä¸­</p></li><li><p>Map ä¸­çš„ key ä¸å…è®¸é‡å¤ï¼ŒåŸå› å’Œ HashSet ä¸€æ ·</p></li><li><p>Map ä¸­çš„ value å¯ä»¥é‡å¤</p></li><li><p>Map ä¸­çš„ key å¯ä»¥ä¸º nullï¼Œvalue ä¹Ÿå¯ä»¥ä¸º nullï¼Œæ³¨æ„ key ä¸º null åªèƒ½æœ‰ä¸€ä¸ªï¼Œvalue ä¸º null å¯ä»¥å¤šä¸ª</p></li><li><p>å¸¸ç”¨ Stringç±»ä½œä¸º Map çš„ keyï¼Œä½†ä½¿ç”¨å…¶å®ƒï¼ˆintã€Objectç­‰ï¼‰ä¹Ÿå¯ä»¥</p></li><li><p>key å’Œ value ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ key æ€»èƒ½æ‰¾åˆ°å¯¹åº”çš„ value</p></li><li><p>Map å­˜æ”¾æ•°æ®çš„ key-value ç¤ºæ„å›¾ï¼Œä¸€å † k-v æ˜¯æ”¾åœ¨ä¸€ä¸ª HashMap$Node ä¸­çš„ï¼Œè€Œ Set å’Œ Collection åªæ˜¯å»ºç«‹äº†ä¸€ä¸ªæŒ‡å‘ HashMap$Node å¯¹è±¡çš„å¼•ç”¨ï¼Œä»è€Œæ–¹ä¾¿éå†ï¼ˆNode å®ç°äº† Entry æ¥å£ï¼‰</p><p>ï¼ˆå› ä¸º Node å®ç°äº† Entry æ¥å£ï¼Œæœ‰äº›ä¹¦ä¸Šä¹Ÿè¯´ ä¸€å¯¹ k-v å°±æ˜¯ä¸€ä¸ª Entryï¼‰</p> <img src="image-20220915221924451.png" alt="image-20220915221924451" style="zoom:80%;" /></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Map_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è€éŸ©è§£è¯»Map æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹, ä½¿ç”¨å®ç°ç±»HashMap</span><br>        <span class="hljs-comment">//1. Mapä¸Collectionå¹¶åˆ—å­˜åœ¨ã€‚ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®:Key-Value(åŒåˆ—å…ƒç´ )</span><br>        <span class="hljs-comment">//2. Map ä¸­çš„ key å’Œ  value å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œä¼šå°è£…åˆ°HashMap$Node å¯¹è±¡ä¸­</span><br>        <span class="hljs-comment">//3. Map ä¸­çš„ key ä¸å…è®¸é‡å¤ï¼ŒåŸå› å’ŒHashSet ä¸€æ ·ï¼Œå‰é¢åˆ†æè¿‡æºç .</span><br>        <span class="hljs-comment">//4. Map ä¸­çš„ value å¯ä»¥é‡å¤</span><br>        <span class="hljs-comment">//5. Map çš„key å¯ä»¥ä¸º null, value ä¹Ÿå¯ä»¥ä¸ºnull ï¼Œæ³¨æ„ key ä¸ºnull,</span><br>        <span class="hljs-comment">//   åªèƒ½æœ‰ä¸€ä¸ªï¼Œvalue ä¸ºnull ,å¯ä»¥å¤šä¸ª</span><br>        <span class="hljs-comment">//6. å¸¸ç”¨Stringç±»ä½œä¸ºMapçš„ key</span><br>        <span class="hljs-comment">//7. key å’Œ value ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ key æ€»èƒ½æ‰¾åˆ°å¯¹åº”çš„ value</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no2&quot;</span>, <span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;å¼ ä¸‰ä¸°&quot;</span>);<span class="hljs-comment">//å½“æœ‰ç›¸åŒçš„k, å°±ç­‰ä»·äºæ›¿æ¢.</span><br>        map.put(<span class="hljs-string">&quot;no3&quot;</span>, <span class="hljs-string">&quot;å¼ ä¸‰ä¸°&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;abc&quot;</span>); <span class="hljs-comment">//ç­‰ä»·æ›¿æ¢</span><br>        map.put(<span class="hljs-string">&quot;no4&quot;</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no5&quot;</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;èµµæ•&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>(), <span class="hljs-string">&quot;é‡‘æ¯›ç‹®ç‹&quot;</span>);<span class="hljs-comment">//k-v</span><br>        <span class="hljs-comment">// é€šè¿‡get æ–¹æ³•ï¼Œä¼ å…¥ key ,ä¼šè¿”å›å¯¹åº”çš„value</span><br>        System.out.println(map.get(<span class="hljs-string">&quot;no2&quot;</span>));<span class="hljs-comment">//å¼ æ— å¿Œ</span><br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æºç è§£è¯»</span><br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapSource_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no2&quot;</span>, <span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>());<span class="hljs-comment">//k-v</span><br><span class="hljs-comment">//è§£è¯»</span><br><span class="hljs-comment">//1. k-v æœ€åæ˜¯å­˜æ”¾åœ¨ HashMap$Node node = newNode(hash, key, value, null) ä¸­çš„</span><br><span class="hljs-comment">//2. k-v ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜çš„éå†ï¼Œè¿˜ä¼š åˆ›å»º EntrySet é›†åˆï¼Œè¯¥é›†åˆå­˜æ”¾çš„å…ƒç´ çš„ç±»å‹ Entryï¼Œè€Œä¸€ä¸ªEntry</span><br><span class="hljs-comment">//   å¯¹è±¡å°±æœ‰ k,v EntrySet&lt;Entry&lt;K,V&gt;&gt; å³ï¼šæºç  transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="hljs-comment">//3. åœ¨ entrySet ä¸­ï¼Œ å®šä¹‰çš„ç±»å‹æ˜¯ Map.Entryï¼Œä½†æ˜¯å®é™…ä¸Šå­˜æ”¾çš„è¿˜æ˜¯ HashMap$Node</span><br><span class="hljs-comment">//   è¿™æ˜¯å› ä¸º static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt;ï¼Œå³å®ç°äº†Map.Entry&lt;K,V&gt;æ¥å£</span><br><span class="hljs-comment">//4. å½“æŠŠ HashMap$Node å¯¹è±¡ å­˜æ”¾åˆ° entrySet å°±æ–¹ä¾¿æˆ‘ä»¬çš„éå†, å› ä¸º Map.Entry æä¾›äº†é‡è¦æ–¹æ³•</span><br><span class="hljs-comment">//   K getKey(); V getValue();</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> map.entrySet();<br>        System.out.println(set.getClass()); <span class="hljs-comment">// HashMap$EntrySet</span><br>        <span class="hljs-keyword">for</span> (Object obj : set) &#123;<br>            <span class="hljs-comment">//System.out.println(obj.getClass()); //HashMap$Node</span><br>            <span class="hljs-comment">//ä¸ºäº†ä» HashMap$Node å–å‡ºk-v</span><br>            <span class="hljs-comment">//1. å…ˆåšä¸€ä¸ªå‘ä¸‹è½¬å‹</span><br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> (Map.Entry) obj;<br>            System.out.println(entry.getKey() + <span class="hljs-string">&quot;-&quot;</span> + entry.getValue() );<br>        &#125;<br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set1</span> <span class="hljs-operator">=</span> map.keySet();<br>        System.out.println(set1.getClass());<br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> map.values();<br>        System.out.println(values.getClass());<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Map-æ¥å£å¸¸ç”¨æ–¹æ³•"><a href="#Map-æ¥å£å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Map æ¥å£å¸¸ç”¨æ–¹æ³•"></a>Map æ¥å£å¸¸ç”¨æ–¹æ³•</h4><ul><li>putï¼šæ·»åŠ </li><li>removeï¼šæ ¹æ®é”®åˆ é™¤æ˜ å°„å…³ç³»</li><li>getï¼šæ ¹æ®é”®è·å–å€¼</li><li>sizeï¼šè·å–å…ƒç´ ä¸ªæ•°</li><li>isEmptyï¼šåˆ¤æ–­ä¸ªæ•°æ˜¯å¦ä¸º0</li><li>clearï¼šæ¸…é™¤</li><li>containsKeyï¼šæŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ¼”ç¤ºmapæ¥å£å¸¸ç”¨æ–¹æ³•</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;é‚“è¶…&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">100</span>));<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;é‚“è¶…&quot;</span>, <span class="hljs-string">&quot;å­™ä¿ª&quot;</span>);<span class="hljs-comment">//æ›¿æ¢-&gt; ä¸€ä¼šåˆ†ææºç </span><br>        map.put(<span class="hljs-string">&quot;ç‹å®å¼º&quot;</span>, <span class="hljs-string">&quot;é©¬è“‰&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;å®‹å–†&quot;</span>, <span class="hljs-string">&quot;é©¬è“‰&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;åˆ˜ä»¤åš&quot;</span>, <span class="hljs-literal">null</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;åˆ˜äº¦è²&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;é¹¿æ™—&quot;</span>, <span class="hljs-string">&quot;å…³æ™“å½¤&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-string">&quot;hspçš„è€å©†&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br><span class="hljs-comment">//        remove:æ ¹æ®é”®åˆ é™¤æ˜ å°„å…³ç³»</span><br>        map.remove(<span class="hljs-literal">null</span>);<br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br><span class="hljs-comment">//        getï¼šæ ¹æ®é”®è·å–å€¼</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">val</span> <span class="hljs-operator">=</span> map.get(<span class="hljs-string">&quot;é¹¿æ™—&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;val=&quot;</span> + val);<br><span class="hljs-comment">//        size:è·å–å…ƒç´ ä¸ªæ•°</span><br>        System.out.println(<span class="hljs-string">&quot;k-v=&quot;</span> + map.size());<br><span class="hljs-comment">//        isEmpty:åˆ¤æ–­ä¸ªæ•°æ˜¯å¦ä¸º0</span><br>        System.out.println(map.isEmpty());<span class="hljs-comment">//F</span><br><span class="hljs-comment">//        clear:æ¸…é™¤k-v</span><br>        <span class="hljs-comment">//map.clear();</span><br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br><span class="hljs-comment">//        containsKey:æŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨</span><br>        System.out.println(<span class="hljs-string">&quot;ç»“æœ=&quot;</span> + map.containsKey(<span class="hljs-string">&quot;hsp&quot;</span>));<span class="hljs-comment">//T</span><br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> num;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.num = num;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Map-æ¥å£éå†æ–¹æ³•"><a href="#Map-æ¥å£éå†æ–¹æ³•" class="headerlink" title="Map æ¥å£éå†æ–¹æ³•"></a>Map æ¥å£éå†æ–¹æ³•</h4> <img src="image-20220915222026118.png" alt="image-20220915222026118" style="zoom:50%;" /><ul><li>containKeyï¼šæŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨</li><li>keySetï¼šè·å–æ‰€æœ‰çš„é”®</li><li>entrySetï¼šè·å–æ‰€æœ‰å…³ç³» k-v</li><li>valueï¼šè·å–æ‰€æœ‰çš„å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapFor</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;é‚“è¶…&quot;</span>, <span class="hljs-string">&quot;å­™ä¿ª&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;ç‹å®å¼º&quot;</span>, <span class="hljs-string">&quot;é©¬è“‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;å®‹å–†&quot;</span>, <span class="hljs-string">&quot;é©¬è“‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;åˆ˜ä»¤åš&quot;</span>, <span class="hljs-literal">null</span>);<br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;åˆ˜äº¦è²&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;é¹¿æ™—&quot;</span>, <span class="hljs-string">&quot;å…³æ™“å½¤&quot;</span>);<br><br>        <span class="hljs-comment">//ç¬¬ä¸€ç»„: å…ˆå–å‡º æ‰€æœ‰çš„Key , é€šè¿‡Key å–å‡ºå¯¹åº”çš„Value</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">keyset</span> <span class="hljs-operator">=</span> map.keySet();<br>        <span class="hljs-comment">//(1) å¢å¼ºfor</span><br>        System.out.println(<span class="hljs-string">&quot;-----ç¬¬ä¸€ç§æ–¹å¼-------&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object key : keyset) &#123;<br>            System.out.println(key + <span class="hljs-string">&quot;-&quot;</span> + map.get(key));<br>        &#125;<br>        <span class="hljs-comment">//(2) è¿­ä»£å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;----ç¬¬äºŒç§æ–¹å¼--------&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> keyset.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span>  iterator.next();<br>            System.out.println(key + <span class="hljs-string">&quot;-&quot;</span> + map.get(key));<br>        &#125;<br><br>        <span class="hljs-comment">//ç¬¬äºŒç»„: æŠŠæ‰€æœ‰çš„valueså–å‡º</span><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> map.values();<br>        <span class="hljs-comment">//è¿™é‡Œå¯ä»¥ä½¿ç”¨æ‰€æœ‰çš„Collectionsä½¿ç”¨çš„éå†æ–¹æ³•</span><br>        <span class="hljs-comment">//(1) å¢å¼ºfor</span><br>        System.out.println(<span class="hljs-string">&quot;---å–å‡ºæ‰€æœ‰çš„value å¢å¼ºfor----&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object value : values) &#123;<br>            System.out.println(value);<br>        &#125;<br>        <span class="hljs-comment">//(2) è¿­ä»£å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;---å–å‡ºæ‰€æœ‰çš„value è¿­ä»£å™¨----&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator2</span> <span class="hljs-operator">=</span> values.iterator();<br>        <span class="hljs-keyword">while</span> (iterator2.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span>  iterator2.next();<br>            System.out.println(value);<br><br>        &#125;<br><br>        <span class="hljs-comment">//ç¬¬ä¸‰ç»„: é€šè¿‡ EntrySet æ¥è·å– k-v</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">entrySet</span> <span class="hljs-operator">=</span> map.entrySet();<span class="hljs-comment">// EntrySet&lt;Map.Entry&lt;K,V&gt;&gt;</span><br>        <span class="hljs-comment">//(1) å¢å¼ºfor</span><br>        System.out.println(<span class="hljs-string">&quot;----ä½¿ç”¨ EntrySet çš„ forå¢å¼º(ç¬¬3ç§)----&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object entry : entrySet) &#123;<br>            <span class="hljs-comment">//å°† entry è½¬æˆ Map.Entry</span><br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) entry;<br>            System.out.println(m.getKey() + <span class="hljs-string">&quot;-&quot;</span> + m.getValue());<br>        &#125;<br>        <span class="hljs-comment">//(2) è¿­ä»£å™¨</span><br>        System.out.println(<span class="hljs-string">&quot;----ä½¿ç”¨ EntrySet çš„ è¿­ä»£å™¨(ç¬¬4ç§)----&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator3</span> <span class="hljs-operator">=</span> entrySet.iterator();<br>        <span class="hljs-keyword">while</span> (iterator3.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span>  iterator3.next();<br>            <span class="hljs-comment">//System.out.println(next.getClass());</span><br>            <span class="hljs-comment">//HashMap$Node -å®ç°-&gt; Map.Entry (getKey,getValue)</span><br>            <span class="hljs-comment">//å‘ä¸‹è½¬å‹ Map.Entry</span><br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) entry;<br>            System.out.println(m.getKey() + <span class="hljs-string">&quot;-&quot;</span> + m.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Map-ç»ƒä¹ é¢˜"><a href="#Map-ç»ƒä¹ é¢˜" class="headerlink" title="Map ç»ƒä¹ é¢˜"></a>Map ç»ƒä¹ é¢˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å®Œæˆä»£ç </span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">hashMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        <span class="hljs-comment">//æ·»åŠ å¯¹è±¡</span><br>        hashMap.put(<span class="hljs-number">1</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">300000</span>, <span class="hljs-number">1</span>));<br>        hashMap.put(<span class="hljs-number">2</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">21000</span>, <span class="hljs-number">2</span>));<br>        hashMap.put(<span class="hljs-number">3</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">12000</span>, <span class="hljs-number">3</span>));<br><br>        <span class="hljs-comment">//éå†2ç§æ–¹å¼</span><br>        <span class="hljs-comment">//å¹¶éå†æ˜¾ç¤ºå·¥èµ„&gt;18000çš„å‘˜å·¥(éå†æ–¹å¼æœ€å°‘ä¸¤ç§)</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨keySet  -&gt; å¢å¼ºfor</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">keySet</span> <span class="hljs-operator">=</span> hashMap.keySet();<br>        System.out.println(<span class="hljs-string">&quot;====ç¬¬ä¸€ç§éå†æ–¹å¼====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object key : keySet) &#123;<br>            <span class="hljs-comment">//å…ˆè·å–value</span><br>            <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> (Emp) hashMap.get(key);<br>            <span class="hljs-keyword">if</span>(emp.getSal() &gt;<span class="hljs-number">18000</span>) &#123;<br>                System.out.println(emp);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//2. ä½¿ç”¨EntrySet -&gt; è¿­ä»£å™¨</span><br>        <span class="hljs-comment">//   ä½“ç°æ¯”è¾ƒéš¾çš„çŸ¥è¯†ç‚¹</span><br>        <span class="hljs-comment">//   æ…¢æ…¢å“ï¼Œè¶Šå“è¶Šæœ‰å‘³é“.</span><br>        System.out.println(<span class="hljs-string">&quot;======è¿­ä»£å™¨======&quot;</span>);<br>        <span class="hljs-type">Set</span> <span class="hljs-variable">entrySet</span> <span class="hljs-operator">=</span> hashMap.entrySet();<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> entrySet.iterator();<br>        <span class="hljs-comment">//äºŒåˆä¸€ï¼šIterator iterator = (hashMap.entrySet()).iterator();</span><br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span>  (Map.Entry)iterator.next();<br>            <span class="hljs-comment">//é€šè¿‡entry å–å¾—key å’Œ value</span><br>            <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> (Emp) entry.getValue();<br>            <span class="hljs-keyword">if</span>(emp.getSal() &gt; <span class="hljs-number">18000</span>) &#123;<br>                System.out.println(emp);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä½¿ç”¨HashMapæ·»åŠ 3ä¸ªå‘˜å·¥å¯¹è±¡ï¼Œè¦æ±‚</span><br><span class="hljs-comment"> * é”®ï¼šå‘˜å·¥id</span><br><span class="hljs-comment"> * å€¼ï¼šå‘˜å·¥å¯¹è±¡</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * å¹¶éå†æ˜¾ç¤ºå·¥èµ„&gt;18000çš„å‘˜å·¥(éå†æ–¹å¼æœ€å°‘ä¸¤ç§)</span><br><span class="hljs-comment"> * å‘˜å·¥ç±»ï¼šå§“åã€å·¥èµ„ã€å‘˜å·¥id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Emp</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Emp</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> sal, <span class="hljs-type">int</span> id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSal</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> sal;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSal</span><span class="hljs-params">(<span class="hljs-type">double</span> sal)</span> &#123;<span class="hljs-built_in">this</span>.sal = sal;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> id;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> &#123;<span class="hljs-built_in">this</span>.id = id;&#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Emp&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&quot;, id=&quot;</span> + id +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="HashMap-é˜¶æ®µå°ç»“"><a href="#HashMap-é˜¶æ®µå°ç»“" class="headerlink" title="HashMap é˜¶æ®µå°ç»“"></a>HashMap é˜¶æ®µå°ç»“</h4><ul><li><p>Map æ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼šHashMapã€Hashtable å’Œ Properties</p></li><li><p>HashMap æ˜¯ Map æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»</p></li><li><p>HashMap ä»¥ key-valå¯¹ çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®ï¼ˆHashMap$Nodeç±»å‹ï¼‰</p></li><li><p>key ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯å€¼å¯ä»¥é‡å¤ï¼Œå…è®¸ null é”® å’Œ null å€¼</p></li><li><p>å¦‚æœæ·»åŠ ç›¸åŒçš„keyï¼Œåˆ™ä¼šè¦†ç›–åŸæ¥çš„ key-valï¼Œç­‰åŒäºä¿®æ”¹æ›¿æ¢ï¼ˆkey ä¸å˜ï¼Œval å˜ï¼‰</p></li><li><p>ä¸ HashSet ä¸€æ ·ï¼Œä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œå› ä¸ºåº•å±‚æ˜¯ä»¥ hash è¡¨çš„æ–¹å¼æ¥å­˜å‚¨çš„</p><p>(JDK8 çš„ HashMap åº•å±‚ï¼šæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘)</p></li><li><p>HashMap æ²¡æœ‰å®ç°åŒæ­¥ï¼Œå› æ­¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ–¹æ³•æ²¡æœ‰åšåŒæ­¥äº’æ–¥çš„æ“ä½œï¼Œæ²¡æœ‰ synchronized</p></li></ul><h4 id="HashMap-åº•å±‚æœºåˆ¶åŠæºç å‰–æ"><a href="#HashMap-åº•å±‚æœºåˆ¶åŠæºç å‰–æ" class="headerlink" title="HashMap åº•å±‚æœºåˆ¶åŠæºç å‰–æ"></a>HashMap åº•å±‚æœºåˆ¶åŠæºç å‰–æ</h4> <img src="image-20220916141112139.png" alt="image-20220916141112139" style="zoom:50%;" /><p><strong>æ‰©å®¹æœºåˆ¶ï¼š [å’Œ HashSet ç›¸åŒ]</strong></p><ul><li>HashMap åº•å±‚ç»´æŠ¤äº† Node ç±»å‹çš„æ•°ç»„ tableï¼Œé»˜è®¤ä¸º null</li><li>å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå°†åŠ è½½å› å­ï¼ˆloadfactorï¼‰åˆå§‹åŒ–ä¸º 0.75</li><li>å½“æ·»åŠ  key-val æ—¶ï¼Œé€šè¿‡ key çš„å“ˆå¸Œå€¼å¾—åˆ°åœ¨ table çš„ç´¢å¼•ï¼Œç„¶ååˆ¤æ–­è¯¥ç´¢å¼•å¤„æ˜¯å¦æœ‰å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ åˆ™ç›´æ¥æ·»åŠ ï¼›å¦‚æœè¯¥ç´¢å¼•å¤„æœ‰å…ƒç´ ï¼Œç»§ç»­åˆ¤æ–­è¯¥å…ƒç´ çš„ key å’Œå‡†å¤‡åŠ å…¥çš„ key æ˜¯å¦ç›¸ç­‰ï¼ˆequalsï¼‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™ç›´æ¥æ›¿æ¢ valï¼›å¦‚æœä¸ç›¸ç­‰åˆ™éœ€è¦åˆ¤æ–­æ˜¯æ ‘ç»“æ„è¿˜æ˜¯é“¾è¡¨ç»“æ„ï¼Œåšå‡ºç›¸åº”å¤„ç†ï¼›å¦‚æœæ·»åŠ æ—¶å‘ç°å®¹é‡ä¸å¤Ÿï¼Œåˆ™éœ€è¦æ‰©å®¹</li><li>ç¬¬ 1 æ¬¡æ·»åŠ ï¼Œåˆ™éœ€è¦æ‰©å®¹ table å®¹é‡ä¸º 16ï¼Œä¸´ç•Œå€¼ï¼ˆthresholdï¼‰ä¸º 12ï¼ˆ16*0.75ï¼‰</li><li>ä»¥åå†æ‰©å®¹ï¼Œåˆ™éœ€è¦æ‰©å®¹ table å®¹é‡ä¸ºåŸæ¥çš„ 2å€ï¼ˆ32ï¼‰ï¼Œä¸´ç•Œå€¼ä¸ºåŸæ¥çš„ 2 å€ï¼ˆ24ï¼‰ï¼Œä»¥æ­¤ç±»æ¨</li><li>åœ¨ java8 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ TREEIFY_THRESHOLDï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œå¹¶ä¸” table &gt;&#x3D; MIN_TREEIFY_CAPACITYï¼ˆé»˜è®¤ 64ï¼‰ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–ï¼ˆçº¢é»‘æ ‘ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//HashMapçš„put() æºç è§£è¯»</span><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashMapSource1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">HashMap</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-number">10</span>);<span class="hljs-comment">//ok</span><br>        map.put(<span class="hljs-string">&quot;php&quot;</span>, <span class="hljs-number">10</span>);<span class="hljs-comment">//ok</span><br>        map.put(<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-number">20</span>);<span class="hljs-comment">//æ›¿æ¢value</span><br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<span class="hljs-comment">//</span><br>        <span class="hljs-comment">/* è§£è¯» HashMapçš„æºç +å›¾è§£</span><br><span class="hljs-comment">        1. æ‰§è¡Œæ„é€ å™¨ new HashMap()</span><br><span class="hljs-comment">           åˆå§‹åŒ–åŠ è½½å› å­ loadfactor = 0.75</span><br><span class="hljs-comment">           æ­¤æ—¶ HashMap$Node[] table = null</span><br><span class="hljs-comment">        2. æ‰§è¡Œputï¼ˆå¦‚æœå‚æ•°ä¸­æœ‰åŸºæœ¬æ•°æ®ç±»å‹åˆ™ä¼šå…ˆè¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼‰</span><br><span class="hljs-comment">        æ‰§è¡Œput è°ƒç”¨ hashæ–¹æ³•ï¼Œè®¡ç®— keyçš„ hashå€¼ (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</span><br><span class="hljs-comment">            public V put(K key, V value) &#123;//K = &quot;java&quot; value = 10</span><br><span class="hljs-comment">                return putVal(hash(key), key, value, false, true);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         3. æ‰§è¡Œ putVal</span><br><span class="hljs-comment">         final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span><br><span class="hljs-comment">                   boolean evict) &#123;</span><br><span class="hljs-comment">                Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;//è¾…åŠ©å˜é‡</span><br><span class="hljs-comment">                //01 å¦‚æœåº•å±‚çš„table æ•°ç»„ä¸ºnull, æˆ–è€… length =0 , å°±æ‰©å®¹åˆ°16</span><br><span class="hljs-comment">                if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="hljs-comment">                    n = (tab = resize()).length;</span><br><span class="hljs-comment">                //02 å–å‡ºhashå€¼å¯¹åº”çš„tableçš„ç´¢å¼•ä½ç½®çš„Nodeï¼Œå¦‚æœä¸ºnullï¼Œå°±ç›´æ¥æŠŠåŠ å…¥çš„k-v</span><br><span class="hljs-comment">                //   åˆ›å»ºæˆä¸€ä¸ª Nodeï¼ŒåŠ å…¥è¯¥ä½ç½®å³å¯</span><br><span class="hljs-comment">                if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="hljs-comment">                    tab[i] = newNode(hash, key, value, null);</span><br><span class="hljs-comment">                else &#123;</span><br><span class="hljs-comment">                    Node&lt;K,V&gt; e; K k;//è¾…åŠ©å˜é‡</span><br><span class="hljs-comment">                    // å¦‚æœtableçš„ç´¢å¼•ä½ç½®çš„keyçš„hashç›¸åŒå’Œæ–°çš„keyçš„hashå€¼ç›¸åŒï¼Œ</span><br><span class="hljs-comment">                    // å¹¶ æ»¡è¶³(tableç°æœ‰çš„ç»“ç‚¹çš„keyå’Œå‡†å¤‡æ·»åŠ çš„keyæ˜¯åŒä¸€ä¸ªå¯¹è±¡  || equalsè¿”å›çœŸ)</span><br><span class="hljs-comment">                    // å°±è®¤ä¸ºä¸èƒ½åŠ å…¥æ–°çš„ k-vï¼ˆä½†ä¼šåœ¨åé¢ä»£ç è¿›è¡Œvalçš„æ›¿æ¢ï¼‰</span><br><span class="hljs-comment">                    if (p.hash == hash &amp;&amp;</span><br><span class="hljs-comment">                        ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="hljs-comment">                        e = p;</span><br><span class="hljs-comment">                    //å¦‚æœå½“å‰çš„tableçš„å·²æœ‰çš„Node æ˜¯çº¢é»‘æ ‘ï¼Œå°±æŒ‰ç…§çº¢é»‘æ ‘çš„æ–¹å¼å¤„ç†</span><br><span class="hljs-comment">                    else if (p instanceof TreeNode)</span><br><span class="hljs-comment">                        e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span><br><span class="hljs-comment">                    //å¦‚æœæ‰¾åˆ°çš„ç»“ç‚¹ï¼Œåé¢æ˜¯é“¾è¡¨ï¼Œå°±å¾ªç¯æ¯”è¾ƒ</span><br><span class="hljs-comment">                    else &#123;</span><br><span class="hljs-comment">                        for (int binCount = 0; ; ++binCount) &#123;//æ­»å¾ªç¯</span><br><span class="hljs-comment">                            //å¦‚æœæ•´ä¸ªé“¾è¡¨ï¼Œæ²¡æœ‰å’Œä»–ç›¸åŒ,å°±åŠ åˆ°è¯¥é“¾è¡¨çš„æœ€å</span><br><span class="hljs-comment">                            if ((e = p.next) == null) &#123;</span><br><span class="hljs-comment">                                p.next = newNode(hash, key, value, null);</span><br><span class="hljs-comment">                                //åŠ å…¥åï¼Œåˆ¤æ–­å½“å‰é“¾è¡¨çš„ä¸ªæ•°ï¼Œæ˜¯å¦å·²ç»åˆ°8ä¸ªï¼Œåˆ°8ä¸ªï¼Œå</span><br><span class="hljs-comment">                                //å°±è°ƒç”¨ treeifyBin æ–¹æ³•è¿›è¡Œçº¢é»‘æ ‘çš„è½¬æ¢</span><br><span class="hljs-comment">                                if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="hljs-comment">                                    treeifyBin(tab, hash);</span><br><span class="hljs-comment">                                break;</span><br><span class="hljs-comment">                            &#125;</span><br><span class="hljs-comment">                            //å¦‚æœåœ¨å¾ªç¯æ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰ç›¸åŒçš„keyï¼Œå°±breakï¼Œå°±åªæ˜¯æ›¿æ¢ value</span><br><span class="hljs-comment">                            if (e.hash == hash &amp;&amp;</span><br><span class="hljs-comment">                                ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="hljs-comment">                                break;</span><br><span class="hljs-comment">                            p = e;</span><br><span class="hljs-comment">                        &#125;</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                    if (e != null) &#123; // existing mapping for key</span><br><span class="hljs-comment">                        V oldValue = e.value;</span><br><span class="hljs-comment">                        if (!onlyIfAbsent || oldValue == null)</span><br><span class="hljs-comment">                            e.value = value; //æ›¿æ¢ï¼Œkeyå¯¹åº”value</span><br><span class="hljs-comment">                        afterNodeAccess(e);</span><br><span class="hljs-comment">                        return oldValue;</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">                ++modCount; //æ¯å¢åŠ ä¸€ä¸ªNode ,å°±size++</span><br><span class="hljs-comment">                if (++size &gt; threshold[12-24-48]) //å¦‚æœ size &gt; ä¸´ç•Œå€¼ï¼Œå°±æ‰©å®¹</span><br><span class="hljs-comment">                    resize();</span><br><span class="hljs-comment">                afterNodeInsertion(evict);</span><br><span class="hljs-comment">                return null;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          5. å…³äºæ ‘åŒ–(è½¬æˆçº¢é»‘æ ‘)</span><br><span class="hljs-comment">          // å¦‚æœtable ä¸ºnullï¼Œæˆ–è€…å¤§å°è¿˜æ²¡æœ‰åˆ° 64ï¼Œæš‚æ—¶ä¸æ ‘åŒ–ï¼Œè€Œæ˜¯è¿›è¡Œæ‰©å®¹.</span><br><span class="hljs-comment">          // å¦åˆ™æ‰ä¼šçœŸæ­£çš„æ ‘åŒ– / å‰ªæï¼ˆæŠŠæ ‘é‡æ–°è½¬ä¸ºé“¾è¡¨ï¼‰</span><br><span class="hljs-comment">          final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123;</span><br><span class="hljs-comment">            int n, index; Node&lt;K,V&gt; e;</span><br><span class="hljs-comment">            if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="hljs-comment">                resize();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//HashMapæ‰©å®¹è§¦å‘æ ‘åŒ–æ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashMapSource2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">HashMap</span> <span class="hljs-variable">hashMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">12</span>; i++) &#123;<br>            hashMap.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>(i), <span class="hljs-string">&quot;hello&quot;</span>);<br>        &#125;<br>        hashMap.put(<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-string">&quot;bbb&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;hashMap=&quot;</span> + hashMap); <span class="hljs-comment">//12ä¸ª k-v</span><br>        <span class="hljs-comment">//å¸ƒç½®ä¸€ä¸ªä»»åŠ¡ï¼Œè‡ªå·±è®¾è®¡ä»£ç å»éªŒè¯ï¼Œtable çš„æ‰©å®¹</span><br>        <span class="hljs-comment">//0 -&gt; 16(12) -&gt; 32(24) -&gt; 64(64*0.75=48)-&gt; 128 (96) -&gt;</span><br>        <span class="hljs-comment">//è‡ªå·±è®¾è®¡ç¨‹åºï¼ŒéªŒè¯ -&gt; å¢å¼ºè‡ªå·±é˜…è¯»æºç èƒ½åŠ›. çœ‹åˆ«äººä»£ç .</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>  &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> num;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-built_in">this</span>.num = num;<br>    &#125;<br>    <span class="hljs-comment">//è®©æ‰€æœ‰çš„Aå¯¹è±¡çš„hashCodeéƒ½æ˜¯100</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;\nA&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;num=&quot;</span> + num +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Map-æ¥å£å®ç°ç±»-Hashtable"><a href="#Map-æ¥å£å®ç°ç±»-Hashtable" class="headerlink" title="Map æ¥å£å®ç°ç±»-Hashtable"></a>Map æ¥å£å®ç°ç±»-Hashtable</h3><h4 id="HashTable-çš„åŸºæœ¬ä»‹ç»"><a href="#HashTable-çš„åŸºæœ¬ä»‹ç»" class="headerlink" title="HashTable çš„åŸºæœ¬ä»‹ç»"></a>HashTable çš„åŸºæœ¬ä»‹ç»</h4><ul><li>å­˜æ”¾çš„å…ƒç´ æ˜¯é”®å€¼å¯¹ï¼šå³ K-V</li><li>hashtable çš„é”®å’Œå€¼éƒ½ä¸èƒ½ä¸º nullï¼Œå¦åˆ™ä¼šæŠ›å‡º NullPointerException</li><li>hashTable ä½¿ç”¨æ–¹æ³•åŸºæœ¬ä¸Šå’Œ HashMap ä¸€æ ·</li><li>hashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆsynchronizedï¼‰ï¼ŒhashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Hashtable;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashTableExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Hashtable</span> <span class="hljs-variable">table</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>();<span class="hljs-comment">//ok</span><br>        table.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">//ok</span><br>        <span class="hljs-comment">//table.put(null, 100); //å¼‚å¸¸ NullPointerException</span><br>        <span class="hljs-comment">//table.put(&quot;john&quot;, null);//å¼‚å¸¸ NullPointerException</span><br>        table.put(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-number">100</span>);<span class="hljs-comment">//ok</span><br>        table.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">100</span>);<span class="hljs-comment">//ok</span><br>        table.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">88</span>);<span class="hljs-comment">//æ›¿æ¢</span><br>        table.put(<span class="hljs-string">&quot;hello1&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello2&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello3&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello4&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello5&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello6&quot;</span>, <span class="hljs-number">1</span>);<br>        System.out.println(table);<br>        <span class="hljs-comment">//ç®€å•è¯´æ˜ä¸€ä¸‹Hashtableçš„åº•å±‚</span><br>        <span class="hljs-comment">//1. åº•å±‚æœ‰æ•°ç»„ Hashtable$Entry[] åˆå§‹åŒ–å¤§å°ä¸º 11</span><br>        <span class="hljs-comment">//2. ä¸´ç•Œå€¼ threshold 8 = 11 * 0.75</span><br>        <span class="hljs-comment">//3. æ‰©å®¹: æŒ‰ç…§è‡ªå·±çš„æ‰©å®¹æœºåˆ¶æ¥è¿›è¡Œå³å¯.</span><br>        <span class="hljs-comment">//4. æ‰§è¡Œ æ–¹æ³• addEntry(hash, key, value, index); æ·»åŠ K-V å°è£…åˆ°Entry</span><br>        <span class="hljs-comment">//5. å½“ if (count &gt;= threshold) æ»¡è¶³æ—¶ï¼Œå°±è¿›è¡Œæ‰©å®¹</span><br>        <span class="hljs-comment">//5. æŒ‰ç…§ int newCapacity = (oldCapacity &lt;&lt; 1) + 1; çš„å¤§å°æ‰©å®¹.</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Hashtable-å’Œ-HashMap-å¯¹æ¯”"><a href="#Hashtable-å’Œ-HashMap-å¯¹æ¯”" class="headerlink" title="Hashtable å’Œ HashMap å¯¹æ¯”"></a>Hashtable å’Œ HashMap å¯¹æ¯”</h4> <img src="image-20220916161139702.png" alt="image-20220916161139702" style="zoom: 50%;" /><h3 id="Map-æ¥å£å®ç°ç±»-Properties"><a href="#Map-æ¥å£å®ç°ç±»-Properties" class="headerlink" title="Map æ¥å£å®ç°ç±»-Properties"></a>Map æ¥å£å®ç°ç±»-Properties</h3><h4 id="åŸºæœ¬ä»‹ç»-4"><a href="#åŸºæœ¬ä»‹ç»-4" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li><p>Properties ç±»ç»§æ‰¿è‡ª Hashtable ç±»å¹¶ä¸”å®ç°äº† Map æ¥å£ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ä¸€ç§é”®å€¼å¯¹çš„å½¢å¼æ¥ä¿å­˜æ•°æ®</p></li><li><p>Properties çš„ä½¿ç”¨ç‰¹ç‚¹å’Œ Hashtable ç±»ä¼¼ï¼ˆkey å’Œ value ä¸èƒ½ä¸º nullï¼‰</p></li><li><p>Properties è¿˜å¯ä»¥ç”¨äº ä» xxx.properties æ–‡ä»¶ä¸­ï¼ŒåŠ è½½æ•°æ®åˆ° Properties ç±»å¯¹è±¡ï¼Œå¹¶è¿›è¡Œè¯»å–å’Œä¿®æ”¹</p></li><li><p>è¯´æ˜ï¼šå·¥ä½œå xxx.properties æ–‡ä»¶é€šå¸¸ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹åœ¨IOæµä¸¾ä¾‹è¯´æ˜</p><p>Java è¯»å†™ Properties é…ç½®æ–‡ä»¶ï¼š<a href="https://www.cnblogs.com/xudong-bupt/p/3758136.html">https://www.cnblogs.com/xudong-bupt/p/3758136.html</a></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Properties_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. Properties ç»§æ‰¿  Hashtable</span><br>        <span class="hljs-comment">//2. å¯ä»¥é€šè¿‡ k-v å­˜æ”¾æ•°æ®ï¼Œå½“ç„¶key å’Œ value ä¸èƒ½ä¸º null</span><br>        <span class="hljs-comment">//å¢åŠ </span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//properties.put(null, &quot;abc&quot;);//æŠ›å‡º ç©ºæŒ‡é’ˆå¼‚å¸¸</span><br>        <span class="hljs-comment">//properties.put(&quot;abc&quot;, null); //æŠ›å‡º ç©ºæŒ‡é’ˆå¼‚å¸¸</span><br>        properties.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">100</span>);<span class="hljs-comment">//k-v</span><br>        properties.put(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-number">100</span>);<br>        properties.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">100</span>);<br>        properties.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">88</span>);<span class="hljs-comment">//å¦‚æœæœ‰ç›¸åŒçš„key ï¼Œ valueè¢«æ›¿æ¢</span><br>        System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><br>        <span class="hljs-comment">//é€šè¿‡k è·å–å¯¹åº”å€¼</span><br>        System.out.println(properties.get(<span class="hljs-string">&quot;lic&quot;</span>));<span class="hljs-comment">//88</span><br><br>        <span class="hljs-comment">//åˆ é™¤</span><br>        properties.remove(<span class="hljs-string">&quot;lic&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><br>        <span class="hljs-comment">//ä¿®æ”¹</span><br>        properties.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-string">&quot;çº¦ç¿°&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="TreeSet-æºç è§£è¯»"><a href="#TreeSet-æºç è§£è¯»" class="headerlink" title="TreeSet æºç è§£è¯»"></a>TreeSet æºç è§£è¯»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeSet_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. å½“æˆ‘ä»¬ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œåˆ›å»ºTreeSetæ—¶ï¼Œé»˜è®¤ä½¿ç”¨keyçš„Comparatoræ¯”è¾ƒå™¨æ’åº</span><br>        <span class="hljs-comment">//2. è€å¸ˆå¸Œæœ›æ·»åŠ çš„å…ƒç´ ï¼ŒæŒ‰ç…§å­—ç¬¦ä¸²å¤§å°æ¥æ’åº</span><br>        <span class="hljs-comment">//3. ä½¿ç”¨ TreeSet æä¾›çš„ä¸€ä¸ªæ„é€ å™¨ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨(åŒ¿åå†…éƒ¨ç±»)</span><br>        <span class="hljs-comment">//   å¹¶æŒ‡å®šæ’åºè§„åˆ™</span><br>        <span class="hljs-comment">//4. ç®€å•çœ‹çœ‹æºç </span><br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        1. æ„é€ å™¨æŠŠä¼ å…¥çš„æ¯”è¾ƒå™¨å¯¹è±¡ï¼Œèµ‹ç»™äº† TreeSetçš„åº•å±‚çš„ TreeMapçš„å±æ€§this.comparator</span><br><span class="hljs-comment">         public TreeMap(Comparator&lt;? super K&gt; comparator) &#123;</span><br><span class="hljs-comment">                this.comparator = comparator;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         2. åœ¨ è°ƒç”¨ treeSet.add(&quot;tom&quot;), åœ¨åº•å±‚ä¼šæ‰§è¡Œåˆ°</span><br><span class="hljs-comment">         if (cpr != null) &#123;//cpr å°±æ˜¯æˆ‘ä»¬çš„åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)</span><br><span class="hljs-comment">            do &#123;</span><br><span class="hljs-comment">                parent = t;</span><br><span class="hljs-comment">                //åŠ¨æ€ç»‘å®šåˆ°æˆ‘ä»¬çš„åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)compare</span><br><span class="hljs-comment">                cmp = cpr.compare(key, t.key);</span><br><span class="hljs-comment">                if (cmp &lt; 0)</span><br><span class="hljs-comment">                    t = t.left;</span><br><span class="hljs-comment">                else if (cmp &gt; 0)</span><br><span class="hljs-comment">                    t = t.right;</span><br><span class="hljs-comment">                else //å¦‚æœç›¸ç­‰ï¼Œå³è¿”å›0,è¿™ä¸ªKeyå°±æ²¡æœ‰åŠ å…¥(å¥½å¥½ç†è§£)</span><br><span class="hljs-comment">                    return t.setValue(value);</span><br><span class="hljs-comment">            &#125; while (t != null);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br><span class="hljs-comment">//        TreeSet treeSet = new TreeSet();</span><br>        <span class="hljs-type">TreeSet</span> <span class="hljs-variable">treeSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-comment">//ä¸‹é¢ è°ƒç”¨Stringçš„ compareToæ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²å¤§å°æ¯”è¾ƒ</span><br>                <span class="hljs-comment">//return ((String) o2).compareTo((String) o1);</span><br>                <span class="hljs-comment">//å¦‚æœè€éŸ©è¦æ±‚åŠ å…¥çš„å…ƒç´ ï¼ŒæŒ‰ç…§é•¿åº¦å¤§å°æ’åº</span><br>                <span class="hljs-keyword">return</span> ((String) o1).length() - ((String) o2).length();<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//æ·»åŠ æ•°æ®.</span><br>        treeSet.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        treeSet.add(<span class="hljs-string">&quot;tom&quot;</span>);<span class="hljs-comment">//3</span><br>        treeSet.add(<span class="hljs-string">&quot;sp&quot;</span>);<br>        treeSet.add(<span class="hljs-string">&quot;a&quot;</span>);<br>        treeSet.add(<span class="hljs-string">&quot;abc&quot;</span>);<span class="hljs-comment">//3ï¼ˆå› ä¸ºå‰é¢å·²ç»æœ‰é•¿åº¦ä¸º3çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¸èƒ½åŠ å…¥ï¼‰</span><br>        <span class="hljs-comment">//TreeSetä¸­åˆ¤æ–­èƒ½å¦åŠ å…¥çš„æ–¹æ³•æ˜¯compareï¼Œè€Œä¸æ˜¯equals</span><br>        System.out.println(<span class="hljs-string">&quot;treeSet=&quot;</span> + treeSet);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="TreeMap-æºç è§£è¯»"><a href="#TreeMap-æºç è§£è¯»" class="headerlink" title="TreeMap æºç è§£è¯»"></a>TreeMap æºç è§£è¯»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.TreeMap;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeMap_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨é»˜è®¤çš„æ„é€ å™¨ï¼Œåˆ›å»ºTreeMap, é»˜è®¤ä½¿ç”¨keyçš„Comparatoræ¯”è¾ƒå™¨æ’åº</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            è¦æ±‚ï¼šæŒ‰ç…§ä¼ å…¥çš„ k(String) çš„å¤§å°è¿›è¡Œæ’åº</span><br><span class="hljs-comment">         */</span><br><span class="hljs-comment">//        TreeMap treeMap = new TreeMap();</span><br>        <span class="hljs-type">TreeMap</span> <span class="hljs-variable">treeMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-comment">//æŒ‰ç…§ä¼ å…¥çš„ k(String) çš„å¤§å°è¿›è¡Œæ’åº</span><br>                <span class="hljs-comment">//æŒ‰ç…§K(String) çš„é•¿åº¦å¤§å°æ’åº</span><br>                <span class="hljs-comment">//return ((String) o2).compareTo((String) o1);</span><br>                <span class="hljs-keyword">return</span> ((String) o2).length() - ((String) o1).length();<br>            &#125;<br>        &#125;);<br>        treeMap.put(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-string">&quot;æ°å…‹&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;æ±¤å§†&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;kristina&quot;</span>, <span class="hljs-string">&quot;å…‹ç‘æ–¯æè¯º&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-string">&quot;æ–¯å¯†æ–¯&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-string">&quot;éŸ©é¡ºå¹³&quot;</span>); <span class="hljs-comment">//åŠ å…¥ä¸äº†</span><br>        <span class="hljs-comment">//TreeMapä¸­åˆ¤æ–­èƒ½å¦åŠ å…¥çš„æ–¹æ³•æ˜¯compareï¼Œè€Œä¸æ˜¯equals</span><br>        System.out.println(<span class="hljs-string">&quot;treemap=&quot;</span> + treeMap);<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            è§£è¯»æºç ï¼š</span><br><span class="hljs-comment">            1. æ„é€ å™¨. æŠŠä¼ å…¥çš„å®ç°äº† Comparatoræ¥å£çš„åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)ï¼Œä¼ ç»™ç»™TreeMapçš„comparator</span><br><span class="hljs-comment">             public TreeMap(Comparator&lt;? super K&gt; comparator) &#123;</span><br><span class="hljs-comment">                this.comparator = comparator;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            2. è°ƒç”¨putæ–¹æ³•</span><br><span class="hljs-comment">            2.1 ç¬¬ä¸€æ¬¡æ·»åŠ , æŠŠk-v å°è£…åˆ° Entryå¯¹è±¡ï¼Œæ”¾å…¥root</span><br><span class="hljs-comment">            Entry&lt;K,V&gt; t = root;</span><br><span class="hljs-comment">            if (t == null) &#123;</span><br><span class="hljs-comment">                // æ­¤å¤„è°ƒç”¨compareæ–¹æ³•æ˜¯ä¸ºäº†åˆ¤æ–­keyæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-comment">                // å¦‚æœä¸ºç©ºï¼Œcompare é‡Œé¢åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</span><br><span class="hljs-comment">                compare(key, key); // type (and possibly null) check</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                root = new Entry&lt;&gt;(key, value, null);</span><br><span class="hljs-comment">                size = 1;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">                return null;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            2.2 ä»¥åæ·»åŠ </span><br><span class="hljs-comment">            Comparator&lt;? super K&gt; cpr = comparator;</span><br><span class="hljs-comment">            if (cpr != null) &#123;</span><br><span class="hljs-comment">                do &#123; //éå†æ‰€æœ‰çš„key , ç»™å½“å‰keyæ‰¾åˆ°é€‚å½“ä½ç½®</span><br><span class="hljs-comment">                    parent = t;</span><br><span class="hljs-comment">                    //åŠ¨æ€ç»‘å®šåˆ°æˆ‘ä»¬çš„åŒ¿åå†…éƒ¨ç±»çš„compare</span><br><span class="hljs-comment">                    cmp = cpr.compare(key, t.key);</span><br><span class="hljs-comment">                    if (cmp &lt; 0)</span><br><span class="hljs-comment">                        t = t.left;</span><br><span class="hljs-comment">                    else if (cmp &gt; 0)</span><br><span class="hljs-comment">                        t = t.right;</span><br><span class="hljs-comment">                    //å¦‚æœéå†è¿‡ç¨‹ä¸­ï¼Œå‘ç°å‡†å¤‡æ·»åŠ çš„Key å’Œå½“å‰å·²æœ‰çš„Key ç›¸ç­‰ï¼Œå°±ä¸æ·»åŠ </span><br><span class="hljs-comment">                    else</span><br><span class="hljs-comment">                        return t.setValue(value);</span><br><span class="hljs-comment">                &#125; while (t != null);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“-å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»-è®°ä½"><a href="#æ€»ç»“-å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»-è®°ä½" class="headerlink" title="æ€»ç»“-å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»(è®°ä½)"></a>æ€»ç»“-å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»(è®°ä½)</h3><img src="image-20220916163139229.png" alt="image-20220916163139229" style="zoom: 80%;" /><h3 id="Collections-å·¥å…·ç±»"><a href="#Collections-å·¥å…·ç±»" class="headerlink" title="Collections å·¥å…·ç±»"></a>Collections å·¥å…·ç±»</h3><h4 id="åŸºæœ¬ä»‹ç»-5"><a href="#åŸºæœ¬ä»‹ç»-5" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li>Collections æ˜¯ä¸€ä¸ªæ“ä½œ Setã€List å’Œ Map ç­‰é›†åˆçš„å·¥å…·ç±»</li><li>Collections ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€çš„æ–¹æ³•å¯¹é›†åˆå…ƒç´ è¿›è¡Œæ’åºã€æŸ¥è¯¢å’Œä¿®æ”¹ç­‰æ“ä½œ</li></ul><h4 id="æ’åºæ“ä½œ"><a href="#æ’åºæ“ä½œ" class="headerlink" title="æ’åºæ“ä½œ"></a>æ’åºæ“ä½œ</h4><p>ä»¥ä¸‹å‡ä¸º static æ–¹æ³•</p><ul><li>reverse(List)ï¼šåè½¬ List ä¸­å…ƒç´ çš„é¡ºåº</li><li>shuffle(List)ï¼šå¯¹ Liat é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº</li><li>sort(List)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº</li><li>sort(List, Comparator)ï¼šæ ¹æ®æŒ‡å®šçš„ Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åº</li><li>swap(List, int, int)ï¼šå°†æŒ‡å®š list é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Collections_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºArrayList é›†åˆï¼Œç”¨äºæµ‹è¯•.</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;smith&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;king&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;milan&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//      # reverse(List)ï¼šåè½¬ List ä¸­å…ƒç´ çš„é¡ºåº</span><br>        Collections.reverse(list);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//      # shuffle(List)ï¼šå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº</span><br><span class="hljs-comment">//        for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="hljs-comment">//            Collections.shuffle(list);</span><br><span class="hljs-comment">//            System.out.println(&quot;list=&quot; + list);</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//      # sort(List)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº</span><br>        Collections.sort(list);<br>        System.out.println(<span class="hljs-string">&quot;è‡ªç„¶æ’åºå&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//      # sort(Listï¼ŒComparator)ï¼šæ ¹æ®æŒ‡å®šçš„ Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åº</span><br>        <span class="hljs-comment">//æˆ‘ä»¬å¸Œæœ›æŒ‰ç…§ å­—ç¬¦ä¸²çš„é•¿åº¦å¤§å°æ’åº</span><br>        Collections.sort(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-comment">//å¯ä»¥åŠ å…¥æ ¡éªŒä»£ç .</span><br>                <span class="hljs-keyword">return</span> ((String) o2).length() - ((String) o1).length();<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;å­—ç¬¦ä¸²é•¿åº¦å¤§å°æ’åº=&quot;</span> + list);<br><br><span class="hljs-comment">//      # swap(Listï¼Œintï¼Œ int)ï¼šå°†æŒ‡å®š list é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢</span><br>        <span class="hljs-comment">//æ¯”å¦‚</span><br>        Collections.swap(list, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>        System.out.println(<span class="hljs-string">&quot;äº¤æ¢åçš„æƒ…å†µ&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><br><span class="hljs-comment">//      # Object max(Collection)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ </span><br>        System.out.println(<span class="hljs-string">&quot;è‡ªç„¶é¡ºåºæœ€å¤§å…ƒç´ =&quot;</span> + Collections.max(list));<br><span class="hljs-comment">//      # Object max(Collectionï¼ŒComparator)ï¼šä»¥ComparatoræŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ </span><br>        <span class="hljs-comment">//æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦è¿”å›é•¿åº¦æœ€å¤§çš„å…ƒç´ </span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">maxObject</span> <span class="hljs-operator">=</span> Collections.max(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-keyword">return</span> ((String)o1).length() - ((String)o2).length();<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;é•¿åº¦æœ€å¤§çš„å…ƒç´ =&quot;</span> + maxObject);<br><br><span class="hljs-comment">//      # Object min(Collection)</span><br><span class="hljs-comment">//      # Object min(Collectionï¼ŒComparator)</span><br>        <span class="hljs-comment">//ä¸Šé¢çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå‚è€ƒmaxå³å¯</span><br><br><span class="hljs-comment">//      # int frequency(Collectionï¼ŒObject)ï¼šè¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°</span><br>        System.out.println(<span class="hljs-string">&quot;tomå‡ºç°çš„æ¬¡æ•°=&quot;</span> + Collections.frequency(list, <span class="hljs-string">&quot;tom&quot;</span>));<br><br><span class="hljs-comment">//      # void copy(List dest,List src)ï¼šå°†srcä¸­çš„å†…å®¹å¤åˆ¶åˆ°destä¸­</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">dest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        <span class="hljs-comment">//ä¸ºäº†å®Œæˆä¸€ä¸ªå®Œæ•´æ‹·è´ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç»™dest èµ‹å€¼ï¼Œå¤§å°å’Œlist.size()ä¸€æ ·</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>            dest.add(<span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//æ‹·è´</span><br>        Collections.copy(dest, list);<br>        System.out.println(<span class="hljs-string">&quot;dest=&quot;</span> + dest);<br><br><span class="hljs-comment">//      # boolean replaceAll(List listï¼ŒObject oldValï¼ŒObject newVal)ï¼šä½¿ç”¨æ–°å€¼æ›¿æ¢ List å¯¹è±¡çš„æ‰€æœ‰æ—§å€¼</span><br>        <span class="hljs-comment">//å¦‚æœlistä¸­ï¼Œæœ‰tom å°±æ›¿æ¢æˆ æ±¤å§†</span><br>        Collections.replaceAll(list, <span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;æ±¤å§†&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;listæ›¿æ¢å=&quot;</span> + list);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><p><strong>è¯•åˆ†æHashSetå’ŒTreeSetsåˆ†åˆ«å¦‚ä½•å®ç°å»é‡çš„</strong> </p><p> (1)HashSetçš„å»é‡æœºåˆ¶ï¼šhashCode() + equals()ï¼Œåº•å±‚å…ˆé€šè¿‡å­˜å…¥å¯¹è±¡ï¼Œè¿›è¡Œè¿ç®—å¾—åˆ°ä¸€ä¸ª hash å€¼ï¼Œé€šè¿‡ hash å€¼å¾—åˆ°å¯¹åº”çš„ç´¢å¼•ï¼Œå¦‚æœå‘ç° table ç´¢å¼•æ‰€åœ¨çš„ä½ç½®ï¼Œæ²¡æœ‰æ•°æ®ï¼Œå°±ç›´æ¥å­˜æ”¾ï¼›å¦‚æœæœ‰æ•°æ®ï¼Œå°±è¿›è¡Œ equals æ¯”è¾ƒ[éå†æ¯”è¾ƒ]ï¼Œå¦‚æœæ¯”è¾ƒåï¼Œä¸ç›¸åŒï¼Œå°±åŠ å…¥ï¼Œå¦åˆ™å°±ä¸åŠ å…¥.  </p><p>(2)TreeSetçš„å»é‡æœºåˆ¶ï¼šå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ª Comparator åŒ¿åå¯¹è±¡ï¼Œå°±ä½¿ç”¨å®ç°çš„ compare å»é‡ï¼Œå¦‚æœæ–¹æ³•è¿”å›0ï¼Œå°±è®¤ä¸ºæ˜¯ç›¸åŒçš„å…ƒç´ &#x2F;æ•°æ®ï¼Œå°±ä¸æ·»åŠ ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥ä¸€ä¸ª Comparator åŒ¿åå¯¹è±¡ï¼Œåˆ™ä»¥æ·»åŠ çš„å¯¹è±¡å®ç°çš„Compareable æ¥å£çš„ compareTo å»é‡.</p><p><strong>ä¸€ä¸ªé™·é˜±ï¼š</strong>å­˜æ”¾ä¹‹åæ›´æ”¹å±æ€§ä¸ä¼šæ”¹å˜è¯¥å…ƒç´ ä½ç½®ï¼Œå› æ­¤ï¼Œå½“å†æ¬¡å­˜æ”¾ä¸ä¿®æ”¹åä¸€æ ·çš„å…ƒç´ æ—¶ï¼Œè‹¥è®¡ç®—å‡ºçš„ hashCode ä¸æ›´æ”¹å±æ€§å‰çš„ hashCode ä¸ä¸€è‡´ï¼Œå°±ä¼šè®¡ç®—å‡ºæ–°çš„ä½ç½®ï¼Œä»è€Œèƒ½åŠ å…¥è¿›å»</p> <img src="image-20220916194412765.png" alt="image-20220916194412765" style="zoom: 60%;" /><p><strong>Vector å’Œ ArrayList çš„æ¯”è¾ƒ</strong></p> <img src="image-20220916194828683.png" alt="image-20220916194828683" style="zoom: 67%;" /><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><h3 id="æ³›å‹çš„å¥½å¤„"><a href="#æ³›å‹çš„å¥½å¤„" class="headerlink" title="æ³›å‹çš„å¥½å¤„"></a>æ³›å‹çš„å¥½å¤„</h3><ul><li><p>ç¼–è¯‘æ—¶ï¼Œæ£€æŸ¥æ·»åŠ å…ƒç´ çš„ç±»å‹ï¼Œæé«˜äº†å®‰å…¨æ€§</p></li><li><p>å‡å°‘äº†ç±»å‹è½¬æ¢çš„æ¬¡æ•°ï¼Œæé«˜æ•ˆç‡</p><ul><li><p>ä¸ä½¿ç”¨æ³›å‹ï¼š</p><p>Dog -åŠ å…¥-&gt; Object -å–å‡º-&gt; Dog  &#x2F;&#x2F;æ”¾å…¥åˆ° ArrayList ä¼šå…ˆè½¬æˆ Objectï¼Œåœ¨å–å‡ºæ—¶ï¼Œè¿˜éœ€è¦è½¬å› Dog</p></li><li><p>ä½¿ç”¨æ³›å‹ï¼š</p><p>Dog -åŠ å…¥-&gt; Dog -å–å‡º-&gt; Dog  &#x2F;&#x2F;æ”¾å…¥æ—¶å’Œå–å‡ºæ—¶ï¼Œä¸éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæé«˜æ•ˆç‡</p></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generic02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥è§£å†³</span><br><span class="hljs-comment">//        ArrayList arrayList = new ArrayList();</span><br><span class="hljs-comment">//        arrayList.add(new Dog(&quot;æ—ºè´¢&quot;, 10));</span><br><span class="hljs-comment">//        arrayList.add(new Dog(&quot;å‘è´¢&quot;, 1));</span><br><span class="hljs-comment">//        arrayList.add(new Dog(&quot;å°é»„&quot;, 5));</span><br><span class="hljs-comment">//        //å‡å¦‚æˆ‘ä»¬çš„ç¨‹åºå‘˜ï¼Œä¸å°å¿ƒï¼Œæ·»åŠ äº†ä¸€åªçŒ«ï¼Œéå†æ—¶å°±ä¼šå‡ºç°ClassCastExceptionå¼‚å¸¸</span><br><span class="hljs-comment">//        arrayList.add(new Cat(&quot;æ‹›è´¢çŒ«&quot;, 8));</span><br><span class="hljs-comment">//        //éå†</span><br><span class="hljs-comment">//        for (Object o : arrayList) &#123;</span><br><span class="hljs-comment">//            //å‘ä¸‹è½¬å‹Object -&gt;Dog</span><br><span class="hljs-comment">//            Dog dog = (Dog) o;</span><br><span class="hljs-comment">//            System.out.println(dog.getName() + &quot;-&quot; + dog.getAge());</span><br><span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">// ä½¿ç”¨æ³›å‹</span><br>        <span class="hljs-comment">//è€éŸ©è§£è¯»</span><br>        <span class="hljs-comment">//1. å½“æˆ‘ä»¬ ArrayList&lt;Dog&gt; è¡¨ç¤ºå­˜æ”¾åˆ° ArrayList é›†åˆä¸­çš„å…ƒç´ æ˜¯Dogç±»å‹ (ç»†èŠ‚åé¢è¯´...)</span><br>        <span class="hljs-comment">//2. å¦‚æœç¼–è¯‘å™¨å‘ç°æ·»åŠ çš„ç±»å‹ï¼Œä¸æ»¡è¶³è¦æ±‚ï¼Œå°±ä¼šæŠ¥é”™</span><br>        <span class="hljs-comment">//3. åœ¨éå†çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥å–å‡º Dog ç±»å‹è€Œä¸æ˜¯ Object</span><br>        <span class="hljs-comment">//4. public class ArrayList&lt;E&gt; &#123;&#125; //Eç§°ä¸ºæ³›å‹,é‚£ä¹ˆDog-&gt;E</span><br>        ArrayList&lt;Dog&gt; arrayList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Dog&gt;();<br>        arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;æ—ºè´¢&quot;</span>, <span class="hljs-number">10</span>));<br>        arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;å‘è´¢&quot;</span>, <span class="hljs-number">1</span>));<br>        arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;å°é»„&quot;</span>, <span class="hljs-number">5</span>));<br>        <span class="hljs-comment">//å‡å¦‚æˆ‘ä»¬çš„ç¨‹åºå‘˜ï¼Œä¸å°å¿ƒï¼Œæ·»åŠ äº†ä¸€åªçŒ«</span><br>        <span class="hljs-comment">//arrayList.add(new Cat(&quot;æ‹›è´¢çŒ«&quot;, 8));</span><br>        System.out.println(<span class="hljs-string">&quot;===ä½¿ç”¨æ³›å‹====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Dog dog : arrayList) &#123;<br>            System.out.println(dog.getName() + <span class="hljs-string">&quot;-&quot;</span> + dog.getAge());<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">1.è¯·ç¼–å†™ç¨‹åºï¼Œåœ¨ArrayList ä¸­ï¼Œæ·»åŠ 3ä¸ªDogå¯¹è±¡</span><br><span class="hljs-comment">2.Dogå¯¹è±¡å«æœ‰name å’Œ age, å¹¶è¾“å‡ºname å’Œ age (è¦æ±‚ä½¿ç”¨getXxx())</span><br><span class="hljs-comment">3.è€å¸ˆä½¿ç”¨æ³›å‹æ¥å®Œæˆä»£ç </span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> &#123; <span class="hljs-comment">//Catç±»</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cat</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ³›å‹çš„ç†è§£"><a href="#æ³›å‹çš„ç†è§£" class="headerlink" title="æ³›å‹çš„ç†è§£"></a>æ³›å‹çš„ç†è§£</h3><p>æ³›ï¼ˆå¹¿æ³›ï¼‰å‹ï¼ˆç±»å‹ï¼‰ç†è§£ï¼šæ³›å‹æ˜¯ä¸€ç§å¯ä»¥è¡¨ç¤ºæ•°æ®ç±»å‹çš„ç±»å‹ï¼ˆæŠŠæ•°æ®ç±»å‹èµ‹ç»™æ³›å‹ï¼‰</p><ul><li><p>æ³›å‹åˆç§°å‚æ•°åŒ–ç±»å‹ï¼Œæ˜¯ JDK5.0 å‡ºç°çš„æ–°ç‰¹æ€§ï¼Œè§£å†³æ•°æ®ç±»å‹çš„å®‰å…¨æ€§é—®é¢˜</p></li><li><p>åœ¨ç±»å£°æ˜æˆ–å®ä¾‹åŒ–æ—¶ï¼Œåªè¦æŒ‡å®šå¥½éœ€è¦çš„å…·ä½“çš„ç±»å‹å³å¯</p></li><li><p>Java æ³›å‹å¯ä»¥ä¿è¯å¦‚æœç¨‹åºåœ¨ç¼–è¯‘æ—¶æ²¡æœ‰å‘å‡ºè­¦å‘Šï¼Œè¿è¡Œæ—¶å°±ä¸ä¼šäº§ç”Ÿ ClassCastException å¼‚å¸¸</p><p>åŒæ—¶ï¼Œä»£ç æ›´åŠ ç®€æ´å¥å£®</p></li><li><p>æ³›å‹çš„ä½œç”¨æ˜¯ï¼šå¯ä»¥åœ¨ç±»å£°æ˜æ—¶é€šè¿‡ä¸€ä¸ªæ ‡è¯†è¡¨ç¤ºç±»ä¸­æŸä¸ªå±æ€§çš„ç±»å‹ï¼Œæˆ–è€…æ˜¯æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼çš„ç±»å‹ï¼Œæˆ–è€…æ˜¯å‚æ•°ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generic03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//æ³¨æ„ï¼Œç‰¹åˆ«å¼ºè°ƒï¼šEå…·ä½“çš„æ•°æ®ç±»å‹åœ¨å®šä¹‰Personå¯¹è±¡çš„æ—¶å€™æŒ‡å®šï¼Œå³åœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±ç¡®å®šEæ˜¯ä»€ä¹ˆç±»å‹</span><br>        Person&lt;String&gt; person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>&lt;String&gt;(<span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span>);<br>        person.show(); <span class="hljs-comment">//String</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼Œä¸Šé¢çš„Personç±»</span><br><span class="hljs-comment">class Person &#123;</span><br><span class="hljs-comment">    String s ;</span><br><span class="hljs-comment">    //Eè¡¨ç¤º sçš„æ•°æ®ç±»å‹, è¯¥æ•°æ®ç±»å‹åœ¨å®šä¹‰Personå¯¹è±¡çš„æ—¶å€™æŒ‡å®š,å³åœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±ç¡®å®šEæ˜¯ä»€ä¹ˆç±»å‹</span><br><span class="hljs-comment">    public Person(String s) &#123;//Eä¹Ÿå¯ä»¥æ˜¯å‚æ•°ç±»å‹</span><br><span class="hljs-comment">        this.s = s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    public String f() &#123;//è¿”å›ç±»å‹ä½¿ç”¨E</span><br><span class="hljs-comment">        return s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">         */</span><br>        Person&lt;Integer&gt; person2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>&lt;Integer&gt;(<span class="hljs-number">100</span>);<br>        person2.show();<span class="hljs-comment">//Integer</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">class Person &#123;</span><br><span class="hljs-comment">    Integer s ;</span><br><span class="hljs-comment">    //Eè¡¨ç¤º sçš„æ•°æ®ç±»å‹, è¯¥æ•°æ®ç±»å‹åœ¨å®šä¹‰Personå¯¹è±¡çš„æ—¶å€™æŒ‡å®šï¼Œå³åœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±ç¡®å®šEæ˜¯ä»€ä¹ˆç±»å‹</span><br><span class="hljs-comment">    public Person(Integer s) &#123;//Eä¹Ÿå¯ä»¥æ˜¯å‚æ•°ç±»å‹</span><br><span class="hljs-comment">        this.s = s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    public Integer f() &#123;//è¿”å›ç±»å‹ä½¿ç”¨E</span><br><span class="hljs-comment">        return s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ³›å‹çš„ä½œç”¨æ˜¯ï¼šå¯ä»¥åœ¨ç±»å£°æ˜æ—¶é€šè¿‡ä¸€ä¸ªæ ‡è¯†è¡¨ç¤ºç±»ä¸­æŸä¸ªå±æ€§çš„ç±»å‹ï¼Œ</span><br><span class="hljs-comment">// æˆ–è€…æ˜¯æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼çš„ç±»å‹ï¼Œæˆ–è€…æ˜¯å‚æ•°ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&lt;E&gt; &#123;<br>    E s ;<span class="hljs-comment">//Eè¡¨ç¤º sçš„æ•°æ®ç±»å‹, è¯¥æ•°æ®ç±»å‹åœ¨å®šä¹‰Personå¯¹è±¡çš„æ—¶å€™æŒ‡å®š,å³åœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±ç¡®å®šEæ˜¯ä»€ä¹ˆç±»å‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(E s)</span> &#123;<span class="hljs-comment">//Eä¹Ÿå¯ä»¥æ˜¯å‚æ•°ç±»å‹</span><br>        <span class="hljs-built_in">this</span>.s = s;<br>    &#125;<br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">f</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//è¿”å›ç±»å‹ä½¿ç”¨E</span><br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(s.getClass()); <span class="hljs-comment">//æ˜¾ç¤ºsçš„è¿è¡Œç±»å‹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="æ³›å‹çš„è¯­æ³•"><a href="#æ³›å‹çš„è¯­æ³•" class="headerlink" title="æ³›å‹çš„è¯­æ³•"></a>æ³›å‹çš„è¯­æ³•</h3><h4 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h4><p>interface æ¥å£&lt;T&gt;{}  å’Œ  class ç±»&lt;K, V&gt;{}</p><p>è¯´æ˜ï¼š</p><ul><li>å…¶ä¸­ï¼ŒTã€Kã€V ä¸ä»£è¡¨å€¼ï¼Œè€Œæ˜¯è¡¨ç¤ºç±»å‹</li><li>ä»»æ„å­—æ¯éƒ½å¯ä»¥ã€‚å¸¸ç”¨ T è¡¨ç¤ºï¼ˆTypeçš„ç¼©å†™ï¼‰</li></ul><h4 id="å®ä¾‹åŒ–"><a href="#å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹åŒ–"></a>å®ä¾‹åŒ–</h4><p>è¦åœ¨ç±»ååé¢æŒ‡å®šç±»å‹å‚æ•°çš„å€¼ï¼ˆç±»å‹ï¼‰ã€‚å¦‚ï¼š</p><ul><li>List&lt;String&gt; strList &#x3D; new ArrayList&lt;String&gt;();  </li><li>Iterator&lt;Customer&gt; iterator &#x3D; customers.iterator();</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨æ³›å‹æ–¹å¼ç»™HashSet æ”¾å…¥3ä¸ªå­¦ç”Ÿå¯¹è±¡</span><br>        HashSet&lt;Student&gt; students = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;Student&gt;();<br>        students.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">18</span>));<br>        students.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">28</span>));<br>        students.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;mary&quot;</span>, <span class="hljs-number">19</span>));<br>        <span class="hljs-comment">//éå†</span><br>        <span class="hljs-keyword">for</span> (Student student : students) &#123;<br>            System.out.println(student);<br>        &#125;<br><br>        <span class="hljs-comment">//ä½¿ç”¨æ³›å‹æ–¹å¼ç»™HashMap æ”¾å…¥3ä¸ªå­¦ç”Ÿå¯¹è±¡</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public class HashMap&lt;K,V&gt;  &#123;&#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//K -&gt; String V-&gt;Student</span><br>        HashMap&lt;String, Student&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Student&gt;();<br>        hm.put(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">38</span>));<br>        hm.put(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-number">48</span>));<br>        hm.put(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-number">28</span>));<br>        <span class="hljs-comment">//è¿­ä»£å™¨ EntrySet</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123;</span><br><span class="hljs-comment">            Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</span><br><span class="hljs-comment">            return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//å…ˆå–å‡º Map.Entry</span><br>        Set&lt;Map.Entry&lt;String, Student&gt;&gt; entries = hm.entrySet();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123;</span><br><span class="hljs-comment">                return new EntryIterator();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        Iterator&lt;Map.Entry&lt;String, Student&gt;&gt; iterator = entries.iterator();<br>        System.out.println(<span class="hljs-string">&quot;==============================&quot;</span>);<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            Map.Entry&lt;String, Student&gt; next =  iterator.next();<br>            System.out.println(next.getKey() + <span class="hljs-string">&quot;-&quot;</span> + next.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ›å»º  3ä¸ªå­¦ç”Ÿå¯¹è±¡</span><br><span class="hljs-comment"> * æ”¾å…¥åˆ°HashSetä¸­å­¦ç”Ÿå¯¹è±¡, ä½¿ç”¨.</span><br><span class="hljs-comment"> * æ”¾å…¥åˆ°  HashMapä¸­ï¼Œè¦æ±‚ Key æ˜¯ String name, Value å°±æ˜¯ å­¦ç”Ÿå¯¹è±¡</span><br><span class="hljs-comment"> * ä½¿ç”¨ä¸¤ç§æ–¹å¼éå†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ³›å‹æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"><a href="#æ³›å‹æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚" class="headerlink" title="æ³›å‹æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚"></a>æ³›å‹æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚</h3><ul><li><p>1ï¼‰interface List&lt;T&gt;{}    ã€  public class HashSet&lt;E&gt;{}    ç­‰ç­‰</p><p><strong>è¯´æ˜ï¼šTã€E åªèƒ½æ˜¯å¼•ç”¨ç±»å‹</strong></p><p>List&lt;Integer&gt; list &#x3D; new ArrayList&lt;Integer&gt;();  &#x2F;&#x2F;OK</p><p>List&lt;int&gt; list &#x3D; new ArrayList&lt;int&gt;();  &#x2F;&#x2F;é”™è¯¯</p></li><li><p>2ï¼‰åœ¨ç»™æ³›å‹æŒ‡å®šå…·ä½“ç±»å‹åï¼Œ<strong>å¯ä»¥ä¼ å…¥ è¯¥ç±»å‹ æˆ–è€… å­ç±»ç±»å‹</strong></p></li><li><p>3ï¼‰æ³›å‹ä½¿ç”¨å½¢å¼</p><p>List&lt;Integer&gt; list &#x3D; new ArrayList&lt;Integer&gt;();</p><p>List&lt;Integer&gt; list &#x3D; new ArrayList&lt;&gt;();ï¼ˆæ¨èï¼‰[è¯´æ˜ï¼šç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»å‹æ¨æ–­]</p><p>å¦‚æœè¿™æ ·å†™ List list &#x3D; new ArrayList();  &#x2F;&#x2F;é»˜è®¤ç»™å®ƒçš„æ³›å‹æ˜¯ [&lt;E&gt; E å°±æ˜¯ Object ]</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.ç»™æ³›å‹æŒ‡å‘æ•°æ®ç±»å‹æ˜¯ï¼Œè¦æ±‚æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹</span><br>        List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;(); <span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//List&lt;int&gt; list2 = new ArrayList&lt;int&gt;();//é”™è¯¯</span><br>        <span class="hljs-comment">//2. è¯´æ˜</span><br>        <span class="hljs-comment">//å› ä¸º E æŒ‡å®šäº† A ç±»å‹, æ„é€ å™¨ä¼ å…¥äº† new A()</span><br>        <span class="hljs-comment">//åœ¨ç»™æ³›å‹æŒ‡å®šå…·ä½“ç±»å‹åï¼Œå¯ä»¥ä¼ å…¥è¯¥ç±»å‹æˆ–è€…å…¶å­ç±»ç±»å‹</span><br>        Pig&lt;A&gt; aPig = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pig</span>&lt;A&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>());<br>        aPig.f();<br>        Pig&lt;A&gt; aPig2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pig</span>&lt;A&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br>        aPig2.f();<br><br>        <span class="hljs-comment">//3. æ³›å‹çš„ä½¿ç”¨å½¢å¼</span><br>        ArrayList&lt;Integer&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        List&lt;Integer&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        <span class="hljs-comment">//åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ç®€å†™</span><br>        <span class="hljs-comment">//ç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»å‹æ¨æ–­, è€å¸ˆæ¨èä½¿ç”¨ä¸‹é¢å†™æ³•</span><br>        ArrayList&lt;Integer&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;Integer&gt; list4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        ArrayList&lt;Pig&gt; pigs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>        <span class="hljs-comment">//4. å¦‚æœå®šä¹‰äº†æ³›å‹ä½†ä¸ä¼ å…¥ï¼Œé‚£ä¹ˆæ³›å‹é»˜è®¤æ˜¯ Object</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">arrayList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        <span class="hljs-comment">//ç­‰ä»· ArrayList&lt;Object&gt; arrayList = new ArrayList&lt;Object&gt;();</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public boolean add(Object e) &#123;</span><br><span class="hljs-comment">                ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br><span class="hljs-comment">                elementData[size++] = e;</span><br><span class="hljs-comment">                return true;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            class Tiger &#123;//ç±»</span><br><span class="hljs-comment">                Object e;</span><br><span class="hljs-comment">                public Tiger() &#123;&#125;</span><br><span class="hljs-comment">                public Tiger(Object e) &#123;this.e = e;&#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span>&lt;E&gt; &#123;<span class="hljs-comment">//ç±»</span><br>    E e;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(E e)</span> &#123;<span class="hljs-built_in">this</span>.e = e;&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pig</span>&lt;E&gt; &#123;<span class="hljs-comment">//</span><br>    E e;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Pig</span><span class="hljs-params">(E e)</span> &#123;<span class="hljs-built_in">this</span>.e = e;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(e.getClass()); <span class="hljs-comment">//è¿è¡Œç±»å‹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¯¾å ‚ç»ƒä¹ "><a href="#è¯¾å ‚ç»ƒä¹ " class="headerlink" title="è¯¾å ‚ç»ƒä¹ "></a>è¯¾å ‚ç»ƒä¹ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®šä¹‰Employeeç±»</span><br><span class="hljs-comment"> * 1) è¯¥ç±»åŒ…å«ï¼šprivateæˆå‘˜å˜é‡name,sal,birthdayï¼Œå…¶ä¸­ birthday ä¸º MyDate ç±»çš„å¯¹è±¡ï¼›</span><br><span class="hljs-comment"> * 2) ä¸ºæ¯ä¸€ä¸ªå±æ€§å®šä¹‰ getter, setter æ–¹æ³•ï¼›</span><br><span class="hljs-comment"> * 3) é‡å†™ toString æ–¹æ³•è¾“å‡º name, sal, birthday</span><br><span class="hljs-comment"> * 4) MyDateç±»åŒ…å«: privateæˆå‘˜å˜é‡month,day,yearï¼›å¹¶ä¸ºæ¯ä¸€ä¸ªå±æ€§å®šä¹‰ getter, setter æ–¹æ³•ï¼›</span><br><span class="hljs-comment"> * 5) åˆ›å»ºè¯¥ç±»çš„ 3 ä¸ªå¯¹è±¡ï¼Œå¹¶æŠŠè¿™äº›å¯¹è±¡æ”¾å…¥ ArrayList é›†åˆä¸­ï¼ˆArrayList éœ€ä½¿ç”¨æ³›å‹æ¥å®šä¹‰ï¼‰ï¼Œå¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶éå†è¾“å‡ºï¼š</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * æ’åºæ–¹å¼ï¼š è°ƒç”¨ArrayList çš„ sort æ–¹æ³• ,</span><br><span class="hljs-comment"> * ä¼ å…¥ Comparatorå¯¹è±¡[ä½¿ç”¨æ³›å‹]ï¼Œå…ˆæŒ‰ç…§nameæ’åºï¼Œå¦‚æœnameç›¸åŒï¼Œåˆ™æŒ‰ç”Ÿæ—¥æ—¥æœŸçš„å…ˆåæ’åºã€‚ã€å³ï¼šå®šåˆ¶æ’åºã€‘</span><br><span class="hljs-comment"> * æœ‰ä¸€å®šéš¾åº¦ 15min , æ¯”è¾ƒç»å…¸ æ³›å‹ä½¿ç”¨æ¡ˆä¾‹ GenericExercise02.java</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ArrayList&lt;Employee&gt; employees = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">20000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">1980</span>,<span class="hljs-number">12</span>,<span class="hljs-number">11</span>)));<br>        employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">12000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2001</span>,<span class="hljs-number">12</span>,<span class="hljs-number">12</span>)));<br>        employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">50000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">1980</span>,<span class="hljs-number">12</span>,<span class="hljs-number">10</span>)));<br>        System.out.println(<span class="hljs-string">&quot;employees=&quot;</span> + employees);<br><br>        employees.sort(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Employee&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Employee emp1, Employee emp2)</span> &#123;<br>                <span class="hljs-comment">//å…ˆæŒ‰ç…§nameæ’åºï¼Œå¦‚æœnameç›¸åŒï¼Œåˆ™æŒ‰ç”Ÿæ—¥æ—¥æœŸçš„å…ˆåæ’åºã€‚ã€å³ï¼šå®šåˆ¶æ’åºã€‘</span><br>                <span class="hljs-comment">//å…ˆå¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡ŒéªŒè¯</span><br>                <span class="hljs-keyword">if</span>(!(emp1 <span class="hljs-keyword">instanceof</span>  Employee &amp;&amp; emp2 <span class="hljs-keyword">instanceof</span> Employee)) &#123;<br>                    System.out.println(<span class="hljs-string">&quot;ç±»å‹ä¸æ­£ç¡®..&quot;</span>);<br>                    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>                &#125;<br>                <span class="hljs-comment">//æ¯”è¾ƒname</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> emp1.getName().compareTo(emp2.getName());<br>                <span class="hljs-keyword">if</span>(i != <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-keyword">return</span> i;<br>                &#125;<br>                <span class="hljs-comment">//ä¸‹é¢æ˜¯å¯¹birthdayçš„æ¯”è¾ƒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æœ€å¥½æŠŠè¿™ä¸ªæ¯”è¾ƒï¼Œæ”¾åœ¨MyDateç±»å®Œæˆ</span><br>                <span class="hljs-comment">//å°è£…åï¼Œå°†æ¥å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ï¼Œå°±å¤§å¤§å¢å¼º.</span><br>                <span class="hljs-keyword">return</span> emp1.getBirthday().compareTo(emp2.getBirthday());<br>            &#125;<br>        &#125;);<br><br>        System.out.println(<span class="hljs-string">&quot;==å¯¹é›‡å‘˜è¿›è¡Œæ’åº==&quot;</span>);<br>        System.out.println(employees);<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-keyword">private</span> MyDate birthday;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> sal, MyDate birthday)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>        <span class="hljs-built_in">this</span>.birthday = birthday;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSal</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sal;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSal</span><span class="hljs-params">(<span class="hljs-type">double</span> sal)</span> &#123;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>    &#125;<br>    <span class="hljs-keyword">public</span> MyDate <span class="hljs-title function_">getBirthday</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> birthday;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBirthday</span><span class="hljs-params">(MyDate birthday)</span> &#123;<br>        <span class="hljs-built_in">this</span>.birthday = birthday;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;\nEmployee&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&quot;, birthday=&quot;</span> + birthday +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;MyDate&gt;&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> year;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> month;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> day;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyDate</span><span class="hljs-params">(<span class="hljs-type">int</span> year, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> day)</span> &#123;<br>        <span class="hljs-built_in">this</span>.year = year;<br>        <span class="hljs-built_in">this</span>.month = month;<br>        <span class="hljs-built_in">this</span>.day = day;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYear</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> year;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setYear</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> &#123;<span class="hljs-built_in">this</span>.year = year;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> month;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMonth</span><span class="hljs-params">(<span class="hljs-type">int</span> month)</span> &#123;<span class="hljs-built_in">this</span>.month = month;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDay</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> day;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDay</span><span class="hljs-params">(<span class="hljs-type">int</span> day)</span> &#123;<span class="hljs-built_in">this</span>.day = day;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;MyDate&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;year=&quot;</span> + year +<br>                <span class="hljs-string">&quot;, month=&quot;</span> + month +<br>                <span class="hljs-string">&quot;, day=&quot;</span> + day +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(MyDate o)</span> &#123; <span class="hljs-comment">//æŠŠå¯¹year-month-dayæ¯”è¾ƒæ”¾åœ¨è¿™é‡Œ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">yearMinus</span> <span class="hljs-operator">=</span> year - o.getYear();<br>        <span class="hljs-keyword">if</span>(yearMinus != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> yearMinus;<br>        &#125;<br>        <span class="hljs-comment">//å¦‚æœyearç›¸åŒï¼Œå°±æ¯”è¾ƒmonth</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">monthMinus</span> <span class="hljs-operator">=</span> month - o.getMonth();<br>        <span class="hljs-keyword">if</span>(monthMinus != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> monthMinus;<br>        &#125;<br>        <span class="hljs-comment">//å¦‚æœyear å’Œ month</span><br>        <span class="hljs-keyword">return</span> day - o.getDay();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ³›å‹"><a href="#è‡ªå®šä¹‰æ³›å‹" class="headerlink" title="è‡ªå®šä¹‰æ³›å‹"></a>è‡ªå®šä¹‰æ³›å‹</h3><h4 id="è‡ªå®šä¹‰æ³›å‹ç±»-éš¾åº¦"><a href="#è‡ªå®šä¹‰æ³›å‹ç±»-éš¾åº¦" class="headerlink" title="è‡ªå®šä¹‰æ³›å‹ç±» (éš¾åº¦)"></a>è‡ªå®šä¹‰æ³›å‹ç±» (éš¾åº¦)</h4><p><strong>åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">class ç±»å&lt;T, R...&gt; &#123;  <span class="hljs-comment">//...è¡¨ç¤ºå¯ä»¥æœ‰å¤šä¸ªæ³›å‹</span><br><span class="hljs-comment">//æˆå‘˜</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ç»†èŠ‚</strong></p><ul><li>æ™®é€šæˆå‘˜å¯ä»¥ä½¿ç”¨æ³›å‹ï¼ˆå±æ€§ã€æ–¹æ³•ï¼‰</li><li>ä½¿ç”¨æ³›å‹çš„æ•°ç»„ï¼Œä¸èƒ½åˆå§‹åŒ–</li><li>é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ç±»çš„æ³›å‹</li><li>æ³›å‹ç±»çš„ç±»å‹ï¼Œæ˜¯åœ¨åˆ›å»ºå¯¹è±¡æ—¶ç¡®å®šçš„ï¼ˆå› ä¸ºåˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€è¦æŒ‡å®šç¡®å®šç±»å‹ï¼‰</li><li>å¦‚æœåœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé»˜è®¤ä¸º Object</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomGeneric_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ç»ƒä¹ </span><br>        <span class="hljs-comment">//T=Double, R=String, M=Integer</span><br>        Tiger&lt;Double,String,Integer&gt; g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>&lt;&gt;(<span class="hljs-string">&quot;john&quot;</span>);<br>        g.setT(<span class="hljs-number">10.9</span>); <span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//g.setT(&quot;yy&quot;); //é”™è¯¯ï¼Œç±»å‹ä¸å¯¹</span><br>        System.out.println(g);<br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">g2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>(<span class="hljs-string">&quot;john~~&quot;</span>);<span class="hljs-comment">//OK T=Object R=Object M=Object</span><br>        g2.setT(<span class="hljs-string">&quot;yy&quot;</span>); <span class="hljs-comment">//OK ,å› ä¸º T=Object &quot;yy&quot;=String æ˜¯Objectå­ç±»</span><br>        System.out.println(<span class="hljs-string">&quot;g2=&quot;</span> + g2);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//è§£è¯»</span><br><span class="hljs-comment">//1. Tiger åé¢æ³›å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ Tiger å°±ç§°ä¸ºè‡ªå®šä¹‰æ³›å‹ç±»</span><br><span class="hljs-comment">//2, T, R, M æ³›å‹çš„æ ‡è¯†ç¬¦, ä¸€èˆ¬æ˜¯å•ä¸ªå¤§å†™å­—æ¯</span><br><span class="hljs-comment">//3. æ³›å‹æ ‡è¯†ç¬¦å¯ä»¥æœ‰å¤šä¸ª.</span><br><span class="hljs-comment">//4. æ™®é€šæˆå‘˜å¯ä»¥ä½¿ç”¨æ³›å‹ (å±æ€§ã€æ–¹æ³•)</span><br><span class="hljs-comment">//5. ä½¿ç”¨æ³›å‹çš„æ•°ç»„ï¼Œä¸èƒ½åˆå§‹åŒ–</span><br><span class="hljs-comment">//6. é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ç±»çš„æ³›å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span>&lt;T, R, M&gt; &#123;<br>    String name;<br>    R r; <span class="hljs-comment">//å±æ€§ä½¿ç”¨åˆ°æ³›å‹</span><br>    M m;<br>    T t;<br>    <span class="hljs-comment">//å› ä¸ºæ•°ç»„åœ¨new ä¸èƒ½ç¡®å®šTçš„ç±»å‹ï¼Œå°±æ— æ³•åœ¨å†…å­˜å¼€ç©ºé—´</span><br>    T[] ts;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(R r, M m, T t)</span> &#123;<span class="hljs-comment">//æ„é€ å™¨ä½¿ç”¨æ³›å‹</span><br>        <span class="hljs-built_in">this</span>.r = r;<br>        <span class="hljs-built_in">this</span>.m = m;<br>        <span class="hljs-built_in">this</span>.t = t;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(String name, R r, M m, T t)</span> &#123;<span class="hljs-comment">//æ„é€ å™¨ä½¿ç”¨æ³›å‹</span><br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.r = r;<br>        <span class="hljs-built_in">this</span>.m = m;<br>        <span class="hljs-built_in">this</span>.t = t;<br>    &#125;<br><br>    <span class="hljs-comment">//å› ä¸ºé™æ€æ˜¯å’Œç±»ç›¸å…³çš„ï¼Œåœ¨ç±»åŠ è½½æ—¶ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»º</span><br>    <span class="hljs-comment">//æ‰€ä»¥ï¼Œå¦‚æœé™æ€æ–¹æ³•å’Œé™æ€å±æ€§ä½¿ç”¨äº†æ³›å‹ï¼ŒJVMå°±æ— æ³•å®Œæˆåˆå§‹åŒ–</span><br><span class="hljs-comment">//    static R r2;  //é™æ€å±æ€§</span><br><span class="hljs-comment">//    public static void m1(M m) &#123;  //é™æ€æ–¹æ³•</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-comment">//æ–¹æ³•ä½¿ç”¨æ³›å‹</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-comment">//è¿”å›ç±»å‹å¯ä»¥ä½¿ç”¨æ³›å‹.</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">getR</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> r;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setR</span><span class="hljs-params">(R r)</span> &#123;<span class="hljs-built_in">this</span>.r = r;&#125;<br>    <span class="hljs-keyword">public</span> M <span class="hljs-title function_">getM</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> m;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setM</span><span class="hljs-params">(M m)</span> &#123;<span class="hljs-built_in">this</span>.m = m;&#125;<br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getT</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> t;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setT</span><span class="hljs-params">(T t)</span> &#123;<span class="hljs-built_in">this</span>.t = t;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Tiger&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, r=&quot;</span> + r +<br>                <span class="hljs-string">&quot;, m=&quot;</span> + m +<br>                <span class="hljs-string">&quot;, t=&quot;</span> + t +<br>                <span class="hljs-string">&quot;, ts=&quot;</span> + Arrays.toString(ts) +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰æ³›å‹æ¥å£"><a href="#è‡ªå®šä¹‰æ³›å‹æ¥å£" class="headerlink" title="è‡ªå®šä¹‰æ³›å‹æ¥å£"></a>è‡ªå®šä¹‰æ³›å‹æ¥å£</h4><p><strong>åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">interface æ¥å£å&lt;T, R...&gt; &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ç»†èŠ‚</strong></p><ul><li>æ¥å£ä¸­ï¼Œé™æ€æˆå‘˜ä¸èƒ½ä½¿ç”¨æ³›å‹ï¼ˆæ³¨æ„ï¼šåœ¨æ¥å£ä¸­ï¼Œå±æ€§éƒ½æ˜¯ public static final ä¿®é¥°çš„ï¼‰</li><li>æ³›å‹æ¥å£çš„ç±»å‹ï¼Œåœ¨ ç»§æ‰¿æ¥å£æ—¶ æˆ–è€… å®ç°æ¥å£æ—¶ ç¡®å®š</li><li>æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé»˜è®¤ä¸º Object</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomInterfaceGeneric</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  æ³›å‹æ¥å£ä½¿ç”¨çš„è¯´æ˜</span><br><span class="hljs-comment"> *  1. æ¥å£ä¸­ï¼Œé™æ€æˆå‘˜ä¹Ÿä¸èƒ½ä½¿ç”¨æ³›å‹</span><br><span class="hljs-comment"> *  2. æ³›å‹æ¥å£çš„ç±»å‹, åœ¨ç»§æ‰¿æ¥å£æˆ–è€…å®ç°æ¥å£æ—¶ç¡®å®š</span><br><span class="hljs-comment"> *  3. æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé»˜è®¤ä¸ºObject</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUsb</span>&lt;U, R&gt; &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//U name; ä¸èƒ½è¿™æ ·ä½¿ç”¨</span><br>    <span class="hljs-comment">//æ™®é€šæ–¹æ³•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ¥å£æ³›å‹</span><br>    R <span class="hljs-title function_">get</span><span class="hljs-params">(U u)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(R r)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(R r1, R r2, U u1, U u2)</span>;<br>    <span class="hljs-comment">//åœ¨jdk8 ä¸­ï¼Œå¯ä»¥åœ¨æ¥å£ä¸­ï¼Œä½¿ç”¨é»˜è®¤æ–¹æ³•, ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨æ³›å‹</span><br>    <span class="hljs-keyword">default</span> R <span class="hljs-title function_">method</span><span class="hljs-params">(U u)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//åœ¨ç»§æ‰¿æ¥å£ æŒ‡å®šæ³›å‹æ¥å£çš„ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IUsb</span>&lt;String, Double&gt; &#123;<br>&#125;<br><span class="hljs-comment">//å½“æˆ‘ä»¬å»å®ç°IAæ¥å£æ—¶ï¼Œå› ä¸ºIAåœ¨ç»§æ‰¿IUsu æ¥å£æ—¶ï¼ŒæŒ‡å®šäº†U ä¸ºString Rä¸ºDouble</span><br><span class="hljs-comment">//ï¼Œåœ¨å®ç°IUsuæ¥å£çš„æ–¹æ³•æ—¶ï¼Œä½¿ç”¨Stringæ›¿æ¢U, æ˜¯Doubleæ›¿æ¢R</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">get</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Double aDouble)</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Double r1, Double r2, String u1, String u2)</span> &#123;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//å®ç°æ¥å£æ—¶ï¼Œç›´æ¥æŒ‡å®šæ³›å‹æ¥å£çš„ç±»å‹</span><br><span class="hljs-comment">//ç»™U æŒ‡å®šInteger ç»™ R æŒ‡å®šäº† Float</span><br><span class="hljs-comment">//æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬å®ç°IUsbæ–¹æ³•æ—¶ï¼Œä¼šä½¿ç”¨Integeræ›¿æ¢U, ä½¿ç”¨Floatæ›¿æ¢R</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUsb</span>&lt;Integer, Float&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Float <span class="hljs-title function_">get</span><span class="hljs-params">(Integer integer)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Float aFloat)</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Float r1, Float r2, Integer u1, Integer u2)</span> &#123;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé»˜è®¤ä¸ºObject</span><br><span class="hljs-comment">//å»ºè®®ç›´æ¥å†™æˆ IUsb&lt;Object,Object&gt;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUsb</span> &#123; <span class="hljs-comment">//ç­‰ä»· class CC implements IUsb&lt;Object,Object&gt; &#123;</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">get</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Object o)</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Object r1, Object r2, Object u1, Object u2)</span> &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰æ³›å‹æ–¹æ³•"><a href="#è‡ªå®šä¹‰æ³›å‹æ–¹æ³•" class="headerlink" title="è‡ªå®šä¹‰æ³›å‹æ–¹æ³•"></a>è‡ªå®šä¹‰æ³›å‹æ–¹æ³•</h4><p><strong>åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦&lt;T, R...&gt; è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ç»†èŠ‚</strong></p><ul><li>æ³›å‹æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰åœ¨æ™®é€šç±»ä¸­ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨æ³›å‹ç±»ä¸­</li><li>å½“æ³›å‹æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œç±»å‹éœ€è¦ç¡®å®šï¼ˆç›´æ¥ä¼ å€¼å°±è¡Œï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç¡®å®šç±»å‹ï¼‰</li><li>public void eat(E, e){},  ä¿®é¥°ç¬¦åæ²¡æœ‰&lt;T, R&gt;ï¼Œeat æ–¹æ³•ä¸æ˜¯æ³›å‹æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨äº†æ³›å‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomMethodGeneric</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br>        car.fly(<span class="hljs-string">&quot;å®é©¬&quot;</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">//å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼ å…¥å‚æ•°ï¼Œç¼–è¯‘å™¨ï¼Œå°±ä¼šç¡®å®šç±»å‹</span><br>        System.out.println(<span class="hljs-string">&quot;=======&quot;</span>);<br>        car.fly(<span class="hljs-number">300</span>, <span class="hljs-number">100.1</span>); <span class="hljs-comment">//å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼ å…¥å‚æ•°ï¼Œç¼–è¯‘å™¨ï¼Œå°±ä¼šç¡®å®šç±»å‹</span><br>        System.out.println(<span class="hljs-string">&quot;=======&quot;</span>);<br>        <span class="hljs-comment">//æµ‹è¯•</span><br>        <span class="hljs-comment">//T-&gt;String, R-&gt; ArrayList</span><br>        Fish&lt;String, ArrayList&gt; fish = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fish</span>&lt;&gt;();<br>        fish.hello(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(), <span class="hljs-number">11.3f</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ³›å‹æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰åœ¨æ™®é€šç±»ä¸­, ä¹Ÿå¯ä»¥å®šä¹‰åœ¨æ³›å‹ç±»ä¸­</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<span class="hljs-comment">//æ™®é€šç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ™®é€šæ–¹æ³•</span><br>    &#125;<br>    <span class="hljs-comment">//è¯´æ˜ æ³›å‹æ–¹æ³•</span><br>    <span class="hljs-comment">//1. &lt;T,R&gt; å°±æ˜¯æ³›å‹</span><br>    <span class="hljs-comment">//2. æ˜¯æä¾›ç»™ flyä½¿ç”¨çš„</span><br>    <span class="hljs-keyword">public</span> &lt;T, R&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">(T t, R r)</span> &#123;<span class="hljs-comment">//æ³›å‹æ–¹æ³•</span><br>        System.out.println(t.getClass());<span class="hljs-comment">//String</span><br>        System.out.println(r.getClass());<span class="hljs-comment">//Integer</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fish</span>&lt;T, R&gt; &#123;<span class="hljs-comment">//æ³›å‹ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ™®é€šæ–¹æ³•</span><br>    &#125;<br>    <span class="hljs-keyword">public</span>&lt;U,M&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(U u, M m)</span> &#123;<span class="hljs-comment">//æ³›å‹æ–¹æ³•</span><br><br>    &#125;<br>    <span class="hljs-comment">//è¯´æ˜</span><br>    <span class="hljs-comment">//1. ä¸‹é¢hiæ–¹æ³•ä¸æ˜¯æ³›å‹æ–¹æ³•</span><br>    <span class="hljs-comment">//2. æ˜¯hiæ–¹æ³•ä½¿ç”¨äº†ç±»å£°æ˜çš„ æ³›å‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(T t)</span> &#123;<br>    &#125;<br>    <span class="hljs-comment">//æ³›å‹æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ç±»å£°æ˜çš„æ³›å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±å£°æ˜æ³›å‹</span><br>    <span class="hljs-keyword">public</span>&lt;K&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">(R r, K k)</span> &#123;<br>        System.out.println(r.getClass());<span class="hljs-comment">//ArrayList</span><br>        System.out.println(k.getClass());<span class="hljs-comment">//Float</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ³›å‹çš„ç»§æ‰¿å’Œé€šé…ç¬¦"><a href="#æ³›å‹çš„ç»§æ‰¿å’Œé€šé…ç¬¦" class="headerlink" title="æ³›å‹çš„ç»§æ‰¿å’Œé€šé…ç¬¦"></a>æ³›å‹çš„ç»§æ‰¿å’Œé€šé…ç¬¦</h3><ul><li><p>æ³›å‹ä¸å…·å¤‡ç»§æ‰¿æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();  <span class="hljs-comment">//é”™è¯¯</span><br></code></pre></td></tr></table></figure></li><li><p>&lt;?&gt;ï¼šæ”¯æŒä»»æ„æ³›å‹ç±»å‹</p></li><li><p>&lt;? extends A&gt;ï¼šæ”¯æŒ Aç±» ä»¥åŠ Aç±»çš„å­ç±»ï¼Œè§„å®šäº†æ³›å‹çš„ä¸Šé™</p></li><li><p>&lt;? super A&gt;ï¼šæ”¯æŒ Aç±» ä»¥åŠ Aç±»çš„çˆ¶ç±»ï¼ˆä¸é™äºç›´æ¥çˆ¶ç±»ï¼‰ï¼Œè§„å®šäº†æ³›å‹çš„ä¸‹é™</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericExtends</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ç±»çš„å¤šæ€</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;xx&quot;</span>);<br>        <span class="hljs-comment">//æ³›å‹æ²¡æœ‰ç»§æ‰¿æ€§</span><br>        <span class="hljs-comment">//List&lt;Object&gt; list = new ArrayList&lt;String&gt;();</span><br><br>        <span class="hljs-comment">//ä¸¾ä¾‹è¯´æ˜ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•çš„ä½¿ç”¨</span><br>        List&lt;Object&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;AA&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;BB&gt; list4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;CC&gt; list5 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>        <span class="hljs-comment">//å¦‚æœæ˜¯ List&lt;?&gt; c ï¼Œå¯ä»¥æ¥å—ä»»æ„çš„æ³›å‹ç±»å‹</span><br>        printCollection1(list1);<br>        printCollection1(list2);<br>        printCollection1(list3);<br>        printCollection1(list4);<br>        printCollection1(list5);<br><br>        <span class="hljs-comment">//List&lt;? extends AA&gt; cï¼š è¡¨ç¤º ä¸Šé™ï¼Œå¯ä»¥æ¥å— AAæˆ–è€…AAå­ç±»</span><br>        <span class="hljs-comment">//printCollection2(list1);//Ã—</span><br>        <span class="hljs-comment">//printCollection2(list2);//Ã—</span><br>        printCollection2(list3);<span class="hljs-comment">//âˆš</span><br>        printCollection2(list4);<span class="hljs-comment">//âˆš</span><br>        printCollection2(list5);<span class="hljs-comment">//âˆš</span><br><br>        <span class="hljs-comment">//List&lt;? super AA&gt; c: æ”¯æŒAAç±»ä»¥åŠAAç±»çš„çˆ¶ç±»ï¼Œä¸é™äºç›´æ¥çˆ¶ç±»</span><br>        printCollection3(list1);<span class="hljs-comment">//âˆš</span><br>        <span class="hljs-comment">//printCollection3(list2);//Ã—</span><br>        printCollection3(list3);<span class="hljs-comment">//âˆš</span><br>        <span class="hljs-comment">//printCollection3(list4);//Ã—</span><br>        <span class="hljs-comment">//printCollection3(list5);//Ã—</span><br><br>        <span class="hljs-comment">//å†’æ³¡æ’åº</span><br>        <span class="hljs-comment">//æ’å…¥æ’åº</span><br>        <span class="hljs-comment">//....</span><br>    &#125;<br>    <span class="hljs-comment">// ? extends AA è¡¨ç¤º ä¸Šé™ï¼Œå¯ä»¥æ¥å— AAæˆ–è€…AAå­ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection2</span><span class="hljs-params">(List&lt;? extends AA&gt; c)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Object object : c) &#123;<br>            System.out.println(object);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//è¯´æ˜: List&lt;?&gt; è¡¨ç¤º ä»»æ„çš„æ³›å‹ç±»å‹éƒ½å¯ä»¥æ¥å—</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection1</span><span class="hljs-params">(List&lt;?&gt; c)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Object object : c) &#123; <span class="hljs-comment">// é€šé…ç¬¦ï¼Œå–å‡ºæ—¶ï¼Œå°±æ˜¯Object</span><br>            System.out.println(object);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ? super å­ç±»ç±»åAA:æ”¯æŒAAç±»ä»¥åŠAAç±»çš„çˆ¶ç±»ï¼Œä¸é™äºç›´æ¥çˆ¶ç±»ï¼Œ</span><br>    <span class="hljs-comment">//è§„å®šäº†æ³›å‹çš„ä¸‹é™</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection3</span><span class="hljs-params">(List&lt;? <span class="hljs-built_in">super</span> AA&gt; c)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Object object : c) &#123;<br>            System.out.println(object);<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> &#123;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AA</span> &#123;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BB</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="JUnit"><a href="#JUnit" class="headerlink" title="JUnit"></a>JUnit</h3><ul><li><p>ä¸€ä¸ªç±»æœ‰å¾ˆå¤šåŠŸèƒ½ä»£ç éœ€è¦æµ‹è¯•ï¼Œä¸ºäº†æµ‹è¯•ï¼Œå°±éœ€è¦å†™å…¥åˆ° main æ–¹æ³•ä¸­</p></li><li><p>å¦‚æœæœ‰å¤šä¸ªåŠŸèƒ½ä»£ç æµ‹è¯•ï¼Œå°±éœ€è¦æ¥å›æ³¨é”€ï¼Œåˆ‡æ¢å¾ˆéº»çƒ¦</p></li><li><p>å¦‚æœå¯ä»¥ç›´æ¥è¿è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ–¹ä¾¿å¾ˆå¤šï¼Œå¹¶ä¸”å¯ä»¥ç»™å‡ºç›¸å…³ä¿¡æ¯ï¼Œå°±å¥½äº†</p></li><li><p>JUnit æ˜¯ä¸€ä¸ª Java è¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶</p></li><li><p>å¤šæ•° Java çš„å¼€å‘ç¯å¢ƒéƒ½å·²ç»ç»§æ‰¿äº† JUnit ä½œä¸ºå•å…ƒæµ‹è¯•çš„å·¥å…·</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JUnit_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä¼ ç»Ÿæ–¹å¼</span><br>        <span class="hljs-comment">//new JUnit_().m1();</span><br>        <span class="hljs-comment">//new JUnit_().m2();</span><br>    &#125;<br>    <span class="hljs-comment">// alt + Enter</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;m1æ–¹æ³•è¢«è°ƒç”¨&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;m2æ–¹æ³•è¢«è°ƒç”¨&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;m3æ–¹æ³•è¢«è°ƒç”¨&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¤šçº¿ç¨‹åŸºç¡€"><a href="#å¤šçº¿ç¨‹åŸºç¡€" class="headerlink" title="å¤šçº¿ç¨‹åŸºç¡€"></a>å¤šçº¿ç¨‹åŸºç¡€</h2><p>ç¨‹åºï¼šæ˜¯ä¸ºäº†å®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆï¼ˆç®€å•æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬å†™çš„ä»£ç ï¼‰</p><p>è¿›ç¨‹ï¼šï¼ˆ1ï¼‰è¿›ç¨‹æ˜¯æŒ‡è¿è¡Œä¸­çš„ç¨‹åºï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨QQï¼Œå°±å¯åŠ¨äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ç©ºé—´ï¼›å½“æˆ‘ä»¬ä½¿ç”¨è¿…é›·ï¼Œåˆå¯åŠ¨äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿå°†ä¸ºè¿…é›·åˆ†é…æ–°çš„å†…å­˜ç©ºé—´  ï¼ˆ2ï¼‰è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–è€…æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºï¼›æ˜¯åŠ¨æ€è¿‡ç¨‹ï¼šæœ‰å®ƒè‡ªèº«çš„äº§ç”Ÿã€å­˜åœ¨å’Œæ¶ˆäº¡çš„è¿‡ç¨‹</p><h3 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h3><ul><li><p>çº¿ç¨‹æ˜¯ç”±è¿›ç¨‹åˆ›å»ºçš„ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“</p></li><li><p>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹</p></li><li><p>å•çº¿ç¨‹ï¼šåŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹</p></li><li><p>å¤šçº¿ç¨‹ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹</p><p>æ¯”å¦‚ï¼šä¸€ä¸ªqqè¿›ç¨‹ï¼Œå¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªèŠå¤©çª—å£ï¼›ä¸€ä¸ªè¿…é›·è¿›ç¨‹ï¼Œå¯ä»¥åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶</p></li><li><p>å¹¶å‘ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œï¼Œé€ æˆ â€œè²Œä¼¼åŒæ—¶â€ çš„é”™è§‰ã€‚ç®€å•è¯´ï¼Œå•æ ¸ cpu å®ç°çš„å¤šä»»åŠ¡å°±æ˜¯å¹¶å‘</p></li><li><p>å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œã€‚å¤šæ ¸ cpu å¯ä»¥å®ç°å¹¶è¡Œã€‚</p></li><li><p>å¹¶å‘ ä¸ å¹¶è¡Œ å¯ä»¥åŒæ—¶å­˜åœ¨</p></li></ul><h3 id="çº¿ç¨‹åŸºæœ¬ä½¿ç”¨"><a href="#çº¿ç¨‹åŸºæœ¬ä½¿ç”¨" class="headerlink" title="çº¿ç¨‹åŸºæœ¬ä½¿ç”¨"></a>çº¿ç¨‹åŸºæœ¬ä½¿ç”¨</h3><h4 id="åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼"><a href="#åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼"></a>åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼</h4><p>åœ¨ java ä¸­çº¿ç¨‹ä½¿ç”¨æœ‰ä¸¤ç§æ–¹æ³•</p><ul><li>ç»§æ‰¿ Thread ç±»ï¼Œé‡å†™ run æ–¹æ³•</li><li>å®ç° Runnable æ¥å£ï¼Œé‡å†™ run æ–¹æ³•</li></ul> <img src="image-20220918091701532.png" alt="image-20220918091701532" style="zoom:80%;" /><h4 id="çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹1-ç»§æ‰¿-Thread-ç±»"><a href="#çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹1-ç»§æ‰¿-Thread-ç±»" class="headerlink" title="çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹1-ç»§æ‰¿ Thread ç±»"></a>çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹1-ç»§æ‰¿ Thread ç±»</h4><p><strong>ä¸ºä»€ä¹ˆå¯åŠ¨çº¿ç¨‹æ˜¯è°ƒç”¨ .start() è€Œä¸æ˜¯ .run()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºCatå¯¹è±¡ï¼Œå¯ä»¥å½“åšçº¿ç¨‹ä½¿ç”¨</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        cat.start(); <span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹-&gt; æœ€ç»ˆä¼šæ‰§è¡Œcatçš„runæ–¹æ³•</span><br>        <span class="hljs-comment">// .start()æºç </span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            (1)</span><br><span class="hljs-comment">            public synchronized void start() &#123;</span><br><span class="hljs-comment">                start0();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            (2)</span><br><span class="hljs-comment">            //start0() æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œæ˜¯JVMè°ƒç”¨, åº•å±‚æ˜¯c/c++å®ç°</span><br><span class="hljs-comment">            //çœŸæ­£å®ç°å¤šçº¿ç¨‹çš„æ•ˆæœï¼Œæ˜¯start0(), è€Œä¸æ˜¯ run</span><br><span class="hljs-comment">            private native void start0();</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">//cat.run();</span><br>        <span class="hljs-comment">// runæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•, æ²¡æœ‰çœŸæ­£çš„å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹</span><br>        <span class="hljs-comment">// æ­¤æ—¶çš„è¿è¡Œå®ƒçš„çº¿ç¨‹ä»ç„¶æ˜¯å½“å‰çº¿ç¨‹ï¼ˆmainï¼‰</span><br>        <span class="hljs-comment">// å°±ä¼šæŠŠrunæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œ</span><br><br>        <span class="hljs-comment">// .start()</span><br>        <span class="hljs-comment">// è¯´æ˜: å½“mainçº¿ç¨‹å¯åŠ¨ä¸€ä¸ªå­çº¿ç¨‹ Thread-0, ä¸»çº¿ç¨‹ä¸ä¼šé˜»å¡, ä¼šç»§ç»­æ‰§è¡Œ</span><br>        <span class="hljs-comment">// è¿™æ—¶ ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹æ˜¯äº¤æ›¿æ‰§è¡Œ..</span><br>        System.out.println(<span class="hljs-string">&quot;ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ&quot;</span> + Thread.currentThread().getName());<span class="hljs-comment">//åå­—main</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">60</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ä¸»çº¿ç¨‹ i=&quot;</span> + i);<br>            <span class="hljs-comment">//è®©ä¸»çº¿ç¨‹ä¼‘çœ </span><br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>        &#125;<br>        <span class="hljs-comment">//åœ¨å¤šçº¿ç¨‹é‡Œï¼Œä¸»çº¿ç¨‹ç»“æŸäº†ä¸ä¼šå½±å“å­çº¿ç¨‹çš„è¿è¡Œ</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//è€éŸ©è¯´æ˜</span><br><span class="hljs-comment">//1. å½“ä¸€ä¸ªç±»ç»§æ‰¿äº† Thread ç±»ï¼Œ è¯¥ç±»å°±å¯ä»¥å½“åšçº¿ç¨‹ä½¿ç”¨</span><br><span class="hljs-comment">//2. æˆ‘ä»¬ä¼šé‡å†™ runæ–¹æ³•ï¼Œå†™ä¸Šè‡ªå·±çš„ä¸šåŠ¡ä»£ç </span><br><span class="hljs-comment">//3. run Thread ç±» å®ç°äº† Runnable æ¥å£çš„runæ–¹æ³•</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    @Override</span><br><span class="hljs-comment">    public void run() &#123;</span><br><span class="hljs-comment">        if (target != null) &#123;</span><br><span class="hljs-comment">            target.run();</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">times</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//é‡å†™runæ–¹æ³•ï¼Œå†™ä¸Šè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘</span><br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//è¯¥çº¿ç¨‹æ¯éš”1ç§’ã€‚åœ¨æ§åˆ¶å°è¾“å‡º â€œå–µå–µ, æˆ‘æ˜¯å°çŒ«å’ªâ€</span><br>            System.out.println(<span class="hljs-string">&quot;å–µå–µ, æˆ‘æ˜¯å°çŒ«å’ª&quot;</span> + (++times) + <span class="hljs-string">&quot; çº¿ç¨‹å=&quot;</span> + Thread.currentThread().getName());<br>            <span class="hljs-comment">//è®©è¯¥çº¿ç¨‹ä¼‘çœ 1ç§’ ctrl+alt+t</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(times == <span class="hljs-number">80</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<span class="hljs-comment">//å½“times åˆ°80, é€€å‡ºwhile, è¿™æ—¶çº¿ç¨‹ä¹Ÿå°±é€€å‡º..</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> <img src="image-20220918101953780.png" alt="image-20220918101953780" style="zoom: 67%;" /><h4 id="çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹2-å®ç°-Runnable-æ¥å£"><a href="#çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹2-å®ç°-Runnable-æ¥å£" class="headerlink" title="çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹2-å®ç° Runnable æ¥å£"></a>çº¿ç¨‹åº”ç”¨æ¡ˆä¾‹2-å®ç° Runnable æ¥å£</h4><ul><li>java æ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¸€ä¸ªç±»å¯èƒ½å·²ç»ç»§æ‰¿äº†æŸä¸ªçˆ¶ç±»ï¼Œè¿™æ—¶å†ç”¨ç»§æ‰¿ Thread ç±»æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ˜¾ç„¶æ˜¯ä¸å¯èƒ½äº†</li><li>java è®¾è®¡è€…ä»¬æä¾›äº†å¦å¤–ä¸€ä¸ªæ–¹å¼åˆ›å»ºçº¿ç¨‹ï¼Œå°±æ˜¯é€šè¿‡å®ç° Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹</li></ul><p><strong>ä»£ç†æ¨¡å¼</strong></p><p>å®ç° Runnable æ¥å£çš„ç±»ä¸èƒ½ç›´æ¥è°ƒç”¨ .start() æ–¹æ³•å¯åŠ¨çº¿ç¨‹ï¼Œè€Œåº”è¯¥ç”¨ Thread ä»£ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(dog);<br>thread.start();<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        <span class="hljs-comment">//dog.start(); // è¿™é‡Œä¸èƒ½è°ƒç”¨start</span><br>        <span class="hljs-comment">//åˆ›å»ºThreadå¯¹è±¡,æŠŠdogå¯¹è±¡(å®ç°Runnableæ¥å£çš„å¯¹è±¡),æ”¾å…¥Thread</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(dog);<br>        thread.start();<br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>();<span class="hljs-comment">//å®ç°äº† Runnable</span><br>        <span class="hljs-type">ThreadProxy</span> <span class="hljs-variable">threadProxy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadProxy</span>(tiger);<br>        threadProxy.start();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123; &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;è€è™å—·å—·å«....&quot;</span>+ (++count) + Thread.currentThread().getName());<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">10</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><span class="hljs-comment">//é™æ€ä»£ç†æ¨¡å¼è®²è§£ï¼šï¼ˆæ¨¡ä»¿ï¼‰</span><br><span class="hljs-comment">//çº¿ç¨‹ä»£ç†ç±» , æ¨¡æ‹Ÿäº†ä¸€ä¸ªæç®€çš„Threadç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<span class="hljs-comment">//ä½ å¯ä»¥æŠŠè¯¥ç±»å½“åšThreadç±»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Runnable</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">//å±æ€§ï¼Œç±»å‹æ˜¯ Runnable</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (target != <span class="hljs-literal">null</span>) &#123;<br>            target.run();<span class="hljs-comment">//åŠ¨æ€ç»‘å®šï¼ˆè¿è¡Œç±»å‹Tigerï¼‰</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadProxy</span><span class="hljs-params">(Runnable target)</span> &#123;<br>        <span class="hljs-built_in">this</span>.target = target;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>        start0();<span class="hljs-comment">//è¿™ä¸ªæ–¹æ³•æ˜¯çœŸæ­£å®ç°å¤šçº¿ç¨‹æ–¹æ³•</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start0</span><span class="hljs-params">()</span> &#123;<br>        run();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123; <span class="hljs-comment">//é€šè¿‡å®ç°Runnableæ¥å£ï¼Œå¼€å‘çº¿ç¨‹</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//æ™®é€šæ–¹æ³•ï¼Œä¸ä¼šå¯åŠ¨çº¿ç¨‹</span><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;å°ç‹—æ±ªæ±ªå«..hi&quot;</span> + (++count) + Thread.currentThread().getName());<br>            <span class="hljs-comment">//ä¼‘çœ 1ç§’</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">10</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç»§æ‰¿Thread-ä¸-å®ç°Runnable-çš„åŒºåˆ«"><a href="#ç»§æ‰¿Thread-ä¸-å®ç°Runnable-çš„åŒºåˆ«" class="headerlink" title="ç»§æ‰¿Thread ä¸ å®ç°Runnable çš„åŒºåˆ«"></a>ç»§æ‰¿Thread ä¸ å®ç°Runnable çš„åŒºåˆ«</h4><ul><li><p>ä» java çš„è®¾è®¡æ¥çœ‹ï¼Œé€šè¿‡ç»§æ‰¿ Thread æˆ–è€…å®ç° Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œä»jdkå¸®åŠ©æ–‡æ¡£æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Thread ç±»æœ¬èº«å°±å®ç°äº† Runnable æ¥å£</p></li><li><p>å®ç° Runnable æ¥å£çš„æ–¹å¼ æ›´åŠ é€‚åˆå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªèµ„æº(åŒæ—¶æ‰§è¡Œä¸€ä¸ªå¯¹è±¡)çš„æƒ…å†µï¼Œå¹¶ä¸”é¿å…äº†å•ç»§æ‰¿çš„é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨ Runnable</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(<span class="hljs-string">&quot;===ä½¿ç”¨å®ç°æ¥å£æ–¹å¼æ¥å”®ç¥¨=====&quot;</span>);<br><span class="hljs-type">SellTicket02</span> <span class="hljs-variable">sellTicket02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SellTicket02</span>();<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket02).start();<span class="hljs-comment">//ç¬¬1ä¸ªçº¿ç¨‹-çª—å£</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket02).start();<span class="hljs-comment">//ç¬¬2ä¸ªçº¿ç¨‹-çª—å£</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket02).start();<span class="hljs-comment">//ç¬¬3ä¸ªçº¿ç¨‹-çª—å£</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="çº¿ç¨‹ä½¿ç”¨åº”ç”¨æ¡ˆä¾‹-å¤šçº¿ç¨‹æ‰§è¡Œ"><a href="#çº¿ç¨‹ä½¿ç”¨åº”ç”¨æ¡ˆä¾‹-å¤šçº¿ç¨‹æ‰§è¡Œ" class="headerlink" title="çº¿ç¨‹ä½¿ç”¨åº”ç”¨æ¡ˆä¾‹-å¤šçº¿ç¨‹æ‰§è¡Œ"></a>çº¿ç¨‹ä½¿ç”¨åº”ç”¨æ¡ˆä¾‹-å¤šçº¿ç¨‹æ‰§è¡Œ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">T1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T1</span>();<br>        <span class="hljs-type">T2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T2</span>();<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(t1);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(t2);<br>        thread1.start();<span class="hljs-comment">//å¯åŠ¨ç¬¬1ä¸ªçº¿ç¨‹</span><br>        thread2.start();<span class="hljs-comment">//å¯åŠ¨ç¬¬2ä¸ªçº¿ç¨‹</span><br>        <span class="hljs-comment">//...</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//æ¯éš”1ç§’è¾“å‡º â€œhello,worldâ€,è¾“å‡º10æ¬¡</span><br>            System.out.println(<span class="hljs-string">&quot;hello,world &quot;</span> + (++count));<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(count == <span class="hljs-number">60</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//æ¯éš”1ç§’è¾“å‡º â€œhiâ€,è¾“å‡º5æ¬¡</span><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + (++count));<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(count == <span class="hljs-number">50</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="çº¿ç¨‹ç»ˆæ­¢"><a href="#çº¿ç¨‹ç»ˆæ­¢" class="headerlink" title="çº¿ç¨‹ç»ˆæ­¢"></a>çº¿ç¨‹ç»ˆæ­¢</h3><h4 id="åŸºæœ¬è¯´æ˜"><a href="#åŸºæœ¬è¯´æ˜" class="headerlink" title="åŸºæœ¬è¯´æ˜"></a>åŸºæœ¬è¯´æ˜</h4><ul><li>å½“çº¿ç¨‹å®Œæˆä»»åŠ¡åï¼Œä¼šè‡ªåŠ¨é€€å‡º</li><li>è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å˜é‡æ¥æ§åˆ¶ run æ–¹æ³•é€€å‡ºçš„æ–¹å¼åœæ­¢çº¿ç¨‹ï¼Œå³é€šçŸ¥æ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadExit_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">T</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T</span>();<br>        t1.start();<br>        <span class="hljs-comment">//å¦‚æœå¸Œæœ›mainçº¿ç¨‹å»æ§åˆ¶t1 çº¿ç¨‹çš„ç»ˆæ­¢, å¿…é¡»å¯ä»¥ä¿®æ”¹ å¾ªç¯åˆ¤æ–­æ¡ä»¶ï¼ˆloopï¼‰</span><br>        <span class="hljs-comment">//è®©t1 é€€å‡ºrunæ–¹æ³•ï¼Œä»è€Œç»ˆæ­¢ t1çº¿ç¨‹ -&gt; é€šçŸ¥æ–¹å¼</span><br><br>        <span class="hljs-comment">//è®©ä¸»çº¿ç¨‹ä¼‘çœ  10 ç§’ï¼Œå†é€šçŸ¥ t1çº¿ç¨‹é€€å‡º</span><br>        System.out.println(<span class="hljs-string">&quot;mainçº¿ç¨‹ä¼‘çœ 10s...&quot;</span>);<br>        Thread.sleep(<span class="hljs-number">10</span> * <span class="hljs-number">1000</span>);<br>        t1.setLoop(<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªæ§åˆ¶å˜é‡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">loop</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (loop) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">50</span>);<span class="hljs-comment">// è®©å½“å‰çº¿ç¨‹ä¼‘çœ 50ms</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;T è¿è¡Œä¸­....&quot;</span> + (++count));<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLoop</span><span class="hljs-params">(<span class="hljs-type">boolean</span> loop)</span> &#123;<br>        <span class="hljs-built_in">this</span>.loop = loop;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="çº¿ç¨‹å¸¸ç”¨æ–¹æ³•"><a href="#çº¿ç¨‹å¸¸ç”¨æ–¹æ³•" class="headerlink" title="çº¿ç¨‹å¸¸ç”¨æ–¹æ³•"></a>çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</h3><h4 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><ul><li><p>setName  &#x2F;&#x2F;è®¾ç½®çº¿ç¨‹åç§°ï¼Œä½¿ä¹‹ä¸å‚æ•°nameç›¸åŒ</p></li><li><p>getName  &#x2F;&#x2F;è¿”å›è¯¥çº¿ç¨‹çš„åç§°</p></li><li><p>start  &#x2F;&#x2F;ä½¿è¯¥çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJava è™šæ‹Ÿæœºåº•å±‚è°ƒç”¨è¯¥çº¿ç¨‹çš„ start0() æ–¹æ³•</p><p>start() åº•å±‚ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥è°ƒç”¨ run()ï¼Œè€Œ run() å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„çº¿ç¨‹</p></li><li><p>run  &#x2F;&#x2F;è°ƒç”¨çº¿ç¨‹å¯¹è±¡ run() æ–¹æ³•</p></li><li><p>setPriority  &#x2F;&#x2F;æ›´æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§</p></li><li><p>getPriority  &#x2F;&#x2F;è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§ </p><p>çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´ï¼š MAX_PRIORITY&#x3D;10;   MIN_PRIORITY&#x3D;1;   NORM_PRIORITY&#x3D;5;</p></li><li><p>sleep  &#x2F;&#x2F;çº¿ç¨‹çš„é™æ€æ–¹æ³•ï¼Œåœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰</p></li><li><p>interrupt  &#x2F;&#x2F;ä¸­æ–­çº¿ç¨‹ä¼‘çœ </p><p>interrupt ä¸­æ–­çº¿ç¨‹ä¼‘çœ ï¼Œä½†å¹¶æ²¡æœ‰ç»“æŸçº¿ç¨‹ï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨äºä¸­æ–­æ­£åœ¨ä¼‘çœ çš„çº¿ç¨‹</p><p>æ¯”å¦‚ï¼šæ­£æœ‰ä¸€ä¸ªçº¿ç¨‹t1åœ¨ä¼‘çœ ï¼Œå¦‚æœè°ƒç”¨t1.interrupt()ä¸­æ–­ä¼‘çœ ï¼Œå°±ä¼šcatchåˆ°ä¸€ä¸ªå¼‚å¸¸ï¼ˆInterruptedExceptionå¼‚å¸¸ï¼‰</p></li><li><p>yieldï¼šçº¿ç¨‹çš„ç¤¼è®©ã€‚è®©å‡º cpuï¼Œè®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œï¼Œä½†ç¤¼è®©çš„èµ„æºä¸ç¡®å®šï¼Œæ‰€ä»¥ä¹Ÿä¸ä¸€å®šç¤¼è®©æˆåŠŸ</p></li><li><p>joinï¼šçº¿ç¨‹çš„åŠ å…¥ã€‚åŠ å…¥çš„çº¿ç¨‹ä¸€æ—¦æ’é˜ŸæˆåŠŸï¼Œåˆ™è‚¯å®šå…ˆæ‰§è¡Œå®ŒåŠ å…¥çš„çº¿ç¨‹æ‰€æœ‰çš„ä»»åŠ¡</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMethod01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-comment">//æµ‹è¯•ç›¸å…³çš„æ–¹æ³•</span><br>        <span class="hljs-type">T</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T</span>();<br>        t.setName(<span class="hljs-string">&quot;è€éŸ©&quot;</span>);<br>        t.setPriority(Thread.MIN_PRIORITY);<span class="hljs-comment">//1</span><br>        t.start();<span class="hljs-comment">//å¯åŠ¨å­çº¿ç¨‹</span><br>        <span class="hljs-comment">//ä¸»çº¿ç¨‹æ‰“å°5 hi ,ç„¶åæˆ‘å°±ä¸­æ–­ å­çº¿ç¨‹çš„ä¼‘çœ </span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + i);<br>        &#125;<br>        System.out.println(t.getName() + <span class="hljs-string">&quot; çº¿ç¨‹çš„ä¼˜å…ˆçº§ =&quot;</span> + t.getPriority());<span class="hljs-comment">//1</span><br>        t.interrupt();<span class="hljs-comment">//å½“æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå°±ä¼šä¸­æ–­ tçº¿ç¨‹çš„ä¼‘çœ .</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123; <span class="hljs-comment">//è‡ªå®šä¹‰çš„çº¿ç¨‹ç±»</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>                <span class="hljs-comment">//Thread.currentThread().getName() è·å–å½“å‰çº¿ç¨‹çš„åç§°</span><br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;  åƒåŒ…å­~~~~&quot;</span> + i);<br>            &#125;<br>            <span class="hljs-keyword">try</span> &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; ä¼‘çœ ä¸­~~~&quot;</span>);<br>                Thread.sleep(<span class="hljs-number">20000</span>);<span class="hljs-comment">//20ç§’</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                <span class="hljs-comment">//å½“è¯¥çº¿ç¨‹æ‰§è¡Œåˆ°ä¸€ä¸ªinterrupt æ–¹æ³•æ—¶ï¼Œå°±ä¼šcatchåˆ°ä¸€ä¸ªå¼‚å¸¸, å¯ä»¥åŠ å…¥è‡ªå·±çš„ä¸šåŠ¡ä»£ç </span><br>                <span class="hljs-comment">//InterruptedException æ˜¯æ•è·åˆ°ä¸€ä¸ªä¸­æ–­å¼‚å¸¸.</span><br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;è¢« interruptäº†&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//.join()ä¸.yield()</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMethod02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-type">T2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T2</span>();<br>        t2.start();<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">20</span>; i++) &#123;<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            System.out.println(<span class="hljs-string">&quot;ä¸»çº¿ç¨‹(å°å¼Ÿ) åƒäº† &quot;</span> + i  + <span class="hljs-string">&quot; åŒ…å­&quot;</span>);<br>            <span class="hljs-keyword">if</span>(i == <span class="hljs-number">5</span>) &#123;<br>                System.out.println(<span class="hljs-string">&quot;ä¸»çº¿ç¨‹(å°å¼Ÿ) è®© å­çº¿ç¨‹(è€å¤§) å…ˆåƒ..&quot;</span>);<br>                <span class="hljs-comment">//join, çº¿ç¨‹æ’é˜Ÿ</span><br>                t2.join();<span class="hljs-comment">// è¿™é‡Œç›¸å½“äºè®©t2 çº¿ç¨‹å…ˆæ‰§è¡Œå®Œæ¯•</span><br><span class="hljs-comment">//                Thread.yield();//ç¤¼è®©ï¼Œä¸ä¸€å®šæˆåŠŸ..</span><br>                System.out.println(<span class="hljs-string">&quot;çº¿ç¨‹(è€å¤§) åƒå®Œäº† ä¸»çº¿ç¨‹(å°å¼Ÿ) æ¥ç€åƒ..&quot;</span>);<br>            &#125;<br><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">20</span>; i++) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<span class="hljs-comment">//ä¼‘çœ 1ç§’</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;å­çº¿ç¨‹(è€å¤§) åƒäº† &quot;</span> + i +  <span class="hljs-string">&quot; åŒ…å­&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹"><a href="#ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹"></a>ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹</h4><ul><li><p>ç”¨æˆ·çº¿ç¨‹ï¼šä¹Ÿå«å·¥ä½œçº¿ç¨‹ï¼Œå½“çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œåæˆ–ä»¥é€šçŸ¥æ–¹å¼ç»“æŸ</p></li><li><p>å®ˆæŠ¤çº¿ç¨‹ï¼šä¸€èˆ¬æ˜¯ä¸ºå·¥ä½œçº¿ç¨‹æœåŠ¡çš„ï¼Œå½“æ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸ</p></li><li><p>å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼šåƒåœ¾å›æ”¶æœºåˆ¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¯­æ³•ï¼š</span><br>çº¿ç¨‹å¯¹è±¡.setDaemon(<span class="hljs-literal">true</span>);<br>çº¿ç¨‹å¯¹è±¡.start();<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¡ˆä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMethod03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">MyDaemonThread</span> <span class="hljs-variable">myDaemonThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDaemonThread</span>();<br>        <span class="hljs-comment">// å¦‚æœæˆ‘ä»¬å¸Œæœ›å½“mainçº¿ç¨‹ç»“æŸåï¼Œå­çº¿ç¨‹è‡ªåŠ¨ç»“æŸï¼Œ</span><br>        <span class="hljs-comment">// é‚£ä¹ˆåªéœ€å°†å­çº¿ç¨‹è®¾ä¸ºå®ˆæŠ¤çº¿ç¨‹å³å¯</span><br>        myDaemonThread.setDaemon(<span class="hljs-literal">true</span>);<br>        myDaemonThread.start();<br>        <span class="hljs-keyword">for</span>( <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<span class="hljs-comment">//mainçº¿ç¨‹</span><br>            System.out.println(<span class="hljs-string">&quot;å®å¼ºåœ¨è¾›è‹¦çš„å·¥ä½œ...&quot;</span>);<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;å®å¼ºå›å®¶äº†...&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDaemonThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (; ; ) &#123;<span class="hljs-comment">//æ— é™å¾ªç¯</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<span class="hljs-comment">//ä¼‘çœ 1000æ¯«ç§’</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;é©¬è“‰å’Œå®‹å–†å¿«ä¹èŠå¤©ï¼Œå“ˆå“ˆå“ˆ~~~&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h3> <img src="image-20220918154416827.png" alt="image-20220918154416827" style="zoom: 80%;" /> <img src="image-20220918154841698.png" alt="image-20220918154841698" style="zoom:55%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å†™ç¨‹åºæŸ¥çœ‹çº¿ç¨‹çŠ¶æ€</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadState_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">T</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T</span>();<br>        System.out.println(t.getName() + <span class="hljs-string">&quot; çŠ¶æ€ &quot;</span> + t.getState());<br>        t.start();<br>        <span class="hljs-keyword">while</span> (Thread.State.TERMINATED != t.getState()) &#123;<br>            System.out.println(t.getName() + <span class="hljs-string">&quot; çŠ¶æ€ &quot;</span> + t.getState());<br>            Thread.sleep(<span class="hljs-number">500</span>);<br>        &#125;<br>        System.out.println(t.getName() + <span class="hljs-string">&quot; çŠ¶æ€ &quot;</span> + t.getState());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>                System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + i);<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="çº¿ç¨‹çš„åŒæ­¥"><a href="#çº¿ç¨‹çš„åŒæ­¥" class="headerlink" title="çº¿ç¨‹çš„åŒæ­¥"></a>çº¿ç¨‹çš„åŒæ­¥</h3><h4 id="çº¿ç¨‹åŒæ­¥æœºåˆ¶"><a href="#çº¿ç¨‹åŒæ­¥æœºåˆ¶" class="headerlink" title="çº¿ç¨‹åŒæ­¥æœºåˆ¶"></a>çº¿ç¨‹åŒæ­¥æœºåˆ¶</h4><ul><li>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸€äº›æ•æ„Ÿæ•°æ®ä¸å…è®¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ­¤æ—¶å°±ä½¿ç”¨åŒæ­¥è®¿é—®æŠ€æœ¯ï¼Œä¿è¯æ•°æ®åœ¨ä»»ä½•åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§</li><li>ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šçº¿ç¨‹åŒæ­¥ï¼Œå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶å®ƒçº¿ç¨‹éƒ½ä¸å¯ä»¥å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå…¶å®ƒçº¿ç¨‹æ‰èƒ½å¯¹è¯¥çº¿ç¨‹å†…å­˜åœ°å€è¿›è¡Œæ“ä½œ</li></ul><h4 id="åŒæ­¥å…·ä½“æ–¹æ³•-Synchronized"><a href="#åŒæ­¥å…·ä½“æ–¹æ³•-Synchronized" class="headerlink" title="åŒæ­¥å…·ä½“æ–¹æ³•-Synchronized"></a>åŒæ­¥å…·ä½“æ–¹æ³•-Synchronized</h4><p>Synchronized æ˜¯éå…¬å¹³é”</p><ul><li><p>åŒæ­¥ä»£ç å—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">synchronized</span>(å¯¹è±¡)&#123;  <span class="hljs-comment">// å¾—åˆ°å¯¹è±¡çš„é”ï¼Œæ‰èƒ½æ“ä½œåŒæ­¥ä»£ç </span><br>    <span class="hljs-comment">//éœ€è¦è¢«åŒæ­¥ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>synchronized è¿˜å¯ä»¥æ”¾åœ¨æ–¹æ³•å£°æ˜ä¸­ï¼Œè¡¨ç¤ºæ•´ä¸ªæ–¹æ³•ä¸ºåŒæ­¥æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m</span><span class="hljs-params">(String name)</span>&#123;<br>    <span class="hljs-comment">//éœ€è¦è¢«åŒæ­¥çš„ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h3><ul><li><p>Java è¯­è¨€ä¸­ï¼Œå¼•å…¥äº†å¯¹è±¡äº’æ–¥é”çš„æ¦‚å¿µï¼Œæ¥ä¿è¯å…±äº«æ•°æ®æ“ä½œçš„å®Œæ•´æ€§</p></li><li><p>æ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”äºä¸€ä¸ªå¯ç§°ä¸º â€œäº’æ–¥é”â€ çš„æ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°ç”¨æ¥ä¿è¯åœ¨ä»»ä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡</p></li><li><p>å…³é”®å­— synchronized æ¥ä¸å¯¹è±¡çš„äº’æ–¥é”è”ç³»ã€‚å½“æŸä¸ªå¯¹è±¡ç”¨ synchronized ä¿®é¥°æ—¶ï¼Œè¡¨æ˜è¯¥å¯¹è±¡åœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è®¿é—®</p></li><li><p>åŒæ­¥çš„å±€é™æ€§ï¼šå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡é™ä½</p></li><li><p><strong>åŒæ­¥æ–¹æ³•ï¼ˆéé™æ€çš„ï¼‰çš„é”é»˜è®¤æ˜¯ thisï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒä»»æ„å¯¹è±¡ï¼ˆä½†è¦æ±‚æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰</strong></p></li><li><p><strong>åŒæ­¥æ–¹æ³•ï¼ˆé™æ€çš„ï¼‰çš„é”é»˜è®¤ä¸ºå½“å‰ç±»æœ¬èº«ï¼ˆç±»å.classï¼‰ã€‚ï¼ˆé™æ€æ–¹æ³•æ²¡æœ‰ thisï¼‰</strong></p></li><li><p>å®ç°çš„è½åœ°æ­¥éª¤</p><ul><li><p>éœ€è¦å…ˆåˆ†æä¸Šé”çš„ä»£ç </p></li><li><p>é€‰æ‹©åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ï¼ˆæ¨èä½¿ç”¨åŒæ­¥ä»£ç å—ï¼‰</p></li><li><p>è¦æ±‚å¤šä¸ªçº¿ç¨‹çš„é”å¯¹è±¡ä¸ºåŒä¸€ä¸ªï¼ˆæ³¨æ„ this ä¸­å­˜åœ¨çš„é™·é˜±ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ³¨æ„ this ä¸­å­˜åœ¨çš„é™·é˜±</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">synchronized</span>&#123;&#125;<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().start();<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().start();<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().start();<br><span class="hljs-comment">//æ­¤æ—¶ä¸‰ä¸ªçº¿ç¨‹çš„thisä¸ç›¸åŒ</span><br></code></pre></td></tr></table></figure></li></ul></li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> testPackage;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JavaTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">SellTicket03</span> <span class="hljs-variable">sellTicket03</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SellTicket03</span>();<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket03).start();<span class="hljs-comment">//ç¬¬ 1 ä¸ªçº¿ç¨‹-çª—å£</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket03).start();<span class="hljs-comment">//ç¬¬ 2 ä¸ªçº¿ç¨‹-çª—å£</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket03).start();<span class="hljs-comment">//ç¬¬ 3 ä¸ªçº¿ç¨‹-çª—å£</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//å®ç°æ¥å£æ–¹å¼, ä½¿ç”¨ synchronized å®ç°çº¿ç¨‹åŒæ­¥</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SellTicket03</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">ticketNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<span class="hljs-comment">//è®©å¤šä¸ªçº¿ç¨‹å…±äº« ticketNum</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">loop</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<span class="hljs-comment">//æ§åˆ¶ run æ–¹æ³•å˜é‡</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">synchronized</span> (SellTicket03.class) &#123;<br>            System.out.println(<span class="hljs-string">&quot;m2&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sell</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//åŒæ­¥æ–¹æ³•, åœ¨åŒä¸€æ—¶åˆ»ï¼Œ åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ sell æ–¹æ³•</span><br>    <span class="hljs-keyword">if</span> (ticketNum &lt;= <span class="hljs-number">0</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;å”®ç¥¨ç»“æŸ...&quot;</span>);<br>            loop = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;çª—å£ &quot;</span> + Thread.currentThread().getName() + <span class="hljs-string">&quot; å”®å‡ºä¸€å¼ ç¥¨&quot;</span><br>                           + <span class="hljs-string">&quot; å‰©ä½™ç¥¨æ•°=&quot;</span> + (--ticketNum));<span class="hljs-comment">//1 - 0 - -1 - -2</span><br><br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (loop) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>Thread.sleep(<span class="hljs-number">50</span>);<br>&#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>e.printStackTrace();<br>&#125;<br>            sell();<span class="hljs-comment">//sell æ–¹æ³•æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•</span><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="çº¿ç¨‹çš„æ­»é”"><a href="#çº¿ç¨‹çš„æ­»é”" class="headerlink" title="çº¿ç¨‹çš„æ­»é”"></a>çº¿ç¨‹çš„æ­»é”</h3><p><strong>åŸºæœ¬ä»‹ç»ï¼š</strong>å¤šä¸ªçº¿ç¨‹éƒ½å ç”¨äº†å¯¹æ–¹çš„é”èµ„æºï¼Œä½†ä¸è‚¯ç›¸è®©ï¼Œå¯¼è‡´äº†æ­»é”ï¼ˆä¸€å®šè¦é¿å…æ­»é”çš„å‘ç”Ÿï¼‰</p><p>ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼š</p><p>å¦ˆå¦ˆï¼šä½ å…ˆå®Œæˆä½œä¸šï¼Œæˆ‘æ‰è®©ä½ ç©æ‰‹æœº</p><p>å°æ˜ï¼šä½ å…ˆè®©æˆ‘ç©æ‰‹æœºï¼Œæˆ‘æ‰å®Œæˆä½œä¸š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¨¡æ‹Ÿæ­»é”</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLock_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//æ¨¡æ‹Ÿæ­»é”ç°è±¡</span><br>        <span class="hljs-type">DeadLockDemo</span> <span class="hljs-variable">A</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeadLockDemo</span>(<span class="hljs-literal">true</span>);<br>        A.setName(<span class="hljs-string">&quot;Açº¿ç¨‹&quot;</span>);<br>        <span class="hljs-type">DeadLockDemo</span> <span class="hljs-variable">B</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeadLockDemo</span>(<span class="hljs-literal">false</span>);<br>        B.setName(<span class="hljs-string">&quot;Bçº¿ç¨‹&quot;</span>);<br>        A.start();<br>        B.start();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//çº¿ç¨‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLockDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">o1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<span class="hljs-comment">// ä¿è¯å¤šçº¿ç¨‹ï¼Œå…±äº«ä¸€ä¸ªå¯¹è±¡,è¿™é‡Œä½¿ç”¨static</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">o2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>    <span class="hljs-type">boolean</span> flag;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeadLockDemo</span><span class="hljs-params">(<span class="hljs-type">boolean</span> flag)</span> &#123;<span class="hljs-comment">//æ„é€ å™¨</span><br>        <span class="hljs-built_in">this</span>.flag = flag;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ä¸‹é¢ä¸šåŠ¡é€»è¾‘çš„åˆ†æ</span><br>        <span class="hljs-comment">//1. å¦‚æœflag ä¸º T, çº¿ç¨‹A å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰ o1 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å– o2 å¯¹è±¡é”</span><br>        <span class="hljs-comment">//2. å¦‚æœçº¿ç¨‹A å¾—ä¸åˆ° o2 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked</span><br>        <span class="hljs-comment">//3. å¦‚æœflag ä¸º F, çº¿ç¨‹B å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰ o2 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å– o1 å¯¹è±¡é”</span><br>        <span class="hljs-comment">//4. å¦‚æœçº¿ç¨‹B å¾—ä¸åˆ° o1 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked</span><br>        <span class="hljs-keyword">if</span> (flag) &#123;<br>            <span class="hljs-keyword">synchronized</span> (o1) &#123;<span class="hljs-comment">//å¯¹è±¡äº’æ–¥é”, ä¸‹é¢å°±æ˜¯åŒæ­¥ä»£ç </span><br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; è¿›å…¥o1_1&quot;</span>);<br>                <span class="hljs-keyword">synchronized</span> (o2) &#123; <span class="hljs-comment">// è¿™é‡Œè·å¾—liå¯¹è±¡çš„ç›‘è§†æƒ</span><br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; è¿›å…¥o1_2&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">synchronized</span> (o2) &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; è¿›å…¥o2_1&quot;</span>);<br>                <span class="hljs-keyword">synchronized</span> (o1) &#123; <span class="hljs-comment">// è¿™é‡Œè·å¾—liå¯¹è±¡çš„ç›‘è§†æƒ</span><br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; è¿›å…¥2_2&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é‡Šæ”¾é”"><a href="#é‡Šæ”¾é”" class="headerlink" title="é‡Šæ”¾é”"></a>é‡Šæ”¾é”</h3><h4 id="ä¼šé‡Šæ”¾é”çš„æ“ä½œ"><a href="#ä¼šé‡Šæ”¾é”çš„æ“ä½œ" class="headerlink" title="ä¼šé‡Šæ”¾é”çš„æ“ä½œ"></a>ä¼šé‡Šæ”¾é”çš„æ“ä½œ</h4><ul><li>å½“å‰çº¿ç¨‹çš„åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•æ‰§è¡Œç»“æŸ</li><li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ° breakã€return</li><li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°äº†æœªå¤„ç†çš„ Error æˆ– Exceptionï¼Œå¯¼è‡´å¼‚å¸¸ç»“æŸ</li><li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”</li></ul><h4 id="ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ"><a href="#ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ" class="headerlink" title="ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ"></a>ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ</h4><ul><li>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨äº† Thread.sleep()ã€Thread.yield() æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ä¼šé‡Šæ”¾é”</li><li>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„ suspend() æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”</li><li>æç¤ºï¼šåº”å°½é‡é¿å…ä½¿ç”¨ suspend() å’Œ resume() æ¥æ§åˆ¶çº¿ç¨‹ï¼Œæ–¹æ³•ä¸å†æ¨èä½¿ç”¨</li></ul><h3 id="Semaphore-é™æµ"><a href="#Semaphore-é™æµ" class="headerlink" title="Semaphore(é™æµ)"></a>Semaphore(é™æµ)</h3><p><a href="https://blog.csdn.net/weixin_45203607/article/details/122840245">Javaå¤šçº¿ç¨‹-Semaphore(é™æµ)</a></p><h2 id="IOæµ"><a href="#IOæµ" class="headerlink" title="IOæµ"></a>IOæµ</h2><h3 id="æ–‡ä»¶-æ–‡ä»¶æµ"><a href="#æ–‡ä»¶-æ–‡ä»¶æµ" class="headerlink" title="æ–‡ä»¶-æ–‡ä»¶æµ"></a>æ–‡ä»¶-æ–‡ä»¶æµ</h3> <img src="image-20220920140407846.png" alt="image-20220920140407846" style="zoom:50%;" /><h3 id="å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ"><a href="#å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ" class="headerlink" title="å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ"></a>å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ</h3><h4 id="åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç›¸å…³æ„é€ å™¨å’Œæ–¹æ³•"><a href="#åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç›¸å…³æ„é€ å™¨å’Œæ–¹æ³•" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç›¸å…³æ„é€ å™¨å’Œæ–¹æ³•"></a>åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç›¸å…³æ„é€ å™¨å’Œæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">ï¼ˆ<span class="hljs-number">1</span>ï¼‰ <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(String pathname) <span class="hljs-comment">//æ ¹æ®è·¯å¾„æ„å»ºä¸€ä¸ªFileå¯¹è±¡</span><br>ï¼ˆ<span class="hljs-number">2</span>ï¼‰ <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(File parent, String child)  <span class="hljs-comment">//æ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶+å­è·¯å¾„æ„å»ºä¸€ä¸ªFileå¯¹è±¡</span><br>ï¼ˆ<span class="hljs-number">3</span>ï¼‰ <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(String parent, String child)  <span class="hljs-comment">//æ ¹æ®çˆ¶ç›®å½•+å­è·¯å¾„æ„å»ºä¸€ä¸ªFileå¯¹è±¡</span><br>ï¼ˆ<span class="hljs-number">0</span>ï¼‰ createNewFile  <span class="hljs-comment">//åˆ›å»ºæ–°æ–‡ä»¶  æ³¨æ„ï¼šåœ¨ä½¿ç”¨ createNewFileæ–¹æ³•åæ‰ä¼šçœŸæ­£åˆ›å»ºæ–‡ä»¶</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileCreate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">//æ–¹å¼1 new File(String pathname)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create01</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\news1.txt&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);  <span class="hljs-comment">//åˆ›å»ºæ–‡ä»¶å¯¹è±¡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            file.createNewFile();  <span class="hljs-comment">//åˆ›å»ºæ–°æ–‡ä»¶</span><br>            System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶åˆ›å»ºæˆåŠŸ&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-comment">//æ–¹å¼2 new File(File parent,String child) //æ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶+å­è·¯å¾„æ„å»º</span><br>    <span class="hljs-comment">//e:\\news2.txt</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">create02</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">parentFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;d:\\&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;news2.txt&quot;</span>;<br>        <span class="hljs-comment">//è¿™é‡Œçš„fileå¯¹è±¡ï¼Œåœ¨javaç¨‹åºä¸­ï¼Œåªæ˜¯ä¸€ä¸ªå¯¹è±¡</span><br>        <span class="hljs-comment">//åªæœ‰æ‰§è¡Œäº†createNewFile æ–¹æ³•ï¼Œæ‰ä¼šçœŸæ­£çš„ï¼Œåœ¨ç£ç›˜åˆ›å»ºè¯¥æ–‡ä»¶</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(parentFile, fileName);<br>        <span class="hljs-keyword">try</span> &#123;<br>            file.createNewFile();<br>            System.out.println(<span class="hljs-string">&quot;åˆ›å»ºæˆåŠŸ~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//æ–¹å¼3 new File(String parent,String child) //æ ¹æ®çˆ¶ç›®å½•+å­è·¯å¾„æ„å»º</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create03</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//String parentPath = &quot;d:/&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">parentPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\&quot;</span>;  <span class="hljs-comment">//æ¨èè¿™ç§</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;news3.txt&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(parentPath, fileName);<br>        <span class="hljs-keyword">try</span> &#123;<br>            file.createNewFile();<br>            System.out.println(<span class="hljs-string">&quot;åˆ›å»ºæˆåŠŸ~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//ä¸‹é¢å››ä¸ªéƒ½æ˜¯æŠ½è±¡ç±»</span><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-comment">//InputStream</span><br>    <span class="hljs-comment">//OutputStream</span><br>    <span class="hljs-comment">//Reader //å­—ç¬¦è¾“å…¥æµ</span><br>    <span class="hljs-comment">//Writer  //å­—ç¬¦è¾“å‡ºæµ</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è·å–æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯"><a href="#è·å–æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯" class="headerlink" title="è·å–æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯"></a>è·å–æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯</h4><p>getNameã€getAbsolutePathã€getParentã€lengthã€existsã€isFileã€isDirectory</p> <img src="image-20220920142432214.png" alt="image-20220920142432214" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.File;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInformation</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">//è·å–æ–‡ä»¶çš„ä¿¡æ¯</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">info</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//å…ˆåˆ›å»ºæ–‡ä»¶å¯¹è±¡</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;d:\\news1.txt&quot;</span>);<br>        <span class="hljs-comment">//è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”ä¿¡æ¯</span><br>        System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶åå­—=&quot;</span> + file.getName());<br>        <span class="hljs-comment">//getNameã€getAbsolutePathã€getParentã€lengthã€existsã€isFileã€isDirectory</span><br>        System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶ç»å¯¹è·¯å¾„=&quot;</span> + file.getAbsolutePath());<br>        System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶çˆ¶çº§ç›®å½•=&quot;</span> + file.getParent());<br>        System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶å¤§å°(å­—èŠ‚)=&quot;</span> + file.length());<span class="hljs-comment">//ä¸åŒç¼–ç çš„å­˜å‚¨æ–¹å¼ä¸åŒ</span><br>        System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶æ˜¯å¦å­˜åœ¨=&quot;</span> + file.exists());<span class="hljs-comment">//T</span><br>        System.out.println(<span class="hljs-string">&quot;æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶=&quot;</span> + file.isFile());<span class="hljs-comment">//T</span><br>        System.out.println(<span class="hljs-string">&quot;æ˜¯ä¸æ˜¯ä¸€ä¸ªç›®å½•=&quot;</span> + file.isDirectory());<span class="hljs-comment">//F</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç›®å½•çš„æ“ä½œå’Œæ–‡ä»¶åˆ é™¤"><a href="#ç›®å½•çš„æ“ä½œå’Œæ–‡ä»¶åˆ é™¤" class="headerlink" title="ç›®å½•çš„æ“ä½œå’Œæ–‡ä»¶åˆ é™¤"></a>ç›®å½•çš„æ“ä½œå’Œæ–‡ä»¶åˆ é™¤</h4><p>mkdir åˆ›å»ºä¸€çº§ç›®å½•</p><p>mkdirs åˆ›å»ºå¤šçº§ç›®å½•</p><p>delete åˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶</p><p>æ³¨æ„ï¼šdelete åªèƒ½åˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶ï¼Œå¦‚æœç›®å½•é‡Œæœ‰æ–‡ä»¶æˆ–å­ç›®å½•ï¼Œåˆ™éœ€å…ˆåˆ é™¤é‡Œé¢çš„æ–‡ä»¶æˆ–å­ç›®å½•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.File;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Directory_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//</span><br>    &#125;<br><br>    <span class="hljs-comment">//åˆ¤æ–­ d:\\news1.txt æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±åˆ é™¤</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\news1.txt&quot;</span>;  <span class="hljs-comment">//æ–‡ä»¶</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-keyword">if</span> (file.exists()) &#123;<br>            <span class="hljs-keyword">if</span> (file.delete()) &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¯¥æ–‡ä»¶ä¸å­˜åœ¨...&quot;</span>);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">//åˆ¤æ–­ D:\\demo02 æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±åˆ é™¤ï¼Œå¦åˆ™æç¤ºä¸å­˜åœ¨</span><br>    <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½“ä¼šåˆ°ï¼Œåœ¨javaç¼–ç¨‹ä¸­ï¼Œç›®å½•ä¹Ÿè¢«å½“åšæ–‡ä»¶</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;D:\\demo02&quot;</span>;  <span class="hljs-comment">//ç›®å½•</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-keyword">if</span> (file.exists()) &#123;<br>            <span class="hljs-keyword">if</span> (file.delete()) &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¯¥ç›®å½•ä¸å­˜åœ¨...&quot;</span>);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">//åˆ¤æ–­ D:\\demo\\a\\b\\c ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æç¤ºå·²ç»å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ›å»º</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">directoryPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;D:\\demo\\a\\b\\c&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(directoryPath);<br>        <span class="hljs-keyword">if</span> (file.exists()) &#123;<br>            System.out.println(directoryPath + <span class="hljs-string">&quot;å­˜åœ¨..&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (file.mkdirs()) &#123; <span class="hljs-comment">//åˆ›å»ºä¸€çº§ç›®å½•ä½¿ç”¨mkdir() ï¼Œåˆ›å»ºå¤šçº§ç›®å½•ä½¿ç”¨mkdirs()</span><br>                System.out.println(directoryPath + <span class="hljs-string">&quot;åˆ›å»ºæˆåŠŸ..&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(directoryPath + <span class="hljs-string">&quot;åˆ›å»ºå¤±è´¥...&quot;</span>);<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="IO-æµåŸç†åŠæµçš„åˆ†ç±»"><a href="#IO-æµåŸç†åŠæµçš„åˆ†ç±»" class="headerlink" title="IO æµåŸç†åŠæµçš„åˆ†ç±»"></a>IO æµåŸç†åŠæµçš„åˆ†ç±»</h3><h4 id="Java-IO-æµåŸç†"><a href="#Java-IO-æµåŸç†" class="headerlink" title="Java IO æµåŸç†"></a>Java IO æµåŸç†</h4><ul><li><p>I&#x2F;Oæ˜¯Input&#x2F;Outputçš„ç¼©å†™ï¼ŒI&#x2F;OæŠ€æœ¯æ˜¯éå¸¸å®ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºå¤„ç†æ•°æ®ä¼ è¾“ã€‚</p><p>å¦‚è¯»&#x2F;å†™æ–‡ä»¶ï¼Œç½‘ç»œé€šè®¯ç­‰</p></li><li><p>Javaç¨‹åºä¸­ï¼Œå¯¹äºæ•°æ®çš„è¾“å…¥&#x2F;è¾“å‡ºæ“ä½œä»¥ â€œæµï¼ˆstreamï¼‰â€ çš„æ–¹å¼è¿›è¡Œ</p></li><li><p>java.io åŒ…ä¸‹æä¾›äº†å„ç§ â€œæµâ€ ç±»å’Œæ¥å£ï¼Œç”¨ä»¥è·å–ä¸åŒç§ç±»çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ–¹æ³•è¾“å…¥æˆ–è¾“å‡ºæ•°æ®</p></li><li><p>è¾“å…¥ inputï¼šè¯»å–å¤–éƒ¨æ•°æ®ï¼ˆç½‘ç»œæˆ–ç£ç›˜ã€å…‰ç›˜ç­‰å­˜å‚¨è®¾å¤‡çš„æ•°æ®ï¼‰åˆ°ç¨‹åºï¼ˆå†…å­˜ï¼‰ä¸­ã€‚</p></li><li><p>è¾“å‡º outputï¼šå°†ç¨‹åºï¼ˆå†…å­˜ï¼‰æ•°æ®è¾“å‡ºåˆ°ç½‘ç»œæˆ–ç£ç›˜ã€å…‰ç›˜ç­‰å­˜å‚¨è®¾å¤‡ä¸­</p></li></ul><h4 id="æµçš„åˆ†ç±»"><a href="#æµçš„åˆ†ç±»" class="headerlink" title="æµçš„åˆ†ç±»"></a>æµçš„åˆ†ç±»</h4><ul><li><p>æŒ‰æ“ä½œæ•°æ®å•ä½ä¸åŒåˆ†ä¸ºï¼šå­—èŠ‚æµï¼ˆ8 bitï¼‰äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå­—èŠ‚æµï¼ˆæŒ‰å­—ç¬¦ï¼‰æ–‡æœ¬æ–‡ä»¶  |ï¼ˆå¦åˆ™å¯èƒ½æœ‰æŸå¤±ï¼‰</p></li><li><p>æŒ‰æ•°æ®æµçš„æµå‘ä¸åŒåˆ†ä¸ºï¼šè¾“å…¥æµã€è¾“å‡ºæµ</p></li><li><p>æŒ‰æµçš„è§’è‰²ä¸åŒåˆ†ä¸ºï¼šå­—èŠ‚æµã€å¤„ç†æµ&#x2F;åŒ…è£…æµ</p> <img src="image-20220920145929039.png" alt="image-20220920145929039" style="zoom: 80%;" /></li><li><p>Java çš„ IO æµå…±æ¶‰åŠ40å¤šä¸ªç±»ï¼Œå®é™…ä¸Šéå¸¸è§„åˆ™ï¼Œéƒ½æ˜¯ä»å¦‚ä¸Š4ä¸ªæŠ½è±¡åŸºç±»æ´¾ç”Ÿå‡ºæ¥çš„</p></li><li><p>ç”±è¿™4ä¸ªæŠ½è±¡åŸºç±»æ´¾ç”Ÿå‡ºæ¥çš„å­ç±»åç§°éƒ½æ˜¯ä»¥å…¶çˆ¶ç±»åä½œä¸ºå­ç±»ååç¼€</p></li></ul><h3 id="IO-æµä½“ç³»å›¾-å¸¸ç”¨çš„ç±»"><a href="#IO-æµä½“ç³»å›¾-å¸¸ç”¨çš„ç±»" class="headerlink" title="IO æµä½“ç³»å›¾-å¸¸ç”¨çš„ç±»"></a>IO æµä½“ç³»å›¾-å¸¸ç”¨çš„ç±»</h3><p><strong>IO æµä½“ç³»å›¾ï¼š</strong></p> <img src="image-20220920150646088.png" alt="image-20220920150646088" style="zoom:80%;" /><p><strong>æ–‡ä»¶ VS æµï¼š</strong></p> <img src="image-20220920150738374.png" alt="image-20220920150738374" style="zoom:50%;" /><p><strong>å„ä¸ªInputStreamçš„å…³ç³»ï¼š</strong></p> <img src="image-20220920151707753.png" alt="image-20220920151707753" style="zoom:50%;" /><h4 id="FileInputStream"><a href="#FileInputStream" class="headerlink" title="FileInputStream"></a>FileInputStream</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¼”ç¤ºè¯»å–æ–‡ä»¶...</span><br><span class="hljs-comment">     * å•ä¸ªå­—èŠ‚çš„è¯»å–ï¼Œæ•ˆç‡æ¯”è¾ƒä½</span><br><span class="hljs-comment">     * -&gt; ä½¿ç”¨ read(byte[] b)</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile01</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hello.txt&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readData</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//åˆ›å»º FileInputStream å¯¹è±¡ï¼Œç”¨äºè¯»å– æ–‡ä»¶</span><br>            fileInputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath);<br>            <span class="hljs-comment">//.read()ä»è¯¥è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰è¾“å…¥å¯ç”¨ï¼Œæ­¤æ–¹æ³•å°†è¢«é˜»æ­¢ã€‚</span><br>            <span class="hljs-comment">//å¦‚æœè¿”å›-1 , è¡¨ç¤ºè¯»å–å®Œæ¯•</span><br>            <span class="hljs-keyword">while</span> ((readData = fileInputStream.read()) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">// è¯»å–åˆ°çš„å€¼ä¸ºintç±»å‹ è¦è½¬æˆcharæ˜¾ç¤º</span><br>                System.out.print((<span class="hljs-type">char</span>)readData);<br>                <span class="hljs-comment">// æ³¨æ„ï¼šè¯¥æ–¹æ³•ä¸€æ¬¡åªèƒ½è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼ˆutf-8ä¸­å­—æ¯å 1å­—èŠ‚ï¼Œæ±‰å­—å 3å­—èŠ‚ï¼‰</span><br>                <span class="hljs-comment">// å¦‚æœå‡ºç°æ±‰å­—ç­‰éœ€3ä¸ªå­—èŠ‚å­˜å‚¨çš„æ–‡å­—ï¼Œåˆ™ä¼šå‡ºç°ä¹±ç </span><br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾èµ„æº.</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                fileInputStream.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä½¿ç”¨ read(byte[] b) è¯»å–æ–‡ä»¶ï¼Œæé«˜æ•ˆç‡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile02</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hello.txt&quot;</span>;<br>        <span class="hljs-comment">//å­—èŠ‚æ•°ç»„</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">8</span>]; <span class="hljs-comment">//ä¸€æ¬¡è¯»å–8ä¸ªå­—èŠ‚.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//åˆ›å»º FileInputStream å¯¹è±¡ï¼Œç”¨äºè¯»å– æ–‡ä»¶</span><br>            fileInputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath);<br>            <span class="hljs-comment">//.read(buf)</span><br>            <span class="hljs-comment">// ä»è¯¥è¾“å…¥æµè¯»å–æœ€å¤šbuf.lengthå­—èŠ‚çš„æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ï¼ˆbufï¼‰ã€‚</span><br>            <span class="hljs-comment">// å¦‚æœè¿”å›-1 , è¡¨ç¤ºè¯»å–å®Œæ¯•</span><br>            <span class="hljs-comment">// å¦‚æœè¯»å–æ­£å¸¸, è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°</span><br>            <span class="hljs-keyword">while</span> ((readLen = fileInputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<span class="hljs-comment">//æ˜¾ç¤º</span><br>            &#125;<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾èµ„æº.</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                fileInputStream.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h4><p> å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºæ–‡ä»¶(æ³¨æ„ï¼šå‰ææ˜¯ç›®å½•å·²ç»å­˜åœ¨.)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStream01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeFile</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»º FileOutputStreamå¯¹è±¡</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.txt&quot;</span>;<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fileOutputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//å¾—åˆ° FileOutputStreamå¯¹è±¡ å¯¹è±¡</span><br>            <span class="hljs-comment">//è€å¸ˆè¯´æ˜</span><br>            <span class="hljs-comment">//1. new FileOutputStream(filePath) ï¼Œå½“å†™å…¥å†…å®¹æ—¶ï¼Œä¼šè¦†ç›–åŸæ¥çš„å†…å®¹</span><br>            <span class="hljs-comment">//2. new FileOutputStream(filePath, true) ï¼Œå½“å†™å…¥å†…å®¹æ—¶ï¼Œæ˜¯è¿½åŠ åˆ°æ–‡ä»¶åé¢</span><br>            fileOutputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath, <span class="hljs-literal">true</span>);<br>            <span class="hljs-comment">//å†™å…¥ä¸€ä¸ªå­—èŠ‚</span><br>            <span class="hljs-comment">//fileOutputStream.write(&#x27;H&#x27;);//</span><br>            <span class="hljs-comment">//å†™å…¥å­—ç¬¦ä¸²</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hsp,world!&quot;</span>;<br>            <span class="hljs-comment">//str.getBytes() å¯ä»¥æŠŠ å­—ç¬¦ä¸²-&gt; å­—èŠ‚æ•°ç»„</span><br>            <span class="hljs-comment">//fileOutputStream.write(str.getBytes());</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            write(byte[] b, int off, int len)</span><br><span class="hljs-comment">            å°†lenå­—èŠ‚ä»ä½äºåç§»é‡offçš„æŒ‡å®šå­—èŠ‚æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</span><br><span class="hljs-comment">             */</span><br>            fileOutputStream.write(str.getBytes(), <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                fileOutputStream.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹ï¼šæ–‡ä»¶æ‹·è´"><a href="#æ¡ˆä¾‹ï¼šæ–‡ä»¶æ‹·è´" class="headerlink" title="æ¡ˆä¾‹ï¼šæ–‡ä»¶æ‹·è´"></a><strong>æ¡ˆä¾‹ï¼šæ–‡ä»¶æ‹·è´</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileCopy</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å®Œæˆ æ–‡ä»¶æ‹·è´ï¼Œå°† d:\\Koala.jpg æ‹·è´ d:\\Koala3.jpg</span><br>        <span class="hljs-comment">//æ€è·¯åˆ†æ</span><br>        <span class="hljs-comment">//1. åˆ›å»ºæ–‡ä»¶çš„è¾“å…¥æµ , å°†æ–‡ä»¶è¯»å…¥åˆ°ç¨‹åº</span><br>        <span class="hljs-comment">//2. åˆ›å»ºæ–‡ä»¶çš„è¾“å‡ºæµï¼Œ å°†è¯»å–åˆ°çš„æ–‡ä»¶æ•°æ®ï¼Œå†™å…¥åˆ°æŒ‡å®šçš„æ–‡ä»¶.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">srcFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\Koala.jpg&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\Koala3.jpg&quot;</span>;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fileOutputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            fileInputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(srcFilePath);<br>            fileOutputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(destFilePath);<br>            <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå­—èŠ‚æ•°ç»„,æé«˜è¯»å–æ•ˆæœ</span><br>            <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span> ((readLen = fileInputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">//è¯»å–åˆ°åï¼Œå°±å†™å…¥åˆ°æ–‡ä»¶ é€šè¿‡ fileOutputStream</span><br>                <span class="hljs-comment">//å³ï¼Œæ˜¯ä¸€è¾¹è¯»ï¼Œä¸€è¾¹å†™</span><br>                fileOutputStream.write(buf, <span class="hljs-number">0</span>, readLen);<span class="hljs-comment">//ä¸€å®šè¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</span><br>                <span class="hljs-comment">//fileOutputStream.write(buf);  //æ•´ä¸ªå†™å…¥ï¼ˆæ‹·è´ä¸èƒ½ä½¿ç”¨è¿™ç§ï¼‰</span><br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;æ‹·è´ok~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//å…³é—­è¾“å…¥æµå’Œè¾“å‡ºæµï¼Œé‡Šæ”¾èµ„æº</span><br>                <span class="hljs-keyword">if</span> (fileInputStream != <span class="hljs-literal">null</span>) &#123;<br>                    fileInputStream.close();<br>                &#125;<br>                <span class="hljs-keyword">if</span> (fileOutputStream != <span class="hljs-literal">null</span>) &#123;<br>                    fileOutputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="FileReader-å’Œ-FileWriter-ä»‹ç»"><a href="#FileReader-å’Œ-FileWriter-ä»‹ç»" class="headerlink" title="FileReader å’Œ FileWriter ä»‹ç»"></a>FileReader å’Œ FileWriter ä»‹ç»</h4> <img src="image-20220920171124837.png" alt="image-20220920171124837" style="zoom:80%;" /> <h4 id="FileReader-ç›¸å…³æ–¹æ³•ï¼š"><a href="#FileReader-ç›¸å…³æ–¹æ³•ï¼š" class="headerlink" title="FileReader ç›¸å…³æ–¹æ³•ï¼š"></a><strong>FileReader ç›¸å…³æ–¹æ³•ï¼š</strong></h4><ul><li>new FileReader(File&#x2F;String)</li><li>readï¼šæ¯æ¬¡è¯»å–å•ä¸ªå­—ç¬¦ï¼ˆä¸ä¼šå‡ºç°ä¹±ç ï¼‰ï¼Œè¿”å›è¯¥å­—ç¬¦ï¼Œå¦‚æœåˆ°æ–‡ä»¶æœ«å°¾è¿”å› -1</li><li>read(char[])ï¼šæ‰¹é‡è¯»å–å¤šä¸ªå­—ç¬¦åˆ°æ•°ç»„ï¼Œè¿”å›è¯»å–åˆ°çš„å­—ç¬¦æ•°ï¼Œå¦‚æœåˆ°æ–‡ä»¶æœ«å°¾è¿”å› -1</li></ul><p><strong>ç›¸å…³APIï¼š</strong></p><ul><li>new String(char[])ï¼šå°† char[] è½¬æ¢æˆ String</li><li>new String(char[], off, len)ï¼šå°† char[] çš„æŒ‡å®šéƒ¨åˆ†è½¬æ¢æˆ String</li></ul><h4 id="FileWriter-å¸¸ç”¨æ–¹æ³•ï¼š"><a href="#FileWriter-å¸¸ç”¨æ–¹æ³•ï¼š" class="headerlink" title="FileWriter å¸¸ç”¨æ–¹æ³•ï¼š"></a><strong>FileWriter å¸¸ç”¨æ–¹æ³•ï¼š</strong></h4><ul><li>new FileWriter(File&#x2F;String)ï¼šè¦†ç›–æ¨¡å¼ï¼Œç›¸å½“äºæµçš„æŒ‡é’ˆåœ¨é¦–ç«¯</li><li>new FileWritter(File&#x2F;String, true)ï¼šè¿½åŠ æ¨¡å¼ï¼Œç›¸å½“äºæµçš„æŒ‡é’ˆåœ¨å°¾ç«¯</li><li>write(int)ï¼šå†™å…¥å•ä¸ªå­—ç¬¦</li><li>write(char [])ï¼šå†™å…¥æŒ‡å®šæ•°ç»„</li><li>write(char[], off, len)ï¼šå†™å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šéƒ¨åˆ†</li><li>write(string)ï¼šå†™å…¥æ•´ä¸ªå­—ç¬¦ä¸²</li><li>write(string, off, len)ï¼šå†™å…¥å­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†</li></ul><p><strong>ç›¸å…³APIï¼š</strong></p><p>String ç±»ï¼štoCharArrayï¼šå°† String è½¬æ¢æˆ char[]</p><p><strong>æ³¨æ„ï¼š</strong> <strong>FileWriter ä½¿ç”¨åï¼Œå¿…é¡»è¦å…³é—­ï¼ˆcloseï¼‰æˆ–åˆ·æ–°ï¼ˆflushï¼‰ï¼Œå¦åˆ™åªæ˜¯åœ¨å†…å­˜ä¸­è€Œå†™å…¥ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ï¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">///FileReaderæ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileReader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å•ä¸ªå­—ç¬¦è¯»å–æ–‡ä»¶</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile01</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\story.txt&quot;</span>;<br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fileReader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//1. åˆ›å»ºFileReaderå¯¹è±¡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath);<br>            <span class="hljs-comment">//å¾ªç¯è¯»å– ä½¿ç”¨read, å•ä¸ªå­—ç¬¦è¯»å–</span><br>            <span class="hljs-keyword">while</span> ((data = fileReader.read()) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.print((<span class="hljs-type">char</span>) data);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (fileReader != <span class="hljs-literal">null</span>) &#123;<br>                    fileReader.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å­—ç¬¦æ•°ç»„è¯»å–æ–‡ä»¶</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile02</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;~~~readFile02 ~~~&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\story.txt&quot;</span>;<br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fileReader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">char</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">8</span>];<br>        <span class="hljs-comment">//1. åˆ›å»ºFileReaderå¯¹è±¡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath);<br>            <span class="hljs-comment">//å¾ªç¯è¯»å– ä½¿ç”¨read(buf), è¿”å›çš„æ˜¯å®é™…è¯»å–åˆ°çš„å­—ç¬¦æ•°</span><br>            <span class="hljs-comment">//å¦‚æœè¿”å›-1, è¯´æ˜åˆ°æ–‡ä»¶ç»“æŸ</span><br>            <span class="hljs-keyword">while</span> ((readLen = fileReader.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (fileReader != <span class="hljs-literal">null</span>) &#123;<br>                    fileReader.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//FileWriteræ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\note.txt&quot;</span>;<br>        <span class="hljs-comment">//åˆ›å»ºFileWriterå¯¹è±¡</span><br>        <span class="hljs-type">FileWriter</span> <span class="hljs-variable">fileWriter</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">char</span>[] chars = &#123;<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>&#125;;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fileWriter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(filePath);<span class="hljs-comment">//é»˜è®¤æ˜¯è¦†ç›–å†™å…¥</span><br>            <span class="hljs-comment">//æ³¨æ„ï¼šè¦†ç›–å†™å…¥æŒ‡çš„æ˜¯æ¯æ¬¡æ‰“å¼€ä¼šé‡æ–°è¦†ç›–ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å†™å…¥éƒ½ä¼šé‡æ–°è¦†ç›–</span><br><span class="hljs-comment">//            3) write(int):å†™å…¥å•ä¸ªå­—ç¬¦</span><br>            fileWriter.write(<span class="hljs-string">&#x27;H&#x27;</span>);<br><span class="hljs-comment">//            4) write(char[]):å†™å…¥æŒ‡å®šæ•°ç»„</span><br>            fileWriter.write(chars);<br><span class="hljs-comment">//            5) write(char[],off,len):å†™å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šéƒ¨åˆ†</span><br>            fileWriter.write(<span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span>.toCharArray(), <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br><span class="hljs-comment">//            6) writeï¼ˆstringï¼‰ï¼šå†™å…¥æ•´ä¸ªå­—ç¬¦ä¸²</span><br>            fileWriter.write(<span class="hljs-string">&quot; ä½ å¥½åŒ—äº¬~&quot;</span>);<br>            fileWriter.write(<span class="hljs-string">&quot;é£é›¨ä¹‹åï¼Œå®šè§å½©è™¹&quot;</span>);<br><span class="hljs-comment">//            7) write(string,off,len):å†™å…¥å­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†</span><br>            fileWriter.write(<span class="hljs-string">&quot;ä¸Šæµ·å¤©æ´¥&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>            <span class="hljs-comment">//åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å¾ªç¯æ“ä½œ.</span><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//fileWriter.flush();</span><br>                <span class="hljs-comment">//å…³é—­æ–‡ä»¶æµï¼Œç­‰ä»· flush() + å…³é—­</span><br>                fileWriter.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br><br>        &#125;<br>        <span class="hljs-comment">//å¯¹äº FileWriter , ä¸€å®šè¦å…³é—­æµï¼Œæˆ–è€…flushæ‰èƒ½çœŸæ­£çš„æŠŠæ•°æ®å†™å…¥åˆ°æ–‡ä»¶</span><br>        <span class="hljs-comment">//å¦åˆ™æ•°æ®è¿˜åªæ˜¯åœ¨å†…å­˜ä¸­ï¼Œè€Œæ²¡æœ‰å†™å…¥åˆ°ç£ç›˜</span><br>        <span class="hljs-comment">//è€éŸ©çœ‹æºç å°±çŸ¥é“åŸå› .</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        çœ‹çœ‹ä»£ç </span><br><span class="hljs-comment">        private void writeBytes() throws IOException &#123;</span><br><span class="hljs-comment">            this.bb.flip();</span><br><span class="hljs-comment">            int var1 = this.bb.limit();</span><br><span class="hljs-comment">            int var2 = this.bb.position();</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">            assert var2 &lt;= var1;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">            int var3 = var2 &lt;= var1 ? var1 - var2 : 0;</span><br><span class="hljs-comment">            if (var3 &gt; 0) &#123;</span><br><span class="hljs-comment">                if (this.ch != null) &#123;</span><br><span class="hljs-comment">                    assert this.ch.write(this.bb) == var3 : var3;</span><br><span class="hljs-comment">                &#125; else &#123;</span><br><span class="hljs-comment">                    this.out.write(this.bb.array(), this.bb.arrayOffset() + var2, var3);</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            this.bb.clear();</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br>        System.out.println(<span class="hljs-string">&quot;ç¨‹åºç»“æŸ...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="èŠ‚ç‚¹æµå’Œå¤„ç†æµ"><a href="#èŠ‚ç‚¹æµå’Œå¤„ç†æµ" class="headerlink" title="èŠ‚ç‚¹æµå’Œå¤„ç†æµ"></a>èŠ‚ç‚¹æµå’Œå¤„ç†æµ</h3><h4 id="åŸºæœ¬ä»‹ç»-6"><a href="#åŸºæœ¬ä»‹ç»-6" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li>èŠ‚ç‚¹æµå¯ä»¥ä»ä¸€ä¸ªç‰¹å®šçš„æ•°æ®æºè¯»å†™æ•°æ®ï¼Œå¦‚ FileReaderã€FileWriter    [æ•°æ®æºå°±æ˜¯å­˜æ”¾æ•°æ®çš„åœ°æ–¹]</li><li>å¤„ç†æµï¼ˆä¹Ÿå«åŒ…è£…æµï¼‰æ˜¯ â€œè¿æ¥â€ åœ¨å·²å­˜åœ¨çš„æµï¼ˆèŠ‚ç‚¹æµæˆ–å¤„ç†æµï¼‰ä¹‹ä¸Šï¼Œä¸ºç¨‹åºæä¾›æ›´ä¸ºå¼ºå¤§çš„è¯»å†™åŠŸèƒ½ï¼Œä¹Ÿæ›´åŠ çµæ´»ï¼Œå¦‚ BufferedReaderã€BufferedWriter</li></ul><p>æ³¨æ„ï¼šï¼ˆä»¥BufferedReader&#x2F;BufferedWriterä¸¾ä¾‹è¯´æ˜ï¼‰</p><p><strong>BufferedReaderä¸­ï¼Œæœ‰å±æ€§Readerï¼Œå³ å¯ä»¥å°è£…ä»»æ„ä¸€ä¸ªçš„Readerå­ç±»çš„èŠ‚ç‚¹æµ</strong></p><p><strong>BufferedWriterä¸­ï¼Œæœ‰å±æ€§Writerï¼Œå³ å¯ä»¥å°è£…ä»»æ„ä¸€ä¸ªçš„Writerå­ç±»çš„èŠ‚ç‚¹æµ</strong></p><h4 id="èŠ‚ç‚¹æµå’Œå¤„ç†æµä¸€è§ˆå›¾"><a href="#èŠ‚ç‚¹æµå’Œå¤„ç†æµä¸€è§ˆå›¾" class="headerlink" title="èŠ‚ç‚¹æµå’Œå¤„ç†æµä¸€è§ˆå›¾"></a>èŠ‚ç‚¹æµå’Œå¤„ç†æµä¸€è§ˆå›¾</h4> <img src="image-20220920192614729.png" alt="image-20220920192614729" style="zoom:90%;" /><h4 id="èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»"><a href="#èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»" class="headerlink" title="èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»"></a>èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»</h4><ul><li>èŠ‚ç‚¹æµæ˜¯åº•å±‚æµ&#x2F;ä½çº§æµï¼Œç›´æ¥è·Ÿæ•°æ®æºç›¸æ¥</li><li>å¤„ç†æµï¼ˆåŒ…è£…æµï¼‰åŒ…è£…èŠ‚ç‚¹æµï¼Œæ—¢å¯ä»¥æ¶ˆé™¤ä¸åŒèŠ‚ç‚¹æµçš„å®ç°å·®å¼‚ï¼Œä¹Ÿå¯ä»¥æä¾›æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥å®Œæˆè¾“å…¥è¾“å‡º</li><li>å¤„ç†æµï¼ˆä¹Ÿå«åŒ…è£…æµï¼‰å¯¹èŠ‚ç‚¹æµè¿›è¡ŒåŒ…è£…ï¼Œä½¿ç”¨äº†ä¿®é¥°å™¨è®¾è®¡æ¨¡å¼ï¼Œä¸ä¼šç›´æ¥ä¸æ•°æ®ç›¸è¿</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å¤„ç†æµ ä¿®é¥°å™¨è®¾è®¡æ¨¡å¼ æ¨¡æ‹Ÿæ¡ˆä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reader_</span> &#123; <span class="hljs-comment">//æŠ½è±¡ç±»</span><br>   <span class="hljs-comment">//ç¤ºæ„</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readString</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-comment">//ä¹Ÿå¯ä»¥ åœ¨Reader_ æŠ½è±¡ç±»ï¼Œä½¿ç”¨readæ–¹æ³•ç»Ÿä¸€ç®¡ç†.</span><br>    <span class="hljs-comment">//åé¢åœ¨è°ƒç”¨æ—¶ï¼Œåˆ©äºå¯¹è±¡åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼Œ ç»‘å®šåˆ°å¯¹åº”çš„å®ç°å­ç±»å³å¯.</span><br>    <span class="hljs-comment">//public abstract void read();</span><br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileReader_</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;å¯¹æ–‡ä»¶è¿›è¡Œè¯»å–...&quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringReader_</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readString</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;è¯»å–å­—ç¬¦ä¸²..&quot;</span>);&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedReader_</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reader_</span>&#123;<br><br>    <span class="hljs-keyword">private</span> Reader_ reader_; <span class="hljs-comment">//å±æ€§æ˜¯ Reader_ ç±»å‹</span><br><br>    <span class="hljs-comment">//æ¥æ”¶Reader_ å­ç±»å¯¹è±¡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BufferedReader_</span><span class="hljs-params">(Reader_ reader_)</span> &#123;<br>        <span class="hljs-built_in">this</span>.reader_ = reader_;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//å°è£…ä¸€å±‚</span><br>        reader_.readFile();<br>    &#125;<br><br>    <span class="hljs-comment">//æ‰©å¼ åŠŸèƒ½ï¼šè®©æ–¹æ³•æ›´åŠ çµæ´»ï¼Œå¤šæ¬¡è¯»å–æ–‡ä»¶ï¼Œæˆ–è€…åŠ ç¼“å†²byte[] ....</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFiles</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>            reader_.readFile();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//æ‰©å±• readString, æ‰¹é‡å¤„ç†å­—ç¬¦ä¸²æ•°æ®</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readStrings</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;num; i++) &#123;<br>            reader_.readString();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">BufferedReader_</span> <span class="hljs-variable">bufferedReader_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader_</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader_</span>());<br>        bufferedReader_.readFiles(<span class="hljs-number">10</span>);  <span class="hljs-comment">//ä½¿ç”¨æ‰©å±•åŠŸèƒ½</span><br>        <span class="hljs-comment">//bufferedReader_.readFile();  //åŸæ–¹æ³•</span><br>        <span class="hljs-comment">//Serializable</span><br>        <span class="hljs-comment">//Externalizable</span><br>        <span class="hljs-comment">//ObjectInputStream</span><br>        <span class="hljs-comment">//ObjectOutputStream</span><br>        <span class="hljs-comment">//è¿™æ¬¡å¸Œæœ›é€šè¿‡ BufferedReader_ å¤šæ¬¡è¯»å–å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">BufferedReader_</span> <span class="hljs-variable">bufferedReader_2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader_</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringReader_</span>());<br>        bufferedReader_2.readStrings(<span class="hljs-number">5</span>);  <span class="hljs-comment">//ä½¿ç”¨æ‰©å±•åŠŸèƒ½</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¤„ç†æµ"><a href="#å¤„ç†æµ" class="headerlink" title="å¤„ç†æµ"></a>å¤„ç†æµ</h4><ul><li>æ€§èƒ½çš„æé«˜ï¼šä¸»è¦ä»¥å¢åŠ ç¼“å†²çš„æ–¹å¼æ¥æé«˜è¾“å…¥è¾“å‡ºçš„æ•ˆç‡</li><li>æ“ä½œçš„ä¾¿æ·ï¼šå¤„ç†æµå¯èƒ½æä¾›äº†ä¸€ç³»åˆ—è¾¹ç•Œçš„æ–¹æ³•æ¥ä¸€æ¬¡è¾“å…¥è¾“å‡ºå¤§æ‰¹é‡çš„æ•°æ®ï¼Œä½¿ç”¨æ›´åŠ çµæ´»æ–¹ä¾¿</li></ul><p><strong>æ³¨æ„ï¼šä½¿ç”¨å¤„ç†æµï¼ˆBufferedï¼‰æ—¶è®°å¾— flash &#x2F; shutdown(ç½‘ç»œ)</strong></p><h4 id="å¤„ç†æµ-BufferedReader-å’Œ-BufferedWriter"><a href="#å¤„ç†æµ-BufferedReader-å’Œ-BufferedWriter" class="headerlink" title="å¤„ç†æµ-BufferedReader å’Œ BufferedWriter"></a>å¤„ç†æµ-BufferedReader å’Œ BufferedWriter</h4><ul><li><p>BufferedReader å’Œ BufferedWriter å±äºå­—ç¬¦æµï¼Œæ˜¯æŒ‰ç…§å­—ç¬¦æ¥è¯»å–æ•°æ®çš„</p></li><li><p>å…³é—­å¤„ç†æµæ—¶ï¼Œåªéœ€è¦å…³é—­å¤–å±‚æµï¼ˆå³åŒ…è£…æµï¼‰å³å¯</p><p>ï¼ˆç†è§£ï¼šå…³é—­å¤–å±‚æµæ—¶ä¼šè‡ªåŠ¨å…³é—­åŒ…è£…åœ¨å…¶ä¸­çš„èŠ‚ç‚¹æµï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//BufferedReaderä½¿ç”¨æ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedReader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.java&quot;</span>;<br>        <span class="hljs-comment">//åˆ›å»ºbufferedReader</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath));<br>        <span class="hljs-comment">//è¯»å–</span><br>        String line; <span class="hljs-comment">//æŒ‰è¡Œè¯»å–, æ•ˆç‡é«˜</span><br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">//1. bufferedReader.readLine() æ˜¯æŒ‰è¡Œè¯»å–æ–‡ä»¶</span><br>        <span class="hljs-comment">//2. å½“è¿”å›null æ—¶ï¼Œè¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•</span><br>        <span class="hljs-keyword">while</span> ((line = bufferedReader.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>            System.out.println(line);<br>        &#125;<br>        <span class="hljs-comment">//å…³é—­æµ, è¿™é‡Œæ³¨æ„ï¼Œåªéœ€è¦å…³é—­ BufferedReader ï¼Œå› ä¸ºåº•å±‚ä¼šè‡ªåŠ¨çš„å»å…³é—­èŠ‚ç‚¹æµï¼ˆFileReaderï¼‰</span><br>        <span class="hljs-comment">/*  æºç è§£è¯»</span><br><span class="hljs-comment">        public void close() throws IOException &#123;</span><br><span class="hljs-comment">            synchronized (lock) &#123;</span><br><span class="hljs-comment">                if (in == null)</span><br><span class="hljs-comment">                    return;</span><br><span class="hljs-comment">                try &#123;</span><br><span class="hljs-comment">                    in.close(); //in å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„ new FileReader(filePath), å…³é—­äº†.</span><br><span class="hljs-comment">                &#125; finally &#123;</span><br><span class="hljs-comment">                    in = null;</span><br><span class="hljs-comment">                    cb = null;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        bufferedReader.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//BufferedWriterä½¿ç”¨æ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> java.io.BufferedWriter;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\ok.txt&quot;</span>;<br>        <span class="hljs-comment">//åˆ›å»ºBufferedWriter</span><br>        <span class="hljs-comment">//è¯´æ˜:</span><br>        <span class="hljs-comment">//1. new FileWriter(filePath, true) è¡¨ç¤ºä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥(åœ¨èŠ‚ç‚¹æµä¸­è¡¨ç¤ºè¿½åŠ )</span><br>        <span class="hljs-comment">//2. new FileWriter(filePath) , è¡¨ç¤ºä»¥è¦†ç›–çš„æ–¹å¼å†™å…¥</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(filePath));<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello, éŸ©é¡ºå¹³æ•™è‚²!&quot;</span>);<br>        bufferedWriter.newLine();<span class="hljs-comment">//æ’å…¥ä¸€ä¸ªå’Œç³»ç»Ÿç›¸å…³çš„æ¢è¡Œ</span><br>        bufferedWriter.write(<span class="hljs-string">&quot;hello2, éŸ©é¡ºå¹³æ•™è‚²!&quot;</span>);<br>        bufferedWriter.newLine();<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello3, éŸ©é¡ºå¹³æ•™è‚²!&quot;</span>);<br>        bufferedWriter.newLine();<br>        <span class="hljs-comment">//è¯´æ˜ï¼šå…³é—­å¤–å±‚æµå³å¯ ï¼Œ ä¼ å…¥çš„ new FileWriter(filePath) ,ä¼šåœ¨åº•å±‚å…³é—­</span><br>        bufferedWriter.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Bufferedæ‹·è´ æ¡ˆä¾‹</span><br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedCopy_</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">//1. BufferedReader å’Œ BufferedWriter æ˜¯æŒ‰ç…§å­—ç¬¦æ“ä½œ</span><br>        <span class="hljs-comment">//2. ä¸è¦å»æ“ä½œ äºŒè¿›åˆ¶æ–‡ä»¶[å£°éŸ³ï¼Œè§†é¢‘ï¼Œdoc, pdf ], å¯èƒ½é€ æˆæ–‡ä»¶æŸå</span><br>        <span class="hljs-comment">//BufferedInputStream</span><br>        <span class="hljs-comment">//BufferedOutputStream</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">srcFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.java&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a2.java&quot;</span>;<br><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        String line;<br>        <span class="hljs-keyword">try</span> &#123;<br>            br = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(srcFilePath));<br>            bw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(destFilePath));<br>            <span class="hljs-comment">//è¯´æ˜: readLine è¯»å–ä¸€è¡Œå†…å®¹ï¼Œä½†æ˜¯ä¸åŒ…å«æ¢è¡Œç¬¦</span><br>            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-comment">//æ¯è¯»å–ä¸€è¡Œï¼Œå°±å†™å…¥</span><br>                bw.write(line);<br>                <span class="hljs-comment">//æ’å…¥ä¸€ä¸ªæ¢è¡Œ</span><br>                bw.newLine();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;æ‹·è´å®Œæ¯•...&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­æµ</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span>(br != <span class="hljs-literal">null</span>) &#123;<br>                    br.close();<br>                &#125;<br>                <span class="hljs-keyword">if</span>(bw != <span class="hljs-literal">null</span>) &#123;<br>                    bw.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¤„ç†æµ-BufferedInputStream-å’Œ-BufferedOutputStream"><a href="#å¤„ç†æµ-BufferedInputStream-å’Œ-BufferedOutputStream" class="headerlink" title="å¤„ç†æµ-BufferedInputStream å’Œ BufferedOutputStream"></a>å¤„ç†æµ-BufferedInputStream å’Œ BufferedOutputStream</h4><ul><li>BufferedInputStream æ˜¯å­—èŠ‚æµï¼Œåœ¨åˆ›å»º BufferedInputStream æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å­˜åŒºæ•°ç»„</li><li>BufferedOutputStream æ˜¯å­—èŠ‚æµï¼Œå®ç°ç¼“å†²çš„è¾“å‡ºæµï¼Œå¯ä»¥å°†å¤šä¸ªå­—èŠ‚å†™å…¥åº•å±‚è¾“å‡ºæµä¸­ï¼Œè€Œä¸å¿…å¯¹æ¯æ¬¡å­—èŠ‚å†™å…¥è°ƒç”¨åº•å±‚ç³»ç»Ÿ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¡ˆä¾‹ï¼šæ¼”ç¤ºä½¿ç”¨BufferedOutputStream å’Œ BufferedInputStream å®ŒæˆäºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-comment">// æ€è€ƒï¼šå­—èŠ‚æµå¯ä»¥æ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥æ“ä½œæ–‡æœ¬æ–‡ä»¶å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè€Œä¸”æ“ä½œæ–¹å¼ç›¸åŒ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedCopy02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">srcFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\Koala.jpg&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hsp.jpg&quot;</span>;<br><span class="hljs-comment">//        String srcFilePath = &quot;d:\\0245_éŸ©é¡ºå¹³é›¶åŸºç¡€å­¦Java_å¼•å‡ºthis.avi&quot;;</span><br><span class="hljs-comment">//        String destFilePath = &quot;d:\\hsp.avi&quot;;</span><br><span class="hljs-comment">//        String srcFilePath = &quot;e:\\a.java&quot;;</span><br><span class="hljs-comment">//        String destFilePath = &quot;e:\\a3.java&quot;;</span><br><br>        <span class="hljs-comment">//åˆ›å»ºBufferedOutputStreamå¯¹è±¡BufferedInputStreamå¯¹è±¡</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//å› ä¸º FileInputStream  æ˜¯ InputStream å­ç±»</span><br>            bis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(srcFilePath));<br>            bos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(destFilePath));<br><br>            <span class="hljs-comment">//å¾ªç¯çš„è¯»å–æ–‡ä»¶ï¼Œå¹¶å†™å…¥åˆ° destFilePath</span><br>            <span class="hljs-type">byte</span>[] buff = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-comment">//å½“è¿”å› -1 æ—¶ï¼Œå°±è¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•</span><br>            <span class="hljs-keyword">while</span> ((readLen = bis.read(buff)) != -<span class="hljs-number">1</span>) &#123;<br>                bos.write(buff, <span class="hljs-number">0</span>, readLen);<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶æ‹·è´å®Œæ¯•~~~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­æµ , å…³é—­å¤–å±‚çš„å¤„ç†æµå³å¯ï¼Œåº•å±‚ä¼šå»å…³é—­èŠ‚ç‚¹æµ</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span>(bis != <span class="hljs-literal">null</span>) &#123;<br>                    bis.close();<br>                &#125;<br>                <span class="hljs-keyword">if</span>(bos != <span class="hljs-literal">null</span>) &#123;<br>                    bos.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¯¹è±¡æµ-ObjectInputStream-å’Œ-ObjectOutputStream"><a href="#å¯¹è±¡æµ-ObjectInputStream-å’Œ-ObjectOutputStream" class="headerlink" title="å¯¹è±¡æµ-ObjectInputStream å’Œ ObjectOutputStream"></a>å¯¹è±¡æµ-ObjectInputStream å’Œ ObjectOutputStream</h4> <img src="image-20220920222410638.png" alt="image-20220920222410638" style="zoom: 80%;" /> <img src="image-20220920222614466.png" alt="image-20220920222614466" style="zoom: 33%;" /><p><strong>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong></p><ul><li>åºåˆ—åŒ–å°±æ˜¯åœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œä¿å­˜æ•°æ®çš„å€¼å’Œæ•°æ®ç±»å‹</li><li>ååºåˆ—åŒ–å°±æ˜¯åœ¨æ¢å¤æ•°æ®æ—¶ï¼Œæ¢å¤æ•°æ®çš„å€¼å’Œæ•°æ®ç±»å‹</li><li>éœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å…¶ç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¸ºäº†è®©æŸä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¯¥ç±»å¿…é¡»å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€ï¼š<ul><li>Serializable  &#x2F;&#x2F;è¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œé‡Œé¢æ²¡æœ‰æ–¹æ³•ï¼ˆæ¨èä½¿ç”¨ï¼‰</li><li>Externalizable  &#x2F;&#x2F;è¯¥æ¥å£æœ‰æ–¹æ³•éœ€è¦å®ç°ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬å®ç° Serializable æ¥å£</li></ul></li></ul><h4 id="å¯¹è±¡æµä»‹ç»"><a href="#å¯¹è±¡æµä»‹ç»" class="headerlink" title="å¯¹è±¡æµä»‹ç»"></a>å¯¹è±¡æµä»‹ç»</h4><p>åŠŸèƒ½ï¼šæä¾›äº†å¯¹åŸºæœ¬ç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ³•</p><ul><li><p>ObjectOutputStream æä¾› åºåˆ—åŒ–åŠŸèƒ½</p></li><li><p>ObjectInputStream æä¾› ååºåˆ—åŒ–åŠŸèƒ½</p></li></ul> <img src="image-20220920223003450.png" alt="image-20220920223003450" style="zoom: 50%;" /> <img src="image-20220920223115442.png" alt="image-20220920223115442" style="zoom:49%;" /><p><strong>æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š</strong></p><ul><li><p><strong>è¯»å†™é¡ºåºè¦ä¸€è‡´ ï¼ˆå¦åˆ™ä¼šå¼‚å¸¸ï¼‰</strong></p></li><li><p><strong>è¦æ±‚åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–å¯¹è±¡å®ç° Serializable</strong></p></li><li><p>åºåˆ—åŒ–çš„ç±»ä¸­å»ºè®®æ·»åŠ  SerialVersionUIDï¼Œæé«˜ç‰ˆæœ¬çš„å…¼å®¹æ€§</p><p>å¦‚æœæœ‰ SerialVersionUID ï¼Œå½“åºåˆ—åŒ–çš„ç±»ä¿®æ”¹äº†åï¼Œåˆ™åªä¼šè®¤ä¸ºè¯¥ç±»åªæ˜¯ä¿®æ”¹äº†è€Œä¸æ˜¯ä¸€ä¸ªæ–°çš„ç±»</p></li><li><p>åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°†é‡Œé¢æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œåºåˆ—åŒ–ï¼Œä½†é™¤äº† static æˆ– transient ä¿®é¥°çš„æˆå‘˜</p></li><li><p>åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œè¦æ±‚é‡Œé¢å±æ€§çš„ç±»å‹ä¹Ÿéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£ï¼ˆå½“æœ‰å±æ€§æ˜¯ç±»æ—¶ï¼‰</p></li><li><p>åºåˆ—åŒ–å…·å¤‡å¯ç»§æ‰¿æ€§ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæŸç±»å·²ç»å®ç°äº†åºåˆ—åŒ–ï¼Œåˆ™å®ƒçš„æ‰€æœ‰å­ç±»ä¹Ÿå·²ç»é»˜è®¤å®ç°äº†åºåˆ—åŒ–</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åºåˆ—åŒ–ä¿¡æ¯ï¼šä½¿ç”¨ObjectOutputStream åºåˆ—åŒ– åŸºæœ¬æ•°æ®ç±»å‹å’Œä¸€ä¸ª Dogå¯¹è±¡(name, age),</span><br><span class="hljs-comment">//å¹¶ä¿å­˜åˆ° data.dat æ–‡ä»¶ä¸­</span><br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectOutputStream;<br><span class="hljs-keyword">import</span> java.io.Serializable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectOutStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//åºåˆ—åŒ–åï¼Œä¿å­˜çš„æ–‡ä»¶æ ¼å¼ï¼Œä¸æ˜¯å­˜æ–‡æœ¬ï¼Œè€Œæ˜¯æŒ‰ç…§å®ƒçš„æ ¼å¼æ¥ä¿å­˜</span><br>        <span class="hljs-comment">//å¦‚æœæŒ‰æ–‡æœ¬æ ¼å¼ä¿å­˜ æ‰“å¼€åçœ‹åˆ°çš„æ˜¯ä¹±ç </span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\data.dat&quot;</span>;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath));<br><br>        <span class="hljs-comment">//åºåˆ—åŒ–æ•°æ®åˆ° d:\data.dat</span><br>        oos.writeInt(<span class="hljs-number">100</span>);<span class="hljs-comment">// int -&gt; Integer (å®ç°äº† Serializable)</span><br>        oos.writeBoolean(<span class="hljs-literal">true</span>);<span class="hljs-comment">// boolean -&gt; Boolean (å®ç°äº† Serializable)</span><br>        oos.writeChar(<span class="hljs-string">&#x27;a&#x27;</span>);<span class="hljs-comment">// char -&gt; Character (å®ç°äº† Serializable)</span><br>        oos.writeDouble(<span class="hljs-number">9.5</span>);<span class="hljs-comment">// double -&gt; Double (å®ç°äº† Serializable)</span><br>        oos.writeUTF(<span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span>);<span class="hljs-comment">//String (å®ç°äº† Serializable)</span><br>        <span class="hljs-comment">//ä¿å­˜ä¸€ä¸ªdogå¯¹è±¡</span><br>        oos.writeObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;æ—ºè´¢&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;æ—¥æœ¬&quot;</span>, <span class="hljs-string">&quot;ç™½è‰²&quot;</span>));<br>        oos.close();<br>        System.out.println(<span class="hljs-string">&quot;æ•°æ®ä¿å­˜å®Œæ¯•(åºåˆ—åŒ–å½¢å¼)&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Master</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>&#125;<br><span class="hljs-comment">//å¦‚æœéœ€è¦åºåˆ—åŒ–æŸä¸ªç±»çš„å¯¹è±¡ï¼Œå®ç° Serializable</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-comment">//åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°†é‡Œé¢æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œåºåˆ—åŒ–ï¼Œä½†é™¤äº†staticæˆ–transientä¿®é¥°çš„æˆå‘˜</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String nation;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> String color;<br>    <span class="hljs-comment">//åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œè¦æ±‚é‡Œé¢å±æ€§çš„ç±»å‹ä¹Ÿéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Master</span> <span class="hljs-variable">master</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Master</span>();<br>    <span class="hljs-comment">//serialVersionUID åºåˆ—åŒ–çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥æé«˜å…¼å®¹æ€§</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, String nation, String color)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.color = color;<br>        <span class="hljs-built_in">this</span>.nation = nation;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, color=&#x27;&quot;</span> + color + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span> + <span class="hljs-string">&quot;  nation=&quot;</span>+ nation + <span class="hljs-string">&quot;  master=&quot;</span> + master;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ååºåˆ—åŒ–ä¿¡æ¯ï¼šä½¿ç”¨ObjectInputStream è¯»å– data.dat å¹¶ååºåˆ—åŒ–æ¢å¤æ•°æ®</span><br><span class="hljs-keyword">import</span> com.hspedu.outputstream_.Dog;  <span class="hljs-comment">//æ³¨æ„ï¼šè¦å¼•å…¥ååºåˆ—åŒ–ä¸­åŒ…å«çš„ç±»</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectInputStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br>        <span class="hljs-comment">//æŒ‡å®šååºåˆ—åŒ–çš„æ–‡ä»¶</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\data.dat&quot;</span>;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath));<br>        <span class="hljs-comment">//è¯»å–</span><br>        <span class="hljs-comment">//è€å¸ˆè§£è¯»</span><br>        <span class="hljs-comment">//1. è¯»å–(ååºåˆ—åŒ–)çš„é¡ºåºéœ€è¦å’Œä½ ä¿å­˜æ•°æ®(åºåˆ—åŒ–)çš„é¡ºåºä¸€è‡´</span><br>        <span class="hljs-comment">//2. å¦åˆ™ä¼šå‡ºç°å¼‚å¸¸</span><br>        System.out.println(ois.readInt());<br>        System.out.println(ois.readBoolean());<br>        System.out.println(ois.readChar());<br>        System.out.println(ois.readDouble());<br>        System.out.println(ois.readUTF());<br><br>        <span class="hljs-comment">//dog çš„ç¼–è¯‘ç±»å‹æ˜¯ Object , dog çš„è¿è¡Œç±»å‹æ˜¯ Dog</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> ois.readObject();<br>        System.out.println(<span class="hljs-string">&quot;è¿è¡Œç±»å‹=&quot;</span> + dog.getClass());<br>        System.out.println(<span class="hljs-string">&quot;dogä¿¡æ¯=&quot;</span> + dog);<span class="hljs-comment">//åº•å±‚ Object -&gt; Dog</span><br><br>        <span class="hljs-comment">//è¿™é‡Œæ˜¯ç‰¹åˆ«é‡è¦çš„ç»†èŠ‚:</span><br>        <span class="hljs-comment">//1. å¦‚æœæˆ‘ä»¬å¸Œæœ›è°ƒç”¨Dogçš„æ–¹æ³•, éœ€è¦å‘ä¸‹è½¬å‹</span><br>        <span class="hljs-comment">//2. æˆ‘ä»¬éœ€è¦å¼•ç”¨Dogç±»ï¼Œéœ€è¦æˆ‘ä»¬å¯¼å…¥Dogç±»ï¼ˆimportï¼‰|ï¼ˆåœ¨ä¸åŒåŒ…é‡Œæ˜¯éœ€è¦æ³¨æ„è¯¥é—®é¢˜ï¼‰</span><br>        <span class="hljs-comment">//   å› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦å°†Dogçš„å®šä¹‰ï¼Œæ”¾åœ¨ ååºåˆ—åŒ–classæ–‡ä»¶ å¯ä»¥å¼•ç”¨çš„ä½ç½®</span><br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog2</span> <span class="hljs-operator">=</span> (Dog)dog;<br>        System.out.println(dog2.getName()); <span class="hljs-comment">//æ—ºè´¢..</span><br><br>        <span class="hljs-comment">//å…³é—­æµ, å…³é—­å¤–å±‚æµå³å¯ï¼Œåº•å±‚ä¼šå…³é—­ FileInputStream æµ</span><br>        ois.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ ‡å‡†è¾“å…¥è¾“å‡ºæµ"><a href="#æ ‡å‡†è¾“å…¥è¾“å‡ºæµ" class="headerlink" title="æ ‡å‡†è¾“å…¥è¾“å‡ºæµ"></a>æ ‡å‡†è¾“å…¥è¾“å‡ºæµ</h4> <img src="image-20220920232521586.png" alt="image-20220920232521586" style="zoom:80%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.io.OutputStreamWriter;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InputAndOutput</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//Systemç±» çš„ public final static InputStream in = null;</span><br>        <span class="hljs-comment">// System.in ç¼–è¯‘ç±»å‹ InputStream</span><br>        <span class="hljs-comment">// System.in è¿è¡Œç±»å‹ BufferedInputStream</span><br>        <span class="hljs-comment">// è¡¨ç¤ºçš„æ˜¯æ ‡å‡†è¾“å…¥ é”®ç›˜</span><br>        System.out.println(System.in.getClass());<br>        <span class="hljs-comment">//è§£è¯»</span><br>        <span class="hljs-comment">//1. System.out public final static PrintStream out = null;</span><br>        <span class="hljs-comment">//2. ç¼–è¯‘ç±»å‹ PrintStream</span><br>        <span class="hljs-comment">//3. è¿è¡Œç±»å‹ PrintStream</span><br>        <span class="hljs-comment">//4. è¡¨ç¤ºçš„æ˜¯æ ‡å‡†è¾“å‡º æ˜¾ç¤ºå™¨</span><br>        System.out.println(System.out.getClass());<br>        System.out.println(<span class="hljs-string">&quot;hello, éŸ©é¡ºå¹³æ•™è‚²~&quot;</span>);<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;è¾“å…¥å†…å®¹&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> scanner.next();<br>        System.out.println(<span class="hljs-string">&quot;next=&quot;</span> + next);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è½¬æ¢æµ-InputStreamReader-å’Œ-OutputStreamWriter"><a href="#è½¬æ¢æµ-InputStreamReader-å’Œ-OutputStreamWriter" class="headerlink" title="è½¬æ¢æµ-InputStreamReader å’Œ OutputStreamWriter"></a>è½¬æ¢æµ-InputStreamReader å’Œ OutputStreamWriter</h4><ul><li>InputStreamReaderï¼šReader çš„å­ç±»ï¼Œå¯ä»¥å°† InputStreamï¼ˆå­—èŠ‚æµï¼‰åŒ…è£…æˆï¼ˆè½¬æ¢ï¼‰Readerï¼ˆå­—ç¬¦æµï¼‰</li><li>OutputStreamWriterï¼šWriter çš„å­ç±»ï¼Œå®ç°å°† OutputStreamï¼ˆå­—èŠ‚æµï¼‰åŒ…è£…æˆï¼ˆè½¬æ¢ï¼‰ Writerï¼ˆå­—ç¬¦æµï¼‰</li><li>å½“å¤„ç†çº¯æ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœä½¿ç”¨å­—ç¬¦æµæ•ˆç‡æ›´é«˜ï¼Œä¸”å¯ä»¥æœ‰æ•ˆè§£å†³ä¸­æ–‡é—®é¢˜ï¼Œæ‰€ä»¥å»ºè®®å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ</li><li>å¯ä»¥åœ¨ä½¿ç”¨æ—¶æŒ‡å®šç¼–ç æ ¼å¼ï¼ˆæ¯”å¦‚ utf-8ï¼Œgbkã€gb2312ã€ISO8859-1 ç­‰ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºä½¿ç”¨ InputStreamReader è½¬æ¢æµè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span><br><span class="hljs-comment"> * å°†å­—èŠ‚æµ FileInputStream è½¬æˆå­—ç¬¦æµ  InputStreamReader, æŒ‡å®šç¼–ç  gbk/utf-8</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InputStreamReader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.txt&quot;</span>;<br><span class="hljs-comment">//è§£è¯»</span><br><span class="hljs-comment">//1. æŠŠ FileInputStream è½¬æˆ InputStreamReader</span><br><span class="hljs-comment">//2. æŒ‡å®šç¼–ç  gbk</span><br><span class="hljs-comment">//InputStreamReader isr = new InputStreamReader(new FileInputStream(filePath), &quot;gbk&quot;);</span><br><span class="hljs-comment">//3. æŠŠ InputStreamReader ä¼ å…¥ BufferedReader</span><br><span class="hljs-comment">//BufferedReader br = new BufferedReader(isr);</span><br>        <span class="hljs-comment">//å°†2 å’Œ 3 åˆåœ¨ä¸€èµ·</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(<br>                                               <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath), <span class="hljs-string">&quot;gbk&quot;</span>));<br>        <span class="hljs-comment">//4. è¯»å–</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> br.readLine();<br>        System.out.println(<span class="hljs-string">&quot;è¯»å–å†…å®¹=&quot;</span> + s);<br>        <span class="hljs-comment">//5. å…³é—­å¤–å±‚æµ</span><br>        br.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤º OutputStreamWriter ä½¿ç”¨</span><br><span class="hljs-comment"> * æŠŠFileOutputStream å­—èŠ‚æµï¼Œè½¬æˆå­—ç¬¦æµ OutputStreamWriter</span><br><span class="hljs-comment"> * æŒ‡å®šå¤„ç†çš„ç¼–ç  gbk/utf-8/utf8</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OutputStreamWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hsp.txt&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">charSet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;utf-8&quot;</span>;<br>        <span class="hljs-type">OutputStreamWriter</span> <span class="hljs-variable">osw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath), charSet);<br>        osw.write(<span class="hljs-string">&quot;hi, éŸ©é¡ºå¹³æ•™è‚²&quot;</span>);<br>        osw.close();<br>        System.out.println(<span class="hljs-string">&quot;æŒ‰ç…§ &quot;</span> + charSet + <span class="hljs-string">&quot; ä¿å­˜æ–‡ä»¶æˆåŠŸ~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ‰“å°æµ-PrintStream-å’Œ-PrintWriter"><a href="#æ‰“å°æµ-PrintStream-å’Œ-PrintWriter" class="headerlink" title="æ‰“å°æµ-PrintStream å’Œ PrintWriter"></a>æ‰“å°æµ-PrintStream å’Œ PrintWriter</h4><p>æ‰“å°æµåªæœ‰è¾“å‡ºæµï¼Œæ²¡æœ‰è¾“å…¥æµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºPrintStream ï¼ˆå­—èŠ‚æ‰“å°æµ/è¾“å‡ºæµï¼‰</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-type">PrintStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> System.out;<br>        <span class="hljs-comment">//åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒPrintStream è¾“å‡ºæ•°æ®çš„ä½ç½®æ˜¯ æ ‡å‡†è¾“å‡ºï¼Œå³æ˜¾ç¤ºå™¨</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        public void print(String s) &#123;</span><br><span class="hljs-comment">            if (s == null) &#123;</span><br><span class="hljs-comment">                s = &quot;null&quot;;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            write(s);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        out.print(<span class="hljs-string">&quot;john, hello&quot;</span>);<br>        <span class="hljs-comment">//å› ä¸ºprintåº•å±‚ä½¿ç”¨çš„æ˜¯write , æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨writeè¿›è¡Œæ‰“å°/è¾“å‡º</span><br>        out.write(<span class="hljs-string">&quot;éŸ©é¡ºå¹³,ä½ å¥½&quot;</span>.getBytes());<br>        out.close();<br><br>        <span class="hljs-comment">//æˆ‘ä»¬å¯ä»¥å»ä¿®æ”¹æ‰“å°æµè¾“å‡ºçš„ä½ç½®/è®¾å¤‡</span><br>        <span class="hljs-comment">//1. è¾“å‡ºä½ç½®ä¿®æ”¹æˆåˆ° &quot;e:\\f1.txt&quot;</span><br>        <span class="hljs-comment">//2. &quot;hello, éŸ©é¡ºå¹³æ•™è‚²~&quot; å°±ä¼šè¾“å‡ºåˆ° e:\f1.txt</span><br>        <span class="hljs-comment">//3. public static void setOut(PrintStream out) &#123;</span><br>        <span class="hljs-comment">//        checkIO();</span><br>        <span class="hljs-comment">//        setOut0(out); // native æ–¹æ³•ï¼Œä¿®æ”¹äº†out</span><br>        <span class="hljs-comment">//   &#125;</span><br>        System.setOut(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-string">&quot;e:\\f1.txt&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;hello, éŸ©é¡ºå¹³æ•™è‚²~&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤º PrintWriter ä½¿ç”¨æ–¹å¼</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//PrintWriter printWriter = new PrintWriter(System.out);</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">printWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;e:\\f2.txt&quot;</span>));<br>        printWriter.print(<span class="hljs-string">&quot;hi, åŒ—äº¬ä½ å¥½~~~~&quot;</span>);<br>        printWriter.close();<span class="hljs-comment">//flush + å…³é—­æµ, æ‰ä¼šå°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶..</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Properties-ç±»"><a href="#Properties-ç±»" class="headerlink" title="Properties ç±»"></a>Properties ç±»</h3><p>1ï¼‰ä¸“é—¨ç”¨äºè¯»å†™é…ç½®æ–‡ä»¶çš„é›†åˆç±»</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">é…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼šï¼ˆä¸éœ€è¦ç©ºæ ¼ï¼Œä¸éœ€è¦å¼•å·ï¼‰<br>é”®<span class="hljs-operator">=</span>å€¼<br>é”®<span class="hljs-operator">=</span>å€¼<br></code></pre></td></tr></table></figure><p>2ï¼‰æ³¨æ„ï¼šé”®å€¼å¯¹ä¸éœ€è¦æœ‰ç©ºæ ¼ï¼Œå€¼ä¸éœ€è¦ç”¨å¼•å·ä¸€èµ·æ¥ã€‚é»˜è®¤ç±»å‹æ˜¯String</p><p>3ï¼‰Properties çš„å¸¸è§æ–¹æ³•</p><ul><li><p>loadï¼šåŠ è½½é…ç½®æ–‡ä»¶çš„é”®å€¼å¯¹åˆ° Properties å¯¹è±¡</p></li><li><p>listï¼šå°†æ•°æ®è¾“å‡ºåˆ°æŒ‡å®šè®¾å¤‡&#x2F;æ–‡ä»¶ï¼ˆæµå¯¹è±¡ï¼‰</p></li><li><p>getProperty(key)ï¼šæ ¹æ®é”®è·å–å€¼</p></li><li><p>setProperty(key, value)ï¼šè®¾ç½®é”®å€¼å¯¹ åˆ° Properties å¯¹è±¡</p></li><li><p>storeï¼šå°† Properties ä¸­çš„é”®å€¼å¯¹å­˜å‚¨åˆ°é…ç½®æ–‡ä»¶</p><p>åœ¨ IDEA ä¸­ï¼Œä¿å­˜ä¿¡æ¯åˆ°é…ç½®æ–‡ä»¶ï¼Œå¦‚æœå«æœ‰ä¸­æ–‡ï¼Œä¼šå­˜å‚¨ä¸º Unicode ç¼–ç </p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¡ˆä¾‹æ¼”ç¤º</span><br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Properties02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨Properties ç±»æ¥è¯»å–mysql.properties æ–‡ä»¶</span><br><br>        <span class="hljs-comment">//1. åˆ›å»ºProperties å¯¹è±¡</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//2. åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶</span><br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//3. æŠŠk-væ˜¾ç¤ºæ§åˆ¶å°</span><br>        properties.list(System.out);<br>        <span class="hljs-comment">//4. æ ¹æ®key è·å–å¯¹åº”çš„å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;pwd&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·å=&quot;</span> + user);<br>        System.out.println(<span class="hljs-string">&quot;å¯†ç æ˜¯=&quot;</span> + pwd);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Properties03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨Properties ç±»æ¥åˆ›å»º é…ç½®æ–‡ä»¶, ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//åˆ›å»º</span><br>        <span class="hljs-comment">//1.å¦‚æœè¯¥æ–‡ä»¶æ²¡æœ‰è¯¥key å°±æ˜¯åˆ›å»º</span><br>        <span class="hljs-comment">//2.å¦‚æœè¯¥æ–‡ä»¶ä¸­æœ‰è¯¥key ,å°±æ˜¯ä¿®æ”¹</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            Properties çˆ¶ç±»æ˜¯ Hashtable ï¼Œ åº•å±‚å°±æ˜¯Hashtable æ ¸å¿ƒæ–¹æ³•</span><br><span class="hljs-comment">            public synchronized V put(K key, V value) &#123;</span><br><span class="hljs-comment">                // Make sure the value is not null</span><br><span class="hljs-comment">                if (value == null) &#123;</span><br><span class="hljs-comment">                    throw new NullPointerException();</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                // Makes sure the key is not already in the hashtable.</span><br><span class="hljs-comment">                Entry&lt;?,?&gt; tab[] = table;</span><br><span class="hljs-comment">                int hash = key.hashCode();</span><br><span class="hljs-comment">                int index = (hash &amp; 0x7FFFFFFF) % tab.length;</span><br><span class="hljs-comment">                @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="hljs-comment">                Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index];</span><br><span class="hljs-comment">                for(; entry != null ; entry = entry.next) &#123;</span><br><span class="hljs-comment">                    if ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123;</span><br><span class="hljs-comment">                        V old = entry.value;</span><br><span class="hljs-comment">                        entry.value = value;//å¦‚æœkey å­˜åœ¨ï¼Œå°±æ›¿æ¢</span><br><span class="hljs-comment">                        return old;</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                addEntry(hash, key, value, index);//å¦‚æœæ˜¯æ–°k, å°±addEntry</span><br><span class="hljs-comment">                return null;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br>        properties.setProperty(<span class="hljs-string">&quot;charset&quot;</span>, <span class="hljs-string">&quot;utf8&quot;</span>);<br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;æ±¤å§†&quot;</span>);<span class="hljs-comment">//æ³¨æ„ä¿å­˜æ—¶ï¼Œæ˜¯ä¸­æ–‡çš„unicodeç å€¼</span><br>        properties.setProperty(<span class="hljs-string">&quot;pwd&quot;</span>, <span class="hljs-string">&quot;888666&quot;</span>);<br><br>        <span class="hljs-comment">//å°†k-v å­˜å‚¨åˆ°æ–‡ä»¶ä¸­å³å¯  //ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ³¨é‡Š</span><br>        properties.store(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;src\\mysql2.properties&quot;</span>), <span class="hljs-literal">null</span>);<br>        System.out.println(<span class="hljs-string">&quot;ä¿å­˜é…ç½®æ–‡ä»¶æˆåŠŸ~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¯¾å ‚ç»ƒä¹ -è¿‡"><a href="#è¯¾å ‚ç»ƒä¹ -è¿‡" class="headerlink" title="è¯¾å ‚ç»ƒä¹ (è¿‡)"></a>è¯¾å ‚ç»ƒä¹ (è¿‡)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *(1) åœ¨åˆ¤æ–­eç›˜ä¸‹æ˜¯å¦æœ‰æ–‡ä»¶å¤¹mytemp ,å¦‚æœæ²¡æœ‰å°±åˆ›å»ºmytemp</span><br><span class="hljs-comment"> *(2) åœ¨e:\\mytemp ç›®å½•ä¸‹, åˆ›å»ºæ–‡ä»¶ hello.txt</span><br><span class="hljs-comment"> *(3) å¦‚æœhello.txt å·²ç»å­˜åœ¨ï¼Œæç¤ºè¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå°±ä¸è¦å†é‡å¤åˆ›å»ºäº†</span><br><span class="hljs-comment"> *(4) å¹¶ä¸”åœ¨hello.txt æ–‡ä»¶ä¸­ï¼Œå†™å…¥ hello,world~</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.BufferedWriter;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">directoryPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\mytemp&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(directoryPath);<br>        <span class="hljs-keyword">if</span>(!file.exists()) &#123;<br>            <span class="hljs-comment">//åˆ›å»º</span><br>            <span class="hljs-keyword">if</span>(file.mkdirs()) &#123;<br>                System.out.println(<span class="hljs-string">&quot;åˆ›å»º &quot;</span> + directoryPath + <span class="hljs-string">&quot; åˆ›å»ºæˆåŠŸ&quot;</span> );<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;åˆ›å»º &quot;</span> + directoryPath + <span class="hljs-string">&quot; åˆ›å»ºå¤±è´¥&quot;</span>);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span>  <span class="hljs-operator">=</span> directoryPath + <span class="hljs-string">&quot;\\hello.txt&quot;</span>;<span class="hljs-comment">// d:\mytemp\hello.txt</span><br>        file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-keyword">if</span>(!file.exists()) &#123;<br>            <span class="hljs-comment">//åˆ›å»ºæ–‡ä»¶</span><br>            <span class="hljs-keyword">if</span>(file.createNewFile()) &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot; åˆ›å»ºæˆåŠŸ~&quot;</span>);<br>                <span class="hljs-comment">//å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨BufferedWriter å­—ç¬¦è¾“å…¥æµå†™å…¥å†…å®¹</span><br>                <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(file));<br>                bufferedWriter.write(<span class="hljs-string">&quot;hello, world~~ éŸ©é¡ºå¹³æ•™è‚²&quot;</span>);<br>                bufferedWriter.close();<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot; åˆ›å»ºå¤±è´¥~&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œç»™å‡ºæç¤ºä¿¡æ¯</span><br>            System.out.println(filePath + <span class="hljs-string">&quot; å·²ç»å­˜åœ¨ï¼Œä¸åœ¨é‡å¤åˆ›å»º...&quot;</span>);<br>        &#125;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¦æ±‚:  ä½¿ç”¨BufferedReaderè¯»å–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œä¸ºæ¯è¡ŒåŠ ä¸Šè¡Œå·ï¼Œ</span><br><span class="hljs-comment"> * å†è¿åŒå†…å®¹ä¸€å¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\a.txt&quot;</span>;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">lineNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            br = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath));<br>            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//å¾ªç¯è¯»å–</span><br>                System.out.println(++lineNum + line);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span>(br != <span class="hljs-literal">null</span>) &#123;<br>                    br.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * (1) è¦ç¼–å†™ä¸€ä¸ªdog.properties   name=tom age=5 color=red</span><br><span class="hljs-comment"> * (2) ç¼–å†™Dog ç±»(name,age,color)  åˆ›å»ºä¸€ä¸ªdogå¯¹è±¡ï¼Œè¯»å–dog.properties ç”¨ç›¸åº”çš„å†…å®¹å®Œæˆå±æ€§åˆå§‹åŒ–, å¹¶è¾“å‡º</span><br><span class="hljs-comment"> * (3) å°†åˆ›å»ºçš„Dog å¯¹è±¡ ï¼Œåºåˆ—åŒ–åˆ° æ–‡ä»¶ e:\\dog.dat æ–‡ä»¶</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;src\\dog.properties&quot;</span>;<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;name&quot;</span>) + <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">//Object -&gt; String</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> Integer.parseInt(properties.get(<span class="hljs-string">&quot;age&quot;</span>) + <span class="hljs-string">&quot;&quot;</span>);<span class="hljs-comment">// Object -&gt; int</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">color</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;color&quot;</span>) + <span class="hljs-string">&quot;&quot;</span>;<span class="hljs-comment">//Object -&gt; String</span><br><br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(name, age, color);<br>        System.out.println(<span class="hljs-string">&quot;===dogå¯¹è±¡ä¿¡æ¯====&quot;</span>);<br>        System.out.println(dog);<br><br>        <span class="hljs-comment">//å°†åˆ›å»ºçš„Dog å¯¹è±¡ ï¼Œåºåˆ—åŒ–åˆ° æ–‡ä»¶ dog.dat æ–‡ä»¶</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">serFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\dog.dat&quot;</span>;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(serFilePath));<br>        oos.writeObject(dog);<br><br>        <span class="hljs-comment">//å…³é—­æµ</span><br>        oos.close();<br>        System.out.println(<span class="hljs-string">&quot;dogå¯¹è±¡ï¼Œåºåˆ—åŒ–å®Œæˆ...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//åœ¨ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œååºåˆ—åŒ–dog</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">serFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\dog.dat&quot;</span>;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(serFilePath));<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> (Dog)ois.readObject();<br>        System.out.println(<span class="hljs-string">&quot;===ååºåˆ—åŒ–å dog====&quot;</span>);<br>        System.out.println(dog);<br>        ois.close();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String color;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, String color)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.color = color;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, color=&#x27;&quot;</span> + color + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç½‘ç»œç¼–ç¨‹"><a href="#ç½‘ç»œç¼–ç¨‹" class="headerlink" title="ç½‘ç»œç¼–ç¨‹"></a>ç½‘ç»œç¼–ç¨‹</h2><h3 id="ç½‘ç»œçš„ç›¸å…³æ¦‚å¿µ"><a href="#ç½‘ç»œçš„ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç½‘ç»œçš„ç›¸å…³æ¦‚å¿µ"></a>ç½‘ç»œçš„ç›¸å…³æ¦‚å¿µ</h3><h4 id="ç½‘ç»œé€šä¿¡"><a href="#ç½‘ç»œé€šä¿¡" class="headerlink" title="ç½‘ç»œé€šä¿¡"></a>ç½‘ç»œé€šä¿¡</h4>  <img src="image-20220921112611952.png" alt="image-20220921112611952" style="zoom:80%;" /><ol><li><p>æ¦‚å¿µï¼šä¸¤å°è®¾å¤‡ä¹‹é—´é€šè¿‡ç½‘ç»œå®ç°æ•°æ®ä¼ è¾“  </p></li><li><p>ç½‘ç»œé€šä¿¡ï¼šå°†æ•°æ®é€šè¿‡ç½‘ç»œä»ä¸€å°è®¾å¤‡ä¼ è¾“åˆ°å¦ä¸€å°è®¾å¤‡  </p></li><li><p>java.netåŒ…ä¸‹æä¾›äº†ä¸€ç³»åˆ—çš„ç±»æˆ–æ¥å£ï¼Œä¾›ç¨‹åºå‘˜ä½¿ç”¨ï¼Œå®Œæˆç½‘ç»œé€šä¿¡</p></li></ol><h4 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h4><ul><li><p>æ¦‚å¿µï¼šä¸¤å°æˆ–å¤šå°è®¾å¤‡é€šè¿‡ä¸€å®šç‰©ç†è®¾å¤‡è¿æ¥èµ·æ¥æ„æˆäº†ç½‘ç»œ</p></li><li><p>æ ¹æ®ç½‘ç»œçš„è¦†ç›–èŒƒå›´ä¸åŒï¼Œå¯¹ç½‘ç»œè¿›è¡Œåˆ†ç±»ï¼š</p><ul><li>å±€åŸŸç½‘ï¼šè¦†ç›–èŒƒå›´æœ€å°ï¼Œä»…ä»…è¦†ç›– ä¸€ä¸ªæ•™å®¤æˆ–ä¸€ä¸ªæœºæˆ¿</li><li>åŸåŸŸç½‘ï¼šè¦†ç›–èŒƒå›´è¾ƒå¤§ï¼Œå¯ä»¥è¦†ç›– ä¸€ä¸ªåŸå¸‚</li><li>å¹¿åŸŸç½‘ï¼šè¦†ç›–èŒƒå›´æœ€å¤§ï¼Œå¯ä»¥è¦†ç›– å…¨å›½ï¼Œç”šè‡³å…¨çƒï¼Œä¸‡ç»´ç½‘æ˜¯å¹¿åŸŸç½‘çš„ä»£è¡¨</li></ul></li></ul><h4 id="ip-åœ°å€-é‡è¦"><a href="#ip-åœ°å€-é‡è¦" class="headerlink" title="ip åœ°å€(é‡è¦)"></a>ip åœ°å€(é‡è¦)</h4><ul><li><p>æ¦‚å¿µï¼šç”¨äºå”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„æ¯å°è®¡ç®—æœº&#x2F;ä¸»æœº</p></li><li><p>æŸ¥çœ‹ipåœ°å€ï¼šipconfig</p></li><li><p>ipåœ°å€çš„è¡¨ç¤ºå½¢å¼ï¼šç‚¹åˆ†åè¿›åˆ¶ xxx.xxx.xxx.xxx</p></li><li><p>æ¯ä¸€ä¸ªåè¿›åˆ¶æ•°çš„èŒƒå›´ï¼š0ï½255</p></li><li><p>ipåœ°å€çš„ç»„æˆ &#x3D; ç½‘ç»œåœ°å€+ä¸»æœºåœ°å€ï¼Œæ¯”å¦‚ï¼š192.168.16.69</p></li><li><p>lPv6æ˜¯äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„è®¾è®¡çš„ç”¨äºæ›¿ä»£IPv4çš„ä¸‹ä¸€ä»£IPåè®®ï¼Œå…¶åœ°å€æ•°é‡å·ç§°å¯ä»¥ä¸ºå…¨ä¸–ç•Œçš„æ¯ä¸€ç²’æ²™å­ç¼–ä¸Šä¸€ä¸ªåœ°å€[1]ã€‚</p></li><li><p>ç”±äºIPv4æœ€å¤§çš„é—®é¢˜åœ¨äºç½‘ç»œåœ°å€èµ„æºæœ‰é™ï¼Œä¸¥é‡åˆ¶çº¦äº†äº’è”ç½‘çš„åº”ç”¨å’Œå‘å±•ã€‚</p><p>IPv6çš„ä½¿ç”¨ï¼Œä¸ä»…èƒ½è§£å†³ç½‘ç»œåœ°å€èµ„æºæ•°é‡çš„é—®é¢˜ï¼Œè€Œä¸”ä¹Ÿè§£å†³äº†å¤šç§æ¥å…¥è®¾å¤‡è¿å…¥äº’è”ç½‘çš„éšœç¢</p></li></ul><h4 id="ipv4-åœ°å€åˆ†ç±»"><a href="#ipv4-åœ°å€åˆ†ç±»" class="headerlink" title="ipv4 åœ°å€åˆ†ç±»"></a>ipv4 åœ°å€åˆ†ç±»</h4><p> <img src="image-20220921114615816.png" alt="image-20220921114615816" style="zoom: 50%;" /> <img src="image-20220921114848511.png" alt="image-20220921114848511" style="zoom:50%;" /></p><p>ç‰¹æ®Šçš„ï¼š127.0.0.1 è¡¨ç¤ºæœ¬æœºåœ°å€</p><h4 id="åŸŸåå’Œç«¯å£"><a href="#åŸŸåå’Œç«¯å£" class="headerlink" title="åŸŸåå’Œç«¯å£"></a>åŸŸåå’Œç«¯å£</h4><ul><li><p>åŸŸåï¼šä¾‹å¦‚ï¼š<a href="http://www.baidu.com/">www.baidu.com</a></p><ul><li>å¥½å¤„ï¼šä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œè§£å†³è®°ipçš„å›°éš¾  </li><li>æ¦‚å¿µï¼šå°†ipåœ°å€æ˜ å°„æˆåŸŸåï¼Œè¿™é‡Œæ€ä¹ˆæ˜ å°„ä¸Šï¼ŒHTTPåè®®</li></ul></li><li><p>ç«¯å£å·</p><ul><li><p>æ¦‚å¿µï¼šç”¨äºæ ‡è¯†è®¡ç®—æœºä¸ŠæŸä¸ªç‰¹å®šçš„ç½‘ç»œç¨‹åº  </p></li><li><p>è¡¨ç¤ºå½¢å¼ï¼šä»¥æ•´æ•°å½¢å¼ï¼Œç«¯å£èŒƒå›´0<del>65535[2ä¸ªå­—èŠ‚è¡¨ç¤ºç«¯å£0</del>216-1]  </p></li><li><p>0~1024å·²ç»è¢«å ç”¨ï¼Œæ¯”å¦‚ ssh 22 ,  ftp 21 ,  smtp 25 ,  http 80  </p><p>(å› æ­¤ï¼Œåœ¨ç½‘ç»œå¼€å‘ä¸­ï¼Œä¸è¦ä½¿ç”¨ 0-1024 çš„ç«¯å£)</p></li><li><p>å¸¸è§çš„ç½‘ç»œç¨‹åºç«¯å£å·ï¼š  </p><ul><li>ssh 22 ,  ftp 21 ,  smtp 25 ,  http 80 </li><li>tomcatï¼š8080</li><li>mysqlï¼š3306</li><li>oracleï¼š1521</li><li>sqlserverï¼š1433</li></ul></li></ul></li><li><p>åŸŸåå’Œç«¯å£çš„ç†è§£ï¼š</p> <img src="image-20220921144831286.png" alt="image-20220921144831286" style="zoom: 50%;" /></li></ul><h4 id="ç½‘ç»œé€šä¿¡åè®®-TCP-x2F-IP"><a href="#ç½‘ç»œé€šä¿¡åè®®-TCP-x2F-IP" class="headerlink" title="ç½‘ç»œé€šä¿¡åè®®(TCP&#x2F;IP)"></a>ç½‘ç»œé€šä¿¡åè®®(TCP&#x2F;IP)</h4><p>TCP&#x2F;IP (Transmission Control  Protocol&#x2F;Internet Protocolçš„ç®€å†™)ï¼Œä¸­æ–‡è¯‘åä¸ºä¼ è¾“æ§åˆ¶åè®®&#x2F;å› ç‰¹ç½‘äº’è”åè®®ï¼Œåˆå«ç½‘ç»œé€šè®¯åè®®ï¼Œè¿™ä¸ªåè®®æ˜¯ Internet æœ€åŸºæœ¬çš„åè®®ã€Internetå›½é™…äº’è”ç½‘ç»œçš„åŸºç¡€ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯ç”±ç½‘ç»œå±‚çš„ IP åè®®å’Œä¼ è¾“å±‚çš„ TCP åè®®ç»„æˆçš„ã€‚[ç¤ºæ„å›¾]</p><p>ä¸ªäººç†è§£ï¼šç½‘ç»œé€šä¿¡åè®® è§„èŒƒäº†ç½‘ç»œæ•°æ®çš„ç»“æ„</p> <img src="image-20220921114510403.png" alt="image-20220921114510403" style="zoom:50%;" /><h4 id="ç½‘ç»œé€šä¿¡åè®®"><a href="#ç½‘ç»œé€šä¿¡åè®®" class="headerlink" title="ç½‘ç»œé€šä¿¡åè®®"></a>ç½‘ç»œé€šä¿¡åè®®</h4> <img src="image-20220921151249596.png" alt="image-20220921151249596" style="zoom:45%;" /><h4 id="TCP-å’Œ-UDP"><a href="#TCP-å’Œ-UDP" class="headerlink" title="TCP å’Œ UDP"></a>TCP å’Œ UDP</h4><p><strong>âˆš</strong> <strong>TCPåè®®ï¼šä¼ è¾“æ§åˆ¶åè®®</strong></p><ol><li><p>ä½¿ç”¨TCPåè®®å‰ï¼Œé¡»å…ˆå»ºç«‹TCPè¿æ¥ï¼Œå½¢æˆä¼ è¾“æ•°æ®é€šé“</p></li><li><p>ä¼ è¾“å‰ï¼Œé‡‡ç”¨ â€œ<strong>ä¸‰æ¬¡æ¡æ‰‹</strong>â€ æ–¹å¼ï¼Œæ˜¯å¯é çš„</p></li><li><p>TCPåè®®è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ï¼šå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯  </p></li><li><p>åœ¨è¿æ¥ä¸­å¯è¿›è¡Œå¤§æ•°æ®é‡çš„ä¼ è¾“</p></li><li><p>ä¼ è¾“å®Œæ¯•ï¼Œéœ€é‡Šæ”¾å·²å»ºç«‹çš„è¿æ¥ï¼Œæ•ˆç‡ä½</p></li></ol><p><strong>âˆš</strong> <strong>UDPåè®®ï¼šç”¨æˆ·æ•°æ®åè®®</strong></p><ol><li>å°†æ•°æ®ã€æºã€ç›®çš„å°è£…æˆæ•°æ®åŒ…ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥  </li><li>æ¯ä¸ªæ•°æ®åŒ…çš„å¤§å°é™åˆ¶åœ¨64Kå†…ï¼Œä¸é€‚åˆä¼ è¾“å¤§é‡æ•°æ®</li><li>å› æ— éœ€è¿æ¥ï¼Œæ•…æ˜¯ä¸å¯é çš„ï¼ˆä¸èƒ½ä¿è¯æ•°æ®ä¸€å®šè¢«å¯¹æ–¹æ¥æ”¶åˆ°ï¼‰</li><li>å‘é€æ•°æ®ç»“æŸæ—¶æ— éœ€é‡Šæ”¾èµ„æºï¼ˆå› ä¸ºä¸æ˜¯é¢å‘è¿æ¥çš„ï¼‰ï¼Œé€Ÿåº¦å¿«</li></ol><h3 id="InetAddress-ç±»"><a href="#InetAddress-ç±»" class="headerlink" title="InetAddress ç±»"></a>InetAddress ç±»</h3><ul><li>è·å–æœ¬æœº InetAddress å¯¹è±¡ï¼šgetLocalHost</li><li>æ ¹æ®æŒ‡å®š ä¸»æœºå&#x2F;åŸŸå è·å– ip åœ°å€å¯¹è±¡ï¼šgetByName</li><li>è·å– InetAddresså¯¹è±¡ çš„ä¸»æœºåï¼šgetHostName</li><li>è·å– InetAddresså¯¹è±¡ çš„åœ°å€ï¼šgetHostAddress</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><span class="hljs-comment">//æ¼”ç¤º InetAddressç±» çš„ä½¿ç”¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">API_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnknownHostException &#123;<br><br>        <span class="hljs-comment">//1. è·å–æœ¬æœºçš„InetAddress å¯¹è±¡</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">localHost</span> <span class="hljs-operator">=</span> InetAddress.getLocalHost();<br>        System.out.println(localHost);<span class="hljs-comment">//DESKTOP-S4MP84S/192.168.12.1</span><br><br>        <span class="hljs-comment">//2. æ ¹æ®æŒ‡å®šä¸»æœºå è·å– InetAddresså¯¹è±¡</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">host1</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;LAPTOP-A2UEI881&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;host1=&quot;</span> + host1);<span class="hljs-comment">//DESKTOP-S4MP84S/192.168.12.1</span><br><br>        <span class="hljs-comment">//3. æ ¹æ®åŸŸåè¿”å› InetAddresså¯¹è±¡, æ¯”å¦‚ www.baidu.com å¯¹åº”</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">host2</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;www.baidu.com&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;host2=&quot;</span> + host2);<span class="hljs-comment">//www.baidu.com/183.232.231.174</span><br><br>        <span class="hljs-comment">//4. é€šè¿‡ InetAddress å¯¹è±¡ï¼Œè·å–å¯¹åº”çš„åœ°å€</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">hostAddress</span> <span class="hljs-operator">=</span> host2.getHostAddress();<span class="hljs-comment">//IP 110.242.68.4</span><br>        System.out.println(<span class="hljs-string">&quot;host2 å¯¹åº”çš„ip = &quot;</span> + hostAddress);<span class="hljs-comment">//183.232.231.174</span><br><br>        <span class="hljs-comment">//5. é€šè¿‡ InetAddress å¯¹è±¡ï¼Œè·å–å¯¹åº”çš„ä¸»æœºå/æˆ–è€…çš„åŸŸå</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">hostName</span> <span class="hljs-operator">=</span> host2.getHostName();<br>        System.out.println(<span class="hljs-string">&quot;host2å¯¹åº”çš„ä¸»æœºå/åŸŸå=&quot;</span> + hostName); <span class="hljs-comment">// www.baidu.com</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h3><ul><li><p>å¥—æ¥å­—ï¼ˆSocketï¼‰å¼€å‘ç½‘ç»œåº”ç”¨ç¨‹åºè¢«å¹¿æ³›é‡‡ç”¨ï¼Œä»¥è‡³äºæˆä¸ºäº‹å®ä¸Šçš„æ ‡å‡†ã€‚</p></li><li><p>é€šä¿¡çš„ä¸¤ç«¯éƒ½è¦æœ‰ Socketï¼Œæ˜¯ä¸¤å°æœºå™¨é—´é€šä¿¡çš„ç«¯ç‚¹</p></li><li><p>ç½‘ç»œé€šä¿¡å…¶å®å°±æ˜¯ Socket é—´çš„é€šä¿¡</p></li><li><p>Socket å…è®¸ç¨‹åºæŠŠç½‘ç»œè¿æ¥å½“æˆä¸€ä¸ªæµï¼Œæ•°æ®åœ¨ä¸¤ä¸ª Socket é—´é€šè¿‡ IO ä¼ è¾“</p></li><li><p>ä¸€èˆ¬ä¸»åŠ¨å‘èµ·é€šä¿¡çš„åº”ç”¨ç¨‹åºå±å®¢æˆ·ç«¯ï¼Œç­‰å¾…é€šä¿¡è¯·æ±‚çš„ä¸ºæœåŠ¡ç«¯</p></li><li><p>Socket æœ‰ä¸¤ç§æ–¹å¼ï¼šTCPç¼–ç¨‹ï¼ˆå¯é çš„ï¼‰ã€UDPç¼–ç¨‹ï¼ˆä¸å¯é çš„ï¼‰</p></li><li><p>ç¤ºæ„å›¾ï¼š</p> <img src="image-20220921194523349.png" alt="image-20220921194523349" style="zoom: 67%;" /> <img src="image-20220921195106779.png" alt="image-20220921195106779" style="zoom:56%;" /></li></ul><h3 id="TCP-ç½‘ç»œé€šä¿¡ç¼–ç¨‹"><a href="#TCP-ç½‘ç»œé€šä¿¡ç¼–ç¨‹" class="headerlink" title="TCP ç½‘ç»œé€šä¿¡ç¼–ç¨‹"></a>TCP ç½‘ç»œé€šä¿¡ç¼–ç¨‹</h3><h4 id="åŸºæœ¬ä»‹ç»-7"><a href="#åŸºæœ¬ä»‹ç»-7" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li>åŸºäºå®¢æˆ·ç«¯ä¸€æœåŠ¡ç«¯çš„ç½‘ç»œé€šä¿¡</li><li>åº•å±‚ä½¿ç”¨çš„æ˜¯TCP&#x2F;IPåè®®</li><li>åº”ç”¨åœºæ™¯ä¸¾ä¾‹ï¼šå®¢æˆ·ç«¯å‘é€æ•°æ®ï¼ŒæœåŠ¡ç«¯æ¥å—å¹¶æ˜¾ç¤ºæ§åˆ¶å°</li><li>åŸºäºSocketçš„TCPç¼–ç¨‹</li></ul><h4 id="åº”ç”¨æ¡ˆä¾‹1"><a href="#åº”ç”¨æ¡ˆä¾‹1" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹1"></a>åº”ç”¨æ¡ˆä¾‹1</h4><ol><li><p>ç¼–å†™ä¸€ä¸ªæœåŠ¡å™¨ç«¯ï¼Œå’Œä¸€ä¸ªå®¢æˆ·ç«¯</p></li><li><p>æœåŠ¡å™¨ç«¯åœ¨ 9999ç«¯å£ç›‘å¬</p></li><li><p>å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ç«¯ï¼Œå‘é€ â€œhelloï¼Œserverâ€ï¼Œç„¶åé€€å‡º</p></li><li><p>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œè¾“å‡ºï¼Œå¹¶é€€å‡º</p></li><li><p>è¿‡ç¨‹ç¤ºæ„å›¾ï¼š</p> <img src="image-20220921202032716.png" alt="image-20220921202032716" style="zoom:50%;" /></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æœåŠ¡ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP01Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. new ServerSocket(9999);</span><br>        <span class="hljs-comment">//   åœ¨æœ¬æœº çš„9999ç«¯å£ç›‘å¬, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   ç»†èŠ‚ï¼šè¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999</span><br>        <span class="hljs-comment">//   è¡¥å……ï¼šè¿™ä¸ª ServerSocket å¯ä»¥é€šè¿‡ .accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ï¼Œåœ¨9999ç«¯å£ç›‘å¬ï¼Œç­‰å¾…è¿æ¥..&quot;</span>);<br>        <span class="hljs-comment">//2. .accept()</span><br>        <span class="hljs-comment">//   å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999ç«¯å£æ—¶ï¼Œç¨‹åºä¼š é˜»å¡, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();  <span class="hljs-comment">//è¡¥å……ï¼ˆè§ä¸Šä¸€æ¡è¡¥å……ï¼‰</span><br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ socket =&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//3. é€šè¿‡socket.getInputStream() è¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IOè¯»å–</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<span class="hljs-comment">//æ ¹æ®è¯»å–åˆ°çš„å®é™…é•¿åº¦ï¼Œæ˜¾ç¤ºå†…å®¹.</span><br>        &#125;<br>        <span class="hljs-comment">//5.å…³é—­æµå’Œsocket</span><br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//å…³é—­</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®¢æˆ·ç«¯ï¼Œå‘é€ &quot;hello, server&quot; ç»™æœåŠ¡ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP01Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. è¿æ¥æœåŠ¡ç«¯ (ip , ç«¯å£ï¼‰</span><br>        <span class="hljs-comment">//è§£è¯»: è¿æ¥æœ¬æœºçš„ 9999ç«¯å£, å¦‚æœè¿æ¥æˆåŠŸï¼Œè¿”å›Socketå¯¹è±¡</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ socketè¿”å›=&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//2. è¿æ¥ä¸Šåï¼Œç”ŸæˆSocket, é€šè¿‡socket.getOutputStream()</span><br>        <span class="hljs-comment">//   å¾—åˆ° å’Œ socketå¯¹è±¡å…³è”çš„è¾“å‡ºæµå¯¹è±¡</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ° æ•°æ®é€šé“</span><br>        outputStream.write(<span class="hljs-string">&quot;hello, server&quot;</span>.getBytes());<br>        <span class="hljs-comment">//4. å…³é—­æµå¯¹è±¡å’Œsocket, å¿…é¡»å…³é—­</span><br>        outputStream.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯é€€å‡º.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åº”ç”¨æ¡ˆä¾‹2"><a href="#åº”ç”¨æ¡ˆä¾‹2" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹2"></a>åº”ç”¨æ¡ˆä¾‹2</h4><ol><li><p>ç¼–å†™ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œå’Œä¸€ä¸ªå®¢æˆ·ç«¯  </p></li><li><p>æœåŠ¡å™¨ç«¯åœ¨ 9999 ç«¯å£ç›‘å¬  </p></li><li><p>å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œå‘é€â€œhello,serverâ€ï¼Œå¹¶æ¥æ”¶æœåŠ¡å™¨ç«¯å›å‘çš„ â€œhello,clientâ€ï¼Œå†é€€å‡º</p></li><li><p>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œè¾“å‡ºï¼Œå¹¶å‘é€ â€œhello,clientâ€ï¼Œå†é€€å‡º</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æœåŠ¡ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP02Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. åœ¨æœ¬æœº çš„9999ç«¯å£ç›‘å¬, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   ç»†èŠ‚: è¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999</span><br>        <span class="hljs-comment">//   ç»†èŠ‚ï¼šè¿™ä¸ª ServerSocket å¯ä»¥é€šè¿‡ accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ï¼Œåœ¨9999ç«¯å£ç›‘å¬ï¼Œç­‰å¾…è¿æ¥..&quot;</span>);<br>        <span class="hljs-comment">//2. å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999ç«¯å£æ—¶ï¼Œç¨‹åºä¼š é˜»å¡, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­</span><br><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ socket =&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//3. é€šè¿‡socket.getInputStream() è¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IOè¯»å–</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<span class="hljs-comment">//æ ¹æ®è¯»å–åˆ°çš„å®é™…é•¿åº¦ï¼Œæ˜¾ç¤ºå†…å®¹.</span><br>        &#125;<br>        <span class="hljs-comment">//5. è·å–socketç›¸å…³è”çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        outputStream.write(<span class="hljs-string">&quot;hello, client&quot;</span>.getBytes());<br>        <span class="hljs-comment">//   è®¾ç½®å†™å…¥ç»“æŸæ ‡è®°</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-comment">//6.å…³é—­æµå’Œsocket</span><br>        outputStream.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//å…³é—­</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®¢æˆ·ç«¯ï¼Œå‘é€ &quot;hello, server&quot; ç»™æœåŠ¡ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP02Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. è¿æ¥æœåŠ¡ç«¯ (ip , ç«¯å£ï¼‰</span><br>        <span class="hljs-comment">//è§£è¯»: è¿æ¥æœ¬æœºçš„ 9999ç«¯å£, å¦‚æœè¿æ¥æˆåŠŸï¼Œè¿”å›Socketå¯¹è±¡</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ socketè¿”å›=&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//2. è¿æ¥ä¸Šåï¼Œç”ŸæˆSocket, é€šè¿‡socket.getOutputStream()</span><br>        <span class="hljs-comment">//   å¾—åˆ° å’Œ socketå¯¹è±¡å…³è”çš„è¾“å‡ºæµå¯¹è±¡</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ° æ•°æ®é€šé“</span><br>        outputStream.write(<span class="hljs-string">&quot;hello, server&quot;</span>.getBytes());<br>        <span class="hljs-comment">//   è®¾ç½®å†™å…¥ç»“æŸæ ‡è®°</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-comment">//4. è·å–å’Œsocketå…³è”çš„è¾“å…¥æµ. è¯»å–æ•°æ®(å­—èŠ‚)ï¼Œå¹¶æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<br>        &#125;<br><br>        <span class="hljs-comment">//5. å…³é—­æµå¯¹è±¡å’Œsocket, å¿…é¡»å…³é—­</span><br>        inputStream.close();<br>        outputStream.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯é€€å‡º.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åº”ç”¨æ¡ˆä¾‹-3-ä½¿ç”¨å­—ç¬¦æµ"><a href="#åº”ç”¨æ¡ˆä¾‹-3-ä½¿ç”¨å­—ç¬¦æµ" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹ 3(ä½¿ç”¨å­—ç¬¦æµ)"></a>åº”ç”¨æ¡ˆä¾‹ 3(ä½¿ç”¨å­—ç¬¦æµ)</h4><ol><li><p>ç¼–å†™ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œå’Œä¸€ä¸ªå®¢æˆ·ç«¯</p></li><li><p>æœåŠ¡ç«¯åœ¨9999ç«¯å£ç›‘å¬</p></li><li><p>å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œå‘é€â€hello, serverâ€™â€ï¼Œå¹¶æ¥æ”¶æœåŠ¡ç«¯å›å‘çš„ â€œhello,clientâ€ï¼Œå†é€€å‡º  </p></li><li><p>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œè¾“å‡ºï¼Œå¹¶å‘é€â€hello, clientâ€ï¼Œå†é€€å‡º</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æœåŠ¡ç«¯, ä½¿ç”¨å­—ç¬¦æµæ–¹å¼è¯»å†™</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP03Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. åœ¨æœ¬æœº çš„9999ç«¯å£ç›‘å¬, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   ç»†èŠ‚: è¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999</span><br>        <span class="hljs-comment">//   ç»†èŠ‚ï¼šè¿™ä¸ª ServerSocket å¯ä»¥é€šè¿‡ accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ï¼Œåœ¨9999ç«¯å£ç›‘å¬ï¼Œç­‰å¾…è¿æ¥..&quot;</span>);<br>        <span class="hljs-comment">//2. å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999ç«¯å£æ—¶ï¼Œç¨‹åºä¼š é˜»å¡, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­</span><br><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ socket =&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//3. é€šè¿‡socket.getInputStream() è¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IOè¯»å–, ä½¿ç”¨å­—ç¬¦æµ, è€å¸ˆä½¿ç”¨ InputStreamReader å°† inputStream è½¬æˆå­—ç¬¦æµ</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine();<span class="hljs-comment">//ä½¿ç”¨readLine()è¯»å–</span><br>        System.out.println(s);<span class="hljs-comment">//è¾“å‡º</span><br><br>        <span class="hljs-comment">//5. è·å–socketç›¸å…³è”çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>       <span class="hljs-comment">//    ä½¿ç”¨å­—ç¬¦è¾“å‡ºæµçš„æ–¹å¼å›å¤ä¿¡æ¯</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello client å­—ç¬¦æµ&quot;</span>);<br>        <span class="hljs-comment">//æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¨ç¤ºå†™å…¥çš„å†…å®¹ç»“æŸ, æ³¨æ„ï¼Œè¦æ±‚å¯¹æ–¹ä½¿ç”¨readLine()!!!!</span><br>        <span class="hljs-comment">//è¿™æ ·çš„è¯å°±ä¸éœ€è¦ä½¿ç”¨.shutdownOutput();æ ‡è®°ç»“æŸ ä½ å¦ˆçš„éŸ©é¡ºå¹³ï¼ï¼ï¼è¿™é‡Œæ˜¯é”™è¯¯çš„</span><br>        <span class="hljs-comment">//.shutdownOutput() ä¸€å®šè¦åŠ ä¸Š â€”â€” è¡€çš„æ•™è®­</span><br>        bufferedWriter.newLine();<br>        bufferedWriter.flush();<span class="hljs-comment">//æ³¨æ„ï¼šå¦‚æœä½¿ç”¨çš„å­—ç¬¦æµï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šå†™å…¥æ•°æ®é€šé“</span><br><br>        <span class="hljs-comment">//6.å…³é—­æµå’Œsocket</span><br>        <span class="hljs-comment">//ä¸€èˆ¬æ¥è¯´ åå¼€çš„æµå…ˆå…³é—­</span><br>        bufferedWriter.close();<br>        bufferedReader.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//å…³é—­</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®¢æˆ·ç«¯ï¼Œå‘é€ &quot;hello, server&quot; ç»™æœåŠ¡ç«¯ï¼Œ ä½¿ç”¨å­—ç¬¦æµ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP03Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. è¿æ¥æœåŠ¡ç«¯ (ip , ç«¯å£ï¼‰</span><br>        <span class="hljs-comment">//è§£è¯»: è¿æ¥æœ¬æœºçš„ 9999ç«¯å£, å¦‚æœè¿æ¥æˆåŠŸï¼Œè¿”å›Socketå¯¹è±¡</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ socketè¿”å›=&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//2. è¿æ¥ä¸Šåï¼Œç”ŸæˆSocket, é€šè¿‡socket.getOutputStream()</span><br>        <span class="hljs-comment">//   å¾—åˆ° å’Œ socketå¯¹è±¡å…³è”çš„è¾“å‡ºæµå¯¹è±¡</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ° æ•°æ®é€šé“, ä½¿ç”¨å­—ç¬¦æµ</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello, server å­—ç¬¦æµ&quot;</span>);<br>        <span class="hljs-comment">//æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¨ç¤ºå†™å…¥çš„å†…å®¹ç»“æŸ, æ³¨æ„ï¼Œè¦æ±‚å¯¹æ–¹ä½¿ç”¨readLine()!!!!</span><br>        <span class="hljs-comment">//è¿™æ ·çš„è¯å°±ä¸éœ€è¦ä½¿ç”¨.shutdownOutput();æ ‡è®°ç»“æŸ</span><br>        bufferedWriter.newLine();<br>        bufferedWriter.flush();<span class="hljs-comment">// å¦‚æœä½¿ç”¨çš„å­—ç¬¦æµï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šå†™å…¥æ•°æ®é€šé“</span><br><br>        <span class="hljs-comment">//4. è·å–å’Œsocketå…³è”çš„è¾“å…¥æµ. è¯»å–æ•°æ®(å­—ç¬¦)ï¼Œå¹¶æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine(); <span class="hljs-comment">//ä½¿ç”¨readLine()è¯»å–</span><br>        System.out.println(s);<br><br>        <span class="hljs-comment">//5. å…³é—­æµå¯¹è±¡å’Œsocket, å¿…é¡»å…³é—­</span><br>        <span class="hljs-comment">//ä¸€èˆ¬æ¥è¯´ åå¼€çš„æµå…ˆå…³é—­</span><br>        bufferedReader.close();<span class="hljs-comment">//å…³é—­å¤–å±‚æµ</span><br>        bufferedWriter.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯é€€å‡º.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åº”ç”¨æ¡ˆä¾‹-4ï¼ˆæ–‡ä»¶ï¼‰"><a href="#åº”ç”¨æ¡ˆä¾‹-4ï¼ˆæ–‡ä»¶ï¼‰" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹ 4ï¼ˆæ–‡ä»¶ï¼‰"></a>åº”ç”¨æ¡ˆä¾‹ 4ï¼ˆæ–‡ä»¶ï¼‰</h4><ol><li><p>ç¼–å†™ä¸€ä¸ªæœåŠ¡ç«¯å’Œä¸€ä¸ªå®¢æˆ·ç«¯  </p></li><li><p>æœåŠ¡å™¨ç«¯åœ¨8888ç«¯å£ç›‘å¬  </p></li><li><p>å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œå‘é€ä¸€å¼ å›¾ç‰‡ e:\\qie.png  </p></li><li><p>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„å›¾ç‰‡ï¼Œä¿å­˜åˆ°srcä¸‹ï¼Œå‘é€â€æ”¶åˆ°å›¾ç‰‡â€å†é€€å‡º  </p></li><li><p>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„ â€œæ”¶åˆ°å›¾ç‰‡â€ï¼Œå†é€€å‡º  </p></li><li><p>è¯¥ç¨‹åºè¦æ±‚ä½¿ç”¨ StreamUtils.javaï¼ˆå·²ç»å‡†å¤‡å¥½äº†ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</p></li><li><p>è¿‡ç¨‹ç¤ºæ„å›¾ï¼š</p> <img src="image-20220921235649357.png" alt="image-20220921235649357" style="zoom: 67%;" /></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–‡ä»¶ä¸Šä¼ çš„æœåŠ¡ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TCPFileUploadServer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//1. æœåŠ¡ç«¯åœ¨æœ¬æœºç›‘å¬8888ç«¯å£</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">8888</span>);<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯åœ¨8888ç«¯å£ç›‘å¬....&quot;</span>);<br>        <span class="hljs-comment">//2. ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        <span class="hljs-comment">//3. è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ•°æ®</span><br>        <span class="hljs-comment">//   é€šè¿‡Socketå¾—åˆ°è¾“å…¥æµ</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(socket.getInputStream());<br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br>        <span class="hljs-comment">//4. å°†å¾—åˆ° bytes æ•°ç»„ï¼Œå†™å…¥åˆ°æŒ‡å®šçš„è·¯å¾„ï¼Œå°±å¾—åˆ°ä¸€ä¸ªæ–‡ä»¶äº†</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;chapter21\\src\\qie2.png&quot;</span>;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(destFilePath));<br>        bos.write(bytes);<br>        bos.close();<br><br>        <span class="hljs-comment">// å‘å®¢æˆ·ç«¯å›å¤ &quot;æ”¶åˆ°å›¾ç‰‡&quot;</span><br>        <span class="hljs-comment">// é€šè¿‡socket è·å–åˆ°è¾“å‡ºæµ(å­—ç¬¦)</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(socket.getOutputStream()));<br>        writer.write(<span class="hljs-string">&quot;æ”¶åˆ°å›¾ç‰‡&quot;</span>);<br>        writer.flush();<span class="hljs-comment">//ä½¿ç”¨Writeréœ€è¦æ‰‹åŠ¨æŠŠå†…å®¹åˆ·æ–°åˆ°æ•°æ®é€šé“</span><br>        socket.shutdownOutput();<span class="hljs-comment">//è®¾ç½®å†™å…¥ç»“æŸæ ‡è®°</span><br><br>        <span class="hljs-comment">//å…³é—­å…¶ä»–èµ„æº</span><br>        writer.close();<br>        bis.close();<br>        socket.close();<br>        serverSocket.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–‡ä»¶ä¸Šä¼ çš„å®¢æˆ·ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TCPFileUploadClient</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯ 8888ï¼Œå¾—åˆ°Socketå¯¹è±¡</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">8888</span>);<br>        <span class="hljs-comment">//åˆ›å»ºè¯»å–ç£ç›˜æ–‡ä»¶çš„è¾“å…¥æµ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\qie.png&quot;</span>;<br><span class="hljs-comment">//        String filePath = &quot;d:\\abc.mp4&quot;;</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath));<br><br>        <span class="hljs-comment">//bytes å°±æ˜¯filePathå¯¹åº”çš„å­—èŠ‚æ•°ç»„</span><br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br><br>        <span class="hljs-comment">//é€šè¿‡socketè·å–åˆ°è¾“å‡ºæµ, å°†bytesæ•°æ®å‘é€ç»™æœåŠ¡ç«¯</span><br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(socket.getOutputStream());<br>        bos.write(bytes);<span class="hljs-comment">//å°†æ–‡ä»¶å¯¹åº”çš„å­—èŠ‚æ•°ç»„çš„å†…å®¹ï¼Œå†™å…¥åˆ°æ•°æ®é€šé“</span><br>        bis.close();<br>        socket.shutdownOutput();<span class="hljs-comment">//è®¾ç½®å†™å…¥æ•°æ®çš„ç»“æŸæ ‡è®°</span><br><br>        <span class="hljs-comment">//=====æ¥æ”¶ä»æœåŠ¡ç«¯å›å¤çš„æ¶ˆæ¯=====//</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//ä½¿ç”¨StreamUtils çš„æ–¹æ³•ï¼Œç›´æ¥å°† inputStream è¯»å–åˆ°çš„å†…å®¹ è½¬æˆå­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> StreamUtils.streamToString(inputStream);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//å…³é—­ç›¸å…³çš„æµ</span><br>        inputStream.close();<br>        bos.close();<br>        socket.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä¸€ä¸ªå…³äº æµçš„è½¬æ¢ çš„å·¥å…·ç±»</span><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.ByteArrayOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ­¤ç±»ç”¨äºæ¼”ç¤ºå…³äºæµçš„è¯»å†™æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamUtils</span> &#123;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŠŸèƒ½ï¼šå°†è¾“å…¥æµè½¬æ¢æˆbyte[]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] streamToByteArray(InputStream is) <span class="hljs-keyword">throws</span> Exception&#123;<br><span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<span class="hljs-comment">//åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span><br><span class="hljs-type">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<span class="hljs-comment">//å­—èŠ‚æ•°ç»„</span><br><span class="hljs-type">int</span> len;<br><span class="hljs-keyword">while</span>((len=is.read(b))!=-<span class="hljs-number">1</span>)&#123;<span class="hljs-comment">//å¾ªç¯è¯»å–</span><br>bos.write(b, <span class="hljs-number">0</span>, len);<span class="hljs-comment">//æŠŠè¯»å–åˆ°çš„æ•°æ®å†™å…¥bos</span><br>&#125;<br><span class="hljs-type">byte</span>[] array = bos.toByteArray(); <span class="hljs-comment">//å°†bosè½¬æ¢æˆå­—èŠ‚æ•°ç»„</span><br>bos.close();<br><span class="hljs-keyword">return</span> array;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŠŸèƒ½ï¼šå°†InputStreamè½¬æ¢æˆString</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">streamToString</span><span class="hljs-params">(InputStream is)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is));<br>StringBuilder builder= <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>String line;<br><span class="hljs-keyword">while</span>((line=reader.readLine())!=<span class="hljs-literal">null</span>)&#123; <span class="hljs-comment">//å½“è¯»å–åˆ° nullæ—¶ï¼Œå°±è¡¨ç¤ºç»“æŸ</span><br>builder.append(line+<span class="hljs-string">&quot;\r\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">return</span> builder.toString();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="netstat-æŒ‡ä»¤"><a href="#netstat-æŒ‡ä»¤" class="headerlink" title="netstat æŒ‡ä»¤"></a>netstat æŒ‡ä»¤</h4><p>1.netstat -an å¯ä»¥æŸ¥çœ‹å½“å‰ä¸»æœºç½‘ç»œæƒ…å†µï¼ŒåŒ…æ‹¬ç«¯å£ç›‘å¬æƒ…å†µå’Œç½‘ç»œè¿æ¥æƒ…å†µ</p><p>2.netstat -an| more å¯ä»¥åˆ†é¡µæ˜¾ç¤º</p><p>3.è¦æ±‚åœ¨ dos æ§åˆ¶å°ä¸‹æ‰§è¡Œï¼ˆwin+rï¼‰</p><p>è¯´æ˜ï¼š</p><ul><li><p>æœ¬åœ°åœ°å€ï¼šIPåœ°å€ + ç«¯å£å·</p></li><li><p>å¤–éƒ¨åœ°å€ï¼šæœ‰æ²¡æœ‰å¤–éƒ¨çš„è¿æ¥è¿åˆ°æœ¬æœºï¼Œæ˜¾ç¤ºçš„æ˜¯ å¤–éƒ¨ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰çš„ IPåœ°å€ + ç«¯å£å·</p></li><li><p>Listening è¡¨ç¤ºæŸä¸ªç«¯å£åœ¨ç›‘å¬</p></li><li><p>å¦‚æœæœ‰ä¸€ä¸ªå¤–éƒ¨ç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰è¿æ¥åˆ°è¯¥ç«¯å£ï¼Œå°±ä¼šæ˜¾ç¤ºä¸€æ¡è¿æ¥ä¿¡æ¯ã€‚</p></li><li><p>å¯ä»¥è¾“å…¥ ctrl+c é€€å‡ºæŒ‡ä»¤</p></li></ul><p>ç¤ºæ„å›¾ï¼š</p><p>â€‹<img src="image-20220922121512178.png" alt="image-20220922121512178" style="zoom:67%;" /></p><h4 id="TCP-çš„ç›¸å…³è¡¥å……"><a href="#TCP-çš„ç›¸å…³è¡¥å……" class="headerlink" title="TCP çš„ç›¸å…³è¡¥å……"></a>TCP çš„ç›¸å…³è¡¥å……</h4><p>å½“å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯åï¼Œå®é™…ä¸Šå®¢æˆ·ç«¯ä¹Ÿæ˜¯é€šè¿‡ä¸€ä¸ªç«¯å£å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šè®¯çš„</p><p>è¿™ä¸ªç«¯å£æ˜¯ç”± TCP&#x2F;IP æ¥åˆ†é…çš„ï¼Œæ˜¯ä¸ç¡®å®šçš„ï¼Œæ˜¯éšæœºçš„ã€‚</p> <img src="image-20220922123249795.png" alt="image-20220922123249795" style="zoom: 50%;" /><h3 id="UDP-ç½‘ç»œé€šä¿¡ç¼–ç¨‹-äº†è§£"><a href="#UDP-ç½‘ç»œé€šä¿¡ç¼–ç¨‹-äº†è§£" class="headerlink" title="UDP ç½‘ç»œé€šä¿¡ç¼–ç¨‹[äº†è§£]"></a>UDP ç½‘ç»œé€šä¿¡ç¼–ç¨‹[äº†è§£]</h3><h4 id="åŸºæœ¬ä»‹ç»-8"><a href="#åŸºæœ¬ä»‹ç»-8" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li><p>ç±» DatagramSocket å’Œ DatagramPacketï¼ˆæ•°æ®åŒ…&#x2F;æ•°æ®æŠ¥ï¼‰å®ç°äº†åŸºäºUDPåè®®ç½‘ç»œç¨‹åºã€‚    </p></li><li><p>UDP æ•°æ®åŒ… é€šè¿‡ æ•°æ®åŒ…å¥—æ¥å­— DatagramSocket å‘é€å’Œæ¥æ”¶ï¼Œç³»ç»Ÿä¸ä¿è¯ UDP æ•°æ®åŒ…ä¸€å®šèƒ½å¤Ÿå®‰å…¨é€åˆ°ç›®çš„åœ°ï¼Œä¹Ÿä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æŠµè¾¾ã€‚</p></li><li><p>DatagramPacketå¯¹è±¡ å°è£…äº† UDPæ•°æ®åŒ…ï¼Œåœ¨æ•°æ®æŠ¥ä¸­åŒ…å«äº† å‘é€ç«¯ çš„ lPåœ°å€ å’Œ ç«¯å£å· ä»¥åŠ æ¥æ”¶ç«¯ çš„ IPåœ°å€å’Œ ç«¯å£å·ã€‚</p></li><li><p>UDPåè®®ä¸­ æ¯ä¸ªæ•°æ®åŒ…éƒ½ç»™å‡ºäº†å®Œæ•´çš„åœ°å€ä¿¡æ¯ï¼Œå› æ­¤æ— é¡»å»ºç«‹å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿æ¥</p></li></ul><h4 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h4><ol><li><p>æ ¸å¿ƒçš„ä¸¤ä¸ª ç±»&#x2F;å¯¹è±¡ DatagramSocketä¸DatagramPacket </p></li><li><p>å»ºç«‹å‘é€ç«¯ï¼Œæ¥æ”¶ç«¯ï¼ˆæ²¡æœ‰æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ¦‚å¿µï¼‰ï¼ˆå‘é€ç«¯ä¸æ¥æ”¶ç«¯çš„èº«ä»½ä¼šéšæ—¶æ”¹å˜ï¼‰</p></li><li><p>å‘é€æ•°æ®å‰ï¼Œå»ºç«‹ æ•°æ®åŒ…&#x2F;æŠ¥ DatagramPacketå¯¹è±¡  </p></li><li><p>è°ƒç”¨ DatagramSocket çš„å‘é€ã€æ¥æ”¶æ–¹æ³•ï¼ˆæ¥æ”¶å’Œå‘é€æ•°æ®æ˜¯é€šè¿‡ DatagramSocket å¯¹è±¡å®Œæˆï¼‰</p></li><li><p>å…³é—­ DatagramSocket</p> <img src="image-20220922144417511.png" alt="image-20220922144417511" style="zoom:58%;" /></li></ol><h4 id="åº”ç”¨æ¡ˆä¾‹"><a href="#åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h4><ol><li><p>ç¼–å†™ä¸€ä¸ªæ¥æ”¶ç«¯Aå’Œä¸€ä¸ªå‘é€ç«¯B  </p></li><li><p>æ¥æ”¶ç«¯Aåœ¨9999ç«¯å£ç­‰å¾…æ¥æ”¶æ•°æ®(receive)  </p></li><li><p>å‘é€ç«¯Bå‘æ¥æ”¶ç«¯Aå‘é€æ•°æ®â€hello,æ˜å¤©åƒç«é”…~â€  </p></li><li><p>æ¥æ”¶ç«¯Aæ¥æ”¶åˆ°å‘é€ç«¯Bå‘é€çš„æ•°æ®ï¼Œå›å¤â€œå¥½çš„ï¼Œæ˜å¤©è§â€ï¼Œå†é€€å‡º  </p></li><li><p>å‘é€ç«¯æ¥æ”¶å›å¤çš„æ•°æ®ï¼Œå†é€€å‡º</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * UDPæ¥æ”¶ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.DatagramPacket;<br><span class="hljs-keyword">import</span> java.net.DatagramSocket;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.SocketException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UDPReceiverA</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1. åˆ›å»ºä¸€ä¸ª DatagramSocket å¯¹è±¡ï¼Œå‡†å¤‡åœ¨9999ç«¯å£æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">9999</span>);<br>        <span class="hljs-comment">//2. æ„å»ºä¸€ä¸ª DatagramPacket å¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-comment">//   åœ¨UDPåè®®ä¸­ï¼Œæ•°æ®åŒ…æœ€å¤§ä¸º64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//3. è°ƒç”¨ æ¥æ”¶æ–¹æ³•, å°†é€šè¿‡ç½‘ç»œä¼ è¾“çš„ DatagramPacket å¯¹è±¡</span><br>        <span class="hljs-comment">//   å¡«å……åˆ° packetå¯¹è±¡</span><br>        <span class="hljs-comment">//æç¤º: å½“æœ‰æ•°æ®åŒ…å‘é€åˆ° æœ¬æœºçš„9999ç«¯å£æ—¶ï¼Œå°±ä¼šæ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-comment">//   å¦‚æœæ²¡æœ‰æ•°æ®åŒ…å‘é€åˆ° æœ¬æœºçš„9999ç«¯å£, å°±ä¼šé˜»å¡ç­‰å¾….</span><br>        System.out.println(<span class="hljs-string">&quot;æ¥æ”¶ç«¯A ç­‰å¾…æ¥æ”¶æ•°æ®..&quot;</span>);<br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//4. å¯ä»¥æŠŠpacket è¿›è¡Œæ‹†åŒ…ï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æ˜¾ç¤º.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//å®é™…æ¥æ”¶åˆ°çš„æ•°æ®å­—èŠ‚é•¿åº¦</span><br>        <span class="hljs-type">byte</span>[] data = packet.getData();<span class="hljs-comment">//æ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//===å›å¤ä¿¡æ¯ç»™Bç«¯</span><br>        <span class="hljs-comment">//å°†éœ€è¦å‘é€çš„æ•°æ®ï¼Œå°è£…åˆ° DatagramPacketå¯¹è±¡</span><br>        data = <span class="hljs-string">&quot;å¥½çš„, æ˜å¤©è§&quot;</span>.getBytes();<br><span class="hljs-comment">//è¯´æ˜: å°è£…çš„DatagramPacketå¯¹è±¡ data å†…å®¹å­—èŠ‚æ•°ç»„, data.length, ç›®æ ‡ä¸»æœº(IP), ç›®æ ‡ç«¯å£</span><br>        packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.228.1&quot;</span>), <span class="hljs-number">9998</span>);<br><br>        socket.send(packet);<span class="hljs-comment">//å‘é€</span><br><br>        <span class="hljs-comment">//5. å…³é—­èµ„æº</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;Aç«¯é€€å‡º...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‘é€ç«¯Bï¼ˆä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®ï¼‰</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.*;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UDPSenderB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//1.åˆ›å»º DatagramSocket å¯¹è±¡ï¼Œå‡†å¤‡åœ¨9998ç«¯å£æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">9998</span>);<br><br>        <span class="hljs-comment">//2. å°†éœ€è¦å‘é€çš„æ•°æ®ï¼Œå°è£…åˆ° DatagramPacketå¯¹è±¡</span><br>        <span class="hljs-type">byte</span>[] data = <span class="hljs-string">&quot;hello æ˜å¤©åƒç«é”…~&quot;</span>.getBytes(); <span class="hljs-comment">//</span><br><br><span class="hljs-comment">//è¯´æ˜: å°è£…çš„DatagramPacketå¯¹è±¡ data å†…å®¹å­—èŠ‚æ•°ç»„, data.length, ç›®æ ‡ä¸»æœº(IP), ç›®æ ‡ç«¯å£</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.228.1&quot;</span>), <span class="hljs-number">9999</span>);<br><br>        socket.send(packet);<br><br>        <span class="hljs-comment">//3.=== æ¥æ”¶ä»Aç«¯å›å¤çš„ä¿¡æ¯</span><br>        <span class="hljs-comment">//(1)   æ„å»ºä¸€ä¸ª DatagramPacket å¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-comment">//   åœ¨å‰é¢è®²è§£UDP åè®®æ—¶ï¼Œè€å¸ˆè¯´è¿‡ä¸€ä¸ªæ•°æ®åŒ…æœ€å¤§ 64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//(2)    è°ƒç”¨ æ¥æ”¶æ–¹æ³•, å°†é€šè¿‡ç½‘ç»œä¼ è¾“çš„ DatagramPacket å¯¹è±¡</span><br>        <span class="hljs-comment">//   å¡«å……åˆ° packetå¯¹è±¡</span><br>        <span class="hljs-comment">//è€å¸ˆæç¤º: å½“æœ‰æ•°æ®åŒ…å‘é€åˆ° æœ¬æœºçš„9998ç«¯å£æ—¶ï¼Œå°±ä¼šæ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-comment">//   å¦‚æœæ²¡æœ‰æ•°æ®åŒ…å‘é€åˆ° æœ¬æœºçš„9998ç«¯å£, å°±ä¼šé˜»å¡ç­‰å¾….</span><br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//(3)  å¯ä»¥æŠŠpacket è¿›è¡Œæ‹†åŒ…ï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æ˜¾ç¤º.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//å®é™…æ¥æ”¶åˆ°çš„æ•°æ®å­—èŠ‚é•¿åº¦</span><br>        data = packet.getData();<span class="hljs-comment">//æ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//å…³é—­èµ„æº</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;Bç«¯é€€å‡º&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è¯¾åç»ƒä¹ "><a href="#è¯¾åç»ƒä¹ " class="headerlink" title="è¯¾åç»ƒä¹ "></a>è¯¾åç»ƒä¹ </h3> <img src="image-20220922153658489.png" alt="image-20220922153658489" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æœåŠ¡ç«¯, ä½¿ç”¨å­—ç¬¦æµæ–¹å¼è¯»å†™</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. åœ¨æœ¬æœº çš„9999ç«¯å£ç›‘å¬, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   ç»†èŠ‚: è¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999</span><br>        <span class="hljs-comment">//   ç»†èŠ‚ï¼šè¿™ä¸ª ServerSocket å¯ä»¥é€šè¿‡ accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ï¼Œåœ¨9999ç«¯å£ç›‘å¬ï¼Œç­‰å¾…è¿æ¥..&quot;</span>);<br>        <span class="hljs-comment">//2. å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999ç«¯å£æ—¶ï¼Œç¨‹åºä¼š é˜»å¡, ç­‰å¾…è¿æ¥</span><br>        <span class="hljs-comment">//   å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        <span class="hljs-comment">//3. é€šè¿‡socket.getInputStream() è¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IOè¯»å–, ä½¿ç”¨å­—ç¬¦æµ, è€å¸ˆä½¿ç”¨ InputStreamReader å°† inputStream è½¬æˆå­—ç¬¦æµ</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;name&quot;</span>.equals(s)) &#123;<br>            answer = <span class="hljs-string">&quot;æˆ‘æ˜¯éŸ©é¡ºå¹³&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;hobby&quot;</span>.equals(s)) &#123;<br>            answer = <span class="hljs-string">&quot;ç¼–å†™javaç¨‹åº&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            answer = <span class="hljs-string">&quot;ä½ è¯´çš„å•¥å­&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//5. è·å–socketç›¸å…³è”çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//    ä½¿ç”¨å­—ç¬¦è¾“å‡ºæµçš„æ–¹å¼å›å¤ä¿¡æ¯</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br>        bufferedWriter.write(answer);<br>        bufferedWriter.newLine();<span class="hljs-comment">// æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¨ç¤ºå›å¤å†…å®¹çš„ç»“æŸ</span><br>        bufferedWriter.flush();<span class="hljs-comment">//æ³¨æ„éœ€è¦æ‰‹åŠ¨çš„flush</span><br><br>        <span class="hljs-comment">//6.å…³é—­æµå’Œsocket</span><br>        bufferedWriter.close();<br>        bufferedReader.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//å…³é—­</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®¢æˆ·ç«¯ï¼Œå‘é€ &quot;hello, server&quot; ç»™æœåŠ¡ç«¯ï¼Œ ä½¿ç”¨å­—ç¬¦æµ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ€è·¯</span><br>        <span class="hljs-comment">//1. è¿æ¥æœåŠ¡ç«¯ (ip , ç«¯å£ï¼‰</span><br>        <span class="hljs-comment">//è§£è¯»: è¿æ¥æœ¬æœºçš„ 9999ç«¯å£, å¦‚æœè¿æ¥æˆåŠŸï¼Œè¿”å›Socketå¯¹è±¡</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br><br>        <span class="hljs-comment">//2. è¿æ¥ä¸Šåï¼Œç”ŸæˆSocket, é€šè¿‡socket.getOutputStream()</span><br>        <span class="hljs-comment">//   å¾—åˆ° å’Œ socketå¯¹è±¡å…³è”çš„è¾“å‡ºæµå¯¹è±¡</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ° æ•°æ®é€šé“, ä½¿ç”¨å­—ç¬¦æµ</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br><br>        <span class="hljs-comment">//ä»é”®ç›˜è¯»å–ç”¨æˆ·çš„é—®é¢˜</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä½ çš„é—®é¢˜&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">question</span> <span class="hljs-operator">=</span> scanner.next();<br><br>        bufferedWriter.write(question);<br>        bufferedWriter.newLine();<span class="hljs-comment">//æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¨ç¤ºå†™å…¥çš„å†…å®¹ç»“æŸ, æ³¨æ„ï¼Œè¦æ±‚å¯¹æ–¹ä½¿ç”¨readLine()!!!!</span><br>        bufferedWriter.flush();<span class="hljs-comment">// å¦‚æœä½¿ç”¨çš„å­—ç¬¦æµï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šå†™å…¥æ•°æ®é€šé“</span><br><br>        <span class="hljs-comment">//4. è·å–å’Œsocketå…³è”çš„è¾“å…¥æµ. è¯»å–æ•°æ®(å­—ç¬¦)ï¼Œå¹¶æ˜¾ç¤º</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine();<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//5. å…³é—­æµå¯¹è±¡å’Œsocket, å¿…é¡»å…³é—­</span><br>        bufferedReader.close();<span class="hljs-comment">//å…³é—­å¤–å±‚æµ</span><br>        bufferedWriter.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯é€€å‡º.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> <img src="image-20220922153711315.png" alt="image-20220922153711315" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * UDPæ¥æ”¶ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.DatagramPacket;<br><span class="hljs-keyword">import</span> java.net.DatagramSocket;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02ReceiverA</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1. åˆ›å»ºä¸€ä¸ª DatagramSocket å¯¹è±¡ï¼Œå‡†å¤‡åœ¨8888æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">8888</span>);<br>        <span class="hljs-comment">//2. æ„å»ºä¸€ä¸ª DatagramPacket å¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-comment">//   åœ¨å‰é¢è®²è§£UDP åè®®æ—¶ï¼Œè€å¸ˆè¯´è¿‡ä¸€ä¸ªæ•°æ®åŒ…æœ€å¤§ 64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//3. è°ƒç”¨ æ¥æ”¶æ–¹æ³•, å°†é€šè¿‡ç½‘ç»œä¼ è¾“çš„ DatagramPacket å¯¹è±¡</span><br>        <span class="hljs-comment">//   å¡«å……åˆ° packetå¯¹è±¡</span><br>        System.out.println(<span class="hljs-string">&quot;æ¥æ”¶ç«¯ ç­‰å¾…æ¥æ”¶é—®é¢˜ &quot;</span>);<br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//4. å¯ä»¥æŠŠ packet è¿›è¡Œæ‹†åŒ…ï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æ˜¾ç¤º.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//å®é™…æ¥æ”¶åˆ°çš„æ•°æ®å­—èŠ‚é•¿åº¦</span><br>        <span class="hljs-type">byte</span>[] data = packet.getData();<span class="hljs-comment">//æ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        <span class="hljs-comment">//åˆ¤æ–­æ¥æ”¶åˆ°çš„ä¿¡æ¯æ˜¯ä»€ä¹ˆ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;å››å¤§åè‘—æ˜¯å“ªäº›&quot;</span>.equals(s)) &#123;<br>            answer = <span class="hljs-string">&quot;å››å¤§åè‘— &lt;&lt;çº¢æ¥¼æ¢¦&gt;&gt; &lt;&lt;ä¸‰å›½æ¼”ç¤º&gt;&gt; &lt;&lt;è¥¿æ¸¸è®°&gt;&gt; &lt;&lt;æ°´æµ’ä¼ &gt;&gt;&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            answer = <span class="hljs-string">&quot;what?&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//===å›å¤ä¿¡æ¯ç»™Bç«¯</span><br>        <span class="hljs-comment">//å°†éœ€è¦å‘é€çš„æ•°æ®ï¼Œå°è£…åˆ° DatagramPacketå¯¹è±¡</span><br>        data = answer.getBytes();<br>        <span class="hljs-comment">//è¯´æ˜: å°è£…çš„ DatagramPacketå¯¹è±¡ data å†…å®¹å­—èŠ‚æ•°ç»„ , data.length , ä¸»æœº(IP) , ç«¯å£</span><br>        packet =<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.12.1&quot;</span>), <span class="hljs-number">9998</span>);<br><br>        socket.send(packet);<span class="hljs-comment">//å‘é€</span><br><br>        <span class="hljs-comment">//5. å…³é—­èµ„æº</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;Aç«¯é€€å‡º...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‘é€ç«¯B ====&gt; ä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.DatagramPacket;<br><span class="hljs-keyword">import</span> java.net.DatagramSocket;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02SenderB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//1.åˆ›å»º DatagramSocket å¯¹è±¡ï¼Œå‡†å¤‡åœ¨9998ç«¯å£ æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">9998</span>);<br><br>        <span class="hljs-comment">//2. å°†éœ€è¦å‘é€çš„æ•°æ®ï¼Œå°è£…åˆ° DatagramPacketå¯¹è±¡</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä½ çš„é—®é¢˜: &quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">question</span> <span class="hljs-operator">=</span> scanner.next();<br>        <span class="hljs-type">byte</span>[] data = question.getBytes(); <span class="hljs-comment">//</span><br><br>        <span class="hljs-comment">//è¯´æ˜: å°è£…çš„ DatagramPacketå¯¹è±¡ data å†…å®¹å­—èŠ‚æ•°ç»„ , data.length , ä¸»æœº(IP) , ç«¯å£</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.12.1&quot;</span>), <span class="hljs-number">8888</span>);<br><br>        socket.send(packet);<br><br>        <span class="hljs-comment">//3.=== æ¥æ”¶ä»Aç«¯å›å¤çš„ä¿¡æ¯</span><br>        <span class="hljs-comment">//(1)   æ„å»ºä¸€ä¸ª DatagramPacket å¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®</span><br>        <span class="hljs-comment">//   åœ¨å‰é¢è®²è§£UDP åè®®æ—¶ï¼Œè€å¸ˆè¯´è¿‡ä¸€ä¸ªæ•°æ®åŒ…æœ€å¤§ 64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//(2)    è°ƒç”¨ æ¥æ”¶æ–¹æ³•, å°†é€šè¿‡ç½‘ç»œä¼ è¾“çš„ DatagramPacket å¯¹è±¡</span><br>        <span class="hljs-comment">//   å¡«å……åˆ° packetå¯¹è±¡</span><br>        <span class="hljs-comment">//è€å¸ˆæç¤º: å½“æœ‰æ•°æ®åŒ…å‘é€åˆ° æœ¬æœºçš„9998ç«¯å£æ—¶ï¼Œå°±ä¼šæ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-comment">//   å¦‚æœæ²¡æœ‰æ•°æ®åŒ…å‘é€åˆ° æœ¬æœºçš„9998ç«¯å£, å°±ä¼šé˜»å¡ç­‰å¾….</span><br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//(3)  å¯ä»¥æŠŠpacket è¿›è¡Œæ‹†åŒ…ï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æ˜¾ç¤º.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//å®é™…æ¥æ”¶åˆ°çš„æ•°æ®å­—èŠ‚é•¿åº¦</span><br>        data = packet.getData();<span class="hljs-comment">//æ¥æ”¶åˆ°æ•°æ®</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//å…³é—­èµ„æº</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;Bç«¯é€€å‡º&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> <img src="image-20220922153817732.png" alt="image-20220922153817732" style="zoom:50%;" /> <img src="image-20220922162428406.png" alt="image-20220922162428406" style="zoom: 65%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å…ˆå†™æ–‡ä»¶ä¸‹è½½çš„æœåŠ¡ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//1 ç›‘å¬ 9999ç«¯å£</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        <span class="hljs-comment">//2.ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</span><br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯ï¼Œåœ¨9999ç«¯å£ç›‘å¬ï¼Œç­‰å¾…ä¸‹è½½æ–‡ä»¶&quot;</span>);<br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br>        <span class="hljs-comment">//3.è¯»å– å®¢æˆ·ç«¯å‘é€è¦ä¸‹è½½çš„æ–‡ä»¶å</span><br>        <span class="hljs-comment">//  è¿™é‡Œè€å¸ˆä½¿ç”¨äº†whileè¯»å–æ–‡ä»¶åï¼Œæ˜¯è€ƒè™‘å°†æ¥å®¢æˆ·ç«¯å‘é€çš„æ•°æ®è¾ƒå¤§çš„æƒ…å†µ</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">downLoadFileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span> ((len = inputStream.read(b)) != -<span class="hljs-number">1</span>) &#123;<br>            downLoadFileName += <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(b, <span class="hljs-number">0</span> , len);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯å¸Œæœ›ä¸‹è½½æ–‡ä»¶å=&quot;</span> + downLoadFileName);<br><br>        <span class="hljs-comment">//è€å¸ˆåœ¨æœåŠ¡å™¨ä¸Šæœ‰ä¸¤ä¸ªæ–‡ä»¶, æ— å.mp3 é«˜å±±æµæ°´.mp3</span><br>        <span class="hljs-comment">//å¦‚æœå®¢æˆ·ä¸‹è½½çš„æ˜¯ é«˜å±±æµæ°´ æˆ‘ä»¬å°±è¿”å›è¯¥æ–‡ä»¶ï¼Œå¦åˆ™ä¸€å¾‹è¿”å› æ— å.mp3</span><br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">resFileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;é«˜å±±æµæ°´&quot;</span>.equals(downLoadFileName)) &#123;<br>            resFileName = <span class="hljs-string">&quot;src\\é«˜å±±æµæ°´.mp3&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            resFileName = <span class="hljs-string">&quot;src\\æ— å.mp3&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//4. åˆ›å»ºä¸€ä¸ªè¾“å…¥æµï¼Œè¯»å–æ–‡ä»¶</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(resFileName));<br><br>        <span class="hljs-comment">//5. ä½¿ç”¨å·¥å…·ç±»StreamUtilsï¼Œè¯»å–æ–‡ä»¶åˆ°ä¸€ä¸ªå­—èŠ‚æ•°ç»„</span><br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br>        <span class="hljs-comment">//6. å¾—åˆ°Socketå…³è”çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(socket.getOutputStream());<br>        <span class="hljs-comment">//7. å†™å…¥åˆ°æ•°æ®é€šé“ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯</span><br>        bos.write(bytes);<br>        socket.shutdownOutput();<span class="hljs-comment">//å¾ˆå…³é”®.</span><br><br>        <span class="hljs-comment">//8 å…³é—­ç›¸å…³çš„èµ„æº</span><br>        bis.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯é€€å‡º...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–‡ä»¶ä¸‹è½½çš„å®¢æˆ·ç«¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//1. æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼ŒæŒ‡å®šä¸‹è½½æ–‡ä»¶å</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸‹è½½æ–‡ä»¶å&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">downloadFileName</span> <span class="hljs-operator">=</span> scanner.next();<br><br>        <span class="hljs-comment">//2. å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯ï¼Œå‡†å¤‡å‘é€</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        <span class="hljs-comment">//3. è·å–å’ŒSocketå…³è”çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        outputStream.write(downloadFileName.getBytes());<br>        <span class="hljs-comment">//è®¾ç½®å†™å…¥ç»“æŸçš„æ ‡å¿—</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-comment">//4. è¯»å–æœåŠ¡ç«¯è¿”å›çš„æ–‡ä»¶(å­—èŠ‚æ•°æ®)</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(socket.getInputStream());<br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br>        <span class="hljs-comment">//5. å¾—åˆ°ä¸€ä¸ªè¾“å‡ºæµï¼Œå‡†å¤‡å°† bytes å†™å…¥åˆ°ç£ç›˜æ–‡ä»¶</span><br>        <span class="hljs-comment">//æ¯”å¦‚ä½ ä¸‹è½½çš„æ˜¯ é«˜å±±æµæ°´ =&gt; ä¸‹è½½çš„å°±æ˜¯ é«˜å±±æµæ°´.mp3</span><br>        <span class="hljs-comment">//    ä½ ä¸‹è½½çš„æ˜¯ éŸ©é¡ºå¹³ =&gt; ä¸‹è½½çš„å°±æ˜¯ æ— å.mp3  æ–‡ä»¶å éŸ©é¡ºå¹³.mp3</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\&quot;</span> + downloadFileName + <span class="hljs-string">&quot;.mp3&quot;</span>;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath));<br>        bos.write(bytes);<br><br>        <span class="hljs-comment">//6. å…³é—­ç›¸å…³çš„èµ„æº</span><br>        bos.close();<br>        bis.close();<br>        outputStream.close();<br>        socket.close();<br><br>        System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ä¸‹è½½å®Œæ¯•ï¼Œæ­£ç¡®é€€å‡º..&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.ByteArrayOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ­¤ç±»ç”¨äºæ¼”ç¤ºå…³äºæµçš„è¯»å†™æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamUtils</span> &#123;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŠŸèƒ½ï¼šå°†è¾“å…¥æµè½¬æ¢æˆbyte[]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] streamToByteArray(InputStream is) <span class="hljs-keyword">throws</span> Exception&#123;<br><span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<span class="hljs-comment">//åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span><br><span class="hljs-type">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br><span class="hljs-type">int</span> len;<br><span class="hljs-keyword">while</span>((len=is.read(b))!=-<span class="hljs-number">1</span>)&#123;<br>bos.write(b, <span class="hljs-number">0</span>, len);<br>&#125;<br><span class="hljs-type">byte</span>[] array = bos.toByteArray();<br>bos.close();<br><span class="hljs-keyword">return</span> array;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŠŸèƒ½ï¼šå°†InputStreamè½¬æ¢æˆString</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">streamToString</span><span class="hljs-params">(InputStream is)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is));<br>StringBuilder builder= <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>String line;<br><span class="hljs-keyword">while</span>((line=reader.readLine())!=<span class="hljs-literal">null</span>)&#123;<br>builder.append(line+<span class="hljs-string">&quot;\r\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">return</span> builder.toString();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><h3 id="åå°„æœºåˆ¶"><a href="#åå°„æœºåˆ¶" class="headerlink" title="åå°„æœºåˆ¶"></a>åå°„æœºåˆ¶</h3><h4 id="åŸºæœ¬ä»‹ç»-9"><a href="#åŸºæœ¬ä»‹ç»-9" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li><p>åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸå€ŸåŠ©äº Reflection API å–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼ˆæ¯”å¦‚æˆå‘˜å˜é‡ï¼Œæ„é€ å™¨ï¼Œæˆå‘˜æ–¹æ³•ç­‰ç­‰ï¼‰ï¼Œå¹¶èƒ½æ“ä½œå¯¹è±¡çš„å±æ€§åŠæ–¹æ³•ã€‚åå°„åœ¨è®¾è®¡æ¨¡å¼å’Œæ¡†æ¶åº•å±‚éƒ½ä¼šç”¨åˆ°</p></li><li><p>åŠ è½½å®Œç±»ä¹‹åï¼Œåœ¨å †ä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ª Class ç±»å‹çš„å¯¹è±¡ï¼ˆä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ª Class å¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ã€‚é€šè¿‡è¿™ä¸ªå¯¹è±¡å¾—åˆ°ç±»çš„ç»“æ„ã€‚</p><p>è¿™ä¸ª Class å¯¹è±¡å°±åƒä¸€é¢é•œå­ï¼Œé€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥å½¢è±¡åœ°ç§°ä¹‹ä¸ºï¼šåå°„</p></li><li><p>æ™®é€šï¼šp å¯¹è±¡  â€“&gt;  ç±»å‹ Personç±»</p></li><li><p>åå°„ï¼šClass å¯¹è±¡  cls  â€”&gt;  ç±»å‹ Classç±»</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åå°„é—®é¢˜çš„å¼•å…¥</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Cat;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflectionQuestion</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException, NoSuchFieldException &#123;<br>        <span class="hljs-comment">//æ ¹æ®é…ç½®æ–‡ä»¶ re.properties æŒ‡å®šä¿¡æ¯, åˆ›å»ºCatå¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•hi</span><br>        <span class="hljs-comment">//å›å¿†</span><br>        <span class="hljs-comment">//ä¼ ç»Ÿçš„æ–¹å¼ new å¯¹è±¡ -ã€‹ è°ƒç”¨æ–¹æ³•</span><br><span class="hljs-comment">//        Cat cat = new Cat();</span><br><span class="hljs-comment">//        cat.hi(); ===&gt; cat.cry() ä¿®æ”¹æºç .</span><br><br>        <span class="hljs-comment">//æˆ‘ä»¬å°è¯•åšä¸€åš -&gt; æ˜ç™½åå°„</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨Properties ç±», å¯ä»¥è¯»å†™é…ç½®æ–‡ä»¶</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\re.properties&quot;</span>));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">classfullpath</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;classfullpath&quot;</span>).toString();<span class="hljs-comment">//&quot;com.hspedu.Cat&quot;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;method&quot;</span>).toString();<span class="hljs-comment">//&quot;hi&quot;</span><br>        System.out.println(<span class="hljs-string">&quot;classfullpath=&quot;</span> + classfullpath);<br>        System.out.println(<span class="hljs-string">&quot;method=&quot;</span> + methodName);<br><br>        <span class="hljs-comment">//2. åˆ›å»ºå¯¹è±¡ , ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œè¡Œä¸é€š =ã€‹ åå°„æœºåˆ¶</span><br>        <span class="hljs-comment">//new classfullpath();</span><br><br>        <span class="hljs-comment">//3. ä½¿ç”¨åå°„æœºåˆ¶è§£å†³</span><br>        <span class="hljs-comment">//(1) åŠ è½½ç±», è¿”å›Classç±»å‹çš„å¯¹è±¡cls</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(classfullpath);<br>        <span class="hljs-comment">//(2) é€šè¿‡ cls å¾—åˆ°ä½ åŠ è½½çš„ç±» com.hspedu.Cat çš„å¯¹è±¡å®ä¾‹</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        System.out.println(<span class="hljs-string">&quot;oçš„è¿è¡Œç±»å‹=&quot;</span> + o.getClass()); <span class="hljs-comment">//è¿è¡Œç±»å‹</span><br>        <span class="hljs-comment">//(3) é€šè¿‡ cls å¾—åˆ°ä½ åŠ è½½çš„ç±» com.hspedu.Cat çš„ methodName&quot;hi&quot;  çš„æ–¹æ³•å¯¹è±¡</span><br>        <span class="hljs-comment">//    å³ï¼šåœ¨åå°„ä¸­ï¼Œå¯ä»¥æŠŠæ–¹æ³•è§†ä¸ºå¯¹è±¡ï¼ˆä¸‡ç‰©çš†å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method1</span> <span class="hljs-operator">=</span> cls.getMethod(methodName);<br>        <span class="hljs-comment">//(4) é€šè¿‡method1 è°ƒç”¨æ–¹æ³•: å³é€šè¿‡æ–¹æ³•å¯¹è±¡æ¥å®ç°è°ƒç”¨æ–¹æ³•</span><br>        System.out.println(<span class="hljs-string">&quot;=============================&quot;</span>);<br>        method1.invoke(o); <span class="hljs-comment">//ä¼ ç»Ÿæ–¹æ³• å¯¹è±¡.æ–¹æ³•() , åå°„æœºåˆ¶ æ–¹æ³•.invoke(å¯¹è±¡)</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åå°„æœºåˆ¶åŸç†ç¤ºæ„å›¾"><a href="#åå°„æœºåˆ¶åŸç†ç¤ºæ„å›¾" class="headerlink" title="åå°„æœºåˆ¶åŸç†ç¤ºæ„å›¾"></a>åå°„æœºåˆ¶åŸç†ç¤ºæ„å›¾</h4> <img src="image-20220924103955134.png" alt="image-20220924103955134" style="zoom:54%;" /><h4 id="åå°„æœºåˆ¶å¯ä»¥å®Œæˆçš„äº‹"><a href="#åå°„æœºåˆ¶å¯ä»¥å®Œæˆçš„äº‹" class="headerlink" title="åå°„æœºåˆ¶å¯ä»¥å®Œæˆçš„äº‹"></a>åå°„æœºåˆ¶å¯ä»¥å®Œæˆçš„äº‹</h4><ul><li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»</li><li>åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡</li><li>åœ¨è¿è¡Œæ—¶å¾—åˆ°ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</li><li>åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</li><li>ç”ŸæˆåŠ¨æ€ä»£ç†</li></ul><h4 id="åå°„ç›¸å…³çš„ä¸»è¦ç±»"><a href="#åå°„ç›¸å…³çš„ä¸»è¦ç±»" class="headerlink" title="åå°„ç›¸å…³çš„ä¸»è¦ç±»"></a>åå°„ç›¸å…³çš„ä¸»è¦ç±»</h4><ul><li>java.lang.Classï¼šä»£è¡¨ä¸€ä¸ªç±»ï¼ŒClasså¯¹è±¡ è¡¨ç¤ºæŸä¸ªç±»åŠ è½½ååœ¨å †ä¸­çš„å¯¹è±¡</li><li>java.lang.reflect.Methodï¼šä»£è¡¨ç±»çš„æ–¹æ³•ï¼ŒMethodå¯¹è±¡ è¡¨ç¤ºæŸä¸ªç±»çš„æ–¹æ³•</li><li>java.lang.reflect.Fieldï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡ï¼ŒFieldå¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æˆå‘˜å˜é‡</li><li>java.lang.reflect.Constructorï¼šä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•ï¼ŒConstructorå¯¹è±¡è¡¨ç¤ºæ„é€ å™¨</li><li>è¿™äº›ç±»åœ¨ åŒ… java.lang.reflect ä¸­</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reflection01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//1. ä½¿ç”¨Properties ç±», å¯ä»¥è¯»å†™é…ç½®æ–‡ä»¶</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\re.properties&quot;</span>));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">classfullpath</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;classfullpath&quot;</span>).toString();<span class="hljs-comment">//&quot;com.hspedu.Cat&quot;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;method&quot;</span>).toString();<span class="hljs-comment">//&quot;hi&quot;</span><br><br>        <span class="hljs-comment">//2. ä½¿ç”¨åå°„æœºåˆ¶è§£å†³</span><br>        <span class="hljs-comment">//(1) åŠ è½½ç±», è¿”å›Classç±»å‹çš„å¯¹è±¡cls</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(classfullpath);<br>        <span class="hljs-comment">//(2) é€šè¿‡ cls å¾—åˆ°ä½ åŠ è½½çš„ç±» com.hspedu.Cat çš„å¯¹è±¡å®ä¾‹</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        System.out.println(<span class="hljs-string">&quot;oçš„è¿è¡Œç±»å‹=&quot;</span> + o.getClass()); <span class="hljs-comment">//è¿è¡Œç±»å‹</span><br>        <span class="hljs-comment">//(3) é€šè¿‡ cls å¾—åˆ°ä½ åŠ è½½çš„ç±» com.hspedu.Cat çš„ methodName&quot;hi&quot;  çš„æ–¹æ³•å¯¹è±¡</span><br>        <span class="hljs-comment">//    å³ï¼šåœ¨åå°„ä¸­ï¼Œå¯ä»¥æŠŠæ–¹æ³•è§†ä¸ºå¯¹è±¡ï¼ˆä¸‡ç‰©çš†å¯¹è±¡ï¼‰</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method1</span> <span class="hljs-operator">=</span> cls.getMethod(methodName);<br>        <span class="hljs-comment">//(4) é€šè¿‡method1 è°ƒç”¨æ–¹æ³•: å³é€šè¿‡æ–¹æ³•å¯¹è±¡æ¥å®ç°è°ƒç”¨æ–¹æ³•</span><br>        System.out.println(<span class="hljs-string">&quot;=============================&quot;</span>);<br>        method1.invoke(o); <span class="hljs-comment">//ä¼ ç»Ÿæ–¹æ³• å¯¹è±¡.æ–¹æ³•() , åå°„æœºåˆ¶ æ–¹æ³•.invoke(å¯¹è±¡)</span><br><br>        <span class="hljs-comment">//java.lang.reflect.Field: ä»£è¡¨ç±»çš„æˆå‘˜å˜é‡, Fieldå¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æˆå‘˜å˜é‡</span><br>        <span class="hljs-comment">//å¾—åˆ°nameå­—æ®µ</span><br>        <span class="hljs-comment">//æ³¨æ„ï¼šgetFieldä¸èƒ½å¾—åˆ°ç§æœ‰çš„å±æ€§</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">nameField</span> <span class="hljs-operator">=</span> cls.getField(<span class="hljs-string">&quot;age&quot;</span>); <span class="hljs-comment">//</span><br>        <span class="hljs-comment">// ä¼ ç»Ÿå†™æ³•ï¼šå¯¹è±¡.æˆå‘˜å˜é‡ ï¼› åå°„ï¼šæˆå‘˜å˜é‡å¯¹è±¡.get(å¯¹è±¡)</span><br>        System.out.println(nameField.get(o));<br><br>        <span class="hljs-comment">//java.lang.reflect.Constructor: ä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•, Constructorå¯¹è±¡è¡¨ç¤ºæ„é€ å™¨</span><br>        <span class="hljs-comment">//åœ¨()ä¸­å¯ä»¥æŒ‡å®šæ„é€ å™¨å‚æ•°ç±»å‹, ä¸‹é¢è¿”å›çš„æ˜¯æ— å‚æ„é€ å™¨</span><br>        <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor</span> <span class="hljs-operator">=</span> cls.getConstructor();<br>        System.out.println(constructor);<span class="hljs-comment">//Cat()</span><br>        <span class="hljs-comment">//ä¸‹é¢è¿”å›çš„æ˜¯å¸¦æœ‰å‚æ•°(String name)çš„æ„é€ å™¨</span><br>        <span class="hljs-comment">//è¿™é‡Œä¼ å…¥çš„ String.class å°±æ˜¯Stringç±»çš„Classå¯¹è±¡</span><br>        <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor2</span> <span class="hljs-operator">=</span> cls.getConstructor(String.class);<br>        System.out.println(constructor2);<span class="hljs-comment">//Cat(String name)</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹</h4><ul><li>ä¼˜ç‚¹ï¼šå¯ä»¥åŠ¨æ€çš„åˆ›å»ºå’Œä½¿ç”¨å¯¹è±¡ï¼ˆæ¡†æ¶åº•å±‚æ ¸å¿ƒï¼‰ï¼Œä½¿ç”¨çµæ´»ï¼Œæ²¡æœ‰åå°„æœºåˆ¶ï¼Œæ¡†æ¶æŠ€æœ¯å°±å¤±å»åº•å±‚æ”¯æ’‘</li><li>ç¼ºç‚¹ï¼šä½¿ç”¨åå°„åŸºæœ¬æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹æ‰§è¡Œé€Ÿåº¦æœ‰å½±å“</li></ul><h4 id="åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥"><a href="#åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥" class="headerlink" title="åå°„è°ƒç”¨ä¼˜åŒ– - å…³é—­è®¿é—®æ£€æŸ¥"></a>åå°„è°ƒç”¨ä¼˜åŒ– - å…³é—­è®¿é—®æ£€æŸ¥</h4><ul><li><p>Method å’Œ Fieldã€Constructorå¯¹è±¡éƒ½æœ‰ setAccessible() æ–¹æ³•</p></li><li><p>setAccessible ä½œç”¨æ˜¯å¯åŠ¨å’Œå¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³</p></li><li><p>å‚æ•°å€¼ä¸º true è¡¨ç¤º åå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶å»æ ¡è®¿é—®æ£€æŸ¥ï¼Œæé«˜åå°„çš„æ•ˆç‡ã€‚</p><p>å‚æ•°å€¼ä¸º false è¡¨ç¤º åå°„çš„å¯¹è±¡æ‰§è¡Œè®¿é—®æ£€æŸ¥</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æµ‹è¯•åå°„è°ƒç”¨çš„æ€§èƒ½ï¼Œå’Œä¼˜åŒ–æ–¹æ¡ˆ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Cat;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reflection02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123;<br>        <span class="hljs-comment">//Field</span><br>        <span class="hljs-comment">//Method</span><br>        <span class="hljs-comment">//Constructor</span><br>        m1();<br>        m2();<br>        m3();<br>    &#125;<br><br>    <span class="hljs-comment">//ä¼ ç»Ÿæ–¹æ³•æ¥è°ƒç”¨hi</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">900000000</span>; i++) &#123;<br>            cat.hi();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;m1() è€—æ—¶=&quot;</span> + (end - start));<br>    &#125;<br><br>    <span class="hljs-comment">//åå°„æœºåˆ¶è°ƒç”¨æ–¹æ³•hi</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;<br><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">hi</span> <span class="hljs-operator">=</span> cls.getMethod(<span class="hljs-string">&quot;hi&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">900000000</span>; i++) &#123;<br>            hi.invoke(o);<span class="hljs-comment">//åå°„è°ƒç”¨æ–¹æ³•</span><br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;m2() è€—æ—¶=&quot;</span> + (end - start));<br>    &#125;<br><br>    <span class="hljs-comment">//åå°„è°ƒç”¨ä¼˜åŒ– + å…³é—­è®¿é—®æ£€æŸ¥</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;<br>        <br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">hi</span> <span class="hljs-operator">=</span> cls.getMethod(<span class="hljs-string">&quot;hi&quot;</span>);<br>        hi.setAccessible(<span class="hljs-literal">true</span>);<span class="hljs-comment">//åœ¨åå°„è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå–æ¶ˆè®¿é—®æ£€æŸ¥</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">900000000</span>; i++) &#123;<br>            hi.invoke(o);<span class="hljs-comment">//åå°„è°ƒç”¨æ–¹æ³•</span><br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;m3() è€—æ—¶=&quot;</span> + (end - start));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Class-ç±»"><a href="#Class-ç±»" class="headerlink" title="Class ç±»"></a>Class ç±»</h3><h4 id="åŸºæœ¬ä»‹ç»-10"><a href="#åŸºæœ¬ä»‹ç»-10" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4> <img src="image-20220924091230962.png" alt="image-20220924091230962" style="zoom:46%;" /><ul><li>Class ä¹Ÿæ˜¯ç±»ï¼Œå› æ­¤ä¹Ÿç»§æ‰¿ Object ç±»</li><li>Class ç±»å¯¹è±¡ä¸æ˜¯ new å‡ºæ¥çš„ï¼Œè€Œæ˜¯ç³»ç»Ÿåˆ›å»ºçš„</li><li>å¯¹äºæŸä¸ªç±»çš„ Class ç±»å¯¹è±¡ï¼Œåœ¨å†…å­˜ä¸­åªèƒ½æœ‰ä¸€ä»½ï¼Œå› ä¸ºç±»åªåŠ è½½ä¸€æ¬¡</li><li>æ¯ä¸ªç±»çš„å®ä¾‹éƒ½ä¼šè®°å¾—è‡ªå·±æ˜¯ç”±å“ªä¸ª Class å®ä¾‹æ‰€ç”Ÿäº§çš„</li><li>é€šè¿‡ Class å¯¹è±¡å¯ä»¥å¾—åˆ°ä¸€ä¸ªç±»çš„å®Œæ•´ç»“æ„ï¼Œé€šè¿‡ä¸€ç³»åˆ— API</li><li>Class å¯¹è±¡æ˜¯å­˜æ”¾åœ¨å †ä¸­çš„</li><li>ç±»çš„å­—èŠ‚ç äºŒè¿›åˆ¶æ•°æ®ï¼Œæ˜¯å­˜æ”¾åœ¨æ–¹æ³•åŒºçš„ï¼Œæœ‰çš„åœ°æ–¹ç§°ä¸ºç±»çš„å…ƒæ•°æ®ï¼ˆåŒ…æ‹¬ æ–¹æ³•ä»£ç ã€å˜é‡åã€æ–¹æ³•åã€è®¿é—®æƒé™ç­‰ç­‰ï¼‰[<a href="https://www.zhihu.com/question/38496907]">https://www.zhihu.com/question/38496907]</a></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯¹Classç±»ç‰¹ç‚¹çš„æ¢³ç†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Cat;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Class01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;<br>        <span class="hljs-comment">//çœ‹çœ‹Classç±»å›¾</span><br>        <span class="hljs-comment">//1. Classä¹Ÿæ˜¯ç±»ï¼Œå› æ­¤ä¹Ÿç»§æ‰¿Objectç±»</span><br>        <span class="hljs-comment">//Class</span><br>        <span class="hljs-comment">//2. Classç±»å¯¹è±¡ä¸æ˜¯newå‡ºæ¥çš„ï¼Œè€Œæ˜¯ç³»ç»Ÿåˆ›å»ºçš„</span><br>        <span class="hljs-comment">//(1) ä¼ ç»Ÿnewå¯¹è±¡</span><br>        <span class="hljs-comment">/*  ClassLoaderç±»</span><br><span class="hljs-comment">            public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123;</span><br><span class="hljs-comment">                return loadClass(name, false);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br><span class="hljs-comment">//        Cat cat = new Cat();</span><br>        <span class="hljs-comment">//(2) åå°„æ–¹å¼, åˆšæ‰æ²¡æœ‰debugåˆ° ClassLoaderç±»çš„ loadClass,</span><br>        <span class="hljs-comment">//    åŸå› æ˜¯ï¼Œæ²¡æœ‰æ³¨é”€Cat cat = new Cat();</span><br>        <span class="hljs-comment">//    è€Œç±»åªä¼šåŠ è½½ä¸€æ¬¡</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            ClassLoaderç±», ä»ç„¶æ˜¯é€šè¿‡ ClassLoaderç±»åŠ è½½Catç±»çš„ Classå¯¹è±¡</span><br><span class="hljs-comment">            public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123;</span><br><span class="hljs-comment">                return loadClass(name, false);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls1</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br><br>        <span class="hljs-comment">//3. å¯¹äºæŸä¸ªç±»çš„Classç±»å¯¹è±¡ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œå› ä¸ºç±»åªåŠ è½½ä¸€æ¬¡</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls2</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br>        <span class="hljs-comment">// cls1 ä¸ cls2 æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br>        System.out.println(cls1.hashCode());<br>        System.out.println(cls2.hashCode());<br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls3</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Dog&quot;</span>);<br>        System.out.println(cls3.hashCode());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Class-ç±»çš„å¸¸ç”¨æ–¹æ³•"><a href="#Class-ç±»çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Class ç±»çš„å¸¸ç”¨æ–¹æ³•"></a>Class ç±»çš„å¸¸ç”¨æ–¹æ³•</h4> <img src="image-20220924093824530.png" alt="image-20220924093824530" style="zoom:60%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºClassç±»çš„å¸¸ç”¨æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Car;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Class02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">classAllPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;com.hspedu.Car&quot;</span>;<br>        <span class="hljs-comment">//1 . è·å–åˆ°Carç±» å¯¹åº”çš„ Classå¯¹è±¡</span><br>        <span class="hljs-comment">//    &lt;?&gt; è¡¨ç¤ºä¸ç¡®å®šçš„Javaç±»å‹</span><br>        Class&lt;?&gt; cls = Class.forName(classAllPath);<br>        <span class="hljs-comment">//2. è¾“å‡ºcls</span><br>        <span class="hljs-comment">//æ˜¾ç¤ºclså¯¹è±¡, æ˜¯å“ªä¸ªç±»çš„Classå¯¹è±¡ï¼š com.hspedu.Car</span><br>        System.out.println(cls);<br>        <span class="hljs-comment">//è¾“å‡ºclsè¿è¡Œç±»å‹ï¼š java.lang.Class</span><br>        System.out.println(cls.getClass());<br>        <span class="hljs-comment">//3. å¾—åˆ°åŒ…å</span><br>        System.out.println(cls.getPackage().getName());<span class="hljs-comment">//åŒ…å</span><br>        <span class="hljs-comment">//4. å¾—åˆ°å…¨ç±»å</span><br>        System.out.println(cls.getName());<br>        <span class="hljs-comment">//5. é€šè¿‡clsåˆ›å»ºå¯¹è±¡å®ä¾‹</span><br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> (Car) cls.newInstance();<br>        System.out.println(car);<span class="hljs-comment">//car.toString()</span><br>        <span class="hljs-comment">//6. é€šè¿‡åå°„è·å–å±æ€§ brand</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">brand</span> <span class="hljs-operator">=</span> cls.getField(<span class="hljs-string">&quot;brand&quot;</span>);<br>        System.out.println(brand.get(car));<span class="hljs-comment">//å®é©¬</span><br>        <span class="hljs-comment">//7. é€šè¿‡åå°„ç»™å±æ€§èµ‹å€¼</span><br>        brand.set(car, <span class="hljs-string">&quot;å¥”é©°&quot;</span>);<br>        System.out.println(brand.get(car));<span class="hljs-comment">//å¥”é©°</span><br>        <span class="hljs-comment">//8 æˆ‘å¸Œæœ›å¤§å®¶å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„å±æ€§(å­—æ®µ)</span><br>        System.out.println(<span class="hljs-string">&quot;=======æ‰€æœ‰çš„å­—æ®µå±æ€§====&quot;</span>);<br>        Field[] fields = cls.getFields();<br>        <span class="hljs-keyword">for</span> (Field f : fields) &#123;<br>            System.out.println(f.getName());<span class="hljs-comment">//åç§°</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è·å–-Class-ç±»å¯¹è±¡"><a href="#è·å–-Class-ç±»å¯¹è±¡" class="headerlink" title="è·å– Class ç±»å¯¹è±¡"></a>è·å– Class ç±»å¯¹è±¡</h3><ul><li><p>å‰æï¼šå·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»åï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œå¯é€šè¿‡ Class ç±»çš„é™æ€æ–¹æ³• forName() è·å–ï¼Œå¯èƒ½æŠ›å‡º ClassNotFoundExceptionï¼Œ</p><p>å®ä¾‹ï¼šClass cls1 &#x3D; Class.forName(â€œjava.lang.Catâ€); </p><p>åº”ç”¨åœºæ™¯ï¼šå¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œè¯»å–ç±»å…¨è·¯å¾„ï¼ŒåŠ è½½ç±»</p></li><li><p>å‰æï¼šè‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„ class è·å–ï¼Œè¯¥æ–¹å¼ æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜</p><p>å®ä¾‹ï¼šClass cls2 &#x3D; Cat.class;</p><p>åº”ç”¨åœºæ™¯ï¼šå¤šç”¨äºå‚æ•°ä¼ é€’ï¼Œæ¯”å¦‚åå°„å¾—åˆ°å¯¹åº”æ„é€ å™¨å¯¹è±¡</p></li><li><p>å‰æï¼šå·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„ getClass() æ–¹æ³•è·å– Class å¯¹è±¡</p><p>å®ä¾‹ï¼šClass cla3 &#x3D; å¯¹è±¡.getClass();  &#x2F;&#x2F;è¿è¡Œç±»å‹</p><p>åº”ç”¨åœºæ™¯ï¼šé€šè¿‡åˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œè·å– Class å¯¹è±¡</p></li><li><p>å…¶å®ƒæ–¹å¼ï¼šï¼ˆç±»åŠ è½½å™¨ï¼‰</p><p>ClassLoader cl &#x3D; å¯¹è±¡.getClass().getClassLoader();</p><p>Class cla4 &#x3D; cl.loadClass(â€œç±»çš„å…¨ç±»åâ€);</p></li><li><p>åŸºæœ¬æ•°æ®ï¼ˆint, char, boolean, float, double, byte, long, shortï¼‰æŒ‰å¦‚ä¸‹æ–¹å¼å¾—åˆ° Class ç±»å¯¹è±¡</p><p>Class cls &#x3D; åŸºæœ¬æ•°æ®ç±»å‹.class</p></li><li><p>åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼Œå¯ä»¥é€šè¿‡ .TYPE å¾—åˆ° Class ç±»å¯¹è±¡</p><p>Class cls &#x3D; åŒ…è£…ç±».TYPE</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºå¾—åˆ°Classå¯¹è±¡çš„å„ç§æ–¹å¼(6)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Car;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetClass_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;<br>        <span class="hljs-comment">//1.Class.forName  ,  å¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œè¯»å–ç±»å…¨è·¯å¾„ï¼ŒåŠ è½½ç±»</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">classAllPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;com.hspedu.Car&quot;</span>; <span class="hljs-comment">//é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶è·å–</span><br>        Class&lt;?&gt; cls1 = Class.forName(classAllPath);<br>        System.out.println(cls1);<br><br>        <span class="hljs-comment">//2. ç±»å.class , å¤šç”¨äºå‚æ•°ä¼ é€’</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls2</span> <span class="hljs-operator">=</span> Car.class;<br>        System.out.println(cls2);<br><br>        <span class="hljs-comment">//3. å¯¹è±¡.getClass() , åº”ç”¨åœºæ™¯ï¼Œå·²ç»æœ‰å¯¹è±¡å®ä¾‹æ—¶</span><br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls3</span> <span class="hljs-operator">=</span> car.getClass();<br>        System.out.println(cls3);<br><br>        <span class="hljs-comment">//4. é€šè¿‡ç±»åŠ è½½å™¨ã€4ç§ã€‘æ¥è·å–åˆ°ç±»çš„Classå¯¹è±¡ ï¼ˆè¿™ç§æ–¹å¼çš„ä¼˜ç‚¹ï¼Ÿï¼‰</span><br>        <span class="hljs-comment">//(1)å…ˆå¾—åˆ°ç±»åŠ è½½å™¨ car</span><br>        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> car.getClass().getClassLoader();<br>        <span class="hljs-comment">//(2)é€šè¿‡ç±»åŠ è½½å™¨å¾—åˆ°Classå¯¹è±¡</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls4</span> <span class="hljs-operator">=</span> classLoader.loadClass(classAllPath);<br>        System.out.println(cls4);<br><br>        <span class="hljs-comment">//cls1 , cls2 , cls3 , cls4 å…¶å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br>        System.out.println(cls1.hashCode());<br>        System.out.println(cls2.hashCode());<br>        System.out.println(cls3.hashCode());<br>        System.out.println(cls4.hashCode());<br><br>        <span class="hljs-comment">//5. åŸºæœ¬æ•°æ®(int, char,boolean,float,double,byte,long,short)æŒ‰å¦‚ä¸‹æ–¹å¼å¾—åˆ°Classç±»å¯¹è±¡</span><br>        Class&lt;Integer&gt; integerClass = <span class="hljs-type">int</span>.class;<br>        Class&lt;Character&gt; characterClass = <span class="hljs-type">char</span>.class;<br>        Class&lt;Boolean&gt; booleanClass = <span class="hljs-type">boolean</span>.class;<br>        System.out.println(integerClass);<span class="hljs-comment">//int è‡ªåŠ¨æ‹†ç®±</span><br><br>        <span class="hljs-comment">//6. åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼Œå¯ä»¥é€šè¿‡ .TYPE å¾—åˆ°Classç±»å¯¹è±¡</span><br>        Class&lt;Integer&gt; type1 = Integer.TYPE;<br>        Class&lt;Character&gt; type2 = Character.TYPE; <span class="hljs-comment">//å…¶å®ƒåŒ…è£…ç±»BOOLEAN, DOUBLE, LONG,BYTEç­‰å¾…</span><br>        System.out.println(type1);<span class="hljs-comment">//int è‡ªåŠ¨æ‹†ç®±</span><br>        <span class="hljs-comment">// è¿™ä¸¤ç§æ–¹å¼å¾—åˆ°çš„æ—¶åŒä¸€ä¸ªå¯¹è±¡</span><br>        System.out.println(integerClass.hashCode());<span class="hljs-comment">//</span><br>        System.out.println(type1.hashCode());<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å“ªäº›ç±»å‹æœ‰-Class-å¯¹è±¡"><a href="#å“ªäº›ç±»å‹æœ‰-Class-å¯¹è±¡" class="headerlink" title="å“ªäº›ç±»å‹æœ‰ Class å¯¹è±¡"></a>å“ªäº›ç±»å‹æœ‰ Class å¯¹è±¡</h3><ol><li><p>å¤–éƒ¨ç±»ï¼Œæˆå‘˜å†…éƒ¨ç±»ï¼Œé™æ€å†…éƒ¨ç±»ï¼Œå±€éƒ¨å†…éƒ¨ç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»  </p></li><li><p>interface:æ¥å£</p></li><li><p>æ•°ç»„  </p></li><li><p>enum:æšä¸¾  </p></li><li><p>annotation:æ³¨è§£  </p></li><li><p>åŸºæœ¬æ•°æ®ç±»å‹  </p></li><li><p>void</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºå“ªäº›ç±»å‹æœ‰Classå¯¹è±¡</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.Serializable;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AllTypeClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        Class&lt;String&gt; cls1 = String.class;<span class="hljs-comment">//å¤–éƒ¨ç±»</span><br>        Class&lt;Serializable&gt; cls2 = Serializable.class;<span class="hljs-comment">//æ¥å£</span><br>        Class&lt;Integer[]&gt; cls3 = Integer[].class;<span class="hljs-comment">//æ•°ç»„</span><br>        Class&lt;<span class="hljs-type">float</span>[][]&gt; cls4 = <span class="hljs-type">float</span>[][].class;<span class="hljs-comment">//äºŒç»´æ•°ç»„</span><br>        Class&lt;Deprecated&gt; cls5 = Deprecated.class;<span class="hljs-comment">//æ³¨è§£</span><br>        Class&lt;Thread.State&gt; cls6 = Thread.State.class;<span class="hljs-comment">//æšä¸¾</span><br>        Class&lt;Long&gt; cls7 = <span class="hljs-type">long</span>.class;<span class="hljs-comment">//åŸºæœ¬æ•°æ®ç±»å‹</span><br>        Class&lt;Void&gt; cls8 = <span class="hljs-keyword">void</span>.class;<span class="hljs-comment">//voidæ•°æ®ç±»å‹</span><br>        Class&lt;Class&gt; cls9 = Class.class;<span class="hljs-comment">//Classä¹Ÿæ˜¯å¤–éƒ¨ç±»</span><br><br>        System.out.println(cls1);<br>        System.out.println(cls2);<br>        System.out.println(cls3);<br>        System.out.println(cls4);<br>        System.out.println(cls5);<br>        System.out.println(cls6);<br>        System.out.println(cls7);<br>        System.out.println(cls8);<br>        System.out.println(cls9);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç±»åŠ è½½"><a href="#ç±»åŠ è½½" class="headerlink" title="ç±»åŠ è½½"></a>ç±»åŠ è½½</h3><h4 id="åŸºæœ¬è¯´æ˜-1"><a href="#åŸºæœ¬è¯´æ˜-1" class="headerlink" title="åŸºæœ¬è¯´æ˜"></a>åŸºæœ¬è¯´æ˜</h4><p>åå°„æœºåˆ¶æ˜¯ Java å®ç°åŠ¨æ€è¯­è¨€çš„å…³é”®ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åå°„å®ç°ç±»åŠ¨æ€åŠ è½½</p><ul><li>é™æ€åŠ è½½ï¼šç¼–è¯‘æ—¶åŠ è½½ç›¸å…³çš„ç±»ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ¥é”™ï¼Œä¾èµ–æ€§å¤ªå¼º</li><li>åŠ¨æ€åŠ è½½ï¼šè¿è¡Œæ—¶åŠ è½½éœ€è¦çš„ç±»ï¼Œå¦‚æœå®é™…è¿è¡Œæ—¶æ²¡ç”¨åˆ°è¯¥ç±»ï¼Œåˆ™å³ä½¿ä¸å­˜åœ¨è¯¥ç±»ä¹Ÿä¸æŠ¥é”™ï¼Œé™ä½äº†ä¾èµ–æ€§</li></ul><h4 id="ç±»åŠ è½½æ—¶æœº"><a href="#ç±»åŠ è½½æ—¶æœº" class="headerlink" title="ç±»åŠ è½½æ—¶æœº"></a>ç±»åŠ è½½æ—¶æœº</h4><ul><li>å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼ˆnewï¼‰  &#x2F;&#x2F;é™æ€åŠ è½½</li><li>å½“å­ç±»è¢«åŠ è½½æ—¶ï¼Œçˆ¶ç±»ä¹ŸåŠ è½½  &#x2F;&#x2F;é™æ€åŠ è½½</li><li>è°ƒç”¨ç±»ä¸­çš„é™æ€æˆå‘˜æ—¶  &#x2F;&#x2F;é™æ€åŠ è½½</li><li>é€šè¿‡åå°„  &#x2F;&#x2F;åŠ¨æ€åŠ è½½     ä¾‹ï¼šClass.forName(â€œcom.test.Catâ€);</li></ul><h4 id="ç±»åŠ è½½è¿‡ç¨‹å›¾"><a href="#ç±»åŠ è½½è¿‡ç¨‹å›¾" class="headerlink" title="ç±»åŠ è½½è¿‡ç¨‹å›¾"></a>ç±»åŠ è½½è¿‡ç¨‹å›¾</h4> <img src="image-20220924113503012.png" alt="image-20220924113503012" style="zoom: 78%;" /><h4 id="åŠ è½½é˜¶æ®µ"><a href="#åŠ è½½é˜¶æ®µ" class="headerlink" title="åŠ è½½é˜¶æ®µ"></a>åŠ è½½é˜¶æ®µ</h4><p>JVMåœ¨è¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„æ˜¯å°†å­—èŠ‚ç ä»ä¸åŒçš„æ•°æ®æºï¼ˆå¯èƒ½æ˜¯classæ–‡ä»¶ã€ä¹Ÿå¯èƒ½æ˜¯ jaråŒ…ï¼Œç”šè‡³ç½‘ç»œï¼‰è½¬åŒ–ä¸º<strong>äºŒè¿›åˆ¶å­—èŠ‚æµ</strong>åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„  java.lang.Class å¯¹è±¡</p><h4 id="è¿æ¥é˜¶æ®µ-éªŒè¯"><a href="#è¿æ¥é˜¶æ®µ-éªŒè¯" class="headerlink" title="è¿æ¥é˜¶æ®µ-éªŒè¯"></a>è¿æ¥é˜¶æ®µ-éªŒè¯</h4><ol><li><p>ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚</p></li><li><p>åŒ…æ‹¬ï¼šæ–‡ä»¶æ ¼å¼éªŒè¯ï¼ˆæ˜¯å¦ä»¥é­”æ•° oxcafebabe å¼€å¤´ï¼‰ã€å…ƒæ•°æ®éªŒè¯ã€å­—èŠ‚ç éªŒè¯å’Œç¬¦å·å¼•ç”¨éªŒè¯ [ä¸¾ä¾‹è¯´æ˜]        </p></li><li><p>å¯ä»¥è€ƒè™‘ä½¿ç”¨ -Xverify:none å‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´ã€‚</p></li></ol><h4 id="è¿æ¥é˜¶æ®µ-å‡†å¤‡"><a href="#è¿æ¥é˜¶æ®µ-å‡†å¤‡" class="headerlink" title="è¿æ¥é˜¶æ®µ-å‡†å¤‡"></a>è¿æ¥é˜¶æ®µ-å‡†å¤‡</h4><p>JVM ä¼šåœ¨è¯¥é˜¶æ®µå¯¹é™æ€å˜é‡ï¼Œåˆ†é…å†…å­˜å¹¶é»˜è®¤åˆå§‹åŒ–ï¼ˆå¯¹åº”æ•°æ®ç±»å‹çš„é»˜è®¤åˆå§‹å€¼ï¼Œå¦‚ 0ã€0Lã€nullã€falseç­‰ï¼‰ã€‚è¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¯´æ˜ç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µ-å‡†å¤‡</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-comment">//å±æ€§-æˆå‘˜å˜é‡-å­—æ®µ</span><br>    <span class="hljs-comment">//è€éŸ©åˆ†æç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µ-å‡†å¤‡ å±æ€§æ˜¯å¦‚ä½•å¤„ç†</span><br>    <span class="hljs-comment">//1. n1 æ˜¯å®ä¾‹å±æ€§, ä¸æ˜¯é™æ€å˜é‡ï¼Œå› æ­¤åœ¨å‡†å¤‡é˜¶æ®µï¼Œæ˜¯ä¸ä¼šåˆ†é…å†…å­˜</span><br>    <span class="hljs-comment">//2. n2 æ˜¯é™æ€å˜é‡ï¼Œåˆ†é…å†…å­˜ n2 æ˜¯é»˜è®¤åˆå§‹åŒ–ä¸º 0 , è€Œä¸æ˜¯ 20ï¼ˆåˆ°åˆå§‹åŒ–é˜¶æ®µæ‰ä¼šåˆå§‹åŒ–ä¸º20ï¼‰</span><br>    <span class="hljs-comment">//3. n3 æ˜¯ static final, æ˜¯å¸¸é‡, å®ƒå’Œé™æ€å˜é‡ä¸ä¸€æ ·, å› ä¸ºä¸€æ—¦èµ‹å€¼å°±ä¸å˜ n3 = 30</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¿æ¥é˜¶æ®µ-è§£æ"><a href="#è¿æ¥é˜¶æ®µ-è§£æ" class="headerlink" title="è¿æ¥é˜¶æ®µ-è§£æ"></a>è¿æ¥é˜¶æ®µ-è§£æ</h4><p>è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ ç¬¦å·å¼•ç”¨ æ›¿æ¢ä¸º ç›´æ¥å¼•ç”¨ï¼ˆå†…å­˜åœ°å€ï¼‰çš„è¿‡ç¨‹ã€‚</p><h4 id="åˆå§‹åŒ–ï¼ˆInitialization"><a href="#åˆå§‹åŒ–ï¼ˆInitialization" class="headerlink" title="åˆå§‹åŒ–ï¼ˆInitialization)"></a>åˆå§‹åŒ–ï¼ˆInitialization)</h4><ul><li>åˆ°äº†åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„ Java ç¨‹åºä»£ç ï¼Œæ­¤é˜¶æ®µæ˜¯æ‰§è¡Œ&lt;clinit&gt;() æ–¹æ³•çš„è¿‡ç¨‹</li><li>&lt;clinit&gt;() æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºï¼Œä¸€æ¬¡è‡ªåŠ¨æ”¶é›†ç±»ä¸­æ‰€æœ‰çš„é™æ€å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥ï¼Œå¹¶è¿›è¡Œåˆå¹¶</li><li>è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„ &lt;clinit&gt;() æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åœ°åŠ é”ã€åŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„ &lt;clinit&gt;() æ–¹æ³•ï¼Œå…¶å®ƒçº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ &lt;clinit&gt;() æ–¹æ³•å®Œæ¯•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºç±»åŠ è½½-åˆå§‹åŒ–é˜¶æ®µ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassLoad03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;<br>        <span class="hljs-comment">//åˆ†æ</span><br>        <span class="hljs-comment">//1. åŠ è½½Bç±»ï¼Œå¹¶ç”Ÿæˆ Bçš„classå¯¹è±¡</span><br>        <span class="hljs-comment">//2. è¿æ¥é˜¶æ®µ num = 0</span><br>        <span class="hljs-comment">//3. åˆå§‹åŒ–é˜¶æ®µ</span><br>        <span class="hljs-comment">//   ä¾æ¬¡è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰é™æ€å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥,å¹¶åˆå¹¶</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            clinit() &#123;</span><br><span class="hljs-comment">                System.out.println(&quot;B é™æ€ä»£ç å—è¢«æ‰§è¡Œ&quot;);</span><br><span class="hljs-comment">                //num = 300;</span><br><span class="hljs-comment">                num = 100;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            åˆå¹¶: num = 100</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">//new B();//ç±»åŠ è½½</span><br>        <span class="hljs-comment">//System.out.println(B.num);//100, å¦‚æœç›´æ¥ä½¿ç”¨ç±»çš„é™æ€å±æ€§ï¼Œä¹Ÿä¼šå¯¼è‡´ç±»çš„åŠ è½½</span><br><br>        <span class="hljs-comment">//çœ‹çœ‹åŠ è½½ç±»çš„æ—¶å€™ï¼Œæ˜¯æœ‰åŒæ­¥æœºåˆ¶æ§åˆ¶</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        protected Class&lt;?&gt; loadClass(String name, boolean resolve)</span><br><span class="hljs-comment">        throws ClassNotFoundException</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            //æ­£å› ä¸ºæœ‰è¿™ä¸ªæœºåˆ¶ï¼Œæ‰èƒ½ä¿è¯æŸä¸ªç±»åœ¨å†…å­˜ä¸­, åªæœ‰ä¸€ä»½Classå¯¹è±¡</span><br><span class="hljs-comment">            synchronized (getClassLoadingLock(name)) &#123;</span><br><span class="hljs-comment">            //....</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B é™æ€ä»£ç å—è¢«æ‰§è¡Œ&quot;</span>);<br>        num = <span class="hljs-number">300</span>;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B() æ„é€ å™¨è¢«æ‰§è¡Œ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åå°„è·å–ç±»çš„ç»“æ„"><a href="#åå°„è·å–ç±»çš„ç»“æ„" class="headerlink" title="åå°„è·å–ç±»çš„ç»“æ„"></a>åå°„è·å–ç±»çš„ç»“æ„</h3><h4 id="ä¸€-java-lang-Class-ç±»"><a href="#ä¸€-java-lang-Class-ç±»" class="headerlink" title="ä¸€: java.lang.Class ç±»"></a>ä¸€: java.lang.Class ç±»</h4><ul><li>getNameï¼šè·å–å…¨ç±»å</li><li>getSimpleNameï¼šè·å–ç®€å•ç±»å</li><li>getFieldsï¼šè·å–æ‰€æœ‰ public ä¿®é¥°çš„å±æ€§ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</li><li>getDeclaredFieldsï¼šè·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§</li><li>getMethodsï¼šè·å–æ‰€æœ‰ public ä¿®é¥°çš„æ–¹æ³•ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</li><li>getDeclaredMethodsï¼šè·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•</li><li>getConstructorsï¼šè·å–æœ¬ç±»æ‰€æœ‰ public ä¿®é¥°çš„æ„é€ å™¨</li><li>getDeclaredConstructorsï¼šè·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨</li><li>getPackageï¼šä»¥ Package å½¢å¼è¿”å›åŒ…ä¿¡æ¯</li><li>getSuperClassï¼šä»¥ Class å½¢å¼è¿”å›çˆ¶ç±»ä¿¡æ¯</li><li>getlnterfacesï¼šä»¥ Class[] å½¢å¼è¿”å›æ¥å£ä¿¡æ¯</li><li>getAnnotationsï¼šä»¥ Annotation[] å½¢å¼è¿”å›æ³¨è§£ä¿¡æ¯</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ç¬¬ä¸€ç»„æ–¹æ³•API</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">api_01</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;<br><br>    <span class="hljs-comment">//å¾—åˆ°Classå¯¹è±¡</span><br>    Class&lt;?&gt; personCls = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Person&quot;</span>);<br>    <span class="hljs-comment">//getName:è·å–å…¨ç±»å</span><br>    System.out.println(personCls.getName());<span class="hljs-comment">//com.hspedu.reflection.Person</span><br>    <span class="hljs-comment">//getSimpleName:è·å–ç®€å•ç±»å</span><br>    System.out.println(personCls.getSimpleName());<span class="hljs-comment">//Person</span><br>    <span class="hljs-comment">//getFields:è·å–æ‰€æœ‰publicä¿®é¥°çš„å±æ€§ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</span><br>    Field[] fields = personCls.getFields();<br>    <span class="hljs-keyword">for</span> (Field field : fields) &#123;<span class="hljs-comment">//å¢å¼ºfor</span><br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„publicå±æ€§=&quot;</span> + field.getName());<br>    &#125;<br>    <span class="hljs-comment">//getDeclaredFields:è·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§</span><br>    Field[] declaredFields = personCls.getDeclaredFields();<br>    <span class="hljs-keyword">for</span> (Field declaredField : declaredFields) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=&quot;</span> + declaredField.getName());<br>    &#125;<br>    <span class="hljs-comment">//getMethods:è·å–æ‰€æœ‰publicä¿®é¥°çš„æ–¹æ³•ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»ï¼ˆä¸å±€é™äºç›´æ¥çˆ¶ç±»ï¼‰çš„</span><br>    Method[] methods = personCls.getMethods();<br>    <span class="hljs-keyword">for</span> (Method method : methods) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=&quot;</span> + method.getName());<br>    &#125;<br>    <span class="hljs-comment">//getDeclaredMethods:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•</span><br>    Method[] declaredMethods = personCls.getDeclaredMethods();<br>    <span class="hljs-keyword">for</span> (Method declaredMethod : declaredMethods) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=&quot;</span> + declaredMethod.getName());<br>    &#125;<br>    <span class="hljs-comment">//getConstructors: è·å–æœ¬ç±»æ‰€æœ‰ public ä¿®é¥°çš„æ„é€ å™¨</span><br>    Constructor&lt;?&gt;[] constructors = personCls.getConstructors();<br>    <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; constructor : constructors) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»çš„æ„é€ å™¨=&quot;</span> + constructor.getName());<br>    &#125;<br>    <span class="hljs-comment">//getDeclaredConstructors:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨ï¼ˆåŒ…æ‹¬ç§æœ‰æ„é€ å™¨ï¼‰</span><br>    Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();<br>    <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=&quot;</span> + declaredConstructor.getName());<br>        <span class="hljs-comment">//è¿™é‡Œè€å¸ˆåªæ˜¯è¾“å‡ºåå­—</span><br>    &#125;<br>    <span class="hljs-comment">//getPackage:ä»¥Packageå½¢å¼è¿”å› åŒ…ä¿¡æ¯</span><br>    System.out.println(personCls.getPackage());<span class="hljs-comment">//com.hspedu.reflection</span><br>    <span class="hljs-comment">//getSuperClass:ä»¥Classå½¢å¼è¿”å›çˆ¶ç±»ä¿¡æ¯</span><br>    Class&lt;?&gt; superclass = personCls.getSuperclass();<br>    System.out.println(<span class="hljs-string">&quot;çˆ¶ç±»çš„classå¯¹è±¡=&quot;</span> + superclass);<span class="hljs-comment">//</span><br>    <span class="hljs-comment">//getInterfaces:ä»¥Class[]å½¢å¼è¿”å›æ¥å£ä¿¡æ¯</span><br>    Class&lt;?&gt;[] interfaces = personCls.getInterfaces();<br>    <span class="hljs-keyword">for</span> (Class&lt;?&gt; anInterface : interfaces) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ¥å£ä¿¡æ¯=&quot;</span> + anInterface);<br>    &#125;<br>    <span class="hljs-comment">//getAnnotations:ä»¥Annotation[] å½¢å¼è¿”å›æ³¨è§£ä¿¡æ¯</span><br>    Annotation[] annotations = personCls.getAnnotations();<br>    <span class="hljs-keyword">for</span> (Annotation annotation : annotations) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ³¨è§£ä¿¡æ¯=&quot;</span> + annotation);<span class="hljs-comment">//æ³¨è§£</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">public</span> String hobby;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> &#123; &#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IB</span> &#123; &#125;<br><span class="hljs-meta">@Deprecated</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>, IB &#123;<br>    <span class="hljs-comment">//å±æ€§</span><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> age; <span class="hljs-comment">// 4 + 8 = 12</span><br>    String job;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-comment">//æ„é€ å™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>    <span class="hljs-comment">//ç§æœ‰çš„</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;&#125;<br>    <span class="hljs-comment">//æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> sal)</span> &#123;&#125;<br>    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="äºŒ-java-lang-reflect-Field-ç±»"><a href="#äºŒ-java-lang-reflect-Field-ç±»" class="headerlink" title="äºŒ: java.lang.reflect.Field ç±»"></a>äºŒ: java.lang.reflect.Field ç±»</h4><ul><li><p>getModifiersï¼šä»¥ int å½¢å¼è¿”å›ä¿®é¥°ç¬¦</p><p>[è¯´æ˜ï¼šé»˜è®¤ä¿®é¥°ç¬¦ï¼š0ï¼Œpublicï¼š1ï¼Œprivateï¼š2ï¼Œprotectedï¼š4ï¼Œstaticï¼š8ï¼Œfinalï¼š16]</p><p>ç‰¹åˆ«çš„ï¼Œè‹¥è¢«å¤šä¸ªåŒæ—¶ä¿®é¥°ç¬¦ä¿®é¥°åˆ™ç›¸åŠ ï¼Œå¦‚ï¼špublic(1) + static(8) &#x3D; 9</p></li><li><p>getTypeï¼šä»¥ Class å½¢å¼ è¿”å› å±æ€§ç±»å‹ï¼ˆçš„Classå¯¹è±¡ï¼‰</p></li><li><p>getNameï¼šè¿”å›å±æ€§å</p></li></ul><h4 id="ä¸‰-java-lang-reflect-Method-ç±»"><a href="#ä¸‰-java-lang-reflect-Method-ç±»" class="headerlink" title="ä¸‰: java.lang.reflect.Method ç±»"></a>ä¸‰: java.lang.reflect.Method ç±»</h4><ul><li><p>getModifiersï¼šä»¥ int å½¢å¼è¿”å›ä¿®é¥°ç¬¦</p><p>[è¯´æ˜ï¼šé»˜è®¤ä¿®é¥°ç¬¦ï¼š0ï¼Œpublicï¼š1ï¼Œprivateï¼š2ï¼Œprotectedï¼š4ï¼Œstaticï¼š8ï¼Œfinalï¼š16]</p><p>ç‰¹åˆ«çš„ï¼Œè‹¥è¢«å¤šä¸ªåŒæ—¶ä¿®é¥°ç¬¦ä¿®é¥°åˆ™ç›¸åŠ ï¼Œå¦‚ï¼špublic(1) + static(8) &#x3D; 9</p></li><li><p>getReturnTypeï¼šä»¥ Class å½¢å¼è·å–è¿”å›ç±»å‹ï¼ˆçš„Classå¯¹è±¡ï¼‰</p></li><li><p>getNameï¼šè¿”å›æ–¹æ³•å</p></li><li><p>getParameterTypesï¼šä»¥ Class[] è¿”å›å‚æ•°ç±»å‹æ•°ç»„</p></li></ul><h4 id="å››-java-lang-reflect-Constructor-ç±»"><a href="#å››-java-lang-reflect-Constructor-ç±»" class="headerlink" title="å››: java.lang.reflect.Constructor ç±»"></a>å››: java.lang.reflect.Constructor ç±»</h4><ul><li><p>getModifiersï¼šä»¥ int å½¢å¼è¿”å›ä¿®é¥°ç¬¦</p><p>[è¯´æ˜ï¼šé»˜è®¤ä¿®é¥°ç¬¦ï¼š0ï¼Œpublicï¼š1ï¼Œprivateï¼š2ï¼Œprotectedï¼š4ï¼Œstaticï¼š8ï¼Œfinalï¼š16]</p><p>ç‰¹åˆ«çš„ï¼Œè‹¥è¢«å¤šä¸ªåŒæ—¶ä¿®é¥°ç¬¦ä¿®é¥°åˆ™ç›¸åŠ ï¼Œå¦‚ï¼špublic(1) + static(8) &#x3D; 9</p></li><li><p>getNameï¼šè¿”å›æ„é€ å™¨åï¼ˆå…¨ç±»åï¼‰</p></li><li><p>getParameterTypesï¼šä»¥ Class[] è¿”å›å‚æ•°ç±»å‹æ•°ç»„</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ç¬¬äºŒã€ä¸‰ã€å››ç»„</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">api_02</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;<br>    <span class="hljs-comment">//å¾—åˆ°Classå¯¹è±¡</span><br>    Class&lt;?&gt; personCls = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Person&quot;</span>);<br>    <span class="hljs-comment">//getDeclaredFields:è·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§</span><br>    <span class="hljs-comment">//è§„å®š è¯´æ˜: é»˜è®¤ä¿®é¥°ç¬¦æ˜¯0ï¼Œpublicæ˜¯1ï¼Œprivateæ˜¯2ï¼Œprotectedæ˜¯4ï¼Œstaticæ˜¯8ï¼Œfinalæ˜¯16</span><br>    Field[] declaredFields = personCls.getDeclaredFields();<br>    <span class="hljs-keyword">for</span> (Field declaredField : declaredFields) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=&quot;</span> + declaredField.getName()<br>                           + <span class="hljs-string">&quot; è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=&quot;</span> + declaredField.getModifiers()<br>                           + <span class="hljs-string">&quot; è¯¥å±æ€§çš„ç±»å‹=&quot;</span> + declaredField.getType());<br>    &#125;<br><br>    <span class="hljs-comment">//getDeclaredMethods:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•</span><br>    Method[] declaredMethods = personCls.getDeclaredMethods();<br>    <span class="hljs-keyword">for</span> (Method declaredMethod : declaredMethods) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=&quot;</span> + declaredMethod.getName()<br>                           + <span class="hljs-string">&quot; è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=&quot;</span> + declaredMethod.getModifiers()<br>                           + <span class="hljs-string">&quot; è¯¥æ–¹æ³•è¿”å›ç±»å‹&quot;</span> + declaredMethod.getReturnType());<br><br>        <span class="hljs-comment">//è¾“å‡ºå½“å‰è¿™ä¸ªæ–¹æ³•çš„å½¢å‚æ•°ç»„æƒ…å†µ</span><br>        Class&lt;?&gt;[] parameterTypes = declaredMethod.getParameterTypes();<br>        <span class="hljs-keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¯¥æ–¹æ³•çš„å½¢å‚ç±»å‹=&quot;</span> + parameterType);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//getDeclaredConstructors:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨</span><br>    Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();<br>    <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>        System.out.println(<span class="hljs-string">&quot;====================&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=&quot;</span> + declaredConstructor.getName());<span class="hljs-comment">//è¿™é‡Œè€å¸ˆåªæ˜¯è¾“å‡ºå</span><br><br>        Class&lt;?&gt;[] parameterTypes = declaredConstructor.getParameterTypes();<br>        <span class="hljs-keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¯¥æ„é€ å™¨çš„å½¢å‚ç±»å‹=&quot;</span> + parameterType);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">public</span> String hobby;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> &#123; &#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IB</span> &#123; &#125;<br><span class="hljs-meta">@Deprecated</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>, IB &#123;<br>    <span class="hljs-comment">//å±æ€§</span><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> age; <span class="hljs-comment">// 4 + 8 = 12</span><br>    String job;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-comment">//æ„é€ å™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>    <span class="hljs-comment">//ç§æœ‰çš„</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;&#125;<br>    <span class="hljs-comment">//æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> sal)</span> &#123;&#125;<br>    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡"><a href="#é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡" class="headerlink" title="é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡"></a>é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</h3><ul><li><p>æ–¹å¼ä¸€ï¼šè°ƒç”¨ç±»ä¸­çš„ public ä¿®é¥°çš„æ— å‚æ„é€ å™¨</p></li><li><p>æ–¹å¼äºŒï¼šè°ƒç”¨ç±»ä¸­çš„æŒ‡å®šæ„é€ å™¨</p></li><li><p>Classç±» ç›¸å…³æ–¹æ³•</p><ul><li>newInstanceï¼šè°ƒç”¨ç±»ä¸­çš„æ— å‚æ„é€ å™¨ï¼Œè·å–å¯¹åº”ç±»çš„å¯¹è±¡</li><li>getConstructor(Classâ€¦clazz)ï¼šæ ¹æ®å‚æ•°åˆ—è¡¨ï¼Œè·å–å¯¹åº”çš„ public æ„é€ å™¨å¯¹è±¡</li><li>getDecalaredConstructor(Class..clazz)ï¼šæ ¹æ®å‚æ•°åˆ—è¡¨ï¼Œè·å–å¯¹åº”çš„æ‰€æœ‰æ„é€ å™¨å¯¹è±¡</li></ul></li><li><p>Constructorç±» ç›¸å…³æ–¹æ³•</p><ul><li>setAccessibleï¼šæš´ç ´ã€æš´åŠ›ç ´è§£ã€‘ï¼Œä½¿ç”¨åå°„å¯ä»¥è®¿é—® private æ„é€ å™¨&#x2F;æ–¹æ³•&#x2F;å±æ€§</li><li>newInstance(Object..obj)ï¼šè°ƒç”¨æ„é€ å™¨</li></ul></li></ul><p>æ¡ˆä¾‹æ¼”ç¤º com.hspedu.reflection ReflecCreateInstance.java</p><p>æµ‹è¯• 1ï¼šé€šè¿‡åå°„åˆ›å»ºæŸç±»çš„å¯¹è±¡ï¼Œè¦æ±‚è¯¥ç±»ä¸­å¿…é¡»æœ‰ public çš„æ— å‚æ„é€ </p><p>æµ‹è¯• 2ï¼šé€šè¿‡è°ƒç”¨æŸä¸ªç‰¹å®šæ„é€ å™¨çš„æ–¹å¼ï¼Œå®ç°åˆ›å»ºæŸç±»çš„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºé€šè¿‡åå°„æœºåˆ¶åˆ›å»ºå®ä¾‹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflecCreateInstance</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;<br><br>        <span class="hljs-comment">//1. å…ˆè·å–åˆ°Userç±»çš„Classå¯¹è±¡</span><br>        Class&lt;?&gt; userClass = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.User&quot;</span>);<br>        <span class="hljs-comment">//2. é€šè¿‡publicçš„æ— å‚æ„é€ å™¨åˆ›å»ºå®ä¾‹</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> userClass.newInstance();<br>        System.out.println(o);<br>        System.out.println(o.hashCode());<br>        <span class="hljs-comment">//3. é€šè¿‡publicçš„æœ‰å‚æ„é€ å™¨åˆ›å»ºå®ä¾‹</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            constructor å¯¹è±¡å°±æ˜¯</span><br><span class="hljs-comment">            public User(String name) &#123;//publicçš„æœ‰å‚æ„é€ å™¨</span><br><span class="hljs-comment">                this.name = name;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//  3.1 å…ˆå¾—åˆ°å¯¹åº”æ„é€ å™¨</span><br>        Constructor&lt;?&gt; constructor = userClass.getConstructor(String.class);<br>        <span class="hljs-comment">//  3.2 åˆ›å»ºå®ä¾‹ï¼Œå¹¶ä¼ å…¥å®å‚</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">hsp</span> <span class="hljs-operator">=</span> constructor.newInstance(<span class="hljs-string">&quot;hsp&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;hsp=&quot;</span> + hsp);<br>        System.out.println(hsp.hashCode());<br>        <span class="hljs-comment">//4. é€šè¿‡épublicçš„æœ‰å‚æ„é€ å™¨åˆ›å»ºå®ä¾‹</span><br>        <span class="hljs-comment">//  4.1 å¾—åˆ°privateçš„æ„é€ å™¨å¯¹è±¡</span><br>        Constructor&lt;?&gt; constructor1 = userClass.getDeclaredConstructor(<span class="hljs-type">int</span>.class, String.class);<br>        <span class="hljs-comment">//  4.2 åˆ›å»ºå®ä¾‹</span><br>        <span class="hljs-comment">//æš´ç ´ã€æš´åŠ›ç ´è§£ã€‘, ä½¿ç”¨åå°„å¯ä»¥è®¿é—®privateæ„é€ å™¨/æ–¹æ³•/å±æ€§, åå°„é¢å‰ï¼Œéƒ½æ˜¯çº¸è€è™</span><br>        constructor1.setAccessible(<span class="hljs-literal">true</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> constructor1.newInstance(<span class="hljs-number">100</span>, <span class="hljs-string">&quot;å¼ ä¸‰ä¸°&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;user2=&quot;</span> + user2);<br>        System.out.println(user2.hashCode());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123; <span class="hljs-comment">//Userç±»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ— å‚ public</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-comment">//publicçš„æœ‰å‚æ„é€ å™¨</span><br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">User</span><span class="hljs-params">(<span class="hljs-type">int</span> age, String name)</span> &#123;<span class="hljs-comment">//private æœ‰å‚æ„é€ å™¨</span><br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User [age=&quot;</span> + age + <span class="hljs-string">&quot;, name=&quot;</span> + name + <span class="hljs-string">&quot;]&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é€šè¿‡åå°„è®¿é—®ç±»ä¸­çš„æˆå‘˜"><a href="#é€šè¿‡åå°„è®¿é—®ç±»ä¸­çš„æˆå‘˜" class="headerlink" title="é€šè¿‡åå°„è®¿é—®ç±»ä¸­çš„æˆå‘˜"></a>é€šè¿‡åå°„è®¿é—®ç±»ä¸­çš„æˆå‘˜</h3><h4 id="è®¿é—®å±æ€§"><a href="#è®¿é—®å±æ€§" class="headerlink" title="è®¿é—®å±æ€§"></a>è®¿é—®å±æ€§</h4><ul><li><p>æ ¹æ®å±æ€§åè·å– Field å¯¹è±¡</p><p>Field f &#x3D; clazzå¯¹è±¡.getDeclaredField(å±æ€§å);</p></li><li><p>æš´ç ´ï¼šfield.setAccessible(true);  &#x2F;&#x2F; field æ˜¯ Field</p></li><li><p>è®¿é—®ï¼š</p><p>f.set(obj, val);  </p><p>syso(field.get(obj));</p></li><li><p>è¡¥å……ï¼šå¦‚æœæ˜¯é™æ€å±æ€§ï¼Œåˆ™ set å’Œ get ä¸­çš„å‚æ•° objï¼Œå¯ä»¥å†™æˆ null</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºåå°„æ“ä½œå±æ€§</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflecAccessProperty</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchFieldException &#123;<br><br>        <span class="hljs-comment">//1. å¾—åˆ°Studentç±»å¯¹åº”çš„ Classå¯¹è±¡</span><br>        Class&lt;?&gt; stuClass = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Student&quot;</span>);<br>        <span class="hljs-comment">//2. åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> stuClass.newInstance();<span class="hljs-comment">//o çš„è¿è¡Œç±»å‹å°±æ˜¯Student</span><br>        System.out.println(o.getClass());<span class="hljs-comment">//Student</span><br>        <span class="hljs-comment">//3. ä½¿ç”¨åå°„å¾—åˆ°age å±æ€§å¯¹è±¡</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> stuClass.getField(<span class="hljs-string">&quot;age&quot;</span>);<br>        age.set(o, <span class="hljs-number">88</span>);<span class="hljs-comment">//é€šè¿‡åå°„æ¥æ“ä½œå±æ€§</span><br>        System.out.println(o);<span class="hljs-comment">//</span><br>        System.out.println(age.get(o));<span class="hljs-comment">//è¿”å›ageå±æ€§çš„å€¼</span><br><br>        <span class="hljs-comment">//4. ä½¿ç”¨åå°„æ“ä½œ name å±æ€§</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> stuClass.getDeclaredField(<span class="hljs-string">&quot;name&quot;</span>);<br>        <span class="hljs-comment">//å¯¹ name è¿›è¡Œæš´ç ´, å¯ä»¥æ“ä½œprivate å±æ€§</span><br>        name.setAccessible(<span class="hljs-literal">true</span>);<br>        <span class="hljs-comment">//name.set(o, &quot;è€éŸ©&quot;);</span><br>        name.set(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;è€éŸ©~&quot;</span>);<span class="hljs-comment">//å› ä¸ºnameæ˜¯staticå±æ€§ï¼Œå› æ­¤ o ä¹Ÿå¯ä»¥å†™å‡ºnull</span><br>        System.out.println(o);<br>        System.out.println(name.get(o)); <span class="hljs-comment">//è·å–å±æ€§å€¼</span><br>        System.out.println(name.get(<span class="hljs-literal">null</span>));<span class="hljs-comment">//è·å–å±æ€§å€¼, è¦æ±‚nameæ˜¯static</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<span class="hljs-comment">//ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ„é€ å™¨</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student [age=&quot;</span> + age + <span class="hljs-string">&quot;, name=&quot;</span> + name + <span class="hljs-string">&quot;]&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è®¿é—®æ–¹æ³•"><a href="#è®¿é—®æ–¹æ³•" class="headerlink" title="è®¿é—®æ–¹æ³•"></a>è®¿é—®æ–¹æ³•</h4><ul><li><p>æ ¹æ®æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨è·å– Method æ–¹æ³•å¯¹è±¡ï¼š</p><p>Method m &#x3D; clazz.getDeclaredMethod(æ–¹æ³•å, X.class);  &#x2F;&#x2F;å¯å¾—åˆ°æœ¬ç±»çš„æ‰€æœ‰æ–¹æ³•</p></li><li><p>è·å–å¯¹è±¡ï¼šObject obj &#x3D; clazz.newInstance();</p></li><li><p>æš´ç ´ï¼šm.setAccessible(true);</p></li><li><p>è®¿é—®ï¼šObject returnValue &#x3D; m.invoke(obj, å®å‚åˆ—è¡¨);  &#x2F;&#x2F;obj å°±æ˜¯å¯¹è±¡</p></li><li><p>è¡¥å……ï¼šå¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼Œåˆ™ invoke çš„å‚æ•° objï¼Œå¯ä»¥å†™æˆ null</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºé€šè¿‡åå°„è°ƒç”¨æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflecAccessMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException &#123;<br><br>        <span class="hljs-comment">//1. å¾—åˆ°Bossç±»å¯¹åº”çš„Classå¯¹è±¡</span><br>        Class&lt;?&gt; bossCls = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Boss&quot;</span>);<br>        <span class="hljs-comment">//2. åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> bossCls.newInstance();<br>        <span class="hljs-comment">//3. è°ƒç”¨publicçš„hiæ–¹æ³•</span><br>        <span class="hljs-comment">//Method hi = bossCls.getMethod(&quot;hi&quot;, String.class);//OK</span><br>        <span class="hljs-comment">//  3.1 å¾—åˆ°hiæ–¹æ³•å¯¹è±¡</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">hi</span> <span class="hljs-operator">=</span> bossCls.getDeclaredMethod(<span class="hljs-string">&quot;hi&quot;</span>, String.class);<span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//  3.2 è°ƒç”¨</span><br>        hi.invoke(o, <span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²~&quot;</span>);<br><br>        <span class="hljs-comment">//4. è°ƒç”¨private static æ–¹æ³•</span><br>        <span class="hljs-comment">//  4.1 å¾—åˆ° say æ–¹æ³•å¯¹è±¡</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">say</span> <span class="hljs-operator">=</span> bossCls.getDeclaredMethod(<span class="hljs-string">&quot;say&quot;</span>, <span class="hljs-type">int</span>.class, String.class, <span class="hljs-type">char</span>.class);<br>        <span class="hljs-comment">//  4.2 å› ä¸ºsayæ–¹æ³•æ˜¯private, æ‰€ä»¥éœ€è¦æš´ç ´ï¼ŒåŸç†å’Œå‰é¢è®²çš„æ„é€ å™¨å’Œå±æ€§ä¸€æ ·</span><br>        say.setAccessible(<span class="hljs-literal">true</span>);<br>        System.out.println(say.invoke(o, <span class="hljs-number">100</span>, <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>));<br>        <span class="hljs-comment">//  4.3 å› ä¸ºsayæ–¹æ³•æ˜¯staticçš„ï¼Œè¿˜å¯ä»¥è¿™æ ·è°ƒç”¨ ï¼Œå¯ä»¥ä¼ å…¥null</span><br>        System.out.println(say.invoke(<span class="hljs-literal">null</span>, <span class="hljs-number">200</span>, <span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>));<br><br>        <span class="hljs-comment">//5. åœ¨åå°„ä¸­ï¼Œå¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œç»Ÿä¸€è¿”å›Object , ä½†æ˜¯ä»–è¿è¡Œç±»å‹å’Œæ–¹æ³•å®šä¹‰çš„è¿”å›ç±»å‹ä¸€è‡´</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">reVal</span> <span class="hljs-operator">=</span> say.invoke(<span class="hljs-literal">null</span>, <span class="hljs-number">300</span>, <span class="hljs-string">&quot;ç‹äº”&quot;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br>        System.out.println(<span class="hljs-string">&quot;reVal çš„è¿è¡Œç±»å‹=&quot;</span> + reVal.getClass());<span class="hljs-comment">//String</span><br><br>        <span class="hljs-comment">//å†æ¼”ç¤ºä¸€ä¸ªè¿”å›çš„æ¡ˆä¾‹</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">m1</span> <span class="hljs-operator">=</span> bossCls.getDeclaredMethod(<span class="hljs-string">&quot;m1&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">reVal2</span> <span class="hljs-operator">=</span> m1.invoke(o);<br>        System.out.println(<span class="hljs-string">&quot;reVal2çš„è¿è¡Œç±»å‹=&quot;</span> + reVal2.getClass());<span class="hljs-comment">//Monster</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Boss</span> &#123;<span class="hljs-comment">//ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Boss</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//æ„é€ å™¨</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> Monster <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>();&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">say</span><span class="hljs-params">(<span class="hljs-type">int</span> n, String s, <span class="hljs-type">char</span> c)</span> &#123;<span class="hljs-comment">//é™æ€æ–¹æ³•</span><br>        <span class="hljs-keyword">return</span> n + <span class="hljs-string">&quot; &quot;</span> + s + <span class="hljs-string">&quot; &quot;</span> + c;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(String s)</span> &#123;<span class="hljs-comment">//æ™®é€špublicæ–¹æ³•</span><br>        System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + s);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¯¾åç»ƒä¹ -1"><a href="#è¯¾åç»ƒä¹ -1" class="headerlink" title="è¯¾åç»ƒä¹ "></a>è¯¾åç»ƒä¹ </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * åˆ©ç”¨Classç±»çš„forNameæ–¹æ³•å¾—åˆ°Fileç±»çš„class å¯¹è±¡</span><br><span class="hljs-comment">         * åœ¨æ§åˆ¶å°æ‰“å°Fileç±»çš„æ‰€æœ‰æ„é€ å™¨</span><br><span class="hljs-comment">         * é€šè¿‡newInstanceçš„æ–¹æ³•åˆ›å»ºFileå¯¹è±¡ï¼Œå¹¶åˆ›å»ºE:\mynew.txtæ–‡ä»¶</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//1. Classç±»çš„forNameæ–¹æ³•å¾—åˆ°Fileç±»çš„class å¯¹è±¡</span><br>        Class&lt;?&gt; fileCls = Class.forName(<span class="hljs-string">&quot;java.io.File&quot;</span>);<br>        <span class="hljs-comment">//2. å¾—åˆ°æ‰€æœ‰çš„æ„é€ å™¨</span><br>        Constructor&lt;?&gt;[] declaredConstructors = fileCls.getDeclaredConstructors();<br>        <span class="hljs-comment">//éå†è¾“å‡º</span><br>        <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>            System.out.println(<span class="hljs-string">&quot;Fileæ„é€ å™¨=&quot;</span> + declaredConstructor);<br>        &#125;<br>        <span class="hljs-comment">//3. æŒ‡å®šçš„å¾—åˆ° public java.io.File(java.lang.String)</span><br>        Constructor&lt;?&gt; declaredConstructor = fileCls.getDeclaredConstructor(String.class);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileAllPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\mynew.txt&quot;</span>;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> declaredConstructor.newInstance(fileAllPath);<span class="hljs-comment">//åˆ›å»ºFileå¯¹è±¡</span><br><br>        <span class="hljs-comment">//4. å¾—åˆ°createNewFile çš„æ–¹æ³•å¯¹è±¡</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">createNewFile</span> <span class="hljs-operator">=</span> fileCls.getMethod(<span class="hljs-string">&quot;createNewFile&quot;</span>);<br>        createNewFile.invoke(file);<span class="hljs-comment">//åˆ›å»ºæ–‡ä»¶ï¼Œè°ƒç”¨çš„æ˜¯ createNewFile</span><br>        <span class="hljs-comment">//fileçš„è¿è¡Œç±»å‹å°±æ˜¯File</span><br>        System.out.println(file.getClass());<br>        System.out.println(<span class="hljs-string">&quot;åˆ›å»ºæ–‡ä»¶æˆåŠŸ&quot;</span> + fileAllPath);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Java8æ–°ç‰¹æ€§"><a href="#Java8æ–°ç‰¹æ€§" class="headerlink" title="Java8æ–°ç‰¹æ€§"></a>Java8æ–°ç‰¹æ€§</h2> <img src="image-20220925091551275.png" alt="image-20220925091551275" style="zoom:76%;" /><h3 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h3><p><strong>ç®€è¦ä»‹ç»ï¼š</strong></p><p>Lambda æ˜¯ä¸€ä¸ª åŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Lambda è¡¨è¾¾å¼ç†è§£ä¸ºæ˜¯ ä¸€æ®µå¯ä»¥ä¼ é€’çš„ä»£ç ï¼ˆå°†ä»£ç åƒæ•°æ®ä¸€æ ·è¿›è¡Œä¼ é€’ï¼‰ã€‚ä½¿ç”¨å®ƒå¯ä»¥å†™å‡ºæ›´ç®€æ´ã€æ›´çµæ´»çš„ä»£ç ã€‚ä½œä¸ºä¸€ç§æ›´ç´§å‡‘çš„ä»£ç é£æ ¼ï¼Œä½¿Javaçš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾—åˆ°äº†æå‡ã€‚</p><p><strong>Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ï¼š</strong></p><ul><li><p>ä¸¾ä¾‹ï¼š (o1,o2) -&gt; Integer.compare(o1,o2);</p></li><li><p>æ ¼å¼ï¼š</p><ul><li>-&gt; ï¼šlambdaæ“ä½œç¬¦ æˆ– ç®­å¤´æ“ä½œç¬¦</li><li>-&gt; å·¦è¾¹ï¼šlambdaå½¢å‚åˆ—è¡¨ ï¼ˆå…¶å®å°±æ˜¯æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ï¼‰</li><li>-&gt; å³è¾¹ï¼šlambdaä½“ ï¼ˆå…¶å®å°±æ˜¯é‡å†™çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“ï¼‰</li></ul></li><li><p>Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ï¼šï¼ˆåˆ†ä¸º6ç§æƒ…å†µä»‹ç»ï¼‰</p><p><strong>æ€»ç»“ï¼š</strong></p><ul><li><strong>-&gt; å·¦è¾¹ï¼š</strong>lambdaå½¢å‚åˆ—è¡¨çš„å‚æ•°ç±»å‹å¯ä»¥çœç•¥(ç±»å‹æ¨æ–­)ï¼›å¦‚æœlambdaå½¢å‚åˆ—è¡¨åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå…¶ä¸€å¯¹()ä¹Ÿå¯ä»¥çœç•¥</li><li><strong>-&gt; å³è¾¹ï¼š</strong>lambdaä½“åº”è¯¥ä½¿ç”¨ä¸€å¯¹ {} åŒ…è£¹ï¼›å¦‚æœ lambda ä½“åªæœ‰ä¸€æ¡æ‰§è¡Œè¯­å¥ï¼ˆå¯èƒ½æ˜¯returnè¯­å¥ï¼‰ï¼Œçœç•¥è¿™ä¸€å¯¹ {} å’Œ return å…³é”®å­—</li></ul></li><li><p>Lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼šä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ä¾‹ï¼ˆå³ç›¸å½“äºnewäº†ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼ˆå‡½æ•°å¼æ¥å£æ˜¯å¿…è¦æ¡ä»¶ï¼‰</p><p>Lambdaè¡¨è¾¾å¼æ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°ï¼Œå¹¶ä¸”å¿…é¡»ä¾é™„äºä¸€ç±»ç‰¹åˆ«çš„å¯¹è±¡ç±»å‹ â€”â€” å‡½æ•°å¼æ¥å£ã€‚</p><p>ï¼ˆä¸å…¶å®ƒè¯­è¨€ä¸åŒï¼Œå…¶å®ƒè¯­è¨€ä¸€èˆ¬æ˜¯ç›´æ¥ä½œä¸ºä¸€ä¸ªåŒ¿åå‡½æ•° [ å¦‚ JS ä¸­çš„ç®­å¤´å‡½æ•° ]ï¼‰</p></li><li><p>å¦‚æœä¸€ä¸ªæ¥å£ä¸­ï¼Œåªå£°æ˜äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåˆ™æ­¤æ¥å£å°±ç§°ä¸ºå‡½æ•°å¼æ¥å£ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸Šä½¿ç”¨ @FunctionalInterface æ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p></li><li><p>å› æ­¤ï¼Œä»¥å‰ç”¨åŒ¿åå®ç°ç±»è¡¨ç¤ºçš„ç°åœ¨éƒ½å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ¥å†™ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaTest1</span> &#123;<br>    <span class="hljs-comment">//è¯­æ³•æ ¼å¼ä¸€ï¼šæ— å‚ï¼Œæ— è¿”å›å€¼</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Runnable</span> <span class="hljs-variable">r1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨&quot;</span>);<br>            &#125;<br>        &#125;;<br>        r1.run();<br>        System.out.println(<span class="hljs-string">&quot;***********************&quot;</span>);<br><br>        <span class="hljs-type">Runnable</span> <span class="hljs-variable">r2</span> <span class="hljs-operator">=</span> () -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;æˆ‘çˆ±åŒ—äº¬æ•…å®«&quot;</span>);<br>        &#125;;<br>        r2.run();<br>    &#125;<br>    <br>    <span class="hljs-comment">//è¯­æ³•æ ¼å¼äºŒï¼šLambda éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯æ²¡æœ‰è¿”å›å€¼ã€‚</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;String&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(String s)</span> &#123;<br>                System.out.println(s);<br>            &#125;<br>        &#125;;<br>        con.accept(<span class="hljs-string">&quot;è°è¨€å’Œèª“è¨€çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//è¯­æ³•æ ¼å¼ä¸‰ï¼šæ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºå¯ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºï¼Œç§°ä¸ºâ€œç±»å‹æ¨æ–­â€</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Consumer&lt;String&gt; con2 = (s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con2.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<span class="hljs-comment">//ç±»å‹æ¨æ–­</span><br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<span class="hljs-comment">//ç±»å‹æ¨æ–­</span><br>    &#125;<br><br>    <span class="hljs-comment">//è¯­æ³•æ ¼å¼å››ï¼šLambda è‹¥åªéœ€è¦ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = (s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Consumer&lt;String&gt; con2 = s -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con2.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//è¯­æ³•æ ¼å¼äº”ï¼šLambda éœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°ï¼Œå¤šæ¡æ‰§è¡Œè¯­å¥ï¼Œå¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test6</span><span class="hljs-params">()</span>&#123;<br>        Comparator&lt;Integer&gt; com1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Integer&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Integer o1, Integer o2)</span> &#123;<br>                System.out.println(o1);<br>                System.out.println(o2);<br>                <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>            &#125;<br>        &#125;;<br>        System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>        System.out.println(<span class="hljs-string">&quot;*****************************&quot;</span>);<br><br>        Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; &#123;<br>            System.out.println(o1);<br>            System.out.println(o2);<br>            <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>        &#125;;<br>        System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>));<br>    &#125;<br><br>    <span class="hljs-comment">//è¯­æ³•æ ¼å¼å…­ï¼šå½“ Lambda ä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶ï¼Œreturn ä¸å¤§æ‹¬å·è‹¥æœ‰ï¼Œéƒ½å¯ä»¥çœç•¥</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test7</span><span class="hljs-params">()</span>&#123;<br>        Comparator&lt;Integer&gt; com1 = (o1,o2) -&gt; &#123;<br>            <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>        &#125;;<br>        System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>));<br>        System.out.println(<span class="hljs-string">&quot;*****************************&quot;</span>);<br><br>        Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; o1.compareTo(o2);<br>        System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test8</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = s -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*****************************&quot;</span>);<br><br>        Consumer&lt;String&gt; con2 = s -&gt; System.out.println(s);<br>        con2.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬å¾—äººå½“çœŸäº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººå½“çœŸäº†&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h3><ul><li><p>åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç§°ä¸º å‡½æ•°å¼æ¥å£ã€‚</p></li><li><p>ä½ å¯ä»¥é€šè¿‡ Lambda è¡¨è¾¾å¼æ¥åˆ›å»ºè¯¥æ¥å£çš„å¯¹è±¡ã€‚ï¼ˆè‹¥ Lambda è¡¨è¾¾å¼æŠ›å‡ºä¸€ä¸ªå—æ£€å¼‚å¸¸(å³ï¼šéè¿è¡Œæ—¶å¼‚å¸¸)ï¼Œé‚£ä¹ˆè¯¥å¼‚å¸¸éœ€è¦åœ¨ç›®æ ‡æ¥å£çš„æŠ½è±¡æ–¹æ³•ä¸Šè¿›è¡Œå£°æ˜ï¼‰ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸Šä½¿ç”¨ @FunctionalInterface æ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚åŒæ—¶ javadoc ä¹Ÿä¼šåŒ…å«ä¸€æ¡å£°æ˜ï¼Œè¯´æ˜è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p></li><li><p>åœ¨ java.util.function åŒ…ä¸‹å®šä¹‰äº† Java 8 çš„ä¸°å¯Œçš„å‡½æ•°å¼æ¥å£</p></li></ul><p><strong>Java å†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£ï¼š</strong></p> <img src="image-20220925105023050.png" alt="image-20220925105023050" style="zoom: 60%;" /><p><strong>å…¶ä»–æ¥å£ï¼š</strong></p> <img src="image-20220925105124856.png" alt="image-20220925105124856" style="zoom:60%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * javaå†…ç½®çš„4å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£</span><br><span class="hljs-comment"> * æ¶ˆè´¹å‹æ¥å£ Consumer&lt;T&gt;     void accept(T t)</span><br><span class="hljs-comment"> * ä¾›ç»™å‹æ¥å£ Supplier&lt;T&gt;     T get()</span><br><span class="hljs-comment"> * å‡½æ•°å‹æ¥å£ Function&lt;T,R&gt;   R apply(T t)</span><br><span class="hljs-comment"> * æ–­å®šå‹æ¥å£ Predicate&lt;T&gt;    boolean test(T t)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.function.Consumer;<br><span class="hljs-keyword">import</span> java.util.function.Predicate;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaTest2</span> &#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        happyTime(<span class="hljs-number">500</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;Double&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Double aDouble)</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;å­¦ä¹ å¤ªç´¯äº†ï¼Œå»å¤©ä¸Šäººé—´ä¹°äº†ç“¶çŸ¿æ³‰æ°´ï¼Œä»·æ ¼ä¸ºï¼š&quot;</span> + aDouble);<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;********************&quot;</span>);<br><br>        happyTime(<span class="hljs-number">400</span>,money -&gt; System.out.println(<span class="hljs-string">&quot;å»åº—é“ºå–äº†å£æ°´ï¼Œä»·æ ¼ä¸ºï¼š&quot;</span> + money));<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">happyTime</span><span class="hljs-params">(<span class="hljs-type">double</span> money, Consumer&lt;Double&gt; con)</span>&#123;<br>        con.accept(money);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;åŒ—äº¬&quot;</span>,<span class="hljs-string">&quot;å—äº¬&quot;</span>,<span class="hljs-string">&quot;å¤©æ´¥&quot;</span>,<span class="hljs-string">&quot;ä¸œäº¬&quot;</span>,<span class="hljs-string">&quot;è¥¿äº¬&quot;</span>,<span class="hljs-string">&quot;æ™®äº¬&quot;</span>);<br>        List&lt;String&gt; filterStrs = filterString(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Predicate</span>&lt;String&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">test</span><span class="hljs-params">(String s)</span> &#123;<br>                <span class="hljs-keyword">return</span> s.contains(<span class="hljs-string">&quot;äº¬&quot;</span>);<br>            &#125;<br>        &#125;);<br>        System.out.println(filterStrs);<br>        List&lt;String&gt; filterStrs1 = filterString(list,s -&gt; s.contains(<span class="hljs-string">&quot;äº¬&quot;</span>));<br>        System.out.println(filterStrs1);<br>    &#125;<br><br>    <span class="hljs-comment">//æ ¹æ®ç»™å®šçš„è§„åˆ™ï¼Œè¿‡æ»¤é›†åˆä¸­çš„å­—ç¬¦ä¸²ã€‚æ­¤è§„åˆ™ç”±Predicateçš„æ–¹æ³•å†³å®š</span><br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">filterString</span><span class="hljs-params">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span>&#123;<br>        ArrayList&lt;String&gt; filterList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(String s : list)&#123;<br>            <span class="hljs-keyword">if</span>(pre.test(s))&#123;<br>                filterList.add(s);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> filterList;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨</h3><ul><li><p>å½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼</p></li><li><p>æ–¹æ³•å¼•ç”¨å¯ä»¥çœ‹åšæ˜¯Lambdaè¡¨è¾¾å¼æ·±å±‚æ¬¡çš„è¡¨è¾¾ã€‚æ¢å¥è¯è¯´ï¼Œæ–¹æ³•å¼•ç”¨å°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å¼æ¥å£çš„ä¸€ä¸ªå®ä¾‹ï¼Œé€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯Lambdaè¡¨è¾¾å¼çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚</p></li><li><p>è¦æ±‚ï¼šå®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ï¼</p></li><li><p>æ ¼å¼ï¼šä½¿ç”¨æ“ä½œç¬¦ â€œ::â€ å°†ç±»(æˆ–å¯¹è±¡) ä¸ æ–¹æ³•ååˆ†éš”å¼€æ¥ã€‚</p></li></ul><p><strong>æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨ï¼š</strong></p><ul><li>ä½¿ç”¨æƒ…å¢ƒï¼šå½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼</li><li>æ–¹æ³•å¼•ç”¨ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œè€ŒLambdaè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚æ‰€ä»¥æ–¹æ³•å¼•ç”¨ï¼Œä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚</li><li>ä½¿ç”¨æ ¼å¼ï¼š  ç±»(æˆ–å¯¹è±¡) :: æ–¹æ³•å</li><li>å…·ä½“åˆ†ä¸ºå¦‚ä¸‹çš„ä¸‰ç§æƒ…å†µï¼š<ul><li>æƒ…å†µ1     å¯¹è±¡ :: éé™æ€æ–¹æ³•</li><li>æƒ…å†µ2     ç±» :: é™æ€æ–¹æ³•</li><li>æƒ…å†µ3     ç±» :: éé™æ€æ–¹æ³•</li></ul></li><li>ä½¿ç”¨è¦æ±‚ï¼šè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ç›¸åŒï¼ï¼ˆé’ˆå¯¹äºæƒ…å†µ1å’Œæƒ…å†µ2ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodRefTest</span> &#123;<br><br><span class="hljs-comment">// æƒ…å†µä¸€ï¼šå¯¹è±¡ :: å®ä¾‹æ–¹æ³•</span><br><span class="hljs-comment">// Consumer ä¸­çš„ void accept(T t)</span><br><span class="hljs-comment">// PrintStream ä¸­çš„ void println(T t)</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>Consumer&lt;String&gt; con1 = str -&gt; System.out.println(str);<br>con1.accept(<span class="hljs-string">&quot;åŒ—äº¬&quot;</span>);<br><br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><span class="hljs-type">PrintStream</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> System.out;<br>Consumer&lt;String&gt; con2 = ps::println;<br>con2.accept(<span class="hljs-string">&quot;beijing&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//Supplierä¸­çš„T get()</span><br><span class="hljs-comment">//Employeeä¸­çš„String getName()</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">Employee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-number">5600</span>);<br><br>Supplier&lt;String&gt; sup1 = () -&gt; emp.getName();<br>System.out.println(sup1.get());<br><br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br>Supplier&lt;String&gt; sup2 = emp::getName;<br>System.out.println(sup2.get());<br>&#125;<br><br><span class="hljs-comment">// æƒ…å†µäºŒï¼šç±» :: é™æ€æ–¹æ³•</span><br><span class="hljs-comment">//Comparatorä¸­çš„int compare(T t1,T t2)</span><br><span class="hljs-comment">//Integerä¸­çš„static int compare(T t1,T t2)</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>Comparator&lt;Integer&gt; com1 = (t1,t2) -&gt; Integer.compare(t1,t2);<br>System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>Comparator&lt;Integer&gt; com2 = Integer::compare;<br>System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">3</span>));<br>&#125;<br><br><span class="hljs-comment">//Functionä¸­çš„R apply(T t)</span><br><span class="hljs-comment">//Mathä¸­çš„Long round(Double d)</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> &#123;<br>Function&lt;Double,Long&gt; func = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>&lt;Double, Long&gt;() &#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Long <span class="hljs-title function_">apply</span><span class="hljs-params">(Double d)</span> &#123;<br><span class="hljs-keyword">return</span> Math.round(d);<br>&#125;<br>&#125;;<br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>Function&lt;Double,Long&gt; func1 = d -&gt; Math.round(d);<br>System.out.println(func1.apply(<span class="hljs-number">12.3</span>));<br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>Function&lt;Double,Long&gt; func2 = Math::round;<br>System.out.println(func2.apply(<span class="hljs-number">12.6</span>));<br>&#125;<br><br><span class="hljs-comment">// æƒ…å†µä¸‰ï¼šç±» :: å®ä¾‹æ–¹æ³•  (æœ‰éš¾åº¦)</span><br><span class="hljs-comment">// Comparatorä¸­çš„int comapre(T t1,T t2)</span><br><span class="hljs-comment">// Stringä¸­çš„int t1.compareTo(t2)</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> &#123;<br>Comparator&lt;String&gt; com1 = (s1,s2) -&gt; s1.compareTo(s2);<br>System.out.println(com1.compare(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abd&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>Comparator&lt;String&gt; com2 = String :: compareTo;<br>System.out.println(com2.compare(<span class="hljs-string">&quot;abd&quot;</span>,<span class="hljs-string">&quot;abm&quot;</span>));<br>&#125;<br><br><span class="hljs-comment">//BiPredicateä¸­çš„boolean test(T t1, T t2);</span><br><span class="hljs-comment">//Stringä¸­çš„boolean t1.equals(t2)</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test6</span><span class="hljs-params">()</span> &#123;<br>BiPredicate&lt;String,String&gt; pre1 = (s1,s2) -&gt; s1.equals(s2);<br>System.out.println(pre1.test(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br>        <br>BiPredicate&lt;String,String&gt; pre2 = String :: equals;<br>System.out.println(pre2.test(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abd&quot;</span>));<br>&#125;<br><br><span class="hljs-comment">// Functionä¸­çš„R apply(T t)</span><br><span class="hljs-comment">// Employeeä¸­çš„String getName();</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test7</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">&quot;Jerry&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">6000</span>);<br><br>Function&lt;Employee,String&gt; func1 = e -&gt; e.getName();<br>System.out.println(func1.apply(employee));<br>System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>Function&lt;Employee,String&gt; func2 = Employee::getName;<br>System.out.println(func2.apply(employee));<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ„é€ å™¨å¼•ç”¨"><a href="#æ„é€ å™¨å¼•ç”¨" class="headerlink" title="æ„é€ å™¨å¼•ç”¨"></a>æ„é€ å™¨å¼•ç”¨</h3><p>å’Œæ–¹æ³•å¼•ç”¨ç±»ä¼¼ï¼Œå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œæ„é€ å™¨çš„å½¢å‚åˆ—è¡¨ä¸€è‡´ã€‚</p><p>æŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å³ä¸ºæ„é€ å™¨æ‰€å±çš„ç±»çš„ç±»å‹</p><ul><li><p>æ ¼å¼ï¼š ClassName::new</p></li><li><p>ä¸å‡½æ•°å¼æ¥å£ç›¸ç»“åˆï¼Œè‡ªåŠ¨ä¸å‡½æ•°å¼æ¥å£ä¸­æ–¹æ³•å…¼å®¹ã€‚</p></li><li><p>å¯ä»¥æŠŠæ„é€ å™¨å¼•ç”¨èµ‹å€¼ç»™å®šä¹‰çš„æ–¹æ³•ï¼Œè¦æ±‚æ„é€ å™¨å‚æ•°åˆ—è¡¨è¦ä¸æ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸€è‡´ï¼</p><p>ä¸”æ–¹æ³•çš„è¿”å›å€¼å³ä¸ºæ„é€ å™¨å¯¹åº”ç±»çš„å¯¹è±¡ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstructorRefTest</span> &#123;<br><span class="hljs-comment">//æ„é€ å™¨å¼•ç”¨</span><br>    <span class="hljs-comment">//Supplierä¸­çš„T get()</span><br>    <span class="hljs-comment">//Employeeçš„ç©ºå‚æ„é€ å™¨ï¼šEmployee()</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        Supplier&lt;Employee&gt; sup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Supplier</span>&lt;Employee&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Employee <span class="hljs-title function_">get</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Supplier&lt;Employee&gt;  sup1 = () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>        System.out.println(sup1.get());<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Supplier&lt;Employee&gt;  sup2 = Employee :: <span class="hljs-keyword">new</span>;<br>        System.out.println(sup2.get());<br>    &#125;<br><br><span class="hljs-comment">//Functionä¸­çš„R apply(T t)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        Function&lt;Integer,Employee&gt; func1 = id -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(id);<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> func1.apply(<span class="hljs-number">1001</span>);<br>        System.out.println(employee);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Function&lt;Integer,Employee&gt; func2 = Employee :: <span class="hljs-keyword">new</span>;<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee1</span> <span class="hljs-operator">=</span> func2.apply(<span class="hljs-number">1002</span>);<br>        System.out.println(employee1);<br>    &#125;<br><br><span class="hljs-comment">//BiFunctionä¸­çš„R apply(T t,U u)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>        BiFunction&lt;Integer,String,Employee&gt; func1 = (id,name) -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(id,name);<br>        System.out.println(func1.apply(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        BiFunction&lt;Integer,String,Employee&gt; func2 = Employee :: <span class="hljs-keyword">new</span>;<br>        System.out.println(func2.apply(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;Tom&quot;</span>));<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„å¼•ç”¨"><a href="#æ•°ç»„å¼•ç”¨" class="headerlink" title="æ•°ç»„å¼•ç”¨"></a>æ•°ç»„å¼•ç”¨</h3><p>å¯ä»¥æŠŠæ•°ç»„çœ‹åšæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œåˆ™å†™æ³•ä¸æ„é€ å™¨å¼•ç”¨ä¸€è‡´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    Function&lt;Integer,String[]&gt; func1 = length -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[length];<br>    String[] arr1 = func1.apply(<span class="hljs-number">5</span>);<br>    System.out.println(Arrays.toString(arr1));<br>    System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>    Function&lt;Integer,String[]&gt; func2 = String[] :: <span class="hljs-keyword">new</span>;<br>    String[] arr2 = func2.apply(<span class="hljs-number">10</span>);<br>    System.out.println(Arrays.toString(arr2));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h3><h4 id="Stream-API-è¯´æ˜"><a href="#Stream-API-è¯´æ˜" class="headerlink" title="Stream API è¯´æ˜"></a>Stream API è¯´æ˜</h4><p>Stream API ( java.util.stream) æŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ° Java ä¸­ã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢å¯¹Javaç±»åº“æœ€å¥½çš„è¡¥å……ï¼Œå› ä¸º Stream API å¯ä»¥æå¤§æä¾› Java ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚</p><p>Stream æ˜¯ Java8 ä¸­å¤„ç†é›†åˆçš„å…³é”®æŠ½è±¡æ¦‚å¿µï¼Œå®ƒå¯ä»¥æŒ‡å®šä½ å¸Œæœ›å¯¹é›†åˆè¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥æ‰§è¡Œéå¸¸å¤æ‚çš„æŸ¥æ‰¾ã€è¿‡æ»¤å’Œæ˜ å°„æ•°æ®ç­‰æ“ä½œã€‚ ä½¿ç”¨ Stream API å¯¹é›†åˆæ•°æ®è¿›è¡Œæ“ä½œï¼Œå°±ç±»ä¼¼äºä½¿ç”¨ SQL æ‰§è¡Œçš„æ•°æ®åº“æŸ¥è¯¢ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Stream API æ¥å¹¶è¡Œæ‰§è¡Œæ“ä½œã€‚ç®€è¨€ä¹‹ï¼ŒStream API æä¾›äº†ä¸€ç§é«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„å¤„ç†æ•°æ®çš„æ–¹å¼ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Stream-API"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Stream-API" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Stream API"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Stream API</h4><p>å®é™…å¼€å‘ä¸­ï¼Œé¡¹ç›®ä¸­å¤šæ•°æ•°æ®æºéƒ½æ¥è‡ªäºMysqlï¼ŒOracleç­‰ã€‚ä½†ç°åœ¨æ•°æ®æºå¯ä»¥æ›´å¤šäº†ï¼Œæœ‰MongDBï¼ŒRadisç­‰ï¼Œè€Œè¿™äº›NoSQLçš„æ•°æ®å°±éœ€è¦ Java å±‚é¢å»å¤„ç†ã€‚</p><p>Stream å’Œ Collection é›†åˆçš„åŒºåˆ«ï¼šCollection æ˜¯ä¸€ç§é™æ€çš„å†…å­˜æ•°æ®ç»“æ„ï¼Œè€Œ Stream æ˜¯æœ‰å…³è®¡ç®—çš„ã€‚å‰è€…æ˜¯ä¸»è¦é¢å‘å†…å­˜ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œåè€…ä¸»è¦æ˜¯é¢å‘ CPUï¼Œé€šè¿‡ CPU å®ç°è®¡ç®—ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯-Stream"><a href="#ä»€ä¹ˆæ˜¯-Stream" class="headerlink" title="ä»€ä¹ˆæ˜¯ Stream"></a>ä»€ä¹ˆæ˜¯ Stream</h4><p>æ˜¯æ•°æ®æ¸ é“ï¼Œç”¨äºæ“ä½œæ•°æ®æºï¼ˆé›†åˆã€æ•°ç»„ç­‰ï¼‰æ‰€ç”Ÿæˆçš„å…ƒç´ åºåˆ—ã€‚<br>â€œé›†åˆ è®²çš„æ˜¯æ•°æ®ï¼ŒStream è®²çš„æ˜¯è®¡ç®—ï¼â€</p><p><strong>æ³¨æ„ï¼š</strong><br>â‘  Stream è‡ªå·±ä¸ä¼šå­˜å‚¨å…ƒç´ ã€‚<br>â‘¡ Stream ä¸ä¼šæ”¹å˜æºå¯¹è±¡ã€‚ç›¸åï¼Œä»–ä»¬ä¼šè¿”å›ä¸€ä¸ªæŒæœ‰ç»“æœçš„æ–°Streamã€‚<br>â‘¢ Stream æ“ä½œæ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ã€‚è¿™æ„å‘³ç€ä»–ä»¬ä¼šç­‰åˆ°éœ€è¦ç»“æœçš„æ—¶å€™æ‰æ‰§è¡Œã€‚</p><h4 id="Stream-çš„æ“ä½œä¸‰æ­¥éª¤"><a href="#Stream-çš„æ“ä½œä¸‰æ­¥éª¤" class="headerlink" title="Stream çš„æ“ä½œä¸‰æ­¥éª¤"></a>Stream çš„æ“ä½œä¸‰æ­¥éª¤</h4><p>1- åˆ›å»º Streamï¼ˆStreamçš„å®ä¾‹åŒ–ï¼‰<br>ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚ï¼šé›†åˆã€æ•°ç»„ï¼‰ï¼Œè·å–ä¸€ä¸ªæµ</p><p>2- ä¸­é—´æ“ä½œ<br>ä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼Œå¯¹æ•°æ®æºçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼ˆè¿‡æ»¤ã€æ˜ å°„ã€â€¦)</p><p>3- ç»ˆæ­¢æ“ä½œ( ç»ˆç«¯æ“ä½œ)<br>ä¸€æ—¦æ‰§è¡Œç»ˆæ­¢æ“ä½œï¼Œå°±æ‰§è¡Œä¸­é—´æ“ä½œé“¾ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚ä¹‹åï¼Œä¸èƒ½å†è¢«ä½¿ç”¨ã€‚</p> <img src="image-20220925154323456.png" alt="image-20220925154323456" style="zoom:70%;" /><h5 id="Stream-çš„åˆ›å»º"><a href="#Stream-çš„åˆ›å»º" class="headerlink" title="Stream çš„åˆ›å»º"></a>Stream çš„åˆ›å»º</h5><ul><li><p><strong>é€šè¿‡é›†åˆï¼š</strong></p><p>Java8 ä¸­çš„ Collection æ¥å£è¢«æ‰©å±•ï¼Œæä¾›äº†ä¸¤ä¸ªè·å–æµçš„æ–¹æ³•ï¼š</p><ul><li>default Stream&lt;E&gt; stream() : è¿”å›ä¸€ä¸ªé¡ºåºæµ</li><li>default Stream&lt;E&gt; parallelStream() : è¿”å›ä¸€ä¸ªå¹¶è¡Œæµ</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br><br>    <span class="hljs-comment">//default Stream&lt;E&gt; stream() : è¿”å›ä¸€ä¸ªé¡ºåºæµï¼ˆä¼šæŒ‰ç…§é›†åˆä¸­çš„é¡ºåºæ¥æ“ä½œï¼‰</span><br>    Stream&lt;Employee&gt; stream = employees.stream();<br><br>    <span class="hljs-comment">//default Stream&lt;E&gt; parallelStream() : è¿”å›ä¸€ä¸ªå¹¶è¡Œæµ</span><br>    Stream&lt;Employee&gt; parallelStream = employees.parallelStream();<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p><strong>é€šè¿‡æ•°ç»„ï¼š</strong></p><p>Java8 ä¸­çš„ Arrays çš„é™æ€æ–¹æ³• stream() å¯ä»¥è·å–æ•°ç»„æµï¼š</p><ul><li>static &lt;T&gt; Stream&lt;T&gt; stream(T[] array): è¿”å›ä¸€ä¸ªæµ</li></ul><p>é‡è½½å½¢å¼ï¼Œèƒ½å¤Ÿå¤„ç†å¯¹åº”åŸºæœ¬ç±»å‹çš„æ•°ç»„ï¼š</p><ul><li>public static IntStream stream(int[] array)</li><li>public static LongStream stream(long[] array)</li><li>public static DoubleStream stream(double[] array)</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span>[] arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;;<br>    <span class="hljs-comment">//è°ƒç”¨Arraysç±»çš„static &lt;T&gt; Stream&lt;T&gt; stream(T[] array): è¿”å›ä¸€ä¸ªæµ</span><br>    <span class="hljs-type">IntStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Arrays.stream(arr);<br><br>    <span class="hljs-type">Employee</span> <span class="hljs-variable">e1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>);<br>    <span class="hljs-type">Employee</span> <span class="hljs-variable">e2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;Jerry&quot;</span>);<br>    Employee[] arr1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>[]&#123;e1,e2&#125;;<br>    Stream&lt;Employee&gt; stream1 = Arrays.stream(arr1);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p><strong>é€šè¿‡Stream çš„of() ï¼š</strong></p><p>å¯ä»¥è°ƒç”¨Streamç±»é™æ€æ–¹æ³• of()ï¼Œé€šè¿‡æ˜¾ç¤ºå€¼åˆ›å»ºä¸€ä¸ªæµã€‚å®ƒå¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ã€‚</p><p> public static&lt;T&gt; Stream&lt;T&gt; of(Tâ€¦ values) ï¼šè¿”å›ä¸€ä¸ªæµ</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//åŸºæœ¬æ•°æ®ç±»å‹ä¼šè¿›è¡Œè‡ªåŠ¨è£…ç®±</span><br>    Stream&lt;Integer&gt; stream = Stream.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p><strong>åˆ›å»ºæ— é™æµï¼š</strong></p><p>å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³• Stream.iterate() å’Œ Stream.generate()ï¼Œåˆ›å»ºæ— é™æµã€‚</p><ul><li><p>è¿­ä»£ï¼špublic static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</p></li><li><p>ç”Ÿæˆï¼špublic static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</p></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//è¿­ä»£</span><br>    <span class="hljs-comment">//public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</span><br>    <span class="hljs-comment">//éå†å‰10ä¸ªå¶æ•°</span><br>    Stream.iterate(<span class="hljs-number">0</span>, t -&gt; t + <span class="hljs-number">2</span>).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br><br>    <span class="hljs-comment">//ç”Ÿæˆ</span><br>    <span class="hljs-comment">//public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</span><br>    Stream.generate(Math::random).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="Stream-çš„ä¸­é—´æ“ä½œ"><a href="#Stream-çš„ä¸­é—´æ“ä½œ" class="headerlink" title="Stream çš„ä¸­é—´æ“ä½œ"></a>Stream çš„ä¸­é—´æ“ä½œ</h5><p>å¤šä¸ª ä¸­é—´æ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ª æµæ°´çº¿ï¼Œé™¤éæµæ°´çº¿ä¸Šè§¦å‘ç»ˆæ­¢æ“ä½œï¼Œå¦åˆ™ ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œä»»ä½•çš„å¤„ç†ï¼è€Œåœ¨ ç»ˆæ­¢æ“ä½œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç†ï¼Œç§°ä¸ºâ€œæƒ°æ€§æ±‚å€¼â€ã€‚</p><ul><li><p><strong>ç­›é€‰ä¸åˆ‡ç‰‡</strong></p> <img src="image-20220925162037977.png" alt="image-20220925162037977" style="zoom: 67%;" /> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1-ç­›é€‰ä¸åˆ‡ç‰‡</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; list = EmployeeData.getEmployees();<br>    <span class="hljs-comment">// filter(Predicate p)â€”â€”æ¥æ”¶ Lambda ï¼Œ ä»æµä¸­æ’é™¤æŸäº›å…ƒç´ ã€‚</span><br>    Stream&lt;Employee&gt; stream = list.stream();<br>    <span class="hljs-comment">//ç»ƒä¹ ï¼šæŸ¥è¯¢å‘˜å·¥è¡¨ä¸­è–ªèµ„å¤§äº7000çš„å‘˜å·¥ä¿¡æ¯</span><br>    stream.filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">7000</span>).forEach(System.out::println);<br>    System.out.println();<br><br>    <span class="hljs-comment">// limit(n)â€”â€”æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡ã€‚</span><br>    list.stream().limit(<span class="hljs-number">3</span>).forEach(System.out::println);<br>    System.out.println();<br><br>    <span class="hljs-comment">// skip(n) â€”â€” è·³è¿‡å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ‰”æ‰äº†å‰ n ä¸ªå…ƒç´ çš„æµã€‚</span><br>    <span class="hljs-comment">// è‹¥æµä¸­å…ƒç´ ä¸è¶³ n ä¸ªï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæµã€‚ä¸ limit(n) äº’è¡¥</span><br>    list.stream().skip(<span class="hljs-number">3</span>).forEach(System.out::println);<br>    System.out.println();<br><br>    <span class="hljs-comment">// distinct()â€”â€”ç­›é€‰ï¼ˆå»é‡ï¼‰ï¼Œé€šè¿‡æµæ‰€ç”Ÿæˆå…ƒç´ çš„ hashCode() å’Œ equals() å»é™¤é‡å¤å…ƒç´ </span><br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="hljs-number">41</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    <span class="hljs-comment">//System.out.println(list);</span><br>    list.stream().distinct().forEach(System.out::println);<br>    System.out.println();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ˜ å°„</strong></p> <img src="image-20220925164043557.png" alt="image-20220925164043557" style="zoom:67%;" /> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ˜ å°„</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// map(Function f)ï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†å…ƒç´ è½¬æ¢æˆå…¶ä»–å½¢å¼æˆ–æå–ä¿¡æ¯ï¼Œ</span><br>    <span class="hljs-comment">// è¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚</span><br>    List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;aa&quot;</span>, <span class="hljs-string">&quot;bb&quot;</span>, <span class="hljs-string">&quot;cc&quot;</span>, <span class="hljs-string">&quot;dd&quot;</span>);<br>    list.stream().map(str -&gt; str.toUpperCase()).forEach(System.out::println);<br><br>    <span class="hljs-comment">// ç»ƒä¹ 1ï¼šè·å–å‘˜å·¥å§“åé•¿åº¦å¤§äº3çš„å‘˜å·¥çš„å§“åã€‚</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    Stream&lt;String&gt; namesStream = employees.stream().map(Employee::getName);<br>    namesStream.filter(name -&gt; name.length() &gt; <span class="hljs-number">3</span>).forEach(System.out::println);<br>    System.out.println();<br>    <span class="hljs-comment">//ç»ƒä¹ 2ï¼šä¸flatMapå¯¹æ¯”</span><br>    Stream&lt;Stream&lt;Character&gt;&gt; streamStream = list.stream().map(StreamAPITest1::fromStringToStream);<br>    streamStream.forEach(s -&gt;&#123;<br>        s.forEach(System.out::println);<br>    &#125;);<br>    System.out.println();<br><br>    <span class="hljs-comment">// flatMap(Function f)ï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµã€‚</span><br>    <span class="hljs-comment">// å¦‚æœè¯´map(Function f)ç±»ä¼¼äºArrayListä¸­çš„add()æ–¹æ³•ï¼Œ</span><br>    <span class="hljs-comment">// é‚£ä¹ˆflatMap(Function f)å°±ç±»ä¼¼äºaddAll()æ–¹æ³•</span><br>    Stream&lt;Character&gt; characterStream = list.stream().flatMap(StreamAPITest1::fromStringToStream);<br>    characterStream.forEach(System.out::println);<br>&#125;<br><br><span class="hljs-comment">//å°†å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—ç¬¦æ„æˆçš„é›†åˆè½¬æ¢ä¸ºå¯¹åº”çš„Streamçš„å®ä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Stream&lt;Character&gt; <span class="hljs-title function_">fromStringToStream</span><span class="hljs-params">(String str)</span>&#123;<span class="hljs-comment">//aa</span><br>    ArrayList&lt;Character&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-keyword">for</span>(Character c : str.toCharArray())&#123;<br>        list.add(c);<br>    &#125;<br>    <span class="hljs-keyword">return</span> list.stream();<br>&#125;<br><br><span class="hljs-meta">@Test</span>  <span class="hljs-comment">//ä¸¾ä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>    list1.add(<span class="hljs-number">1</span>);<br>    list1.add(<span class="hljs-number">2</span>);<br>    list1.add(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>    list2.add(<span class="hljs-number">4</span>);<br>    list2.add(<span class="hljs-number">5</span>);<br>    list2.add(<span class="hljs-number">6</span>);<br><br>    <span class="hljs-comment">//        list1.add(list2);  //[1, 2, 3, [4, 5, 6]]</span><br>    list1.addAll(list2);  <span class="hljs-comment">//[1, 2, 3, 4, 5, 6]</span><br>    System.out.println(list1);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ’åº</strong></p> <img src="image-20220925164121230.png" alt="image-20220925164121230" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//3-æ’åº</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// sorted()â€”â€”è‡ªç„¶æ’åº</span><br>    List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">12</span>, <span class="hljs-number">43</span>, <span class="hljs-number">65</span>, <span class="hljs-number">34</span>, <span class="hljs-number">87</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">98</span>, <span class="hljs-number">7</span>);<br>    list.stream().sorted().forEach(System.out::println);<br>    <br>    <span class="hljs-comment">// ä¸‹é¢ä»£ç æŠ›å¼‚å¸¸ï¼ŒåŸå› :Employeeæ²¡æœ‰å®ç°Comparableæ¥å£</span><br>    <span class="hljs-comment">// List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br>    <span class="hljs-comment">// employees.stream().sorted().forEach(System.out::println);</span><br><br>    <span class="hljs-comment">// sorted(Comparator com)â€”â€”å®šåˆ¶æ’åº</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    employees.stream().sorted( (e1,e2) -&gt; &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ageValue</span> <span class="hljs-operator">=</span> Integer.compare(e1.getAge(),e2.getAge());<br>        <span class="hljs-keyword">if</span>(ageValue != <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> ageValue;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> -Double.compare(e1.getSalary(),e2.getSalary());<br>        &#125;<br>    &#125;).forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h5 id="Stream-çš„ç»ˆæ­¢æ“ä½œ"><a href="#Stream-çš„ç»ˆæ­¢æ“ä½œ" class="headerlink" title="Stream çš„ç»ˆæ­¢æ“ä½œ"></a>Stream çš„ç»ˆæ­¢æ“ä½œ</h5><p>ç»ˆç«¯æ“ä½œä¼šä»æµçš„æµæ°´çº¿ç”Ÿæˆç»“æœã€‚å…¶ç»“æœå¯ä»¥æ˜¯ä»»ä½•ä¸æ˜¯æµçš„å€¼ï¼Œä¾‹å¦‚ï¼šListã€Integerï¼Œç”šè‡³æ˜¯ void ã€‚</p><p>æµè¿›è¡Œäº†ç»ˆæ­¢æ“ä½œåï¼Œä¸èƒ½å†æ¬¡ä½¿ç”¨ã€‚</p><ul><li><p><strong>åŒ¹é…ä¸æŸ¥æ‰¾</strong></p> <img src="image-20220925193138861.png" alt="image-20220925193138861" style="zoom: 67%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1-åŒ¹é…ä¸æŸ¥æ‰¾</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br><br>    <span class="hljs-comment">// allMatch(Predicate p)ï¼šæ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ ã€‚</span><br>    <span class="hljs-comment">// ç»ƒä¹ ï¼šæ˜¯å¦æ‰€æœ‰çš„å‘˜å·¥çš„å¹´é¾„éƒ½å¤§äº18</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">allMatch</span> <span class="hljs-operator">=</span> employees.stream().allMatch(e -&gt; e.getAge() &gt; <span class="hljs-number">18</span>);<br>    System.out.println(allMatch);<br><br>    <span class="hljs-comment">// anyMatch(Predicate p)ï¼šæ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ ã€‚</span><br>    <span class="hljs-comment">// ç»ƒä¹ ï¼šæ˜¯å¦å­˜åœ¨å‘˜å·¥çš„å·¥èµ„å¤§äº 10000</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">anyMatch</span> <span class="hljs-operator">=</span> employees.stream().anyMatch(e -&gt; e.getSalary() &gt; <span class="hljs-number">10000</span>);<br>    System.out.println(anyMatch);<br><br>    <span class="hljs-comment">// noneMatch(Predicate p)ï¼šæ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…çš„å…ƒç´ ã€‚</span><br>    <span class="hljs-comment">// ç»ƒä¹ ï¼šæ˜¯å¦å­˜åœ¨å‘˜å·¥å§“â€œé›·â€</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">noneMatch</span> <span class="hljs-operator">=</span> employees.stream().noneMatch(e -&gt; e.getName().startsWith(<span class="hljs-string">&quot;é›·&quot;</span>));<br>    System.out.println(noneMatch);<br><br>    <span class="hljs-comment">// findFirstï¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </span><br>    Optional&lt;Employee&gt; employee = employees.stream().findFirst();<br>    System.out.println(employee);<br><br>    <span class="hljs-comment">// findAnyï¼šè¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´ </span><br>    Optional&lt;Employee&gt; employee1 = employees.parallelStream().findAny();<br>    System.out.println(employee1);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    <span class="hljs-comment">// countâ€”â€”è¿”å›æµä¸­å…ƒç´ çš„æ€»ä¸ªæ•°</span><br>    <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> employees.stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">5000</span>).count();<br>    System.out.println(count);<br><br>    <span class="hljs-comment">// max(Comparator c)â€”â€”è¿”å›æµä¸­æœ€å¤§å€¼</span><br>    <span class="hljs-comment">// ç»ƒä¹ ï¼šè¿”å›æœ€é«˜çš„å·¥èµ„ï¼š</span><br>    Stream&lt;Double&gt; salaryStream = employees.stream().map(e -&gt; e.getSalary());<br>    Optional&lt;Double&gt; maxSalary = salaryStream.max(Double::compare);<br>    System.out.println(maxSalary);<br><br>    <span class="hljs-comment">// min(Comparator c)â€”â€”è¿”å›æµä¸­æœ€å°å€¼</span><br>    <span class="hljs-comment">// ç»ƒä¹ ï¼šè¿”å›æœ€ä½å·¥èµ„çš„å‘˜å·¥</span><br>    Optional&lt;Employee&gt; employee = employees.stream().min((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()));<br>    System.out.println(employee);<br>    System.out.println();<br><br>    <span class="hljs-comment">// forEach(Consumer c)â€”â€”å†…éƒ¨è¿­ä»£</span><br>    employees.stream().forEach(System.out::println);<br><br>    <span class="hljs-comment">//ä½¿ç”¨é›†åˆçš„éå†æ“ä½œ</span><br>    employees.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å½’çº¦</strong></p><p>å¤‡æ³¨ï¼šmap å’Œ reduce çš„è¿æ¥é€šå¸¸ç§°ä¸º map-reduce æ¨¡å¼ï¼Œå›  Googleç”¨å®ƒæ¥è¿›è¡Œç½‘ç»œæœç´¢è€Œå‡ºåã€‚</p> <img src="image-20220925200039053.png" alt="image-20220925200039053" style="zoom:67%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//2-å½’çº¦</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// reduce(T identity, BinaryOperator)â€”â€”å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› T</span><br>    <span class="hljs-comment">// ç»ƒä¹ 1ï¼šè®¡ç®—1-10çš„è‡ªç„¶æ•°çš„å’Œ</span><br>    List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>);<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> list.stream().reduce(<span class="hljs-number">0</span>, Integer::sum);<br>    System.out.println(sum);<br><br>    <span class="hljs-comment">// reduce(BinaryOperator) â€”â€”å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Optional&lt;T&gt;</span><br>    <span class="hljs-comment">// ç»ƒä¹ 2ï¼šè®¡ç®—å…¬å¸æ‰€æœ‰å‘˜å·¥å·¥èµ„çš„æ€»å’Œ</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    Stream&lt;Double&gt; salaryStream = employees.stream().map(Employee::getSalary);<br>    <span class="hljs-comment">// Optional&lt;Double&gt; sumMoney = salaryStream.reduce(Double::sum);</span><br>    Optional&lt;Double&gt; sumMoney = salaryStream.reduce((d1,d2) -&gt; d1 + d2);<br>    System.out.println(sumMoney.get());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ”¶é›†</strong></p> <img src="image-20220925201152414.png" alt="image-20220925201152414" style="zoom:60%;" /><p>Collector æ¥å£ä¸­æ–¹æ³•çš„å®ç°å†³å®šäº†å¦‚ä½•å¯¹æµæ‰§è¡Œæ”¶é›†çš„æ“ä½œ(å¦‚æ”¶é›†åˆ° Listã€Setã€Map)ã€‚<br>å¦å¤–ï¼Œ Collectors å®ç”¨ç±»æä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå¸¸è§æ”¶é›†å™¨å®ä¾‹ï¼Œå…·ä½“æ–¹æ³•ä¸å®ä¾‹å¦‚ä¸‹è¡¨ï¼š</p> <img src="image-20220925201237667.png" alt="image-20220925201237667" style="zoom:66%;" /> <img src="image-20220925201407366.png" alt="image-20220925201407366" style="zoom:68%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//3-æ”¶é›†</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// collect(Collector c)â€”â€”å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ã€‚æ¥æ”¶ä¸€ä¸ª Collectoræ¥å£çš„å®ç°ï¼Œç”¨äºç»™Streamä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³•</span><br>    <span class="hljs-comment">// ç»ƒä¹ 1ï¼šæŸ¥æ‰¾å·¥èµ„å¤§äº6000çš„å‘˜å·¥ï¼Œç»“æœè¿”å›ä¸ºä¸€ä¸ªListæˆ–Set</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    List&lt;Employee&gt; employeeList = employees.stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).collect(Collectors.toList());<br>    employeeList.forEach(System.out::println);<br>    System.out.println();<br>    <br>    Set&lt;Employee&gt; employeeSet = employees.stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).collect(Collectors.toSet());<br>    employeeSet.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="Optionalç±»"><a href="#Optionalç±»" class="headerlink" title="Optionalç±»"></a>Optionalç±»</h3><p>Optional&lt;T&gt; ç±»(java.util.Optional) æ˜¯ä¸€ä¸ªå®¹å™¨ç±»ï¼Œå®ƒå¯ä»¥ä¿å­˜ç±»å‹Tçš„å€¼ï¼Œä»£è¡¨è¿™ä¸ªå€¼å­˜åœ¨ã€‚æˆ–è€…ä»…ä»…ä¿å­˜nullï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼ä¸å­˜åœ¨ã€‚</p><p>åŸæ¥ç”¨ null è¡¨ç¤ºä¸€ä¸ªå€¼ä¸å­˜åœ¨ï¼Œç°åœ¨ Optional å¯ä»¥æ›´å¥½çš„è¡¨è¾¾è¿™ä¸ªæ¦‚å¿µã€‚å¹¶ä¸”å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p>Optionalç±»çš„Javadocæè¿°å¦‚ä¸‹ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºnullçš„å®¹å™¨å¯¹è±¡ã€‚</p><p>å¦‚æœå€¼å­˜åœ¨åˆ™isPresent()æ–¹æ³•ä¼šè¿”å›trueï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚</p><ul><li>Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚</li><li>åˆ›å»ºOptional<ul><li>Optional.of(T t) : åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹ï¼Œt å¿…é¡» éç©ºï¼›</li><li>Optional.empty() : åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹</li><li>Optional.ofNullable(T t) ï¼št å¯ä»¥ä¸º null</li></ul></li><li>åˆ¤æ–­Optional å®¹å™¨ä¸­æ˜¯å¦åŒ…å«å¯¹è±¡ï¼š<ul><li>boolean isPresent() : åˆ¤æ–­æ˜¯å¦åŒ…å«å¯¹è±¡</li><li>void ifPresent(Consumer&lt;? super T&gt; consumer) ï¼šå¦‚æœæœ‰å€¼ï¼Œå°±æ‰§è¡ŒConsumeræ¥å£çš„å®ç°ä»£ç ï¼Œå¹¶ä¸”è¯¥å€¼ä¼šä½œä¸ºå‚æ•°ä¼ ç»™å®ƒã€‚</li></ul></li><li>è·å–Optional å®¹å™¨çš„å¯¹è±¡ï¼š</li><li>T get() : å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™æŠ›å¼‚å¸¸</li><li>T orElse(T other) ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›æŒ‡å®šçš„otherå¯¹è±¡ã€‚</li><li>T orElseGet(Supplier&lt;? extends T&gt; other) ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›ç”±Supplieræ¥å£å®ç°æä¾›çš„å¯¹è±¡ã€‚</li><li>T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™æŠ›å‡ºç”±Supplieræ¥å£å®ç°æä¾›çš„å¼‚å¸¸ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">Optionalç±»ï¼šä¸ºäº†åœ¨ç¨‹åºä¸­é¿å…å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸è€Œåˆ›å»ºçš„ã€‚</span><br><span class="hljs-comment">å¸¸ç”¨æ–¹æ³•ï¼š</span><br><span class="hljs-comment">Optional.of(T t) : åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹ï¼Œtå¿…é¡»éç©ºï¼›</span><br><span class="hljs-comment">Optional.empty() : åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹</span><br><span class="hljs-comment">Optional.ofNullable(T t)ï¼štå¯ä»¥ä¸ºnull</span><br><span class="hljs-comment">Optional.orElse(T t)ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›æŒ‡å®šçš„otherå¯¹è±¡ã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>();<br>    <span class="hljs-comment">//Girl girl = null;</span><br>    <span class="hljs-comment">//of(T t):ä¿è¯tæ˜¯éç©ºçš„</span><br>    Optional&lt;Girl&gt; optionalGirl = Optional.of(girl);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>();<br>    <span class="hljs-comment">//Girl girl = null;</span><br>    <span class="hljs-comment">//ofNullable(T t)ï¼štå¯ä»¥ä¸ºnull</span><br>    Optional&lt;Girl&gt; optionalGirl = Optional.ofNullable(girl);<br>    System.out.println(optionalGirl);<br><br>    <span class="hljs-comment">//orElse(T t1):å¦‚æœå½“å‰çš„Optionalå†…éƒ¨å°è£…çš„tæ˜¯éç©ºçš„ï¼Œåˆ™è¿”å›å†…éƒ¨çš„t.</span><br>    <span class="hljs-comment">//å¦‚æœå†…éƒ¨çš„tæ˜¯ç©ºçš„ï¼Œåˆ™è¿”å›orElse()æ–¹æ³•ä¸­çš„å‚æ•°t1.</span><br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl1</span> <span class="hljs-operator">=</span> optionalGirl.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;èµµä¸½é¢–&quot;</span>));<br>    System.out.println(girl1);<br>&#125;<br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName</span><span class="hljs-params">(Boy boy)</span>&#123;<br>    <span class="hljs-keyword">return</span> boy.getGirl().getName();<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>();<br>    boy = <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName(boy);<br>    System.out.println(girlName);<br><br>&#125;<br><br><span class="hljs-comment">//ä¼˜åŒ–ä»¥åçš„getGirlName():</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName1</span><span class="hljs-params">(Boy boy)</span>&#123;<br>    <span class="hljs-keyword">if</span>(boy != <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> boy.getGirl();<br>        <span class="hljs-keyword">if</span>(girl != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> girl.getName();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>();<br>    boy = <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName1(boy);<br>    System.out.println(girlName);<br>&#125;<br><br><span class="hljs-comment">//ä½¿ç”¨Optionalç±»çš„getGirlName():</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName2</span><span class="hljs-params">(Boy boy)</span>&#123;<br>    Optional&lt;Boy&gt; boyOptional = Optional.ofNullable(boy);<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy1</span> <span class="hljs-operator">=</span> boyOptional.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;è¿ªä¸½çƒ­å·´&quot;</span>)));<br>    <span class="hljs-comment">//æ­¤æ—¶çš„boy1ä¸€å®šéç©º</span><br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> boy1.getGirl();<br>    Optional&lt;Girl&gt; girlOptional = Optional.ofNullable(girl);<br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl1</span> <span class="hljs-operator">=</span> girlOptional.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;å¤åŠ›å¨œæ‰&quot;</span>));<br>    <span class="hljs-comment">//æ­¤æ—¶çš„girl1ä¸€å®šéç©º</span><br>    <span class="hljs-keyword">return</span> girl1.getName();<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>();<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;å°å¥³å­©&quot;</span>));<br>    <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName2(boy);<br>    System.out.println(girlName);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="JDBC-æ¦‚è¿°"><a href="#JDBC-æ¦‚è¿°" class="headerlink" title="JDBC æ¦‚è¿°"></a>JDBC æ¦‚è¿°</h3><ul><li><p>JDBC API æ˜¯ä¸€ç³»åˆ—çš„æ¥å£ï¼Œå®ƒç»Ÿä¸€å’Œè§„èŒƒäº†åº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„è¿æ¥ã€æ‰§è¡Œ SQL è¯­å¥ï¼Œå¹¶å¾—åˆ°è¿”å›ç»“æœç­‰å„ç±»æ“ä½œï¼Œç›¸å…³ç±»å’Œæ¥å£åœ¨ java.sql ä¸ javax.sql åŒ…ä¸­</p></li><li><p>JDBC ä¸ºè®¿é—®ä¸åŒçš„æ•°æ®åº“æä¾›äº†ç»Ÿä¸€çš„æ¥å£ï¼Œä¸ºä½¿ç”¨è€…å±è”½äº†ç»†èŠ‚é—®é¢˜</p></li><li><p>Java ç¨‹åºå‘˜ä½¿ç”¨ JDBCï¼Œå¯ä»¥è¿æ¥ä»»ä½•æä¾›äº† JDBC é©±åŠ¨ç¨‹åºçš„æ•°æ®åº“ç³»ç»Ÿï¼Œä»è€Œå®Œæˆå¯¹æ•°æ®åº“çš„å„ç§æ“ä½œ</p></li><li><p>JDBC æ˜¯ Java æä¾›ä¸€å¥—ç”¨äºæ•°æ®åº“æ“ä½œçš„ API ï¼ŒJava ç¨‹åºå‘˜åªéœ€è¦é¢å‘è¿™å¥—æ¥å£ç¼–ç¨‹å³å¯ã€‚</p><p>ä¸åŒçš„æ•°æ®åº“å‚å•†ï¼Œéœ€è¦é’ˆå¯¹è¿™å¥—æ¥å£æä¾›ä¸åŒå®ç°</p></li><li><p>JDBC çš„åŸºæœ¬åŸç†å›¾ï¼ˆé‡è¦ï¼‰</p> <img src="image-20221010214327674.png" alt="image-20221010214327674" style="zoom: 45%;" /> <img src="image-20221010220350562.png" alt="image-20221010220350562" style="zoom:80%;" /></li></ul><h3 id="JDBC-ç¨‹åºç¼–å†™æ­¥éª¤"><a href="#JDBC-ç¨‹åºç¼–å†™æ­¥éª¤" class="headerlink" title="JDBC ç¨‹åºç¼–å†™æ­¥éª¤"></a>JDBC ç¨‹åºç¼–å†™æ­¥éª¤</h3><ol><li>æ³¨å†Œé©±åŠ¨ â€”â€” åŠ è½½ Driver ç±»</li><li>è·å–è¿æ¥ â€”â€” å¾—åˆ° Connection</li><li>æ‰§è¡Œå¢åˆ æ”¹æŸ¥ â€”â€” å‘é€ SQL ç»™ mysql æ‰§è¡Œ</li><li>é‡Šæ”¾èµ„æº â€”â€” å…³é—­ç›¸å…³è¿æ¥</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *å¿«é€Ÿå…¥é—¨</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Driver;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Jdbc01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-comment">//å‰ç½®å·¥ä½œï¼šåœ¨é¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å¦‚ libs</span><br>        <span class="hljs-comment">//å°† mysql.jar æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ï¼Œç‚¹å‡» add to project..åŠ å…¥åˆ°é¡¹ç›®ä¸­</span><br><br>        <span class="hljs-comment">//1.æ³¨å†Œé©±åŠ¨</span><br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Driver</span>();<br><br>        <span class="hljs-comment">//2.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-comment">//è§£è¯»ï¼š</span><br>        <span class="hljs-comment">//(1) jdbc:mysql:// è§„å®šå¥½çš„ï¼Œè¡¨ç¤ºä¸€ä¸ªåè®®ï¼Œé€šè¿‡jdbcçš„æ–¹å¼è¿æ¥mysql</span><br>        <span class="hljs-comment">//(2) localhost  è¡¨ç¤ºä¸»æœºï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªIPåœ°å€</span><br>        <span class="hljs-comment">//(3) 3306  è¡¨ç¤ºmysqlç›‘å¬çš„ç«¯å£</span><br>        <span class="hljs-comment">//(4) lyh_db02 è¡¨ç¤ºè¦è¿æ¥åˆ°mysqlçš„å“ªä¸ªæ•°æ®åº“</span><br>        <span class="hljs-comment">//(5) mysqlçš„è¿æ¥çš„æœ¬è´¨å°±æ˜¯å‰é¢å­¦è¿‡çš„ socket è¿æ¥</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br>        <span class="hljs-comment">//å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥åˆ°Propertieså¯¹è±¡</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//è¯´æ˜ï¼šuser å’Œ password æ˜¯è§„å®šå¥½çš„é”®ï¼Œå€¼å¯ä»¥æ ¹æ®å®é™…æƒ…å†µå†™</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);  <span class="hljs-comment">//ç”¨æˆ·</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;lyh&quot;</span>);  <span class="hljs-comment">//å¯†ç </span><br>        <span class="hljs-comment">//å¾—åˆ°çš„connectå°±æ˜¯ä¸€ä¸ªç½‘ç»œè¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connect</span> <span class="hljs-operator">=</span> driver.connect(url, properties);<br><br>        <span class="hljs-comment">//3.æ‰§è¡Œsql</span><br><span class="hljs-comment">//        String sql = &quot;insert into actor values(null,&#x27;åˆ˜å¾·å&#x27;,&#x27;ç”·&#x27;,&#x27;1970-11-11&#x27;,&#x27;110&#x27;)&quot;;</span><br><span class="hljs-comment">//        String sql = &quot;update actor set name = &#x27;å‘¨æ˜Ÿé©°&#x27; where id = 1&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from actor where id = 1&quot;</span>;<br>        <span class="hljs-comment">//statementç”¨äºæ‰§è¡Œé™æ€SQLè¯­å¥å¹¶è¿”å›å…¶ç”Ÿæˆçš„ç»“æ„å¯¹è±¡</span><br><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connect.createStatement();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> statement.executeUpdate(sql);  <span class="hljs-comment">//å¦‚æœæ˜¯dmlè¯­å¥ï¼Œè¿”å›çš„å°±æ˜¯å½±å“è¡Œæ•°</span><br>        System.out.println(rows&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;æˆåŠŸ&quot;</span>:<span class="hljs-string">&quot;å¤±è´¥&quot;</span>);<br><br>        <span class="hljs-comment">//4.å…³é—­è¿æ¥èµ„æº</span><br>        statement.close();<br>        connect.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è·å–æ•°æ®åº“è¿æ¥-5-ç§æ–¹å¼"><a href="#è·å–æ•°æ®åº“è¿æ¥-5-ç§æ–¹å¼" class="headerlink" title="è·å–æ•°æ®åº“è¿æ¥ 5 ç§æ–¹å¼"></a>è·å–æ•°æ®åº“è¿æ¥ 5 ç§æ–¹å¼</h3><ul><li><p>æ–¹å¼ä¸€ï¼šè·å– Driver å®ç°ç±»å¯¹è±¡  ï¼ˆä¼šç›´æ¥ä½¿ç”¨com.mysql.jdbc.Driver()ï¼Œå±äºé™æ€åŠ è½½ï¼Œçµæ´»æ€§å·®ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.mysql.jdbc.Driver();<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc_db&quot;</span>;<br><br><span class="hljs-type">Properties</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>info.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);<br>info.setProperty(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;hsp&quot;</span>);<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> driver.connect(url,info);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼äºŒï¼šä½¿ç”¨åå°„æœºåˆ¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Class</span> <span class="hljs-variable">clazz</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver)clazz.newInstance();<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc_db&quot;</span>;<br><br><span class="hljs-type">Properties</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>info.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);<br>info.setProperty(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;hsp&quot;</span>);<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> driver.connect(url,info);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨DriverManageræ›¿æ¢Driver</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Class</span> <span class="hljs-variable">clazz</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver) clazz.newInstance();<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql//localhost:3306/jdbc_db&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br>DriverManager.registerDriver(driver);<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼å››ï¼šä½¿ç”¨ Class.forName è‡ªåŠ¨å®Œæˆæ³¨å†Œé©±åŠ¨ï¼Œç®€åŒ–ä»£ç  &#x3D;&gt; åˆ†ææºç </p><p>æç¤ºï¼š</p><ul><li>mysql é©±åŠ¨ 5.1.6 åŠä»¥å å¯ä»¥æ— éœ€ Class.forName(â€œcom.mysql.jdbc.Driverâ€);</li><li>ä»jdk1.5ä»¥åä½¿ç”¨äº†jdbc4ï¼Œä¸åœ¨éœ€è¦æ˜¾å¼è°ƒç”¨class.forName() æ³¨å†Œé©±åŠ¨ï¼Œè€Œæ˜¯è‡ªåŠ¨è°ƒç”¨é©±åŠ¨ jar åŒ…ä¸‹çš„ META-INF\services\java.sql.Driver æ–‡æœ¬ç§çš„ç±»åç§°å–æ³¨å†Œ</li><li>å»ºè®®è¿˜æ˜¯å†™ä¸Š Class.forName(â€œcom.mysql.jdbc.Driverâ€);  æ›´åŠ æ˜ç¡®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc_db&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼äº”ï¼ˆæ¨èï¼‰ï¼šåœ¨æ–¹å¼å››çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œè¿æ¥æ•°æ®åº“æ›´çµæ´»</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># mysql.propersties</span><br><span class="hljs-attr">user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">lyh</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/lyh_db02</span><br><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>ä»£ç ï¼šåˆ†æjavaè¿æ¥mysqlçš„5ç§æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ†æjavaè¿æ¥mysqlçš„5ç§æ–¹å¼</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Driver;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcConn</span> &#123;<br>    <span class="hljs-comment">//æ–¹å¼ä¸€</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect01</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException&#123;<br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Driver</span>();<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br><br>        <span class="hljs-comment">//å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥åˆ°Propertieså¯¹è±¡</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//è¯´æ˜ï¼šuser å’Œ password æ˜¯è§„å®šå¥½çš„é”®ï¼Œå€¼å¯ä»¥æ ¹æ®å®é™…æƒ…å†µå†™</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);  <span class="hljs-comment">//ç”¨æˆ·</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;lyh&quot;</span>);  <span class="hljs-comment">//å¯†ç </span><br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connect</span> <span class="hljs-operator">=</span> driver.connect(url,properties);<br>        System.out.println(connect);<br>    &#125;<br><br>    <span class="hljs-comment">//æ–¹å¼äºŒ</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect02</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨åå°„åŠ è½½Driverç±»ï¼ŒåŠ¨æ€åŠ è½½ï¼Œæ›´åŠ çµæ´»ï¼Œå‡å°‘ä¾èµ–æ€§</span><br>        Class&lt;?&gt; aClass = Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver) aClass.newInstance();<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br><br>        <span class="hljs-comment">//å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥åˆ°Propertieså¯¹è±¡</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//è¯´æ˜ï¼šuser å’Œ password æ˜¯è§„å®šå¥½çš„é”®ï¼Œå€¼å¯ä»¥æ ¹æ®å®é™…æƒ…å†µå†™</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);  <span class="hljs-comment">//ç”¨æˆ·</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;lyh&quot;</span>);  <span class="hljs-comment">//å¯†ç </span><br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connect</span> <span class="hljs-operator">=</span> driver.connect(url,properties);<br>        System.out.println(connect);<br>    &#125;<br><br>    <span class="hljs-comment">//æ–¹å¼ä¸‰ ä½¿ç”¨DriverManager æ›¿ä»£ Diver è¿›è¡Œç»Ÿä¸€ç®¡ç†</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect03</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨åå°„åŠ è½½Driver</span><br>        Class&lt;?&gt; aClass = Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver)aClass.newInstance();<br><br>        <span class="hljs-comment">//åˆ›å»ºurlå’Œuserå’Œpassword</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br>        DriverManager.registerDriver(driver); <span class="hljs-comment">//æ³¨å†ŒDriveré©±åŠ¨</span><br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>        System.out.println(conn);<br>    &#125;<br><br>    <span class="hljs-comment">//æ–¹å¼å›› ä½¿ç”¨ Class.forName è‡ªåŠ¨å®Œæˆæ³¨å†Œé©±åŠ¨ï¼Œç®€åŒ–ä»£ç </span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect04</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, SQLException &#123;<br>        <span class="hljs-comment">//ä½¿ç”¨åå°„åŠ è½½ Driver ç±»</span><br>        <span class="hljs-comment">//åœ¨åŠ è½½Driverç±»æ—¶ï¼Œè‡ªåŠ¨å®Œæˆæ³¨å†Œ</span><br>        <span class="hljs-comment">/* æºç ï¼š</span><br><span class="hljs-comment">        1.é™æ€ä»£ç å—ï¼Œåœ¨ç±»åŠ è½½æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-comment">        2.DriverManager.registerDriver(new Driver());</span><br><span class="hljs-comment">        3.å› æ­¤æ³¨å†Œdriverçš„å·¥ä½œå·²ç»å®Œæˆ</span><br><span class="hljs-comment">        static &#123;</span><br><span class="hljs-comment">            try &#123;</span><br><span class="hljs-comment">                DriverManager.registerDriver(new Driver());</span><br><span class="hljs-comment">            &#125; catch (SQLException var1) &#123;</span><br><span class="hljs-comment">                throw new RuntimeException(&quot;Can&#x27;t register driver!&quot;);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         &#125;</span><br><span class="hljs-comment">         */</span><br>        Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºurlå’Œuserå’Œpassword</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>        System.out.println(conn);<br>    &#125;<br><br>    <span class="hljs-comment">//æ–¹å¼äº” åœ¨æ–¹å¼å››çš„åŸºç¡€ä¸Šæ”¹è¿›ï¼Œå¢åŠ é…ç½®æ–‡ä»¶ï¼Œè®©è¿æ¥mysqlæ›´åŠ çµæ´»</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect05</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException, SQLException &#123;<br>        <span class="hljs-comment">//é€šè¿‡Propertieså¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//è·å–ç›¸å…³çš„å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br><br>        Class.forName(driver);<br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br><br>        System.out.println(connection);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ResultSet-ç»“æœé›†"><a href="#ResultSet-ç»“æœé›†" class="headerlink" title="ResultSet[ç»“æœé›†]"></a>ResultSet[ç»“æœé›†]</h3><ul><li>è¡¨ç¤ºæ•°æ®åº“ç»“æœé›†çš„æ•°æ®è¡¨ï¼Œé€šå¸¸é€šè¿‡æ‰§è¡ŒæŸ¥è¯¢æ•°æ®åº“çš„è¯­å¥ç”Ÿæˆ</li><li>ResultSetå¯¹è±¡ä¿æŒä¸€ä¸ªå…‰æ ‡æŒ‡å‘å…¶å½“å‰çš„æ•°æ®è¡Œã€‚æœ€åˆï¼Œå…‰æ ‡ä½äºç¬¬ä¸€è¡Œä¹‹å‰</li><li>next æ–¹æ³• å°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œå¹¶ä¸”ç”±äºåœ¨ ResultSet å¯¹è±¡ä¸­æ²¡æœ‰æ›´å¤šè¡Œæ—¶è¿”å› falseï¼Œå› æ­¤å¯ä»¥åœ¨ while å¾ªç¯ä¸­æ¥éå†ç»“æœé›†</li></ul> <img src="image-20221011193054014.png" alt="image-20221011193054014" style="zoom: 50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºselectè¯­å¥è¿”å›ResultSetï¼Œå¹¶å–å‡ºç»“æœ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.resultset;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultSet_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">//é€šè¿‡Propertieså¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//è·å–ç›¸å…³çš„å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        <span class="hljs-comment">//1.æ³¨å†Œé©±åŠ¨</span><br>        Class.forName(driver);<br>        <span class="hljs-comment">//2.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br>        <span class="hljs-comment">//3.å¾—åˆ°Statement</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br>        <span class="hljs-comment">//4.ç»„ç»‡SQL</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select id,name,sex,borndate from actor&quot;</span>;<br>        <span class="hljs-comment">//æ‰§è¡Œç»™å®šçš„SQLè¯­å¥ï¼Œè¯¥è¯­å¥è¿”å›å•ä¸ªResultSetå¯¹è±¡</span><br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);<br>        <span class="hljs-comment">//5.ä½¿ç”¨whileå–å‡ºæ•°æ®</span><br>        <span class="hljs-keyword">while</span>(resultSet.next())&#123; <span class="hljs-comment">//è®©å…‰æ ‡åç§»ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šè¡Œï¼Œåˆ™è¿”å›false</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> resultSet.getInt(<span class="hljs-number">1</span>);<span class="hljs-comment">//è·å–è¯¥è¡Œçš„ç¬¬1åˆ—</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-number">2</span>);<span class="hljs-comment">//è¯¥è¡Œç¬¬2åˆ—</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-number">3</span>);<span class="hljs-comment">//</span><br>            <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> resultSet.getDate(<span class="hljs-number">4</span>);<br>            System.out.println(id + <span class="hljs-string">&quot;\t&quot;</span> + name + <span class="hljs-string">&quot;\t&quot;</span> + sex + <span class="hljs-string">&quot;\t&quot;</span> + date);<br>        &#125;<br>        <span class="hljs-comment">//6.å…³é—­è¿æ¥</span><br>        resultSet.close();<br>        statement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Statement"><a href="#Statement" class="headerlink" title="Statement"></a>Statement</h3><ul><li>Statementå¯¹è±¡ ç”¨äºæ‰§è¡Œé™æ€SQLè¯­å¥å¹¶è¿”å›å…¶ç”Ÿæˆçš„ç»“æœçš„å¯¹è±¡</li><li>åœ¨è¿æ¥å»ºç«‹åï¼Œéœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œè®¿é—®ï¼Œæ‰§è¡Œå‘½åæˆ–æ˜¯SQLè¯­å¥ï¼Œå¯ä»¥é€šè¿‡<ul><li>Statement [å­˜åœ¨SQLæ³¨å…¥]</li><li><strong>PreparedStatement</strong> [é¢„å¤„ç†]</li><li>CallableStatement [å­˜å‚¨è¿‡ç¨‹]</li></ul></li><li>Statementå¯¹è±¡æ‰§è¡ŒSQLè¯­å¥ï¼Œå­˜åœ¨ <strong>SQLæ³¨å…¥</strong> é£é™©</li><li>SQLæ³¨å…¥æ˜¯åˆ©ç”¨æŸäº›ç³»ç»Ÿæ²¡æœ‰å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œå……åˆ†çš„æ£€æŸ¥ï¼Œè€Œåœ¨ç”¨æˆ·è¾“å…¥æ•°æ®ä¸­æ³¨å…¥éæ³•çš„SQLè¯­å¥æ®µæˆ–å‘½ä»¤ï¼Œæ¶æ„æ”»å‡»æ•°æ®åº“</li><li>è¦é˜²èŒƒSQLæ³¨å…¥ï¼Œåªè¦ç”¨ PreparedStatementï¼ˆä»Statementæ‰©å±•è€Œæ¥ï¼‰å–ä»£Statementå°±å¯ä»¥äº†</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># æ¼”ç¤º sqlæ³¨å…¥<br>-- åˆ›å»ºä¸€å¼ è¡¨<br>CREATE TABLE admin ( -- ç®¡ç†å‘˜è¡¨<br>NAME VARCHAR(32) NOT NULL UNIQUE,<br>pwd VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;) CHARACTER SET utf8;<br><br>-- æ·»åŠ æ•°æ®<br>INSERT INTO admin VALUES(&#x27;tom&#x27;, &#x27;123&#x27;);<br><br>-- æŸ¥æ‰¾æŸä¸ªç®¡ç†æ˜¯å¦å­˜åœ¨<br>SELECT *<br>FROM admin<br>WHERE NAME = &#x27;tom&#x27; AND pwd = &#x27;123&#x27;<br><br>-- SQL<br>-- è¾“å…¥ç”¨æˆ·å ä¸º 1&#x27; or<br>-- è¾“å…¥ä¸‡èƒ½å¯†ç  ä¸º or &#x27;1&#x27;= &#x27;1<br>SELECT *<br>FROM admin<br>WHERE NAME = &#x27;1&#x27; OR &#x27;AND pwd = &#x27; OR &#x27;1&#x27;= &#x27;1&#x27;<br>SELECT * FROM admin<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.statement;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Statement_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-comment">//è®©ç”¨æˆ·è¾“å…¥ç®¡ç†å‘˜åå’Œå¯†ç </span><br>        <span class="hljs-comment">//å¦‚æœå¸Œæœ›çœ‹åˆ°SQLæ³¨å…¥ï¼Œéœ€è¦ç”¨nextLine()</span><br>        <span class="hljs-comment">//next()å½“æ¥æ”¶åˆ°ç©ºæ ¼æˆ–å•å¼•å·å°±è¡¨ç¤ºç»“æŸ</span><br>        System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥ç®¡ç†å‘˜åï¼š&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_name</span> <span class="hljs-operator">=</span> scanner.nextLine();<br>        System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼š&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_pwd</span> <span class="hljs-operator">=</span> scanner.nextLine();<br><br>        <span class="hljs-comment">//é€šè¿‡Propertieså¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//è·å–ç›¸å…³çš„å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        <span class="hljs-comment">//1.æ³¨å†Œé©±åŠ¨</span><br>        Class.forName(driver);<br>        <span class="hljs-comment">//2.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br>        <span class="hljs-comment">//3.å¾—åˆ°Statement</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br>        <span class="hljs-comment">//4.ç»„ç»‡SQL</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select name,pwd from admin where name = &#x27;&quot;</span><br>                + admin_name + <span class="hljs-string">&quot;&#x27; and pwd = &#x27;&quot;</span> +admin_pwd+ <span class="hljs-string">&quot;&#x27;&quot;</span>;<br><br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);<br>        <span class="hljs-keyword">if</span>(resultSet.next())&#123; <span class="hljs-comment">//å¦‚æœæŸ¥è¯¢åˆ°ä¸€æ¡è®°å½•ï¼Œåˆ™è¯´æ˜è¯¥ç®¡ç†å‘˜å­˜åœ¨</span><br>            System.out.println(<span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;ç™»å½•å¤±è´¥&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//å…³é—­è¿æ¥</span><br>        resultSet.close();<br>        statement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">String sql = &quot;SELECT COUNT(*) FROM admin WHERE username =? AND PASSWORD=?&quot;;<br></code></pre></td></tr></table></figure><ul><li>PreparedStatementæ‰§è¡Œçš„SQLè¯­å¥ä¸­çš„å‚æ•°ç”¨é—®å·ï¼ˆ?ï¼‰æ¥è¡¨ç¤ºï¼Œè°ƒç”¨ PrepareStatement å¯¹è±¡çš„ setXXX() æ–¹æ³•æ¥è®¾ç½®è¿™äº›å‚æ•°ã€‚setXXX() æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è®¾ç½®çš„ SQL è¯­å¥ä¸­çš„å‚æ•°çš„ç´¢å¼•ï¼ˆä» 1 å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯è®¾ç½®çš„ SQL è¯­å¥ä¸­çš„å‚æ•°çš„å€¼</li><li>è°ƒç”¨ executeQuery()ï¼Œæ‰§è¡ŒæŸ¥è¯¢ï¼Œè¿”å› ResultSet å¯¹è±¡</li><li>è°ƒç”¨ executeUpdate()ï¼Œæ‰§è¡Œæ›´æ–°ï¼ŒåŒ…æ‹¬å¢ã€åˆ ã€ä¿®æ”¹ï¼Œè¿”å›å½±å“çš„è¡Œæ•°</li></ul><p><strong>é¢„å¤„ç†å¥½å¤„ï¼š</strong></p><ul><li>ä¸å†ä½¿ç”¨  + æ‹¼æ¥SQLè¯­å¥ï¼Œå‡å°‘è¯­æ³•é”™è¯¯</li><li>æœ‰æ•ˆè§£å†³äº†SQLæ³¨å…¥é—®é¢˜</li><li>å¤§å¤§å‡å°‘äº†ç¼–è¯‘æ¬¡æ•°ï¼Œæ•ˆç‡è¾ƒé«˜</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ¼”ç¤º PreparedStatement ä½¿ç”¨ ï¼ˆæŸ¥è¯¢ï¼‰</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.preparedstatement_;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreparedStatement</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-comment">//è®©ç”¨æˆ·è¾“å…¥ç®¡ç†å‘˜åå’Œå¯†ç </span><br>        <span class="hljs-comment">//å¦‚æœå¸Œæœ›çœ‹åˆ°SQLæ³¨å…¥ï¼Œéœ€è¦ç”¨nextLine()</span><br>        <span class="hljs-comment">//next()å½“æ¥æ”¶åˆ°ç©ºæ ¼æˆ–å•å¼•å·å°±è¡¨ç¤ºç»“æŸ</span><br>        System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥ç®¡ç†å‘˜åï¼š&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_name</span> <span class="hljs-operator">=</span> scanner.nextLine();<br>        System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼š&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_pwd</span> <span class="hljs-operator">=</span> scanner.nextLine();<br><br>        <span class="hljs-comment">//é€šè¿‡Propertieså¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br><br>        <span class="hljs-comment">//è·å–ç›¸å…³çš„å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br><br>        <span class="hljs-comment">//1.æ³¨å†Œé©±åŠ¨</span><br>        Class.forName(driver);<br><br>        <span class="hljs-comment">//2.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br><br>        <span class="hljs-comment">//3.å¾—åˆ°PreparedStatement</span><br>        <span class="hljs-comment">//3.1ç»„ç»‡SQLï¼ŒSQLè¯­å¥ä¸­çš„ ? å°±ç›¸å½“äºå ä½ç¬¦</span><br>        <span class="hljs-comment">// æŸ¥è¯¢æ“ä½œ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select name,pwd from admin where name =? and pwd =? &quot;</span>;<br><br>        <span class="hljs-comment">//3.2preparedStatementå¯¹è±¡å®ç°äº†PreparedStatementæ¥å£çš„å®ç°ç±»çš„å¯¹è±¡</span><br>        java.sql.<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        <span class="hljs-comment">//3.3ç»™ ? èµ‹å€¼</span><br>        preparedStatement.setString(<span class="hljs-number">1</span>,admin_name);<br>        preparedStatement.setString(<span class="hljs-number">2</span>,admin_pwd);<br><br>        <span class="hljs-comment">//4.æ‰§è¡Œselectè¯­å¥ï¼Œä½¿ç”¨executeQuery()</span><br>        <span class="hljs-comment">//  å¦‚æœæ‰§è¡Œçš„æ˜¯dmlï¼Œä½¿ç”¨ executeUpdate()</span><br>        <span class="hljs-comment">//  è¿™é‡Œæ‰§è¡ŒexecuteQueryæ—¶ï¼Œä¸è¦å†å†™sql</span><br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> preparedStatement.executeQuery();<br>        <span class="hljs-keyword">if</span>(resultSet.next())&#123; <span class="hljs-comment">//å¦‚æœæŸ¥è¯¢åˆ°ä¸€æ¡è®°å½•ï¼Œåˆ™è¯´æ˜è¯¥ç®¡ç†å‘˜å­˜åœ¨</span><br>            System.out.println(<span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;ç™»å½•å¤±è´¥&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//å…³é—­è¿æ¥</span><br>        resultSet.close();<br>        preparedStatement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ¼”ç¤º PreparedStatement ä½¿ç”¨ dml è¯­å¥</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.preparedstatement_;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreparedStatementDML_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-comment">//è®©ç”¨æˆ·è¾“å…¥ç®¡ç†å‘˜åå’Œå¯†ç </span><br>        <span class="hljs-comment">//å¦‚æœå¸Œæœ›çœ‹åˆ°SQLæ³¨å…¥ï¼Œéœ€è¦ç”¨nextLine()</span><br>        <span class="hljs-comment">//next()å½“æ¥æ”¶åˆ°ç©ºæ ¼æˆ–å•å¼•å·å°±è¡¨ç¤ºç»“æŸ</span><br>        System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥è¦åˆ é™¤çš„ç®¡ç†å‘˜åï¼š&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_name</span> <span class="hljs-operator">=</span> scanner.nextLine();<br><span class="hljs-comment">//        System.out.print(&quot;è¯·è¾“å…¥ç®¡ç†å‘˜æ–°å¯†ç ï¼š&quot;);</span><br><span class="hljs-comment">//        String admin_pwd = scanner.nextLine();</span><br><br>        <span class="hljs-comment">//é€šè¿‡Propertieså¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br><br>        <span class="hljs-comment">//è·å–ç›¸å…³çš„å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br><br>        <span class="hljs-comment">//1.æ³¨å†Œé©±åŠ¨</span><br>        Class.forName(driver);<br><br>        <span class="hljs-comment">//2.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br><br>        <span class="hljs-comment">//3.å¾—åˆ°PreparedStatement</span><br>        <span class="hljs-comment">//3.1ç»„ç»‡SQLï¼ŒSQLè¯­å¥ä¸­çš„ ? å°±ç›¸å½“äºå ä½ç¬¦</span><br>        <span class="hljs-comment">//æ·»åŠ è®°å½•</span><br>        <span class="hljs-comment">//String sql = &quot;insert into admin values(?, ?)&quot;;</span><br>        <span class="hljs-comment">//ä¿®æ”¹è®°å½•</span><br>        <span class="hljs-comment">//String sql = &quot;update admin set pwd =? where name =?&quot;;</span><br>        <span class="hljs-comment">//åˆ é™¤è®°å½•</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from admin where name = ? &quot;</span>;<br>        <span class="hljs-comment">//3.2preparedStatementå¯¹è±¡å®ç°äº†PreparedStatementæ¥å£çš„å®ç°ç±»çš„å¯¹è±¡</span><br>        java.sql.<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        <span class="hljs-comment">//3.3ç»™ ? èµ‹å€¼</span><br>        preparedStatement.setString(<span class="hljs-number">1</span>,admin_name);<br>        <span class="hljs-comment">//preparedStatement.setString(2,admin_name);</span><br><br>        <span class="hljs-comment">//4.æ‰§è¡Œdmlè¯­å¥ï¼Œä½¿ç”¨executeUpdate()</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> preparedStatement.executeUpdate();<br>        System.out.println(rows &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;æ‰§è¡ŒæˆåŠŸ&quot;</span> : <span class="hljs-string">&quot;æ‰§è¡Œå¤±è´¥&quot;</span>);<br><br>        <span class="hljs-comment">//å…³é—­è¿æ¥</span><br>        preparedStatement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="JDBC-çš„ç›¸å…³-API-å°ç»“"><a href="#JDBC-çš„ç›¸å…³-API-å°ç»“" class="headerlink" title="JDBC çš„ç›¸å…³ API å°ç»“"></a>JDBC çš„ç›¸å…³ API å°ç»“</h3> <img src="image-20221011220559484.png" alt="image-20221011220559484" style="zoom: 50%;" /> <img src="image-20221011220610323.png" alt="image-20221011220610323" style="zoom: 47%;" /><h3 id="å°è£…-JDBCUtils"><a href="#å°è£…-JDBCUtils" class="headerlink" title="å°è£… JDBCUtils"></a>å°è£… JDBCUtils</h3><p>å…³é—­è¿æ¥, å¾—åˆ°è¿æ¥</p><p>åœ¨ jdbc æ“ä½œä¸­ï¼Œè·å–è¿æ¥ å’Œ é‡Šæ”¾èµ„æº æ—¶ç»å¸¸ä½¿ç”¨åˆ°ï¼Œå¯ä»¥å°†å…¶å°è£… JDBC è¿æ¥çš„å·¥å…·ç±» JDBCUtils</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.utils;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Statement;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™æ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®Œæˆ mysqlçš„è¿æ¥å’Œå…³é—­èµ„æº</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtils</span> &#123;<br>    <span class="hljs-comment">//å®šä¹‰ç›¸å…³çš„å±æ€§ï¼ˆ4ä¸ªï¼‰ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä»½ï¼Œå› æ­¤åšæˆstatic</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String user; <span class="hljs-comment">//ç”¨æˆ·å</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String password; <span class="hljs-comment">//å¯†ç </span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String url;  <span class="hljs-comment">//url</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String driver; <span class="hljs-comment">//é©±åŠ¨å</span><br><br>    <span class="hljs-comment">//åœ¨staticä»£ç å—å»åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>            <span class="hljs-comment">//è¯»å–ç›¸å…³çš„å±æ€§å€¼</span><br>            user = properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>            password = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>            url = properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>            driver = properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-comment">//åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†</span><br>            <span class="hljs-comment">//1.å°†ç¼–è¯‘å¼‚å¸¸è½¬æˆè¿è¡Œå¼‚å¸¸</span><br>            <span class="hljs-comment">//2.è¿™æ—¶è°ƒç”¨è€…å¯ä»¥é€‰æ‹©æ•è·è¯¥å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é»˜è®¤å¤„ç†è¯¥å¼‚å¸¸</span><br>            <span class="hljs-keyword">throw</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿æ¥æ•°æ®åº“ï¼Œè¿”å›Connection</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> DriverManager.getConnection(url,user,password);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-comment">//1.å°†ç¼–è¯‘å¼‚å¸¸è½¬æˆè¿è¡Œå¼‚å¸¸</span><br>            <span class="hljs-comment">//2.è¿™æ—¶è°ƒç”¨è€…å¯ä»¥é€‰æ‹©æ•è·è¯¥å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é»˜è®¤å¤„ç†è¯¥å¼‚å¸¸</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//å…³é—­ç›¸å…³èµ„æº</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        1.ResultSet ç»“æœé›†</span><br><span class="hljs-comment">        2.Statement æˆ– PreparedStatement</span><br><span class="hljs-comment">        3.Connection</span><br><span class="hljs-comment">        4.å¦‚æœéœ€è¦å…³é—­èµ„æºï¼Œå°±ä¼ å…¥å¯¹è±¡ï¼Œå¦åˆ™ä¼ å…¥null</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(ResultSet set, Statement statement, Connection connection)</span>&#123;<br>        <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦ä¸ºnull</span><br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-keyword">if</span>(set!=<span class="hljs-literal">null</span>)&#123;<br>                set.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(statement!=<span class="hljs-literal">null</span>)&#123;<br>                statement.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(connection!=<span class="hljs-literal">null</span>)&#123;<br>                connection.close();<br>            &#125;<br>        &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®é™…ä½¿ç”¨ä½¿ç”¨å·¥å…·ç±»-JDBCUtils"><a href="#å®é™…ä½¿ç”¨ä½¿ç”¨å·¥å…·ç±»-JDBCUtils" class="headerlink" title="å®é™…ä½¿ç”¨ä½¿ç”¨å·¥å…·ç±» JDBCUtils"></a>å®é™…ä½¿ç”¨ä½¿ç”¨å·¥å…·ç±» JDBCUtils</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.utils;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtils_Use</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelect</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥ï¼ˆå†™è¿›tryè¯­å¥ï¼Œæ–¹ä¾¿æ•è·å¼‚å¸¸ï¼‰</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.ç»„ç»‡ä¸€ä¸ªsql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>;<br>        <br>        <span class="hljs-comment">//ï¼ˆå†™è¿›tryè¯­å¥ï¼Œæ–¹ä¾¿æ•è·å¼‚å¸¸ï¼‰</span><br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//3.åˆ›å»ºPreparedStatementå¯¹è±¡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtils.getConnection();<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setInt(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br>            <span class="hljs-comment">//æ‰§è¡Œï¼Œå¾—åˆ°ç»“æœé›†</span><br>            set = preparedStatement.executeQuery();<br>            <span class="hljs-comment">//éå†ç»“æœé›†</span><br>            <span class="hljs-keyword">while</span>(set.next())&#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> set.getInt(<span class="hljs-string">&quot;id&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;name&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;sex&quot;</span>);<br>                <span class="hljs-type">Date</span> <span class="hljs-variable">borndate</span> <span class="hljs-operator">=</span> set.getDate(<span class="hljs-string">&quot;borndate&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;phone&quot;</span>);<br>                System.out.println(id + <span class="hljs-string">&quot;\t&quot;</span> + name + <span class="hljs-string">&quot;\t&quot;</span> + sex + <span class="hljs-string">&quot;\t&quot;</span> + borndate + <span class="hljs-string">&quot;\t&quot;</span> + phone + <span class="hljs-string">&quot;\t&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­èµ„æº</span><br>            JDBCUtils.close(set,preparedStatement,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDML</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//insert, update, delete</span><br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥ï¼ˆå†™è¿›tryè¯­å¥ï¼Œæ–¹ä¾¿æ•è·å¼‚å¸¸ï¼‰</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.ç»„ç»‡ä¸€ä¸ªsql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update actor set name = ? where id = ?&quot;</span>;<br><br>        <span class="hljs-comment">//3.åˆ›å»ºPreparedStatementå¯¹è±¡ï¼ˆå†™è¿›tryè¯­å¥ï¼Œæ–¹ä¾¿æ•è·å¼‚å¸¸ï¼‰</span><br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>            connection = JDBCUtils.getConnection();<br>            preparedStatement = connection.prepareStatement(sql);<br>            <span class="hljs-comment">//ç»™å ä½ç¬¦èµ‹å€¼</span><br>            preparedStatement.setString(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å‘¨æ˜Ÿé©°&quot;</span>);<br>            preparedStatement.setInt(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>            <span class="hljs-comment">//æ‰§è¡Œ</span><br>            preparedStatement.executeUpdate();<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­èµ„æº</span><br>            JDBCUtils.close(<span class="hljs-literal">null</span>,preparedStatement,connection);<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><ul><li>JDBCç¨‹åºä¸­å½“ä¸€ä¸ª Connection å¯¹è±¡åˆ›å»ºæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼šæ¯æ¬¡æ‰§è¡Œä¸€ä¸ªSQLè¯­å¥ï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œå°±ä¼šåƒæ•°æ®åº“è‡ªåŠ¨æäº¤ï¼Œè€Œä¸èƒ½å›æ»š</li><li>JDBCç¨‹åºä¸­ä¸ºäº†è®©å¤šä¸ªSQLè¯­å¥ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œéœ€è¦ä½¿ç”¨äº‹åŠ¡</li><li>è°ƒç”¨ Connection çš„ setAutoCommit(false) å¯ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡</li><li>åœ¨æ‰€æœ‰çš„ SQL è¯­å¥éƒ½æˆåŠŸæ‰§è¡Œåï¼Œè°ƒç”¨ Connection çš„ commit() æ–¹æ³•æäº¤äº‹åŠ¡</li><li>åœ¨å…¶ä¸­æŸä¸ªæ“ä½œå¤±è´¥æˆ–å‡ºç°å¼‚å¸¸æ—¶ï¼Œè°ƒç”¨ Connection çš„ rollback() æ–¹æ³•å›æ»šäº‹åŠ¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ“ä½œè½¬è´¦çš„ä¸šåŠ¡ æ¼”ç¤º äº‹åŠ¡çš„ä½¿ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.transaction;<br><br><span class="hljs-keyword">import</span> com.jdbcStudy.utils.JDBCUtils;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Transaction_</span> &#123;<br>    <span class="hljs-comment">//æ²¡æœ‰ä½¿ç”¨äº‹åŠ¡</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">noTransaction</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.ç»„ç»‡ä¸€ä¸ªsql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance - 100 where id = 1&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance + 100 where id = 2&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//3.åˆ›å»ºPreparedStatementå¯¹è±¡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>            connection = JDBCUtils.getConnection();<br><br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//æ‰§è¡Œç¬¬ä¸€æ¡</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>/<span class="hljs-number">0</span>;  <span class="hljs-comment">//æŠ›å‡ºå¼‚å¸¸</span><br>            preparedStatement = connection.prepareStatement(sql2);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//æ‰§è¡Œç¬¬äºŒæ¡</span><br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­èµ„æº</span><br>            JDBCUtils.close(<span class="hljs-literal">null</span>,preparedStatement,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//ä½¿ç”¨äº‹åŠ¡</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">useTransaction</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.ç»„ç»‡ä¸€ä¸ªsql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance - 100 where id = 1&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance + 100 where id = 2&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//3.åˆ›å»ºPreparedStatementå¯¹è±¡</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>            connection = JDBCUtils.getConnection();<br>            <span class="hljs-comment">//å°†connectionè®¾ç½®ä¸ºä¸è‡ªåŠ¨æäº¤</span><br>            connection.setAutoCommit(<span class="hljs-literal">false</span>);  <span class="hljs-comment">//å¼€å¯äº‹åŠ¡</span><br><br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//æ‰§è¡Œç¬¬ä¸€æ¡</span><br>            <span class="hljs-comment">//int i = 1/0;  //æŠ›å‡ºå¼‚å¸¸</span><br>            preparedStatement = connection.prepareStatement(sql2);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//æ‰§è¡Œç¬¬äºŒæ¡</span><br><br>            <span class="hljs-comment">//æäº¤äº‹åŠ¡</span><br>            connection.commit();<br><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">//è¿™é‡Œå¯ä»¥è¿›è¡Œäº‹åŠ¡å›æ»šï¼Œæ’¤é”€æ‰§è¡Œçš„sql</span><br>            System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œå‘ç”Ÿäº†å¼‚å¸¸ï¼Œæ’¤é”€æ‰§è¡Œçš„sql&quot;</span>);<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.rollback();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException ex) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(ex);<br>            &#125;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//å…³é—­èµ„æº</span><br>            JDBCUtils.close(<span class="hljs-literal">null</span>,preparedStatement,connection);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰¹å¤„ç†"><a href="#æ‰¹å¤„ç†" class="headerlink" title="æ‰¹å¤„ç†"></a>æ‰¹å¤„ç†</h3><ul><li>å½“éœ€è¦æˆæ‰¹æ’å…¥æˆ–è€…æ›´æ–°è®°å½•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ Java çš„æ‰¹é‡æ›´æ–°æœºåˆ¶ï¼Œè¿™ä¸€æœºåˆ¶å…è®¸å¤šæ¡è¯­å¥ä¸€æ¬¡æ€§æäº¤ç»™æ•°æ®åº“æ‰¹é‡å¤„ç†ã€‚é€šå¸¸æƒ…å†µä¸‹æ¯”å•ç‹¬æäº¤å¤„ç†æ›´æœ‰æ•ˆç‡</li><li>JDBC çš„æ‰¹é‡å¤„ç†è¯­å¥åŒ…æ‹¬ä¸‹é¢æ–¹æ³•ï¼š<ul><li>addBatch()ï¼šæ·»åŠ éœ€è¦æ‰¹é‡å¤„ç†çš„SQLè¯­å¥æˆ–å‚æ•°</li><li>executeBatch()ï¼šæ‰§è¡Œæ‰¹é‡å¤„ç†è¯­å¥</li><li>clearBatch()ï¼šæ¸…ç©ºæ‰¹å¤„ç†åŒ…çš„è¯­å¥</li></ul></li><li>JDBC è¿æ¥MySQL æ—¶ï¼Œå¦‚æœè¦ä½¿ç”¨æ‰¹å¤„ç†åŠŸèƒ½ï¼Œè¯·åœ¨ url ä¸­åŠ å‚æ•° <strong>?rewriteBatchedStatements&#x3D;true</strong></li><li>æ‰¹å¤„ç†å¾€å¾€å’Œ PreparedStatement ä¸€èµ·æ­é…ä½¿ç”¨ï¼Œå¯ä»¥æ—¢å‡å°‘ç¼–è¯‘æ¬¡æ•°ï¼Œåˆå‡å°‘å…è®¸æ¬¡æ•°ï¼Œæ•ˆç‡å¤§å¤§æé«˜</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºjavaçš„æ‰¹å¤„ç†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.batch_;<br><br><span class="hljs-keyword">import</span> com.jdbcStudy.utils.JDBCUtils;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Batch_</span> &#123;<br><br>    <span class="hljs-comment">//ä¼ ç»Ÿæ–¹æ³•ï¼Œæ·»åŠ 5000æ¡æ•°æ®åˆ°admin2</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">noBatch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtils.getConnection();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into admin2 values(null, ?, ?)&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        System.out.println(<span class="hljs-string">&quot;å¼€å§‹æ‰§è¡Œ&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//å¼€å§‹æ—¶é—´</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5000</span>;i++)&#123;<br>            preparedStatement.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;jack&quot;</span>+i);<br>            preparedStatement.setString(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;666&quot;</span>);<br>            preparedStatement.executeUpdate();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//å¼€å§‹æ—¶é—´</span><br>        System.out.println(<span class="hljs-string">&quot;è€—æ—¶ï¼š&quot;</span> + (end-start));  <span class="hljs-comment">//1005</span><br>        <span class="hljs-comment">//å…³é—­è¿æ¥</span><br>        JDBCUtils.close(<span class="hljs-literal">null</span>, preparedStatement, connection);<br><br>    &#125;<br><br>    <span class="hljs-comment">//ä½¿ç”¨æ‰¹é‡æ–¹å¼æ·»åŠ æ•°æ®</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtils.getConnection();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into admin2 values(null, ?, ?)&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        System.out.println(<span class="hljs-string">&quot;å¼€å§‹æ‰§è¡Œ&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//å¼€å§‹æ—¶é—´</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5000</span>;i++)&#123;<br>            preparedStatement.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;jack&quot;</span>+i);<br>            preparedStatement.setString(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;666&quot;</span>);<br>            <span class="hljs-comment">//å°†sqlè¯­å¥åŠ å…¥åˆ°æ‰¹å¤„ç†åŒ…ä¸­ -&gt; çœ‹æºç </span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            1.ç¬¬ä¸€æ¬¡å°±åˆ›å»º ArrayList - elementData =&gt; Object[]</span><br><span class="hljs-comment">            2.elementData =&gt; Object[] å°±ä¼šå­˜æ”¾æˆ‘ä»¬é¢„å¤„ç†çš„sqlè¯­å¥</span><br><span class="hljs-comment">            3.å½“elementDataæ»¡åï¼Œå°±æŒ‰ç…§1.5æ‰©å®¹</span><br><span class="hljs-comment">            4.å½“æ·»åŠ æŒ‡å®šçš„å€¼åï¼Œå°±æ‰§è¡ŒexecuteBatch</span><br><span class="hljs-comment">            5.æ‰¹é‡å¤„ç†å¯ä»¥å‡å°‘å‘é€sqlè¯­å¥çš„ç½‘ç»œå¼€é”€ï¼Œå‡å°‘ç¼–è¯‘æ¬¡æ•°å’Œè¿è¡Œæ¬¡æ•°ï¼Œå› æ­¤æ•ˆç‡æ›´é«˜</span><br><span class="hljs-comment">            public void addBatch() throws SQLException &#123;</span><br><span class="hljs-comment">                synchronized(this.checkClosed().getConnectionMutex()) &#123;</span><br><span class="hljs-comment">                    if (this.batchedArgs == null) &#123;</span><br><span class="hljs-comment">                        this.batchedArgs = new ArrayList();</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                    for(int i = 0; i &lt; this.parameterValues.length; ++i) &#123;</span><br><span class="hljs-comment">                        this.checkAllParametersSet(this.parameterValues[i], this.parameterStreams[i], i);</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                    this.batchedArgs.add(new BatchParams(this.parameterValues, this.parameterStreams, this.isStream, this.streamLengths, this.isNull));</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">             */</span><br>            preparedStatement.addBatch();<br>            <span class="hljs-comment">//å½“æœ‰1000æ¡è®°å½•æ—¶ï¼Œæ‰¹é‡æ‰§è¡Œ</span><br>            <span class="hljs-keyword">if</span>((i+<span class="hljs-number">1</span>)%<span class="hljs-number">1000</span>==<span class="hljs-number">0</span>)&#123;<br>                preparedStatement.executeBatch();<br>                preparedStatement.clearBatch();<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//å¼€å§‹æ—¶é—´</span><br>        System.out.println(<span class="hljs-string">&quot;è€—æ—¶ï¼š&quot;</span> + (end-start));  <span class="hljs-comment">//64</span><br>        <span class="hljs-comment">//å…³é—­è¿æ¥</span><br>        JDBCUtils.close(<span class="hljs-literal">null</span>, preparedStatement, connection);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°æ®åº“è¿æ¥æ± "><a href="#æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="æ•°æ®åº“è¿æ¥æ± "></a>æ•°æ®åº“è¿æ¥æ± </h3><h4 id="ä¼ ç»Ÿè·å–-Connection-é—®é¢˜åˆ†æ"><a href="#ä¼ ç»Ÿè·å–-Connection-é—®é¢˜åˆ†æ" class="headerlink" title="ä¼ ç»Ÿè·å– Connection é—®é¢˜åˆ†æ"></a>ä¼ ç»Ÿè·å– Connection é—®é¢˜åˆ†æ</h4><ul><li>ä¼ ç»Ÿçš„ JDBC æ•°æ®åº“è¿æ¥ä½¿ç”¨ DriverManager æ¥è·å–ï¼Œæ¯æ¬¡å‘æ•°æ®åº“å»ºç«‹è¿æ¥çš„æ—¶å€™éƒ½è¦å°† Connection åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†éªŒè¯ IP åœ°å€ã€ç”¨æˆ·åå’Œå¯†ç ï¼ˆ0.05s ~ 1s æ—¶é—´ï¼‰ã€‚éœ€è¦æ•°æ®åº“è¿æ¥çš„æ—¶å€™ï¼Œå°±å‘æ•°æ®åº“è¦æ±‚ä¸€ä¸ªï¼Œé¢‘ç¹çš„è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œå°†å ç”¨å¾ˆå¤šçš„ç³»ç»Ÿèµ„æºï¼Œå®¹æ˜“é€ æˆæœåŠ¡å™¨å´©æºƒã€‚</li><li>æ¯ä¸€æ¬¡æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨å®Œåéƒ½å¾—æ–­å¼€ï¼Œå¦‚æœç¨‹åºå‡ºç°å¼‚å¸¸è€Œæœªèƒ½å…³é—­ï¼Œå°†å¯¼è‡´æ•°æ®åº“å†…å­˜æ³„æ¼ï¼Œæœ€ç»ˆå°†å¯¼è‡´é‡å¯æ•°æ®åº“ã€‚</li><li>ä¼ ç»Ÿè·å–è¿æ¥çš„æ–¹å¼ï¼Œä¸èƒ½æ§åˆ¶åˆ›å»ºçš„è¿æ¥æ•°é‡ï¼Œå¦‚è¿æ¥è¿‡å¤šï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ŒMySQL å´©æºƒ</li><li>è§£å†³ä¼ ç»Ÿå¼€å‘ä¸­çš„æ•°æ®åº“è¿æ¥é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ï¼ˆconnection poolï¼‰</li></ul><h4 id="æ•°æ®åº“è¿æ¥æ± ç®€ä»‹"><a href="#æ•°æ®åº“è¿æ¥æ± ç®€ä»‹" class="headerlink" title="æ•°æ®åº“è¿æ¥æ± ç®€ä»‹"></a>æ•°æ®åº“è¿æ¥æ± ç®€ä»‹</h4><ul><li><p>é¢„å…ˆåœ¨ç¼“å†²æ± ä¸­æ”¾å…¥ä¸€å®šæ•°é‡çš„è¿æ¥ï¼Œå½“éœ€è¦å»ºç«‹æ•°æ®åº“è¿æ¥æ—¶ï¼Œåªéœ€ä» â€œç¼“å†²æ± â€ ä¸­å–å‡ºä¸€ä¸ªï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åå†æ”¾å›å»</p></li><li><p>æ•°æ®åº“è¿æ¥æ± è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯é‡æ–°å»ºç«‹ä¸€ä¸ª</p></li><li><p>å½“åº”ç”¨ç¨‹åºå‘è¿æ¥æ± è¯·æ±‚çš„è¿æ¥æ•°è¶…è¿‡æœ€å¤§è¿æ¥æ•°é‡æ—¶ï¼Œè¿™äº›è¯·æ±‚å°†è¢«åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­</p></li><li><p>æ•°æ®åº“è¿æ¥æ± ç¤ºæ„å›¾ï¼š</p> <img src="image-20221012195509452.png" alt="image-20221012195509452" style="zoom: 67%;" />  <img src="image-20221012195217855.png" alt="image-20221012195217855" style="zoom: 67%;" /></li></ul><h4 id="æ•°æ®åº“è¿æ¥æ± ç§ç±»"><a href="#æ•°æ®åº“è¿æ¥æ± ç§ç±»" class="headerlink" title="æ•°æ®åº“è¿æ¥æ± ç§ç±»"></a>æ•°æ®åº“è¿æ¥æ± ç§ç±»</h4><ul><li>JDBC çš„æ•°æ®åº“è¿æ¥æ±  ä½¿ç”¨ javax.sql.DataSource æ¥è¡¨ç¤ºï¼ŒDataSource åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£é€šå¸¸ç”±ç¬¬ä¸‰æ–¹æä¾›å®ç° [æä¾› .jar]</li><li>C3P0 æ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œç¨³å®šæ€§ä¸é”™ï¼ˆhibernateï¼Œspringï¼‰</li><li>DBCP æ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦ç›¸å¯¹ C3P0 è¾ƒå¿«ï¼Œä½†ä¸ç¨³å®š</li><li>Proxool æ•°æ®åº“è¿æ¥æ± ï¼Œæœ‰ç›‘æ§è¿æ¥æ± çŠ¶æ€çš„åŠŸèƒ½ï¼Œç¨³å®šæ€§è¾ƒ C3P0 å·®ä¸€ç‚¹</li><li>BoneCP æ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦å¿«</li><li>Druidï¼ˆå¾·é²ä¼Šï¼‰æ˜¯é˜¿é‡Œæä¾›çš„æ•°æ®åº“è¿æ¥æ± ï¼Œé›† DBCPã€C3P0ã€Proxool ä¼˜ç‚¹äºä¸€èº«çš„æ•°æ®åº“è¿æ¥æ± </li></ul><h4 id="C3P0-åº”ç”¨å®ä¾‹"><a href="#C3P0-åº”ç”¨å®ä¾‹" class="headerlink" title="C3P0 åº”ç”¨å®ä¾‹"></a>C3P0 åº”ç”¨å®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">C3P0_</span> &#123;<br><br>    <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šç›¸å…³å‚æ•°ï¼Œå†ç¨‹åºä¸­æŒ‡å®šuserï¼Œurlï¼Œpasswordç­‰</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testC3P0_01</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">//1. åˆ›å»ºä¸€ä¸ªæ•°æ®æºå¯¹è±¡</span><br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">comboPooledDataSource</span> <span class="hljs-operator">=</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br><br>        <span class="hljs-comment">//2.é€šè¿‡é…ç½®æ–‡ä»¶ mysql.properties è·å–ç›¸å…³è¿æ¥çš„ä¿¡æ¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//è¯»å–ç›¸å…³çš„å±æ€§å€¼</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br><br>        <span class="hljs-comment">//ç»™æ•°æ®æº comboPooledDataSource è®¾ç½®ç›¸å…³çš„å‚æ•°</span><br>        <span class="hljs-comment">//è¯´æ˜ï¼šè¿æ¥ç®¡ç†æ˜¯ç”± comboPooledDataSource æ¥ç®¡ç†çš„</span><br>        comboPooledDataSource.setDriverClass(driver);<br>        comboPooledDataSource.setJdbcUrl(url);<br>        comboPooledDataSource.setUser(user);<br>        comboPooledDataSource.setPassword(password);<br><br>        <span class="hljs-comment">//è®¾ç½®åˆå§‹åŒ–è¿æ¥æ•°</span><br>        comboPooledDataSource.setInitialPoolSize(<span class="hljs-number">10</span>);<br>        <span class="hljs-comment">//è®¾ç½®æœ€å¤§è¿æ¥æ•°ï¼ˆè¶…è¿‡æœ€å¤§è¿æ¥æ•°å°±ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼‰</span><br>        comboPooledDataSource.setMaxPoolSize(<span class="hljs-number">50</span>);<br><br>        <span class="hljs-comment">//æµ‹è¯•è¿æ¥æ± çš„æ•ˆç‡</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5000</span>;i++)&#123;<br>            <span class="hljs-comment">//è·å–è¿æ¥ï¼ˆä» DataSource æ¥å£å®ç°çš„ï¼‰</span><br>            <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> comboPooledDataSource.getConnection();<br>            connection.close();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;è€—æ—¶ï¼š&quot;</span> + (end - start)); <span class="hljs-comment">//è€—æ—¶ï¼š371</span><br><br>        System.out.println(<span class="hljs-string">&quot;è¿æ¥OK&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//æ–¹å¼äºŒ ä½¿ç”¨é…ç½®æ–‡ä»¶æ¨¡æ¿æ¥å®Œæˆ</span><br>    <span class="hljs-comment">//1.å°† C3P0 æä¾›çš„ c3p0.config.xml æ‹·è´åˆ° src ç›®å½•ä¸‹</span><br>    <span class="hljs-comment">//2.è¯¥æ–‡ä»¶æŒ‡å®šäº†è¿æ¥æ•°æ®åº“å’Œè¿æ¥æ± çš„ç›¸å…³å‚æ•°</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testC3P0_02</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">comboPooledDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>(<span class="hljs-string">&quot;db_pool&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> comboPooledDataSource.getConnection();<br>        System.out.println(<span class="hljs-string">&quot;è¿æ¥OK&quot;</span>);<br>        connection.close();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="Druid-å¾·é²ä¼Š-åº”ç”¨å®ä¾‹"><a href="#Druid-å¾·é²ä¼Š-åº”ç”¨å®ä¾‹" class="headerlink" title="Druid(å¾·é²ä¼Š)åº”ç”¨å®ä¾‹"></a>Druid(å¾·é²ä¼Š)åº”ç”¨å®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Druid_</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDruid</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//1.åŠ å…¥ Druid .jaråŒ…</span><br>        <span class="hljs-comment">//2.åŠ å…¥ é…ç½®æ–‡ä»¶ï¼Œå°†è¯¥æ–‡ä»¶æ‹·è´åˆ°é¡¹ç›®çš„srcç›®å½•</span><br>        <span class="hljs-comment">//3.åˆ›å»º Properties å¯¹è±¡ï¼Œè¯»å–é…ç½®æ–‡ä»¶</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\druid.properties&quot;</span>));<br><br>        <span class="hljs-comment">//4.åˆ›å»ºä¸€ä¸ªæŒ‡å®šå‚æ•°çš„æ•°æ®åº“è¿æ¥æ± ï¼ŒDruidè¿æ¥æ± </span><br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> DruidDataSourceFactory.createDataSource(properties);<br><span class="hljs-comment">//        Connection connection = dataSource.getConnection();</span><br><span class="hljs-comment">//        System.out.println(&quot;è¿æ¥æˆåŠŸï¼&quot;);</span><br><span class="hljs-comment">//        connection.close();</span><br>        <span class="hljs-comment">//æµ‹è¯•è¿æ¥æ•ˆç‡</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">500000</span>;i++)&#123;<br>            <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br><span class="hljs-comment">//            System.out.println(&quot;è¿æ¥æˆåŠŸï¼&quot;);</span><br>            connection.close();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;è€—æ—¶ï¼š&quot;</span>+(end-start)); <span class="hljs-comment">//è€—æ—¶ï¼š398</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="å°†-JDBCUtils-å·¥å…·ç±»æ”¹æˆ-Druid-å¾·é²ä¼Š-å®ç°"><a href="#å°†-JDBCUtils-å·¥å…·ç±»æ”¹æˆ-Druid-å¾·é²ä¼Š-å®ç°" class="headerlink" title="å°† JDBCUtils å·¥å…·ç±»æ”¹æˆ Druid(å¾·é²ä¼Š)å®ç°"></a>å°† JDBCUtils å·¥å…·ç±»æ”¹æˆ Druid(å¾·é²ä¼Š)å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtilsByDruid</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> DataSource ds;<br><br>    <span class="hljs-comment">//åœ¨é™æ€ä»£ç å—åˆå§‹åŒ–ds</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-keyword">try</span> &#123;<br>            properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\druid.properties&quot;</span>));<br>            ds = DruidDataSourceFactory.createDataSource(properties);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//ç¼–å†™getConnectionæ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException&#123;<br>        <span class="hljs-keyword">return</span> ds.getConnection();<br>    &#125;<br><br>    <span class="hljs-comment">//å…³é—­è¿æ¥ï¼ˆåœ¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ä¸­ï¼Œcloseåªæ˜¯æŠŠä½¿ç”¨çš„Connectionå¯¹è±¡æ”¾å›è¿æ¥æ± ï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(ResultSet resultSet, PreparedStatement statement, Connection connection)</span>&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-keyword">if</span>(resultSet!=<span class="hljs-literal">null</span>)&#123;<br>                resultSet.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(statement!=<span class="hljs-literal">null</span>)&#123;<br>                statement.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(connection!=<span class="hljs-literal">null</span>)&#123;<br>                connection.close();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>            <span class="hljs-keyword">throw</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Apacheâ€”DBUtils"><a href="#Apacheâ€”DBUtils" class="headerlink" title="Apacheâ€”DBUtils"></a>Apacheâ€”DBUtils</h3><h4 id="é—®é¢˜å¼•å‡º"><a href="#é—®é¢˜å¼•å‡º" class="headerlink" title="é—®é¢˜å¼•å‡º"></a>é—®é¢˜å¼•å‡º</h4><ol><li><p>å…³é—­ connection åï¼ŒresultSet ç»“æœé›†æ— æ³•ä½¿ç”¨</p></li><li><p>resultSet ä¸åˆ©äºæ•°æ®çš„ç®¡ç†</p></li><li><p>ç¤ºæ„å›¾ï¼š</p> <img src="image-20221012213546711.png" alt="image-20221012213546711" style="zoom: 43%;" /></li></ol><h4 id="ä½¿ç”¨åœŸæ–¹æ³•è§£å†³"><a href="#ä½¿ç”¨åœŸæ–¹æ³•è§£å†³" class="headerlink" title="ä½¿ç”¨åœŸæ–¹æ³•è§£å†³"></a>ä½¿ç”¨åœŸæ–¹æ³•è§£å†³</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä½¿ç”¨åœŸæ–¹æ³•è§£å†³ResultSet å°è£…åˆ° ArrayList</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectToArrayList</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥ï¼ˆå†™è¿›tryè¯­å¥ï¼Œæ–¹ä¾¿æ•è·å¼‚å¸¸ï¼‰</span><br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-comment">//2.ç»„ç»‡ä¸€ä¸ªsql</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>;<br>    <span class="hljs-comment">//ï¼ˆå†™è¿›tryè¯­å¥ï¼Œæ–¹ä¾¿æ•è·å¼‚å¸¸ï¼‰</span><br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    ArrayList&lt;Actor&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Actor&gt;();  <span class="hljs-comment">//åˆ›å»ºArrayLiatå¯¹è±¡ï¼Œå­˜æ”¾actorå¯¹è±¡</span><br>    <span class="hljs-comment">//3.åˆ›å»ºPreparedStatementå¯¹è±¡</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        connection = JDBCUtilsByDruid.getConnection();<br>        System.out.println(connection.getClass());<br>        preparedStatement = connection.prepareStatement(sql);<br>        preparedStatement.setInt(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br>        <span class="hljs-comment">//æ‰§è¡Œï¼Œå¾—åˆ°ç»“æœé›†</span><br>        set = preparedStatement.executeQuery();<br>        <span class="hljs-comment">//éå†ç»“æœé›†</span><br>        <span class="hljs-keyword">while</span>(set.next())&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> set.getInt(<span class="hljs-string">&quot;id&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;name&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;sex&quot;</span>);<br>            <span class="hljs-type">Date</span> <span class="hljs-variable">borndate</span> <span class="hljs-operator">=</span> set.getDate(<span class="hljs-string">&quot;borndate&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;phone&quot;</span>);<br>            <span class="hljs-comment">//æŠŠå¾—åˆ°çš„resultsetè®°å½•ï¼Œå°è£…åˆ°Actorå¯¹è±¡ï¼ŒåŠ å…¥åˆ°Listé›†åˆ</span><br>            list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Actor</span>(id,name,sex,borndate,phone));<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;listé›†åˆæ•°æ®ï¼š&quot;</span>+list);<br>        <span class="hljs-keyword">for</span>(Actor actor:list)&#123;<br>            System.out.println(<span class="hljs-string">&quot;id=&quot;</span>+actor.getId() + <span class="hljs-string">&quot;\t&quot;</span> + actor.getName());<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-comment">//å…³é—­èµ„æº</span><br>        JDBCUtilsByDruid.close(set,preparedStatement,connection);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Actor</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String sex;<br>    <span class="hljs-keyword">private</span> Date borndate;<br>    <span class="hljs-keyword">private</span> String phone;<br><br>    <span class="hljs-comment">//ä¸€å®šè¦ç»™ä¸€ä¸ªæ— å‚æ„é€ å™¨ï¼Œåå°„éœ€è¦</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Actor</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <br>    <span class="hljs-comment">//æœ‰å‚æ„é€ å™¨... getå’Œset......</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŸºæœ¬ä»‹ç»-11"><a href="#åŸºæœ¬ä»‹ç»-11" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><ul><li>commons-dbutils æ˜¯ Apache ç»„ç»‡æä¾›çš„ä¸€ä¸ªå¼€æº JDBC å·¥å…·ç±»åº“ï¼Œå®ƒæ˜¯å¯¹ JDBC çš„å°è£…ï¼Œä½¿ç”¨ dbutils èƒ½æå¤§ç®€åŒ– jdbc ç¼–ç çš„å·¥ä½œé‡</li><li>DbUtils ç±»<ul><li>QueryRunnerç±»ï¼šè¯¥ç±»å°è£…äº†SQLçš„æ‰§è¡Œï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¯ä»¥å®ç°å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€æ‰¹å¤„ç†</li><li>ä½¿ç”¨ QueryRunner ç±»å®ç°æŸ¥è¯¢</li><li>ResultSetHandler æ¥å£ï¼šè¯¥æ¥å£ç”¨äºå¤„ç† java.sql.ResultSetï¼Œå°†æ•°æ®æŒ‰è¦æ±‚è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼</li></ul></li><li>æ–¹æ³•ï¼š<ul><li>ArrayHandlerï¼šæŠŠç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®è½¬æˆå¯¹è±¡æ•°ç»„</li><li>ArrayListHandlerï¼šæŠŠç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½è½¬æˆä¸€ä¸ªæ•°ç»„ï¼Œå†å­˜æ”¾åˆ°Listä¸­</li><li>BeanHandlerï¼šå°†ç»“æœä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªå¯¹äºçš„ JavaBean å®ä¾‹ä¸­</li><li>BeanListHandlerï¼šå°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ªå¯¹äºçš„ JavaBean å®ä¾‹ä¸­ï¼Œå†å­˜æ”¾åˆ°Listä¸­</li><li>ColumnListHandlerï¼šå°†ç»“æœé›†ä¸­æŸä¸€åˆ—çš„æ•°æ®å­˜æ”¾åˆ° List ä¸­</li><li>KeyedHandler(name)ï¼šå°†ç»“æœé›†ä¸­çš„æ¯è¡Œæ•°æ®éƒ½å°è£…åˆ° Map é‡Œï¼Œå†æŠŠè¿™äº›mapå†å­˜åˆ°ä¸€ä¸ªmapé‡Œï¼Œå…¶ key ä¸ºæŒ‡å®šçš„key</li><li>MapHandlerï¼šå°†ç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®å°è£…åˆ°ä¸€ä¸ª Map é‡Œï¼Œkey æ˜¯åˆ—åï¼Œvalue å°±æ˜¯å¯¹äºçš„å€¼</li><li>ManListHandlerï¼šå°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ª Map é‡Œï¼Œç„¶åå†å­˜æ”¾åˆ° List</li></ul></li></ul><h4 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.QueryRunner;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DBUtils_USE</span> &#123;<br><br>    <span class="hljs-comment">//ä½¿ç”¨apache-DBUtils å·¥å…·ç±» + druid å®Œæˆå¯¹è¡¨çš„crudæ“ä½œ</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testQueryMany</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.ä½¿ç”¨DBUtilsç±»å’Œç»“æœï¼Œå…ˆå¼•å…¥DBUtilsç›¸å…³jar,åŠ å…¥åˆ°æœ¬Project</span><br><br>        <span class="hljs-comment">//3.åˆ›å»º QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œè¿”å›ArrayList</span><br>        <span class="hljs-comment">//String sql = &quot;select * from actor where id &gt;= ?&quot;;</span><br>        <span class="hljs-comment">//è¯´æ˜ï¼šsqlè¯­å¥ä¹Ÿå¯ä»¥åªæŸ¥è¯¢éƒ¨åˆ†åˆ—</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select id, name from actor where id &gt;= ?&quot;</span>;<br>        <span class="hljs-comment">//è§£è¯»ï¼š</span><br>        <span class="hljs-comment">//ï¼ˆ1ï¼‰queryæ–¹æ³•å°±æ˜¯æ‰§è¡Œsqlè¯­å¥ï¼Œå¾—åˆ°resultset --&gt; å°è£…åˆ° ArrayList é›†åˆä¸­</span><br>        <span class="hljs-comment">//ï¼ˆ2ï¼‰è¿”å›é›†åˆ</span><br>        <span class="hljs-comment">//ï¼ˆ3ï¼‰connectionï¼šè¿æ¥</span><br>        <span class="hljs-comment">//ï¼ˆ4ï¼‰sqlï¼šæ‰§è¡Œçš„sqlè¯­å¥</span><br>        <span class="hljs-comment">//ï¼ˆ5ï¼‰new BeanListHandler&lt;&gt;(XXX.class)ï¼šå°† resultset -&gt; Actorå¯¹è±¡ -&gt; å°è£…åˆ° ArrayList</span><br>        <span class="hljs-comment">//    åº•å±‚ä½¿ç”¨åå°„æœºåˆ¶ å»è·å–Actorç±»çš„å±æ€§ï¼Œç„¶åè¿›è¡Œå°è£…</span><br>        <span class="hljs-comment">//ï¼ˆ6ï¼‰æœ€åçš„â€œ1â€å°±æ˜¯ç»™sqlè¯­å¥ä¸­çš„â€œ?â€èµ‹å€¼ï¼Œå¯ä»¥æœ‰å¤šä¸ªå€¼ï¼Œå› ä¸ºæ˜¯å¯å˜å‚æ•°</span><br>        <span class="hljs-comment">//ï¼ˆ7ï¼‰åº•å±‚å¾—åˆ°çš„resultsetï¼Œä¼šåœ¨queryå…³é—­ï¼ŒPreparedStatementä¹Ÿä¼šå…³é—­</span><br>        List&lt;Actor&gt; list = queryRunner.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;&gt;(Actor.class), <span class="hljs-number">1</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;è¾“å‡ºé›†åˆä¿¡æ¯ï¼š&quot;</span>);<br>        <span class="hljs-keyword">for</span>(Actor actor:list)&#123;<br>            System.out.println(actor);<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        connection.close();<br>        <span class="hljs-comment">//JDBCUtilsByDruid.close(null,null,connection);</span><br>    &#125;<br><br>    <span class="hljs-comment">//æ¼”ç¤º apache-dbutils + druid å®Œæˆ è¿”å›çš„ç»“æœæ˜¯å•è¡Œè®°å½•ï¼ˆå•ä¸ªå¯¹è±¡ï¼‰</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testQuerySingle</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.ä½¿ç”¨DBUtilsç±»å’Œç»“æœï¼Œå…ˆå¼•å…¥DBUtilsç›¸å…³jar,åŠ å…¥åˆ°æœ¬Project</span><br><br>        <span class="hljs-comment">//3.åˆ›å»º QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œè¿”å›å•ä¸ªå¯¹è±¡</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>;<br><br>        <span class="hljs-comment">//è§£è¯»ï¼š</span><br>        <span class="hljs-comment">//å› ä¸ºæˆ‘ä»¬è¿”å›çš„æ˜¯å•è¡Œè®°å½• &lt;---&gt; å•ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä½¿ç”¨çš„Handeræ˜¯BeanHandler</span><br>        <span class="hljs-type">Actor</span> <span class="hljs-variable">actor</span> <span class="hljs-operator">=</span> queryRunner.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanHandler</span>&lt;&gt;(Actor.class), <span class="hljs-number">3</span>);<br>        System.out.println(actor);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-comment">//æ¼”ç¤º apache-dbutils + druid å®Œæˆ è¿”å›çš„ç»“æœæ˜¯å•è¡Œå•åˆ—çš„æƒ…å†µ - è¿”å›çš„å°±æ˜¯object</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testScalar</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.ä½¿ç”¨DBUtilsç±»å’Œç»“æœï¼Œå…ˆå¼•å…¥DBUtilsç›¸å…³jar,åŠ å…¥åˆ°æœ¬Project</span><br><br>        <span class="hljs-comment">//3.åˆ›å»º QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œè¿”å›å•è¡Œå•åˆ—</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select name from actor where id = ?&quot;</span>;<br>        <span class="hljs-comment">//è§£è¯»ï¼šå› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„handlerå°±æ˜¯ScalarHandler</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> queryRunner.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScalarHandler</span>(), <span class="hljs-number">2</span>);<br>        System.out.println(obj);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-comment">//æ¼”ç¤º apache-dbutils + druid å®Œæˆ dmlï¼ˆupdate, insert, deleteï¼‰</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDML</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//1.å¾—åˆ°è¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.ä½¿ç”¨DBUtilsç±»å’Œç»“æœï¼Œå…ˆå¼•å…¥DBUtilsç›¸å…³jar,åŠ å…¥åˆ°æœ¬Project</span><br><br>        <span class="hljs-comment">//3.åˆ›å»º QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.è¿™é‡Œå¯ä»¥ç»„ç»‡sqlå®Œæˆupdate, insert, delete</span><br>        <span class="hljs-comment">//String sql = &quot;update actor set name = ? where id = ?&quot;;  //ä¿®æ”¹</span><br>        <span class="hljs-comment">//String sql = &quot;insert into actor values(null, ?, ?, ?, ?)&quot;;  //æ’å…¥</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from actor where id = ?&quot;</span>;<br><br>        <span class="hljs-comment">//è§£è¯»ï¼š</span><br>        <span class="hljs-comment">//(1) æ‰§è¡Œdmlæ“ä½œæ˜¯ä½¿ç”¨queryRunner.update()</span><br>        <span class="hljs-comment">//(2) è¿”å›å€¼æ˜¯ å—å½±å“çš„è¡Œæ•°</span><br>        <span class="hljs-comment">//int affectedRow = queryRunner.update(connection, sql, &quot;å¼ ä¸‰ä¸°&quot;, 2);</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">affectedRow</span> <span class="hljs-operator">=</span> queryRunner.update(connection,sql,<span class="hljs-number">3</span>);<br>        System.out.println(affectedRow&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;æ‰§è¡ŒæˆåŠŸ&quot;</span>:<span class="hljs-string">&quot;æ‰§è¡Œæ²¡æœ‰å½±å“åˆ°è¡¨&quot;</span>);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æºç è§£è¯»"><a href="#æºç è§£è¯»" class="headerlink" title="æºç è§£è¯»"></a>æºç è§£è¯»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åˆ†æ queryRunner.queryæ–¹æ³•:</span><br><span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">query</span><span class="hljs-params">(Connection conn, String sql, ResultSetHandler&lt;T&gt; rsh, Object... params)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//å®šä¹‰PreparedStatement</span><br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//æ¥æ”¶è¿”å›çš„ ResultSet</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//è¿”å›ArrayList</span><br><br>    <span class="hljs-keyword">try</span> &#123;<br>        stmt = <span class="hljs-built_in">this</span>.prepareStatement(conn, sql);<span class="hljs-comment">//åˆ›å»ºPreparedStatement</span><br>        <span class="hljs-built_in">this</span>.fillStatement(stmt, params);<span class="hljs-comment">//å¯¹sql è¿›è¡Œ ? èµ‹å€¼</span><br>        rs = <span class="hljs-built_in">this</span>.wrap(stmt.executeQuery());<span class="hljs-comment">//æ‰§è¡Œsql,è¿”å›resultset</span><br>        result = rsh.handle(rs);<br>        <span class="hljs-comment">//è¿”å›çš„resultset --&gt; arrayList[result] [ä½¿ç”¨åˆ°åå°„ï¼Œå¯¹ä¼ å…¥classå¯¹è±¡å¤„ç†]</span><br>    &#125; <span class="hljs-keyword">catch</span> (SQLException var33) &#123;<br>        <span class="hljs-built_in">this</span>.rethrow(var33, sql, params);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-built_in">this</span>.close(rs);<span class="hljs-comment">//å…³é—­resultset</span><br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-built_in">this</span>.close((Statement)stmt);<span class="hljs-comment">//å…³é—­preparedstatementå¯¹è±¡</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¡¨å’Œ-JavaBean-çš„ç±»å‹æ˜ å°„å…³ç³»"><a href="#è¡¨å’Œ-JavaBean-çš„ç±»å‹æ˜ å°„å…³ç³»" class="headerlink" title="è¡¨å’Œ JavaBean çš„ç±»å‹æ˜ å°„å…³ç³»"></a>è¡¨å’Œ JavaBean çš„ç±»å‹æ˜ å°„å…³ç³»</h4><p>int â€“&gt; Integer</p><p>charã€varchar â€“&gt; String</p><p>date â€“&gt; Date</p><p> <img src="/2022/06/30/JavaNote/image-20221012221856652.png" alt="image-20221012221856652"></p><h3 id="DAO-å’Œå¢åˆ æ”¹æŸ¥é€šç”¨æ–¹æ³•-BasicDao"><a href="#DAO-å’Œå¢åˆ æ”¹æŸ¥é€šç”¨æ–¹æ³•-BasicDao" class="headerlink" title="DAO å’Œå¢åˆ æ”¹æŸ¥é€šç”¨æ–¹æ³•-BasicDao"></a>DAO å’Œå¢åˆ æ”¹æŸ¥é€šç”¨æ–¹æ³•-BasicDao</h3><h4 id="åˆ†æé—®é¢˜"><a href="#åˆ†æé—®é¢˜" class="headerlink" title="åˆ†æé—®é¢˜"></a>åˆ†æé—®é¢˜</h4><p>å…ˆåˆ†æä¸€ä¸ªé—®é¢˜ï¼šapache-dbutils + Druid ç®€åŒ–äº† JDBC å¼€å‘ï¼Œä½†è¿˜æœ‰ä¸è¶³</p><ul><li><p>SQL è¯­å¥æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½é€šè¿‡å‚æ•°ä¼ å…¥ï¼Œé€šç”¨æ€§ä¸å¥½ï¼Œéœ€è¦è¿›è¡Œæ”¹è¿›ï¼Œä½¿å…¶æ›´æ–¹ä¾¿æ‰§è¡Œ å¢åˆ æ”¹æŸ¥</p></li><li><p>å¯¹äº select æ“ä½œï¼Œå¦‚æœæœ‰è¿”å›å€¼ï¼Œè¿”å›ç±»å‹ä¸èƒ½å›ºå®šï¼Œéœ€è¦ä½¿ç”¨ æ³›å‹</p></li><li><p>å°†æ¥çš„è¡¨å¾ˆå¤šï¼Œä¸šåŠ¡éœ€æ±‚å¤æ‚ï¼Œä¸å¯èƒ½åªé ä¸€ä¸ª Java ç±»å®Œæˆ</p></li><li><p>å¼•å‡º &#x3D;&gt; BasicDAO ç”»å‡ºç¤ºæ„å›¾ï¼Œçœ‹çœ‹åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†</p> <img src="image-20221012232155204.png" alt="image-20221012232155204" style="zoom: 43%;" /></li></ul><img src="image-20221012232238621.png" alt="image-20221012232238621" style="zoom:43%;" /><h4 id="åŸºæœ¬è¯´æ˜-2"><a href="#åŸºæœ¬è¯´æ˜-2" class="headerlink" title="åŸºæœ¬è¯´æ˜"></a>åŸºæœ¬è¯´æ˜</h4><ul><li><strong>DAOï¼šdata access object æ•°æ®è®¿é—®å¯¹è±¡</strong></li><li>è¿™æ ·çš„é€šç”¨ç±»ï¼Œç§°ä¸º BasicDaoï¼Œæ˜¯ä¸“é—¨å’Œæ•°æ®åº“äº¤äº’çš„ï¼Œå³å®Œæˆå¯¹æ•°æ®åº“ï¼ˆè¡¨ï¼‰çš„ crud æ“ä½œ</li><li>åœ¨ BaiscDao çš„åŸºç¡€ä¸Šï¼Œå®ç°ä¸€å¼ è¡¨ å¯¹åº”ä¸€ä¸ª Daoï¼Œæ›´å¥½çš„å®ŒæˆåŠŸèƒ½ï¼Œæ¯”å¦‚ Customer è¡¨ - Customer.javaç±»ï¼ˆjavabeanï¼‰</li></ul><h4 id="BasicDAO-åº”ç”¨å®ä¾‹"><a href="#BasicDAO-åº”ç”¨å®ä¾‹" class="headerlink" title="BasicDAO åº”ç”¨å®ä¾‹"></a>BasicDAO åº”ç”¨å®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.dao_.dao;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.utils.JDBCUtilsByDruid;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.QueryRunner;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¼€å‘BasicDAOï¼Œæ˜¯å…¶å®ƒDAOçš„çˆ¶ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicDAO</span>&lt;T&gt; &#123; <span class="hljs-comment">//æ³›å‹æŒ‡å®šå…·ä½“çš„ç±»å‹</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">qr</span> <span class="hljs-operator">=</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>    <span class="hljs-comment">//å¼€å‘é€šç”¨çš„ dml æ–¹æ³•ï¼Œé’ˆå¯¹ä»»æ„çš„è¡¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(String sql, Object... parameters)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> qr.update(connection, sql, parameters);<br>            <span class="hljs-keyword">return</span> update;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> sql sqlè¯­å¥ï¼Œå¯ä»¥æœ‰ ?</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> clazz ä¼ å…¥ä¸€ä¸ªç±»çš„classå¯¹è±¡ï¼Œæ¯”å¦‚Actor.class</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> parameters ä¼ å…¥ ? çš„å…·ä½“çš„å€¼ï¼Œå¯ä»¥æ˜¯å¤šä¸ª</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ ¹æ®å…·ä½“çš„clazzç±»å‹è¿”å›å¯¹åº”çš„ArrayListé›†åˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-comment">//è¿”å›å¤šä¸ªå¯¹è±¡ï¼ˆå³æŸ¥è¯¢çš„ç»“æœæ˜¯å¤šè¡Œï¼‰ï¼Œé’ˆå¯¹ä»»æ„è¡¨</span><br>    <span class="hljs-keyword">public</span> List&lt;T&gt; <span class="hljs-title function_">queryMylti</span><span class="hljs-params">(String sql, Class&lt;T&gt; clazz, Object... parameters)</span>&#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-keyword">return</span> qr.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;T&gt;(clazz), parameters);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//æŸ¥è¯¢å•è¡Œç»“æœçš„é€šç”¨æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">querySingle</span><span class="hljs-params">(String sql, Class&lt;T&gt; clazz, Object... parameters)</span>&#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-keyword">return</span> qr.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanHandler</span>&lt;T&gt;(clazz),parameters);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//æŸ¥è¯¢å•è¡Œå•åˆ—çš„æ–¹æ³•ï¼Œå³è¿”å›å•å€¼çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">queryScalar</span><span class="hljs-params">(String sql, Object... parameters)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-keyword">return</span> qr.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScalarHandler</span>(), parameters);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.jdbcStudy.dao_.dao;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.domain.Actor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActorDAO</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BasicDAO</span>&lt;Actor&gt;&#123;<br><br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.jdbcStudy.dao_.test;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.dao.ActorDAO;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.domain.Actor;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDAO</span> &#123;<br><br>    <span class="hljs-comment">//æµ‹è¯•ActorDAO å¯¹actorè¡¨çš„crudæ“ä½œ</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testActorDAO</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">ActorDAO</span> <span class="hljs-variable">actorDAO</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActorDAO</span>();<br>        <span class="hljs-comment">//1.æŸ¥è¯¢</span><br>        List&lt;Actor&gt; actors = actorDAO.queryMylti(<span class="hljs-string">&quot;select * from actor where id &gt;= ?&quot;</span>, Actor.class, <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span>(Actor actor:actors)&#123;<br>            System.out.println(actor);<br>        &#125;<br><br>        <span class="hljs-comment">//2.æŸ¥è¯¢å•è¡Œè®°å½•</span><br>        <span class="hljs-type">Actor</span> <span class="hljs-variable">actor</span> <span class="hljs-operator">=</span> actorDAO.querySingle(<span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>, Actor.class, <span class="hljs-number">4</span>);<br>        System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢å•è¡Œç»“æœï¼š&quot;</span>);<br>        System.out.println(actor);<br><br>        <span class="hljs-comment">//3.æŸ¥è¯¢å•è¡Œå•åˆ—</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> actorDAO.queryScalar(<span class="hljs-string">&quot;select name from actor where id = ?&quot;</span>, <span class="hljs-number">4</span>);<br>        System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢å•è¡Œå•åˆ—ï¼š&quot;</span>);<br>        System.out.println(o);<br><br>        <span class="hljs-comment">//4.dmlæ“ä½œ insert, update, delete</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> actorDAO.update(<span class="hljs-string">&quot;insert into actor values(null, ?, ?, ?, ?)&quot;</span>, <span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>, <span class="hljs-string">&quot;2000-11-11&quot;</span>, <span class="hljs-string">&quot;999&quot;</span>);<br>        System.out.println(update&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;æ‰§è¡ŒæˆåŠŸ&quot;</span>:<span class="hljs-string">&quot;æ‰§è¡Œæ²¡æœ‰å½±å“&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä»‹ç»"><a href="#æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä»‹ç»" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä»‹ç»"></a>æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä»‹ç»</h3><ul><li>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±æ˜¯ç”¨æŸç§æ¨¡å¼å»åŒ¹é…å­—ç¬¦ä¸²çš„ä¸€ä¸ªå…¬å¼ã€‚</li></ul><h3 id="æ­£åˆ™è¡¨è¾¾å¼åº•å±‚å®ç°-é‡è¦"><a href="#æ­£åˆ™è¡¨è¾¾å¼åº•å±‚å®ç°-é‡è¦" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åº•å±‚å®ç°(é‡è¦)"></a>æ­£åˆ™è¡¨è¾¾å¼åº•å±‚å®ç°(é‡è¦)</h3><p>ç»™å‡ºä¸€æ®µå­—ç¬¦ä¸²(æ–‡æœ¬),è¯·æ‰¾å‡ºæ‰€æœ‰å››ä¸ªæ•°å­—è¿åœ¨ä¸€èµ·çš„å­ä¸²ï¼Œ æ¯”å¦‚:  åº”è¯¥æ‰¾åˆ° 1998 1999 3443 9889 </p><p>&#x3D;&#x3D;&#x3D;&gt; åˆ†æåº•å±‚å®ç° </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.regexp;<br><span class="hljs-keyword">import</span> java.util.regex.Matcher;<br><span class="hljs-keyword">import</span> java.util.regex.Pattern;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ†æjavaçš„æ­£åˆ™è¡¨è¾¾å¼çš„åº•å±‚å®ç°(é‡è¦.)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegTheory</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1998å¹´12æœˆ8æ—¥ï¼Œç¬¬äºŒä»£Javaå¹³å°çš„ä¼ä¸šç‰ˆJ2EEå‘å¸ƒã€‚1999å¹´6æœˆï¼ŒSunå…¬å¸å‘å¸ƒäº†&quot;</span> +<br>                <span class="hljs-string">&quot;ç¬¬äºŒä»£Javaå¹³å°ï¼ˆç®€ç§°ä¸ºJava2ï¼‰çš„3ä¸ªç‰ˆæœ¬ï¼šJ2MEï¼ˆJava2 Micro Editionï¼ŒJava2å¹³å°çš„å¾®å‹&quot;</span> +<br>                <span class="hljs-string">&quot;ç‰ˆï¼‰ï¼Œåº”ç”¨äºç§»åŠ¨ã€æ— çº¿åŠæœ‰é™èµ„æºçš„ç¯å¢ƒï¼›J2SEï¼ˆJava 2 Standard Editionï¼ŒJava 2å¹³å°çš„&quot;</span> +<br>                <span class="hljs-string">&quot;æ ‡å‡†ç‰ˆï¼‰ï¼Œåº”ç”¨äºæ¡Œé¢ç¯å¢ƒï¼›J2EEï¼ˆJava 2Enterprise Editionï¼ŒJava 2å¹³å°çš„ä¼ä¸šç‰ˆï¼‰ï¼Œåº”&quot;</span> +<br>                <span class="hljs-string">&quot;ç”¨3443äºåŸºäºJavaçš„åº”ç”¨æœåŠ¡å™¨ã€‚Java 2å¹³å°çš„å‘å¸ƒï¼Œæ˜¯Javaå‘å±•è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸€ä¸ª&quot;</span> +<br>                <span class="hljs-string">&quot;é‡Œç¨‹ç¢‘ï¼Œæ ‡å¿—ç€Javaçš„åº”ç”¨å¼€å§‹æ™®åŠ9889 &quot;</span>;<br>        <span class="hljs-comment">//ç›®æ ‡ï¼šåŒ¹é…æ‰€æœ‰å››ä¸ªæ•°å­—</span><br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">//1. \\d è¡¨ç¤ºä¸€ä¸ªä»»æ„çš„æ•°å­—</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d\\d)(\\d\\d)&quot;</span>;<br>        <span class="hljs-comment">//2. åˆ›å»ºæ¨¡å¼å¯¹è±¡[å³æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡]</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-comment">//3. åˆ›å»ºåŒ¹é…å™¨</span><br>        <span class="hljs-comment">//è¯´æ˜ï¼šåˆ›å»ºåŒ¹é…å™¨matcherï¼Œ æŒ‰ç…§ æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™ å»åŒ¹é… contentå­—ç¬¦ä¸²</span><br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-comment">//4.å¼€å§‹åŒ¹é…</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         * matcher.find() å®Œæˆçš„ä»»åŠ¡ ï¼ˆè€ƒè™‘åˆ†ç»„ï¼‰</span><br><span class="hljs-comment">         * ä»€ä¹ˆæ˜¯åˆ†ç»„ï¼Œæ¯”å¦‚  (\d\d)(\d\d) ,æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰() è¡¨ç¤ºåˆ†ç»„,ç¬¬1ä¸ª()è¡¨ç¤ºç¬¬1ç»„,ç¬¬2ä¸ª()è¡¨ç¤ºç¬¬2ç»„...</span><br><span class="hljs-comment">         * 1. æ ¹æ®æŒ‡å®šçš„è§„åˆ™ ,å®šä½æ»¡è¶³è§„åˆ™çš„å­å­—ç¬¦ä¸²(æ¯”å¦‚(19)(98))</span><br><span class="hljs-comment">         * 2. æ‰¾åˆ°åï¼Œå°† å­å­—ç¬¦ä¸²çš„å¼€å§‹çš„ç´¢å¼•è®°å½•åˆ° matcherå¯¹è±¡çš„å±æ€§ int[] groups;</span><br><span class="hljs-comment">         *    2.1 groups[0] = 0 , æŠŠè¯¥å­å­—ç¬¦ä¸²çš„ç»“æŸçš„ç´¢å¼•+1çš„å€¼è®°å½•åˆ° groups[1] = 4</span><br><span class="hljs-comment">         *    2.2 è®°å½•1ç»„()åŒ¹é…åˆ°çš„å­—ç¬¦ä¸² groups[2] = 0  groups[3] = 2</span><br><span class="hljs-comment">         *    2.3 è®°å½•2ç»„()åŒ¹é…åˆ°çš„å­—ç¬¦ä¸² groups[4] = 2  groups[5] = 4</span><br><span class="hljs-comment">         *    2.4.å¦‚æœæœ‰æ›´å¤šçš„åˆ†ç»„.....</span><br><span class="hljs-comment">         * 3. åŒæ—¶è®°å½•oldLast çš„å€¼ä¸º å­å­—ç¬¦ä¸²çš„ç»“æŸçš„ ç´¢å¼•+1çš„å€¼å³4, å³ä¸‹æ¬¡æ‰§è¡Œfindæ—¶ï¼Œå°±ä»4å¼€å§‹åŒ¹é…</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         * matcher.group(0) æºç åˆ†æ:</span><br><span class="hljs-comment">         * public String group(int group) &#123;</span><br><span class="hljs-comment">         *         if (first &lt; 0)</span><br><span class="hljs-comment">         *             throw new IllegalStateException(&quot;No match found&quot;);</span><br><span class="hljs-comment">         *         if (group &lt; 0 || group &gt; groupCount())</span><br><span class="hljs-comment">         *             throw new IndexOutOfBoundsException(&quot;No group &quot; + group);</span><br><span class="hljs-comment">         *         if ((groups[group*2] == -1) || (groups[group*2+1] == -1))</span><br><span class="hljs-comment">         *             return null;</span><br><span class="hljs-comment">         *         return getSubSequence(groups[group * 2], groups[group * 2 + 1]).toString();</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         *  1. æ ¹æ® groups[0]=0 å’Œ groups[1]=4 çš„è®°å½•çš„ä½ç½®ï¼Œä»contentå¼€å§‹æˆªå–å­å­—ç¬¦ä¸²è¿”å›</span><br><span class="hljs-comment">         *     å°±æ˜¯ [0,4) åŒ…å« 0 ä½†æ˜¯ä¸åŒ…å«ç´¢å¼•ä¸º 4çš„ä½ç½®</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  å¦‚æœå†æ¬¡æŒ‡å‘ findæ–¹æ³•.ä»ç„¶æŒ‰ä¸Šé¢åˆ†ææ¥æ‰§è¡Œ</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            <span class="hljs-comment">//å°ç»“</span><br>            <span class="hljs-comment">//1. å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æœ‰() å³åˆ†ç»„</span><br>            <span class="hljs-comment">//2. å–å‡ºåŒ¹é…çš„å­—ç¬¦ä¸²è§„åˆ™å¦‚ä¸‹</span><br>            <span class="hljs-comment">//3. group(0) è¡¨ç¤ºåŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²</span><br>            <span class="hljs-comment">//4. group(1) è¡¨ç¤ºåŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²çš„ç¬¬1ç»„å­—ä¸²</span><br>            <span class="hljs-comment">//5. group(2) è¡¨ç¤ºåŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²çš„ç¬¬2ç»„å­—ä¸²</span><br>            <span class="hljs-comment">//6. ... ä½†æ˜¯åˆ†ç»„çš„æ•°ä¸èƒ½è¶Šç•Œ.</span><br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°: &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬1ç»„()åŒ¹é…åˆ°çš„å€¼=&quot;</span> + matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬2ç»„()åŒ¹é…åˆ°çš„å€¼=&quot;</span> + matcher.group(<span class="hljs-number">2</span>));<br><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•"><a href="#æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•"></a>æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</h3><h4 id="åŸºæœ¬ä»‹ç»-12"><a href="#åŸºæœ¬ä»‹ç»-12" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><p>å¦‚æœæƒ³çµæ´»è¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¿…é¡»äº†è§£å…¶ä¸­å„ç§å…ƒå­—ç¬¦çš„åŠŸèƒ½ï¼Œå…ƒå­—ç¬¦ä»åŠŸèƒ½ä¸Šå¤§è‡´åˆ†ä¸ºï¼š</p><ul><li>é™å®šç¬¦</li><li>é€‰æ‹©åŒ¹é…ç¬¦</li><li>åˆ†ç»„ç»„åˆå’Œåå‘å¼•ç”¨ç¬¦</li><li>ç‰¹æ®Šå­—ç¬¦</li><li>å­—ç¬¦åŒ¹é…ç¬¦</li><li>å®šä½ç¬¦</li></ul><h4 id="å…ƒå­—ç¬¦-è½¬ä¹‰å·"><a href="#å…ƒå­—ç¬¦-è½¬ä¹‰å·" class="headerlink" title="å…ƒå­—ç¬¦ - è½¬ä¹‰å· \\"></a>å…ƒå­—ç¬¦ - è½¬ä¹‰å· \\</h4><p>\\ ç¬¦å·è¯´æ˜ï¼šåœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»æ£€ç´¢æŸäº›ç‰¹æ®Šå­—ç¬¦çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°è½¬ä¹‰ç¬¦å·ï¼Œå¦åˆ™æ£€ç´¢ä¸åˆ°ç»“æœç”šè‡³æŠ¥é”™ã€‚</p><p>éœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦å·çš„å­—ç¬¦ï¼š <strong>. * + ( ) $ &#x2F; \ ? [ ] ^ { }</strong> </p><p><strong>æç¤ºï¼šåœ¨ Java çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œ \\ ä»£è¡¨ ä¸€ä¸ª \</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¡ˆä¾‹æ¼”ç¤º</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc$(a.bc(123( )&quot;</span>;<br>        <span class="hljs-comment">//åŒ¹é…( =&gt; \\(</span><br>        <span class="hljs-comment">//åŒ¹é…. =&gt; \\.</span><br>        <span class="hljs-comment">//String regStr = &quot;\\.&quot;;</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d\\d\\d&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d&#123;3&#125;&quot;</span>;<br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ° &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å…ƒå­—ç¬¦-å­—ç¬¦åŒ¹é…ç¬¦"><a href="#å…ƒå­—ç¬¦-å­—ç¬¦åŒ¹é…ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦-å­—ç¬¦åŒ¹é…ç¬¦"></a>å…ƒå­—ç¬¦-å­—ç¬¦åŒ¹é…ç¬¦</h4><ul><li><img src="image-20221014150658309.png" alt="image-20221014150658309" style="zoom:60%;" /></li><li><p>\\d è¡¨ç¤ºå¯ä»¥åŒ¹é… 0-9 çš„ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œç›¸å½“äº [0-9]</p></li><li><p>\\D è¡¨ç¤ºå¯ä»¥åŒ¹é…ä¸æ˜¯ 0-9 çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äº [^0-9]</p></li><li><p>\\w è¡¨ç¤ºåŒ¹é…ä»»æ„è‹±æ–‡å­—ç¬¦ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œç›¸å½“äº [a-zAA-Z0-9_]</p></li><li><p>\\W è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸æ˜¯è‹±æ–‡å­—ç¬¦ã€æ•°å­—å’Œä¸‹åˆ’çº¿çš„å­—ç¬¦ï¼Œç›¸å½“äº [^a-zAA-Z0-9_]</p></li><li><p>\\s è¡¨ç¤ºåŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ç­‰ï¼‰</p></li><li><p>\\S è¡¨ç¤ºåŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦</p></li><li><p>. è¡¨ç¤ºåŒ¹é…é™¤ \n ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦ï¼Œå¦‚æœè¦åŒ¹é… . ï¼Œåˆ™éœ€è¦ä½¿ç”¨ \\.</p></li><li><p>æ³¨æ„ï¼š[ ] é‡Œé¢çš„ [. ? *]è¡¨ç¤ºåŒ¹é…å°±æ˜¯. ? *æœ¬èº«</p></li><li><p><strong>é™„è¡¨ï¼š</strong></p><img src="image-20221014150738567.png" alt="image-20221014150738567" style="zoom:54%;" /></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºå­—ç¬¦åŒ¹é…ç¬¦ çš„ä½¿ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a11c8abc _ABCy @&quot;</span>;<br>        <span class="hljs-comment">//String regStr = &quot;[a-z]&quot;;//åŒ¹é… a-zä¹‹é—´ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;[A-Z]&quot;;//åŒ¹é… A-Zä¹‹é—´ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;abc&quot;;//åŒ¹é… abc å­—ç¬¦ä¸²[é»˜è®¤åŒºåˆ†å¤§å°å†™]</span><br>        <span class="hljs-comment">//String regStr = &quot;(?i)abc&quot;;//åŒ¹é… abc å­—ç¬¦ä¸²[ä¸åŒºåˆ†å¤§å°å†™]</span><br>        <span class="hljs-comment">//String regStr = &quot;a(?i)bc&quot;;//åŒ¹é… abc å­—ç¬¦ä¸²[åªæœ‰bcä¸åŒºåˆ†å¤§å°å†™]</span><br>        <span class="hljs-comment">//String regStr = &quot;a((?i)b)c&quot;;//åŒ¹é… abc å­—ç¬¦ä¸²[åªæœ‰bä¸åŒºåˆ†å¤§å°å†™]</span><br>        <span class="hljs-comment">//String regStr = &quot;[0-9]&quot;;//åŒ¹é… 0-9 ä¹‹é—´ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;[^a-z]&quot;;//åŒ¹é… ä¸åœ¨ a-zä¹‹é—´ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;[^0-9]&quot;;//åŒ¹é… ä¸åœ¨ 0-9ä¹‹é—´ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;[abcd]&quot;;//åŒ¹é… åœ¨ abcdä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;\\D&quot;;//åŒ¹é… ä¸åœ¨ 0-9çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-comment">//String regStr = &quot;\\w&quot;;//åŒ¹é… å¤§å°å†™è‹±æ–‡å­—æ¯, æ•°å­—ï¼Œä¸‹åˆ’çº¿</span><br>        <span class="hljs-comment">//String regStr = &quot;\\W&quot;;//åŒ¹é… ç­‰ä»·äº [^a-zA-Z0-9_]</span><br>        <br>        <span class="hljs-comment">//\\s åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦(ç©ºæ ¼,åˆ¶è¡¨ç¬¦ç­‰)</span><br>        <span class="hljs-comment">//String regStr = &quot;\\s&quot;;</span><br>        <span class="hljs-comment">//\\S åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ ,å’Œ\\såˆšå¥½ç›¸å</span><br>        <span class="hljs-comment">//String regStr = &quot;\\S&quot;;</span><br>        <br>        <span class="hljs-comment">//.  åŒ¹é…å‡º \n ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦,å¦‚æœè¦åŒ¹é….æœ¬èº«åˆ™éœ€è¦ä½¿ç”¨ \\.</span><br>        <span class="hljs-comment">//String regStr = &quot;.&quot;;</span><br><br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">//1. å½“åˆ›å»ºPatternå¯¹è±¡æ—¶ï¼ŒæŒ‡å®š Pattern.CASE_INSENSITIVE, è¡¨ç¤ºåŒ¹é…æ˜¯ä¸åŒºåˆ†å­—æ¯å¤§å°å†™.</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr<span class="hljs-comment">/*, Pattern.CASE_INSENSITIVE*/</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ° &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å…ƒå­—ç¬¦-é€‰æ‹©åŒ¹é…ç¬¦"><a href="#å…ƒå­—ç¬¦-é€‰æ‹©åŒ¹é…ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦-é€‰æ‹©åŒ¹é…ç¬¦"></a>å…ƒå­—ç¬¦-é€‰æ‹©åŒ¹é…ç¬¦</h4> <img src="image-20221015094843440.png" alt="image-20221015094843440" style="zoom: 50%;" /><ul><li><p>| è¡¨ç¤ºåŒ¹é… â€œ|â€ ä¹‹å‰æˆ–ä¹‹åçš„è¡¨è¾¾å¼</p><p>ç¤ºä¾‹ï¼šab|cd è¡¨ç¤ºåŒ¹é… ab æˆ–è€… cd</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€‰æ‹©åŒ¹é…ç¬¦</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liangyinghua æ¢ leung&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liang|æ¢|leung&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr<span class="hljs-comment">/*, Pattern.CASE_INSENSITIVE*/</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ° &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å…ƒå­—ç¬¦-é™å®šç¬¦"><a href="#å…ƒå­—ç¬¦-é™å®šç¬¦" class="headerlink" title="å…ƒå­—ç¬¦-é™å®šç¬¦"></a>å…ƒå­—ç¬¦-é™å®šç¬¦</h4><ul><li><p>ç”¨äºæŒ‡å®šå…¶å‰é¢çš„å­—ç¬¦å’Œç»„åˆé¡¹è¿ç»­å‡ºç°å¤šå°‘æ¬¡</p></li><li><p><strong>ç»†èŠ‚ï¼š</strong>javaåŒ¹é…é»˜è®¤<strong>è´ªå©ªåŒ¹é…</strong>ï¼Œå³å°½å¯èƒ½åŒ¹é…å¤šçš„</p></li></ul> <img src="image-20221015095634088.png" alt="image-20221015095634088" style="zoom: 60%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºé™å®šç¬¦çš„ä½¿ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp05</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a111111aaaaaahello&quot;</span>;<br><br>        <span class="hljs-comment">//a&#123;3&#125;,1&#123;4&#125;,\\d&#123;2&#125;</span><br>        <span class="hljs-comment">//String regStr = &quot;a&#123;3&#125;&quot;;// è¡¨ç¤ºåŒ¹é… aaa</span><br>        <span class="hljs-comment">//String regStr = &quot;1&#123;4&#125;&quot;;// è¡¨ç¤ºåŒ¹é… 1111</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d&#123;2&#125;&quot;;// è¡¨ç¤ºåŒ¹é… ä¸¤ä½çš„ä»»æ„æ•°å­—å­—ç¬¦</span><br><br>        <span class="hljs-comment">//a&#123;3,4&#125;,1&#123;4,5&#125;,\\d&#123;2,5&#125;</span><br>        <span class="hljs-comment">//ç»†èŠ‚ï¼šjavaåŒ¹é…é»˜è®¤è´ªå©ªåŒ¹é…ï¼Œå³å°½å¯èƒ½åŒ¹é…å¤šçš„</span><br>        <span class="hljs-comment">//String regStr = &quot;a&#123;3,4&#125;&quot;; //è¡¨ç¤ºåŒ¹é… aaa æˆ–è€… aaaa</span><br>        <span class="hljs-comment">//String regStr = &quot;1&#123;4,5&#125;&quot;; //è¡¨ç¤ºåŒ¹é… 1111 æˆ–è€… 11111</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d&#123;2,5&#125;&quot;; //åŒ¹é…2,3,4,5ä½æ•°</span><br><br>        <span class="hljs-comment">//1+</span><br>        <span class="hljs-comment">//String regStr = &quot;1+&quot;; //åŒ¹é…ä¸€ä¸ª1æˆ–è€…å¤šä¸ª1</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d+&quot;; //åŒ¹é…ä¸€ä¸ªæ•°å­—æˆ–è€…å¤šä¸ªæ•°å­—</span><br><br>        <span class="hljs-comment">//1*</span><br>        <span class="hljs-comment">//String regStr = &quot;1*&quot;; //åŒ¹é…0ä¸ª1æˆ–è€…å¤šä¸ª1</span><br><br>        <span class="hljs-comment">//æ¼”ç¤º?çš„ä½¿ç”¨, éµå®ˆè´ªå©ªåŒ¹é…</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a1?&quot;</span>; <span class="hljs-comment">//åŒ¹é… a æˆ–è€… a1</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr<span class="hljs-comment">/*, Pattern.CASE_INSENSITIVE*/</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ° &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å…ƒå­—ç¬¦-å®šä½ç¬¦"><a href="#å…ƒå­—ç¬¦-å®šä½ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦-å®šä½ç¬¦"></a>å…ƒå­—ç¬¦-å®šä½ç¬¦</h4><p>å®šä½ç¬¦, è§„å®šè¦åŒ¹é…çš„å­—ç¬¦ä¸²å‡ºç°çš„ä½ç½®ï¼Œæ¯”å¦‚åœ¨å­—ç¬¦ä¸²çš„å¼€å§‹è¿˜æ˜¯åœ¨ç»“æŸçš„ä½ç½®</p> <img src="image-20221015101518508.png" alt="image-20221015101518508" style="zoom:54%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºå®šä½ç¬¦çš„ä½¿ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp06</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liangyinglianghua yhliang ggliang&quot;</span>;<br>        <span class="hljs-comment">//String content = &quot;123-abc&quot;;</span><br>        <span class="hljs-comment">//ä»¥è‡³å°‘1ä¸ªæ•°å­—å¼€å¤´ï¼Œåæ¥ä»»æ„ä¸ªå°å†™å­—æ¯çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-comment">//String regStr = &quot;^[0-9]+[a-z]*&quot;;</span><br>        <span class="hljs-comment">//ä»¥è‡³å°‘1ä¸ªæ•°å­—å¼€å¤´, å¿…é¡»ä»¥è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯ç»“æŸ</span><br>        <span class="hljs-comment">//String regStr = &quot;^[0-9]+[a-z]+$&quot;;</span><br>        <span class="hljs-comment">//ä»¥è‡³å°‘1ä¸ªæ•°å­—å¼€å¤´, ä¸­é—´æ˜¯ - ,å¿…é¡»ä»¥è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯ç»“æŸ</span><br>        <span class="hljs-comment">//String regStr = &quot;^[0-9]+\\-[a-z]+$&quot;;</span><br><br>        <span class="hljs-comment">// liang\\bè¡¨ç¤ºåŒ¹é…è¾¹ç•Œçš„liang</span><br>        <span class="hljs-comment">// [è¿™é‡Œçš„è¾¹ç•Œæ˜¯æŒ‡ï¼šè¢«åŒ¹é…çš„å­—ç¬¦ä¸²æœ€å,ä¹Ÿå¯ä»¥æ˜¯ç©ºæ ¼çš„å­å­—ç¬¦ä¸²çš„åé¢]</span><br>        <span class="hljs-comment">// String regStr = &quot;liang\\b&quot;;</span><br>        <span class="hljs-comment">// \\Bå’Œ\\bçš„å«ä¹‰åˆšåˆšç›¸å</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liang\\B&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åˆ†ç»„ä¸æ•è·"><a href="#åˆ†ç»„ä¸æ•è·" class="headerlink" title="åˆ†ç»„ä¸æ•è·"></a>åˆ†ç»„ä¸æ•è·</h4> <img src="image-20221015104242065.png" alt="image-20221015104242065" style="zoom:80%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ†ç»„</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp07</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liangyinghua s7789 nn1189liang&quot;</span>;<br><br>        <span class="hljs-comment">//éå‘½ååˆ†ç»„</span><br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">// 1. matcher.group(0) å¾—åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-comment">// 2. matcher.group(1) å¾—åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²çš„ç¬¬1ä¸ªåˆ†ç»„å†…å®¹</span><br>        <span class="hljs-comment">// 3. matcher.group(2) å¾—åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²çš„ç¬¬2ä¸ªåˆ†ç»„å†…å®¹</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d\\d)(\\d\\d)&quot;</span>;<span class="hljs-comment">//åŒ¹é…4ä¸ªæ•°å­—çš„å­—ç¬¦ä¸²</span><br><br>        <span class="hljs-comment">//å‘½ååˆ†ç»„ï¼ˆå³å¯ä»¥ç»™åˆ†ç»„å–åï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(?&lt;g1&gt;\\d\\d)(?&lt;g2&gt;\\d\\d)&quot;</span>;<span class="hljs-comment">//åŒ¹é…4ä¸ªæ•°å­—çš„å­—ç¬¦ä¸²</span><br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr2);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬1ä¸ªåˆ†ç»„å†…å®¹=&quot;</span> + matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬1ä¸ªåˆ†ç»„å†…å®¹[é€šè¿‡ç»„å]=&quot;</span> + matcher.group(<span class="hljs-string">&quot;g1&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬2ä¸ªåˆ†ç»„å†…å®¹=&quot;</span> + matcher.group(<span class="hljs-number">2</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬2ä¸ªåˆ†ç»„å†…å®¹[é€šè¿‡ç»„å]=&quot;</span> + matcher.group(<span class="hljs-string">&quot;g2&quot;</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºéæ•è·åˆ†ç»„, è¯­æ³•æ¯”è¾ƒå¥‡æ€ª</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp08</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;helloéŸ©é¡ºå¹³æ•™è‚² jackéŸ©é¡ºå¹³è€å¸ˆ éŸ©é¡ºå¹³åŒå­¦helloéŸ©é¡ºå¹³å­¦ç”Ÿ&quot;</span>;<br>        <br>        <span class="hljs-comment">//æ‰¾åˆ° éŸ©é¡ºå¹³æ•™è‚² ã€éŸ©é¡ºå¹³è€å¸ˆã€éŸ©é¡ºå¹³åŒå­¦ å­å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr11</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²|éŸ©é¡ºå¹³è€å¸ˆ|éŸ©é¡ºå¹³åŒå­¦&quot;</span>;<br>        <span class="hljs-comment">//ä¸Šé¢çš„å†™æ³•å¯ä»¥ç­‰ä»·éæ•è·åˆ†ç»„, æ³¨æ„ï¼šä¸èƒ½ matcher.group(1)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr12</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;éŸ©é¡ºå¹³(?:æ•™è‚²|è€å¸ˆ|åŒå­¦)&quot;</span>;<br><br>        <span class="hljs-comment">//æ‰¾åˆ° éŸ©é¡ºå¹³ è¿™ä¸ªå…³é”®å­—,ä½†æ˜¯è¦æ±‚åªæ˜¯æŸ¥æ‰¾éŸ©é¡ºå¹³æ•™è‚²å’Œ éŸ©é¡ºå¹³è€å¸ˆ ä¸­åŒ…å«æœ‰çš„éŸ©é¡ºå¹³</span><br>        <span class="hljs-comment">//ä¸‹é¢ä¹Ÿæ˜¯éæ•è·åˆ†ç»„ï¼Œä¸èƒ½ä½¿ç”¨ matcher.group(1)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr22</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;éŸ©é¡ºå¹³(?=æ•™è‚²|è€å¸ˆ)&quot;</span>;<br><br>        <span class="hljs-comment">//æ‰¾åˆ° éŸ©é¡ºå¹³ è¿™ä¸ªå…³é”®å­—,ä½†æ˜¯è¦æ±‚åªæ˜¯æŸ¥æ‰¾ ä¸æ˜¯ (éŸ©é¡ºå¹³æ•™è‚² å’Œ éŸ©é¡ºå¹³è€å¸ˆ) ä¸­åŒ…å«æœ‰çš„éŸ©é¡ºå¹³</span><br>        <span class="hljs-comment">//ä¸‹é¢ä¹Ÿæ˜¯éæ•è·åˆ†ç»„ï¼Œä¸èƒ½ä½¿ç”¨ matcher.group(1)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr32</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;éŸ©é¡ºå¹³(?!æ•™è‚²|è€å¸ˆ)&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr32);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°: &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="éè´ªå©ªåŒ¹é…-â€œ-â€"><a href="#éè´ªå©ªåŒ¹é…-â€œ-â€" class="headerlink" title="éè´ªå©ªåŒ¹é… â€œ?â€"></a>éè´ªå©ªåŒ¹é… â€œ?â€</h4><p><strong>å½“æ­¤å­—ç¬¦ï¼ˆ?ï¼‰ç´§éšä»»ä½•å…¶ä»–é™å®šç¬¦ï¼ˆ*ã€+ã€?ã€{*n*}ã€{*n*,}ã€{*n*,*m*}ï¼‰ä¹‹åæ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯â€éè´ªå¿ƒçš„â€ã€‚â€éè´ªå¿ƒçš„â€æ¨¡å¼åŒ¹é…æœç´¢åˆ°çš„ã€å°½å¯èƒ½çŸ­çš„å­—ç¬¦ä¸²ï¼Œè€Œé»˜è®¤çš„â€è´ªå¿ƒçš„â€æ¨¡å¼åŒ¹é…æœç´¢åˆ°çš„ã€å°½å¯èƒ½é•¿çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œåœ¨å­—ç¬¦ä¸²â€ooooâ€ä¸­ï¼Œâ€o+?â€åªåŒ¹é…å•ä¸ªâ€oâ€ï¼Œè€Œâ€o+â€åŒ¹é…æ‰€æœ‰â€oâ€ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éè´ªå©ªåŒ¹é…</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp09</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello111111 ok&quot;</span>;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d+&quot;</span>; <span class="hljs-comment">//é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…</span><br>         <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d+?&quot;</span>; <span class="hljs-comment">//éè´ªå©ªåŒ¹é…</span><br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr2);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°: &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åº”ç”¨æ¡ˆä¾‹-1"><a href="#åº”ç”¨æ¡ˆä¾‹-1" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ­£åˆ™è¡¨è¾¾å¼çš„åº”ç”¨å®ä¾‹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp10</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;13588889999&quot;</span>;<br><br>        <span class="hljs-comment">// æ±‰å­—</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[\u0391-\uffe5]+$&quot;</span>;<br><br>        <span class="hljs-comment">// é‚®æ”¿ç¼–ç </span><br>        <span class="hljs-comment">// è¦æ±‚ï¼š1.æ˜¯1-9å¼€å¤´çš„ä¸€ä¸ªå…­ä½æ•°.  æ¯”å¦‚ï¼š123890</span><br>        <span class="hljs-comment">//      2.</span><br>        <span class="hljs-comment">//      3.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[1-9]\\d&#123;5&#125;$&quot;</span>;<br><br>        <span class="hljs-comment">// QQå·ç </span><br>        <span class="hljs-comment">// è¦æ±‚:  æ˜¯1-9å¼€å¤´çš„ä¸€ä¸ª(5ä½æ•°-10ä½æ•°)  æ¯”å¦‚:  12389 , 1345687 , 187698765</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[1-9]\\d&#123;4,9&#125;$&quot;</span>;<br><br>        <span class="hljs-comment">// æ‰‹æœºå·ç </span><br>        <span class="hljs-comment">// è¦æ±‚: å¿…é¡»ä»¥13,14,15,18 å¼€å¤´çš„11ä½æ•° , æ¯”å¦‚ 13588889999</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^1[3|4|5|8]\\d&#123;9&#125;$&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr1);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">if</span>(matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ»¡è¶³æ ¼å¼&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;ä¸æ»¡è¶³æ ¼å¼&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp11</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//String content = &quot;https://www.bilibili.com/video/BV1fh411y7R8?from=search&amp;seid=1831060912083761326&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://edu.3dsmax.tech/yg/bilibili/my6652/pc/qg/05-51/index.html#201211-1?track_id=jMc0jn-hm-yHrNfVad37YdhOUh41XYmjlss9zocM26gspY5ArwWuxb4wYWpmh2Q7GzR7doU0wLkViEhUlO1qNtukyAgake2jG1bTd23lR57XzV83E9bAXWkStcAh4j9Dz7a87ThGlqgdCZ2zpQy33a0SVNMfmJLSNnDzJ71TU68Rc-3PKE7VA3kYzjk4RrKU&quot;</span>;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * æ€è·¯</span><br><span class="hljs-comment">         * 1. å…ˆç¡®å®š url çš„å¼€å§‹éƒ¨åˆ† https:// | http://</span><br><span class="hljs-comment">         * 2.ç„¶åé€šè¿‡ ([\w-]+\.)+[\w-]+ åŒ¹é… www.bilibili.com</span><br><span class="hljs-comment">         * 3. /video/BV1fh411y7R8?from=sear åŒ¹é…(\/[\w-?=&amp;/%.#]*)?</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^((http|https)://)?([\\w-]+\\.)+[\\w-]+(\\/[\\w-?=&amp;/%.#]*)?$&quot;</span>;<span class="hljs-comment">//æ³¨æ„ï¼š[. ? *]è¡¨ç¤ºåŒ¹é…å°±æ˜¯.æœ¬èº«</span><br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">if</span>(matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ»¡è¶³æ ¼å¼&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;ä¸æ»¡è¶³æ ¼å¼&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//è¿™é‡Œå¦‚æœä½¿ç”¨Patternçš„matches æ•´ä½“åŒ¹é… æ¯”è¾ƒç®€æ´</span><br>        System.out.println(Pattern.matches(regStr, content));<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ­£åˆ™è¡¨è¾¾å¼ä¸‰ä¸ªå¸¸ç”¨ç±»"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä¸‰ä¸ªå¸¸ç”¨ç±»" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¸‰ä¸ªå¸¸ç”¨ç±»"></a>æ­£åˆ™è¡¨è¾¾å¼ä¸‰ä¸ªå¸¸ç”¨ç±»</h3><p>java.util.regex åŒ…ä¸»è¦åŒ…æ‹¬ä¸€ä¸‹ä¸‰ä¸ªç±» <strong>Pattern ç±»</strong>ã€<strong>Matcher ç±»</strong> å’Œ <strong>PatternSyntaxException</strong></p><ul><li><p><strong>Pattern ç±»</strong></p><p>Pattern å¯¹è±¡æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚Pattern ç±»æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚è¦åˆ›å»ºä¸€ä¸ª Pattern å¯¹è±¡ï¼Œè°ƒç”¨å…¶å…¬å…±é™æ€æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª Pattern å¯¹è±¡ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Pattern pattern= Pattern.compile(regStr);<br></code></pre></td></tr></table></figure><ul><li><strong>Pattern.matches() æ–¹æ³•</strong> ï¼šç”¨äºæ•´ä½“åŒ¹é…, åœ¨éªŒè¯è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æ¡ä»¶ä½¿ç”¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¼”ç¤ºPattern.matchesæ–¹æ³•ï¼Œç”¨äºæ•´ä½“åŒ¹é…, åœ¨éªŒè¯è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æ¡ä»¶ä½¿ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PatternMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello abc hello, éŸ©é¡ºå¹³æ•™è‚²&quot;</span>;<br>        <span class="hljs-comment">//String regStr = &quot;hello&quot;;  //false</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello.*&quot;</span>;  <span class="hljs-comment">//true</span><br><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">matches</span> <span class="hljs-operator">=</span> Pattern.matches(regStr, content);<br>        System.out.println(<span class="hljs-string">&quot;æ•´ä½“åŒ¹é…ï¼š&quot;</span> + matches);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>Matcher ç±»</strong></p><p>Matcher å¯¹è±¡æ˜¯å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œè§£é‡Šå’ŒåŒ¹é…çš„å¼•æ“ã€‚ä¸ Pattern ç±»ä¸€æ ·ï¼ŒMatcher ä¹Ÿæ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚éœ€è¦è°ƒç”¨ Pattern å¯¹è±¡çš„ matcher æ–¹æ³•æ¥è·å¾—ä¸€ä¸ª Matcher å¯¹è±¡ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Matcher ç±»çš„å¸¸ç”¨æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MatcherMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello edu jack hspedutom hello smith hello hspedu hspedu&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br><br>        <span class="hljs-comment">//matcher.start() è¿”å›æ‰¾åˆ°åŒ¹é…çš„èµ·å§‹ç´¢å¼•</span><br>        <span class="hljs-comment">//matcher.end() è¿”å›æ‰¾åˆ°åŒ¹é…çš„å°¾éƒ¨ç´¢å¼•åŠ 1</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;=================&quot;</span>);<br>            System.out.println(matcher.start());<br>            System.out.println(matcher.end());<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°: &quot;</span> + content.substring(matcher.start(), matcher.end()));<br>        &#125;<br><br>        <span class="hljs-comment">//æ•´ä½“åŒ¹é…æ–¹æ³•ï¼Œå¸¸ç”¨äºï¼Œå»æ ¡éªŒæŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æŸä¸ªè§„åˆ™</span><br>        System.out.println(<span class="hljs-string">&quot;æ•´ä½“åŒ¹é…=&quot;</span> + matcher.matches());<br><br>        <span class="hljs-comment">//å®Œæˆå¦‚æœcontent æœ‰ hspedu æ›¿æ¢æˆ éŸ©é¡ºå¹³æ•™è‚²</span><br>        regStr = <span class="hljs-string">&quot;hspedu&quot;</span>;<br>        pattern = Pattern.compile(regStr);<br>        matcher = pattern.matcher(content);<br>        <span class="hljs-comment">//æ³¨æ„ï¼šè¿”å›çš„å­—ç¬¦ä¸²æ‰æ˜¯æ›¿æ¢åçš„å­—ç¬¦ä¸² åŸæ¥çš„ content ä¸å˜åŒ–</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">newContent</span> <span class="hljs-operator">=</span> matcher.replaceAll(<span class="hljs-string">&quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;newContent=&quot;</span> + newContent);<br>        System.out.println(<span class="hljs-string">&quot;content=&quot;</span> + content);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>PatternSyntaxException</strong></p><p>PatternSyntaxException æ˜¯ä¸€ä¸ªéå¼ºåˆ¶å¼‚å¸¸ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„è¯­æ³•é”™è¯¯ã€‚</p></li></ul><h3 id="åˆ†ç»„ã€æ•è·ã€åå‘å¼•ç”¨"><a href="#åˆ†ç»„ã€æ•è·ã€åå‘å¼•ç”¨" class="headerlink" title="åˆ†ç»„ã€æ•è·ã€åå‘å¼•ç”¨"></a>åˆ†ç»„ã€æ•è·ã€åå‘å¼•ç”¨</h3><ul><li><p><strong>åˆ†ç»„</strong></p><p>ç”¨åœ†æ‹¬å·ç»„æˆä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„åŒ¹é…æ¨¡å¼ï¼Œé‚£ä¹ˆä¸€ä¸ªåœ†æ‹¬å·çš„éƒ¨åˆ†å°±å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå­è¡¨è¾¾å¼&#x2F;ä¸€ä¸ªåˆ†ç»„</p></li><li><p><strong>æ•è·</strong></p><p>æŠŠæ­£åˆ™è¡¨è¾¾å¼ä¸­å­è¡¨è¾¾å¼&#x2F;åˆ†ç»„åŒ¹é…çš„å†…å®¹ï¼Œä¿å­˜åˆ°å†…å­˜ä¸­ä»¥æ•°å­—ç¼–å·æˆ–æ˜¾å¼å‘½åçš„ç»„é‡Œï¼Œæ–¹ä¾¿åé¢å¼•ç”¨ï¼Œä»å·¦å‘å³ï¼Œä»¥åˆ†ç»„çš„å·¦æ‹¬å·ä¸ºæ ‡å¿—ï¼Œç¬¬ä¸€ä¸ªå‡ºç°çš„åˆ†ç»„çš„ç»„å·ä¸º1ï¼Œç¬¬äºŒä¸ªä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚ç»„0ä»£è¡¨æ•´ä¸ªè¡¨è¾¾å¼</p></li><li><p><strong>åå‘å¼•ç”¨</strong></p><p>åœ†æ‹¬å·çš„å†…å®¹è¢«æ•è·åï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ‹¬å·åè¢«ä½¿ç”¨ï¼Œä»è€Œå†™å‡ºä¸€ä¸ªæ¯”è¾ƒå®ç”¨çš„åŒ¹é…æ¨¡å¼ï¼Œç§°ä¸ºåå‘å¼•ç”¨ã€‚</p><p>åå‘å¼•ç”¨ å¯åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨ï¼Œä¹Ÿå¯åœ¨æ­£åˆ™è¡¨è¾¾å¼å¤–éƒ¨ï¼Œå†…éƒ¨åå‘å¼•ç”¨ <strong>\\</strong>åˆ†ç»„å·ï¼Œå¤–éƒ¨åå‘å¼•ç”¨ **$**åˆ†ç»„å·</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åå‘å¼•ç”¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp12</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;h1234el9876lo33333 j12324-333999111a1551ck14 tom11 jack22 yyy12345 xxx&quot;</span>;<br><br>        <span class="hljs-comment">//è¦åŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒæ•°å­— :  (\\d)\\1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d)\\1&quot;</span>;<br><br>        <span class="hljs-comment">//è¦åŒ¹é…äº”ä¸ªè¿ç»­çš„ç›¸åŒæ•°å­—ï¼š (\\d)\\1&#123;4&#125;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d)\\1&#123;4&#125;&quot;</span>;<br><br>        <span class="hljs-comment">//è¦åŒ¹é…ä¸ªä½ä¸åƒä½ç›¸åŒï¼Œåä½ä¸ç™¾ä½ç›¸åŒçš„æ•° 5225 , 1551  (\\d)(\\d)\\2\\1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d)(\\d)\\2\\1&quot;</span>;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * è¯·åœ¨å­—ç¬¦ä¸²ä¸­æ£€ç´¢å•†å“ç¼–å·,å½¢å¼å¦‚:12321-333999111 è¿™æ ·çš„å·ç ,</span><br><span class="hljs-comment">         * è¦æ±‚æ»¡è¶³å‰é¢æ˜¯ä¸€ä¸ªäº”ä½æ•°,ç„¶åä¸€ä¸ª-å·,ç„¶åæ˜¯ä¸€ä¸ªä¹ä½æ•°,è¿ç»­çš„æ¯ä¸‰ä½è¦ç›¸åŒ</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d&#123;5&#125;-(\\d)\\1&#123;2&#125;(\\d)\\2&#123;2&#125;(\\d)\\3&#123;2&#125;&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr4);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ° &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“å·´å»é‡æ¡ˆä¾‹"><a href="#ç»“å·´å»é‡æ¡ˆä¾‹" class="headerlink" title="ç»“å·´å»é‡æ¡ˆä¾‹"></a>ç»“å·´å»é‡æ¡ˆä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp13</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æˆ‘....æˆ‘è¦....å­¦å­¦å­¦å­¦....ç¼–ç¨‹java!&quot;</span>;<br><br>        <span class="hljs-comment">//1. å»æ‰æ‰€æœ‰çš„.</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;\\.&quot;</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        content = matcher.replaceAll(<span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-comment">//2. å»æ‰é‡å¤çš„å­—  æˆ‘æˆ‘è¦å­¦å­¦å­¦å­¦ç¼–ç¨‹java!</span><br>        <span class="hljs-comment">// æ€è·¯</span><br>        <span class="hljs-comment">//(1) ä½¿ç”¨ (.)\\1+ åŒ¹é…è¿ç»­é‡å¤çš„å­—</span><br>        <span class="hljs-comment">//(2) ä½¿ç”¨ åå‘å¼•ç”¨$1 æ¥æ›¿æ¢åŒ¹é…åˆ°çš„å†…å®¹</span><br>        <span class="hljs-comment">// æ³¨æ„ï¼šå› ä¸ºæ­£åˆ™è¡¨è¾¾å¼å˜åŒ–ï¼Œæ‰€ä»¥éœ€è¦é‡ç½® matcher</span><br>        pattern = Pattern.compile(<span class="hljs-string">&quot;(.)\\1+&quot;</span>);<span class="hljs-comment">//åˆ†ç»„çš„æ•è·å†…å®¹è®°å½•åˆ°$1</span><br>        matcher = pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰¾åˆ°=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>        <span class="hljs-comment">//ä½¿ç”¨ åå‘å¼•ç”¨$1 æ¥æ›¿æ¢åŒ¹é…åˆ°çš„å†…å®¹</span><br>        content = matcher.replaceAll(<span class="hljs-string">&quot;$1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;content=&quot;</span> + content);<br><br>        <span class="hljs-comment">//3. å¯ä»¥ä½¿ç”¨ä¸€æ¡è¯­å¥ å»æ‰é‡å¤çš„å­— æˆ‘æˆ‘è¦å­¦å­¦å­¦å­¦ç¼–ç¨‹java!</span><br>        content = Pattern.compile(<span class="hljs-string">&quot;(.)\\1+&quot;</span>).matcher(content).replaceAll(<span class="hljs-string">&quot;$1&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;content=&quot;</span> + content);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="String-ç±»ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#String-ç±»ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="String ç±»ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>String ç±»ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="æ›¿æ¢åŠŸèƒ½"><a href="#æ›¿æ¢åŠŸèƒ½" class="headerlink" title="æ›¿æ¢åŠŸèƒ½"></a>æ›¿æ¢åŠŸèƒ½</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String ç±» </span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">replaceAll</span><span class="hljs-params">(String regex,String replacement)</span><br></code></pre></td></tr></table></figure><h4 id="åˆ¤æ–­åŠŸèƒ½"><a href="#åˆ¤æ–­åŠŸèƒ½" class="headerlink" title="åˆ¤æ–­åŠŸèƒ½"></a>åˆ¤æ–­åŠŸèƒ½</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String ç±» </span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String regex)</span>  <span class="hljs-comment">//æœ€ç»ˆä½¿ç”¨çš„æ˜¯Matcherçš„matches()æ–¹æ³•ï¼ˆæ•´ä½“åŒ¹é…ï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="åˆ†å‰²åŠŸèƒ½"><a href="#åˆ†å‰²åŠŸèƒ½" class="headerlink" title="åˆ†å‰²åŠŸèƒ½"></a>åˆ†å‰²åŠŸèƒ½</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String ç±» </span><br><span class="hljs-keyword">public</span> String[] split(String regex)<br></code></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹æ¼”ç¤º"><a href="#æ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="æ¡ˆä¾‹æ¼”ç¤º"></a>æ¡ˆä¾‹æ¼”ç¤º</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringReg</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2000å¹´5æœˆï¼ŒJDK1.3ã€JDK1.4å’ŒJ2SE1.3ç›¸ç»§å‘å¸ƒï¼Œå‡ å‘¨åå…¶&quot;</span> +<br>                <span class="hljs-string">&quot;è·å¾—äº†Appleå…¬å¸Mac OS Xçš„å·¥ä¸šæ ‡å‡†çš„æ”¯æŒã€‚2001å¹´9æœˆ24æ—¥ï¼ŒJ2EE1.3å‘&quot;</span> +<br>                <span class="hljs-string">&quot;å¸ƒã€‚&quot;</span> +<br>                <span class="hljs-string">&quot;2002å¹´2æœˆ26æ—¥ï¼ŒJ2SE1.4å‘å¸ƒã€‚è‡ªæ­¤Javaçš„è®¡ç®—èƒ½åŠ›æœ‰äº†å¤§å¹…æå‡&quot;</span>;<br><br>        <span class="hljs-comment">//ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ–¹å¼ï¼Œå°† JDK1.3 å’Œ JDK1.4 æ›¿æ¢æˆJDK</span><br>        content = content.replaceAll(<span class="hljs-string">&quot;JDK1\\.3|JDK1\\.4&quot;</span>, <span class="hljs-string">&quot;JDK&quot;</span>);<br>        System.out.println(content);<br><br>        <span class="hljs-comment">//è¦æ±‚ éªŒè¯ä¸€ä¸ª æ‰‹æœºå·ï¼Œ è¦æ±‚å¿…é¡»æ˜¯ä»¥138 139 å¼€å¤´çš„</span><br>        content = <span class="hljs-string">&quot;13888889999&quot;</span>;<br>        <span class="hljs-keyword">if</span> (content.matches(<span class="hljs-string">&quot;1(38|39)\\d&#123;8&#125;&quot;</span>)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;éªŒè¯æˆåŠŸ&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;éªŒè¯å¤±è´¥&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//è¦æ±‚æŒ‰ç…§ # æˆ–è€… - æˆ–è€… ~ æˆ–è€… æ•°å­— æ¥åˆ†å‰²</span><br>        System.out.println(<span class="hljs-string">&quot;===================&quot;</span>);<br>        content = <span class="hljs-string">&quot;hello#abc-jack12smith~åŒ—äº¬&quot;</span>;<br>        String[] split = content.split(<span class="hljs-string">&quot;#|-|~|\\d+&quot;</span>);<br>        <span class="hljs-keyword">for</span> (String s : split) &#123;<br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç« èŠ‚ä¹ é¢˜"><a href="#ç« èŠ‚ä¹ é¢˜" class="headerlink" title="ç« èŠ‚ä¹ é¢˜"></a>ç« èŠ‚ä¹ é¢˜</h3> <img src="image-20221015155516327.png" alt="image-20221015155516327" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è§„å®šç”µå­é‚®ä»¶è§„åˆ™ä¸º</span><br><span class="hljs-comment">//åªèƒ½æœ‰ä¸€ä¸ª@</span><br><span class="hljs-comment">//@å‰é¢æ˜¯ç”¨æˆ·å,å¯ä»¥æ˜¯a-z A-Z 0-9 _-å­—ç¬¦</span><br><span class="hljs-comment">//@åé¢æ˜¯åŸŸå,å¹¶ä¸”åŸŸååªèƒ½æ˜¯è‹±æ–‡å­—æ¯ï¼Œ æ¯”å¦‚ sohu.com æˆ–è€… tsinghua.org.cn</span><br><span class="hljs-comment">//        å†™å‡ºå¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼, éªŒè¯è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæ»¡è¶³è§„åˆ™</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hsp@tsinghua.org.cn kkk&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[\\w-]+@([a-zA-Z]+\\.)+[a-zA-Z]+$&quot;</span>;<br><br>        <span class="hljs-keyword">if</span> (content.matches(regStr)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;åŒ¹é…æˆåŠŸ&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;åŒ¹é…å¤±è´¥&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//è¯´æ˜</span><br>        <span class="hljs-comment">//1. String çš„ matches æ˜¯æ•´ä½“åŒ¹é…</span><br>        <span class="hljs-comment">//2. çœ‹çœ‹è¿™ä¸ªmatches åº•å±‚</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * String çš„ matches</span><br><span class="hljs-comment">         *  public boolean matches(String regex) &#123;</span><br><span class="hljs-comment">         *         return Pattern.matches(regex, this);</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  Pattern</span><br><span class="hljs-comment">         *  public static boolean matches(String regex, CharSequence input) &#123;</span><br><span class="hljs-comment">         *         Pattern p = Pattern.compile(regex);</span><br><span class="hljs-comment">         *         Matcher m = p.matcher(input);</span><br><span class="hljs-comment">         *         return m.matches();</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  Matherç±» match</span><br><span class="hljs-comment">         *  Attempts to match the entire region against the pattern</span><br><span class="hljs-comment">         *  public boolean matches() &#123;</span><br><span class="hljs-comment">         *         return match(from, ENDANCHOR);</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> <img src="image-20221015155540189.png" alt="image-20221015155540189" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¦æ±‚éªŒè¯æ˜¯ä¸æ˜¯æ•´æ•°æˆ–è€…å°æ•°</span><br><span class="hljs-comment">//æç¤ºï¼š è¿™ä¸ªé¢˜è¦è€ƒè™‘æ­£æ•°å’Œè´Ÿæ•°</span><br><span class="hljs-comment">//æ¯”å¦‚ï¼š 123 -345 34.89 -87.9 -0.01 0.45 ç­‰</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ€è·¯:</span><br><span class="hljs-comment"> * 1. å…ˆå†™å‡ºç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="hljs-comment"> * 2. å†é€æ­¥çš„å®Œå–„[æ ¹æ®å„ç§æƒ…å†µæ¥å®Œå–„]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;-0.89&quot;</span>; <span class="hljs-comment">//</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[-+]?([1-9]\\d*|0)(\\.\\d+)?$&quot;</span>;<br><br>        <span class="hljs-keyword">if</span>(content.matches(regStr)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;åŒ¹é…æˆåŠŸ æ˜¯æ•´æ•°æˆ–è€…å°æ•°&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;åŒ¹é…å¤±è´¥&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> <img src="image-20221015160631226.png" alt="image-20221015160631226" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://www.sohu.com:8080/abc/xxx/yyy/////inde@#$%x.htm&quot;</span>;<br><br>        <span class="hljs-comment">//å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ ¹æ®è¦æ±‚æ¥ç¼–å†™çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœéœ€æ±‚éœ€è¦çš„è¯ï¼Œå¯ä»¥æ”¹è¿›.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^([a-zA-Z]+)://([a-zA-Z.]+):(\\d+)[\\w-/]*/([\\w.@#$%]+)$&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-keyword">if</span>(matcher.matches()) &#123;<span class="hljs-comment">//æ•´ä½“åŒ¹é…, å¦‚æœåŒ¹é…æˆåŠŸï¼Œå¯ä»¥é€šè¿‡group(x), è·å–å¯¹åº”åˆ†ç»„çš„å†…å®¹</span><br>            System.out.println(<span class="hljs-string">&quot;æ•´ä½“åŒ¹é…=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(<span class="hljs-string">&quot;åè®®: &quot;</span> + matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(<span class="hljs-string">&quot;åŸŸå: &quot;</span> + matcher.group(<span class="hljs-number">2</span>));<br>            System.out.println(<span class="hljs-string">&quot;ç«¯å£: &quot;</span> + matcher.group(<span class="hljs-number">3</span>));<br>            System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶: &quot;</span> + matcher.group(<span class="hljs-number">4</span>));<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ²¡æœ‰åŒ¹é…æˆåŠŸ&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Algorithm</title>
    <link href="/2021/11/25/AlgorithmNote/"/>
    <url>/2021/11/25/AlgorithmNote/</url>
    
    <content type="html"><![CDATA[<h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><h4 id="é€’å½’å®ç°"><a href="#é€’å½’å®ç°" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> length = <span class="hljs-number">100</span>;<br><span class="hljs-type">int</span> data[length];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Merge</span><span class="hljs-params">(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> last)</span></span>&#123;<br>    <span class="hljs-type">int</span> *temp = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[length];<span class="hljs-comment">//æ•°ç»„tempä½œä¸ºåˆå¹¶çš„è¾…åŠ©ç©ºé—´ï¼ˆç”¨newå¼€è¾Ÿåˆ°å †ä¸­é˜²æ­¢æ ˆæº¢å‡ºï¼‰</span><br>    <span class="hljs-type">int</span> i = first, j = mid+<span class="hljs-number">1</span>, k = first;<br>    <span class="hljs-keyword">while</span>(i &lt;= mid+<span class="hljs-number">1</span> &amp;&amp; j &lt;= last)&#123;<br>        <span class="hljs-keyword">if</span>(data[i] &lt;= data[j])&#123;<br>            temp[k++] = data[i++];<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            temp[k++] = data[j++];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span>(i &lt;= mid)&#123;<br>        temp[k++] = data[i++];<br>    &#125;<br>    <span class="hljs-keyword">while</span>(j &lt;= last)&#123;<br>        temp[k++] = data[j++];<br>    &#125;<br>    <span class="hljs-keyword">for</span>(i = first; i &lt;= last; i++)&#123;<br>        data[i] = temp[i];<br>    &#125;<br>    <span class="hljs-keyword">delete</span>[] temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergeSort</span><span class="hljs-params">(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span> last)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(first == last) <span class="hljs-keyword">return</span>;    <span class="hljs-comment">//åªæœ‰1ä¸ªè®°å½•æ—¶ï¼Œé€’å½’ç»“æŸ</span><br>    <span class="hljs-type">int</span> mid = (first + last) / <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">MergeSort</span>(first, mid);<span class="hljs-comment">//å½’å¹¶æ’åºå‰åŠä¸ªå­åºåˆ—</span><br>    <span class="hljs-built_in">MergeSort</span>(mid+<span class="hljs-number">1</span>, last);<span class="hljs-comment">//å½’å¹¶æ’åºååŠä¸ªå­åºåˆ—</span><br>    <span class="hljs-built_in">Merge</span>(first, mid, last);<span class="hljs-comment">//å°†ä¸¤ä¸ªå·²æ’åºçš„å­åºåˆ—åˆå¹¶</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="éé€’å½’å®ç°"><a href="#éé€’å½’å®ç°" class="headerlink" title="éé€’å½’å®ç°"></a>éé€’å½’å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> length = <span class="hljs-number">100</span>;<br><span class="hljs-type">int</span> data[length];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Merge</span><span class="hljs-params">(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> last)</span></span>&#123;<br>    <span class="hljs-type">int</span> *temp = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[length];<span class="hljs-comment">//æ•°ç»„tempä½œä¸ºåˆå¹¶çš„è¾…åŠ©ç©ºé—´ï¼ˆç”¨newå¼€è¾Ÿåˆ°å †ä¸­é˜²æ­¢æ ˆæº¢å‡ºï¼‰</span><br>    <span class="hljs-type">int</span> i = first, j = mid+<span class="hljs-number">1</span>, k = first;<br>    <span class="hljs-keyword">while</span>(i &lt;= mid+<span class="hljs-number">1</span> &amp;&amp; j &lt;= last)&#123;<br>        <span class="hljs-keyword">if</span>(data[i] &lt;= data[j])&#123;<br>            temp[k++] = data[i++];<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            temp[k++] = data[j++];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span>(i &lt;= mid)&#123;<br>        temp[k++] = data[i++];<br>    &#125;<br>    <span class="hljs-keyword">while</span>(j &lt;= last)&#123;<br>        temp[k++] = data[j++];<br>    &#125;<br>    <span class="hljs-keyword">for</span>(i = first; i &lt;= last; i++)&#123;<br>        data[i] = temp[i];<br>    &#125;<br>    <span class="hljs-keyword">delete</span>[] temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergePass</span><span class="hljs-params">(<span class="hljs-type">int</span> h)</span></span>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i+<span class="hljs-number">2</span>*h &lt;= length)&#123;<br>        <span class="hljs-built_in">Merge</span>(i, i+h<span class="hljs-number">-1</span>, i+<span class="hljs-number">2</span>*h<span class="hljs-number">-1</span>);<br>        i = i+<span class="hljs-number">2</span>*h;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(i+h &lt; length)&#123;<br>        <span class="hljs-built_in">Merge</span>(i, i+h<span class="hljs-number">-1</span>, length<span class="hljs-number">-1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergeSort</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> h = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(h &lt; length)&#123;<br>        <span class="hljs-built_in">MergePass</span>(h);<br>        h = <span class="hljs-number">2</span>*h;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ListNode* <span class="hljs-title">reverseList</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;<br>    ListNode *p1 = head, *p2 = <span class="hljs-literal">NULL</span>;<br>    ListNode *tmp;<br>    <span class="hljs-keyword">while</span>(p1!=<span class="hljs-literal">NULL</span>)&#123;<br>        tmp = p1-&gt;next;<br>        p1-&gt;next = p2;<br>        p2 = p1;<br>        p1 = tmp;<br>    &#125;<br>    <span class="hljs-keyword">return</span> p2;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é«˜ç²¾åº¦"><a href="#é«˜ç²¾åº¦" class="headerlink" title="é«˜ç²¾åº¦"></a>é«˜ç²¾åº¦</h2><h3 id="åŠ æ³•"><a href="#åŠ æ³•" class="headerlink" title="åŠ æ³•"></a>åŠ æ³•</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br>string <span class="hljs-keyword">operator</span>+(string h1, string h2)<br>&#123;<br>    string temp;<br>    <span class="hljs-built_in">reverse</span>(h1.<span class="hljs-built_in">begin</span>(), h1.<span class="hljs-built_in">end</span>());           <span class="hljs-comment">//å­—ç¬¦ä¸²åè½¬</span><br>    <span class="hljs-built_in">reverse</span>(h2.<span class="hljs-built_in">begin</span>(), h2.<span class="hljs-built_in">end</span>());           <span class="hljs-comment">//å­—ç¬¦ä¸²åè½¬</span><br>    <span class="hljs-type">int</span> len = <span class="hljs-built_in">max</span>(h1.<span class="hljs-built_in">length</span>(), h2.<span class="hljs-built_in">length</span>()); <span class="hljs-comment">//å–æœ€é•¿çš„ä¸ºé•¿åº¦</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> x3 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (i &lt; temp.<span class="hljs-built_in">length</span>())<br>            x3 = <span class="hljs-built_in">int</span>(temp[i] - <span class="hljs-string">&#x27;0&#x27;</span>); <span class="hljs-comment">//å–å‡ºå½“å‰ä½æ•°å­—</span><br>        <span class="hljs-type">int</span> x1 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (i &lt; h1.<span class="hljs-built_in">length</span>())<br>            x1 = <span class="hljs-built_in">int</span>(h1[i] - <span class="hljs-string">&#x27;0&#x27;</span>); <span class="hljs-comment">//å–å‡ºç¬¬ä¸€ä¸ªåŠ æ•°çš„å½“å‰ä½æ•°å­—</span><br>        <span class="hljs-type">int</span> x2 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (i &lt; h2.<span class="hljs-built_in">length</span>())<br>            x2 = <span class="hljs-built_in">int</span>(h2[i] - <span class="hljs-string">&#x27;0&#x27;</span>); <span class="hljs-comment">//å–å‡ºç¬¬äºŒä¸ªåŠ æ•°çš„å½“å‰ä½æ•°å­—</span><br>        x3 = x3 + x1 + x2;<br>        string x = <span class="hljs-built_in">to_string</span>(x3);<br>        <span class="hljs-built_in">reverse</span>(x.<span class="hljs-built_in">begin</span>(), x.<span class="hljs-built_in">end</span>()); <span class="hljs-comment">// xåº”è¯¥å…ˆåè½¬å†åŠ ä¸Šå»</span><br>        temp.<span class="hljs-built_in">erase</span>(i, <span class="hljs-number">1</span>);            <span class="hljs-comment">//å…ˆåˆ é™¤å½“å‰ä½çš„æ•°å­—</span><br>        temp.<span class="hljs-built_in">insert</span>(i, x);           <span class="hljs-comment">//æŠŠå½“å‰ä½çš„è®¡ç®—ç»“æœçš„æ‹¼æ¥å›å»</span><br>    &#125;<br>    <span class="hljs-built_in">reverse</span>(temp.<span class="hljs-built_in">begin</span>(), temp.<span class="hljs-built_in">end</span>()); <span class="hljs-comment">//è¿”å›å‰å…ˆåè½¬å›æ¥</span><br>    <span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string h = <span class="hljs-string">&quot;0&quot;</span>;<br>    string h1;<br>    string h2;<br>    cin &gt;&gt; h1 &gt;&gt; h2;<br>    h = h1 + h2;<br>    cout &lt;&lt; h &lt;&lt; endl;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h2><h3 id="å…¨æ’åˆ—"><a href="#å…¨æ’åˆ—" class="headerlink" title="å…¨æ’åˆ—"></a>å…¨æ’åˆ—</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n;<br><span class="hljs-type">int</span> num[<span class="hljs-number">10010</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a, <span class="hljs-type">int</span> &amp;b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> temp;<br>    temp = a;<br>    a = b;<br>    b = temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">perm</span><span class="hljs-params">(<span class="hljs-type">int</span> now, <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (now &gt;= len)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        &#123;<br>            cout &lt;&lt; num[i];<br>        &#125;<br>        cout &lt;&lt; endl;<br>        n++;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = now; i &lt; len; i++)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(num[now], num[i]);<br>        <span class="hljs-built_in">perm</span>(now + <span class="hljs-number">1</span>, len);<br>        <span class="hljs-built_in">swap</span>(num[now], num[i]);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++)<br>    &#123;<br>        num[i] = i + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-built_in">perm</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;å…¨æ’åˆ—çš„ä¸ªæ•°ä¸ºï¼š&quot;</span> &lt;&lt; n &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¹æ®–ï¼ˆé€’å½’æ€è·¯å¯å‘ï¼‰"><a href="#ç¹æ®–ï¼ˆé€’å½’æ€è·¯å¯å‘ï¼‰" class="headerlink" title="ç¹æ®–ï¼ˆé€’å½’æ€è·¯å¯å‘ï¼‰"></a>ç¹æ®–ï¼ˆé€’å½’æ€è·¯å¯å‘ï¼‰</h3><p>æŸç§å•ç»†èƒç”Ÿç‰©é‡‡ç”¨åˆ†è£‚ç¹æ®–ï¼Œæ¯æ¬¡å¯ä»¥åˆ†è£‚æˆä¸¤ä¸ªç›¸åŒå¤§å°çš„å­ä½“ï¼Œå­ä½“å¯ä»¥ç»§ç»­å¦‚æ­¤åˆ†è£‚ï¼Œå½“èƒ½é‡ä¸º1æ—¶åœæ­¢ã€‚<br>è¯¥ç”Ÿç‰©ä¸€å¼€å§‹æœ‰èƒ½é‡nï¼Œå¯ä»¥åˆ†è£‚æˆå°äºç­‰äºnçš„ä¸€åŠèƒ½é‡ï¼ˆæ•´æ•°ï¼‰çš„ä¸ªä½“ï¼Œå¦‚æœèƒ½é‡å¤§äº1ï¼Œå¯ä»¥ç»§ç»­åˆ†è£‚ç¹æ®–ã€‚ä¹Ÿå¯èƒ½ç›´æ¥åˆ†è£‚æˆä¸¤ä¸ªèƒ½é‡ä¸º1çš„ä¸ªä½“ï¼Œç«‹åˆ»åœæ­¢ç¹æ®–ã€‚<br>ä¾‹å¦‚èµ·å§‹èƒ½é‡ä¸º10çš„ç”Ÿç‰©ï¼Œå¯ä»¥æœ‰è¿™æ ·çš„ç¹æ®–è·¯å¾„<br>10   1<br>10  2  1<br>10  3   1<br>10  4   1<br>10  5   1<br>10  4  2  1<br>10  5  2   1<br>è¾“å…¥ä¸€ä¸ªè¡¨ç¤ºç”Ÿç‰©èµ·å§‹èƒ½é‡çš„æ•´æ•°nï¼ˆå°äº100ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; num;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> nowEnergy)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//å½“èƒ½é‡å¤§å°ä¸º1æ—¶ï¼Œä¸èƒ½ç»§ç»­åˆ†è£‚ï¼Œç»“æŸ</span><br>    <span class="hljs-keyword">if</span> (nowEnergy == <span class="hljs-number">1</span>)<br>    &#123;<br>        ans.<span class="hljs-built_in">push_back</span>(num);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">//å½“èƒ½é‡å¤§å°ä¸ºnowEnergyæ—¶ï¼Œä¸‹ä¸€æ¬¡åˆ†è£‚æœ‰nowEnergyç§é€‰æ‹©</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= nowEnergy / <span class="hljs-number">2</span>; i++) <br>    &#123;<br>        num.<span class="hljs-built_in">push_back</span>(i);<br>        <span class="hljs-built_in">dfs</span>(i);<br>        num.<span class="hljs-built_in">pop_back</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    num.<span class="hljs-built_in">push_back</span>(n);<br>    <span class="hljs-built_in">dfs</span>(n);<br>    <span class="hljs-type">int</span> ansNum = ans.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; ansNum; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> ansLen = ans[i].<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; ansLen; j++)<br>        &#123;<br>            cout &lt;&lt; ans[i][j] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ±‰è¯ºå¡”é—®é¢˜"><a href="#æ±‰è¯ºå¡”é—®é¢˜" class="headerlink" title="æ±‰è¯ºå¡”é—®é¢˜"></a>æ±‰è¯ºå¡”é—®é¢˜</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">moveplate</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">char</span> from, <span class="hljs-type">char</span> to)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;:&quot;</span> &lt;&lt; from &lt;&lt; <span class="hljs-string">&quot;--&gt;&quot;</span> &lt;&lt; to &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">hanoi</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">char</span> from, <span class="hljs-type">char</span> to, <span class="hljs-type">char</span> temp)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-built_in">moveplate</span>(n, from, to); <br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">hanoi</span>(n - <span class="hljs-number">1</span>, from, temp, to); <span class="hljs-comment">//æŠŠä¸Šé¢çš„n-1ä¸ªç›˜å­ä»fromç§»åˆ°temp</span><br>    <span class="hljs-built_in">moveplate</span>(n, from, to);<br>    <span class="hljs-built_in">hanoi</span>(n - <span class="hljs-number">1</span>, temp, to, from); <span class="hljs-comment">//æŠŠä¸Šé¢çš„n-1ä¸ªç›˜å­ä»tempç§»åˆ°to</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-type">char</span> from = <span class="hljs-string">&#x27;A&#x27;</span>, temp = <span class="hljs-string">&#x27;B&#x27;</span>, to = <span class="hljs-string">&#x27;C&#x27;</span>;<br>    <span class="hljs-built_in">hanoi</span>(n, from, to, temp);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h2><h3 id="å…«çš‡å"><a href="#å…«çš‡å" class="headerlink" title="å…«çš‡å"></a>å…«çš‡å</h3><p>[P1219] <a href="https://www.luogu.com.cn/problem/P1219">USACO1.5]å…«çš‡å Checker Challenge - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> line[<span class="hljs-number">100</span>] = &#123;<span class="hljs-number">0</span>&#125;;  <span class="hljs-comment">//è¡Œ</span><br><span class="hljs-type">int</span> col[<span class="hljs-number">100</span>] = &#123;<span class="hljs-number">0</span>&#125;;  <span class="hljs-comment">//åˆ—</span><br><span class="hljs-type">int</span> leftUp[<span class="hljs-number">100</span>] = &#123;<span class="hljs-number">0</span>&#125;;  <span class="hljs-comment">//å·¦ä¸Šåˆ°å³ä¸‹</span><br><span class="hljs-type">int</span> rightUp[<span class="hljs-number">100</span>] = &#123;<span class="hljs-number">0</span>&#125;;  <span class="hljs-comment">//å³ä¸Šåˆ°å·¦ä¸‹</span><br><br><span class="hljs-type">int</span> tot;  <span class="hljs-comment">//è§£çš„æ€»æ•°</span><br><span class="hljs-type">int</span> n;  <span class="hljs-comment">//n*nä¸ªæ ¼å­</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS</span><span class="hljs-params">(<span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(r&gt;n)<br>    &#123;<br>        tot++;<br>        <span class="hljs-keyword">if</span>(tot&lt;=<span class="hljs-number">3</span>)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>                cout&lt;&lt;line[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>            cout&lt;&lt;endl;<br>        &#125;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> c=<span class="hljs-number">1</span>;c&lt;=n;c++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(!col[c] &amp;&amp; !leftUp[r-c+n] &amp;&amp; !rightUp[r+c])<br>        &#123;<br>            line[r] = c;  <span class="hljs-comment">//æŠŠçš‡åæ”¾åœ¨[r,c]ä¸Š</span><br>            col[c] = <span class="hljs-number">1</span>;  <span class="hljs-comment">//å é¢†è¯¥åˆ—</span><br>            leftUp[r-c+n] = <span class="hljs-number">1</span>;  <span class="hljs-comment">//å é¢†è¯¥ä¸»å¯¹è§’çº¿</span><br>            rightUp[r+c] = <span class="hljs-number">1</span>;  <span class="hljs-comment">//å é¢†è¯¥å‰¯å¯¹è§’çº¿</span><br>            <span class="hljs-built_in">DFS</span>(r+<span class="hljs-number">1</span>);  <span class="hljs-comment">//DFS</span><br>            <span class="hljs-comment">//å›æº¯</span><br>            col[c] = <span class="hljs-number">0</span>;<br>            leftUp[r-c+n] = <span class="hljs-number">0</span>;<br>            rightUp[r+c] = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n;<br>    <span class="hljs-built_in">DFS</span>(<span class="hljs-number">1</span>);<br>    cout&lt;&lt;tot;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h2><p><a href="https://www.dotcpp.com/oj/problem2690.html">è“æ¡¥æ¯2022å¹´ç¬¬åä¸‰å±Šçœèµ›çœŸé¢˜-é‡æ–°æ’åº - Cè¯­è¨€ç½‘ (dotcpp.com)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL; <span class="hljs-comment">//ä¸å¼€long longè§ç¥–å®—</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1000000</span> + <span class="hljs-number">10</span>;<br>LL Ai[MAXN];       <span class="hljs-comment">//åŸæ•°ç»„</span><br>LL raSum;          <span class="hljs-comment">//åŸæ•°ç»„çš„æ¯æ¬¡æŸ¥è¯¢çš„å’Œçš„æ€»å’Œ</span><br>LL range[MAXN];    <span class="hljs-comment">//è®°å½•æ¯æ¬¡æŸ¥è¯¢çš„èŒƒå›´</span><br>LL queryNum[MAXN]; <span class="hljs-comment">//æ‰€æœ‰æŸ¥è¯¢èŒƒå›´ä¸­å…ƒç´ è¢«æŸ¥è¯¢çš„æ€»æ¬¡æ•°ï¼ˆå‰ç¼€å’Œï¼‰</span><br>LL reSum;          <span class="hljs-comment">//é‡æ–°æ’åºåæ¯æ¬¡æŸ¥è¯¢çš„å’Œçš„æ€»å’Œ</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    cin &gt;&gt; n; <span class="hljs-comment">//å…ƒç´ ä¸ªæ•°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cin &gt;&gt; Ai[i]; <span class="hljs-comment">//åŸæ•°ç»„çš„è¾“å…¥</span><br>    &#125;<br>    cin &gt;&gt; m; <span class="hljs-comment">//æŸ¥è¯¢æ¬¡æ•°</span><br>    <span class="hljs-type">int</span> L_term, R_term;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        cin &gt;&gt; L_term &gt;&gt; R_term;<br>        range[L_term]++;     <span class="hljs-comment">//å·¦è¾¹ç•Œ</span><br>        range[R_term + <span class="hljs-number">1</span>]--; <span class="hljs-comment">//å³è¾¹ç•Œ</span><br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        queryNum[i] = queryNum[i - <span class="hljs-number">1</span>] + range[i]; <span class="hljs-comment">//è®¡ç®—æ¯ä¸ªå…ƒç´ çš„æŸ¥è¯¢æ¬¡æ•°</span><br><br>        raSum += Ai[i] * queryNum[i]; <span class="hljs-comment">//è®¡ç®—åŸæ•°ç»„çš„æ¯æ¬¡æŸ¥è¯¢çš„å’Œçš„æ€»å’Œ</span><br>    &#125;<br><br>    <span class="hljs-built_in">sort</span>(Ai + <span class="hljs-number">1</span>, Ai + n + <span class="hljs-number">1</span>, <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());             <span class="hljs-comment">//å¯¹åŸæ•°ç»„é™åºæ’åº</span><br>    <span class="hljs-built_in">sort</span>(queryNum + <span class="hljs-number">1</span>, queryNum + n + <span class="hljs-number">1</span>, <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;()); <span class="hljs-comment">//å¯¹æ‰€æœ‰å…ƒç´ çš„æŸ¥è¯¢æ¬¡æ•°è¿›è¡Œé™åºæ’åº</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        reSum += Ai[i] * queryNum[i]; <span class="hljs-comment">//è®¡ç®—é‡æ–°æ’åºåçš„æ¯æ¬¡æŸ¥è¯¢çš„å’Œçš„æ€»å’Œ</span><br>    &#125;<br><br>    cout &lt;&lt; reSum - raSum &lt;&lt; endl; <span class="hljs-comment">//è¾“å‡ºç­”æ¡ˆ</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Treap-åæ¬¡æ ‘"><a href="#Treap-åæ¬¡æ ‘" class="headerlink" title="Treap åæ¬¡æ ‘"></a>Treap åæ¬¡æ ‘</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> id[<span class="hljs-number">5000000</span>+<span class="hljs-number">5</span>];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br>    <span class="hljs-type">int</span> size;          <span class="hljs-comment">//ä»¥è¿™ä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„ç»“ç‚¹æ€»æ•°é‡ï¼Œç”¨äºåæ¬¡æ ‘</span><br>    <span class="hljs-type">int</span> rank;          <span class="hljs-comment">//ä¼˜å…ˆçº§</span><br>    <span class="hljs-type">int</span> key;           <span class="hljs-comment">//é”®å€¼</span><br>    Node *son[<span class="hljs-number">2</span>];     <span class="hljs-comment">//son[0]å·¦å„¿å­, son[1]å³å„¿å­</span><br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node &amp;a)<span class="hljs-type">const</span>&#123;<span class="hljs-keyword">return</span> rank &lt; a.rank;&#125;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><span class="hljs-type">const</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(x==key) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">return</span> x&lt;key?<span class="hljs-number">0</span>:<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>&#123;     <span class="hljs-comment">//æ›´æ–°size</span><br>        size=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(son[<span class="hljs-number">0</span>]!=<span class="hljs-literal">NULL</span>) size+= son[<span class="hljs-number">0</span>]-&gt;size;<br>        <span class="hljs-keyword">if</span>(son[<span class="hljs-number">1</span>]!=<span class="hljs-literal">NULL</span>) size+= son[<span class="hljs-number">1</span>]-&gt;size;<br>        &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">rotate</span><span class="hljs-params">(Node* &amp;o,<span class="hljs-type">int</span> d)</span></span>&#123;    <span class="hljs-comment">//d=0å·¦æ—‹è½¬ï¼Œd=1å³æ—‹</span><br>        Node *k=o-&gt;son[d^<span class="hljs-number">1</span>];      <span class="hljs-comment">//d^1ä¸1-dç­‰ä»·ï¼Œä½†æ˜¯æ›´å¿«</span><br>        o-&gt;son[d^<span class="hljs-number">1</span>]=k-&gt;son[d];<br>        k-&gt;son[d]=o;<br>        o-&gt;<span class="hljs-built_in">update</span>();<br>        k-&gt;<span class="hljs-built_in">update</span>();<br>        o=k;<br>    &#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(Node* &amp;o,<span class="hljs-type">int</span> x)</span></span>&#123;   <span class="hljs-comment">//æŠŠxæ’å…¥åˆ°æ ‘ä¸­</span><br>        <span class="hljs-keyword">if</span>(o==<span class="hljs-literal">NULL</span>)&#123;<br>            o=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>();<br>            o-&gt;son[<span class="hljs-number">0</span>]=o-&gt;son[<span class="hljs-number">1</span>]=<span class="hljs-literal">NULL</span>;<br>            o-&gt;rank=<span class="hljs-built_in">rand</span>();<br>            o-&gt;key=x;<br>            o-&gt;size=<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">int</span> d=o-&gt;<span class="hljs-built_in">cmp</span>(x);<br>            <span class="hljs-built_in">insert</span>(o-&gt;son[d],x);<br>            o-&gt;<span class="hljs-built_in">update</span>();<br>            <span class="hljs-keyword">if</span>(o&lt;o-&gt;son[d])<br>                <span class="hljs-built_in">rotate</span>(o,d^<span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kth</span><span class="hljs-params">(Node* o,<span class="hljs-type">int</span> k)</span></span>&#123;   <span class="hljs-comment">//è¿”å›ç¬¬kå¤§çš„æ•°</span><br>        <span class="hljs-keyword">if</span>(o==<span class="hljs-literal">NULL</span>||k&lt;=<span class="hljs-number">0</span>||k&gt;o-&gt;size)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-type">int</span> s=o-&gt;son[<span class="hljs-number">1</span>]==<span class="hljs-literal">NULL</span>?<span class="hljs-number">0</span>:o-&gt;son[<span class="hljs-number">1</span>]-&gt;size;<br>        <span class="hljs-keyword">if</span>(k==s+<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> o-&gt;key;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k&lt;=s) <span class="hljs-keyword">return</span> <span class="hljs-built_in">kth</span>(o-&gt;son[<span class="hljs-number">1</span>],k);<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">kth</span>(o-&gt;son[<span class="hljs-number">0</span>],k-s<span class="hljs-number">-1</span>);<br>    &#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(Node* o,<span class="hljs-type">int</span> k)</span></span>&#123;  <span class="hljs-comment">//è¿”å›å…ƒç´ kçš„åæ¬¡</span><br>        <span class="hljs-keyword">if</span>(o==<span class="hljs-literal">NULL</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-type">int</span> d=o-&gt;<span class="hljs-built_in">cmp</span>(k);<br>        <span class="hljs-keyword">if</span>(d==<span class="hljs-number">-1</span> )<br>            <span class="hljs-keyword">return</span> o-&gt;son[<span class="hljs-number">1</span>] ==<span class="hljs-literal">NULL</span>? <span class="hljs-number">1</span>: o-&gt;son[<span class="hljs-number">1</span>]-&gt;size+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(d==<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">find</span>(o-&gt;son[d],k);<br>        <span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-type">int</span> tmp=<span class="hljs-built_in">find</span>(o-&gt;son[d],k);<br>            <span class="hljs-keyword">if</span>(tmp==<span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">return</span> o-&gt;son[<span class="hljs-number">1</span>] ==<span class="hljs-literal">NULL</span>? tmp+<span class="hljs-number">1</span> : tmp+<span class="hljs-number">1</span>+o-&gt;son[<span class="hljs-number">1</span>]-&gt;size;<br>        &#125;<br>    &#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">while</span>(~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n)&amp;&amp;n)&#123;<br>        <span class="hljs-built_in">srand</span>(<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>        <span class="hljs-type">int</span> k,g;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;k,&amp;g);<br>        Node *root=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>();<br>        root-&gt;son[<span class="hljs-number">0</span>]=root-&gt;son[<span class="hljs-number">1</span>]=<span class="hljs-literal">NULL</span>;<br>        root-&gt;rank=<span class="hljs-built_in">rand</span>(); root-&gt;key=g; root-&gt;size=<span class="hljs-number">1</span>;<br>        id[g]=k;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d %d\n&quot;</span>,k,<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;k,&amp;g);<br>            id[g]=k;<br>            <span class="hljs-built_in">insert</span>(root,g);<br>            <span class="hljs-type">int</span> t=<span class="hljs-built_in">find</span>(root,g);   <span class="hljs-comment">//è¿”å›æ–°å’Œå°šçš„åæ¬¡</span><br>            <span class="hljs-type">int</span> ans1,ans2,ans;<br>            ans1=<span class="hljs-built_in">kth</span>(root,t<span class="hljs-number">-1</span>);   <span class="hljs-comment">//å‰ä¸€åçš„è€å’Œå°š</span><br>            ans2=<span class="hljs-built_in">kth</span>(root,t+<span class="hljs-number">1</span>);   <span class="hljs-comment">//åä¸€åçš„è€å’Œå°š</span><br>            <span class="hljs-keyword">if</span>(ans1!=<span class="hljs-number">-1</span>&amp;&amp;ans2!=<span class="hljs-number">-1</span>)<br>                ans= ans1-g &gt;= g-ans2 ? ans2:ans1;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ans1==<span class="hljs-number">-1</span>) ans=ans2;<br>            <span class="hljs-keyword">else</span> ans=ans1;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d %d\n&quot;</span>,k,id[ans]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h2><p>çº¿æ®µæ ‘å¯ä»¥åœ¨log_2nçš„æ—¶é—´å¤æ‚åº¦å†…å®ç°å•ç‚¹ä¿®æ”¹ã€åŒºé—´ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢ï¼ˆåŒºé—´æ±‚å’Œï¼Œæ±‚åŒºé—´æœ€å¤§å€¼ï¼Œæ±‚åŒºé—´æœ€å°å€¼ï¼‰ç­‰æ“ä½œ</p><h3 id="ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢"><a href="#ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢" class="headerlink" title="ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢"></a>ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢</h3><p><a href="http://poj.org/problem?id=2182">2182 â€“ Lost Cows (poj.org)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//poj2182</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX = <span class="hljs-number">8000</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> pre[MAX];  <span class="hljs-comment">//ç”¨äºè¾“å…¥åŸå§‹åºåˆ—</span><br><span class="hljs-type">int</span> tree[MAX*<span class="hljs-number">4</span>];  <span class="hljs-comment">//é•¿åº¦ï¼Œå³è¯¥åŒºé—´ä¸­çš„ç‰›çš„ä¸ªæ•°</span><br><span class="hljs-type">int</span> ans[MAX];  <span class="hljs-comment">//ç”¨äºå‚¨å­˜ç­”æ¡ˆ</span><br><br><span class="hljs-comment">//å»ºæ ‘</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build_tree</span><span class="hljs-params">(<span class="hljs-type">int</span> node, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(L==R)<br>    &#123;<br>        tree[node] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (L+R)/<span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> left_node = node*<span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> right_node = node*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build_tree</span>(left_node,L,mid);<br>    <span class="hljs-built_in">build_tree</span>(right_node,mid+<span class="hljs-number">1</span>,R);<br>    <span class="hljs-comment">//å›æº¯ï¼Œå‘ä¸Šæ›´æ–°</span><br>    tree[node] = tree[left_node] + tree[right_node];<br>&#125;<br><br><span class="hljs-comment">//æŸ¥è¯¢  orderä¸ºè¦æŸ¥æ‰¾ç¬¬å‡ å¤§çš„æ•°</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> order, <span class="hljs-type">int</span> node, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R)</span></span><br><span class="hljs-function"></span>&#123;<br>    tree[node]--;<br>    <span class="hljs-keyword">if</span>(L==R)&#123;<br>        <span class="hljs-keyword">return</span> L;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (L+R)/<span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> left_node = node*<span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> right_node = node*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(tree[left_node]&gt;=order)  <span class="hljs-comment">//å¦‚æœå·¦èŠ‚ç‚¹è¶³å¤Ÿï¼Œç»§ç»­é€’å½’å·¦èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(order,left_node,L,mid);<br>    <span class="hljs-keyword">if</span>(tree[left_node]&lt;order)  <span class="hljs-comment">//å¦‚æœå·¦èŠ‚ç‚¹ä¸å¤Ÿï¼Œé€’å½’å³èŠ‚ç‚¹ï¼ˆæ³¨æ„è¦å‡å»å·¦èŠ‚ç‚¹çš„æ•°é‡ï¼‰</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(order-tree[left_node],right_node,mid+<span class="hljs-number">1</span>,R);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-built_in">build_tree</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br>    pre[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;pre[i]);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;=<span class="hljs-number">1</span>;i--)  <span class="hljs-comment">//åå‘éå†</span><br>    &#123;<br>        ans[i] = <span class="hljs-built_in">query</span>(pre[i]+<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,ans[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="åŒºé—´ä¿®æ”¹ä¸åŒºé—´å’Œ"><a href="#åŒºé—´ä¿®æ”¹ä¸åŒºé—´å’Œ" class="headerlink" title="åŒºé—´ä¿®æ”¹ä¸åŒºé—´å’Œ"></a>åŒºé—´ä¿®æ”¹ä¸åŒºé—´å’Œ</h3><p><a href="https://www.luogu.com.cn/problem/P3372">P3372 ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘ 1 - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//LGP3372</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-type">int</span> LL;  <span class="hljs-comment">//ä¸å¼€ long long è§ç¥–å®—</span><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> Max = <span class="hljs-number">100000</span>+<span class="hljs-number">10</span>;<br>LL pre[Max];<br>LL tree[Max*<span class="hljs-number">4</span>];  <span class="hljs-comment">//çº¿æ®µæ ‘ï¼Œç”¨äºå‚¨å­˜åŒºé—´å’Œ</span><br>LL add[Max*<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>&#125;;  <span class="hljs-comment">//çº¿æ®µæ ‘çš„æŸä¸ªåŒºé—´éœ€è¦åŠ ä¸Šçš„æ•°</span><br><br><span class="hljs-comment">//å»ºæ ‘</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build_tree</span><span class="hljs-params">(<span class="hljs-type">int</span> node, LL L, LL R)</span>  <span class="hljs-comment">//L,Rå³ä¸ºæ€»é•¿åº¦çš„ä¸¤ç«¯ç‚¹</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(L==R)  <span class="hljs-comment">//å¦‚æœå·¦ç«¯ç‚¹==å³ç«¯ç‚¹ï¼Œå³åˆ°è¾¾æœ€åº•ç«¯ï¼Œèµ‹å€¼å¹¶è¿”å›</span><br>    &#123;<br>        tree[node] = pre[L];  <span class="hljs-comment">//èµ‹åˆå€¼</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    LL mid = (L + R) / <span class="hljs-number">2</span>;  <span class="hljs-comment">//åˆ’åˆ†ä¸­çº¿</span><br>    LL left_node = <span class="hljs-number">2</span>*node;  <span class="hljs-comment">//å½“å‰èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹</span><br>    LL right_node = <span class="hljs-number">2</span>*node + <span class="hljs-number">1</span>;  <span class="hljs-comment">//å½“å‰èŠ‚ç‚¹çš„å³èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">build_tree</span>(left_node,L,mid);  <span class="hljs-comment">//å‘å·¦é€’å½’å»ºæ ‘</span><br>    <span class="hljs-built_in">build_tree</span>(right_node,mid+<span class="hljs-number">1</span>,R);  <span class="hljs-comment">//å‘å³é€’å½’å»ºæ ‘</span><br>    tree[node] = tree[left_node] + tree[right_node];  <span class="hljs-comment">//å›æº¯ï¼Œå‘ä¸Šæ›´æ–°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(<span class="hljs-type">int</span> node, LL L, LL R)</span>  <span class="hljs-comment">//å‘ä¸‹æ›´æ–°</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(add[node])  <span class="hljs-comment">//å¦‚æœå½“å‰èŠ‚ç‚¹è¿˜æœ‰éœ€è¦åŠ çš„æ•°æ²¡æœ‰ä¸‹æ”¾ï¼Œå°±ä¸‹æ”¾</span><br>    &#123;<br>        LL mid = (L + R) / <span class="hljs-number">2</span>;  <span class="hljs-comment">//åˆ’åˆ†ä¸­çº¿</span><br>        LL left_node = <span class="hljs-number">2</span>*node;  <span class="hljs-comment">//å½“å‰èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹</span><br>        LL right_node = <span class="hljs-number">2</span>*node+<span class="hljs-number">1</span>;  <span class="hljs-comment">//å½“å‰èŠ‚ç‚¹çš„å³èŠ‚ç‚¹</span><br>        add[left_node] += add[node];  <span class="hljs-comment">//å·¦èŠ‚ç‚¹åŠ æ•°æ›´æ–°</span><br>        add[right_node] += add[node];  <span class="hljs-comment">//å³èŠ‚ç‚¹åŠ æ•°æ›´æ–°</span><br>        tree[left_node] += (mid - L + <span class="hljs-number">1</span>)*add[node];  <span class="hljs-comment">//å·¦èŠ‚ç‚¹æ›´æ–°</span><br>        tree[right_node] += (R - (mid+<span class="hljs-number">1</span>) + <span class="hljs-number">1</span>)*add[node];  <span class="hljs-comment">//å³èŠ‚ç‚¹æ›´æ–°</span><br>        add[node] = <span class="hljs-number">0</span>;  <span class="hljs-comment">//å·²ç»å‘ä¸‹ä¼ é€’ï¼Œæ¸…ç©ºæœ¬èŠ‚ç‚¹çš„åŠ æ•°</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update_tree</span><span class="hljs-params">(LL _start, LL _end, LL val ,<span class="hljs-type">int</span> node, LL L, LL R)</span>  <span class="hljs-comment">//æ›´æ–°æ“ä½œ</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(_start&lt;=L &amp;&amp; _end&gt;=R)  <span class="hljs-comment">//å¦‚æœé€’å½’åˆ°ä¸€ä¸ªåŒ…å«äº è¦æ±‚ä¿®æ”¹çš„åŒºé—´ çš„åŒºé—´ï¼Œä¿®æ”¹å¹¶è¿”å›</span><br>    &#123;<br>        tree[node] += (R-L+<span class="hljs-number">1</span>)*val;<br>        add[node] += val;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">push_down</span>(node,L,R);  <span class="hljs-comment">//å‘ä¸‹æ›´æ–°ï¼ŒæŠŠadd[node]ä¸‹æ”¾ï¼Œæ›´æ–°å·¦å³èŠ‚ç‚¹ä»¥åŠå·¦å³èŠ‚ç‚¹çš„add</span><br>    LL mid = (L + R) / <span class="hljs-number">2</span>;<br>    LL left_node = <span class="hljs-number">2</span>*node;<br>    LL right_node = <span class="hljs-number">2</span>*node + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(_start&lt;=mid) <span class="hljs-comment">//å¦‚æœè¿˜èƒ½åˆ†å‡ºå·¦è¾¹ï¼Œé€’å½’å·¦è¾¹</span><br>        <span class="hljs-built_in">update_tree</span>(_start,_end,val,left_node,L,mid);<br>    <span class="hljs-keyword">if</span>(_end&gt;mid) <span class="hljs-comment">//å¦‚æœè¿˜èƒ½åˆ†å‡ºå³è¾¹ï¼Œé€’å½’å³è¾¹</span><br>        <span class="hljs-built_in">update_tree</span>(_start,_end,val,right_node,mid+<span class="hljs-number">1</span>,R);<br>    tree[node] = tree[left_node] + tree[right_node];  <span class="hljs-comment">//å‘ä¸Šæ›´æ–°ï¼Œï¼ˆåŠ ä¸Švalå€¼ï¼‰</span><br>&#125;<br><br><span class="hljs-function">LL <span class="hljs-title">query</span><span class="hljs-params">(LL _start, LL _end, <span class="hljs-type">int</span> node, LL L, LL R)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(_start&lt;=L &amp;&amp; _end&gt;=R)  <span class="hljs-comment">//å¦‚æœé€’å½’åˆ°ä¸€ä¸ªåŒ…å«äº è¦æ±‚æŸ¥è¯¢çš„åŒºé—´ çš„åŒºé—´ï¼Œç›´æ¥è¿”å›</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> tree[node];<br>    &#125;<br><span class="hljs-built_in">push_down</span>(node,L,R);  <span class="hljs-comment">//å‘ä¸‹æ›´æ–°ï¼Œä¸‹æ”¾</span><br>    LL mid = (L + R) / <span class="hljs-number">2</span>;<br>    LL left_node = <span class="hljs-number">2</span>*node;<br>    LL right_node = <span class="hljs-number">2</span>*node + <span class="hljs-number">1</span>;<br>    LL ans = <span class="hljs-number">0</span>;  <span class="hljs-comment">//ç”¨äºåŒºé—´å’Œçš„ç´¯åŠ </span><br>    <span class="hljs-keyword">if</span>(_start&lt;=mid) <span class="hljs-comment">//å¦‚æœè¿˜èƒ½åˆ†å‡ºå·¦è¾¹ï¼Œé€’å½’å·¦è¾¹</span><br>        ans += <span class="hljs-built_in">query</span>(_start,_end,left_node,L,mid);<br>    <span class="hljs-keyword">if</span>(_end&gt;mid) <span class="hljs-comment">//å¦‚æœè¿˜èƒ½åˆ†å‡ºå³è¾¹ï¼Œé€’å½’å³è¾¹</span><br>        ans += <span class="hljs-built_in">query</span>(_start,_end,right_node,mid+<span class="hljs-number">1</span>,R);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    LL n,m;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;pre[i]);<br>    &#125;<br><br>    <span class="hljs-built_in">build_tree</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> q;<br>        <span class="hljs-type">int</span> x,y;<br>        LL k;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;q);<br>        <span class="hljs-keyword">if</span>(q==<span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%lld&quot;</span>,&amp;x,&amp;y,&amp;k);<br>            <span class="hljs-built_in">update_tree</span>(x,y,k,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(q==<span class="hljs-number">2</span>)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);<br>            LL ans = <span class="hljs-built_in">query</span>(x,y,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŒºé—´æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®"><a href="#åŒºé—´æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®" class="headerlink" title="åŒºé—´æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®"></a>åŒºé—´æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®</h3><p>[P2880 <a href="https://www.luogu.com.cn/problem/P2880">USACO07JAN] Balanced Lineup G - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//LGP2880</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-type">int</span> LL;<br><span class="hljs-type">const</span> LL MAX = <span class="hljs-number">5</span>*<span class="hljs-number">10000</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> height[MAX];  <span class="hljs-comment">//ç”¨äºè¾“å…¥åŸåºåˆ—</span><br><span class="hljs-type">int</span> tree_max[MAX*<span class="hljs-number">4</span>];  <span class="hljs-comment">//è®°å½•æœ€å¤§å€¼</span><br><span class="hljs-type">int</span> tree_min[MAX*<span class="hljs-number">4</span>];  <span class="hljs-comment">//è®°å½•æœ€å°å€¼</span><br><br><span class="hljs-comment">//å»ºæ ‘ï¼Œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build_tree</span><span class="hljs-params">(<span class="hljs-type">int</span> node,LL L,LL R)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(L==R)  <span class="hljs-comment">//å¦‚æœå·¦å³ç«¯ç‚¹ç›¸ç­‰ï¼Œå³åˆ°è¾¾åº•éƒ¨ï¼Œèµ‹å€¼å¹¶è¿”å›</span><br>    &#123;<br>        tree_max[node] = height[L];<br>        tree_min[node] = height[L];<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    LL mid = (L+R)/<span class="hljs-number">2</span>;<br>    LL left_node = node*<span class="hljs-number">2</span>;<br>    LL right_node = node*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build_tree</span>(left_node,L,mid);<br>    <span class="hljs-built_in">build_tree</span>(right_node,mid+<span class="hljs-number">1</span>,R);<br>    <span class="hljs-comment">//å›æº¯ï¼Œå‘ä¸Šæ›´æ–°ï¼Œæ›´æ–°åŒºé—´çš„æœ€å¤§å€¼å’Œæœ€å°å€¼</span><br>    tree_max[node] = <span class="hljs-built_in">max</span>(tree_max[left_node],tree_max[right_node]);<br>    tree_min[node] = <span class="hljs-built_in">min</span>(tree_min[left_node],tree_min[right_node]);<br>&#125;<br><br><span class="hljs-comment">//ç”±äºè¦è¿”å›æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œæ•…ç›´æ¥ç”¨å¼•ç”¨çš„æ–¹å¼ä¼ å…¥å‚æ•°Maxå’ŒMin</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">query</span><span class="hljs-params">(LL _start,LL _end,<span class="hljs-type">int</span> node,LL L, LL R,<span class="hljs-type">int</span> &amp;Max,<span class="hljs-type">int</span> &amp;Min)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(_start&lt;=L &amp;&amp; _end&gt;=R)  <span class="hljs-comment">//å¦‚æœé€’å½’åˆ°ä¸€ä¸ªåŒ…å«äº è¯¢é—®åŒºé—´ çš„åŒºé—´ï¼Œè¿”å›æœ€å¤§å€¼å’Œæœ€å°å€¼</span><br>    &#123;<br>        Max = <span class="hljs-built_in">max</span>(Max,tree_max[node]);<br>        Min = <span class="hljs-built_in">min</span>(Min,tree_min[node]);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    LL mid = (L+R)/<span class="hljs-number">2</span>;<br>    LL left_node = node*<span class="hljs-number">2</span>;<br>    LL right_node = node*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(_start&lt;=mid) <span class="hljs-built_in">query</span>(_start,_end,left_node,L,mid,Max,Min);<br>    <span class="hljs-keyword">if</span>(_end&gt;mid) <span class="hljs-built_in">query</span>(_start,_end,right_node,mid+<span class="hljs-number">1</span>,R,Max,Min);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n,q;<br>    cin&gt;&gt;n&gt;&gt;q;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;height[i]);<br>    &#125;<br>    <span class="hljs-built_in">build_tree</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br>    <span class="hljs-type">int</span> a,b;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=q;i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);<br>        <span class="hljs-type">int</span> Max = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> Min = INT_MAX;<br>        <span class="hljs-built_in">query</span>(a,b,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,Max,Min);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,Max-Min);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h2><h3 id="ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢-1"><a href="#ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢-1" class="headerlink" title="ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢"></a>ç‚¹ä¿®æ”¹ä¸ç‚¹æŸ¥è¯¢</h3><p><a href="http://poj.org/problem?id=2182">2182 â€“ Lost Cows (poj.org)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lowbit(x) ((x)&amp;-(x))</span><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX = <span class="hljs-number">10000</span>;<br><span class="hljs-type">int</span> tree[MAX];<br><span class="hljs-type">int</span> pre[MAX];<br><span class="hljs-type">int</span> ans[MAX];<br><span class="hljs-type">int</span> n;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> d)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span>(x&lt;=n)<br>    &#123;<br>        tree[x] += d;<br>        x += <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(x&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        sum += tree[x];<br>        x -= <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findpos</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span>(L&lt;R)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = (L+R)/<span class="hljs-number">2</span>;  <span class="hljs-comment">//å¾—åˆ°çš„æ˜¯è¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘çš„ä¸‹æ ‡</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sum</span>(mid)&lt;x)<br>            L = mid+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            R = mid;<br>    &#125;<br>    <span class="hljs-keyword">return</span> L;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n;<br>    pre[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;pre[i]);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>        tree[i] = <span class="hljs-built_in">lowbit</span>(i);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;<span class="hljs-number">0</span>;i--)<br>    &#123;<br>        <span class="hljs-type">int</span> x = <span class="hljs-built_in">findpos</span>(pre[i]+<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br>        <span class="hljs-built_in">add</span>(x,<span class="hljs-number">-1</span>);<br>        ans[i] = x;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,ans[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŒºé—´æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®"><a href="#åŒºé—´æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®" class="headerlink" title="åŒºé—´æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®"></a>åŒºé—´æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®</h3><p>[P2880 <a href="https://www.luogu.com.cn/problem/P2880">USACO07JAN] Balanced Lineup G - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//LGP2880</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,q;<br><span class="hljs-type">int</span> height[<span class="hljs-number">5</span>*<span class="hljs-number">10000</span>+<span class="hljs-number">5</span>];  <span class="hljs-comment">//å­˜åŸå§‹æ•°ç»„</span><br><span class="hljs-type">int</span> tree_max[<span class="hljs-number">5</span>*<span class="hljs-number">10000</span>+<span class="hljs-number">5</span>];  <span class="hljs-comment">//å­˜æœ€å¤§å€¼</span><br><span class="hljs-type">int</span> tree_min[<span class="hljs-number">5</span>*<span class="hljs-number">10000</span>+<span class="hljs-number">5</span>];  <span class="hljs-comment">//å­˜æœ€å°å€¼</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lowbit(x) ((x)&amp;-(x))  <span class="hljs-comment">//æ ‘çŠ¶æ•°ç»„æ ¸å¿ƒæ“ä½œlowbit</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> d)</span>  <span class="hljs-comment">//æ›´æ–°ï¼ˆå‘ä¸Šï¼‰</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span>(x&lt;=n)<br>    &#123;<br>        tree_max[x] = <span class="hljs-built_in">max</span>(tree_max[x],d);<br>        tree_min[x] = <span class="hljs-built_in">min</span>(tree_min[x],d);<br>        x += <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> L,<span class="hljs-type">int</span> R)</span>  <span class="hljs-comment">//æŸ¥è¯¢ï¼ˆå‘ä¸‹ï¼‰</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> Max = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> Min = <span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">while</span>(L&lt;=R)<br>    &#123;<br>        <span class="hljs-keyword">while</span>(R-<span class="hljs-built_in">lowbit</span>(R)&gt;=L)<br>        &#123;<br>            Max = <span class="hljs-built_in">max</span>(Max,tree_max[R]);<br>            Min = <span class="hljs-built_in">min</span>(Min,tree_min[R]);<br>            R -= <span class="hljs-built_in">lowbit</span>(R);<br>        &#125;<br>        Max = <span class="hljs-built_in">max</span>(height[R],Max);<br>        Min = <span class="hljs-built_in">min</span>(height[R],Min);<br>        R--;<br>    &#125;<br>    <span class="hljs-keyword">return</span> Max - Min;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">memset</span>(tree_min,<span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>,<span class="hljs-built_in">sizeof</span>(tree_min));  <span class="hljs-comment">//åˆå§‹åŒ–</span><br>    cin&gt;&gt;n&gt;&gt;q;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;height[i]);<br>        <span class="hljs-built_in">update</span>(i,height[i]);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=q;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> L,R;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;L,&amp;R);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,<span class="hljs-built_in">query</span>(L,R));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åŠ¨æ€è§„åˆ’-DP"><a href="#åŠ¨æ€è§„åˆ’-DP" class="headerlink" title="åŠ¨æ€è§„åˆ’ DP"></a>åŠ¨æ€è§„åˆ’ DP</h2><h3 id="0-x2F-1èƒŒåŒ…"><a href="#0-x2F-1èƒŒåŒ…" class="headerlink" title="0&#x2F;1èƒŒåŒ…"></a>0&#x2F;1èƒŒåŒ…</h3><p>ï¼ˆ1ï¼‰äºŒç»´æ•°ç»„å½¢å¼ï¼š</p><p>[P1048 <a href="https://www.luogu.com.cn/problem/P1048">NOIP2005 æ™®åŠç»„] é‡‡è¯ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> t,m;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Herb</span><br>&#123;<br>    <span class="hljs-type">int</span> val;<br>    <span class="hljs-type">int</span> time;<br>&#125;herb[<span class="hljs-number">110</span>];<br><span class="hljs-type">int</span> dp[<span class="hljs-number">110</span>][<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ans</span><span class="hljs-params">()</span>  <span class="hljs-comment">//DP - 0/1èƒŒåŒ…çš„æ ¸å¿ƒ</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=t;j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(herb[i].time&gt;j)<br>            &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j];<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i<span class="hljs-number">-1</span>][j],dp[i<span class="hljs-number">-1</span>][j-herb[i].time]+herb[i].val);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m][t];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;t&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;herb[i].time,&amp;herb[i].val);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,<span class="hljs-built_in">ans</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æ»šåŠ¨æ•°ç»„å½¢å¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> t,m;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Herb</span><br>&#123;<br>    <span class="hljs-type">int</span> val;<br>    <span class="hljs-type">int</span> time;<br>&#125;herb[<span class="hljs-number">110</span>];<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ans</span><span class="hljs-params">()</span>  <span class="hljs-comment">//DP - 0/1èƒŒåŒ…çš„æ ¸å¿ƒ</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=t;j&gt;=herb[i].time;j--)  <span class="hljs-comment">//å€’è¿‡æ¥</span><br>        &#123;<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j],dp[j-herb[i].time] + herb[i].val);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[t];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;t&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;herb[i].time,&amp;herb[i].val);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,<span class="hljs-built_in">ans</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>01èƒŒåŒ…å˜å¼</p><p><a href="https://www.luogu.com.cn/problem/P1802">P1802 5 å€ç»éªŒæ—¥ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br>LL N, X;<br>LL x[<span class="hljs-number">1010</span>];<br>LL win[<span class="hljs-number">1010</span>];<br>LL lose[<span class="hljs-number">1010</span>];<br>LL dp[<span class="hljs-number">1010</span>];<br><br><span class="hljs-function">LL <span class="hljs-title">dp_func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (LL i = <span class="hljs-number">1</span>; i &lt;= N; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (LL j = X; j &gt;= x[i]; j--)  <span class="hljs-comment">//æœ‰è¶³å¤Ÿè¯å“ï¼Œåˆ™æ¯”è¾ƒ ç”¨è¯æ‰“èµ¢å¥½ è¿˜æ˜¯ ä¸ç”¨è¯æ‰“è¾“å¥½</span><br>        &#123;<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j] + lose[i], dp[j - x[i]] + win[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (LL j = x[i] - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--)  <span class="hljs-comment">//è¯å“ä¸è¶³ï¼Œç›´æ¥è®¤è¾“</span><br>        &#123;<br>            dp[j] += lose[i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[X];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; N &gt;&gt; X;<br>    <span class="hljs-keyword">for</span> (LL i = <span class="hljs-number">1</span>; i &lt;= N; i++)<br>    &#123;<br>        cin &gt;&gt; lose[i] &gt;&gt; win[i] &gt;&gt; x[i];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-number">5</span> * <span class="hljs-built_in">dp_func</span>() &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®Œå…¨èƒŒåŒ…"><a href="#å®Œå…¨èƒŒåŒ…" class="headerlink" title="å®Œå…¨èƒŒåŒ…"></a>å®Œå…¨èƒŒåŒ…</h3><p><a href="https://www.luogu.com.cn/problem/P1616">P1616 ç–¯ç‹‚çš„é‡‡è¯ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long int</span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Herb</span><br>&#123;<br>    ll time;<br>    ll value;<br>&#125; herb[<span class="hljs-number">10010</span>];<br><br>ll T,M;<br>ll dp[<span class="hljs-number">10000010</span>];<br><br><span class="hljs-function">ll <span class="hljs-title">ans</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=M;i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=herb[i].time;j&lt;=T;j++)&#123;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j],dp[j-herb[i].time]+herb[i].value);  <span class="hljs-comment">//æ»šåŠ¨æ•°ç»„</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[T];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;T&gt;&gt;M;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=M;i++)<br>    &#123;<br>        cin&gt;&gt;herb[i].time&gt;&gt;herb[i].value;<br>    &#125;<br>    cout&lt;&lt;<span class="hljs-built_in">ans</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="LCS-æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#LCS-æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="LCS æœ€é•¿å…¬å…±å­åºåˆ—"></a>LCS æœ€é•¿å…¬å…±å­åºåˆ—</h3><p><a href="https://www.luogu.com.cn/problem/P1439">P1439 ã€æ¨¡æ¿ã€‘æœ€é•¿å…¬å…±å­åºåˆ— - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p><a href="https://leetcode.cn/problems/longest-common-subsequence/">1143. æœ€é•¿å…¬å…±å­åºåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>æœªä¼˜åŒ–ç‰ˆæœ¬  </p><p>ä½¿ç”¨äºŒç»´æ•°ç»„ï¼Œé‡åˆ°æ•°æ®é‡ç¨å¤§å°±ä¼šçˆ†</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1010</span>][<span class="hljs-number">1010</span>];<br>string num1[<span class="hljs-number">1010</span>], num2[<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">LCS</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (num1[i] == num2[j])<br>            &#123;<br>                dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n][n];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cin &gt;&gt; num1[i];<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cin &gt;&gt; num2[i];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">LCS</span>() &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="LIS-æœ€é•¿é€’å¢å­åºåˆ—"><a href="#LIS-æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="LIS æœ€é•¿é€’å¢å­åºåˆ—"></a>LIS æœ€é•¿é€’å¢å­åºåˆ—</h3><p>å¾…è¡¥å……â€¦</p><h3 id="é€’æ¨ä¸è®°å¿†åŒ–æœç´¢"><a href="#é€’æ¨ä¸è®°å¿†åŒ–æœç´¢" class="headerlink" title="é€’æ¨ä¸è®°å¿†åŒ–æœç´¢"></a>é€’æ¨ä¸è®°å¿†åŒ–æœç´¢</h3><p><a href="http://poj.org/problem?id=1163">1163 â€“ The Triangle (poj.org)</a>  æ•°å¡”</p><h2 id="æ•°å­¦"><a href="#æ•°å­¦" class="headerlink" title="æ•°å­¦"></a>æ•°å­¦</h2><h3 id="æ¨¡è¿ç®—"><a href="#æ¨¡è¿ç®—" class="headerlink" title="æ¨¡è¿ç®—"></a>æ¨¡è¿ç®—</h3><p>åŸºæœ¬è§„åˆ™<br>æ¨¡è¿ç®—çš„åŸºæœ¬è§„åˆ™ä¸å››åˆ™è¿ç®—åŸºæœ¬ä¸€è‡´ï¼š</p><p>(a + b) % p &#x3D; (a % p + b % p) % p</p><p>(a â€“ b) % p &#x3D; (a % p â€“ b % p) % p</p><p>(a * b) % p &#x3D; (a % p * b % p) % p</p><p>(a^b) % p &#x3D; ((a % p)^b) % p</p><p>(a &#x2F; b) % p &#x3D; (a * k) % p  ï¼Œå…¶ä¸­kæ˜¯bçš„é€†å…ƒã€‚</p><h4 id="Problem-å–æ¨¡"><a href="#Problem-å–æ¨¡" class="headerlink" title="Problem  å–æ¨¡"></a>Problem  å–æ¨¡</h4><p>è®°èµ·å§‹æ•´å‹å˜é‡ x&#x3D;0 ï¼Œä½ éœ€è¦å®ç° xä¸è‹¥å¹²ä¸ªæ•´æ•°çš„å››åˆ™è¿ç®—ï¼Œæ¯æ¬¡ç»“æœé‡æ–°ä¿å­˜ä¸º x ï¼Œå¹¶å°†æœ€ç»ˆç»“æœå¯¹ p å–æ¨¡ (ä¸ä¿è¯ pæ˜¯è´¨æ•°) ã€‚</p><p>è¾“å…¥</p><p>é¦–å…ˆè¾“å…¥ä¸€è¡Œä¸¤ä¸ªæ•´æ•° t,p(1&lt;&#x3D;t&lt;&#x3D;10^5, 2&lt;&#x3D;p&lt;&#x3D;10^9+7) ã€‚</p><p>æ¥ä¸‹æ¥è¾“å…¥ t è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° c, y (1&lt;&#x3D;c&lt;&#x3D;4,0&lt;&#x3D;|y|&lt;&#x3D;10^18) ã€‚</p><p>è‹¥ c&#x3D;1 ï¼Œè®¡ç®— x+y å¹¶å°†ç»“æœä¿å­˜åœ¨ x å†…ã€‚</p><p>è‹¥ c&#x3D;2ï¼Œè®¡ç®— x-y å¹¶å°†ç»“æœä¿å­˜åœ¨ x å†…ã€‚</p><p>è‹¥ c&#x3D;3 ï¼Œè®¡ç®— x*y å¹¶å°†ç»“æœä¿å­˜åœ¨ x å†…ã€‚</p><p>è‹¥ c&#x3D;4ï¼Œè®¡ç®— x&#x2F;y å¹¶å°†ç»“æœä¿å­˜åœ¨ x å†…ã€‚</p><p>è¾“å…¥ä¿è¯è®¡ç®—è¿‡ç¨‹ä¸ä¼šå‡ºç°é›¶é™¤ï¼Œä¸”ä¿è¯é™¤æ•°å­˜åœ¨é€†å…ƒã€‚</p><p>è¾“å‡º</p><p>æ¯æ¬¡è¿ç®—ç»“æŸåè¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œä¸º x mod pã€‚å…±è¾“å‡º t è¡Œï¼Œä½ éœ€è¦ä¿è¯è¾“å‡ºä¸ºéè´Ÿæ•°ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br>LL t, p;<br>vector&lt;LL&gt; c;<br>vector&lt;LL&gt; y;<br>LL x = <span class="hljs-number">0</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">extend_gcd</span><span class="hljs-params">(LL a, LL b, LL &amp;x, LL &amp;y)</span>  <span class="hljs-comment">//æ‰©å±•æ¬§å‡ é‡Œå¾—</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>)<br>    &#123;<br>        x = <span class="hljs-number">1</span>, y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">extend_gcd</span>(b, a % b, x, y);<br>    LL tmp = x;<br>    x = y;<br>    y = tmp - (a / b) * y;<br>&#125;<br><br><span class="hljs-function">LL <span class="hljs-title">mod_inverse</span><span class="hljs-params">(LL a, LL m)</span>  <span class="hljs-comment">//æ±‚é€†å…ƒ</span></span><br><span class="hljs-function"></span>&#123;<br>    LL x, y;<br>    <span class="hljs-built_in">extend_gcd</span>(a, m, x, y);<br>    <span class="hljs-keyword">return</span> (m + x % m) % m;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; t &gt;&gt; p;<br>    LL cin_temp1, cin_temp2;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; t; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;cin_temp1, &amp;cin_temp2);<br>        c.<span class="hljs-built_in">push_back</span>(cin_temp1);<br>        y.<span class="hljs-built_in">push_back</span>(cin_temp2);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; t; i++)<br>    &#123;<br>        y[i] = (y[i] % p + p) % p; <span class="hljs-comment">//ç¡®ä¿y[i]&gt;0</span><br>        <span class="hljs-keyword">if</span> (c[i] == <span class="hljs-number">1</span>)<br>        &#123;<br>            x = ((x % p) + (y[i] % p)) % p;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c[i] == <span class="hljs-number">2</span>)<br>        &#123;<br>            x = ((x % p) - (y[i] % p)) % p;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c[i] == <span class="hljs-number">3</span>)<br>        &#123;<br>            x = ((x % p) * (y[i] % p)) % p;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c[i] == <span class="hljs-number">4</span>)<br>        &#123;<br>            LL k = <span class="hljs-built_in">mod_inverse</span>(y[i], p);<br>            x = ((x % p) * (k % p)) % p;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>)<br>            x = (x % p + p) % p; <span class="hljs-comment">//ç¡®ä¿x&gt;0</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, x);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¿«é€Ÿå¹‚ï¼ˆå–æ¨¡ï¼‰"><a href="#å¿«é€Ÿå¹‚ï¼ˆå–æ¨¡ï¼‰" class="headerlink" title="å¿«é€Ÿå¹‚ï¼ˆå–æ¨¡ï¼‰"></a>å¿«é€Ÿå¹‚ï¼ˆå–æ¨¡ï¼‰</h3><p><a href="https://www.luogu.com.cn/problem/P1226">P1226 ã€æ¨¡æ¿ã€‘å¿«é€Ÿå¹‚||å–ä½™è¿ç®— - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br>LL mod;<br><br><span class="hljs-function">LL <span class="hljs-title">fastPow</span><span class="hljs-params">(LL a, LL n)</span></span><br><span class="hljs-function"></span>&#123;<br>    LL base = a;<br>    LL res = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (n)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (n &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            res *= base;<br>            res %= mod;  <span class="hljs-comment">//æ±‚ä½™</span><br>        &#125;<br>        base *= base;<br>        base %= mod;  <span class="hljs-comment">//æ±‚ä½™</span><br>        n &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    LL a, n;<br>    cin &gt;&gt; a &gt;&gt; n &gt;&gt; mod;<br>    LL ans = <span class="hljs-built_in">fastPow</span>(a, n);<br>    cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;^&quot;</span> &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot; mod &quot;</span> &lt;&lt; mod &lt;&lt; <span class="hljs-string">&quot;=&quot;</span> &lt;&lt; ans &lt;&lt; endl;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè‹¥ä¸éœ€è¦æ±‚ä½™ï¼Œç›´æ¥æŠŠâ€œæ±‚ä½™â€çš„é‚£ä¸¤è¡Œåˆ å»å³å¯ã€‚</p><h3 id="æœ€å¤§å…¬çº¦æ•°GCD"><a href="#æœ€å¤§å…¬çº¦æ•°GCD" class="headerlink" title="æœ€å¤§å…¬çº¦æ•°GCD"></a>æœ€å¤§å…¬çº¦æ•°GCD</h3><h3 id="æœ€å°å…¬å€æ•°LCM"><a href="#æœ€å°å…¬å€æ•°LCM" class="headerlink" title="æœ€å°å…¬å€æ•°LCM"></a>æœ€å°å…¬å€æ•°LCM</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> <span class="hljs-comment">//æœ€å¤§å…¬çº¦æ•°gcd</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : <span class="hljs-built_in">gcd</span>(b, a % b);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> <span class="hljs-comment">//æœ€å°å…¬å€æ•°lcm</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a / <span class="hljs-built_in">gcd</span>(a, b) * b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a, b;<br>    cin &gt;&gt; a &gt;&gt; b;<br>    cout &lt;&lt; <span class="hljs-built_in">gcd</span>(a, b) &lt;&lt; endl;<br>    <span class="hljs-comment">//ä¹Ÿå¯ç›´æ¥ä½¿ç”¨&lt;algorithm&gt;å¤´æ–‡ä»¶é‡Œçš„ __gdc(a,b)å‡½æ•°</span><br>    <span class="hljs-comment">// cout &lt;&lt; __gcd(a, b) &lt;&lt; endl;</span><br>    cout &lt;&lt; <span class="hljs-built_in">lcm</span>(a, b) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">extend_gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> &amp;x, <span class="hljs-type">int</span> &amp;y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>)<br>    &#123;<br>        x = <span class="hljs-number">1</span>;<br>        y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">extend_gcd</span>(b, a % b, x, y);<br>    <span class="hljs-type">int</span> tmp = x;<br>    x = y;<br>    y = tmp - (a / b) * y;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é€†å…ƒ"><a href="#é€†å…ƒ" class="headerlink" title="é€†å…ƒ"></a>é€†å…ƒ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">extend_gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> &amp;x, <span class="hljs-type">int</span> &amp;y)</span>  <span class="hljs-comment">//æ‰©å±•æ¬§å‡ é‡Œå¾—</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>)<br>    &#123;<br>        x = <span class="hljs-number">1</span>;<br>        y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">extend_gcd</span>(b, a % b, x, y);<br>    <span class="hljs-type">int</span> tmp = x;<br>    x = y;<br>    y = tmp - (a / b) * y;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">mod_inverse</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> m)</span>  <span class="hljs-comment">//æ±‚é€†å…ƒ</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> x, y;<br>    <span class="hljs-built_in">extend_gcd</span>(a, m, x, y);<br>    <span class="hljs-keyword">return</span> (m + x % m) % m;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a, m;<br>    cin &gt;&gt; a &gt;&gt; m;<br>    cout &lt;&lt; <span class="hljs-built_in">mod_inverse</span>(a, m) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é™¤æ³•å–æ¨¡"><a href="#é™¤æ³•å–æ¨¡" class="headerlink" title="é™¤æ³•å–æ¨¡"></a>é™¤æ³•å–æ¨¡</h3><p>ï¼ˆa&#x2F;bï¼‰mod m &#x3D; (a*k)mod m  ï¼Œå…¶ä¸­kæ˜¯bçš„é€†å…ƒã€‚</p><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><h3 id="KMP-ç®—æ³•"><a href="#KMP-ç®—æ³•" class="headerlink" title="KMP ç®—æ³•"></a>KMP ç®—æ³•</h3><p><a href="https://blog.csdn.net/v_july_v/article/details/7041827">ä»å¤´åˆ°å°¾å½»åº•ç†è§£KMP</a></p><p><a href="https://www.zhihu.com/question/21923021">å¦‚ä½•ç†è§£nextæ•°ç»„çš„æ±‚è§£</a></p><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>â€‹Knuth-Morris-Pratt å­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•ï¼Œç®€ç§°ä¸º â€œKMPç®—æ³•â€ï¼Œå¸¸ç”¨äºåœ¨ä¸€ä¸ªæ–‡æœ¬ä¸²Så†…æŸ¥æ‰¾ä¸€ä¸ªæ¨¡å¼ä¸²P çš„å‡ºç°ä½ç½®ï¼Œè¿™ä¸ªç®—æ³•ç”±Donald Knuthã€Vaughan Prattã€James H. Morrisä¸‰äººäº1977å¹´è”åˆå‘è¡¨ï¼Œæ•…å–è¿™3äººçš„å§“æ°å‘½åæ­¤ç®—æ³•ã€‚</p><p>â€‹ä¸‹é¢å…ˆç›´æ¥ç»™å‡ºKMPçš„ç®—æ³•æµç¨‹ï¼ˆå¦‚æœæ„Ÿåˆ°ä¸€ç‚¹ç‚¹ä¸é€‚ï¼Œæ²¡å…³ç³»ï¼ŒåšæŒä¸‹ï¼Œç¨åä¼šæœ‰å…·ä½“æ­¥éª¤åŠè§£é‡Šï¼Œè¶Šå¾€åçœ‹è¶Šä¼šæŸ³æš—èŠ±æ˜â˜ºï¼‰ï¼š</p><p>å‡è®¾ç°åœ¨æ–‡æœ¬ä¸²SåŒ¹é…åˆ° i ä½ç½®ï¼Œæ¨¡å¼ä¸²PåŒ¹é…åˆ° j ä½ç½®</p><ul><li>å¦‚æœj &#x3D; -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] &#x3D;&#x3D; P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++ï¼Œç»§ç»­åŒ¹é…ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼›</li><li>å¦‚æœj !&#x3D; -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] !&#x3D; P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj &#x3D; next[j]ã€‚æ­¤ä¸¾æ„å‘³ç€å¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²Pç›¸å¯¹äºæ–‡æœ¬ä¸²Så‘å³ç§»åŠ¨äº†j - next [j] ä½ã€‚</li><li>æ¢è¨€ä¹‹ï¼Œå½“åŒ¹é…å¤±è´¥æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šå¤±é…å­—ç¬¦æ‰€åœ¨ä½ç½® - å¤±é…å­—ç¬¦å¯¹åº”çš„next å€¼ï¼ˆnext æ•°ç»„çš„æ±‚è§£ä¼šåœ¨ä¸‹æ–‡çš„3.3.3èŠ‚ä¸­è¯¦ç»†é˜è¿°ï¼‰ï¼Œå³ç§»åŠ¨çš„å®é™…ä½æ•°ä¸ºï¼šj - next[j]ï¼Œä¸”æ­¤å€¼å¤§äºç­‰äº1ã€‚</li></ul><p>â€‹å¾ˆå¿«ï¼Œä½ ä¹Ÿä¼šæ„è¯†åˆ°next æ•°ç»„å„å€¼çš„å«ä¹‰ï¼šä»£è¡¨å½“å‰å­—ç¬¦ä¹‹å‰çš„å­—ç¬¦ä¸²ä¸­ï¼Œæœ‰å¤šå¤§é•¿åº¦çš„ç›¸åŒå‰ç¼€åç¼€ã€‚ä¾‹å¦‚å¦‚æœnext [j] &#x3D; kï¼Œä»£è¡¨j ä¹‹å‰çš„å­—ç¬¦ä¸²ä¸­æœ‰æœ€å¤§é•¿åº¦ä¸ºk çš„ç›¸åŒå‰ç¼€åç¼€ã€‚</p><p>â€‹æ­¤ä¹Ÿæ„å‘³ç€åœ¨æŸä¸ªå­—ç¬¦å¤±é…æ—¶ï¼Œè¯¥å­—ç¬¦å¯¹åº”çš„next å€¼ä¼šå‘Šè¯‰ä½ ä¸‹ä¸€æ­¥åŒ¹é…ä¸­ï¼Œæ¨¡å¼ä¸²åº”è¯¥è·³åˆ°å“ªä¸ªä½ç½®ï¼ˆè·³åˆ°next [j] çš„ä½ç½®ï¼‰ã€‚å¦‚æœnext [j] ç­‰äº0æˆ–-1ï¼Œåˆ™è·³åˆ°æ¨¡å¼ä¸²çš„å¼€å¤´å­—ç¬¦ï¼Œè‹¥next [j] &#x3D; k ä¸” k &gt; 0ï¼Œä»£è¡¨ä¸‹æ¬¡åŒ¹é…è·³åˆ°j ä¹‹å‰çš„æŸä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯è·³åˆ°å¼€å¤´ï¼Œä¸”å…·ä½“è·³è¿‡äº†k ä¸ªå­—ç¬¦ã€‚</p><p>è½¬æ¢æˆä»£ç è¡¨ç¤ºï¼Œåˆ™æ˜¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">KmpSearch</span><span class="hljs-params">(<span class="hljs-type">char</span>* s, <span class="hljs-type">char</span>* p)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> sLen = <span class="hljs-built_in">strlen</span>(s);<br><span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br><span class="hljs-keyword">while</span> (i &lt; sLen &amp;&amp; j &lt; pLen)<br>&#123;<br><span class="hljs-comment">//â‘ å¦‚æœj = -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] == P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++    </span><br><span class="hljs-keyword">if</span> (j == <span class="hljs-number">-1</span> || s[i] == p[j])<br>&#123;<br>i++;<br>j++;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//â‘¡å¦‚æœj != -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] != P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj = next[j]    </span><br><span class="hljs-comment">//next[j]å³ä¸ºjæ‰€å¯¹åº”çš„nextå€¼      </span><br>j = next[j];<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (j == pLen)<br><span class="hljs-keyword">return</span> i - j;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹ç»§ç»­æ‹¿ä¹‹å‰çš„ä¾‹å­æ¥è¯´ï¼Œå½“S[10]è·ŸP[6]åŒ¹é…å¤±è´¥æ—¶ï¼ŒKMPä¸æ˜¯è·Ÿæš´åŠ›åŒ¹é…é‚£æ ·ç®€å•çš„æŠŠæ¨¡å¼ä¸²å³ç§»ä¸€ä½ï¼Œè€Œæ˜¯æ‰§è¡Œç¬¬â‘¡æ¡æŒ‡ä»¤ï¼šâ€œå¦‚æœj !&#x3D; -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] !&#x3D; P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj &#x3D; next[j]â€ï¼Œå³j ä»6å˜åˆ°2ï¼ˆåé¢æˆ‘ä»¬å°†æ±‚å¾—P[6]ï¼Œå³å­—ç¬¦Då¯¹åº”çš„next å€¼ä¸º2ï¼‰ï¼Œæ‰€ä»¥ç›¸å½“äºæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºj - next[j]ï¼ˆj - next[j] &#x3D; 6-2 &#x3D; 4ï¼‰ã€‚</p> <img src="image-20220930093303598.png" alt="image-20220930093303598" style="zoom:50%;" /><p>â€‹å‘å³ç§»åŠ¨4ä½åï¼ŒS[10]è·ŸP[2]ç»§ç»­åŒ¹é…ã€‚ä¸ºä»€ä¹ˆè¦å‘å³ç§»åŠ¨4ä½å‘¢ï¼Œå› ä¸ºç§»åŠ¨4ä½åï¼Œæ¨¡å¼ä¸²ä¸­åˆæœ‰ä¸ªâ€œABâ€å¯ä»¥ç»§ç»­è·ŸS[8]S[9]å¯¹åº”ç€ï¼Œä»è€Œä¸ç”¨è®©i å›æº¯ã€‚ç›¸å½“äºåœ¨é™¤å»å­—ç¬¦Dçš„æ¨¡å¼ä¸²å­ä¸²ä¸­å¯»æ‰¾ç›¸åŒçš„å‰ç¼€å’Œåç¼€ï¼Œç„¶åæ ¹æ®å‰ç¼€åç¼€æ±‚å‡ºnext æ•°ç»„ï¼Œæœ€ååŸºäºnext æ•°ç»„è¿›è¡ŒåŒ¹é…ï¼ˆä¸å…³å¿ƒnext æ•°ç»„æ˜¯æ€ä¹ˆæ±‚æ¥çš„ï¼Œåªæƒ³çœ‹åŒ¹é…è¿‡ç¨‹æ˜¯å’‹æ ·çš„ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹æ–‡3.3.4èŠ‚ï¼‰ã€‚</p><h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><ul><li><p>1ï¼‰å¯»æ‰¾å‰ç¼€åç¼€æœ€é•¿å…¬å…±å…ƒç´ é•¿åº¦</p><ul><li><p>å¯¹äº P &#x3D; p0 p1 â€¦pj-1 pjï¼Œå¯»æ‰¾æ¨¡å¼ä¸²Pä¸­é•¿åº¦æœ€å¤§ä¸”ç›¸ç­‰çš„å‰ç¼€å’Œåç¼€ã€‚å¦‚æœå­˜åœ¨p0 p1 â€¦pk-1 pk &#x3D; pj- k pj-k+1â€¦pj-1 pjï¼Œé‚£ä¹ˆåœ¨åŒ…å«pjçš„æ¨¡å¼ä¸²ä¸­æœ‰æœ€å¤§é•¿åº¦ä¸ºk+1çš„ç›¸åŒå‰ç¼€åç¼€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç»™å®šçš„æ¨¡å¼ä¸²ä¸º <strong>â€œababâ€</strong>ï¼Œé‚£ä¹ˆå®ƒçš„å„ä¸ªå­ä¸²çš„å‰ç¼€åç¼€çš„å…¬å…±å…ƒç´ çš„æœ€å¤§é•¿åº¦å¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š</p> <img src="image-20220930093457079.png" alt="image-20220930093457079" style="zoom: 67%;" /><blockquote><p>æ¯”å¦‚å¯¹äºå­—ç¬¦ä¸²abaæ¥è¯´ï¼Œå®ƒæœ‰é•¿åº¦ä¸º1çš„ç›¸åŒå‰ç¼€åç¼€aï¼›è€Œå¯¹äºå­—ç¬¦ä¸²ababæ¥è¯´ï¼Œå®ƒæœ‰é•¿åº¦ä¸º2çš„ç›¸åŒå‰ç¼€åç¼€abï¼ˆç›¸åŒå‰ç¼€åç¼€çš„é•¿åº¦ä¸ºk + 1ï¼Œk + 1 &#x3D; 2ï¼‰ã€‚</p></blockquote></li></ul></li><li><p>2ï¼‰æ±‚nextæ•°ç»„</p><ul><li><p>next æ•°ç»„è€ƒè™‘çš„æ˜¯é™¤å½“å‰å­—ç¬¦å¤–çš„æœ€é•¿ç›¸åŒå‰ç¼€åç¼€ï¼Œæ‰€ä»¥é€šè¿‡ç¬¬â‘ æ­¥éª¤æ±‚å¾—å„ä¸ªå‰ç¼€åç¼€çš„å…¬å…±å…ƒç´ çš„æœ€å¤§é•¿åº¦åï¼Œåªè¦ç¨ä½œå˜å½¢å³å¯ï¼šå°†ç¬¬â‘ æ­¥éª¤ä¸­æ±‚å¾—çš„å€¼æ•´ä½“å³ç§»ä¸€ä½ï¼Œç„¶ååˆå€¼èµ‹ä¸º-1ï¼Œå¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š</p> <img src="image-20220930093601245.png" alt="image-20220930093601245" style="zoom:67%;" /><blockquote><p>æ¯”å¦‚å¯¹äºabaæ¥è¯´ï¼Œç¬¬3ä¸ªå­—ç¬¦aä¹‹å‰çš„å­—ç¬¦ä¸²abä¸­æœ‰é•¿åº¦ä¸º0çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œæ‰€ä»¥ç¬¬3ä¸ªå­—ç¬¦aå¯¹åº”çš„nextå€¼ä¸º0ï¼›è€Œå¯¹äºababæ¥è¯´ï¼Œç¬¬4ä¸ªå­—ç¬¦bä¹‹å‰çš„å­—ç¬¦ä¸²abaä¸­æœ‰é•¿åº¦ä¸º1çš„ç›¸åŒå‰ç¼€åç¼€aï¼Œæ‰€ä»¥ç¬¬4ä¸ªå­—ç¬¦bå¯¹åº”çš„nextå€¼ä¸º1ï¼ˆç›¸åŒå‰ç¼€åç¼€çš„é•¿åº¦ä¸ºkï¼Œk &#x3D; 1ï¼‰ã€‚</p></blockquote></li></ul></li><li><p>3ï¼‰æ ¹æ®nextæ•°ç»„è¿›è¡ŒåŒ¹é…</p><ul><li><p>åŒ¹é…å¤±é…ï¼Œj &#x3D; next [j]ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šj - next[j]ã€‚æ¢è¨€ä¹‹ï¼Œå½“æ¨¡å¼ä¸²çš„åç¼€pj-k pj-k+1, â€¦, pj-1 è·Ÿæ–‡æœ¬ä¸²si-k si-k+1, â€¦, si-1åŒ¹é…æˆåŠŸï¼Œä½†pj è·ŸsiåŒ¹é…å¤±è´¥æ—¶ï¼Œå› ä¸ºnext[j] &#x3D; kï¼Œç›¸å½“äºåœ¨ä¸åŒ…å«pjçš„æ¨¡å¼ä¸²ä¸­æœ‰æœ€å¤§é•¿åº¦ä¸ºk çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œå³p0 p1 â€¦pk-1 &#x3D; pj-k pj-k+1â€¦pj-1ï¼Œæ•…ä»¤j &#x3D; next[j]ï¼Œä»è€Œè®©æ¨¡å¼ä¸²å³ç§»j - next[j] ä½ï¼Œä½¿å¾—æ¨¡å¼ä¸²çš„å‰ç¼€p0 p1, â€¦, pk-1å¯¹åº”ç€æ–‡æœ¬ä¸² si-k si-k+1, â€¦, si-1ï¼Œè€Œåè®©pk è·Ÿsi ç»§ç»­åŒ¹é…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <img src="image-20220930093807355.png" alt="image-20220930093807355" style="zoom:67%;" /></li></ul></li></ul><p>â€‹ç»¼ä¸Šï¼ŒKMPçš„next æ•°ç»„ç›¸å½“äºå‘Šè¯‰æˆ‘ä»¬ï¼šå½“æ¨¡å¼ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦è·Ÿæ–‡æœ¬ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦åŒ¹é…å¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²ä¸‹ä¸€æ­¥åº”è¯¥è·³åˆ°å“ªä¸ªä½ç½®ã€‚å¦‚æ¨¡å¼ä¸²ä¸­åœ¨j å¤„çš„å­—ç¬¦è·Ÿæ–‡æœ¬ä¸²åœ¨i å¤„çš„å­—ç¬¦åŒ¹é…å¤±é…æ—¶ï¼Œä¸‹ä¸€æ­¥ç”¨next [j] å¤„çš„å­—ç¬¦ç»§ç»­è·Ÿæ–‡æœ¬ä¸²i å¤„çš„å­—ç¬¦åŒ¹é…ï¼Œç›¸å½“äºæ¨¡å¼ä¸²å‘å³ç§»åŠ¨ j - next[j] ä½ã€‚</p><h4 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h4><h5 id="1-å¯»æ‰¾æœ€é•¿å‰ç¼€åç¼€"><a href="#1-å¯»æ‰¾æœ€é•¿å‰ç¼€åç¼€" class="headerlink" title="1. å¯»æ‰¾æœ€é•¿å‰ç¼€åç¼€"></a>1. å¯»æ‰¾æœ€é•¿å‰ç¼€åç¼€</h5><p>å¦‚æœç»™å®šçš„æ¨¡å¼ä¸²æ˜¯ï¼šâ€œABCDABDâ€ï¼Œä»å·¦è‡³å³éå†æ•´ä¸ªæ¨¡å¼ä¸²ï¼Œå…¶å„ä¸ªå­ä¸²çš„å‰ç¼€åç¼€åˆ†åˆ«å¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š</p><p> <img src="/2021/11/25/AlgorithmNote/20140725231726921" alt="img"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸæ¨¡å¼ä¸²å­ä¸²å¯¹åº”çš„å„ä¸ªå‰ç¼€åç¼€çš„å…¬å…±å…ƒç´ çš„æœ€å¤§é•¿åº¦è¡¨ä¸ºï¼ˆ<strong>ä¸‹ç®€ç§°ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹</strong>ï¼‰ï¼š</p><p> <img src="/2021/11/25/AlgorithmNote/20140721222801918" alt="img"></p><h5 id="2-åŸºäºã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹åŒ¹é…"><a href="#2-åŸºäºã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹åŒ¹é…" class="headerlink" title="2. åŸºäºã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹åŒ¹é…"></a>2. åŸºäºã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹åŒ¹é…</h5><p>å› ä¸ºæ¨¡å¼ä¸²ä¸­é¦–å°¾å¯èƒ½ä¼šæœ‰é‡å¤çš„å­—ç¬¦ï¼Œæ•…å¯å¾—å‡ºä¸‹è¿°ç»“è®ºï¼š</p><blockquote><p>å¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šå·²åŒ¹é…å­—ç¬¦æ•° - å¤±é…å­—ç¬¦çš„ä¸Šä¸€ä½å­—ç¬¦æ‰€å¯¹åº”çš„æœ€å¤§é•¿åº¦å€¼</p></blockquote><p>ä¸‹é¢ï¼Œå’±ä»¬å°±ç»“åˆä¹‹å‰çš„ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹å’Œä¸Šè¿°ç»“è®ºï¼Œè¿›è¡Œå­—ç¬¦ä¸²çš„åŒ¹é…ã€‚å¦‚æœç»™å®šæ–‡æœ¬ä¸²â€œBBC ABCDAB ABCDABCDABDEâ€ï¼Œå’Œæ¨¡å¼ä¸²â€œABCDABDâ€ï¼Œç°åœ¨è¦æ‹¿æ¨¡å¼ä¸²å»è·Ÿæ–‡æœ¬ä¸²åŒ¹é…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <img src="20140723224710203" alt="img" style="zoom:50%;" /><ol><li><p>å› ä¸ºæ¨¡å¼ä¸²ä¸­çš„å­—ç¬¦Aè·Ÿæ–‡æœ¬ä¸²ä¸­çš„å­—ç¬¦Bã€Bã€Cã€ç©ºæ ¼ä¸€å¼€å§‹å°±ä¸åŒ¹é…ï¼Œæ‰€ä»¥ä¸å¿…è€ƒè™‘ç»“è®ºï¼Œç›´æ¥å°†æ¨¡å¼ä¸²ä¸æ–­çš„å³ç§»ä¸€ä½å³å¯ï¼Œç›´åˆ°æ¨¡å¼ä¸²ä¸­çš„å­—ç¬¦Aè·Ÿæ–‡æœ¬ä¸²çš„ç¬¬5ä¸ªå­—ç¬¦AåŒ¹é…æˆåŠŸï¼š</p> <img src="20140726213602848" alt="img" style="zoom:50%;" /></li><li><p>ç»§ç»­å¾€ååŒ¹é…ï¼Œå½“æ¨¡å¼ä¸²æœ€åä¸€ä¸ªå­—ç¬¦Dè·Ÿæ–‡æœ¬ä¸²åŒ¹é…æ—¶å¤±é…ï¼Œæ˜¾è€Œæ˜“è§ï¼Œæ¨¡å¼ä¸²éœ€è¦å‘å³ç§»åŠ¨ã€‚ä½†å‘å³ç§»åŠ¨å¤šå°‘ä½å‘¢ï¼Ÿå› ä¸ºæ­¤æ—¶å·²ç»åŒ¹é…çš„å­—ç¬¦æ•°ä¸º6ä¸ªï¼ˆABCDABï¼‰ï¼Œç„¶åæ ¹æ®ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹å¯å¾—å¤±é…å­—ç¬¦Dçš„ä¸Šä¸€ä½å­—ç¬¦Bå¯¹åº”çš„é•¿åº¦å€¼ä¸º2ï¼Œæ‰€ä»¥æ ¹æ®ä¹‹å‰çš„ç»“è®ºï¼Œå¯çŸ¥éœ€è¦å‘å³ç§»åŠ¨6 - 2 &#x3D; 4 ä½ã€‚</p> <img src="20140721223809617" alt="img" style="zoom:50%;" /></li><li><p>æ¨¡å¼ä¸²å‘å³ç§»åŠ¨4ä½åï¼Œå‘ç°Cå¤„å†åº¦å¤±é…ï¼Œå› ä¸ºæ­¤æ—¶å·²ç»åŒ¹é…äº†2ä¸ªå­—ç¬¦ï¼ˆABï¼‰ï¼Œä¸”ä¸Šä¸€ä½å­—ç¬¦Bå¯¹åº”çš„æœ€å¤§é•¿åº¦å€¼ä¸º0ï¼Œæ‰€ä»¥å‘å³ç§»åŠ¨ï¼š2 - 0 &#x3D;2 ä½ã€‚</p> <img src="20140721223539765" alt="img" style="zoom:50%;" /></li><li><p>Aä¸ç©ºæ ¼å¤±é…ï¼Œå‘å³ç§»åŠ¨1 ä½ã€‚</p> <img src="20140721223823548" alt="img" style="zoom:50%;" /></li><li><p>ç»§ç»­æ¯”è¾ƒï¼Œå‘ç°Dä¸C å¤±é…ï¼Œæ•…å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šå·²åŒ¹é…çš„å­—ç¬¦æ•°6å‡å»ä¸Šä¸€ä½å­—ç¬¦Bå¯¹åº”çš„æœ€å¤§é•¿åº¦2ï¼Œå³å‘å³ç§»åŠ¨6 - 2 &#x3D; 4 ä½ã€‚</p> <img src="20140721223558140" alt="img" style="zoom:50%;" /></li><li><p>ç»å†ç¬¬5æ­¥åï¼Œå‘ç°åŒ¹é…æˆåŠŸï¼Œè¿‡ç¨‹ç»“æŸã€‚</p> <img src="20140721223611515" alt="img" style="zoom:50%;" /></li></ol><p>â€‹é€šè¿‡ä¸Šè¿°åŒ¹é…è¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œé—®é¢˜çš„å…³é”®å°±æ˜¯å¯»æ‰¾æ¨¡å¼ä¸²ä¸­æœ€å¤§é•¿åº¦çš„ç›¸åŒå‰ç¼€å’Œåç¼€ï¼Œæ‰¾åˆ°äº†æ¨¡å¼ä¸²ä¸­æ¯ä¸ªå­—ç¬¦ä¹‹å‰çš„å‰ç¼€å’Œåç¼€å…¬å…±éƒ¨åˆ†çš„æœ€å¤§é•¿åº¦åï¼Œä¾¿å¯åŸºäºæ­¤åŒ¹é…ã€‚è€Œè¿™ä¸ªæœ€å¤§é•¿åº¦ä¾¿æ­£æ˜¯next æ•°ç»„è¦è¡¨è¾¾çš„å«ä¹‰ã€‚</p><h5 id="3-æ ¹æ®ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹æ±‚next-æ•°ç»„"><a href="#3-æ ¹æ®ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹æ±‚next-æ•°ç»„" class="headerlink" title="3. æ ¹æ®ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹æ±‚next æ•°ç»„"></a>3. æ ¹æ®ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹æ±‚next æ•°ç»„</h5><p>ç”±ä¸Šæ–‡ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå­—ç¬¦ä¸²â€œABCDABDâ€å„ä¸ªå‰ç¼€åç¼€çš„æœ€å¤§å…¬å…±å…ƒç´ é•¿åº¦åˆ†åˆ«ä¸ºï¼š</p> <img src="20140721230517324" alt="img" style="zoom: 80%;" /><p>è€Œä¸”ï¼Œæ ¹æ®è¿™ä¸ªè¡¨å¯ä»¥å¾—å‡ºä¸‹è¿°ç»“è®º</p><blockquote><p>å¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šå·²åŒ¹é…å­—ç¬¦æ•° - å¤±é…å­—ç¬¦çš„ä¸Šä¸€ä½å­—ç¬¦æ‰€å¯¹åº”çš„æœ€å¤§é•¿åº¦å€¼</p></blockquote><p>â€‹ä¸Šæ–‡åˆ©ç”¨è¿™ä¸ªè¡¨å’Œç»“è®ºè¿›è¡ŒåŒ¹é…æ—¶ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“åŒ¹é…åˆ°ä¸€ä¸ªå­—ç¬¦å¤±é…æ—¶ï¼Œå…¶å®æ²¡å¿…è¦è€ƒè™‘å½“å‰å¤±é…çš„å­—ç¬¦ï¼Œæ›´ä½•å†µæˆ‘ä»¬æ¯æ¬¡å¤±é…æ—¶ï¼Œéƒ½æ˜¯çœ‹çš„å¤±é…å­—ç¬¦çš„ä¸Šä¸€ä½å­—ç¬¦å¯¹åº”çš„æœ€å¤§é•¿åº¦å€¼ã€‚å¦‚æ­¤ï¼Œä¾¿å¼•å‡ºäº†next æ•°ç»„ã€‚</p><p>â€‹ç»™å®šå­—ç¬¦ä¸²â€œABCDABDâ€ï¼Œå¯æ±‚å¾—å®ƒçš„next æ•°ç»„å¦‚ä¸‹ï¼š</p><p>â€‹ <img src="20140721230250468" alt="img" style="zoom: 80%;" /></p><p>â€‹æŠŠnext æ•°ç»„è·Ÿä¹‹å‰æ±‚å¾—çš„æœ€å¤§é•¿åº¦è¡¨å¯¹æ¯”åï¼Œä¸éš¾å‘ç°ï¼Œnext æ•°ç»„ç›¸å½“äºâ€œæœ€å¤§é•¿åº¦å€¼â€ æ•´ä½“å‘å³ç§»åŠ¨ä¸€ä½ï¼Œç„¶ååˆå§‹å€¼èµ‹ä¸º-1ã€‚æ„è¯†åˆ°äº†è¿™ä¸€ç‚¹ï¼Œä½ ä¼šæƒŠå‘¼åŸæ¥next æ•°ç»„çš„æ±‚è§£ç«Ÿç„¶å¦‚æ­¤ç®€å•ï¼šå°±æ˜¯æ‰¾æœ€å¤§å¯¹ç§°é•¿åº¦çš„å‰ç¼€åç¼€ï¼Œç„¶åæ•´ä½“å³ç§»ä¸€ä½ï¼Œåˆå€¼èµ‹ä¸º-1ï¼ˆå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥è®¡ç®—æŸä¸ªå­—ç¬¦å¯¹åº”çš„nextå€¼ï¼Œå°±æ˜¯çœ‹è¿™ä¸ªå­—ç¬¦ä¹‹å‰çš„å­—ç¬¦ä¸²ä¸­æœ‰å¤šå¤§é•¿åº¦çš„ç›¸åŒå‰ç¼€åç¼€ï¼‰ã€‚</p><p>â€‹æ¢è¨€ä¹‹ï¼Œå¯¹äºç»™å®šçš„æ¨¡å¼ä¸²ï¼šABCDABDï¼Œå®ƒçš„æœ€å¤§é•¿åº¦è¡¨åŠnext æ•°ç»„åˆ†åˆ«å¦‚ä¸‹ï¼š</p><p>â€‹ <img src="20140728110939595" alt="img" style="zoom:80%;" /></p><p>â€‹æ ¹æ®æœ€å¤§é•¿åº¦è¡¨æ±‚å‡ºäº†next æ•°ç»„åï¼Œä»è€Œæœ‰</p><blockquote><p>â€‹å¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šå¤±é…å­—ç¬¦æ‰€åœ¨ä½ç½® - å¤±é…å­—ç¬¦å¯¹åº”çš„next å€¼</p></blockquote><p>è€Œåï¼Œä½ ä¼šå‘ç°ï¼Œæ— è®ºæ˜¯åŸºäºã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹çš„åŒ¹é…ï¼Œè¿˜æ˜¯åŸºäºnext æ•°ç»„çš„åŒ¹é…ï¼Œä¸¤è€…å¾—å‡ºæ¥çš„å‘å³ç§»åŠ¨çš„ä½æ•°æ˜¯ä¸€æ ·çš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºï¼š</p><ul><li>æ ¹æ®ã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹ï¼Œå¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•° &#x3D; å·²ç»åŒ¹é…çš„å­—ç¬¦æ•° - å¤±é…å­—ç¬¦çš„ä¸Šä¸€ä½å­—ç¬¦çš„æœ€å¤§é•¿åº¦å€¼</li><li>è€Œæ ¹æ®ã€Šnext æ•°ç»„ã€‹ï¼Œå¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•° &#x3D; å¤±é…å­—ç¬¦çš„ä½ç½® - å¤±é…å­—ç¬¦å¯¹åº”çš„next å€¼<br>å…¶ä¸­ï¼Œä»0å¼€å§‹è®¡æ•°æ—¶ï¼Œå¤±é…å­—ç¬¦çš„ä½ç½® &#x3D; å·²ç»åŒ¹é…çš„å­—ç¬¦æ•°ï¼ˆå¤±é…å­—ç¬¦ä¸è®¡æ•°ï¼‰ï¼Œè€Œå¤±é…å­—ç¬¦å¯¹åº”çš„next å€¼ &#x3D; å¤±é…å­—ç¬¦çš„ä¸Šä¸€ä½å­—ç¬¦çš„æœ€å¤§é•¿åº¦å€¼ï¼Œä¸¤ç›¸æ¯”è¾ƒï¼Œç»“æœå¿…ç„¶å®Œå…¨ä¸€è‡´ã€‚</li></ul><p>æ‰€ä»¥ï¼Œä½ å¯ä»¥æŠŠã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹çœ‹åšæ˜¯next æ•°ç»„çš„é›å½¢ï¼Œç”šè‡³å°±æŠŠå®ƒå½“åšnext æ•°ç»„ä¹Ÿæ˜¯å¯ä»¥çš„ï¼ŒåŒºåˆ«ä¸è¿‡æ˜¯æ€ä¹ˆç”¨çš„é—®é¢˜ã€‚</p><h5 id="é€šè¿‡ä»£ç é€’æ¨è®¡ç®—next-æ•°ç»„"><a href="#é€šè¿‡ä»£ç é€’æ¨è®¡ç®—next-æ•°ç»„" class="headerlink" title="é€šè¿‡ä»£ç é€’æ¨è®¡ç®—next æ•°ç»„*"></a>é€šè¿‡ä»£ç é€’æ¨è®¡ç®—next æ•°ç»„*</h5><p>åŸºäºä¹‹å‰çš„ç†è§£ï¼Œå¯çŸ¥è®¡ç®—next æ•°ç»„çš„æ–¹æ³•å¯ä»¥é‡‡ç”¨é€’æ¨ï¼š</p><ul><li><p>å¦‚æœå¯¹äºå€¼kï¼Œå·²æœ‰p0 p1, â€¦, pk-1 &#x3D; pj-k pj-k+1, â€¦, pj-1ï¼Œç›¸å½“äºnext[j] &#x3D; kã€‚</p><ul><li><p>æ­¤æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿç©¶å…¶æœ¬è´¨ï¼Œnext[j] &#x3D; k ä»£è¡¨p[j] ä¹‹å‰çš„æ¨¡å¼ä¸²å­ä¸²ä¸­ï¼Œæœ‰é•¿åº¦ä¸ºk çš„ç›¸åŒå‰ç¼€å’Œåç¼€ã€‚æœ‰äº†è¿™ä¸ªnext æ•°ç»„ï¼Œåœ¨KMPåŒ¹é…ä¸­ï¼Œå½“æ¨¡å¼ä¸²ä¸­j å¤„çš„å­—ç¬¦å¤±é…æ—¶ï¼Œä¸‹ä¸€æ­¥ç”¨next[j]å¤„çš„å­—ç¬¦ç»§ç»­è·Ÿæ–‡æœ¬ä¸²åŒ¹é…ï¼Œç›¸å½“äºæ¨¡å¼ä¸²å‘å³ç§»åŠ¨j - next[j] ä½ã€‚</p><blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹å›¾ï¼Œæ ¹æ®æ¨¡å¼ä¸² â€œABCDABDâ€ çš„next æ•°ç»„å¯çŸ¥å¤±é…ä½ç½®çš„å­—ç¬¦Då¯¹åº”çš„next å€¼ä¸º2ï¼Œä»£è¡¨å­—ç¬¦Då‰æœ‰é•¿åº¦ä¸º2çš„ç›¸åŒå‰ç¼€å’Œåç¼€ï¼ˆè¿™ä¸ªç›¸åŒçš„å‰ç¼€åç¼€å³ä¸ºâ€œABâ€ï¼‰ï¼Œå¤±é…åï¼Œæ¨¡å¼ä¸²éœ€è¦å‘å³ç§»åŠ¨j - next [j] &#x3D; 6 - 2 &#x3D;4ä½ã€‚</p> <img src="20140721223809617-1664502783904" alt="img" style="zoom: 67%;" /><p>å‘å³ç§»åŠ¨4ä½åï¼Œæ¨¡å¼ä¸²ä¸­çš„å­—ç¬¦Cç»§ç»­è·Ÿæ–‡æœ¬ä¸²åŒ¹é…ã€‚</p> <img src="20140721223539765-1664502831947" alt="img" style="zoom:67%;" /></blockquote></li></ul></li><li><p>ä¸‹é¢çš„é—®é¢˜æ˜¯ï¼šå·²çŸ¥next [0, â€¦, j]ï¼Œå¦‚ä½•æ±‚å‡ºnext [j + 1]å‘¢ï¼Ÿ</p></li><li><p>å¯¹äºPçš„å‰j+1ä¸ªåºåˆ—å­—ç¬¦ï¼š</p><ul><li><p>è‹¥p[k] &#x3D;&#x3D; p[j]ï¼Œåˆ™next[j + 1 ] &#x3D; next [j] + 1 &#x3D; k + 1ï¼›</p></li><li><p>è‹¥p[k ] â‰  p[j]ï¼Œå¦‚æœæ­¤æ—¶p[ next[k] ] &#x3D;&#x3D; p[j ]ï¼Œåˆ™next[ j + 1 ] &#x3D;  next[k] + 1ï¼Œå¦åˆ™ç»§ç»­é€’å½’å‰ç¼€ç´¢å¼•k &#x3D; next[k]ï¼Œè€Œåé‡å¤æ­¤è¿‡ç¨‹ã€‚ ç›¸å½“äºåœ¨å­—ç¬¦p[j+1]ä¹‹å‰ä¸å­˜åœ¨é•¿åº¦ä¸ºk+1çš„å‰ç¼€â€p0 p1, â€¦, pk-1 pkâ€è·Ÿåç¼€â€œpj-k pj-k+1, â€¦, pj-1 pjâ€ç›¸ç­‰ï¼Œé‚£ä¹ˆæ˜¯å¦å¯èƒ½å­˜åœ¨å¦ä¸€ä¸ªå€¼t+1 &lt; k+1ï¼Œä½¿å¾—é•¿åº¦æ›´å°çš„å‰ç¼€ â€œp0 p1, â€¦, pt-1 ptâ€ ç­‰äºé•¿åº¦æ›´å°çš„åç¼€ â€œpj-t pj-t+1, â€¦, pj-1 pjâ€ å‘¢ï¼Ÿå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªt+1 ä¾¿æ˜¯next[ j+1]çš„å€¼ï¼Œæ­¤ç›¸å½“äºåˆ©ç”¨å·²ç»æ±‚å¾—çš„next æ•°ç»„ï¼ˆnext [0, â€¦, k, â€¦, j]ï¼‰è¿›è¡ŒPä¸²å‰ç¼€è·ŸPä¸²åç¼€çš„åŒ¹é…ã€‚</p></li><li><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡å®šç»™å®šæ¨¡å¼ä¸²ABCDABCEï¼Œä¸”å·²çŸ¥next [j] &#x3D; kï¼ˆç›¸å½“äºâ€œp0 pk-1â€ &#x3D; â€œpj-k pj-1â€ &#x3D; ABï¼Œå¯ä»¥çœ‹å‡ºkä¸º2ï¼‰ï¼Œç°è¦æ±‚next [j + 1]ç­‰äºå¤šå°‘ï¼Ÿå› ä¸ºpk &#x3D; pj &#x3D; Cï¼Œæ‰€ä»¥next[j + 1] &#x3D; next[j] + 1 &#x3D; k + 1ï¼ˆå¯ä»¥çœ‹å‡ºnext[j + 1] &#x3D; 3ï¼‰ã€‚ä»£è¡¨å­—ç¬¦Eå‰çš„æ¨¡å¼ä¸²ä¸­ï¼Œæœ‰é•¿åº¦k+1 çš„ç›¸åŒå‰ç¼€åç¼€ã€‚</p> <img src="20140729182154066" alt="img" style="zoom:80%;" /></li><li><p>ä½†å¦‚æœpk !&#x3D; pj å‘¢ï¼Ÿè¯´æ˜â€œp0 pk-1 pkâ€  â‰  â€œpj-k pj-1 pjâ€ã€‚æ¢è¨€ä¹‹ï¼Œå½“pk !&#x3D; pjåï¼Œå­—ç¬¦Eå‰æœ‰å¤šå¤§é•¿åº¦çš„ç›¸åŒå‰ç¼€åç¼€å‘¢ï¼Ÿå¾ˆæ˜æ˜¾ï¼Œå› ä¸ºCä¸åŒäºDï¼Œæ‰€ä»¥ ABC è·Ÿ ABD ä¸ç›¸åŒï¼Œå³å­—ç¬¦Eå‰çš„æ¨¡å¼ä¸²æ²¡æœ‰é•¿åº¦ä¸º k+1 çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œä¹Ÿå°±ä¸èƒ½å†ç®€å•çš„ä»¤ï¼šnext[j + 1] &#x3D; next[j] + 1 ã€‚æ‰€ä»¥ï¼Œå’±ä»¬åªèƒ½å»å¯»æ‰¾é•¿åº¦æ›´çŸ­ä¸€ç‚¹çš„ç›¸åŒå‰ç¼€åç¼€ã€‚</p> <img src="20140729181940812" alt="img" style="zoom:80%;" /><p>â€‹ç»“åˆä¸Šå›¾æ¥è®²ï¼Œè‹¥èƒ½åœ¨å‰ç¼€â€œ p0 pk-1 pk â€ ä¸­ä¸æ–­çš„é€’å½’å‰ç¼€ç´¢å¼•k &#x3D; next [k]ï¼Œæ‰¾åˆ°ä¸€ä¸ªå­—ç¬¦pkâ€™ ä¹Ÿä¸ºDï¼Œä»£è¡¨pkâ€™ &#x3D; pjï¼Œä¸”æ»¡è¶³p0 pkâ€™-1 pkâ€™ &#x3D; pj-kâ€™ pj-1 pjï¼Œåˆ™æœ€å¤§ç›¸åŒçš„å‰ç¼€åç¼€é•¿åº¦ä¸ºkâ€™ + 1ï¼Œä»è€Œnext [j + 1] &#x3D; kâ€™ + 1 &#x3D; next [kâ€™ ] + 1ã€‚å¦åˆ™å‰ç¼€ä¸­æ²¡æœ‰Dï¼Œåˆ™ä»£è¡¨æ²¡æœ‰ç›¸åŒçš„å‰ç¼€åç¼€ï¼Œnext [j + 1] &#x3D; 0ã€‚</p><p>â€‹é‚£ä¸ºä½•é€’å½’å‰ç¼€ç´¢å¼•k &#x3D; next[k]ï¼Œå°±èƒ½æ‰¾åˆ°é•¿åº¦æ›´çŸ­çš„ç›¸åŒå‰ç¼€åç¼€å‘¢ï¼Ÿè¿™åˆå½’æ ¹åˆ°nextæ•°ç»„çš„å«ä¹‰ã€‚æˆ‘ä»¬æ‹¿å‰ç¼€ p0 pk-1 pk å»è·Ÿåç¼€pj-k pj-1 pjåŒ¹é…ï¼Œå¦‚æœpk è·Ÿpj å¤±é…ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç”¨p[next[k]] å»è·Ÿpj ç»§ç»­åŒ¹é…ï¼Œå¦‚æœp[ next[k] ]è·Ÿpjè¿˜æ˜¯ä¸åŒ¹é…ï¼Œåˆ™éœ€è¦å¯»æ‰¾é•¿åº¦æ›´çŸ­çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œå³ä¸‹ä¸€æ­¥ç”¨p[ next[ next[k] ] ]å»è·ŸpjåŒ¹é…ã€‚æ­¤è¿‡ç¨‹ç›¸å½“äºæ¨¡å¼ä¸²çš„è‡ªæˆ‘åŒ¹é…ï¼Œæ‰€ä»¥ä¸æ–­çš„é€’å½’k &#x3D; next[k]ï¼Œç›´åˆ°è¦ä¹ˆæ‰¾åˆ°é•¿åº¦æ›´çŸ­çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œè¦ä¹ˆæ²¡æœ‰é•¿åº¦æ›´çŸ­çš„ç›¸åŒå‰ç¼€åç¼€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <img src="20150812214857858" alt="img" style="zoom: 50%;" /><p><strong>ä¸ªäººç†è§£ï¼š</strong>å‰é¢å·²ç»åŒ¹é…ä¸Šçš„å‰åç¼€æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤åªéœ€è¦åœ¨å‰ç¼€é‡Œæ‰¾åˆ°ç›¸åº”çš„å…¬å…±å‰åç¼€å³å¯</p><p>è¯¦ç»†ç†è§£å¯è§ â€œå¿«é€Ÿæ±‚nextæ•°ç»„â€</p></li><li><p>æ‰€ä»¥ï¼Œå› æœ€ç»ˆåœ¨å‰ç¼€ABCä¸­æ²¡æœ‰æ‰¾åˆ°Dï¼Œæ•…Eçš„next å€¼ä¸º0ï¼š</p></li></ul></li></ul><p>â€‹ç»™å®šæ¨¡å¼ä¸²DABCDABDEï¼Œæˆ‘ä»¬å¾ˆé¡ºåˆ©çš„æ±‚å¾—å­—ç¬¦Dä¹‹å‰çš„â€œDABCDABâ€çš„å„ä¸ªå­ä¸²çš„æœ€é•¿ç›¸åŒå‰ç¼€åç¼€çš„é•¿åº¦åˆ†åˆ«ä¸º0 0 0 0 1 2 3ï¼Œä½†å½“éå†åˆ°å­—ç¬¦Dï¼Œè¦æ±‚åŒ…æ‹¬Dåœ¨å†…çš„â€œDABCDABDâ€æœ€é•¿ç›¸åŒå‰ç¼€åç¼€æ—¶ï¼Œæˆ‘ä»¬å‘ç°pjå¤„çš„å­—ç¬¦Dè·Ÿpkå¤„çš„å­—ç¬¦Cä¸ä¸€æ ·ï¼Œæ¢è¨€ä¹‹ï¼Œå‰ç¼€DABCçš„æœ€åä¸€ä¸ªå­—ç¬¦C è·Ÿåç¼€DABDçš„æœ€åä¸€ä¸ªå­—ç¬¦Dä¸ç›¸åŒï¼Œæ‰€ä»¥ä¸å­˜åœ¨é•¿åº¦ä¸º4çš„ç›¸åŒå‰ç¼€åç¼€ã€‚</p><p>â€‹æ€ä¹ˆåŠå‘¢ï¼Ÿæ—¢ç„¶æ²¡æœ‰é•¿åº¦ä¸º4çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œå’±ä»¬å¯ä»¥å¯»æ‰¾é•¿åº¦çŸ­ç‚¹çš„ç›¸åŒå‰ç¼€åç¼€ï¼Œæœ€ç»ˆï¼Œå› åœ¨p0å¤„å‘ç°ä¹Ÿæœ‰ä¸ªå­—ç¬¦Dï¼Œp0 &#x3D; pjï¼Œæ‰€ä»¥p[j]å¯¹åº”çš„é•¿åº¦å€¼ä¸º1ï¼Œç›¸å½“äºEå¯¹åº”çš„next å€¼ä¸º1ï¼ˆå³å­—ç¬¦Eä¹‹å‰çš„å­—ç¬¦ä¸²â€œDABCDABDâ€ä¸­æœ‰é•¿åº¦ä¸º1çš„ç›¸åŒå‰ç¼€å’Œåç¼€ï¼‰ã€‚</p><p>ç»¼ä¸Šï¼Œå¯ä»¥é€šè¿‡é€’æ¨æ±‚å¾—next æ•°ç»„ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GetNext</span><span class="hljs-params">(<span class="hljs-type">char</span>* p,<span class="hljs-type">int</span> next[])</span></span>&#123;<br><span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br>next[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br><span class="hljs-type">int</span> k = <span class="hljs-number">-1</span>;<br><span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (j &lt; pLen - <span class="hljs-number">1</span>)&#123;<br><span class="hljs-comment">//p[k]è¡¨ç¤ºå‰ç¼€ï¼Œp[j]è¡¨ç¤ºåç¼€</span><br><span class="hljs-keyword">if</span> (k == <span class="hljs-number">-1</span> || p[j] == p[k]) &#123;<br>++k;<br>++j;<br>next[j] = k;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>k = next[k];<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="åŸºäºã€Šnext-æ•°ç»„ã€‹åŒ¹é…"><a href="#åŸºäºã€Šnext-æ•°ç»„ã€‹åŒ¹é…" class="headerlink" title="åŸºäºã€Šnext æ•°ç»„ã€‹åŒ¹é…"></a>åŸºäºã€Šnext æ•°ç»„ã€‹åŒ¹é…</h5><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥åŸºäºnext æ•°ç»„è¿›è¡ŒåŒ¹é…ã€‚</p> <img src="20140721231622000" alt="img" style="zoom:80%;" /><p>è¿˜æ˜¯ç»™å®šæ–‡æœ¬ä¸²â€œBBC ABCDAB ABCDABCDABDEâ€ï¼Œå’Œæ¨¡å¼ä¸²â€œABCDABDâ€ï¼Œç°åœ¨è¦æ‹¿æ¨¡å¼ä¸²å»è·Ÿæ–‡æœ¬ä¸²åŒ¹é…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <img src="20140723224710203-1664503719079" alt="img" style="zoom:50%;" /><p>åœ¨æ­£å¼åŒ¹é…ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ¥å†æ¬¡å›é¡¾ä¸‹ä¸Šæ–‡2.1èŠ‚æ‰€è¿°çš„KMPç®—æ³•çš„åŒ¹é…æµç¨‹ï¼š</p><ul><li>å‡è®¾ç°åœ¨æ–‡æœ¬ä¸²SåŒ¹é…åˆ° i ä½ç½®ï¼Œæ¨¡å¼ä¸²PåŒ¹é…åˆ° j ä½ç½®<ul><li>å¦‚æœj &#x3D; -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] &#x3D;&#x3D; P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++ï¼Œç»§ç»­åŒ¹é…ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼›</li><li>å¦‚æœj !&#x3D; -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] !&#x3D; P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj &#x3D; next[j]ã€‚æ­¤ä¸¾æ„å‘³ç€å¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²Pç›¸å¯¹äºæ–‡æœ¬ä¸²Så‘å³ç§»åŠ¨äº†j - next [j] ä½ã€‚</li></ul></li><li>æ¢è¨€ä¹‹ï¼Œå½“åŒ¹é…å¤±è´¥æ—¶ï¼Œæ¨¡å¼ä¸²å‘å³ç§»åŠ¨çš„ä½æ•°ä¸ºï¼šå¤±é…å­—ç¬¦æ‰€åœ¨ä½ç½® - å¤±é…å­—ç¬¦å¯¹åº”çš„next å€¼ï¼Œå³ç§»åŠ¨çš„å®é™…ä½æ•°ä¸ºï¼šj - next[j]ï¼Œä¸”æ­¤å€¼å¤§äºç­‰äº1ã€‚â€</li></ul><ol><li>æœ€å¼€å§‹åŒ¹é…æ—¶</li></ol><ul><li><p>P[0]è·ŸS[0]åŒ¹é…å¤±è´¥<br>æ‰€ä»¥æ‰§è¡Œâ€œå¦‚æœj !&#x3D; -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] !&#x3D; P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj &#x3D; next[j]â€ï¼Œæ‰€ä»¥j &#x3D; -1ï¼Œæ•…è½¬è€Œæ‰§è¡Œâ€œå¦‚æœj &#x3D; -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] &#x3D;&#x3D; P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++â€ï¼Œå¾—åˆ°i &#x3D; 1ï¼Œj &#x3D; 0ï¼Œå³P[0]ç»§ç»­è·ŸS[1]åŒ¹é…ã€‚</p></li><li><p>P[0]è·ŸS[1]åˆå¤±é…ï¼Œjå†æ¬¡ç­‰äº-1ï¼Œiã€jç»§ç»­è‡ªå¢ï¼Œä»è€ŒP[0]è·ŸS[2]åŒ¹é…ã€‚</p></li><li><p>P[0]è·ŸS[2]å¤±é…åï¼ŒP[0]åˆè·ŸS[3]åŒ¹é…ã€‚</p></li><li><p>P[0]è·ŸS[3]å†å¤±é…ï¼Œç›´åˆ°P[0]è·ŸS[4]åŒ¹é…æˆåŠŸï¼Œå¼€å§‹æ‰§è¡Œæ­¤æ¡æŒ‡ä»¤çš„ååŠæ®µï¼šâ€œå¦‚æœj &#x3D; -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] &#x3D;&#x3D; P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++â€ã€‚</p> <img src="20140726213602848-1664503828241" alt="img" style="zoom:50%;" /></li></ul><ol start="2"><li><p>P[1]è·ŸS[5]åŒ¹é…æˆåŠŸï¼ŒP[2]è·ŸS[6]ä¹ŸåŒ¹é…æˆåŠŸ, â€¦ï¼Œç›´åˆ°å½“åŒ¹é…åˆ°P[6]å¤„çš„å­—ç¬¦Dæ—¶å¤±é…ï¼ˆå³S[10] !&#x3D; P[6]ï¼‰ï¼Œç”±äºP[6]å¤„çš„Då¯¹åº”çš„next å€¼ä¸º2ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥ç”¨P[2]å¤„çš„å­—ç¬¦Cç»§ç»­è·ŸS[10]åŒ¹é…ï¼Œç›¸å½“äºå‘å³ç§»åŠ¨ï¼šj - next[j] &#x3D; 6 - 2 &#x3D;4 ä½ã€‚</p> <img src="20140721223809617-1664503879513" alt="img" style="zoom:50%;" /></li><li><p>å‘å³ç§»åŠ¨4ä½åï¼ŒP[2]å¤„çš„Cå†æ¬¡å¤±é…ï¼Œç”±äºCå¯¹åº”çš„nextå€¼ä¸º<strong>0</strong>ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥ç”¨**P[0]**å¤„çš„å­—ç¬¦ç»§ç»­è·ŸS[10]åŒ¹é…ï¼Œç›¸å½“äºå‘å³ç§»åŠ¨ï¼šj - next[j] &#x3D; 2 - 0 &#x3D; 2 ä½ã€‚</p> <img src="20140721223539765-1664503894803" alt="img" style="zoom:50%;" /></li><li><p>ç§»åŠ¨ä¸¤ä½ä¹‹åï¼ŒA è·Ÿç©ºæ ¼ä¸åŒ¹é…ï¼Œæ¨¡å¼ä¸²åç§»1 ä½ã€‚</p> <img src="20140721223823548-1664503912612" alt="img" style="zoom:50%;" /></li><li><p>P[6]å¤„çš„Då†æ¬¡å¤±é…ï¼Œå› ä¸ºP[6]å¯¹åº”çš„nextå€¼ä¸º<strong>2</strong>ï¼Œæ•…ä¸‹ä¸€æ­¥ç”¨**P[2]**ç»§ç»­è·Ÿæ–‡æœ¬ä¸²åŒ¹é…ï¼Œç›¸å½“äºæ¨¡å¼ä¸²å‘å³ç§»åŠ¨ j - next[j] &#x3D; 6 - 2 &#x3D; 4 ä½ã€‚</p> <img src="20140721223558140-1664503928624" alt="img" style="zoom:50%;" /></li><li><p>åŒ¹é…æˆåŠŸï¼Œè¿‡ç¨‹ç»“æŸã€‚</p> <img src="20140721223611515-1664503944938" alt="img" style="zoom:50%;" /></li></ol><h5 id="Next-æ•°ç»„çš„ä¼˜åŒ–"><a href="#Next-æ•°ç»„çš„ä¼˜åŒ–" class="headerlink" title="Next æ•°ç»„çš„ä¼˜åŒ–"></a>Next æ•°ç»„çš„ä¼˜åŒ–</h5><p>â€‹è¡Œæ–‡è‡³æ­¤ï¼Œå’±ä»¬å…¨é¢äº†è§£äº†æš´åŠ›åŒ¹é…çš„æ€è·¯ã€KMPç®—æ³•çš„åŸç†ã€æµç¨‹ã€æµç¨‹ä¹‹é—´çš„å†…åœ¨é€»è¾‘è”ç³»ï¼Œä»¥åŠnext æ•°ç»„çš„ç®€å•æ±‚è§£ï¼ˆã€Šæœ€å¤§é•¿åº¦è¡¨ã€‹æ•´ä½“å³ç§»ä¸€ä½ï¼Œç„¶ååˆå€¼èµ‹ä¸º-1ï¼‰å’Œä»£ç æ±‚è§£ï¼Œæœ€ååŸºäºã€Šnext æ•°ç»„ã€‹çš„åŒ¹é…ï¼Œçœ‹ä¼¼æ´‹æ´‹æ´’æ´’ï¼Œæ¸…æ™°é€å½»ï¼Œä½†ä»¥ä¸Šå¿½ç•¥äº†ä¸€ä¸ªå°é—®é¢˜ã€‚</p><p>â€‹æ¯”å¦‚ï¼Œå¦‚æœç”¨ä¹‹å‰çš„next æ•°ç»„æ–¹æ³•æ±‚æ¨¡å¼ä¸²â€œababâ€çš„next æ•°ç»„ï¼Œå¯å¾—å…¶next æ•°ç»„ä¸º-1 0 0 1ï¼ˆ0 0 1 2æ•´ä½“å³ç§»ä¸€ä½ï¼Œåˆå€¼èµ‹ä¸º-1ï¼‰ï¼Œå½“å®ƒè·Ÿä¸‹å›¾ä¸­çš„æ–‡æœ¬ä¸²å»åŒ¹é…çš„æ—¶å€™ï¼Œå‘ç°bè·Ÿcå¤±é…ï¼Œäºæ˜¯æ¨¡å¼ä¸²å³ç§» j - next[j] &#x3D; 3 - 1 &#x3D;2ä½ã€‚</p> <img src="aHR0cDovL2hpLmNzZG4ubmV0L2F0dGFjaG1lbnQvMjAxMTA2LzE0LzgzOTQzMjNfMTMwODA3NTg1OVpmdWUuanBn.png" alt="img" style="zoom: 67%;" /><p>â€‹å³ç§»2ä½åï¼Œbåˆè·Ÿcå¤±é…ã€‚äº‹å®ä¸Šï¼Œå› ä¸ºåœ¨ä¸Šä¸€æ­¥çš„åŒ¹é…ä¸­ï¼Œå·²ç»å¾—çŸ¥p[3] &#x3D; bï¼Œä¸s[3] &#x3D; cå¤±é…ï¼Œè€Œå³ç§»ä¸¤ä½ä¹‹åï¼Œè®©p[ next[3] ] &#x3D; p[1] &#x3D; b å†è·Ÿs[3]åŒ¹é…æ—¶ï¼Œå¿…ç„¶å¤±é…ã€‚é—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿ</p> <img src="aHR0cDovL2hpLmNzZG4ubmV0L2F0dGFjaG1lbnQvMjAxMTA2LzE0LzgzOTQzMjNfMTMwODA3NTg1OTFreVYuanBn.png" alt="img" style="zoom:67%;" /><p>â€‹é—®é¢˜å‡ºåœ¨ä¸è¯¥å‡ºç° p[j] &#x3D; p[ next[j] ] ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç†ç”±æ˜¯ï¼šå½“p[j] !&#x3D; s[i] æ—¶ï¼Œä¸‹æ¬¡åŒ¹é…å¿…ç„¶æ˜¯p[ next [j]] è·Ÿs[i]åŒ¹é…ï¼Œå¦‚æœp[j] &#x3D; p[ next[j] ]ï¼Œå¿…ç„¶å¯¼è‡´åä¸€æ­¥åŒ¹é…å¤±è´¥ï¼ˆå› ä¸ºp[j]å·²ç»è·Ÿs[i]å¤±é…ï¼Œç„¶åä½ è¿˜ç”¨è·Ÿp[j]ç­‰åŒçš„å€¼p[next[j]]å»è·Ÿs[i]åŒ¹é…ï¼Œå¾ˆæ˜¾ç„¶ï¼Œå¿…ç„¶å¤±é…ï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½å…è®¸p[j] &#x3D; p[ next[j ]]ã€‚å¦‚æœå‡ºç°äº†p[j] &#x3D; p[ next[j] ]å’‹åŠå‘¢ï¼Ÿå¦‚æœå‡ºç°äº†ï¼Œåˆ™éœ€è¦å†æ¬¡é€’å½’ï¼Œå³ä»¤next[j] &#x3D; next[ next[j] ]ã€‚</p><p>æ‰€ä»¥ï¼Œå’±ä»¬å¾—ä¿®æ”¹ä¸‹æ±‚next æ•°ç»„çš„ä»£ç ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//ä¼˜åŒ–è¿‡åçš„next æ•°ç»„æ±‚æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GetNextval</span><span class="hljs-params">(<span class="hljs-type">char</span>* p, <span class="hljs-type">int</span> next[])</span></span>&#123;<br><span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br>next[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br><span class="hljs-type">int</span> k = <span class="hljs-number">-1</span>;<br><span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (j &lt; pLen - <span class="hljs-number">1</span>)&#123;<br><span class="hljs-comment">//p[k]è¡¨ç¤ºå‰ç¼€å­—ç¬¦ï¼Œp[j]è¡¨ç¤ºåç¼€å­—ç¬¦  </span><br><span class="hljs-keyword">if</span>( k == <span class="hljs-number">-1</span> || p[j] == p[k] )&#123;<br>            <span class="hljs-comment">//ç–‘æƒ‘ï¼šk==-1æ—¶ä»€ä¹ˆæƒ…å†µï¼Ÿ</span><br>            <span class="hljs-comment">//ç­”ç–‘ï¼šk==-1ä»£è¡¨å‰é¢æ²¡æœ‰å…¬å…±å‰åç¼€äº†</span><br>            ++k;<br>            ++j;<br>            <span class="hljs-comment">//è¾ƒä¹‹å‰nextæ•°ç»„æ±‚æ³•ï¼Œæ”¹åŠ¨åœ¨ä¸‹é¢4è¡Œ</span><br><span class="hljs-keyword">if</span> (p[j] == p[k])<br>                <span class="hljs-comment">//å› ä¸ºä¸èƒ½å‡ºç°p[j] = p[next[j]]ï¼Œ</span><br>                <span class="hljs-comment">//æ‰€ä»¥å½“å‡ºç°æ—¶éœ€è¦ç»§ç»­é€’å½’ï¼Œk = next[k] = next[next[k]]</span><br>next[j] = next[k];<br><span class="hljs-keyword">else</span><br>next[j] = k;   <span class="hljs-comment">//ä¹‹å‰åªæœ‰è¿™ä¸€è¡Œ</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            k = next[k];<br>        &#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹åˆ©ç”¨ä¼˜åŒ–è¿‡åçš„next æ•°ç»„æ±‚æ³•ï¼Œå¯çŸ¥æ¨¡å¼ä¸²â€œababâ€çš„æ–°nextæ•°ç»„ä¸ºï¼š-1 0 -1 0ã€‚å¯èƒ½æœ‰äº›è¯»è€…ä¼šé—®ï¼šåŸå§‹next æ•°ç»„æ˜¯å‰ç¼€åç¼€æœ€é•¿å…¬å…±å…ƒç´ é•¿åº¦å€¼å³ç§»ä¸€ä½ï¼Œ ç„¶ååˆå€¼èµ‹ä¸º-1è€Œå¾—ï¼Œé‚£ä¹ˆä¼˜åŒ–åçš„next æ•°ç»„å¦‚ä½•å¿«é€Ÿå¿ƒç®—å‡ºå‘¢ï¼Ÿå®é™…ä¸Šï¼Œåªè¦æ±‚å‡ºäº†åŸå§‹next æ•°ç»„ï¼Œä¾¿å¯ä»¥æ ¹æ®åŸå§‹next æ•°ç»„å¿«é€Ÿæ±‚å‡ºä¼˜åŒ–åçš„next æ•°ç»„ã€‚è¿˜æ˜¯ä»¥ababä¸ºä¾‹ï¼Œå¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š</p> <img src="20140801160510832-1664504307010" alt="img" style="zoom:80%;" /><p>â€‹åªè¦å‡ºç°äº†p[next[j]] &#x3D; p[j]çš„æƒ…å†µï¼Œåˆ™æŠŠnext[j]çš„å€¼å†æ¬¡é€’å½’ã€‚ä¾‹å¦‚åœ¨æ±‚æ¨¡å¼ä¸²â€œababâ€çš„ç¬¬2ä¸ªaçš„nextå€¼æ—¶ï¼Œå¦‚æœæ˜¯æœªä¼˜åŒ–çš„nextå€¼çš„è¯ï¼Œç¬¬2ä¸ªaå¯¹åº”çš„nextå€¼ä¸º0ï¼Œç›¸å½“äºç¬¬2ä¸ªaå¤±é…æ—¶ï¼Œä¸‹ä¸€æ­¥åŒ¹é…æ¨¡å¼ä¸²ä¼šç”¨p[0]å¤„çš„aå†æ¬¡è·Ÿæ–‡æœ¬ä¸²åŒ¹é…ï¼Œå¿…ç„¶å¤±é…ã€‚æ‰€ä»¥æ±‚ç¬¬2ä¸ªaçš„nextå€¼æ—¶ï¼Œéœ€è¦å†æ¬¡é€’å½’ï¼šnext[2] &#x3D; next[ next[2] ] &#x3D; next[0] &#x3D; -1ï¼ˆæ­¤åï¼Œæ ¹æ®ä¼˜åŒ–åçš„æ–°nextå€¼å¯çŸ¥ï¼Œç¬¬2ä¸ªaå¤±é…æ—¶ï¼Œæ‰§è¡Œâ€œå¦‚æœj &#x3D; -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] &#x3D;&#x3D; P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++ï¼Œç»§ç»­åŒ¹é…ä¸‹ä¸€ä¸ªå­—ç¬¦â€ï¼‰ï¼ŒåŒç†ï¼Œç¬¬2ä¸ªbå¯¹åº”çš„nextå€¼ä¸º0ã€‚</p><p>â€‹å¯¹äºä¼˜åŒ–åçš„nextæ•°ç»„å¯ä»¥å‘ç°ä¸€ç‚¹ï¼šå¦‚æœæ¨¡å¼ä¸²çš„å‰åç¼€ç›¸åŒï¼Œé‚£ä¹ˆå®ƒä»¬çš„nextå€¼ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œä¾‹å¦‚æ¨¡å¼ä¸²abcabcï¼Œå®ƒçš„å‰ç¼€åç¼€éƒ½æ˜¯abcï¼Œå…¶ä¼˜åŒ–åçš„nextæ•°ç»„ä¸ºï¼š-1 0 0 -1 0 0ï¼Œå‰ç¼€åç¼€abcçš„nextå€¼éƒ½ä¸º-1 0 0ã€‚</p><p>ç„¶åå¼•ç”¨ä¸‹ä¹‹å‰3.1èŠ‚çš„KMPä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">KmpSearch</span><span class="hljs-params">(<span class="hljs-type">char</span>* s, <span class="hljs-type">char</span>* p)</span></span>&#123;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> sLen = <span class="hljs-built_in">strlen</span>(s);<br><span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br><span class="hljs-keyword">while</span> (i &lt; sLen &amp;&amp; j &lt; pLen)&#123;<br><span class="hljs-comment">//å¦‚æœj = -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] == P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++    </span><br><span class="hljs-keyword">if</span> (j == <span class="hljs-number">-1</span> || s[i] == p[j])&#123;<br>i++;<br>j++;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-comment">//å¦‚æœj != -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] != P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj = next[j]    </span><br><span class="hljs-comment">//next[j]å³ä¸ºjæ‰€å¯¹åº”çš„nextå€¼      </span><br>j = next[j];<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (j == pLen)<br><span class="hljs-keyword">return</span> i - j;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œå’±ä»¬ç»§ç»­æ‹¿ä¹‹å‰çš„ä¾‹å­è¯´æ˜ï¼Œæ•´ä¸ªåŒ¹é…è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>S[3]ä¸P[3]åŒ¹é…å¤±è´¥ã€‚</p> <img src="aHR0cDovL2hpLmNzZG4ubmV0L2F0dGFjaG1lbnQvMjAxMTA2LzE0LzgzOTQzMjNfMTMwODA3NTg1NzE0bFcuanBn.png" alt="img" style="zoom: 67%;" /></li><li><p>S[3]ä¿æŒä¸å˜ï¼ŒPçš„ä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®æ˜¯P[next[3]]ï¼Œè€Œnext[3]&#x3D;0ï¼Œæ‰€ä»¥P[next[3]]&#x3D;P[0]ä¸S[3]åŒ¹é…ã€‚</p> <img src="aHR0cDovL2hpLmNzZG4ubmV0L2F0dGFjaG1lbnQvMjAxMTA2LzE0LzgzOTQzMjNfMTMwODA3NTg1NzEzOTAuanBn.png" alt="img" style="zoom:67%;" /></li><li><p>ç”±äºä¸Šä¸€æ­¥éª¤ä¸­P[0]ä¸S[3]è¿˜æ˜¯ä¸åŒ¹é…ã€‚æ­¤æ—¶i&#x3D;3ï¼Œj&#x3D;next [0]&#x3D;-1ï¼Œç”±äºæ»¡è¶³æ¡ä»¶j&#x3D;&#x3D;-1ï¼Œæ‰€ä»¥æ‰§è¡Œâ€œ++i, ++jâ€ï¼Œå³ä¸»ä¸²æŒ‡é’ˆä¸‹ç§»ä¸€ä¸ªä½ç½®ï¼ŒP[0]ä¸S[4]å¼€å§‹åŒ¹é…ã€‚æœ€åj&#x3D;&#x3D;pLenï¼Œè·³å‡ºå¾ªç¯ï¼Œè¾“å‡ºç»“æœi - j &#x3D; 4ï¼ˆå³æ¨¡å¼ä¸²ç¬¬ä¸€æ¬¡åœ¨æ–‡æœ¬ä¸²ä¸­å‡ºç°çš„ä½ç½®ï¼‰ï¼ŒåŒ¹é…æˆåŠŸï¼Œç®—æ³•ç»“æŸã€‚</p> <img src="aHR0cDovL2hpLmNzZG4ubmV0L2F0dGFjaG1lbnQvMjAxMTA2LzE0LzgzOTQzMjNfMTMwODA3NTg1N2U0MHUuanBn.png" alt="img" style="zoom:67%;" /></li></ol><h4 id="å¿«é€Ÿæ±‚nextæ•°ç»„"><a href="#å¿«é€Ÿæ±‚nextæ•°ç»„" class="headerlink" title="å¿«é€Ÿæ±‚nextæ•°ç»„*"></a>å¿«é€Ÿæ±‚nextæ•°ç»„*</h4><p>â€‹å¿«é€Ÿæ„å»ºnextæ•°ç»„ï¼Œæ˜¯KMPç®—æ³•çš„ç²¾é«“æ‰€åœ¨ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯â€œ<strong>Pè‡ªå·±ä¸è‡ªå·±åšåŒ¹é…</strong>â€ã€‚</p><p><strong>å›é¡¾nextæ•°ç»„çš„å®Œæ•´å®šä¹‰ï¼š</strong></p><ul><li>å®šä¹‰ â€œk-å‰ç¼€â€ ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„å‰ k ä¸ªå­—ç¬¦ï¼› â€œk-åç¼€â€ ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„å k ä¸ªå­—ç¬¦ã€‚k å¿…é¡»å°äºå­—ç¬¦ä¸²é•¿åº¦ã€‚</li><li>next[x] å®šä¹‰ä¸ºï¼š P[0]~P[x] è¿™ä¸€æ®µå­—ç¬¦ä¸²ï¼Œä½¿å¾—<strong>k-å‰ç¼€æ°ç­‰äºk-åç¼€</strong>çš„æœ€å¤§çš„k.</li></ul><p>â€‹è¿™ä¸ªå®šä¹‰ä¸­ï¼Œä¸çŸ¥ä¸è§‰åœ°å°±åŒ…å«äº†ä¸€ä¸ªåŒ¹é…â€”â€”å‰ç¼€å’Œåç¼€ç›¸ç­‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è€ƒè™‘é‡‡ç”¨é€’æ¨çš„æ–¹å¼æ±‚å‡ºnextæ•°ç»„ã€‚å¦‚æœnext[0], next[1], â€¦ next[x-1]å‡å·²çŸ¥ï¼Œé‚£ä¹ˆå¦‚ä½•æ±‚å‡º next[x] å‘¢ï¼Ÿ</p><p><strong>æ¥åˆ†æƒ…å†µè®¨è®ºï¼š</strong></p><ul><li><p>é¦–å…ˆï¼Œå·²ç»çŸ¥é“äº† next[x-1]ï¼ˆä»¥ä¸‹è®°ä¸ºnowï¼‰ï¼Œå¦‚æœ P[x] ä¸ P[now] ä¸€æ ·ï¼Œé‚£æœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦å°±å¯ä»¥æ‰©å±•ä¸€ä½ï¼Œå¾ˆæ˜æ˜¾ next[x] &#x3D; now + 1. å›¾ç¤ºå¦‚ä¸‹ã€‚</p><img src="v2-6d6a40331cd9e44bfccd27ac5a764618_720w.png" alt="img" style="zoom: 30%;" /></li><li><p>åˆšåˆšè§£å†³äº† P[x] &#x3D; P[now] çš„æƒ…å†µã€‚é‚£å¦‚æœ P[x] ä¸ P[now] ä¸ä¸€æ ·ï¼Œåˆè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>â€‹<strong>å…³é”®ï¼š</strong>å‰é¢å·²ç»åŒ¹é…äº†çš„å‰ç¼€ä¸åç¼€æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤ï¼Œåœ¨æ‰¾æ–°çš„å…¬å…±å‰åç¼€æ—¶ï¼Œåªéœ€åœ¨å‰ç¼€ä¸Šæ‰¾æœ€é•¿å…¬å…±å‰åç¼€å³å¯ã€‚</p><p>â€‹å¦‚å›¾ã€‚é•¿åº¦ä¸º now çš„å­ä¸² A å’Œå­ä¸² B æ˜¯ P[0]<del>P[x-1] ä¸­æœ€é•¿çš„å…¬å…±å‰åç¼€ã€‚å¯æƒœ A å³è¾¹çš„å­—ç¬¦å’Œ B å³è¾¹çš„é‚£ä¸ªå­—ç¬¦ä¸ç›¸ç­‰ï¼Œnext[x]ä¸èƒ½æ”¹æˆ now+1 äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥<strong>ç¼©çŸ­è¿™ä¸ªnow</strong>ï¼ŒæŠŠå®ƒæ”¹æˆå°ä¸€ç‚¹çš„å€¼ï¼Œå†æ¥è¯•è¯• P[x] æ˜¯å¦ç­‰äº P[now].<br>ã€€ã€€nowè¯¥ç¼©å°åˆ°å¤šå°‘å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸æƒ³è®©nowç¼©å°å¤ªå¤šã€‚å› æ­¤æˆ‘ä»¬å†³å®šï¼Œåœ¨ä¿æŒâ€œP[0]</del>P[x-1]çš„now-å‰ç¼€ä»ç„¶ç­‰äºnow-åç¼€â€çš„å‰æä¸‹ï¼Œè®©è¿™ä¸ªæ–°çš„nowå°½å¯èƒ½å¤§ä¸€ç‚¹ã€‚ P[0]~P[x-1] çš„å…¬å…±å‰åç¼€ï¼Œå‰ç¼€ä¸€å®šè½åœ¨ä¸²Aé‡Œé¢ã€åç¼€ä¸€å®šè½åœ¨ä¸²Bé‡Œé¢ã€‚æ¢å¥è¯è®²ï¼šæ¥ä¸‹æ¥nowåº”è¯¥æ”¹æˆï¼šä½¿å¾— <strong>Açš„k-å‰ç¼€</strong>ç­‰äº<strong>Bçš„k-åç¼€</strong> çš„æœ€å¤§çš„k.<br>ã€€ã€€æ‚¨åº”è¯¥å·²ç»æ³¨æ„åˆ°äº†ä¸€ä¸ªéå¸¸å¼ºçš„æ€§è´¨â€”â€”<strong>ä¸²Aå’Œä¸²Bæ˜¯ç›¸åŒçš„</strong>ï¼Bçš„åç¼€ç­‰äºAçš„åç¼€ï¼å› æ­¤ï¼Œä½¿å¾—Açš„k-å‰ç¼€ç­‰äºBçš„k-åç¼€çš„æœ€å¤§çš„kï¼Œå…¶å®å°±æ˜¯ä¸²Açš„æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦ â€”â€” next[now-1]ï¼</p> <img src="v2-c5ff4faaab9c3e13690deb86d8d17d71_720w.webp" alt="img" style="zoom: 67%;" /></li></ul><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç *"></a>å®ç°ä»£ç *</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//Nextçš„æ±‚è§£ ä»£ç 1ï¼ˆæ¥æºCSDNï¼šä»å¤´åˆ°å°¾å½»åº•ç†è§£KMPï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GetNext</span><span class="hljs-params">(<span class="hljs-type">char</span> *p, <span class="hljs-type">int</span> next[])</span></span>&#123;<br>    <span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br>    next[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> k = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(j &lt; pLen<span class="hljs-number">-1</span>)&#123;<br>        <span class="hljs-keyword">if</span>( k == <span class="hljs-number">-1</span> || p[j] == p[k] )&#123;<br>            <span class="hljs-comment">//ç–‘æƒ‘ï¼šk==-1æ—¶ä»€ä¹ˆæƒ…å†µï¼Ÿ</span><br>            <span class="hljs-comment">//ç­”ç–‘ï¼šk==-1ä»£è¡¨å‰é¢æ²¡æœ‰å…¬å…±å‰åç¼€äº†</span><br>            ++k;<br>            ++j;<br>            <span class="hljs-comment">//è¾ƒä¹‹å‰nextæ•°ç»„æ±‚æ³•ï¼Œæ”¹åŠ¨åœ¨ä¸‹é¢4è¡Œ</span><br><span class="hljs-keyword">if</span> (p[j] == p[k])<br>                <span class="hljs-comment">//å› ä¸ºä¸èƒ½å‡ºç°p[j] = p[next[j]]ï¼Œ</span><br>                <span class="hljs-comment">//æ‰€ä»¥å½“å‡ºç°æ—¶éœ€è¦ç»§ç»­é€’å½’ï¼Œk = next[k] = next[next[k]]</span><br>next[j] = next[k];<br><span class="hljs-keyword">else</span><br>next[j] = k;   <span class="hljs-comment">//ä¹‹å‰åªæœ‰è¿™ä¸€è¡Œ</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            k = next[k];<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//å¯¹åº”çš„KMP</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">KmpSearch</span><span class="hljs-params">(<span class="hljs-type">char</span>* s, <span class="hljs-type">char</span>* p)</span></span>&#123;<br>    <span class="hljs-type">int</span> sLen = <span class="hljs-built_in">strlen</span>(s), pLen = <span class="hljs-built_in">strlen</span>(p);<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (i &lt; sLen &amp;&amp; j &lt; pLen)&#123;<br><span class="hljs-keyword">if</span> (j == <span class="hljs-number">-1</span> || s[i] == p[j])&#123;  <br>            <span class="hljs-comment">//ç–‘æƒ‘ï¼š j == -1 å¯¹åº”çš„æƒ…å†µæ—¶ä»€ä¹ˆï¼Ÿ  </span><br>            <span class="hljs-comment">//ç­”ç–‘ï¼šä¸Šä¸€æ¬¡åŒ¹é…å¾—å‡ºæ²¡æœ‰æ²¡æœ‰å…¬å…±å‰åç¼€äº†ï¼Œå³next=0(è¯¥æ–¹æ³•è¡¨ç°ä¸º-1)ï¼Œéœ€è¦så¾€åæ£€æµ‹åŒ¹é…äº†</span><br>            <span class="hljs-comment">//å¦‚æœj = -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] == P[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++ </span><br>i++;<br>j++;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-comment">//å¦‚æœj != -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] != P[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj = next[j]    </span><br><span class="hljs-comment">//next[j]å³ä¸ºjæ‰€å¯¹åº”çš„nextå€¼      </span><br>j = next[j];<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (j == pLen)<br><span class="hljs-keyword">return</span> i - j;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//Nextçš„æ±‚è§£ ä»£ç 2  è¯´æ˜ï¼šå¯¹äºjå’Œkï¼Œç›¸å½“äºkåœ¨å‰ç¼€ï¼Œjåœ¨åç¼€</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetNext</span><span class="hljs-params">(<span class="hljs-type">char</span> *p, <span class="hljs-type">int</span> next[])</span></span>&#123;<br>    next[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; next[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;pLen;j++)&#123;<br>        <span class="hljs-type">int</span> k = next[j];<br>        <span class="hljs-keyword">while</span>(k &amp;&amp; p[k]!=p[j])&#123;  <span class="hljs-comment">//æœ¬è´¨ï¼šåœ¨å‰ç¼€æ‰¾ é™¤å»æœ€åä¸€ä½çš„æœ€é•¿å…±åŒå‰åç¼€</span><br>            k = next[k];<br>        &#125;<br>        next[j+<span class="hljs-number">1</span>] = (p[j]==p[k]) ? k+<span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kmp</span><span class="hljs-params">(<span class="hljs-type">char</span> *s, <span class="hljs-type">char</span> *p)</span></span>&#123;<br>    <span class="hljs-type">int</span> last = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> sLen = <span class="hljs-built_in">strlen</span>(s), pLen = <span class="hljs-built_in">strlen</span>(p);<br>    <span class="hljs-built_in">getFail</span>(p,pLen);<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;slen;i++)&#123;<br>        <span class="hljs-keyword">while</span>( j &amp;&amp; s[i]!=p[j] )  j = next[j];<br>        <span class="hljs-keyword">if</span>(s[i]==p[j])  j++;<br>        <span class="hljs-keyword">if</span>(j==pLen)&#123;<br>            <span class="hljs-keyword">return</span> i-j;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç›¸å…³é¢˜ç›®"><a href="#ç›¸å…³é¢˜ç›®" class="headerlink" title="ç›¸å…³é¢˜ç›®"></a>ç›¸å…³é¢˜ç›®</h4><p><a href="https://acm.hdu.edu.cn/showproblem.php?pid=2087">hdu 2087 å‰ªèŠ±å¸ƒæ¡</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1010</span>;<br><span class="hljs-type">char</span> str[MAXN], pattern[MAXN];<br><span class="hljs-type">int</span> Next[MAXN];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getNext</span><span class="hljs-params">(<span class="hljs-type">char</span>* p)</span> </span>&#123;<br><span class="hljs-type">int</span> pLen = <span class="hljs-built_in">strlen</span>(p);<br>Next[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br><span class="hljs-type">int</span> k = <span class="hljs-number">-1</span>;<br><span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (j &lt; pLen - <span class="hljs-number">1</span>) &#123;<br><span class="hljs-keyword">if</span> (k == <span class="hljs-number">-1</span> || p[j] == p[k]) &#123;<br>++j;<br>++k;<br><span class="hljs-keyword">if</span> (p[j] == p[k]) &#123;<br>Next[j] = Next[k];<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>Next[j] = k;<br>&#125;<br><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>k = Next[k];<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kmp</span><span class="hljs-params">(<span class="hljs-type">char</span>* s, <span class="hljs-type">char</span>* p)</span> </span>&#123;<br><span class="hljs-type">int</span> last = <span class="hljs-number">-1</span>;<br><span class="hljs-built_in">getNext</span>(p);<br><span class="hljs-type">int</span> sLen = <span class="hljs-built_in">strlen</span>(s), pLen = <span class="hljs-built_in">strlen</span>(p);<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (i &lt; sLen) &#123;<br><span class="hljs-keyword">if</span> (j == <span class="hljs-number">-1</span> || s[i] == p[j]) &#123;<br>i++;<br>j++;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>j = Next[j];<br>&#125;<br><span class="hljs-keyword">if</span> (j == pLen &amp;&amp; i - last &gt;= pLen) &#123;<br>cnt++;<br>last = i;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">while</span> (~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, str)) &#123;<br><span class="hljs-keyword">if</span> (str[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;#&#x27;</span>)<br><span class="hljs-keyword">break</span>;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, pattern);<br>cnt = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">kmp</span>(str, pattern);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, cnt);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h2><h3 id="Dijkstra-ç®—æ³•"><a href="#Dijkstra-ç®—æ³•" class="headerlink" title="Dijkstra ç®—æ³•"></a>Dijkstra ç®—æ³•</h3><p><a href="https://zhuanlan.zhihu.com/p/338414118">Dijkstraç®—æ³•è¯¦è§£ é€šä¿—æ˜“æ‡‚ - çŸ¥ä¹ (zhihu.com)</a></p><blockquote><p>Dijkstra ç®—æ³•æ˜¯æ±‚ä¸€ä¸ªå›¾ä¸­ä¸€ä¸ªç‚¹åˆ°å…¶ä»–æ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯å¾„çš„ç®—æ³•</p><p>é˜…è¯»å‰è¯·å…ˆäº†è§£å›¾çš„æ•°æ®ç»“æ„ã€Œé‚»æ¥çŸ©é˜µã€</p></blockquote><p>Dijkstra ç®—æ³•æ˜¯ä¸€ä¸ªåŸºäºã€Œè´ªå¿ƒã€ã€ã€Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€ã€ã€ŒåŠ¨æ€è§„åˆ’ã€æ±‚ä¸€ä¸ªå›¾ä¸­ä¸€ä¸ªç‚¹åˆ°å…¶ä»–æ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯å¾„çš„ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ O(n2)ã€‚</p><h4 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h4><p>æ¯æ¬¡ä» ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€ä¸­ <strong>å–å‡º</strong> è·ç¦»è·ç¦»èµ·ç‚¹ <strong>æœ€å°è·¯å¾„çš„ç‚¹</strong>ï¼Œä»¥è¿™ä¸ªç‚¹ä¸ºæ¡¥æ¢ <strong>åˆ·æ–°</strong>ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€çš„è·ç¦»ï¼ˆçœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œè¯·ç»“åˆæ¡ˆä¾‹ç†è§£ï¼‰</p><h4 id="å›¾è§£æ¡ˆä¾‹åˆ†æ"><a href="#å›¾è§£æ¡ˆä¾‹åˆ†æ" class="headerlink" title="å›¾è§£æ¡ˆä¾‹åˆ†æ"></a>å›¾è§£æ¡ˆä¾‹åˆ†æ</h4><blockquote><p>æ¡ˆä¾‹ï¼šä»¥ A ç‚¹ä¸ºé¡¶ç‚¹ï¼Œæ±‚åˆ°å…¶ä»–ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</p></blockquote><p><img src="/2021/11/25/AlgorithmNote/image-20221111114926574.png" alt="image-20221111114926574"></p><p>é‚»æ¥çŸ©é˜µå›¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[][] graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[][]&#123;<br>&#123;<span class="hljs-number">0</span> , <span class="hljs-number">2</span>, âˆ, <span class="hljs-number">6</span>&#125;<br>&#123;<span class="hljs-number">2</span> , <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>&#125;<br>&#123;âˆ , <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>&#125;<br>&#123;<span class="hljs-number">6</span> , <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>&#125;&#125;;<br></code></pre></td></tr></table></figure><p><strong>ï¼ˆé‡ç‚¹ï¼‰ç®—æ³•è¦ç‚¹</strong></p><ul><li><strong>resultï¼š</strong> <strong>å·²æ±‚å‡º</strong> æœ€å°è·¯å¾„çš„é¡¶ç‚¹</li><li><strong>notFoundï¼š</strong> <strong>æœªæ±‚å‡º</strong> æœ€å°è·¯å¾„çš„é¡¶ç‚¹ï¼Œé‡Œé¢çš„å€¼æ˜¯ <strong>åˆ°èµ·ç‚¹çš„è·ç¦»</strong></li></ul><blockquote><p>æ¯æ¬¡ä» ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€ä¸­ å–å‡º è·ç¦»è·ç¦»èµ·ç‚¹ æœ€è¿‘çš„ç‚¹ï¼Œä»¥è¿™ä¸ªç‚¹ä¸ºæ¡¥æ¢ åˆ·æ–°ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€çš„è·ç¦»</p></blockquote><p>åˆå§‹ï¼Œ<code>result=&#123;A(0)&#125;</code> ä¸­åªæœ‰èµ·ç‚¹ Aï¼Œ<code>notFound=&#123;B(2),C(âˆ),D(6)&#125;</code> ä¸­æ˜¯é™¤äº† A ç‚¹çš„å…¶ä»–ç‚¹ï¼Œé‡Œé¢çš„å€¼æ˜¯åˆ°èµ·ç‚¹çš„è·ç¦»ï¼ˆä¾‹å¦‚ B(2) ä»£è¡¨ Bç‚¹åˆ°èµ·ç‚¹çš„è·ç¦»ä¸º 2ï¼‰</p><p><img src="/2021/11/25/AlgorithmNote/image-20221111115011223.png" alt="image-20221111115011223"></p><p><strong>ç„¶åï¼Œä»ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€notFound ä¸­å–å‡º æœ€çŸ­è·¯å¾„çš„ç‚¹ B(2) ï¼Œç„¶åé€šè¿‡ B(2) ä¸ºæ¡¥æ¢ åˆ·æ–°ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€çš„è·ç¦»</strong></p><ol><li><strong>å–å‡º æœ€çŸ­è·¯å¾„çš„ç‚¹ï¼š</strong></li></ol><p>ä»ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€notFound ä¸­å–å‡º æœ€çŸ­è·¯å¾„çš„ç‚¹ B(2)ï¼Œæ”¾å…¥ç»“æœ result ä¸­ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p>ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„ç‚¹ã€ <code>notFound=&#123;C(âˆ),D(6)&#125;</code>ï¼Œã€Œå·²æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ ã€<code>result=&#123;A(0),B(2)&#125;</code></p><ol><li><strong>åˆ·æ–°è·ç¦»</strong>ï¼š</li></ol><p>é€šè¿‡ B(2) ä¸ºæ¡¥æ¢ï¼Œåˆ·æ–°è·ç¦»ã€‚</p><p>ä¾‹å¦‚ <code>AD = 6 &lt; AB + BD = 4</code> ä»¥ B(2) ä¸ºæ¡¥æ¢çš„è·ç¦»æ›´çŸ­ï¼Œå°±åˆ·æ–°ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„ç‚¹ã€D(6) çš„è·ç¦»ä¸º D(4)</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">notFound</span>=&#123;C(âˆ),D(<span class="hljs-number">4</span>)&#125;<br></code></pre></td></tr></table></figure><p>åŒç†åˆ·æ–° C(âˆ) çš„è·ç¦»ä¸º C(5) ï¼Œæœ€åç»“æœå¦‚ä¸‹ï¼š</p><p>ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„ç‚¹ã€ <code>notFound=&#123;C(5),D(4)&#125;</code> ï¼Œã€Œå·²æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€<code>result=&#123;A(0),B(2)&#125;</code> </p><p><img src="/2021/11/25/AlgorithmNote/image-20221111115053104.png" alt="image-20221111115053104"></p><p><strong>ç„¶åï¼Œä»ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€notFound ä¸­å–å‡º æœ€çŸ­è·¯å¾„çš„ç‚¹ D(4) ï¼Œç„¶åé€šè¿‡ D(4) ä¸ºæ¡¥æ¢ åˆ·æ–°ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€çš„è·ç¦»</strong></p><p>åŒç†ï¼Œæœ€åç»“æœå¦‚ä¸‹ï¼š</p><p>ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„ç‚¹ã€ <code>notFound=&#123;C(5)&#125;</code> ï¼Œã€Œå·²æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€<code>result=&#123;A(0),B(2),D(4)&#125;</code></p><p><img src="/2021/11/25/AlgorithmNote/image-20221111115111128.png" alt="image-20221111115111128"></p><p><strong>ç„¶åï¼Œä»ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€notFound ä¸­å–å‡º æœ€çŸ­è·¯å¾„çš„ç‚¹ C(5) ï¼Œç®—æ³•ç»“æŸ</strong></p><p><strong><code>result=&#123;A(0),B(2),D(4),C(5)&#125;</code> å°±æ˜¯æœ€ç»ˆæ‰€æ±‚çš„ æœ€çŸ­è·ç¦»</strong></p><p><img src="/2021/11/25/AlgorithmNote/image-20221111115126718.png" alt="image-20221111115126718"></p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p>è¿™é‡Œä½¿ç”¨ -1 è¡¨æ— ç©·å¤§ï¼Œä¸‹é¢æ˜¯ Java ä»£ç å’Œæµ‹è¯•æ¡ˆä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dijkstra</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] dijkstra(<span class="hljs-type">int</span>[][] graph,<span class="hljs-type">int</span> startVertex)&#123;<br>        <span class="hljs-comment">//åˆå§‹åŒ– ä»¥æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ result[]</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> graph.length;<br>        <span class="hljs-type">int</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[length];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>            result[i] = -<span class="hljs-number">1</span>;<br>        &#125;<br>        result[startVertex] = <span class="hljs-number">0</span> ;<br>        <span class="hljs-comment">// åˆå§‹åŒ– æœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ notFound[]</span><br>        <span class="hljs-type">int</span>[] notFound = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[length];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>            notFound[i] = graph[startVertex][i];<br>        &#125;<br>        notFound[startVertex] = -<span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// å¼€å§‹ Dijkstra ç®—æ³•</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; length; i++) &#123;<br>            <span class="hljs-comment">//1. ä»ã€Œæœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„ç‚¹ã€notFound ä¸­å–å‡º æœ€çŸ­è·¯å¾„çš„ç‚¹</span><br>            <span class="hljs-comment">//1.1 æ‰¾åˆ°æœ€çŸ­è·ç¦»çš„ç‚¹</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">minIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; length; j++) &#123;<br>                <span class="hljs-keyword">if</span> (notFound[j] &gt; <span class="hljs-number">0</span> &amp;&amp; notFound[j] &lt; min)&#123;<br>                    min = notFound[j];<br>                    minIndex = j;<br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">//1.2 å°†æœ€çŸ­è·ç¦»çš„ç‚¹ å–å‡º æ”¾å…¥ç»“æœä¸­</span><br>            result[minIndex] = min;<br>            notFound[minIndex] = -<span class="hljs-number">1</span>;<br>            <span class="hljs-comment">//2. åˆ·æ–° ã€Œæœªæ±‚å‡ºæœ€çŸ­è·ç¦»çš„ç‚¹ã€ notFound[] ä¸­çš„è·ç¦»</span><br>            <span class="hljs-comment">//2.1 éå†åˆšåˆšæ‰¾åˆ°æœ€çŸ­è·ç¦»çš„ç‚¹ (B) çš„å‡ºåº¦ (BAã€BBã€BCã€BD)</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; length; j++) &#123;<br>                <span class="hljs-comment">// å‡ºåº¦å¯é€šè¡Œ(ä¾‹å¦‚ BD:graph[1][3]  &gt; 0)</span><br>                <span class="hljs-comment">// å‡ºåº¦ç‚¹ä¸èƒ½å·²ç»åœ¨ç»“æœé›† resultä¸­(ä¾‹å¦‚ D: result[3] == -1)</span><br>                <span class="hljs-keyword">if</span> (graph[minIndex][j] &gt; <span class="hljs-number">0</span><br>                &amp;&amp; result[j] == -<span class="hljs-number">1</span>)&#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">newDistance</span> <span class="hljs-operator">=</span> result[minIndex] + graph[minIndex][j];<br>                    <span class="hljs-comment">//é€šè¿‡ B ä¸ºæ¡¥æ¢ï¼Œåˆ·æ–°è·ç¦»</span><br>                    <span class="hljs-comment">//ï¼ˆæ¯”å¦‚`AD = 6 &lt; AB + BD = 4` å°±åˆ·æ–°è·ç¦»ï¼‰ï¼ˆ -1 ä»£è¡¨æ— é™å¤§ï¼‰</span><br>                    <span class="hljs-keyword">if</span> (newDistance &lt; notFound[j] || notFound[j]==-<span class="hljs-number">1</span>)&#123;<br>                        notFound[j] = newDistance;<br>                    &#125;<br>                &#125;<br>            &#125;<br><br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-comment">/** æµ‹è¯•æ¡ˆä¾‹ */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">char</span>[] vertices = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[]&#123;<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;D&#x27;</span>&#125;;<br>        <span class="hljs-type">int</span>[][] graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[][]&#123;<br>                &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">6</span>&#125;<br>                , &#123;<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>&#125;<br>                , &#123;-<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>&#125;<br>                , &#123;<span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>&#125;&#125;;<br>        <span class="hljs-type">int</span>[] dijkstra = dijkstra(graph, <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : dijkstra) &#123;<br>            System.out.println(i);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/*æµ‹è¯•ç»“æœ</span><br><span class="hljs-comment">    0</span><br><span class="hljs-comment">    2</span><br><span class="hljs-comment">    5</span><br><span class="hljs-comment">    4</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
