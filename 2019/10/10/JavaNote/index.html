

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon/myfavicon.png">
  <link rel="icon" href="/img/icon/myfavicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Leungyh">
  <meta name="keywords" content="">
  
    <meta name="description" content="Java 转义字符Java 常用的转义字符1234567在控制台，输入 tab 键，可以实现命令补全\t ：一个制表位，实现对齐的功能\n ：换行符\\ ：一个\\&quot; :一个&quot;\&amp;#x27; ：一个&amp;#x27;\r :一个回车 System.out.println(&quot;韩顺平教育\r 北京&quot;);      变量 变量表示内存中的一个存储区域 [不同的变量，类型">
<meta property="og:type" content="article">
<meta property="og:title" content="Java基础">
<meta property="og:url" content="https://leung-yh.github.io/2019/10/10/JavaNote/index.html">
<meta property="og:site_name" content="Leungyh&#39;s blog">
<meta property="og:description" content="Java 转义字符Java 常用的转义字符1234567在控制台，输入 tab 键，可以实现命令补全\t ：一个制表位，实现对齐的功能\n ：换行符\\ ：一个\\&quot; :一个&quot;\&amp;#x27; ：一个&amp;#x27;\r :一个回车 System.out.println(&quot;韩顺平教育\r 北京&quot;);      变量 变量表示内存中的一个存储区域 [不同的变量，类型">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220914094409741.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220914095054681.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220914095723827.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220830151659522.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220830161016547.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220830221838618.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220830225514550.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220901151016279.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220902150812545.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220903110827060.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905151511623.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905215119841.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905232940982.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905233716325.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905234255887.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905234323810.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220905234400437.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906143123342.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906153040367.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906153102442.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906194448537.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906220808765.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906221636588.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220906222649017.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907141229236.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907143322876.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907151045071.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907194812227.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907212648493.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907225007862.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907225026693.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907230439422.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220907231315310.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220908152913126.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912090212994.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912090402260.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912090212994.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912104049727.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912104348570.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912170319607.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220912170402225.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220913142121290.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220913153254219.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220913212131074.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220914225605186.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220915192249886.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220915192932489.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220915221924451.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220915222026118.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220916141112139.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220916161139702.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220916163139229.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220916194412765.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220916194828683.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220918091701532.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220918101953780.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220918154416827.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220918154841698.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920140407846.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920142432214.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920145929039.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920150646088.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920150738374.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920151707753.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920171124837.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920192614729.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920222410638.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920222614466.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920223003450.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920223115442.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220920232521586.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921112611952.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921114615816.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921114848511.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921144831286.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921114510403.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921151249596.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921194523349.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921195106779.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921202032716.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220921235649357.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922121512178.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922123249795.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922144417511.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922153658489.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922153711315.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922153817732.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220922162428406.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220924103955134.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220924091230962.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220924093824530.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220924113503012.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925091551275.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925105023050.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925105124856.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925154323456.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925162037977.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925164043557.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925164121230.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925193138861.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925200039053.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925201152414.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925201237667.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220925201407366.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221010214327674.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221010220350562.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221011193054014.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221011220559484.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221011220610323.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221012195509452.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221012195217855.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221012213546711.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221012221856652.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221012232155204.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221012232238621.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221014150658309.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221014150738567.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015094843440.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015095634088.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015101518508.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015104242065.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015155516327.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015155540189.png">
<meta property="og:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20221015160631226.png">
<meta property="article:published_time" content="2019-10-10T02:00:00.000Z">
<meta property="article:modified_time" content="2023-07-04T12:38:17.622Z">
<meta property="article:author" content="Leungyh">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://leung-yh.github.io/2019/10/10/JavaNote/image-20220914094409741.png">
  
  
  
  <title>Java基础 - Leungyh&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"leung-yh.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Leungyh&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Java基础"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2019-10-10 10:00" pubdate>
          2019年10月10日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          348k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          2903 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Java基础</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2023年7月4日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h2 id="Java-转义字符"><a href="#Java-转义字符" class="headerlink" title="Java 转义字符"></a>Java 转义字符</h2><h3 id="Java-常用的转义字符"><a href="#Java-常用的转义字符" class="headerlink" title="Java 常用的转义字符"></a>Java 常用的转义字符</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">在控制台，输入 tab 键，可以实现命令补全<br>\t ：一个制表位，实现对齐的功能<br>\n ：换行符<br>\\ ：一个\<br>\<span class="hljs-string">&quot; :一个&quot;</span><br>\<span class="hljs-string">&#x27; ：一个&#x27;</span><br>\r :一个回车 System.out.println(<span class="hljs-string">&quot;韩顺平教育\r 北京&quot;</span>);<br></code></pre></td></tr></table></figure>





<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li><p>变量表示内存中的一个存储区域 [不同的变量，类型不同，占用的空间大小不同]</p>
<p>比如： int 4 个字节，double 就是 8 个字节</p>
</li>
<li><p>该区域有自己的名称[变量名] 和类型[数据类型]</p>
</li>
<li><p>变量必须先声明，后使用，即有顺序</p>
</li>
<li><p>该区域的数据&#x2F;值可以在同一类型范围内不断变化</p>
</li>
<li><p>变量在同一个作用域内不能重名</p>
</li>
<li><p>变量 &#x3D; 变量名 + 值 + 数据类型 【变量三要素】</p>
</li>
</ul>
<h3 id="程序中-号的使用"><a href="#程序中-号的使用" class="headerlink" title="程序中 +号的使用"></a>程序中 +号的使用</h3><ul>
<li>当左右两边都是数值型时，则做加法运算</li>
<li>当左右两边有一方为字符串，则做拼接运算</li>
<li>运算顺序为从左到右</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(<span class="hljs-number">10</span> + <span class="hljs-number">98</span>);  <span class="hljs-comment">//198</span><br>System.out.println(<span class="hljs-string">&quot;100&quot;</span> + <span class="hljs-number">98</span>);  <span class="hljs-comment">//10098</span><br>System.out.println(<span class="hljs-number">100</span> + <span class="hljs-number">3</span> + <span class="hljs-string">&quot;hello&quot;</span>);  <span class="hljs-comment">//103hello</span><br>System.out.println(<span class="hljs-string">&quot;hello&quot;</span> + <span class="hljs-number">100</span> + <span class="hljs-number">3</span>);  <span class="hljs-comment">//hello1003</span><br></code></pre></td></tr></table></figure>



<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>每一种数据都定义了明确的数据类型，在内存中分配了不同大小的内存空间(字节)。</p>
 <img src="image-20220914094409741.png" srcset="/img/loading.gif" lazyload alt="image-20220914094409741" style="zoom:60%;" />

<h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><h4 id="整型的类型"><a href="#整型的类型" class="headerlink" title="整型的类型"></a>整型的类型</h4> <img src="image-20220914095054681.png" srcset="/img/loading.gif" lazyload alt="image-20220914095054681" style="zoom:50%;" />



<h4 id="整型的使用细节"><a href="#整型的使用细节" class="headerlink" title="整型的使用细节"></a>整型的使用细节</h4><ul>
<li>Java 各整数类型有固定的范围和字段长度，不受具体OS[操作系统]的影响，以保证java程序的可移植性</li>
<li>Java 的整型常量（具体值）默认为 int 型，声明 long 型常量须后加 ‘l’ 或 ‘L’</li>
<li>Java 程序中变量常声明为 int 型，除非不足以表示大数，才使用 long</li>
<li>bit（比特）：计算机中的最小存储单位。</li>
<li>byte（字节）：计算机中基本存储单元，1 byte &#x3D; 8 bit</li>
</ul>
<h3 id="浮点类型"><a href="#浮点类型" class="headerlink" title="浮点类型"></a>浮点类型</h3><h4 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h4><p>Java 的浮点类型可以表示一个小数，比如 123.4 ，7.8 ，0.12 等等</p>
<h4 id="浮点型的分类"><a href="#浮点型的分类" class="headerlink" title="浮点型的分类"></a>浮点型的分类</h4> <img src="image-20220914095723827.png" srcset="/img/loading.gif" lazyload alt="image-20220914095723827" style="zoom:60%;" />

<h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><ol>
<li><p>关于浮点数在机器中存放形式的简单说明，<strong>浮点数 &#x3D; 符号位 + 指数位 + 尾数位</strong></p>
</li>
<li><p>尾数部分可能丢失，造成精度损失(小数都是近似值)。</p>
</li>
</ol>
<h4 id="浮点型使用细节"><a href="#浮点型使用细节" class="headerlink" title="浮点型使用细节"></a>浮点型使用细节</h4><ul>
<li><p>与整数类似，Java 浮点类型也有固定的范围和字段长度，不受具体OS的影响。</p>
<p>[float 4 个字节，double 8 个字节]</p>
</li>
<li><p>Java 的浮点型常量（具体值）默认为 double 型，声明 float 型常量，须后加 ‘f’ 或 ‘F’</p>
</li>
<li><p>浮点型常量有两种表示形式</p>
<p>十进制数形式：如：5.12		512.0f        .572      （必须有小数点）</p>
<p>科学计数法形式：如：5.12e2（5.12*10的2次方）  5.12E-2（5.12&#x2F;10的2次方）</p>
</li>
<li><p>通常情况下，应该是使用 double 型，因为它比 float 型更精确</p>
</li>
<li><p>浮点数使用陷阱：2.7 和 8.1&#x2F;3 比较</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//浮点数使用陷阱: 2.7 和 8.1 / 3 比较</span><br><span class="hljs-comment">//看看一段代码</span><br><span class="hljs-type">double</span> <span class="hljs-variable">num11</span> <span class="hljs-operator">=</span> <span class="hljs-number">2.7</span>;<br><span class="hljs-type">double</span> <span class="hljs-variable">num12</span> <span class="hljs-operator">=</span> <span class="hljs-number">8.1</span>/<span class="hljs-number">3</span>; <span class="hljs-comment">//8.1 / 3; //2.7</span><br>System.out.println(num11);<span class="hljs-comment">//2.7</span><br>System.out.println(num12);<span class="hljs-comment">//接近 2.7 的一个小数，而不是 2.7</span><br><span class="hljs-comment">//得到一个重要的使用点: 当我们对运算结果是小数的进行相等判断是，要小心</span><br><span class="hljs-comment">//应该是以两个数的差值的绝对值，在某个精度范围类判断</span><br><span class="hljs-keyword">if</span>( num11 == num12) &#123;  <span class="hljs-comment">//错误</span><br>System.out.println(<span class="hljs-string">&quot;num11 == num12 相等&quot;</span>);<br>&#125;<br><span class="hljs-comment">//正确的写法</span><br><span class="hljs-type">double</span> num1=<span class="hljs-number">2.7</span>;<br><span class="hljs-type">double</span> num2=<span class="hljs-number">8.1</span>/<span class="hljs-number">3</span>;<br><span class="hljs-keyword">if</span>(Math.abs(num7-num8)&lt;<span class="hljs-number">0.00001</span>)&#123;  <span class="hljs-comment">//正确</span><br>	System.out.println(<span class="hljs-string">&quot;相等~~&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="字符类型-char"><a href="#字符类型-char" class="headerlink" title="字符类型(char)"></a>字符类型(char)</h3><h4 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h4><p>字符类型（char）可表示单个字符，char 是两个字节（Java 中 char 使用 Unicode 编码，可以存放汉字）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">char</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;\t&#x27;</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">c3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;韩&#x27;</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">c4</span> <span class="hljs-operator">=</span> <span class="hljs-number">97</span>;<br></code></pre></td></tr></table></figure>

<h4 id="字符类型使用细节"><a href="#字符类型使用细节" class="headerlink" title="字符类型使用细节"></a>字符类型使用细节</h4><ul>
<li>字符常量是用单引号（’’）括起来的单个字符，例如 char c1 &#x3D; ‘a’;  char c2 &#x3D; ‘\t’;  char c3 &#x3D; ‘韩’;  char c4 &#x3D; 97;</li>
<li>Java 中还允许使用转义字符 ‘\‘ 来将其后的字符转变为特殊字符型常量。例如 char c &#x3D; ‘\n’;  ‘\n’ 表示换行符</li>
<li>在java中，char的本质是一个整数，在输出时，时unicode码对应的字符</li>
<li>可以直接给char赋一个整数，然后输出时，会按照对应的unicode字符输出  [97 -&gt; a]</li>
<li>char 类型是可以进行运算的，相当于一个整数，因为它都对应有 Unicode 码。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CharDetail</span> &#123;<br>    <span class="hljs-comment">//编写一个 main 方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//在 java 中，char 的本质是一个整数，在默认输出时，是 unicode 码对应的字符</span><br>        <span class="hljs-comment">//要输出对应的数字，可以(int)字符</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-number">97</span>;<br>        System.out.println(c1); <span class="hljs-comment">// a</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span>; <span class="hljs-comment">//输出&#x27;a&#x27; 对应的 数字</span><br>        System.out.println((<span class="hljs-type">int</span>)c2);<br>        <span class="hljs-type">char</span> <span class="hljs-variable">c3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;韩&#x27;</span>;<br>        System.out.println((<span class="hljs-type">int</span>)c3);<span class="hljs-comment">//38889</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c4</span> <span class="hljs-operator">=</span> <span class="hljs-number">38889</span>;<br>        System.out.println(c4);<span class="hljs-comment">//韩</span><br>        <span class="hljs-comment">//char 类型是可以进行运算的，相当于一个整数，因为它都对应有 Unicode 码.</span><br>        System.out.println(<span class="hljs-string">&#x27;a&#x27;</span> + <span class="hljs-number">10</span>);<span class="hljs-comment">//107</span><br>        <span class="hljs-comment">//课堂小测试</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c5</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;b&#x27;</span> + <span class="hljs-number">1</span>;<span class="hljs-comment">//98+1==&gt; 99</span><br>        System.out.println((<span class="hljs-type">int</span>)c5); <span class="hljs-comment">//99</span><br>        System.out.println(c5); <span class="hljs-comment">//99-&gt;对应的字符-&gt;编码表 ASCII(规定好的)=&gt;c</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>











<h2 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h2><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">//补充了一个增强for</span><br><span class="hljs-type">int</span>[] nums = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>&#125;;<br><span class="hljs-comment">//普通的for循环</span><br>System.out.println(<span class="hljs-string">&quot;=====普通的for=====&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    System.out.println(nums[i]);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;=====增强的for=====&quot;</span>);<br><span class="hljs-comment">//执行流程是 依次从nums数组中取出数据，赋给i, 如果取出完毕，则退出for</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i : nums) &#123;<br>    System.out.println(<span class="hljs-string">&quot;i=&quot;</span> + i);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>增强 for 不能做删除元素等操作，否则会出错</p>
<p>三元运算符  是一个整体</p>
<p>IDEA 显示所有的快捷键的的快捷键 ctrl + j</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><h3 id="包的三大作用"><a href="#包的三大作用" class="headerlink" title="包的三大作用"></a>包的三大作用</h3><ol>
<li>区分相同名字的类</li>
<li>当类很多时，可以很好的管理类 [看Java api 文档，一个包里面存放相对应的接口和类等等]</li>
<li>控制访问范围</li>
</ol>
<h3 id="包的基本语法"><a href="#包的基本语法" class="headerlink" title="包的基本语法"></a>包的基本语法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study;<br></code></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>package：关键字，表示打包</li>
<li>com.java_study：表示包名，实际上就是文件夹 com\java_study\</li>
</ol>
<h3 id="包的本质分析（原理）"><a href="#包的本质分析（原理）" class="headerlink" title="包的本质分析（原理）"></a>包的本质分析（原理）</h3><p>包的本质实际上就是创建不同的文件夹来保存类文件</p>
<p> <img src="/2019/10/10/JavaNote/image-20220830151659522.png" srcset="/img/loading.gif" lazyload alt="image-20220830151659522"></p>
<h3 id="包的快速入门"><a href="#包的快速入门" class="headerlink" title="包的快速入门"></a>包的快速入门</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.use;<br><br><span class="hljs-keyword">import</span> com.xiaoqiang.Dog;<br><span class="hljs-comment">//import com.xiaoming.Dog;  //报错：已在单类型导入中定义 &#x27;com.xiaoqiang.Dog&#x27;</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        <span class="hljs-comment">// com.xiaoqiang.Dog dog = new com.xiaoqiang.Dog(); //把包名写全也可以</span><br>        System.out.println(dog);  <span class="hljs-comment">//com.xiaoqiang.Dog@7c30a502</span><br><br>        com.xiaoming.<span class="hljs-type">Dog</span> <span class="hljs-variable">dog1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.xiaoming.Dog(); <span class="hljs-comment">//带有包名</span><br>        System.out.println(dog1);  <span class="hljs-comment">//com.xiaoming.Dog@49e4cb85</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.xiaoming;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.xiaoqiang;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="包的命名"><a href="#包的命名" class="headerlink" title="包的命名"></a>包的命名</h3><ul>
<li><p>命名规则：</p>
<p>只能包含数字、字母、下划线、小圆点，但不能用数字开头，不能是关键字或保留字</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">demo</span>.<span class="hljs-number">12</span>a  //错误，<span class="hljs-number">12</span>a是数字开头<br></code></pre></td></tr></table></figure>
</li>
<li><p>命名规范</p>
<p>一般时小写字母 + 小圆点：com.公司名.项目名.业务模块名</p>
</li>
</ul>
<h3 id="常用的包"><a href="#常用的包" class="headerlink" title="常用的包"></a>常用的包</h3><ul>
<li>java.lang.*  &#x2F;&#x2F;lang包是基本包，默认引入，不需要再手动引入</li>
<li>java.util.*  &#x2F;&#x2F;util包，系统提供的工具包，工具类，使用 Scanner</li>
<li>java.net.*  &#x2F;&#x2F;网络包，网络开发</li>
<li>java.awt.*  &#x2F;&#x2F;是做java的界面开发，GUI</li>
</ul>
<h3 id="包的使用细节"><a href="#包的使用细节" class="headerlink" title="包的使用细节"></a>包的使用细节</h3><ul>
<li><p>如何引入包</p>
<ol>
<li>import 包.类  &#x2F;&#x2F;只引入该包里面的这一个类</li>
<li>import 包.*  &#x2F;&#x2F;该包里面的所有类都引入</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.java_study.pkg;<br><br><span class="hljs-keyword">import</span>  java.util.Scanner;  <span class="hljs-comment">//表示只会引入java.util 包下的 Scanner类</span><br><span class="hljs-keyword">import</span>  java.util.*;  <span class="hljs-comment">//表示将java.util 包下的所有类都引入(导入)</span><br><span class="hljs-comment">//建议：需要使用哪个类，就导入哪个类即可，即推荐使用第一种方式</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Import01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//... ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
<li><p>注意事项和使用细节</p>
<ol>
<li>package 的作用是声明当前类所在的包，需要放在class的最上面，一个类中最多只有一条package语句</li>
<li>import指令 位置放在package的下面，在类定义前面，可以有多句且没有顺序要求</li>
<li><strong>同包的不同类之间可以直接使用，不需要导入</strong></li>
</ol>
</li>
</ul>
<h2 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h2><h3 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a>基本介绍</h3><p>java 提供四种访问控制修饰符号，用于控制 方法和属性 的访问权限：</p>
<ol>
<li>public：对外公开</li>
<li>protected：对子类和同一个包中的类公开</li>
<li>默认：向同一个包的类公开</li>
<li>private：只有本类可以访问，不对外公开</li>
</ol>
 <img src="image-20220830161016547.png" srcset="/img/loading.gif" lazyload alt="image-20220830161016547" style="zoom: 80%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.modifier;<br><span class="hljs-keyword">import</span> com.java_study.pkg.D;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        a.func1();  <span class="hljs-comment">//本类方法，四种访问修饰符均可访问</span><br><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>        b.func2();  <span class="hljs-comment">//同包不同类方法，private 不可访问，其它三种均可</span><br><br>        <span class="hljs-type">D</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>();<br>        d.func4();  <span class="hljs-comment">//不同包下，只能访问 public</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 只有 public 和 默认 可以修饰类</span><br><span class="hljs-comment">// 在一个文件中只能有一个 public 类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span>&#123;<br><br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.modifier;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><br>    <span class="hljs-comment">//四个属性，分别使用不同的访问修饰符修饰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">protected</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> <span class="hljs-number">400</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//本类的方法，四种访问修饰的都可以访问到</span><br>        <span class="hljs-comment">//该方法可以访问上面四个属性</span><br>        System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + n1 + <span class="hljs-string">&quot; n2=&quot;</span> + n2 + <span class="hljs-string">&quot; n3=&quot;</span> + n3 + <span class="hljs-string">&quot; n4=&quot;</span> + n4);<br>    &#125;<br><br>    <span class="hljs-comment">//成员方法也一样</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span>&#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//在同一类中，四种权限均可访问</span><br>        m1();<br>        m2();<br>        m3();<br>        m4();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.modifier;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        <span class="hljs-comment">//在同一个包下，可以访问 public、protected、默认 ，不可以访问private</span><br>        System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + a.n1 + <span class="hljs-string">&quot; n2=&quot;</span> + a.n2 + <span class="hljs-string">&quot; n3=&quot;</span> + a.n3);<br>        <span class="hljs-comment">//加 n4 之后将会报错：&#x27;n4&#x27; 在 &#x27;com.java_study.modifier.A&#x27; 中具有 private 访问权限</span><br><br>        <span class="hljs-comment">//在同一个包下，可以访问 public、protected、默认 ，不可以访问private</span><br>        a.m1();<br>        a.m2();<br>        a.m3();<br>        <span class="hljs-comment">// a.m4(); //报错</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.pkg;<br><br><span class="hljs-keyword">import</span> com.java_study.modifier.A;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func4</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        <span class="hljs-comment">//在不同包中，只能访问 public 权限</span><br>        System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + a.n1);<br><br>        <span class="hljs-comment">//在不同包中，只能访问 public 权限</span><br>        a.m1();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>修饰符可以用来修饰类中的属性，成员方法以及类</li>
<li><strong>只有 默认 和 public 才能修饰类</strong></li>
<li>成员方法的访问规则和属性完全一样</li>
<li><strong>关于在子类中的访问权限后面再学</strong></li>
</ul>
<h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><p>封装就是把抽象出的数据[属性]和对数据的操作[方法]封装在一起，数据背保护在内部，程序的其它部分只有通过被授权的操作[方法]，才能对数据进行操作。</p>
<h3 id="封装的理解与好处"><a href="#封装的理解与好处" class="headerlink" title="封装的理解与好处"></a>封装的理解与好处</h3><ul>
<li><p>隐藏实现细节：方法(连接数据库) &lt;– 调用(传入参数…)</p>
</li>
<li><p>可以对数据进行验证，保证安全合理  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Person &#123;name, age&#125;<br><span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>p.name = <span class="hljs-string">&quot;jack&quot;</span>;<br>p.age = <span class="hljs-number">1200</span>;  <span class="hljs-comment">//不合理的数据</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="封装的实现步骤"><a href="#封装的实现步骤" class="headerlink" title="封装的实现步骤"></a>封装的实现步骤</h3><ol>
<li>将属性进行私有化 private [不能直接修改属性]</li>
<li>提供一个公共的 set 方法，用于对属性输入判断并赋值</li>
<li>提供一个公共的 get 方法，用于获取属性的值</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.encap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Encapsulation01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>        <span class="hljs-comment">//person.age = 3000;  //报错：私有权限不能访问</span><br>        person.setName(<span class="hljs-string">&quot;jack&quot;</span>);<br>        person.setAge(<span class="hljs-number">18</span>);<br>        person.setSalary(<span class="hljs-number">30000</span>);<br>        System.out.println(person.info());<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">public</span> String name;  <span class="hljs-comment">//名字公开</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;  <span class="hljs-comment">//age 私有化</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary; <span class="hljs-comment">//薪水 私有化</span><br><br>    <span class="hljs-comment">// 构造器 与 setXXX 结合</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> salary)</span> &#123;<br><span class="hljs-comment">//        this.name = name;</span><br><span class="hljs-comment">//        this.age = age;</span><br><span class="hljs-comment">//        this.salary = salary;</span><br>        <span class="hljs-comment">//我们可以将 set 方法写在构造器中，这样仍然可以验证</span><br>        setName(name);<br>        setAge(age);<br>        setSalary(salary);<br>    &#125;<br><br>    <span class="hljs-comment">// 快捷键写 set 和 get</span><br>    <span class="hljs-comment">// Alt + ins</span><br>    <span class="hljs-comment">// 然后根据要求完善代码</span><br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-comment">//加入对数据的校验</span><br>        <span class="hljs-keyword">if</span>(name.length() &gt;=<span class="hljs-number">2</span> &amp;&amp; name.length()&lt;=<span class="hljs-number">6</span>)&#123;<br>            <span class="hljs-built_in">this</span>.name = name;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;名字长度不对，需要 2-6 个字符，默认为 无名&quot;</span>);<br>            <span class="hljs-built_in">this</span>.name = <span class="hljs-string">&quot;无名&quot;</span>;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-keyword">if</span>(age&gt;=<span class="hljs-number">1</span> &amp;&amp; age&lt;=<span class="hljs-number">120</span>)&#123;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;年龄应在 1-120 之间，默认值为18&quot;</span>);<br>            <span class="hljs-built_in">this</span>.age = <span class="hljs-number">18</span>;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSalary</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 这里可以增加对当前对象的权限判断</span><br>        <span class="hljs-keyword">return</span> salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">double</span> salary)</span> &#123;<br> 		<span class="hljs-keyword">if</span>(salary&gt;=<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-built_in">this</span>.salary = salary;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-built_in">this</span>.salary = <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">info</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;信息为 name=&quot;</span> + name + <span class="hljs-string">&quot; age=&quot;</span> + age + <span class="hljs-string">&quot; 薪水=&quot;</span> + salary;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h3 id="继承基本介绍和示意图"><a href="#继承基本介绍和示意图" class="headerlink" title="继承基本介绍和示意图"></a>继承基本介绍和示意图</h3><p>继承可以解决代码复用，让我们的编程更加靠近人类思维。当多个类存在相同的属性(变量)和方法时，可以从这些类中抽象出父类，在父类中定义这些相同的属性和方法，所有的子类不需要重新定义这些属性和方法，只需要通过 extends 来声明继承父类即可。</p>
 <img src="image-20220830221838618.png" srcset="/img/loading.gif" lazyload alt="image-20220830221838618" style="zoom:40%;" />



<h3 id="继承的基本语法"><a href="#继承的基本语法" class="headerlink" title="继承的基本语法"></a>继承的基本语法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">class 子类 extends 父类 &#123;<br>  	<span class="hljs-comment">//... ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>子类会自动拥有父类定义的属性和方法</li>
<li>父类 又叫 超类，基类</li>
<li>子类 又叫 派生类</li>
</ul>
<p><strong>快速入门</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.extend;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Extends01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Pupil</span> <span class="hljs-variable">pupil</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pupil</span>();<br>        pupil.name = <span class="hljs-string">&quot;银角大王~&quot;</span>;<br>        pupil.age = <span class="hljs-number">11</span>;<br>        pupil.testing();<br>        pupil.setScore(<span class="hljs-number">50</span>);<br>        pupil.showInfo();<br>        System.out.println(<span class="hljs-string">&quot;=======&quot;</span>);<br>        <span class="hljs-type">Graduate</span> <span class="hljs-variable">graduate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Graduate</span>();<br>        graduate.name = <span class="hljs-string">&quot;金角大王~&quot;</span>;<br>        graduate.age = <span class="hljs-number">23</span>;<br>        graduate.testing();<br>        graduate.setScore(<span class="hljs-number">80</span>);<br>        graduate.showInfo();<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.extend;<br><span class="hljs-comment">//父类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">//共有属性</span><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-comment">//共有方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showInfo</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;学生 &quot;</span> + name + <span class="hljs-string">&quot; 年龄 &quot;</span> + age + <span class="hljs-string">&quot; 成绩 &quot;</span> + score);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.extend;<br><span class="hljs-comment">//大学生 类 -&gt; 模拟大学生的考试简单情况</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Graduate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Student</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testing</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;大学生 &quot;</span> + name + <span class="hljs-string">&quot; 正在考大学数学&quot;</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.extend;<br><span class="hljs-comment">// 小学生 类 -&gt; 模拟小学生考试的情况</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pupil</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Student</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testing</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;小学生 &quot;</span>+ name +<span class="hljs-string">&quot; 正在考小学数学&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="继承的细节问题-重要"><a href="#继承的细节问题-重要" class="headerlink" title="继承的细节问题(重要)"></a>继承的细节问题(重要)</h3><p>继承的好处：</p>
<ul>
<li>提高代码复用性</li>
<li>提高代码的扩展性和维护性</li>
</ul>
<p><strong>继承的细节问题（重要）：</strong></p>
<ul>
<li><p>子类继承了父类所有的属性和方法，并且可以直接访问父类中非私有的属性和方法，</p>
<p>但是子类不能直接访问父类中的私有属性和方法，要通过父类中的公有方法去访问</p>
</li>
<li><p>子类必须调用父类的构造器，完成父类的初始化</p>
</li>
<li><p>当创建子类对象时，不管使用子类的哪个构造器，<strong>默认情况下总会去调用父类的无参构造器</strong>，</p>
<p>如果父类没有提供无参构造器，则必须在子类的构造器中用 super 去指定使用父类的哪个构造器完成对父类</p>
<p>的初始化工作。否则，编译不会通过</p>
</li>
<li><p>如果希望指定去调用父类的某个构造器，则可以显式地调用一下</p>
</li>
<li><p>super 在使用时，需要放在构造器第一行</p>
</li>
<li><p>super() 和 this() 都只能放在构造器第一行，因此这两个方法不能共存在一个构造器里面</p>
</li>
<li><p>java 所有类都是 Object 类的子类, Object 是所有类的基类</p>
</li>
<li><p><strong>父类构造器的调用不限于直接父类，将一直往上追溯直到 Object 类(顶级父类)</strong></p>
</li>
<li><p><strong>子类最多只能继承一个父类(指直接继承)，即 java 中是 单继承机制。</strong></p>
<p>思考：如何让 A 类继承 B 类和 C 类？ 【A 继承 B， B 继承 C】</p>
</li>
<li><p>不能滥用继承，子类和父类之间必须满足 is-a 的逻辑关系</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// System.out.println(&quot;===第 1 个对象====&quot;);</span><br>        <span class="hljs-comment">// Sub sub = new Sub(); //创建了子类对象 sub</span><br>        <span class="hljs-comment">// System.out.println(&quot;===第 2 个对象====&quot;);</span><br>        <span class="hljs-comment">// Sub sub2 = new Sub(&quot;jack&quot;); //创建了子类对象 sub2</span><br>        System.out.println(<span class="hljs-string">&quot;===第 3 对象====&quot;</span>);<br>        <span class="hljs-type">Sub</span> <span class="hljs-variable">sub3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sub</span>(<span class="hljs-string">&quot;king&quot;</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">//创建了子类对象 sub2</span><br>        <span class="hljs-comment">//sub.sayOk();</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TopBase</span> &#123; <span class="hljs-comment">//父类</span><br>    <span class="hljs-comment">//4 个属性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> <span class="hljs-number">400</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//无参构造器</span><br>        System.out.println(<span class="hljs-string">&quot;父类 Base()构造器被调用....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-comment">//有参构造器</span><br>        <span class="hljs-comment">//默认 super()</span><br>        System.out.println(<span class="hljs-string">&quot;父类 Base(String name, int age)构造器被调用....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-comment">//有参构造器</span><br>        System.out.println(<span class="hljs-string">&quot;父类 Base(String name)构造器被调用....&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//父类提供一个 public 的方法,返回了 n4</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getN4</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> n4;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test100</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test100&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test200</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test200&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">test300</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test300&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test400</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;test400&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//call</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callTest400</span><span class="hljs-params">()</span> &#123;<br>        test400();<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-comment">//输入 ctrl + H 可以看到类的继承关系</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123; <span class="hljs-comment">//子类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Sub</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-comment">//1. 老师要调用父类的无参构造器, 如下或者 什么都不写,默认就是调用 super()</span><br>        <span class="hljs-comment">//super();//父类的无参构造器</span><br>        <span class="hljs-comment">//2. 老师要调用父类的 Base(String name) 构造器</span><br>        <span class="hljs-comment">//super(&quot;hsp&quot;);</span><br>        <span class="hljs-comment">//3. 老师要调用父类的 Base(String name, int age) 构造器</span><br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;king&quot;</span>, <span class="hljs-number">20</span>);<br>        <span class="hljs-comment">//细节： super 在使用时，必须放在构造器第一行</span><br>        <span class="hljs-comment">//细节: super() 和 this() 都只能放在构造器第一行，因此这两个方法不能共存在一个构造器</span><br>        <span class="hljs-comment">//this() 不能再使用了</span><br>        System.out.println(<span class="hljs-string">&quot;子类 Sub(String name, int age)构造器被调用....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Sub</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//无参构造器</span><br>        <span class="hljs-comment">//super(); //默认调用父类的无参构造器</span><br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-number">10</span>);<br>        System.out.println(<span class="hljs-string">&quot;子类 Sub()构造器被调用....&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//当创建子类对象时，不管使用子类的哪个构造器，默认情况下总会去调用父类的无参构造器</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Sub</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">30</span>);<br>        <span class="hljs-comment">//do nothing...</span><br>        System.out.println(<span class="hljs-string">&quot;子类 Sub(String name)构造器被调用....&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayOk</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//子类方法</span><br>        <span class="hljs-comment">//非私有的属性和方法可以在子类直接访问</span><br>        <span class="hljs-comment">//但是私有属性和方法不能在子类直接访问</span><br>        System.out.println(n1 + <span class="hljs-string">&quot; &quot;</span> + n2 + <span class="hljs-string">&quot; &quot;</span> + n3);<br>        test100();<br>        test200();<br>        test300();<br>        <span class="hljs-comment">//test400();错误</span><br>        <span class="hljs-comment">//要通过父类提供公共的方法去访问</span><br>        System.out.println(<span class="hljs-string">&quot;n4=&quot;</span> + getN4());<br>        callTest400();<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.hspedu.extend_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopBase</span> &#123; <span class="hljs-comment">//父类是 Object</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TopBase</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//super(); Object 的无参构造器</span><br>        System.out.println(<span class="hljs-string">&quot;构造器 TopBase() 被调用...&quot;</span>);<span class="hljs-comment">//1</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="继承的本质分析-重要"><a href="#继承的本质分析-重要" class="headerlink" title="继承的本质分析(重要)"></a>继承的本质分析(重要)</h3><p>当子类对象创建好后，将会建立 查找的关系</p>
<p><strong>(1)</strong> 首先看子类是否有该属性</p>
<p><strong>(2)</strong> 如果子类有这个属性，并且可以访问，则返回信息</p>
<p><strong>(3)</strong> 如果子类没有这个属性，就看父类有没有这个属性</p>
<p>​	（如果父类有该属性，并且可以访问，就返回信息..）</p>
<p>​	（如果父类有该属性，但不可访问，则会报错，不会继续找上级父类）</p>
<p><strong>(4)</strong> 如果父类没有就按照(3)的规则，继续找上级父类，直到 Object…</p>
<p><strong>子类创建的内存布局：</strong></p>
<img src="image-20220830225514550.png" srcset="/img/loading.gif" lazyload alt="image-20220830225514550" style="zoom:50%;" />

<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.extend;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 讲解继承的本质</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsTheory</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Son</span> <span class="hljs-variable">son</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Son</span>();<span class="hljs-comment">//内存的布局</span><br>        <span class="hljs-comment">//?-&gt; 这时请大家注意，要按照查找关系来返回信息</span><br>        <span class="hljs-comment">//(1) 首先看子类是否有该属性</span><br>        <span class="hljs-comment">//(2) 如果子类有这个属性，并且可以访问，则返回信息</span><br>        <span class="hljs-comment">//(3) 如果子类没有这个属性，就看父类有没有这个属性(如果父类有该属性，并且可以访问，就返回信息..)</span><br>        <span class="hljs-comment">//(4) 如果父类没有就按照(3)的规则，继续找上级父类，直到 Object...</span><br>        System.out.println(son.name);<span class="hljs-comment">//返回就是大头儿子</span><br>        <span class="hljs-comment">//System.out.println(son.age);//返回的就是 39</span><br>        <span class="hljs-comment">//System.out.println(son.getAge());//返回的就是 39</span><br>        System.out.println(son.hobby);<span class="hljs-comment">//返回的就是旅游</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GrandPa</span> &#123; <span class="hljs-comment">//爷类</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;大头爷爷&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">hobby</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;旅游&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;  <span class="hljs-comment">//因为Father的age是私有属性，Son类不能直接使用age找到Grandpa的age</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GrandPa</span> &#123;<span class="hljs-comment">//父类</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;大头爸爸&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">39</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123; <span class="hljs-comment">//子类</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;大头儿子&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h2 id="super"><a href="#super" class="headerlink" title="super"></a>super</h2><ul>
<li>基本介绍</li>
</ul>
<p>super 代表父类的引用，用于访问父类的属性、方法、构造器</p>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><ul>
<li><p>访问父类的属性，但不能访问父类的 private 属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">super</span>.属性名<br></code></pre></td></tr></table></figure>
</li>
<li><p>访问父类的方法，但不能访问父类的 private 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">super</span>.方法名(参数列表)<br></code></pre></td></tr></table></figure>
</li>
<li><p>访问父类的构造器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">super</span>(参数列表);  <span class="hljs-comment">//只能放在构造器的第一句，并且只能出现一次</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="super-的相关细节"><a href="#super-的相关细节" class="headerlink" title="super 的相关细节"></a>super 的相关细节</h3><p>super 带来的好处</p>
<ul>
<li><p>调用父类的构造器的好处（分工明确，父类属性由父类初始化，子类的属性由子类初始化）</p>
</li>
<li><p>当子类中有和父类中的成员（属性&#x2F;方法）重名时，为了访问父类的成员，必须通过 super 。</p>
<p>如果没有重名，使用 super、this、直接访问 是一样的效果</p>
</li>
<li><p>super 的访问不限于直接父类，如果爷爷类和本类中有同名的成员，也可以使用 super 去访问爷爷类的成员</p>
<p>如果多个基类（上级类）中都有同名的成员，使用 super 访问遵循就近原则，同时遵循继承的访问权限规则</p>
</li>
<li><p>注意：如果查找属性的过程中，找到了但不能访问，则报错  cannot access；如果查找属性的过程中，没有找到，则提示属性不存在</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">888</span>;<br>    <span class="hljs-comment">//编写测试方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//super 的访问不限于直接父类，如果爷爷类和本类中有同名的成员，也可以使用 super 去访问爷爷类的成员；</span><br>        <span class="hljs-comment">// 如果多个基类(上级类)中都有同名的成员，使用 super 访问遵循就近原则。A-&gt;B-&gt;C</span><br>        System.out.println(<span class="hljs-string">&quot;super.n1=&quot;</span> + <span class="hljs-built_in">super</span>.n1);<br>        <span class="hljs-built_in">super</span>.cal();<br>    &#125;<br>    <span class="hljs-comment">//访问父类的属性 , 但不能访问父类的 private 属性 [案例]super.属性名</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-built_in">super</span>.n1 + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">super</span>.n2 + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">super</span>.n3 );<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cal</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B 类的 cal() 方法...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sum</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B 类的 sum()&quot;</span>);<br>        <span class="hljs-comment">//希望调用父类-A 的 cal 方法</span><br>        <span class="hljs-comment">//这时，因为子类 B 没有 cal 方法，因此我可以使用下面三种方式</span><br>        <span class="hljs-comment">//找 cal 方法时(cal() 和 this.cal())，顺序是:</span><br>        <span class="hljs-comment">// (1)先找本类，如果有，则调用</span><br>        <span class="hljs-comment">// (2)如果没有，则找父类(如果有，并可以调用，则调用)</span><br>        <span class="hljs-comment">// (3)如果父类没有，则继续找父类的父类,整个规则，就是一样的,直到 Object 类</span><br>        <span class="hljs-comment">// 提示：如果查找方法的过程中，找到了，但是不能访问， 则报错, cannot access</span><br>        <span class="hljs-comment">// 如果查找方法的过程中，没有找到，则提示方法不存在</span><br>        <span class="hljs-comment">//cal();</span><br>        <span class="hljs-built_in">this</span>.cal(); <span class="hljs-comment">//等价 cal</span><br>        <span class="hljs-comment">//找 cal 方法(super.call()) 的顺序是直接查找父类，其他的规则一样</span><br>        <span class="hljs-comment">//super.cal();</span><br>        <span class="hljs-comment">//演示访问属性的规则</span><br>        <span class="hljs-comment">//n1 和 this.n1 查找的规则是</span><br>        <span class="hljs-comment">//(1) 先找本类，如果有，则调用</span><br>        <span class="hljs-comment">//(2) 如果没有，则找父类(如果有，并可以调用，则调用)</span><br>        <span class="hljs-comment">//(3) 如果父类没有，则继续找父类的父类,整个规则，就是一样的,直到 Object 类</span><br>        <span class="hljs-comment">// 提示：如果查找属性的过程中，找到了，但是不能访问， 则报错, cannot access</span><br>        <span class="hljs-comment">// 如果查找属性的过程中，没有找到，则提示属性不存在</span><br>        System.out.println(n1);<br>        System.out.println(<span class="hljs-built_in">this</span>.n1);<br>        <span class="hljs-comment">//找 n1 (super.n1) 的顺序是直接查找父类属性，其他的规则一样</span><br>        System.out.println(<span class="hljs-built_in">super</span>.n1);<br>    &#125;<br>    <span class="hljs-comment">//访问父类的方法，不能访问父类的 private 方法      super.方法名(参数列表);</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.test100();<br>        <span class="hljs-built_in">super</span>.test200();<br>        <span class="hljs-built_in">super</span>.test300();<br>        <span class="hljs-comment">//super.test400();//不能访问父类 private 方法</span><br>    &#125;<br>    <span class="hljs-comment">//访问父类的构造器(这点前面用过)：super(参数列表);只能放在构造器的第一句，只能出现一句！</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//super();</span><br>        <span class="hljs-comment">//super(&quot;jack&quot;, 10);</span><br>        <span class="hljs-built_in">super</span>(<span class="hljs-string">&quot;jack&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="super-和-this-的比较"><a href="#super-和-this-的比较" class="headerlink" title="super 和 this 的比较"></a>super 和 this 的比较</h3> <img src="image-20220901151016279.png" srcset="/img/loading.gif" lazyload alt="image-20220901151016279" style="zoom: 48%;" />







<h2 id="方法重写-x2F-覆盖"><a href="#方法重写-x2F-覆盖" class="headerlink" title="方法重写&#x2F;覆盖"></a>方法重写&#x2F;覆盖</h2><ul>
<li>基本介绍</li>
</ul>
<p>简单地说：<strong>方法重写（覆盖）</strong>就是子类有一个方法，和父类的某个方法的 <strong>名称、返回类型、参数</strong> 均一致，那么就称子类的这个方法覆盖了父类的方法（其中的父类不要求是直接父类）</p>
<h3 id="注意事项与细节"><a href="#注意事项与细节" class="headerlink" title="注意事项与细节"></a>注意事项与细节</h3><p>方法重写需要满足的条件</p>
<ul>
<li><p>子类方法的 <strong>参数，方法名称</strong> 均要和父类方法一致</p>
</li>
<li><p>子类方法的 <strong>返回类型</strong> 要和父类方法的 <strong>返回类型一致</strong>，或者是父类<strong>返回类型的子类</strong></p>
<p>比如：父类方法返回类型是 Object，子类返回类型可以是 String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//父类方法</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-keyword">public</span> A <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-comment">//子类方法</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-keyword">public</span> B <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br><span class="hljs-comment">//其中B是A的子类</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>子类方法不能缩小父类方法的访问权限</strong></p>
</li>
</ul>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><ul>
<li>多态的基本介绍</li>
</ul>
<p>方法或对象具有多种形态</p>
<h3 id="多态的具体体现"><a href="#多态的具体体现" class="headerlink" title="多态的具体体现"></a>多态的具体体现</h3><ul>
<li><h4 id="方法的多态"><a href="#方法的多态" class="headerlink" title="方法的多态"></a>方法的多态</h4><p><strong>重写和重载均体现多态</strong></p>
</li>
<li><h4 id="对象的多态（-核心，困难，重点）"><a href="#对象的多态（-核心，困难，重点）" class="headerlink" title="对象的多态（ 核心，困难，重点）"></a><strong>对象的多态（ 核心，困难，重点）</strong></h4><ul>
<li><strong>一个对象的编译类型和运行类型可以不一致</strong></li>
<li>编译类型在定义对象是就已经确定了，不能改变</li>
<li>运行类型是可以变化的</li>
<li><strong>编译类型看 定义时 &#x3D; 号的 左边，运行类型看 &#x3D; 号的 右边</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();  <span class="hljs-comment">// animal 编译类型是 Animal，运行类型是 Dog</span><br>animal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();  <span class="hljs-comment">// animal 编译类型仍然是 Animal，但运行类型变成了 Cat</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.objectPoly;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyObject</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//体验对象多态特点</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(); <span class="hljs-comment">// animal 编译类型就是 Animal，运行类型是 Dog</span><br>        animal.cry(); <span class="hljs-comment">// 因为运行到这里时，animal 的运行类型是 Dog，所以是Dog的cry()</span><br><br>        animal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(); <span class="hljs-comment">// animal 编译类型仍是 Animal，运行类型是 Cat</span><br>        animal.cry(); <span class="hljs-comment">// 因为运行到这里时，animal 的运行类型是 Cat，所以是Cat的cry()</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.objectPoly;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Dog cry()&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.objectPoly;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Cat cry()&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="多态注意事项与细节"><a href="#多态注意事项与细节" class="headerlink" title="多态注意事项与细节"></a>多态注意事项与细节</h3><p><strong>多态的前提： 两个对象（类）存在继承关系</strong></p>
<h4 id="多态的向上转型"><a href="#多态的向上转型" class="headerlink" title="多态的向上转型"></a>多态的向上转型</h4><ul>
<li><p><strong>本质：父类的引用指向了子类的对象</strong></p>
</li>
<li><p>语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Java">父类类型 引用名 = <span class="hljs-keyword">new</span> 子类类型();<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>特点：</strong>编译类型看左边，运行类型看右边</p>
<p>​			可以调用父类中的所有成员（需遵守访问权限）</p>
<p>​			不能调用子类中的特有成员（因为在编译阶段，能调用哪些成员，是由编译类型决定的）</p>
<p>​			<strong>最终运行效果看子类的具体实现（运行(调用方法)时，按照从运行类型(子类)开始查找方法）</strong></p>
</li>
</ul>
<h4 id="多态的向下转型"><a href="#多态的向下转型" class="headerlink" title="多态的向下转型"></a>多态的向下转型</h4><ul>
<li><p>语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">子类类型 引用名 = (子类类型) 父类引用;<br></code></pre></td></tr></table></figure>
</li>
<li><p>只能强转父类的引用，不能强转父类的对象</p>
</li>
<li><p>要求父类的引用当前必须指向目标类型的对象</p>
</li>
<li><p><strong>向下转型后，可以调用子类类型中所有的成员</strong></p>
</li>
<li><p>（用 引用的指向 的思想来思考）</p>
</li>
</ul>
<p>案例：向上转型和向下转型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//向上转型：父类的引用指向了子类的对象</span><br>        <span class="hljs-comment">//语法：父类类型 引用名 = new 子类类型();</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(); <span class="hljs-comment">// 这个也没有问题，Object 是 Animal 的父类</span><br><br>        <span class="hljs-comment">//向上转型调用方法的规则如下:</span><br>        <span class="hljs-comment">//(1)可以调用父类中的所有成员(需遵守访问权限)</span><br>        <span class="hljs-comment">//(2)但是不能调用子类的特有的成员</span><br>        <span class="hljs-comment">//   因为在编译阶段，能调用哪些成员,是由编译类型来决定的</span><br>        <span class="hljs-comment">//   animal.catchMouse();错误</span><br>        <span class="hljs-comment">//(3)最终运行效果看子类(运行类型)的具体实现, 即运行(调用方法)时，从子类(运行类型)开始查找方法</span><br>        <span class="hljs-comment">//   然后调用，规则和前面我们讲的方法调用规则一致。</span><br>        animal.eat(); <span class="hljs-comment">//猫吃鱼..</span><br>        animal.run(); <span class="hljs-comment">//跑</span><br>        animal.sleep(); <span class="hljs-comment">//睡</span><br>        animal.show(); <span class="hljs-comment">//hello,你好</span><br>        <br>        System.out.println(<span class="hljs-string">&quot;=============&quot;</span>);<br>        <br>        <span class="hljs-comment">//希望可以调用子类的特有方法（Cat的catchMouse()方法）</span><br>        <span class="hljs-comment">//多态的向下转型</span><br>        <span class="hljs-comment">//语法：子类类型 引用名 = (子类类型) 父类引用;</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> (Cat) animal;  <span class="hljs-comment">//编译类型变成了Cat，运行类型也是Cat</span><br>        cat.catchMouse();  <span class="hljs-comment">//猫抓老鼠</span><br>        <span class="hljs-comment">//(2)要求父类的引用必须指向的是当前目标类型的对象</span><br>        <span class="hljs-comment">// Dog dog = (Dog) animal; //错误</span><br>        <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;动物&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;吃&quot;</span>);&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;跑&quot;</span>);&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sleep</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;睡&quot;</span>);&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;hello,你好&quot;</span>);&#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">// 方法重写</span><br>        System.out.println(<span class="hljs-string">&quot;猫吃鱼&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">catchMouse</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">// Cat的特有方法</span><br>        System.out.println(<span class="hljs-string">&quot;猫抓老鼠&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">// 方法重写</span><br>        System.out.println(<span class="hljs-string">&quot;狗吃骨头&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="多态的属性问题"><a href="#多态的属性问题" class="headerlink" title="多态的属性问题"></a>多态的属性问题</h4><ul>
<li><strong>属性没有重写之说，属性的值看编译类型</strong></li>
<li><strong>instanceOf 比较操作符</strong>，用于判断对象的 <strong>运行类型</strong> 是否为 XX类型 或 XX类型 的 子类型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//属性没有重写之说！属性的值看编译类型</span><br>        <span class="hljs-type">Base</span> <span class="hljs-variable">base</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sub</span>();<span class="hljs-comment">//向上转型</span><br>        System.out.println(base.count);<span class="hljs-comment">// ？ 看编译类型 10</span><br>        <span class="hljs-type">Sub</span> <span class="hljs-variable">sub</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sub</span>();<br>        System.out.println(sub.count);<span class="hljs-comment">//? 看编译类型 20</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123; <span class="hljs-comment">//父类</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<span class="hljs-comment">//属性</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123;<span class="hljs-comment">//子类</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<span class="hljs-comment">//属性</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.java_study.poly_.detail_;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyDetail03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">BB</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        System.out.println(bb <span class="hljs-keyword">instanceof</span> BB);  <span class="hljs-comment">//true</span><br>        System.out.println(bb <span class="hljs-keyword">instanceof</span> AA);  <span class="hljs-comment">//true</span><br><br>        <span class="hljs-comment">//aa 编译类型 AA, 运行类型是 BB</span><br>        <span class="hljs-comment">//BB 是 AA 子类</span><br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        System.out.println(aa <span class="hljs-keyword">instanceof</span> AA);  <span class="hljs-comment">//true</span><br>        System.out.println(aa <span class="hljs-keyword">instanceof</span> BB);  <span class="hljs-comment">//true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;&#125;  <span class="hljs-comment">//父类</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AA</span> &#123;&#125;  <span class="hljs-comment">//子类</span><br></code></pre></td></tr></table></figure>





<h3 id="动态绑定机制（很重要）"><a href="#动态绑定机制（很重要）" class="headerlink" title="动态绑定机制（很重要）"></a>动态绑定机制（很重要）</h3><ul>
<li>当调用对象方法的时候，该方法会和该对象的 内存地址&#x2F;运行类型 绑定</li>
<li>当调用对象属性时，没有动态绑定机制，哪里声明，哪里使用<strong>（用谁的方法就用谁的属性）</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.dynamic_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicBinding</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//a 的编译类型 A, 运行类型 B</span><br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">//向上转型</span><br>        System.out.println(a.sum()); <span class="hljs-comment">//? 40 -&gt; 30</span><br>        System.out.println(a.sum1()); <span class="hljs-comment">//? 30 -&gt; 20</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<span class="hljs-comment">//父类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//动态绑定机制:</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//父类 sum()</span><br>        <span class="hljs-keyword">return</span> getI() + <span class="hljs-number">10</span>; <span class="hljs-comment">//20 + 10</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum1</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//父类 sum1()</span><br>        <span class="hljs-keyword">return</span> i + <span class="hljs-number">10</span>; <span class="hljs-comment">//10 + 10</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getI</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//父类 getI</span><br>        <span class="hljs-keyword">return</span> i;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span>&#123; <span class="hljs-comment">//子类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<br>    <span class="hljs-comment">// public int sum() &#123;</span><br>    <span class="hljs-comment">// return i + 20;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getI</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//子类 getI()</span><br>        <span class="hljs-keyword">return</span> i;<br>    &#125;<br>    <span class="hljs-comment">// public int sum1() &#123;</span><br>    <span class="hljs-comment">// return i + 10;</span><br>    <span class="hljs-comment">// &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="多态数组"><a href="#多态数组" class="headerlink" title="多态数组"></a>多态数组</h3><p>数组的定义类型为父类类型，里面保存的实际元素类型为子类类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyArray</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 应用实例：现有一个继承结构如下：要求创建 1 个 Person 对象、2 个 Student 对象和 2 个 Teacher 对象,</span><br>        <span class="hljs-comment">// 统一放在数组中，并调用每个对象say 方法.</span><br>        Person[] person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>[<span class="hljs-number">5</span>];<br>        person[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">20</span>);<br>        person[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;marry&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">100</span>);<br>        person[<span class="hljs-number">2</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-number">17</span>,<span class="hljs-number">30.1</span>);<br>        person[<span class="hljs-number">3</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teather</span>(<span class="hljs-string">&quot;scott&quot;</span>,<span class="hljs-number">30</span>,<span class="hljs-number">20000</span>);<br>        person[<span class="hljs-number">4</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teather</span>(<span class="hljs-string">&quot;king&quot;</span>,<span class="hljs-number">50</span>,<span class="hljs-number">30000</span>);<br>        <span class="hljs-comment">//循环遍历多态数组，调用say</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; person.length; i++) &#123;<br>            <span class="hljs-comment">// 提示：person[i]的编译类型时Person，运行情况时根据实际情况由JVM判断</span><br>            System.out.println(person[i].say()); <span class="hljs-comment">//动态绑定机制</span><br>            <span class="hljs-comment">//应用实例升级：如何调用子类特有的方法，比如</span><br>            <span class="hljs-comment">//Teacher 有一个 teach , Student 有一个 study</span><br>            <span class="hljs-comment">//怎么调用？</span><br>            <span class="hljs-comment">//方法：类型判断 + 向下转型</span><br>            <span class="hljs-keyword">if</span> (person[i] <span class="hljs-keyword">instanceof</span> Teather) &#123;<br>                <span class="hljs-type">Teather</span> <span class="hljs-variable">teather</span> <span class="hljs-operator">=</span>(Teather) person[i]; <span class="hljs-comment">//向下转型</span><br>                teather.teach();<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (person[i] <span class="hljs-keyword">instanceof</span> Student) &#123;<br>                ((Student)person[i]).study();  <span class="hljs-comment">// 合并为一条语句</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// 返回名字和年龄</span><br>        <span class="hljs-keyword">return</span> name + <span class="hljs-string">&quot;\t&quot;</span> + age;<br>    &#125;<br>&#125;<br><br><br><br><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teather</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teather</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, age);<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSalary</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br><br>    <span class="hljs-comment">//重写父类say</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;老师 &quot;</span> + <span class="hljs-built_in">super</span>.say() + <span class="hljs-string">&quot; salary = &quot;</span> + salary;<br>    &#125;<br>    <span class="hljs-comment">//特有方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;老师 &quot;</span> + getName() + <span class="hljs-string">&quot; 正在授课&quot;</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.polyarr_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, age);<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-comment">//重写父类say</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;学生 &quot;</span> + <span class="hljs-built_in">super</span>.say() + <span class="hljs-string">&quot; score = &quot;</span> + score;<br>    &#125;<br>    <span class="hljs-comment">//特有方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">study</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;学生 &quot;</span> + getName() + <span class="hljs-string">&quot; 正在学习&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="多态参数"><a href="#多态参数" class="headerlink" title="多态参数"></a>多态参数</h3><ul>
<li><p>方法定义的形参类型为父类类型，实参类型允许为子类类型</p>
<p>应用实例1：前面的主人喂动物</p>
<p>应用实例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolyParameter</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Worker</span> <span class="hljs-variable">tom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">2500</span>);<br>        <span class="hljs-type">Manager</span> <span class="hljs-variable">milan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Manager</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">200000</span>);<br>        <span class="hljs-type">PolyParameter</span> <span class="hljs-variable">polyParameter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PolyParameter</span>();<br>        polyParameter.showEmpAnnual(tom);<br>        polyParameter.showEmpAnnual(milan);<br>        polyParameter.testWork(tom);<br>        polyParameter.testWork(milan);<br>    &#125;<br>	<span class="hljs-comment">//实现获取任何员工对象的年工资,并在 main 方法中调用该方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showEmpAnnual</span><span class="hljs-params">(Employee e)</span>&#123;<br>        System.out.println(e.getAnnual());<br>    &#125;<br>	<span class="hljs-comment">//添加一个方法，testWork,如果是普通员工，则调用 work 方法，如果是经理，则调用 manage 方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWork</span><span class="hljs-params">(Employee e)</span>&#123;<br>        <span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> Worker)&#123;<br>            ((Worker) e).work();<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> Manager)&#123;<br>            ((Manager) e).manage();<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;不做处理...&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br><br>    <span class="hljs-comment">//得到年工资的方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAnnual</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">12</span> * salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSalary</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> salary;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Manager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Employee</span>&#123;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-type">double</span> bonus;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Manager</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> salary, <span class="hljs-type">double</span> bonus)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, salary);<br>        <span class="hljs-built_in">this</span>.bonus = bonus;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getBonus</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bonus;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBonus</span><span class="hljs-params">(<span class="hljs-type">double</span> bonus)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bonus = bonus;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">manage</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;经理 &quot;</span> + getName() + <span class="hljs-string">&quot; 正在管理&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//重写获取年薪方法</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAnnual</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getAnnual() + bonus;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.java_study.poly_.polyparameter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Worker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Employee</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Worker</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> salary)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name, salary);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;普通员工 &quot;</span> + getName() + <span class="hljs-string">&quot; 正在工作&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAnnual</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//因为其它员工没有其它收入，故直接调用父类方法</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getAnnual();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="Object-类详解"><a href="#Object-类详解" class="headerlink" title="Object 类详解"></a>Object 类详解</h2><h3 id="equals-方法"><a href="#equals-方法" class="headerlink" title="equals 方法"></a>equals 方法</h3><ul>
<li><p>&#x3D;&#x3D; 和 equals 的对比</p>
<ul>
<li><p>&#x3D;&#x3D; 是一个比较运算符，既可以判断基本类型，又可以判断引用类型</p>
<p>&#x3D;&#x3D; ：如果判断基本类型，判断的是值是否相等</p>
<p><strong>&#x3D;&#x3D; ：如果判断引用类型，判断的是地址是否相等，而不是判断是否为同一个类的对象</strong></p>
</li>
<li><p>equals 是Object类中的方法，只能判断引用类型</p>
<p><strong>默认判断的是地址是否相等，子类中往往重写该方法，用于判断内容是否相等</strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Integer</span> <span class="hljs-variable">integer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1000</span>);<br><span class="hljs-type">Integer</span> <span class="hljs-variable">integer2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1000</span>);<br>System.out.println(integer1 == integer2); <span class="hljs-comment">//false</span><br>System.out.println(integer1.equals(integer2)); <span class="hljs-comment">//true</span><br><br><span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;java_study&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;java_study&quot;</span>);<br>System.out.println(str1 == str2); <span class="hljs-comment">//false</span><br>System.out.println(str1.equals(str2)); <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EqualExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;男&#x27;</span>);<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;男&#x27;</span>);<br>        System.out.println(person1.equals(person2));  <br>        <span class="hljs-comment">//未重写equals() -&gt; flase</span><br>        <span class="hljs-comment">//重写后equals() -&gt; true</span><br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">char</span> gender;<br><br>    <span class="hljs-comment">//重写equals方法</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span> &#123;<br>        <span class="hljs-comment">//判断如果比较的两个对象是同一个对象，则直接返回true</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span> == obj) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> Person) &#123; <span class="hljs-comment">//如果obj是Person，则进行比较</span><br>            <span class="hljs-comment">//进行向下转型，因为需要得到obj的各个属性</span><br>            <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> (Person) obj;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name.equals(p.name) &amp;&amp; <br>                <span class="hljs-built_in">this</span>.age == p.age &amp;&amp; <span class="hljs-built_in">this</span>.gender == p.gender;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">char</span> gender)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.gender = gender;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">char</span> <span class="hljs-title function_">getGender</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> gender;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setGender</span><span class="hljs-params">(<span class="hljs-type">char</span> gender)</span> &#123;<span class="hljs-built_in">this</span>.gender = gender;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="hashCode-方法"><a href="#hashCode-方法" class="headerlink" title="hashCode 方法"></a>hashCode 方法</h3><ul>
<li><p>提高具有哈希结构的容器的效率</p>
</li>
<li><p>两个引用，如果指向的是同一个对象，则哈希值肯定是一样的</p>
<p>两个引用，如果指向的是不同对象，则哈希值是不一样的（此处不严谨）</p>
</li>
<li><p>哈希值主要根据地址号来的，不能完全的将哈希值等价于地址</p>
</li>
<li><p>后面在集合中 hashCode 如果需要的话也会重写（在讲解集合时学习重写 hashCode 方法）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HsahCode</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa3</span> <span class="hljs-operator">=</span> aa;<br>        System.out.println(<span class="hljs-string">&quot;aa.hashCode()=&quot;</span> + aa.hashCode());  <span class="hljs-comment">//93122545</span><br>        System.out.println(<span class="hljs-string">&quot;aa2.hashCode()=&quot;</span> + aa2.hashCode());  <span class="hljs-comment">//1449621165</span><br>        System.out.println(<span class="hljs-string">&quot;aa3.hashCode()=&quot;</span> + aa3.hashCode());  <span class="hljs-comment">//93122545</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="toString-方法"><a href="#toString-方法" class="headerlink" title="toString 方法"></a>toString 方法</h3><ul>
<li><p>基本介绍</p>
<p>默认返回：全类名 + @ + 哈希值的十六进制</p>
<p>子类往往重写 toString 方法，用于返回对象的属性信息</p>
</li>
<li><p>重写 toString 方法，打印对象或拼接对象时，都会自动调用该对象的 toString 形式</p>
</li>
<li><p>当直接输出一个对象时，toString 方法会被默认的调用</p>
<p>例如 System.out.plintln(monster);  &#x2F;&#x2F;就会默认调用 monster.toString()</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToString</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        Object 的 toString() 源码</span><br><span class="hljs-comment">        (1)getClass().getName() 类的全类名(包名+类名 )</span><br><span class="hljs-comment">        (2)Integer.toHexString(hashCode()) 将对象的 hashCode 值转成 16 进制字符串</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        public String toString() &#123;</span><br><span class="hljs-comment">            return getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode());</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br><br>        <span class="hljs-type">Monster</span> <span class="hljs-variable">monster</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>(<span class="hljs-string">&quot;小妖怪&quot;</span>, <span class="hljs-string">&quot;巡山&quot;</span>, <span class="hljs-number">1000</span>);<br>        System.out.println(monster.toString());<br>        <span class="hljs-comment">//未重写 com.java_study.object_.Monster@58ceff1</span><br>        <br>        System.out.println(monster);<br>        <span class="hljs-comment">//当直接输出一个对象时，toString 方法会被默认的调用</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String job;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Monster</span><span class="hljs-params">(String name, String job, <span class="hljs-type">double</span> sal)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.job = job;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>    &#125;<br><br>    <span class="hljs-comment">//重写 toString 方法，输出对象的属性</span><br>    <span class="hljs-comment">//可使用快捷键 alt+insert -&gt; toString</span><br>    <span class="hljs-comment">//重写后一般时把对象的属性值输出，当然也可以自定义</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Monster&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, job=&#x27;&quot;</span> + job + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="finalize-方法（已弃用）"><a href="#finalize-方法（已弃用）" class="headerlink" title="finalize 方法（已弃用）"></a>finalize 方法（已弃用）</h3><ul>
<li><p>当对象被回收时，系统自动调用该对象的 finalize 方法。子类可以重写该方法，做一些释放资源的操作</p>
</li>
<li><p>什么时候被回收：当某个对象没有任何引用时，则 jvm 就认为这个对象是一个垃圾对象，就会使用垃圾回收</p>
<p>机制来销毁该对象，在销毁该对象前，会先调用 finalize 方法。</p>
</li>
<li><p>垃圾回收机制的调用，是由系统来决定(即有自己的 GC 算法)</p>
<p>也可以通过 System.gc() 主动触发垃圾回收机制</p>
</li>
<li><p>提示： 我们在实际开发中，几乎不会运用 finalize，所以更多就是为了应付面试</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.java_study.object_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Finalize_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;宝马&quot;</span>);<br>        car = <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//这时 car 原本指向的对象就成为一个垃圾，垃圾回收器就会回收（销毁）对象，</span><br>        <span class="hljs-comment">//在销毁对象前会调用该对象的 finalize 方法</span><br>        <span class="hljs-comment">//程序员就可以在 finalize 中，写自己的业务逻辑代码(比如释放资源：数据库连接,或者打开文件..)</span><br>        <span class="hljs-comment">//如果程序员不重写 finalize，那么就会调用 Object 类的 finalize，即默认处理</span><br>        System.gc();<span class="hljs-comment">//主动调用垃圾回收器</span><br>        System.out.println(<span class="hljs-string">&quot;程序退出了....&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Car</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-comment">//重写 finalize</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">finalize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>        <span class="hljs-built_in">super</span>.finalize();<br>        System.out.println(<span class="hljs-string">&quot;我们销毁汽车&quot;</span> + name);<br>        System.out.println(<span class="hljs-string">&quot;释放了内存空间&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h2 id="断点调试-Debug"><a href="#断点调试-Debug" class="headerlink" title="断点调试(Debug)"></a>断点调试(Debug)</h2><ul>
<li><p>断点调试是指在程序的某一行设置一个断点，调试时，程序运行到这一行就会停住，然后你可以一步一步往下调试，调试过程中可以看到各个变量当前的值，出错的话，调试到出错的代码行即显示错误，停下，进而分析从而找到这个Bug</p>
</li>
<li><p>断点调试也能帮助我们查看 java 底层源代码的执行过程，提高程序员的 java 水平</p>
</li>
<li><p><strong>重要提示</strong>：在断点调试过程中，是运行状态，是以对象的 运行类型 来执行的</p>
</li>
<li><p>快捷键</p>
<p>F9(resume,执行到下一个断点)<br>F7：跳入方法内<br>F8: 逐行执行代码.<br>shift+F8: 跳出方法</p>
<p> <img src="/2019/10/10/JavaNote/image-20220902150812545.png" srcset="/img/loading.gif" lazyload alt="image-20220902150812545"></p>
</li>
</ul>
<h2 id="类变量和类方法"><a href="#类变量和类方法" class="headerlink" title="类变量和类方法"></a>类变量和类方法</h2><h3 id="类变量"><a href="#类变量" class="headerlink" title="类变量"></a>类变量</h3><p>类变量也叫静态变量&#x2F;静态属性，是该类的所有对象共享的变量，任何一个该类的对象去访问它时，取到的都是相同的值，同样任何一个该类的对象去修改它时，修改的也是同一个变量。</p>
<ul>
<li>类变量（静态变量）被同一个类的所有对象实例共享</li>
<li>static 类变量，在类加载的时候就生成了</li>
<li><strong>说明：</strong>类变量是随着类的加载而创建的，所以没有创建对象实例也可以访问</li>
</ul>
<p>JDK8以前，类变量是放在方法区的静态域</p>
<p>JDK8以后，类变量是放在堆里面的，通过反射机制加载一个叫该类的Class对象… …</p>
<ul>
<li><h4 id="如何定义类变量"><a href="#如何定义类变量" class="headerlink" title="如何定义类变量"></a>如何定义类变量</h4><p>定义语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">访问修饰符 <span class="hljs-keyword">static</span> 数据类型 变量名;  <span class="hljs-comment">//推荐</span><br><span class="hljs-keyword">static</span> 访问修饰符 数据类型 变量名;  <br></code></pre></td></tr></table></figure>


</li>
<li><h4 id="如何访问类变量"><a href="#如何访问类变量" class="headerlink" title="如何访问类变量"></a>如何访问类变量</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">类名.类变量名  <span class="hljs-comment">//推荐</span><br>对象名.类变量名  <br><span class="hljs-comment">//注：静态变量的访问修饰符的访问权限规则和普通属性是一样的</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="类变量注意事项和细节"><a href="#类变量注意事项和细节" class="headerlink" title="类变量注意事项和细节"></a>类变量注意事项和细节</h4><ul>
<li><p>什么时候需要用类变量</p>
<p>当我们需要让某个类的所有对象都共享一个变量时，就可以考虑使用类变量（静态变量）</p>
</li>
<li><p>类变量与普通属性的区别</p>
<p>类变量时该类的所有对象共享的，而实例变量是每个对象独享的</p>
</li>
<li><p>类变量可以通过 类名.类变量名 或者 对象名.类变量名 来访问（推荐使用 类名.类变量名）</p>
</li>
<li><p>类变量是在类加载时就初始化了，因此即使没有创建对象，只要类加载了就可以使用类变量</p>
</li>
<li><p>类变量的生命周期时随类的加载开始，随着类的消亡而销毁</p>
</li>
</ul>
<h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><ul>
<li><p>类方法也叫静态方法</p>
</li>
<li><p>形式如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">访问修饰符 <span class="hljs-keyword">static</span> 数据返回类型 方法名()&#123;&#125;  <span class="hljs-comment">//推荐</span><br><span class="hljs-keyword">static</span> 访问修饰符 数据返回类型 方法名()&#123;&#125; <br></code></pre></td></tr></table></figure>
</li>
<li><p>类方法的调用（使用方式）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">类名.类方法名<br>对象名.类方法名<br><span class="hljs-comment">//同样需要满足访问修饰符的访问权限规则</span><br></code></pre></td></tr></table></figure>


</li>
<li><p>类方法经典使用场景</p>
<p><strong>当方法中不涉及到任何和对象相关的成员，则可以将方法设计成静态方法，提高开发效率</strong></p>
<p>比如：工具类中的方法 utils 的 Math类、Arrays类、Collections集合类 等等</p>
</li>
</ul>
<h4 id="类方法注意事项和细节"><a href="#类方法注意事项和细节" class="headerlink" title="类方法注意事项和细节"></a>类方法注意事项和细节</h4><ul>
<li><p>类方法和普通方法都是随着类的加载而加载，将结构信息存储在方法区</p>
<p>类方法中无 this 的参数，普通成员方法中隐含着 this 的参数</p>
</li>
<li><p>类方法可以通过类名调用，也可以通过对象名调用</p>
<p>普通成员方法与对象有关，不可以通过类名调用，需要通过对象名调用（对象名.方法名(参数)）</p>
</li>
<li><p>类方法中不允许使用和对象有关的关键字，比如 this 和 super</p>
<p>普通成员方法可以使用和对象有关的关键字，比如 this 和 super</p>
</li>
<li><p><strong>类方法（静态方法）只能访问 静态变量 和 静态方法 (不能直接访问，可以在方法内先创建一个对象再访问)</strong></p>
<p>普通成员方法 既可以访问 非静态成员，也可以访问 静态成员</p>
</li>
<li><p><strong>注意：类方法 通过创建本类对象的方式也可以访问 非静态成员</strong></p>
</li>
<li><p><strong>小结：静态方法只能访问静态成员，非静态方法可以访问静态成员和非静态成员（均需要遵守访问权限）</strong></p>
</li>
<li><p>补充：<strong>Java中的静态方法不能被子类重写</strong></p>
<p>特点：静态方法属于类的方法，也属于对象的方法，但是静态方法随类的存在。</p>
<p>结论：Java中的静态方法不能被子类重写，实际上，子类的静态方法隐藏了父类的静态方法，因此父类的子类的静态方法同时存在，只不过父类通过类名（或对象名）调用的是父类的静态方法，子类通过类名（或对象名）调用的是子类的静态方法。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.static_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticMethodDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        D.hi();<span class="hljs-comment">//ok</span><br>        <span class="hljs-comment">//非静态方法，不能通过类名调用</span><br>        <span class="hljs-comment">//D.say();, 错误，需要先创建对象，再调用</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>().say();<span class="hljs-comment">//可以</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//非静态方法,普通方法</span><br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//静态方法,类方法</span><br>        <span class="hljs-comment">//类方法中不允许使用和对象有关的关键字，</span><br>        <span class="hljs-comment">//比如this和super。普通方法(成员方法)可以。</span><br>        <span class="hljs-comment">//System.out.println(this.n1);</span><br>    &#125;<br><br>    <span class="hljs-comment">//类方法(静态方法)中 只能访问 静态变量 或静态方法</span><br>    <span class="hljs-comment">//口诀:静态方法只能访问静态成员.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(n2);<br>        System.out.println(D.n2);<br>        <span class="hljs-comment">//System.out.println(this.n2);不能使用</span><br>        hi();<span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//say();//错误</span><br>    &#125;<br>    <span class="hljs-comment">//普通成员方法，既可以访问  非静态成员，也可以访问静态成员</span><br>    <span class="hljs-comment">//小结: 非静态方法可以访问 静态成员和非静态成员</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//非静态成员</span><br>        System.out.println(n1);<br>        say();<br>        <span class="hljs-comment">//静态成员</span><br>        System.out.println(n2);<br>        hello();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h2 id="深入理解-main-方法"><a href="#深入理解-main-方法" class="headerlink" title="深入理解 main 方法"></a>深入理解 main 方法</h2><p><strong>解释 main 方法的形式：public static void main(String[] args) {}</strong></p>
<ul>
<li>main 方法是由 java虚拟机 调用的</li>
<li>java 虚拟机需要调用类的main()方法，所以该方法的访问权限必须是public</li>
<li>java 虚拟机在执行main()方法时不必创建对象，所以该方法必须是static</li>
<li>该方法接受String类型的数组参数，该数组中保存执行java命令时传递给所运行的类的参数</li>
<li>java 执行的程序 参数1 参数2 参数3 [举例说明]</li>
</ul>
<p> <img src="/2019/10/10/JavaNote/image-20220903110827060.png" srcset="/img/loading.gif" lazyload alt="image-20220903110827060"></p>
<p><strong>特别提示</strong></p>
<ul>
<li>在main()方法中，我们可以直接调用main方法所在类的静态方法或静态属性（不需要权限）</li>
<li>但是，不能直接访问该类中的非静态成员，必须创建该类的一个实例对象后，才能通过这个对象去访问类中的非静态成员</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.static_.main_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main01</span> &#123;<br>    <span class="hljs-comment">//静态成员</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;学习Java&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi1</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Main01的hi1方法&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//非静态成员</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>    <span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi2</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Main01的hi2方法&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1、静态方法main可以直接访问本类的静态成员</span><br>        System.out.println(n1);<br>        hi1();<br>        <span class="hljs-comment">// 2、静态方法main不可以直接访问本类的非静态成员</span><br>        <span class="hljs-comment">//stem.out.println(n2);  //错误</span><br>        <span class="hljs-comment">//hi2();  //错误</span><br>        <span class="hljs-comment">// 3、如果静态方法main要访问本类的非静态成员，需要先创建对象再调用</span><br>        <span class="hljs-type">Main01</span> <span class="hljs-variable">main01</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Main01</span>();<br>        System.out.println(main01.n2);<br>        main01.hi2();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>







<h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><p>代码块又称为初始化块，属于类中的成员[ 即 是类的一部分 ]，类似于方法，将逻辑语句封装再方法体中，通过{}包围起来；但和方法不同，没有方法名，没有返回，没有参数，只有方法体，而且<strong>不用通过对象或类显式调用，而是加载类时，或者创建对象时隐式调用。</strong></p>
<p><strong>基本语法：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">[修饰符(可选项)] &#123;<br>    <span class="hljs-comment">//代码</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<ul>
<li><strong>修饰符 可选，要写的话也只能写 static</strong></li>
<li>代码块分为两类，使用 static 修饰的叫静态代码块，没有 static 修饰的，叫普通代码块&#x2F;非静态代码块</li>
<li>逻辑语句可以分为任何逻辑语句（输入、输出、方法调用、循环、判断等）</li>
<li>{}; 中的分号 ( ; ) 可以写上，也可以省略</li>
</ul>
<p><strong>用处：</strong></p>
<ul>
<li>相当于另外一种形式的构造器（对构造器的补充机制），可以做初始化的操作</li>
<li>场景：如果多个构造器中都有重复的语句，可以抽取到初始化块中，提高代码的复用性</li>
</ul>
<h3 id="代码块注意事项与细节"><a href="#代码块注意事项与细节" class="headerlink" title="代码块注意事项与细节"></a>代码块注意事项与细节</h3><ul>
<li><p>普通的代码块，在创建对象实例时，会被隐式的调用；每创建一次，就会调用一次。</p>
<p>如果只是使用类的静态成员时，普通代码块并不会执行。</p>
</li>
<li><p>static代码块也叫静态代码块，作用就是对类进行初始化，而且它随着类的加载而执行，并且只会执行一次。</p>
</li>
<li><p>类什么时候被加载 [ 重要 ]</p>
<ul>
<li>创建对象实例时（new）</li>
<li>加载子类时，父类也会被加载</li>
<li>使用类的静态成员时（静态属性、静态方法）</li>
<li>注：每个类最多只会加载一次</li>
</ul>
</li>
<li><p><strong>创建一个对象时，在 一个类中 的调用顺序是（重难点）：</strong></p>
<ol>
<li>调用静态代码块和静态属性初始化（同优先级，按定义顺序来调用）</li>
<li>调用普通代码块和普通属性的初始化（同优先级，按定义顺序来调用）</li>
<li>调用构造方法</li>
</ol>
<p>注意：静态代码块和静态属性初始化的调用优先级一样，如果有多个静态代码块和多个静态变量初始化，则按它们定义的顺序调用；  同样，普通代码块和普通属性初始化的调用优先级一样，如果有多个普通代码块和多个普通属性初始化，则按定义顺序调用。</p>
</li>
<li><p>构造方法（构造器）的最前面其实隐含了 super() 和 调用普通代码块及普通属性初始化，而静态相关的代码块和属性初始化在类加载时就执行完毕，因此是优先于构造器和普通代码块执行的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//构造器</span><br>        <span class="hljs-comment">//这里有隐藏的执行要求</span><br>        <span class="hljs-comment">// 在此之前先会进行 类的加载 (如果还没加载的话)</span><br>        <span class="hljs-comment">//（0）静态相关的代码块和属性初始化会在类加载时执行完毕</span><br>        <span class="hljs-comment">//（1）super();</span><br>        <span class="hljs-comment">//（2）调用普通代码块以及普通属性初始化</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>继承关系中 静态代码块、静态属性初始化、普通代码块、普通属性初始化、构造方法 的调用顺序：</p>
<ol>
<li>父类的静态代码块和静态属性（同优先级，按定义顺序来调用）</li>
<li>子类的静态代码块和静态属性（同优先级，按定义顺序来调用）</li>
<li>父类的普通代码块和普通属性初始化（同优先级，按定义顺序来调用）</li>
<li>父类的构造方法</li>
<li>子类的普通代码块和普通属性初始化（同优先级，按定义顺序来调用）</li>
<li>子类的构造方法</li>
</ol>
</li>
<li><p>静态代码块直接调用的话只能调用调用静态成员(静态属性和静态方法)，普通代码块可以调用任意成员</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.codeblock_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlockDetail04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//老师说明</span><br>        <span class="hljs-comment">//(1) 进行类的加载</span><br>        <span class="hljs-comment">//1.1 先加载 父类 A02   1.2 再加载 B02</span><br>        <span class="hljs-comment">//(2) 创建对象</span><br>        <span class="hljs-comment">//2.1 从子类的构造器开始</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">B02</span>();<span class="hljs-comment">//对象</span><br>        System.out.println(<span class="hljs-string">&quot;==========&quot;</span>);<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">C02</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A02</span> &#123; <span class="hljs-comment">//父类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> getVal01();<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的一个静态代码块..&quot;</span>);<span class="hljs-comment">//(2)</span><br>    &#125;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的第一个普通代码块..&quot;</span>);<span class="hljs-comment">//(5)</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> getVal02();<span class="hljs-comment">//普通属性的初始化</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal01</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的静态属性初始化&quot;</span>);<span class="hljs-comment">//(1)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal02</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的普通属性初始化&quot;</span>);<span class="hljs-comment">//(6)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A02</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-comment">//隐藏</span><br>        <span class="hljs-comment">//super()</span><br>        <span class="hljs-comment">//普通代码和普通属性的初始化......</span><br>        System.out.println(<span class="hljs-string">&quot;A02的构造器&quot;</span>);<span class="hljs-comment">//(7)</span><br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B02</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A02</span> &#123; <span class="hljs-comment">//</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> getVal03();<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02的一个静态代码块..&quot;</span>);<span class="hljs-comment">//(4)</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n5</span> <span class="hljs-operator">=</span> getVal04();<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02的第一个普通代码块..&quot;</span>);<span class="hljs-comment">//(9)</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal03</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02的静态属性初始化&quot;</span>);<span class="hljs-comment">//(3)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal04</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02的普通属性初始化&quot;</span>);<span class="hljs-comment">//(8)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-comment">//一定要慢慢的去品..</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B02</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-comment">//隐藏了</span><br>        <span class="hljs-comment">//super()</span><br>        <span class="hljs-comment">//普通代码块和普通属性的初始化...</span><br>        System.out.println(<span class="hljs-string">&quot;B02的构造器&quot;</span>);<span class="hljs-comment">//(10)</span><br>        <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C02</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-comment">//静态代码块，只能调用静态成员</span><br>        <span class="hljs-comment">//System.out.println(n1);错误</span><br>        System.out.println(n2);<span class="hljs-comment">//ok</span><br>        <span class="hljs-comment">//m1();//错误</span><br>        m2();<br>    &#125;<br>    &#123;<br>        <span class="hljs-comment">//普通代码块，可以使用任意成员</span><br>        System.out.println(n1);<br>        System.out.println(n2);<span class="hljs-comment">//ok</span><br>        m1();<br>        m2();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h2><p>PS：目前公认的设计模式有（23种）</p>
<p>​	<strong>什么是单例模式</strong></p>
<ul>
<li>采用一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例，并且该类只提供一个取得其对象实例的方法。</li>
<li>单例模式有两种方式：（1）饿汉式  （2）懒汉式</li>
</ul>
<p><strong>单例设计模式应用实例：</strong></p>
<p>步骤如下：</p>
<ol>
<li>构造器私有化（防止直接new）</li>
<li>类的内部创建对象</li>
<li>向外暴露一个静态的公共方法   getInstance</li>
<li>代码实现</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//饿汉式</span><br><span class="hljs-keyword">package</span> com.hspedu.single_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleTon01</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        GirlFriend xh = new GirlFriend(&quot;小红&quot;);</span><br><span class="hljs-comment">//        GirlFriend xb = new GirlFriend(&quot;小白&quot;);</span><br><br>        <span class="hljs-comment">//通过方法可以获取对象</span><br>        <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> GirlFriend.getInstance();<br>        System.out.println(instance);<br><br>        <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">instance2</span> <span class="hljs-operator">=</span> GirlFriend.getInstance();<br>        System.out.println(instance2);<br><br>        System.out.println(instance == instance2);<span class="hljs-comment">//T</span><br>        <span class="hljs-comment">//System.out.println(GirlFriend.n1);</span><br><br>        <span class="hljs-comment">//...</span><br><br><br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">//有一个类， GirlFriend</span><br><span class="hljs-comment">//只能有一个女朋友</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GirlFriend</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">//public static  int n1 = 100;</span><br>    <span class="hljs-comment">//为了能够在静态方法中，返回 gf对象，需要将其修饰为static</span><br>    <span class="hljs-comment">//對象，通常是重量級的對象, 餓漢式可能造成創建了對象，但是沒有使用.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">gf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GirlFriend</span>(<span class="hljs-string">&quot;小红红&quot;</span>);<br>    <span class="hljs-comment">//如何保障我们只能创建一个 GirlFriend 对象</span><br>    <span class="hljs-comment">//步骤[单例模式-饿汉式]</span><br>    <span class="hljs-comment">//1. 将构造器私有化</span><br>    <span class="hljs-comment">//2. 在类的内部直接创建对象(该对象是static)</span><br>    <span class="hljs-comment">//3. 提供一个公共的static方法，返回 gf对象</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">GirlFriend</span><span class="hljs-params">(String name)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;構造器被調用.&quot;</span>);<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GirlFriend <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> gf;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GirlFriend&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.single_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleTon02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//new Cat(&quot;大黃&quot;);</span><br>        <span class="hljs-comment">//System.out.println(Cat.n1);</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> Cat.getInstance();<br>        System.out.println(instance);<br><br><br>        <span class="hljs-comment">//再次調用getInstance</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">instance2</span> <span class="hljs-operator">=</span> Cat.getInstance();<br>        System.out.println(instance2);<br><br>        System.out.println(instance == instance2);<span class="hljs-comment">//T</span><br><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//希望在程序運行過程中，只能創建一個Cat對象</span><br><span class="hljs-comment">//使用單例模式</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">999</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Cat cat ; <span class="hljs-comment">//默認是null</span><br><br>    <span class="hljs-comment">//步驟</span><br>    <span class="hljs-comment">//1.仍然構造器私有化</span><br>    <span class="hljs-comment">//2.定義一個static靜態屬性對象</span><br>    <span class="hljs-comment">//3.提供一個public的static方法，可以返回一個Cat對象</span><br>    <span class="hljs-comment">//4.懶漢式，只有當用戶使用getInstance時，才返回cat對象, 後面再次調用時，會返回上次創建的cat對象</span><br>    <span class="hljs-comment">//  從而保證了單例</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Cat</span><span class="hljs-params">(String name)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;構造器調用...&quot;</span>);<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Cat <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-keyword">if</span>(cat == <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//如果還沒有創建cat對象</span><br>            cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">&quot;小可愛&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> cat;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Cat&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="饿汉式-VS-懒汉式"><a href="#饿汉式-VS-懒汉式" class="headerlink" title="饿汉式 VS 懒汉式"></a>饿汉式 VS 懒汉式</h3><ul>
<li><p>二者最主要的区别在于创建对象的时机不同：</p>
<p>饿汉式是在类加载时就创建了对象实例，而懒汉式是在使用时才创建对象实例</p>
</li>
<li><p>饿汉式不存在线程安全问题，懒汉式存在线程安全问题。</p>
</li>
<li><p>饿汉式存在浪费资源的可能，而懒汉式不存在这个问题。</p>
</li>
</ul>
<h2 id="final关键字"><a href="#final关键字" class="headerlink" title="final关键字"></a>final关键字</h2><p>final 可以修饰 类、属性、方法 和 局部变量</p>
<p>​	<strong>使用 final 的情景：</strong></p>
<ul>
<li>当不希望类被继承时，可以用 final 修饰 </li>
<li>当不希望父类的某个方法被子类覆盖&#x2F;重写（override）时，可以用 final 修饰</li>
<li>当不希望类的某个属性的值被修改，可以用 final 修饰</li>
<li>当不希望某个局部变量被修改，可以使用 final 修饰</li>
</ul>
<h3 id="final-注意事项和细节"><a href="#final-注意事项和细节" class="headerlink" title="final 注意事项和细节"></a>final 注意事项和细节</h3><ul>
<li><p>final 修饰的属性又叫常量，一般用 XX_XX_XX 来命名</p>
</li>
<li><p>final 修饰的属性在定义时，必须赋初值，并且以后不能再修改，赋值可以在如下位置之一</p>
<ul>
<li>定义时：如 public final double TAX_RATE &#x3D; 0.08;</li>
<li>在构造器中</li>
<li>在代码块中</li>
</ul>
</li>
<li><p>如果 final 修饰的属性是静态的，则初始化的位置只能是</p>
<p>（1）定义时		（2）在静态代码块中（不能在构造器中赋值）</p>
</li>
<li><p><em>final 类不能继承，但是可以实例化对象</em></p>
</li>
<li><p><em>如果类不是 final 类，但是含有 final 方法，则该方法虽然不能重写，但是可以被继承</em></p>
</li>
<li><p>一般来说，如果一个类已经是 final 类了，就没有必要再将方法修饰成 final 方法了</p>
</li>
<li><p>final 不能修饰构造方法（即构造器）</p>
</li>
<li><p>final 和 static 往往搭配使用，效率更高，不会导致类加载（底层编译器做了优化处理）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.final_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(BBB.num);<br>        <span class="hljs-comment">//包装类（String、Double等）是final类，不能被继承</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//final 和 static 往往搭配使用，效率更高，不会导致类加载（底层编译器做了优化处理）</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;BBB 静态代码块被执行&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//10000</span><br><span class="hljs-comment">//不会输出 &quot;BBB 静态代码块被执行&quot;</span><br></code></pre></td></tr></table></figure>





<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><p>当父类的某些方法，需要声明，但是又不确定如何实现时，可以将其声明为抽象方法，那么这个类就是抽象类</p>
<p>抽象类的介绍：</p>
<ul>
<li><p>用 abstract 关键字来修饰一个类时，这个类就叫抽象类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">访问修饰符 <span class="hljs-keyword">abstract</span> 类名 &#123;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>用 abstract 关键字来修饰一个方法时，这个方法就是抽象方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">访问修饰符 <span class="hljs-keyword">abstract</span> 返回类型 方法名(参数列表);  <span class="hljs-comment">//没有方法体</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>抽象类的价值更多作用是在于设计，是设计者设计好后，让子类继承并实现抽象类()</p>
</li>
<li><p>抽象类，是考官比较爱问的知识点，在框架和设计模式使用较多</p>
</li>
</ul>
<h3 id="抽象类注意事项和细节"><a href="#抽象类注意事项和细节" class="headerlink" title="抽象类注意事项和细节"></a>抽象类注意事项和细节</h3><ul>
<li>抽象类不能被实例化</li>
<li><strong>抽象类不一定要包含 abstract 方法。也就是说，抽象类可以没有 abstract 方法</strong></li>
<li><strong>一旦类包含了 abstract 方法，则这个类必须声明为 abstract</strong> </li>
<li>abstract 只能修饰类和方法，不能修饰属性和其它的</li>
<li>抽象类可以有任意成员 [抽象类本质还是类] ，比如：非抽象成员、构造器、静态属性等等（可用于继承）</li>
<li>抽象方法不能有主体，即不能实现</li>
<li>如果一个类继承了抽象类，则它必须实现抽象类的所有抽象方法，除非它自己也声明为 abstract 类</li>
<li><strong>抽象方法不能使用 private、final 和 static 来修饰，因为这些关键字都是和重写相违背的</strong></li>
</ul>
<h3 id="抽象类最佳实践-——-模板设计模式"><a href="#抽象类最佳实践-——-模板设计模式" class="headerlink" title="抽象类最佳实践 —— 模板设计模式"></a>抽象类最佳实践 —— 模板设计模式</h3><ul>
<li><p>基本介绍：</p>
<p>抽象类体现的是一种模板模式的设计，抽象类作为多个子类的通用模板，子类在抽象类的基础上进行扩展、改造，但子类总体上会保留抽象类的行为方式</p>
</li>
<li><p>模板设计模式能解决的问题：</p>
<ul>
<li>当功能实现内部一部分是确定的，一部分是不确定的，这是可以把不确定的部分暴露出去，让子类去实现</li>
<li>编写一个抽象父类，父类提供了多个子类的通用方法，并把一个或多个方法留给其子类实现</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//案例</span><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTemplate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        aa.calculateTime(); <span class="hljs-comment">//这里还是需要有良好的OOP基础，对多态</span><br><br>        <span class="hljs-type">BB</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        bb.calculateTime();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Template</span> &#123; <span class="hljs-comment">//抽象类-模板设计模式</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span>;<span class="hljs-comment">//抽象方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculateTime</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//实现方法，调用job方法</span><br>        <span class="hljs-comment">//得到开始的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        job(); <span class="hljs-comment">//动态绑定机制</span><br>        <span class="hljs-comment">//得的结束的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;任务执行时间 &quot;</span> + (end - start));<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Template</span> &#123;<br>    <span class="hljs-comment">//计算任务</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//实现Template的抽象方法job</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">800000</span>; i++) &#123;<br>            num += i;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">package</span> com.hspedu.abstract_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Template</span>&#123;<br>    <span class="hljs-comment">//计算任务</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//这里也去，重写了Template的job方法</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">80000</span>; i++) &#123;<br>            num *= i;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><h3 id="基本介绍-3"><a href="#基本介绍-3" class="headerlink" title="基本介绍"></a>基本介绍</h3><p>接口就是给出一些没有实现的方法并封装到一起，到某个类要使用时，再根据具体情况把这些方法写出来</p>
<p><strong>语法：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">interface 接口名 &#123;<br>    <span class="hljs-comment">//属性</span><br>    <span class="hljs-comment">//抽象方法（在接口中，抽象方法可以省略abstract关键字）</span><br>&#125;<br>class 类名 implements 接口 &#123;<br>    <span class="hljs-comment">//自己属性;</span><br>    <span class="hljs-comment">//自己方法;</span><br>    <span class="hljs-comment">//必须实现的接口的抽象方法</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>小结：接口是更加抽象的抽象的类，抽象类里的方法可以有方法体，接口里的所有方法都没有方法体 [JDK7.0]。</p>
<p>​			接口一线了程序设计的多态和高内聚低耦合的设计思想</p>
<p>​			<strong>补充：JDK8.0 后接口类可以有 静态方法 和 默认方法 ，也就是说接口中可以有方法的具体实现</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//案例：</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AInterface</span> &#123;<br>    <span class="hljs-comment">//写属性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//写方法</span><br>    <span class="hljs-comment">//在接口中，抽象方法，可以省略abstract关键字</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//在jdk8后，可以有默认实现方法,需要使用default关键字修饰</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;ok ...&quot;</span>);&#125;<br>    <span class="hljs-comment">//在jdk8后, 可以有静态方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;cry ....&quot;</span>);&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>接口的应用场景之一：统一规范</p>
<h3 id="接口注意事项和细节"><a href="#接口注意事项和细节" class="headerlink" title="接口注意事项和细节"></a>接口注意事项和细节</h3><ul>
<li><p>接口不能被实例化</p>
</li>
<li><p>接口中所有的方法是 public 方法，接口中抽象方法，可以不用 abstract 修饰</p>
<p>（修饰符 ‘public’ 对于接口成员是冗余的，可以不写 ）</p>
</li>
<li><p>一个普通类实现接口，就必须将该接口的所有方法都实现</p>
</li>
<li><p>抽象类实现接口，可以不用实现接口的方法</p>
</li>
<li><p>一个类同时可以实现多个接口</p>
</li>
<li><p>接口中的属性，只能是 final 的，而且是 <strong>public static final</strong> 修饰符。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">比如： <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;   实际上是 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; （必须初始化）<br></code></pre></td></tr></table></figure>
</li>
<li><p>接口中属性的访问形式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">接口名.属性名<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>接口不能继承类，但是可以继承多个别的接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span>,C &#123;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>接口的修饰符只能是 public 和 默认，这点和类的修饰符是一样的</strong></p>
</li>
</ul>
<h3 id="实现接口-VS-继承类"><a href="#实现接口-VS-继承类" class="headerlink" title="实现接口 VS 继承类"></a>实现接口 VS 继承类</h3><p>​	接口和继承解决的问题不同</p>
<ul>
<li><p>继承的价值主要在于：解决代码的复用性和可维护性</p>
</li>
<li><p>接口的价值主要在于：设计好各种规范 (方法) ，让其它类去实现这些方法，更加灵活</p>
</li>
<li><p>继承是满足 is - a 的关系，而接口只需满足 like - a 的关系</p>
</li>
<li><p>接口再一定程度上实现代码解耦 [即：接口规范性 + 动态绑定机制]</p>
</li>
</ul>
<p><strong>小结:</strong>   当子类继承了父类，就自动的拥有父类的功能<br>            如果子类需要扩展功能，可以通过实现接口的方式扩展.<br>            可以理解 实现接口 是对 java 单继承机制 的一种补充.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsVsInterface</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">LittleMonkey</span> <span class="hljs-variable">wuKong</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LittleMonkey</span>(<span class="hljs-string">&quot;悟空&quot;</span>);<br>        wuKong.climbing();<br>        wuKong.swimming();<br>        wuKong.flying();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Fishable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">swimming</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Birdable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">flying</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">//猴子</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monkey</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Monkey</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">climbing</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot; 会爬树...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//继承</span><br><span class="hljs-comment">//小结:  当子类继承了父类，就自动的拥有父类的功能</span><br><span class="hljs-comment">//      如果子类需要扩展功能，可以通过实现接口的方式扩展.</span><br><span class="hljs-comment">//      可以理解 实现接口 是 对java 单继承机制的一种补充.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LittleMonkey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Monkey</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fishable</span>,Birdable &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LittleMonkey</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swimming</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(getName() + <span class="hljs-string">&quot; 通过学习，可以像鱼儿一样游泳...&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flying</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(getName() + <span class="hljs-string">&quot; 通过学习，可以像鸟儿一样飞翔...&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h3 id="接口多态特性"><a href="#接口多态特性" class="headerlink" title="接口多态特性"></a>接口多态特性</h3><ul>
<li><h4 id="多态参数（前面案例体现）"><a href="#多态参数（前面案例体现）" class="headerlink" title="多态参数（前面案例体现）"></a>多态参数（前面案例体现）</h4><p>在前面的USB接口案例，UsbInterface usb，既可以接收手机对象，又可以接收相机对象，就体现了接口多态</p>
<p>（接口引用可以指向实现了接口的类的对象）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//多态参数</span><br><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyParameter</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//接口的多态体现</span><br>        <span class="hljs-comment">//接口类型的变量 if01 可以指向 实现了IF接口类的对象实例</span><br>        <span class="hljs-type">IF</span> <span class="hljs-variable">if01</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>();<br>        if01 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br><br>        <span class="hljs-comment">//继承体现的多态</span><br>        <span class="hljs-comment">//父类类型的变量 a 可以指向 继承AAA的子类的对象实例</span><br>        <span class="hljs-type">AAA</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BBB</span>();<br>        a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CCC</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IF</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IF</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">implements</span>  <span class="hljs-title class_">IF</span>&#123;&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AAA</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CCC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span> &#123;&#125;<br></code></pre></td></tr></table></figure>


</li>
<li><h4 id="多态数组-1"><a href="#多态数组-1" class="headerlink" title="多态数组"></a>多态数组</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyArr</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//多态数组 -&gt; 接口类型数组</span><br>        Usb[] usbs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Usb</span>[<span class="hljs-number">2</span>];<br>        usbs[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone_</span>();<br>        usbs[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Camera_</span>();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        给Usb数组中，存放 Phone  和  相机对象，Phone类还有一个特有的方法call（），</span><br><span class="hljs-comment">        请遍历Usb数组，如果是Phone对象，除了调用Usb 接口定义的方法外，</span><br><span class="hljs-comment">        还需要调用Phone 特有方法 call</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; usbs.length; i++) &#123;<br>            usbs[i].work();<span class="hljs-comment">//动态绑定..</span><br>            <span class="hljs-comment">//和前面一样，我们仍然需要进行类型的向下转型</span><br>            <span class="hljs-keyword">if</span>(usbs[i] <span class="hljs-keyword">instanceof</span> Phone_) &#123;<span class="hljs-comment">//判断他的运行类型是 Phone_</span><br>                ((Phone_) usbs[i]).call();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Usb</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone_</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Usb</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;手机可以打电话...&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;手机工作中...&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Camera_</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Usb</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;相机工作中...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
<li><h4 id="接口存在-多态传递-现象"><a href="#接口存在-多态传递-现象" class="headerlink" title="接口存在 多态传递 现象"></a>接口存在 多态传递 现象</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyPass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//接口类型的变量可以指向，实现了该接口的类的对象实例</span><br>        <span class="hljs-type">IG</span> <span class="hljs-variable">ig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>        <span class="hljs-type">IH</span> <span class="hljs-variable">ih</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>        <span class="hljs-comment">//如果IG 继承了 IH 接口，而Teacher 类实现了 IG接口</span><br>        <span class="hljs-comment">//那么，实际上就相当于 Teacher 类也实现了 IH接口.</span><br>        <span class="hljs-comment">//这就是所谓的 接口多态传递现象.</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IH</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IG</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IH</span>&#123; &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IG</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123; &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.interface_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfaceExercise02</span> &#123;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">A</span> &#123; <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; &#125;  <span class="hljs-comment">//想到 等价 public static final int x = 0;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123; <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; &#125; <span class="hljs-comment">//普通属性</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pX</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//System.out.println(x); //错误，原因：x不明确</span><br>        <span class="hljs-comment">//可以明确的指定x</span><br>        <span class="hljs-comment">//访问接口的 x 就使用 A.x</span><br>        <span class="hljs-comment">//访问父类的 x 就使用 super.x</span><br>        System.out.println(A.x + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">super</span>.x);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">C</span>().pX();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="内部类（重难点）"><a href="#内部类（重难点）" class="headerlink" title="内部类（重难点）"></a>内部类（重难点）</h2><p>如果定义类在局部位置（方法中&#x2F;代码块）：（1）局部内部类    （2）匿名内部类</p>
<p>定义在成员位置：（1）成员内部类    （2）静态内部类</p>
<ul>
<li><p>基本介绍</p>
<p>一个类的内部又完整的嵌套了另一个类结构，被嵌套的类称为内部类，嵌套其它类的类称为外部类</p>
<p>内部类最大的特点就是可以直接访问私有属性，并且可以体现类与类之间的包含关系</p>
</li>
<li><p>基本语法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span>&#123;  <span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span>&#123;  <span class="hljs-comment">//内部类</span><br>        <br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span>&#123;  <span class="hljs-comment">//外部其它类</span><br>    <br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="内部类的分类"><a href="#内部类的分类" class="headerlink" title="内部类的分类"></a>内部类的分类</h3><ul>
<li>定义在外部类局部位置上（比如说方法内、代码块）<ul>
<li>局部内部类（有类名）</li>
<li><strong>匿名内部类（没有类名）（重点）</strong></li>
</ul>
</li>
<li>定义在外部类的成员位置上<ul>
<li>成员内部类（无 static 修饰）</li>
<li>静态内部类（有 static 修饰）</li>
</ul>
</li>
</ul>
<h3 id="局部内部类"><a href="#局部内部类" class="headerlink" title="局部内部类"></a>局部内部类</h3><p>局部内部类是定义在外部类的局部位置，比如方法体中，并且有类名</p>
<ul>
<li><p>可以直接访问外部类的所有成员，包含私有成员</p>
</li>
<li><p>不能添加访问修饰符，因为它的地位就是一个局部变量，而局部变量是不能使用访问修饰符的</p>
<p>但是可以使用 final 修饰，因为局部变量也可以使用 final </p>
</li>
<li><p>作用域：仅仅在定义它的方法或代码块中</p>
</li>
<li><p>局部内部类 — 访问 —&gt; 外部类的成员 [ 访问方式：直接访问 ]</p>
</li>
<li><p>外部类 — 访问 —&gt; 局部类内部的成员 [ 访问方式：先创建对象再访问（注：必须在作用域内） ]</p>
</li>
<li><p>外部其他类 — 不能访问 —&gt; 局部内部类（因为局部内部类地位是一个局部变量）</p>
</li>
<li><p>如果外部类和局部内部类的成员重名时，默认遵循就近原则。</p>
<p>如果想访问外部类的成员，则可以使用（外部类名.this.成员）去访问</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalinnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer02</span> <span class="hljs-variable">outer02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer02</span>();<br>        outer02.m1();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer02</span> &#123;  <span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Ouner02 m2()&quot;</span>);<br>    &#125;;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//方法</span><br>        <span class="hljs-comment">// * 局部内部类是定义在外部类的局部位置，通常在方法</span><br>        <span class="hljs-comment">// * 不能添加访问修饰符，但是可以使用 final 修饰</span><br>        <span class="hljs-comment">// * 作用域：仅仅在定义它的方法或代码块中</span><br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner02</span> &#123;  <span class="hljs-comment">//局部内部类</span><br>            <span class="hljs-comment">// * 可以直接访问外部类的所有成员，包括私有成员</span><br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;n1=&quot;</span> + n1);<br>                m2();<br>                <span class="hljs-comment">// * 如果外部类和局部内部类的成员重名时，默认遵循就近原则</span><br>                <span class="hljs-comment">//   如果想访问外部类的成员，使用（外部类名.this.成员）去访问</span><br>                <span class="hljs-comment">//   解读：Outer02.this 本质就是外部类的对象</span><br>                <span class="hljs-comment">//        即哪个对象调用了m1，Outer02.this就指向哪个对象</span><br>                System.out.println(<span class="hljs-string">&quot;就近n1=&quot;</span> + n1 + <span class="hljs-string">&quot; 外部类的n1=&quot;</span> + Outer02.<span class="hljs-built_in">this</span>.n1);<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// * 外部类访问局部内部类成员：在方法中，可以创建 Inner02对象，然后访问</span><br>        <span class="hljs-type">Inner02</span> <span class="hljs-variable">inner02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner02</span>();<br>        inner02.f1();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="匿名内部类（重难点）"><a href="#匿名内部类（重难点）" class="headerlink" title="匿名内部类（重难点）"></a>匿名内部类（重难点）</h3><p>（1）本质是类  （2）内部类  （3）该类没有名字  （4）同时还是一个对象</p>
<ul>
<li><p>匿名内部类的基本语法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">new</span> 类或接口(参数列表)&#123;<br>    类体<br>&#125;;<br></code></pre></td></tr></table></figure>
</li>
<li><p>匿名内部类的语法比较奇特，因为匿名内部类既是一个类的定义，同时它本身也是一个对象，因此从语法上看，它既有 定义类 的特征，也有 创建对象 的特征，因此可以调用匿名内部类方法</p>
</li>
<li><p>可以直接访问外部类的所有成员，包含私有成员</p>
</li>
<li><p>不能添加访问修饰符，因为它的地位就是一个局部变量</p>
</li>
<li><p>作用域：仅仅在定义它的方法或代码块中</p>
</li>
<li><p>匿名内部类 — 访问 —&gt; 外部类成员 [ 访问方式：直接访问 ]</p>
</li>
<li><p>外部其他类 — 不能访问 —&gt; 匿名内部类 （因为匿名内部类地位是一个局部变量）</p>
</li>
<li><p>如果外部类和匿名内部类的成员重名时，匿名内部类访问成员默认遵循就近原则</p>
<p>如果想访问外部类的成员，则可以使用（外部类名.this.成员）去访问</p>
<p>（在匿名内部类中，外部类名.this 即是 该外部类对象的引用）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">//匿名内部类的 本质 与 使用 </span><br><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousinnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer04</span> <span class="hljs-variable">outer04</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer04</span>();<br>        outer04.method();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer04</span>&#123;  <span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//方法</span><br>        <span class="hljs-comment">//基于接口的匿名内部类</span><br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//1.需求：想使用接口IA并创建对象</span><br>        <span class="hljs-comment">//  传统方式：写一个类，实现接口，并创建对象</span><br>        <span class="hljs-comment">//  但希望 Tiger 只用一次，后面不再使用，传统方式耗费资源</span><br>        <span class="hljs-comment">//  我们可以使用匿名内部类来简化开发</span><br>        <span class="hljs-comment">//  tiger 的编译类型：IA</span><br>        <span class="hljs-comment">//  tiger 的运行类型：匿名内部类 XXX =&gt; Outer04$1</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            我们看底层.底层会分配类名：外部类名称$1</span><br><span class="hljs-comment">            class XXX implements IA&#123;</span><br><span class="hljs-comment">                @Override</span><br><span class="hljs-comment">                public void cry() &#123;</span><br><span class="hljs-comment">                    System.out.println(&quot;老虎叫唤...&quot;);</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//  JDK底层在创建匿名内部类 Outerus04$1，立马就创建了 Outer04$1实例</span><br>        <span class="hljs-comment">//  并且把地址返回给 tiger</span><br>        <span class="hljs-comment">//  匿名内部类使用一次后就不能再使用，但创建出来的对象可继续反复使用</span><br><span class="hljs-comment">//        IA tiger = new Tiger();</span><br><span class="hljs-comment">//        tiger.cry();</span><br>        <span class="hljs-type">IA</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IA</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;老虎叫唤...&quot;</span>);<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;tiger的运行类型：&quot;</span> + tiger.getClass());<br>        tiger.cry();<br><br>        <span class="hljs-comment">//基于类的匿名内部类</span><br>        <span class="hljs-comment">//分析：</span><br>        <span class="hljs-comment">//1.father 编译类型：Father</span><br>        <span class="hljs-comment">//  father 运行类型：Outer04$2</span><br>        <span class="hljs-comment">//  底层会创建匿名内部类</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            class Outer04$2 extends Father&#123;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//  同时也直接返回了 匿名内部了 Outer04$2 的对象</span><br>        <span class="hljs-comment">//  注意：参数列表(&quot;jack&quot;)会传递给 构造器</span><br>        <span class="hljs-type">Father</span> <span class="hljs-variable">father</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Father</span>(<span class="hljs-string">&quot;jack&quot;</span>)&#123;<br>            <span class="hljs-comment">//public Father(String name)&#123; &#125;  //构造器不能重写</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了test方法&quot;</span>);<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;father的运行类型：&quot;</span> + father.getClass());<br>        father.test();<br><br>        <span class="hljs-comment">//基于抽象类的匿名内部类，方法必须实现</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;小狗吃骨头...&quot;</span>);<br>            &#125;<br>        &#125;;<br>        animal.eat();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span>&#123;  <span class="hljs-comment">//接口</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//class Tiger implements IA&#123;</span><br><span class="hljs-comment">//    @Override</span><br><span class="hljs-comment">//    public void cry() &#123;</span><br><span class="hljs-comment">//        System.out.println(&quot;老虎叫唤...&quot;);</span><br><span class="hljs-comment">//    &#125;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;  <span class="hljs-comment">//外部其它类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Father</span><span class="hljs-params">(String name)</span>&#123;  <span class="hljs-comment">//构造器</span><br>        System.out.println(<span class="hljs-string">&quot;接收到name：&quot;</span> + name);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;  <span class="hljs-comment">//方法</span><br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//匿名内部类 的 细节</span><br><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousInnerClassDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer05</span> <span class="hljs-variable">outer05</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer05</span>();<br>        outer05.f1();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer05</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//创建一个基于类的匿名内部类</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>() &#123;<br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">111</span>;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了hi方法&quot;</span>);<br>                <span class="hljs-comment">//可以直接访问外部类的所有成员，包括私有成员</span><br>                System.out.println(<span class="hljs-string">&quot;访问外部类私有成员n1：&quot;</span> + n1);<br>                <span class="hljs-comment">//如果外部类和匿名内部类的成员重名时，匿名内部类访问成员默认遵循就近原则</span><br>                <span class="hljs-comment">//如果想访问外部类的成员，则可以使用（外部类名.this.成员）去访问</span><br>                System.out.println(<span class="hljs-string">&quot;就近n2：&quot;</span> + n2);<br>                System.out.println(<span class="hljs-string">&quot;外部类n2：&quot;</span> + Outer05.<span class="hljs-built_in">this</span>.n2);<br>                <span class="hljs-comment">// （外部类名.this）即是该外部类对象的引用</span><br>            &#125;<br>        &#125;;<br>        p.hi(); <span class="hljs-comment">// 动态绑定，运行类型时Outer05$1</span><br>        <span class="hljs-comment">// 也可以直接调用，匿名内部类本身也是返回对象</span><br>        <span class="hljs-comment">// class 匿名内部类 extends Person &#123;&#125;</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span> &#123;<br>                <span class="hljs-built_in">super</span>.ok(str);<br>            &#125;<br>        &#125;.ok(<span class="hljs-string">&quot;jack&quot;</span>);<br>    &#125;<br>    <br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;  <span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Person hi()&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Peson ok()：&quot;</span> + str);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 抽象类/接口...</span><br></code></pre></td></tr></table></figure>



<h4 id="匿名内部类最佳实践"><a href="#匿名内部类最佳实践" class="headerlink" title="匿名内部类最佳实践"></a>匿名内部类最佳实践</h4><p>当做实参直接传递，简洁高效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//实践1</span><br><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//当做实参直接传递，简洁高效，更加灵活</span><br>        f1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IL</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;这是一副名画~~...&quot;</span>);<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//传统方法，更加统一</span><br>        f1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Picture</span>());<br>    &#125;<br>    <span class="hljs-comment">//静态方法,形参是接口类型</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(IL il)</span> &#123;<br>        il.show();<br>    &#125;<br>&#125;<br><span class="hljs-comment">//接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IL</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//类 -&gt; 实现IL =&gt; 在编程领域称为硬编码</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Picture</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IL</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;这是一副名画XX...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">//实践2</span><br><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        1.有一个铃声接口Bell，里面有个ring方法。(右图)</span><br><span class="hljs-comment">        2.有一个手机类Cellphone，具有闹钟功能alarmClock，参数是Bell类型(右图)</span><br><span class="hljs-comment">        3.测试手机类的闹钟功能，通过匿名内部类(对象)作为参数，打印：懒猪起床了</span><br><span class="hljs-comment">        4.再传入另一个匿名内部类(对象)，打印：小伙伴上课了</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">CellPhone</span> <span class="hljs-variable">cellPhone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellPhone</span>();<br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//1. 传递的是实现了 Bell接口的匿名内部类 InnerClassExercise02$1</span><br>        <span class="hljs-comment">//2. 重写了 ring</span><br>        <span class="hljs-comment">//3. 相当于 Bell bell = new Bell() &#123;</span><br>        <span class="hljs-comment">//            @Override</span><br>        <span class="hljs-comment">//            public void ring() &#123;</span><br>        <span class="hljs-comment">//                System.out.println(&quot;懒猪起床了&quot;);</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">//         &#125;</span><br>        <span class="hljs-comment">//         cellPhone.alarmClock(bell);</span><br>        cellPhone.alarmClock(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bell</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;懒猪起床了&quot;</span>);<br>            &#125;<br>        &#125;);<br><br>        cellPhone.alarmClock(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bell</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;小伙伴上课了&quot;</span>);<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bell</span>&#123; <span class="hljs-comment">//接口</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span>;<span class="hljs-comment">//方法</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CellPhone</span>&#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">alarmClock</span><span class="hljs-params">(Bell bell)</span>&#123;<span class="hljs-comment">//形参是Bell接口类型</span><br>        System.out.println(bell.getClass());<br>        bell.ring();<span class="hljs-comment">//动态绑定</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h3><p>成员内部类是定义在外部类的成员位置，并且没有static修饰</p>
<ul>
<li><p>可以直接访问外部类的所有成员，包括私有成员</p>
</li>
<li><p>可以添加任意访问修饰符(public、protected、默认、private)，因为它的地位就是一个成员</p>
</li>
<li><p>作用域和外部类的其它成员一样，为整个类体</p>
</li>
<li><p>成员内部类 — 访问 —&gt; 外部类成员 [ 访问方式：直接访问 ]</p>
</li>
<li><p>外部类 — 访问 —&gt; 成员内部类 [ 访问方式：先创建对象再访问，私有属性也可访问 ]</p>
</li>
<li><p>外部其他类 — 访问 —&gt; 成员内部类 [ 两种方式 下面案例展示 ]</p>
</li>
<li><p>如果外部类和内部类的成员重名时，内部类访问的话，默认遵循就近原则</p>
<p>如果想访问外部类的成员，则可以使用（外部类名.this.成员）去访问</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberInnerClass01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer08</span> <span class="hljs-variable">outer08</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer08</span>();<br>        outer08.t1();<br>        <br>        <span class="hljs-comment">//外部其他类，使用成员内部类的两种种方式</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">// 第一种方式</span><br>        <span class="hljs-comment">// outer08.new Inner08(); 相当于把 new Inner08()当做是outer08成员</span><br>        <span class="hljs-comment">// 这就是一个语法，不要特别的纠结.</span><br>        Outer08.<span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08</span> <span class="hljs-operator">=</span> outer08.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>        <span class="hljs-comment">//Outer08.Inner08 inner081 = new Outer08.Inner08();  //错误</span><br>        inner08.say();<br>        <span class="hljs-comment">// 第二方式 在外部类中，编写一个方法，可以返回 Inner08对象</span><br>        Outer08.<span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08Instance</span> <span class="hljs-operator">=</span> outer08.getInner08Instance();<br>        inner08Instance.say();<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer08</span> &#123; <span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;张三&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123; System.out.println(<span class="hljs-string">&quot;hi()方法...&quot;</span>); &#125;<br>    <span class="hljs-comment">//1.注意: 成员内部类，是定义在外部内的成员位置上</span><br>    <span class="hljs-comment">//2.可以添加任意访问修饰符(public、protected 、默认、private),因为它的地位就是一个成员</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner08</span> &#123;  <span class="hljs-comment">//成员内部类</span><br>        <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-variable">sal</span> <span class="hljs-operator">=</span> <span class="hljs-number">99.8</span>;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">66</span>;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-comment">// 可以直接访问外部类的所有成员，包含私有的</span><br>            <span class="hljs-comment">// 如果成员内部类的成员和外部类的成员重名，会遵守就近原则.</span><br>            <span class="hljs-comment">// 可以通过  外部类名.this.属性 来访问外部类的成员</span><br>            System.out.println(<span class="hljs-string">&quot;n1 = &quot;</span> + n1 + <span class="hljs-string">&quot; name = &quot;</span> + name + <span class="hljs-string">&quot; 外部类的n1=&quot;</span> + Outer08.<span class="hljs-built_in">this</span>.n1);<br>            hi();<br>            <span class="hljs-comment">// t1(); // 不能相互使用</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//方法，返回一个Inner08实例</span><br>    <span class="hljs-keyword">public</span> Inner08 <span class="hljs-title function_">getInner08Instance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>    &#125;<br><br>    <span class="hljs-comment">//写方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">t1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//使用成员内部类</span><br>        <span class="hljs-comment">//创建成员内部类的对象，然后使用相关的方法</span><br>        <span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>        inner08.say();<br>        System.out.println(inner08.sal);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h3><p>静态内部类是定义在外部类的成员位置，并且有 static 修饰</p>
<ul>
<li><p>可以直接访问外部类的所有静态成员，包含私有成员，但不能直接访问非静态成员</p>
</li>
<li><p>可以添加任意访问修饰符（public、protected、默认、private），因为它的地位就是一个成员</p>
</li>
<li><p>作用域：同其它成员，为整个类体</p>
</li>
<li><p>静态内部类 — 访问 —&gt; 外部类（比如静态属性）[ 访问方式：直接访问所有静态成员 ]</p>
</li>
<li><p>外部类 — 访问 —&gt; 静态内部类 [ 访问方式：先创建对象再访问 ]</p>
</li>
<li><p>外部其它类 — 访问 —&gt; 静态内部类</p>
</li>
<li><p>如果外部类和静态内部类的成员重名时，静态内部类访问的话，默认遵循就近原则</p>
<p>如果想访问外部类的成员，则可以使用（外部类名.成员）去访问</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.javaStudy.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer10</span> <span class="hljs-variable">outer10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer10</span>();<br>        outer10.m1();<br>        <span class="hljs-comment">//外部其它类 使用静态内部类</span><br>        <span class="hljs-comment">//方式1</span><br>        <span class="hljs-comment">//因为静态内部类，是可以通过类名直接访问的（前提是满足访问权限）</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer10</span>.Inner10();<br>        <span class="hljs-comment">//Inner10 inner101 = Outer10.new Inner10();  //错误</span><br>        <span class="hljs-comment">//方式2</span><br>        <span class="hljs-comment">//编写一个普通方法，可以返回静态内部类的对象实例</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner101</span> <span class="hljs-operator">=</span> outer10.getInner10();<br>        <span class="hljs-comment">//编写一个静态方法，可以返回静态内部类的对象实例</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10_</span> <span class="hljs-operator">=</span> Outer10.getInner10_();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer10</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;张三&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;张三&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Outer10 cry()...&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//Inner10就是静态内部类</span><br>    <span class="hljs-comment">//1.放在外部类的成员位置</span><br>    <span class="hljs-comment">//2.使用static修饰</span><br>    <span class="hljs-comment">//3.可以直接访问外部类的所有静态成员</span><br>    <span class="hljs-comment">//4.可以添加访问修饰符</span><br>    <span class="hljs-comment">//5.作用域：同其它成员，为整个作用域</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner10</span>&#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;李四&quot;</span>;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;<br>            <span class="hljs-comment">//System.out.println(n1);  //错误</span><br>            System.out.println(<span class="hljs-string">&quot;name：&quot;</span> + name);<br>            System.out.println(<span class="hljs-string">&quot;name2：&quot;</span> + name2);<br>            cry();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Inner10 <span class="hljs-title function_">getInner10</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Inner10 <span class="hljs-title function_">getInner10_</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();<br>        inner10.say();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><p>枚举是一组常量的集合，可以这样理解：枚举属于一种特殊的类，里面只包含一组有限的特定的对象</p>
<p><strong>枚举的两种实现方式</strong></p>
<ul>
<li>自定义类实现枚举</li>
<li>使用 enum 关键字实现枚举</li>
</ul>
<h3 id="自定义类实现枚举"><a href="#自定义类实现枚举" class="headerlink" title="自定义类实现枚举"></a>自定义类实现枚举</h3><ul>
<li>不需要提供 setXXX 方法，因为枚举对象值通常为只读</li>
<li>对枚举对象&#x2F;属性使用 final + static 共同修饰，实现底层优化</li>
<li>枚举对象名通常使用全部大写，常量的命名规范</li>
<li>枚举对象根据需要，也可以有多个属性</li>
</ul>
<p><strong>一般步骤：</strong></p>
<ul>
<li><ol>
<li>构造器私有化</li>
</ol>
</li>
<li><ol start="2">
<li>本类内部创建一组对象  比如：[四个 春夏秋冬]</li>
</ol>
</li>
<li><ol start="3">
<li>对外暴露对象（通过为对象添加 public final static 修饰符）</li>
</ol>
</li>
<li><ol start="4">
<li>可以提供 get 方法，但是不要提供 set<br> final 和 static 往往搭配使用，效率更高，不会导致类加载（底层编译器做了优化处理）</li>
</ol>
</li>
</ul>
<h3 id="enum-关键字实现枚举"><a href="#enum-关键字实现枚举" class="headerlink" title="enum 关键字实现枚举"></a>enum 关键字实现枚举</h3><p><strong>一般步骤：</strong></p>
<ul>
<li>(1) 使用关键字 enum 来替代 class</li>
<li>(2) public static final Season SPRING &#x3D; new Season(“春天”, “温暖”)<br> 直接使用 SPRING(“春天”,”温暖”);    即：常量名(实参列表)</li>
<li>(3) 如果有多个常量(对象)，使用逗号( , )间隔即可</li>
<li>(4) 如果使用 enum 实现枚举，要求把定义的常量对象写在行首</li>
</ul>
<p> <strong>enum 关键字实现枚举注意事项</strong>：</p>
<ul>
<li><p>当我们使用 enum 关键字开发一个枚举类时，默认会继承 Enum 类，而且是一个 final 类</p>
</li>
<li><p>传统的 public static final Season2 SPRING &#x3D; new Season2(“春天”,”温暖”); 简化成 SPRING(“春天”,”温暖”)</p>
<p>这里必须知道，它调用的是哪个构造器</p>
</li>
<li><p>如果使用无参构造器创建枚举对象，则实参列表和小括号都可以省略</p>
</li>
<li><p>当有多个枚举对象时，使用 逗号 ( , ) 间隔，最后有一个分号结尾</p>
</li>
<li><p>枚举对象必须放在枚举类的行首</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.javaStudy.enum_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Enumeration03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Season2.AUTUMN);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Season2</span> &#123;<br><br><span class="hljs-comment">//    public static final Season2 SPRING = new Season2(&quot;春天&quot;,&quot;温暖&quot;);</span><br><span class="hljs-comment">//    public static final Season2 WINTER = new Season2(&quot;冬天&quot;,&quot;含量&quot;);</span><br><span class="hljs-comment">//    public static final Season2 AUTUMN = new Season2(&quot;秋天&quot;,&quot;凉爽&quot;);</span><br><span class="hljs-comment">//    public static final Season2 SUMMER = new Season2(&quot;夏天&quot;,&quot;炎热&quot;);</span><br><br>    <span class="hljs-comment">//如果使用enumerate来实现枚举类:</span><br>    <span class="hljs-comment">//1.使用关键字 enum 来替代 class</span><br>    <span class="hljs-comment">//2.public static final Season SPRING = new Season(&quot;春天&quot;, &quot;温暖&quot;)</span><br>    <span class="hljs-comment">//  直接使用 SPRING(&quot;春天&quot;,&quot;温暖&quot;);  即：常量名(实参列表)</span><br>    <span class="hljs-comment">//3.如果有多个常量(对象)，使用逗号(,)间隔即可</span><br>    <span class="hljs-comment">//4.如果使用 enum 实现枚举，要求把定义的常量对象写在前面</span><br><br>    SPRING(<span class="hljs-string">&quot;春天&quot;</span>,<span class="hljs-string">&quot;温暖&quot;</span>),WINTER(<span class="hljs-string">&quot;冬天&quot;</span>,<span class="hljs-string">&quot;含量&quot;</span>),AUTUMN(<span class="hljs-string">&quot;秋天&quot;</span>,<span class="hljs-string">&quot;凉爽&quot;</span>),SUMMER(<span class="hljs-string">&quot;夏天&quot;</span>,<span class="hljs-string">&quot;炎热&quot;</span>);<br>    <span class="hljs-comment">//What;  //使用 无参构造器</span><br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String desc;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Season2</span><span class="hljs-params">()</span>&#123;&#125;  <span class="hljs-comment">//无参构造器</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Season2</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Season&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, desc=&#x27;&quot;</span> + desc + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>课堂练习</strong></p>
 <img src="image-20220905151511623.png" srcset="/img/loading.gif" lazyload alt="image-20220905151511623" style="zoom:50%;" />

<p> 补充（原注释）：[ 返回值: the name of this enum constant ]</p>
<h3 id="enum-常用方法"><a href="#enum-常用方法" class="headerlink" title="enum 常用方法"></a>enum 常用方法</h3><p>说明：使用关键字 enum 时，会隐式继承 Enum 类, 这样我们就可以使用 Enum 类相关的方法。</p>
<p> <img src="/2019/10/10/JavaNote/image-20220905215119841.png" srcset="/img/loading.gif" lazyload alt="image-20220905215119841"></p>
<ul>
<li><ol>
<li>toString：Enum 类已经重写过了，返回的是当前对象名，子类可以重写该方法，用于返回对象的属性信息</li>
</ol>
</li>
<li><ol start="2">
<li>name：返回当前对象名（常量名），子类中不能重写</li>
</ol>
</li>
<li><ol start="3">
<li>ordinal：返回当前对象的位置号，默认从 0 开始</li>
</ol>
</li>
<li><ol start="4">
<li>values：返回当前枚举类中所有的常量</li>
</ol>
</li>
<li><ol start="5">
<li>valueOf：将字符串转换成枚举对象，要求字符串必须为已有的常量名，否则报异常！</li>
</ol>
</li>
<li><ol start="6">
<li>compareTo：比较两个枚举常量，比较的就是编号！</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//使用Season2 枚举类，来演示各种方法</span><br>        <span class="hljs-type">Season2</span> <span class="hljs-variable">autumn</span> <span class="hljs-operator">=</span> Season2.AUTUMN;<br><br>        <span class="hljs-comment">//输出枚举对象的名字</span><br>        System.out.println(autumn.name());<br>        <span class="hljs-comment">//ordinal() 输出的是该枚举对象的次序/编号，从0开始编号</span><br>        <span class="hljs-comment">//AUTUMN 枚举对象是第三个，因此输出 2</span><br>        System.out.println(autumn.ordinal());<br>        <span class="hljs-comment">//从反编译可以看出 values方法，返回 Season2[]</span><br>        <span class="hljs-comment">//含有定义的所有枚举对象</span><br>        Season2[] values = Season2.values();<br>        System.out.println(<span class="hljs-string">&quot;===遍历取出枚举对象(增强for)====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Season2 season: values) &#123;<span class="hljs-comment">//增强for循环</span><br>            System.out.println(season);<br>        &#125;<br><br>        <span class="hljs-comment">//valueOf：将字符串转换成枚举对象，要求字符串必须为已有的常量名，否则报异常</span><br>        <span class="hljs-comment">//执行流程</span><br>        <span class="hljs-comment">//1. 根据你输入的 &quot;AUTUMN&quot; 到 Season2的枚举对象去查找</span><br>        <span class="hljs-comment">//2. 如果找到了，就返回，如果没有找到，就报错</span><br>        <span class="hljs-type">Season2</span> <span class="hljs-variable">autumn1</span> <span class="hljs-operator">=</span> Season2.valueOf(<span class="hljs-string">&quot;AUTUMN&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;autumn1=&quot;</span> + autumn1);<br>        System.out.println(autumn == autumn1);<br><br>        <span class="hljs-comment">//compareTo：比较两个枚举常量，比较的就是编号</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. 就是把 Season2.AUTUMN 枚举对象的编号 和 Season2.SUMMER 枚举对象的编号比较</span><br>        <span class="hljs-comment">//2. 看看结果</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        public final int compareTo(E o) &#123;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">            return self.ordinal - other.ordinal;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        Season2.AUTUMN的编号(3) - Season2.SUMMER的编号(2)</span><br><span class="hljs-comment">         */</span><br>        System.out.println(Season2.AUTUMN.compareTo(Season2.SUMMER));  <span class="hljs-comment">// 1</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="enum-实现接口"><a href="#enum-实现接口" class="headerlink" title="enum 实现接口"></a>enum 实现接口</h3><ul>
<li><ol>
<li>使用 enum 关键字后，就不能再继承其它类了，因为 enum 会隐式继承 Enum，而 Java 是单继承机制。</li>
</ol>
</li>
<li><ol start="2">
<li>枚举类和普通类一样，可以实现接口，如下形式。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> 类名 implements 接口 <span class="hljs-number">1</span>，接口 <span class="hljs-number">2</span>&#123;&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Music.CLASSICMUSIC.playing();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><br>&#125;<br><span class="hljs-comment">//1.使用enum关键字后，就不能再继承其它类了，因为enum会隐式继承Enum，而Java是单继承机制</span><br><span class="hljs-comment">//  enum Season3 extends A &#123;  &#125;  //错误</span><br><span class="hljs-comment">//2.enum实现的枚举类，仍然是一个类，所以还是可以实现接口的.</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IPlaying</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">playing</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Music</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IPlaying</span> &#123;<br>    CLASSICMUSIC;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">playing</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;播放好听的音乐...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><ul>
<li><p>注解(Annotation) 也被称为元数据，用于修饰解释 包、类、方法、属性、构造器、局部变量等数据信息</p>
</li>
<li><p>和注释一样，注解不影响程序逻辑，但注解可以被编译或运行，相当于嵌入在代码中的补充信息</p>
</li>
<li><p>在 JavaSE 中，注解的使用目的比较简单，例如标记过时的功能，忽略警告等。</p>
<p>在 JavaEE 中，注解占据了更重要的角色，例如用来配置应用程序的任何切面，代替 JacaEE 旧版中所遗留的臃肿代码和 XML 配置等</p>
</li>
</ul>
<h3 id="基本的-Annotation-介绍"><a href="#基本的-Annotation-介绍" class="headerlink" title="基本的 Annotation 介绍"></a>基本的 Annotation 介绍</h3><p>使用 Annotation 时要在其前面增加 @ 符号, 并把该 Annotation 当成一个修饰符使用, 用于修饰它支持的程序元素</p>
<p><strong>三个基本的 Annotation：</strong></p>
<ul>
<li><ol>
<li>@Override: 限定某个方法，是重写父类方法, 该注解只能用于方法</li>
</ol>
</li>
<li><ol start="2">
<li>@Deprecated: 用于表示某个程序元素(类, 方法等)已过时</li>
</ol>
</li>
<li><ol start="3">
<li>@SuppressWarnings: 抑制编译器警告</li>
</ol>
</li>
</ul>
<h3 id="Override-使用说明"><a href="#Override-使用说明" class="headerlink" title="@Override 使用说明"></a>@Override 使用说明</h3><p><strong>@Override: 限定某个方法，是重写父类方法, 该注解只能用于方法</strong></p>
<ul>
<li>@Override 表示知道重写父类的方法（从编译层面验证），如果父类没有该方法，则会报错</li>
<li>如果不写 @Override 注解，也可以构成重写</li>
<li>@Override 只能修饰方法，不能修饰其它类、包、属性等</li>
<li>查看 @Override 注解源码为 @Target(ElementType.METHOD)，说明只是修饰方法</li>
<li>@Target 是修饰注解的注解，称为元注解</li>
<li>关于@interface的补充说明：@补充interface不是interface，而是注解类（JDK5.0之后加入的）</li>
</ul>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;<span class="hljs-comment">//父类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        System.out.println(<span class="hljs-string">&quot;Father fly...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123;<span class="hljs-comment">//子类</span><br>    <span class="hljs-meta">@Override</span>   <span class="hljs-comment">//说明</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Son fly....&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-comment">//解读：</span><br>    <span class="hljs-comment">//1. @Override 注解放在fly方法上，表示子类的fly方法时重写了父类的fly</span><br>    <span class="hljs-comment">//2. 这里如果没有写 @Override 还是重写了父类fly</span><br>    <span class="hljs-comment">//3. 如果你写了@Override注解，编译器就会去检查该方法是否真的重写了父类的</span><br>    <span class="hljs-comment">//   方法，如果的确重写了，则编译通过，如果没有构成重写，则编译错误</span><br>    <span class="hljs-comment">//4. 看看 @Override的定义</span><br>    <span class="hljs-comment">//   解读： 如果发现 @interface 表示一个 注解类</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        @Target(ElementType.METHOD)</span><br><span class="hljs-comment">        @Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-comment">        public @interface Override &#123;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">     */</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="Deprecated-使用说明"><a href="#Deprecated-使用说明" class="headerlink" title="@Deprecated 使用说明"></a>@Deprecated 使用说明</h3><p><strong>@Deprecated: 用于表示某个程序元素(类, 方法等)已过时（即不再推荐使用，但是仍然可以使用）</strong></p>
<ul>
<li><p>用于表示某个程序元素（类，方法等）已过时（即不再推荐使用，但是仍然可以使用）</p>
</li>
<li><p>可以修饰方法、类、字段、包、参数 等等</p>
<p>@Target(value&#x3D;{TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})</p>
</li>
<li><p>@Deprecated 的作用可以做到新旧版本的兼容与过渡</p>
</li>
</ul>
<h3 id="SuppressWarnings-使用说明"><a href="#SuppressWarnings-使用说明" class="headerlink" title="@SuppressWarnings 使用说明"></a>@SuppressWarnings 使用说明</h3><p><strong>@SuppressWarnings: 抑制编译器警告</strong></p>
<p><strong>说明各种值：</strong></p>
<ul>
<li><p>unchecked 是忽略没有检查的警告</p>
</li>
<li><p>rawtypes 是忽略没有指定泛型的警告（传参时没有指定泛型的警告错误）</p>
</li>
<li><p>unused 是忽略没有使用某个变量的警告错误</p>
</li>
<li><p>@SuppressWarnings 可以修饰的元素为</p>
<p>(1) 放置的位置就是 TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE<br>(2) 该注解类有数组 String[] values() 设置一个数组比如 {“rawtypes”, “unchecked”, “unused”}</p>
</li>
<li><p>生成@SuppressWarnings时，不用背，直接点击左侧的黄色提示就可以选择</p>
</li>
<li><p>关于SuppressWarnings 作用范围是和你放置的位置相关<br>比如 @SuppressWarnings放置在 main方法，那么抑制警告的范围就是 main<br>通常我们可以放置具体的语句, 方法, 类.</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.hspedu.annotation_;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;, &quot;unchecked&quot;, &quot;unused&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SuppressWarnings_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>        <span class="hljs-type">int</span> i;<br>        System.out.println(list.get(<span class="hljs-number">1</span>));<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//        @SuppressWarnings(&#123;&quot;rawtypes&quot;&#125;)</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;mary&quot;</span>);<br><span class="hljs-comment">//        @SuppressWarnings(&#123;&quot;unused&quot;&#125;)</span><br>        <span class="hljs-type">int</span> i;<br>        System.out.println(list.get(<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 解读</span><br><span class="hljs-comment">// 1. 当我们不希望看到这些警告的时候，可以使用 SuppressWarnings注解来抑制警告信息</span><br><span class="hljs-comment">// 2. 在&#123;&quot;&quot;&#125; 中，可以写入你希望抑制(不显示)警告信息</span><br><span class="hljs-comment">// 3. 可以指定的警告类型有</span><br><span class="hljs-comment">//        //all，抑制所有警告</span><br><span class="hljs-comment">//        //boxing，抑制与封装/拆装作业相关的警告</span><br><span class="hljs-comment">//        //cast，抑制与强制转型作业相关的警告</span><br><span class="hljs-comment">//        //dep-ann，抑制与淘汰注释相关的警告</span><br><span class="hljs-comment">//        //deprecation，抑制与淘汰的相关警告</span><br><span class="hljs-comment">//        //fallthrough，抑制与switch陈述式中遗漏break相关的警告</span><br><span class="hljs-comment">//        //finally，抑制与未传回finally区块相关的警告</span><br><span class="hljs-comment">//        //hiding，抑制与隐藏变数的区域变数相关的警告</span><br><span class="hljs-comment">//        //incomplete-switch，抑制与switch陈述式(enum case)中遗漏项目相关的警告</span><br><span class="hljs-comment">//        //javadoc，抑制与javadoc相关的警告</span><br><span class="hljs-comment">//        //nls，抑制与非nls字串文字相关的警告</span><br><span class="hljs-comment">//        //null，抑制与空值分析相关的警告</span><br><span class="hljs-comment">//        //rawtypes，抑制与使用raw类型相关的警告</span><br><span class="hljs-comment">//        //resource，抑制与使用Closeable类型的资源相关的警告</span><br><span class="hljs-comment">//        //restriction，抑制与使用不建议或禁止参照相关的警告</span><br><span class="hljs-comment">//        //serial，抑制与可序列化的类别遗漏serialVersionUID栏位相关的警告</span><br><span class="hljs-comment">//        //static-access，抑制与静态存取不正确相关的警告</span><br><span class="hljs-comment">//        //static-method，抑制与可能宣告为static的方法相关的警告</span><br><span class="hljs-comment">//        //super，抑制与置换方法相关但不含super呼叫的警告</span><br><span class="hljs-comment">//        //synthetic-access，抑制与内部类别的存取未最佳化相关的警告</span><br><span class="hljs-comment">//        //sync-override，抑制因为置换同步方法而遗漏同步化的警告</span><br><span class="hljs-comment">//        //unchecked，抑制与未检查的作业相关的警告</span><br><span class="hljs-comment">//        //unqualified-field-access，抑制与栏位存取不合格相关的警告</span><br><span class="hljs-comment">//        //unused，抑制与未用的程式码及停用的程式码相关的警告</span><br><span class="hljs-comment">// 4. 关于SuppressWarnings 作用范围是和你放置的位置相关</span><br><span class="hljs-comment">//    比如 @SuppressWarnings放置在 main方法，那么抑制警告的范围就是 main</span><br><span class="hljs-comment">//    通常我们可以放置具体的语句, 方法, 类.</span><br><span class="hljs-comment">// 5.  看看 @SuppressWarnings 源码</span><br><span class="hljs-comment">// (1) 放置的位置就是 TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE</span><br><span class="hljs-comment">// (2) 该注解类有数组 String[] values() 设置一个数组比如 &#123;&quot;rawtypes&quot;, &quot;unchecked&quot;, &quot;unused&quot;&#125;</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        @Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span><br><span class="hljs-comment">            @Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-comment">            public @interface SuppressWarnings &#123;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                String[] value();</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">     */</span><br></code></pre></td></tr></table></figure>





<h3 id="JDK-的元-Annotation-元注解，-了解"><a href="#JDK-的元-Annotation-元注解，-了解" class="headerlink" title="JDK 的元 Annotation(元注解， 了解)"></a>JDK 的元 Annotation(元注解， 了解)</h3><p><strong>元注解的基本介绍：</strong></p>
<p> JDK 的元 Annotation 用于修饰其他 Annotation</p>
<p>元注解： 本身作用不大，讲这个原因希望同学们，看源码时，可以知道他是干什么的</p>
<p><strong>元注解的种类 (使用不多，了解, 不用深入研究)</strong></p>
<ul>
<li><ol>
<li>Retention &#x2F;&#x2F;指定注解的作用范围，三种 SOURCE,CLASS,RUNTIME</li>
</ol>
</li>
<li><ol start="2">
<li>Target &#x2F;&#x2F; 指定注解可以在哪些地方使用</li>
</ol>
</li>
<li><ol start="3">
<li>Documented &#x2F;&#x2F;指定该注解是否会在 javadoc 体现</li>
</ol>
</li>
<li><ol start="4">
<li>Inherited &#x2F;&#x2F;子类会继承父类注解</li>
</ol>
</li>
</ul>
<p><strong>@Retention 注解：</strong><br>说明：<br>只能用于修饰一个 Annotation 定义，用于指定该 Annotation 可以保留多长时间，@Rentention 包含一个RetentionPolicy类型的成员变量，使用 @Rentention 时必须为该 value 成员变量指定值</p>
<p>@Retention 的三种值</p>
<ul>
<li><ol>
<li>RetentionPolicy.SOURCE: 编译器使用后，直接丢弃这种策略的注解。</li>
</ol>
</li>
<li><ol start="2">
<li>RetentionPolicy.CLASS: 编译器将把注解记录在 class 文件中，当运行 Java 程序时，JVM 不会保留注解。</li>
</ol>
<p>​    这是默认值</p>
</li>
<li><ol start="3">
<li>RetentionPolicy.RUNTIME:编译器将把注解记录在 class 文件中，当运行 Java 程序时, JVM 会保留注解。</li>
</ol>
<p>​    程序可以通过反射获取该注解</p>
</li>
</ul>
 <img src="image-20220905232940982.png" srcset="/img/loading.gif" lazyload alt="image-20220905232940982" style="zoom:45%;" />



<p><strong>@Target 注解：</strong></p>
<p>用于修饰 Annotation 定义，用于指定被修饰的 Annotation 能用于修饰哪些程序元素</p>
<p>@Target 也包含一个名为 value 的成员变量</p>
<p>例如：</p>
<p>&#x2F;&#x2F;Deprecated.class 中</p>
<p>@Target({TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})</p>
<p>代表可在  TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE  等类型中使用</p>
<p><strong>@Target 的源码说明</strong></p>
 <img src="image-20220905233716325.png" srcset="/img/loading.gif" lazyload alt="image-20220905233716325" style="zoom:55%;" />



<p><strong>@Documented 注解</strong></p>
<p>@Documented 用于指定被该元 Annotation 修饰的 Annotation 类将被 javadoc 工具提取成文档，即在生成文档时，可以看到该注解</p>
<p>说明：定义为 Documented 的注解必须设置 Retention 值为 RUNTIME</p>
 <img src="image-20220905234255887.png" srcset="/img/loading.gif" lazyload alt="image-20220905234255887" style="zoom: 80%;" />

 <img src="image-20220905234323810.png" srcset="/img/loading.gif" lazyload alt="image-20220905234323810" style="zoom: 80%;" />



<p><strong>@Inherited 注解</strong></p>
 <img src="image-20220905234400437.png" srcset="/img/loading.gif" lazyload alt="image-20220905234400437" style="zoom: 45%;" />







<h2 id="异常-Exception"><a href="#异常-Exception" class="headerlink" title="异常 Exception"></a>异常 Exception</h2><p>Java 语言中，将程序执行中发生的不正常情况称为 “异常” 。  </p>
<p>注：开发过程中的语法错误和逻辑错误不是异常</p>
<p>执行过程中所发生的异常事件可分为两大类</p>
<ul>
<li><p>Error (错误)：Java 虚拟机无法解决的严重事件。如 JVM 系统内部错误、资源耗尽等严重情况。</p>
<p>比如：StackOverflowError[栈溢出] 和 OOM(out of memory)，Error 是严重错误，程序会崩溃</p>
</li>
<li><p>Exception：其它因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码进行处理。</p>
<p>例如空指针访问，试图读取不存在的文件，网络连接中断等等</p>
<p>Exception 分为两大类：运行时异常 和 编译时异常</p>
</li>
</ul>
<h3 id="异常体系图"><a href="#异常体系图" class="headerlink" title="异常体系图"></a>异常体系图</h3><p><img src="/2019/10/10/JavaNote/image-20220906143123342.png" srcset="/img/loading.gif" lazyload alt="image-20220906143123342"></p>
<ul>
<li><p>异常分为两大类，运行时异常 和 编译时异常</p>
</li>
<li><p>运行时异常，编译器检查不出来。一般是指编程时的逻辑错误，是程序员应该避免其出现的异常</p>
<p>java.lang.RuntimeException 类及它的子类都是运行时异常 （如 除0异常）</p>
</li>
<li><p>对于运行时异常，可以不做处理，因为这类异常很普遍，若全处理可能会对程序的可读性和运行效率产生影响</p>
</li>
<li><p>编译时异常，是编译器要求必须处置的异常（不然编译不能通过）</p>
</li>
</ul>
<h3 id="常见的运行时异常"><a href="#常见的运行时异常" class="headerlink" title="常见的运行时异常"></a>常见的运行时异常</h3><ul>
<li>NullPointerException 空指针异常</li>
<li>ArithmeticException 数学运算异常</li>
<li>ArrayIndexOutOfBoundsException 数组下标越界异常</li>
<li>ClassCastException 类型转换异常</li>
<li>NumberFormatException 数字格式不正确异常</li>
</ul>
<p>NullPointerException 空指针异常</p>
<p>当应用程序试图在需要对象的地方使用 null 时，抛出该异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;  <br></code></pre></td></tr></table></figure>



<p>ArithmeticException 数学运算异常</p>
<p>当出现异常的运算条件时，抛出此异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 例如 除0错误</span><br></code></pre></td></tr></table></figure>



<p>ArrayIndexOutOfBoundsException 数组下标越界异常</p>
<p>用非法索引访问数组时抛出的异常。如果索引为负或大于等于数组大小，则该索引为非法索引</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>&#125;;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= arr.length; i++) &#123;<br>    System.out.println(arr[i]);<br>&#125;<br><span class="hljs-comment">//当 i = arr.length 时，数组越界</span><br></code></pre></td></tr></table></figure>



<p>ClassCastException 类型转换异常</p>
<p>当试图将对象强制转换为不是实例的子类时，抛出该异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassCastException_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">//向上转型</span><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b2</span> <span class="hljs-operator">=</span> (B)b; <span class="hljs-comment">//向下转型，这里是OK</span><br>        <span class="hljs-type">C</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> (C)b; <span class="hljs-comment">//这里抛出ClassCastException</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;&#125;<br></code></pre></td></tr></table></figure>



<p>NumberFormatException 数字格式不正确异常</p>
<p>当应用程序试图将字符串转换成一种数值类型，但该字符串不能转换为适当格式时，抛出该异常 </p>
<p>（使用异常我们可以确保输入是满足条件数字）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberFormatException_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;学习Java&quot;</span>;<br>        <span class="hljs-comment">//将 String 转成 int</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Integer.parseInt(name); <span class="hljs-comment">//抛出 NumberFormatException</span><br>        System.out.println(num);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="编译异常"><a href="#编译异常" class="headerlink" title="编译异常"></a>编译异常</h3><p>编译异常是指在编译期间，就必须处理的异常，否则代码不能通过编译</p>
<p><strong>常见的编译异常</strong></p>
<ul>
<li>SQLException  &#x2F;&#x2F;操作数据库时，查询表可能发生的异常</li>
<li>IOException  &#x2F;&#x2F;操作文件时，发生的异常</li>
<li>FileNotFoundException  &#x2F;&#x2F;当操作一个不存在的文件时，发生的异常</li>
<li>ClassNotFoundException  &#x2F;&#x2F;加载类，而该类不存在时，发生的异常</li>
<li>EOFException  &#x2F;&#x2F;操作文件，到文件末尾，发生的异常</li>
<li>IllegalArguementException  &#x2F;&#x2F;参数异常</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Exception02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//这里如果不处理异常，则编译不能通过</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            FileInputStream fis;<br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;d:\\aa.jpg&quot;</span>);<br>            <span class="hljs-type">int</span> len;<br>            <span class="hljs-keyword">while</span> ((len = fis.read()) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.println(len);<br>            &#125;<br>            fis.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>异常处理就是当异常发生时，对异常处理的方式</p>
<p><strong>异常处理的方式：</strong></p>
<ul>
<li>try-catch-finally  程序员在代码中捕获发生的异常，自行处理</li>
<li>throws 将发生的异常抛出，交给调用者（方法）来处理，最顶级的处理者就是 JVM</li>
</ul>
<p><strong>示意图</strong></p>
 <img src="image-20220906153040367.png" srcset="/img/loading.gif" lazyload alt="image-20220906153040367" style="zoom:50%;" />

 <img src="image-20220906153102442.png" srcset="/img/loading.gif" lazyload alt="image-20220906153102442" style="zoom:50%;" />





<h4 id="try-catch-异常处理"><a href="#try-catch-异常处理" class="headerlink" title="try-catch 异常处理"></a>try-catch 异常处理</h4><p>Java 提供 try 和 catch 块来处理异常。try块 用于包含可能出错的代码，catch块 用来处理 try块 中发生的异常。</p>
<p>可以根据需要在程序中有多个 try…catch 块</p>
<ul>
<li>如果没有出现异常，则执行 try块 中所有语句，不执行 catch块 中语句，如果有 finally，最后还需要执行 finally里面的语句</li>
<li>如果出现异常，则 try块 中异常发生后，try块剩下的语句不再执行。将执行 catch块 中的语句，如果有finally，最后还要执行 finally 里面的语句</li>
</ul>
<p>基本语法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">//可能发生异常的代码</span><br>    <span class="hljs-comment">//将异常生成的对应的异常对象，传递给catch块</span><br>&#125; <span class="hljs-keyword">catch</span>(异常) &#123;<br>    <span class="hljs-comment">//对异常的处理</span><br>&#125; <span class="hljs-keyword">finally</span> &#123;<br>    <span class="hljs-comment">//不管是否发生异常都要执行的代码</span><br>&#125;<br><span class="hljs-comment">//如果没有finally，语法也是可以通过的</span><br></code></pre></td></tr></table></figure>



<p><strong>try-catch 注意事项</strong></p>
<ul>
<li><p>如果异常发生了，则异常发生后面的 try块 的代码不会执行，直接进入到catch块</p>
</li>
<li><p>如果异常没有发生，则顺序执行 try 的代码块，不会进入到 catch</p>
</li>
<li><p>如果希望不管是否发生异常，都执行某段代码（比如关闭连接，释放资源等），则需使用 finally { }</p>
</li>
<li><p>可以有多个 catch 语句，捕获不同的异常（进行不同的业务处理），要求父类异常在后，子类异常在前</p>
<p>比如（Exception 在后，NullPointerException 在前），<strong>如果发生异常，只会匹配一个 catch</strong></p>
</li>
<li><p>可以进行 try-finally 配合使用，这种用法相当于没有捕获异常，因此程序会直接崩掉&#x2F;退出。</p>
<p>应用场景，就是执行一段代码，不管是否发生异常，都必须执行某个业务逻辑</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注意事项4</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1.如果try代码块有可能有多个异常</span><br>        <span class="hljs-comment">//2.可以使用多个catch 分别捕获不同的异常，相应处理</span><br>        <span class="hljs-comment">//3.要求子类异常写在前面，父类异常写在后面</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>            <span class="hljs-comment">//person = null;</span><br>            System.out.println(person.getName()); <span class="hljs-comment">//NullPointerException</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n1 / n2; <span class="hljs-comment">//ArithmeticException</span><br>        &#125; <span class="hljs-keyword">catch</span> (NullPointerException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;空指针异常=&quot;</span> + e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;算术异常=&quot;</span> + e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注意事项5</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchDetail03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        可以进行 try-finally 配合使用, 这种用法相当于没有捕获异常，</span><br><span class="hljs-comment">        因此程序会直接崩掉/退出。应用场景，就是执行一段代码，不管是否发生异常，</span><br><span class="hljs-comment">        都必须执行某个业务逻辑</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            System.out.println(n1 / n2);<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;执行了finally..&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;程序继续执行..&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>课堂练习</strong></p>
 <img src="image-20220906194448537.png" srcset="/img/loading.gif" lazyload alt="image-20220906194448537" style="zoom:50%;" />



<p><strong>try-catch 最佳实践之一</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchExercise04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//如果用户输入的不是一个整数，就提示他反复输入，直到输入一个整数为止</span><br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 创建Scanner对象</span><br>        <span class="hljs-comment">//2. 使用无限循环，去接收一个输入</span><br>        <span class="hljs-comment">//3. 然后将该输入的值，转成一个int</span><br>        <span class="hljs-comment">//4. 如果在转换时，抛出异常，说明输入的内容不是一个可以转成int的内容</span><br>        <span class="hljs-comment">//5. 如果没有抛出异常，则break 该循环</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">inputStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;请输入一个整数:&quot;</span>); <span class="hljs-comment">//</span><br>            inputStr = scanner.next();<br>            <span class="hljs-keyword">try</span> &#123;<br>                num = Integer.parseInt(inputStr); <span class="hljs-comment">//这里是可能抛出异常</span><br>                <span class="hljs-keyword">break</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (NumberFormatException e) &#123;<br>                System.out.println(<span class="hljs-string">&quot;你输入的不是一个整数:&quot;</span>);<br>            &#125;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;你输入的值是=&quot;</span> + num);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="throws-异常处理"><a href="#throws-异常处理" class="headerlink" title="throws 异常处理"></a>throws 异常处理</h4><p>如果一个方法（方法中的语句执行时）可能生成某种异常，但是并不能确定如何处理这种异常，则此方法应显式地声明抛出异常，表明该方法将不对这些异常进行处理，而由方法的调用者负责处理</p>
<p>在方法声明中用 throws 语句可以声明抛出异常的列表，throws 后面的异常类型可以是方法中产生的异常类型，也可以是它的父类</p>
<p>注意：当 throw 语句执行时，它<strong>后面的语句将不执行</strong>，此时程序转向调用者程序，寻找与之相匹配的 catch 语句，执行相应的异常处理程序。</p>
<p><strong>throws 注意事项和细节</strong></p>
<ul>
<li><p>对于编译异常，程序中必须处理，比如 try-catch 或者 throws</p>
</li>
<li><p>对于运行时异常，程序中如果没有处理，默认就是 throws 的方式处理</p>
</li>
<li><p>子类重写父类的方法时，对抛出异常的规定：子类重写的方法，所抛出的异常类型要么和父类抛出的异常一致，要么为父类抛出的异常的类型的子类型</p>
</li>
<li><p>在 throws 过程中，如果有方法 try-catch，就相当于处理异常，就可以不必 throws</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThrowsDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        f2();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f2</span><span class="hljs-params">()</span> <span class="hljs-comment">/*throws ArithmeticException*/</span> &#123;<br>        <span class="hljs-comment">//1.对于编译异常，程序中必须处理，比如 try-catch 或者 throws</span><br>        <span class="hljs-comment">//2.对于运行时异常，程序中如果没有处理，默认就是throws的方式处理</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n1 / n2;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> FileNotFoundException &#123;<br>        <span class="hljs-comment">//这里大家思考问题 调用f3() 报错</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 因为 f3() 方法抛出的是一个编译异常</span><br>        <span class="hljs-comment">//2. 即这时，就要 f1() 必须处理这个编译异常</span><br>        <span class="hljs-comment">//3. 在 f1() 中，要么 try-catch-finally ，或者继续 throws 这个编译异常</span><br>        f3(); <span class="hljs-comment">// 抛出异常</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> FileNotFoundException &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;d://aa.txt&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f4</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//解读:</span><br>        <span class="hljs-comment">//1. 在 f4() 中调用方法 f5() 是 OK 的</span><br>        <span class="hljs-comment">//2. 原因是 f5() 抛出的是运行异常</span><br>        <span class="hljs-comment">//3. 而java中，并不要求程序员显示处理，因为有默认处理机制</span><br>        f5();<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f5</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ArithmeticException &#123; <br>    <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> &#123; <span class="hljs-comment">//父类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> RuntimeException &#123;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123;<span class="hljs-comment">//子类</span><br>    <span class="hljs-comment">//3. 子类重写父类的方法时，对抛出异常的规定:子类重写的方法，</span><br>    <span class="hljs-comment">//   所抛出的异常类型要么和父类抛出的异常一致，要么为父类抛出的异常类型的子类型</span><br>    <span class="hljs-comment">//4. 在throws 过程中，如果有方法 try-catch , 就相当于处理异常，就可以不必throws</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ArithmeticException &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h4><p>当程序中出现了某些 ” 错误 “ ，但该错误信息并没有在 Throwable 子类中描述处理，这个时候可以自己设计异常类，用于描述该错误信息</p>
<p><strong>自定义异常的步骤</strong></p>
<ul>
<li>（1）定义类：自定义异常类名，继承 Exception 或 RuntimeException </li>
<li>（2）如果继承 Exception，属于编译异常</li>
<li>（3）如果继承 RuntimeException，属于运行异常（一般来说，继承 RuntimeException）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-comment">/*throws AgeException*/</span> &#123;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">180</span>;<br>        <span class="hljs-comment">//要求范围在 18 – 120 之间，否则抛出一个自定义异常</span><br>        <span class="hljs-keyword">if</span>(!(age &gt;= <span class="hljs-number">18</span> &amp;&amp; age &lt;= <span class="hljs-number">120</span>)) &#123;<br>            <span class="hljs-comment">//这里我们可以通过构造器，设置信息</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgeException</span>(<span class="hljs-string">&quot;年龄需要在 18~120之间&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;你的年龄范围正确.&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//自定义一个异常</span><br><span class="hljs-comment">//解读：</span><br><span class="hljs-comment">//1. 一般情况下，我们自定义异常是继承 RuntimeException</span><br><span class="hljs-comment">//2. 即把自定义异常做成 运行时异常，好处是 我们可以使用默认的处理机制，比较方便</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AgeException</span><span class="hljs-params">(String message)</span> &#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-built_in">super</span>(message);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<p><strong>throw 和 throws 的区别</strong></p>
 <img src="image-20220906220808765.png" srcset="/img/loading.gif" lazyload alt="image-20220906220808765" style="zoom:50%;" />



<p><strong>测试题</strong></p>
 <img src="image-20220906221636588.png" srcset="/img/loading.gif" lazyload alt="image-20220906221636588" style="zoom:50%;" />



<h3 id="异常习题"><a href="#异常习题" class="headerlink" title="异常习题"></a>异常习题</h3> <img src="image-20220906222649017.png" srcset="/img/loading.gif" lazyload alt="image-20220906222649017" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        编写应用程序EcmDef.java，接收命令行的两个参数(整数)，计算两数相除。</span><br><span class="hljs-comment">        计算两个数相除，要求使用方法 cal(int n1, int n2)</span><br><span class="hljs-comment">        对数据格式不正确(NumberFormatException)、</span><br><span class="hljs-comment">        缺少命令行参数(ArrayIndexOutOfBoundsException)、</span><br><span class="hljs-comment">        除0 进行异常处理(ArithmeticException)。</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//先验证输入的参数的个数是否正确 两个参数</span><br>            <span class="hljs-keyword">if</span>(args.length != <span class="hljs-number">2</span>) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayIndexOutOfBoundsException</span>(<span class="hljs-string">&quot;参数个数不对&quot;</span>);<br>            &#125;<br>            <span class="hljs-comment">//先把接收到的参数，转成整数</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">1</span>]);<br><br>            <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> cal(n1, n2);<span class="hljs-comment">//该方法可能抛出ArithmeticException</span><br>            System.out.println(<span class="hljs-string">&quot;计算结果是=&quot;</span> + res);<br>            <br>        &#125; <span class="hljs-keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;<br>            System.out.println(e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (NumberFormatException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;参数格式不正确，需要输出整数&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;出现了除0的异常&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//编写cal方法，就是两个数的商</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n1, <span class="hljs-type">int</span> n2)</span> &#123; <span class="hljs-keyword">return</span> n1 / n2; &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h2><h3 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h3><p>针对八种基本定义相应的引用类型 —— 包装类</p>
<p>有了类的特点，就可以调用类中的方法</p>
 <img src="image-20220907141229236.png" srcset="/img/loading.gif" lazyload alt="image-20220907141229236" style="zoom:50%;" />



<h4 id="包装类和基本数据的转换"><a href="#包装类和基本数据的转换" class="headerlink" title="包装类和基本数据的转换"></a>包装类和基本数据的转换</h4><ul>
<li><p>jdk5 前的手动装箱和拆箱方式，装箱：基本类型 -&gt; 包装类型，反正，拆箱</p>
</li>
<li><p>jdk5 及以后的自动装箱和拆箱方式</p>
</li>
<li><p>自动装箱底层调用的是 valueOf 方法，比如 Integer.valueOf()</p>
<p>自动拆箱底层调用的是 xxxValue 方法，比如 intValue() 方法</p>
</li>
<li><p>其它包装类的用法类似</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Integer01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//演示 int &lt;--&gt; Integer 的装箱和拆箱</span><br>        <span class="hljs-comment">//手动装箱</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">integer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(n1);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">integer1</span> <span class="hljs-operator">=</span> Integer.valueOf(n1);<br>        <span class="hljs-comment">//手动拆箱</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> integer.intValue();<br>        <span class="hljs-comment">//自动装箱</span><br>        <span class="hljs-type">int</span> n3=<span class="hljs-number">300</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">integer2</span> <span class="hljs-operator">=</span> n3;<br>        <span class="hljs-comment">//自动拆箱</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> integer2;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>习题</p>
 <img src="image-20220907143322876.png" srcset="/img/loading.gif" lazyload alt="image-20220907143322876" style="zoom:50%;" />





<h4 id="包装类型和-String-类型的相互转换"><a href="#包装类型和-String-类型的相互转换" class="headerlink" title="包装类型和 String 类型的相互转换"></a>包装类型和 String 类型的相互转换</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperVSString</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//包装类(Integer)-&gt;String</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<span class="hljs-comment">//自动装箱</span><br>        <span class="hljs-comment">//方式1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> i + <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-comment">//方式2</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> i.toString();<br>        <span class="hljs-comment">//方式3</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str3</span> <span class="hljs-operator">=</span> String.valueOf(i);<br><br>        <span class="hljs-comment">//String -&gt; 包装类(Integer)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;12345&quot;</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> Integer.parseInt(str4);<span class="hljs-comment">//使用到自动装箱</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(str4);<span class="hljs-comment">//构造器</span><br><br>        System.out.println(<span class="hljs-string">&quot;ok~~&quot;</span>);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="Integer类和Character类的常用方法"><a href="#Integer类和Character类的常用方法" class="headerlink" title="Integer类和Character类的常用方法"></a>Integer类和Character类的常用方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Integer.MIN_VALUE); <span class="hljs-comment">//返回最小值</span><br>        System.out.println(Integer.MAX_VALUE);<span class="hljs-comment">//返回最大值</span><br><br>        System.out.println(Character.isDigit(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//判断是不是数字</span><br>        System.out.println(Character.isLetter(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//判断是不是字母</span><br>        System.out.println(Character.isUpperCase(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//判断是不是大写</span><br>        System.out.println(Character.isLowerCase(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//判断是不是小写</span><br><br>        System.out.println(Character.isWhitespace(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//判断是不是空格</span><br>        System.out.println(Character.toUpperCase(<span class="hljs-string">&#x27;a&#x27;</span>));<span class="hljs-comment">//转成大写</span><br>        System.out.println(Character.toLowerCase(<span class="hljs-string">&#x27;A&#x27;</span>));<span class="hljs-comment">//转成小写</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="Integer-类面试题-1"><a href="#Integer-类面试题-1" class="headerlink" title="Integer 类面试题 1"></a>Integer 类面试题 1</h4><ol>
<li>如果 i 在 IntegerCache.low(-128)~IntegerCache.high(127)，就直接从数组返回</li>
<li>如果不在 -128~127，就直接 new Integer(i)</li>
<li>只要有基本数据类型 判断的是值是否相同</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">1</span>);<br>        System.out.println(i == j); <span class="hljs-comment">//False</span><br>        <span class="hljs-comment">//所以，这里主要是看范围 -128 ~ 127 就是直接返回</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //解读</span><br><span class="hljs-comment">        //1. 如果i 在 IntegerCache.low(-128)~IntegerCache.high(127)，就直接从数组返回</span><br><span class="hljs-comment">        //2. 如果不在 -128~127,就直接 new Integer(i)</span><br><span class="hljs-comment">             public static Integer valueOf(int i) &#123;</span><br><span class="hljs-comment">                if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="hljs-comment">                    return IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="hljs-comment">                return new Integer(i);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//底层 Integer.valueOf(1); -&gt; 阅读源码</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//底层 Integer.valueOf(1);</span><br>        System.out.println(m == n); <span class="hljs-comment">//True</span><br>        <span class="hljs-comment">//所以，这里主要是看范围 -128 ~ 127 就是直接返回</span><br>        <span class="hljs-comment">//否则，就new Integer(xx);</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>; <span class="hljs-comment">//底层Integer.valueOf(1);</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>; <span class="hljs-comment">//底层Integer.valueOf(1);</span><br>        System.out.println(x == y); <span class="hljs-comment">//False</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrapperExercise03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//示例一</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>        System.out.println(i1 == i2); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//示例二</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">128</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">128</span>);<br>        System.out.println(i3 == i4); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//示例三</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i5</span> <span class="hljs-operator">=</span> <span class="hljs-number">127</span>;<span class="hljs-comment">//底层Integer.valueOf(127)</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i6</span> <span class="hljs-operator">=</span> <span class="hljs-number">127</span>;<span class="hljs-comment">//-128~127</span><br>        System.out.println(i5 == i6); <span class="hljs-comment">//T</span><br>        <span class="hljs-comment">//示例四</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i7</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i8</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>;<br>        System.out.println(i7 == i8); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//示例五</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i9</span> <span class="hljs-operator">=</span> <span class="hljs-number">127</span>; <span class="hljs-comment">//Integer.valueOf(127)</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">i10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>        System.out.println(i9 == i10); <span class="hljs-comment">//F</span><br>        <span class="hljs-comment">//示例六</span><br>        <span class="hljs-comment">//只要有基本数据类型 判断的是值是否相同</span><br>        Integer i11=<span class="hljs-number">127</span>;<br>        <span class="hljs-type">int</span> i12=<span class="hljs-number">127</span>;<br>        System.out.println(i11==i12); <span class="hljs-comment">//T</span><br>        <span class="hljs-comment">//示例七</span><br>        Integer i13=<span class="hljs-number">128</span>;<br>        <span class="hljs-type">int</span> i14=<span class="hljs-number">128</span>;<br>        System.out.println(i13==i14); <span class="hljs-comment">//T</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="String-类"><a href="#String-类" class="headerlink" title="String 类"></a>String 类</h3><ul>
<li><p>String 对象用于保存字符串，也就是一组字符序列</p>
</li>
<li><p>字符串常量对象是用双引号括起来的字符序列。例如：”你好”、”12.97”、”bey” 等</p>
</li>
<li><p>字符串的字符使用Unicode字符编码，一个字符（不管是字母还是汉字）占两个字节</p>
</li>
<li><p>String 类较常用构造方法（其它看手册）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>();<br><span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(String original);<br><span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-type">char</span>[] a);<br><span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-type">char</span>[] a, <span class="hljs-type">int</span> startIndex, <span class="hljs-type">int</span> count);<br><span class="hljs-type">String</span> <span class="hljs-variable">s5</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-type">byte</span>[] b);<br></code></pre></td></tr></table></figure>
</li>
<li><p>说明：</p>
 <img src="image-20220907151045071.png" srcset="/img/loading.gif" lazyload alt="image-20220907151045071" style="zoom:50%;" />
</li>
<li><p>String 类实现了 接口 Serializable [String 可以串行化:可以在网络传输]</p>
</li>
<li><p>String 类实现了 接口 Comparable [String 对象可以比较大小]</p>
</li>
<li><p>String 有属性 private final char value[];   用于存放字符串内容</p>
</li>
<li><p>一定要注意：value 是一个 final 类型，不可以修改(需要功力)：</p>
<p>即 value 不能指向新的地址，但是单个字符内容是可以变化</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">String01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.String 对象用于保存字符串，也就是一组字符序列</span><br>        <span class="hljs-comment">//2. &quot;jack&quot; 字符串常量, 双引号括起的字符序列</span><br>        <span class="hljs-comment">//3. 字符串的字符使用Unicode字符编码，一个字符(不区分字母还是汉字)占两个字节</span><br>        <span class="hljs-comment">//4. String 类有很多构造器，构造器的重载</span><br>        <span class="hljs-comment">//   常用的有 String  s1 = new String(); //</span><br>        <span class="hljs-comment">//String  s2 = new String(String original);</span><br>        <span class="hljs-comment">//String  s3 = new String(char[] a);</span><br>        <span class="hljs-comment">//String  s4 =  new String(char[] a,int startIndex,int count)</span><br>        <span class="hljs-comment">//String s5 = new String(byte[] b)</span><br>        <span class="hljs-comment">//5. String 类实现了 接口 Serializable [String 可以串行化:可以在网络传输]</span><br>        <span class="hljs-comment">//                 接口 Comparable [String 对象可以比较大小]</span><br>        <span class="hljs-comment">//6. String 是 final 类，不能被其他的类继承</span><br>        <span class="hljs-comment">//7. String 有属性 private final char value[]; 用于存放字符串内容</span><br>        <span class="hljs-comment">//8. 一定要注意：value 是一个final类型，不可以修改(需要功力)：即value不能指向</span><br>        <span class="hljs-comment">//   新的地址，但是单个字符内容是可以变化</span><br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br>        name = <span class="hljs-string">&quot;tom&quot;</span>;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] value = &#123;<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>&#125;;<br>        <span class="hljs-type">char</span>[] v2 = &#123;<span class="hljs-string">&#x27;t&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>,<span class="hljs-string">&#x27;m&#x27;</span>&#125;;<br>        value[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;H&#x27;</span>;<br>        <span class="hljs-comment">//value = v2; //不可以修改 value地址</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="String-创建剖析"><a href="#String-创建剖析" class="headerlink" title="String 创建剖析"></a>String 创建剖析</h4><ul>
<li><p>方式一：直接赋值  String s1 &#x3D; “hsp”;</p>
<p>先从常量池查看是否有 “hsp” 数据空间，如果有则直接指向；如果没有则先创建如何指向</p>
<p>s1 最终指向的是常量池的空间地址</p>
</li>
<li><p>方式二：调用构造器  String s2 &#x3D; new String(“hsp”)</p>
<p>先在堆中创建空间，里面维护了 value 属性，指向常量池的 hsp 空间</p>
<p>如果常量池中有 “hsp” 则直接通过value指向，如果没有则先创建再指向</p>
<p>s2 最终指向的是堆中的空间地址</p>
</li>
<li><p>因此 s1 !&#x3D; s2</p>
</li>
<li><p>两种方式的内存分布图：</p>
 <img src="image-20220907194812227.png" srcset="/img/loading.gif" lazyload alt="image-20220907194812227" style="zoom: 80%;" /></li>
</ul>
<h4 id="测试题"><a href="#测试题" class="headerlink" title="测试题"></a>测试题</h4> <img src="image-20220907212648493.png" srcset="/img/loading.gif" lazyload alt="image-20220907212648493" style="zoom:50%;" />



<h4 id="字符串的特性"><a href="#字符串的特性" class="headerlink" title="字符串的特性"></a>字符串的特性</h4><ul>
<li>String 是一个 final 类，代表不可变的字符序列</li>
<li>字符串是不可变的。一个字符串对象一旦被分配，其内容是不可变的</li>
</ul>
<h4 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h4> <img src="image-20220907225007862.png" srcset="/img/loading.gif" lazyload alt="image-20220907225007862" style="zoom:50%;" />

 <img src="image-20220907225026693.png" srcset="/img/loading.gif" lazyload alt="image-20220907225026693" style="zoom: 50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-comment">// 题2</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringExercise08</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>; <span class="hljs-comment">//创建 a对象</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc&quot;</span>;<span class="hljs-comment">//创建 b对象</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. 先创建一个 StringBuilder sb = StringBuilder()</span><br>        <span class="hljs-comment">//2. 执行 sb.append(&quot;hello&quot;);</span><br>        <span class="hljs-comment">//3. sb.append(&quot;abc&quot;);</span><br>        <span class="hljs-comment">//4. String c = sb.toString()  // toString() 的底层是 new</span><br>        <span class="hljs-comment">//最后其实是 c 指向堆中的对象(String) value[] -&gt; 池中 &quot;helloabc&quot;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> a + b;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;helloabc&quot;</span>;<br>        System.out.println(c == d);<span class="hljs-comment">//真还是假? 是false</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span> + <span class="hljs-string">&quot;abc&quot;</span>;<span class="hljs-comment">//直接看池， e指向常量池</span><br>        System.out.println(d == e);<span class="hljs-comment">//真还是假? 是true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

 <img src="image-20220907230439422.png" srcset="/img/loading.gif" lazyload alt="image-20220907230439422" style="zoom: 56%;" />

<p><strong>！！！</strong></p>
 <img src="image-20220907231315310.png" srcset="/img/loading.gif" lazyload alt="image-20220907231315310" style="zoom: 80%;" />





<h4 id="String-类的常见方法"><a href="#String-类的常见方法" class="headerlink" title="String 类的常见方法"></a>String 类的常见方法</h4><p>String 类是保存字符串常量的。每次更新都需要重新开辟空间，效率较低，因此 java 设计者还提供了 StringBuilder 和 StringBuffer 来增强 String 的功能，并提高效率。</p>
<ul>
<li><p>equals  &#x2F;&#x2F;区分大小写，判断内容是否相等</p>
</li>
<li><p>equalslgnoreCase  &#x2F;&#x2F;忽略大小写的判断内容是否相等</p>
</li>
<li><p>length  &#x2F;&#x2F;获取字符的个数，字符串的长度</p>
</li>
<li><p>indexOf  &#x2F;&#x2F;获取字符或子字符串在字符串中第1次出现的索引，索引从0开始，如果找不到则返回-1</p>
</li>
<li><p>lastIndexOf  &#x2F;&#x2F;获取字符在字符串中最后1此出现的索引，索引从0开始，如果找不到则返回-1</p>
</li>
<li><p>substring  &#x2F;&#x2F;截取指定范围的字串</p>
</li>
<li><p>trim  &#x2F;&#x2F;去前后空格</p>
</li>
<li><p>charAt  &#x2F;&#x2F;获取某索引处的字符，注意不能使用 Str[index] 这种方法</p>
</li>
<li><p>toUpperCase  &#x2F;&#x2F;转成大写</p>
</li>
<li><p>toLowerCase  &#x2F;&#x2F;转成小写</p>
</li>
<li><p>concat  &#x2F;&#x2F;拼接字符串</p>
</li>
<li><p>replace  &#x2F;&#x2F;替换字符串中的字符</p>
</li>
<li><p>split  &#x2F;&#x2F;分割字符串，对于某些分割字符，我们需要转义 比如 | \\  等</p>
</li>
<li><p>compareTo  &#x2F;&#x2F;比较两个字符串的大小</p>
</li>
<li><p>toCharArray  &#x2F;&#x2F;转换成字符数组</p>
</li>
<li><p>format  &#x2F;&#x2F;格式化字符串，%s 字符串、%c 字符、%d 整型、%.2f 浮点型</p>
<p>案例：将一个人的信息格式化输出</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringMethod01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1. equals 前面已经讲过了. 比较内容是否相同，区分大小写</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello&quot;</span>;<br>        System.out.println(str1.equals(str2)); <span class="hljs-comment">//false</span><br>        <span class="hljs-comment">// 2.equalsIgnoreCase 忽略大小写的判断内容是否相等</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;johN&quot;</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;john&quot;</span>.equalsIgnoreCase(username)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;Success!&quot;</span>);  <span class="hljs-comment">//Success!</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;Failure!&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// 3.length 获取字符的个数，字符串的长度</span><br>        System.out.println(<span class="hljs-string">&quot;韩顺平&quot;</span>.length());  <span class="hljs-comment">//3</span><br>        <span class="hljs-comment">// 4.indexOf 获取字符/字符串在字符串对象中第一次出现的索引，索引从0开始，如果找不到，返回-1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;wer@terwe@g&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> s1.indexOf(<span class="hljs-string">&#x27;@&#x27;</span>);<br>        System.out.println(index);  <span class="hljs-comment">//3</span><br>        System.out.println(<span class="hljs-string">&quot;weIndex=&quot;</span> + s1.indexOf(<span class="hljs-string">&quot;we&quot;</span>));  <span class="hljs-comment">//0</span><br>        <span class="hljs-comment">// 5.lastIndexOf 获取字符/字符串在字符串中最后一次出现的索引，索引从0开始，如果找不到，返回-1</span><br>        s1 = <span class="hljs-string">&quot;wer@terwe@g@&quot;</span>;<br>        index = s1.lastIndexOf(<span class="hljs-string">&#x27;@&#x27;</span>);<br>        System.out.println(index);  <span class="hljs-comment">//11</span><br>        System.out.println(<span class="hljs-string">&quot;ter的位置=&quot;</span> + s1.lastIndexOf(<span class="hljs-string">&quot;ter&quot;</span>));  <span class="hljs-comment">//4</span><br>        <span class="hljs-comment">// 6.substring 截取指定范围的子串</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello,张三&quot;</span>;<br>        <span class="hljs-comment">//下面name.substring(6) 从索引6开始截取后面所有的内容</span><br>        System.out.println(name.substring(<span class="hljs-number">6</span>));  <span class="hljs-comment">//张三</span><br>        <span class="hljs-comment">//name.substring(0,5)表示从索引0开始截取，截取到索引 5-1=4位置</span><br>        System.out.println(name.substring(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>));  <span class="hljs-comment">//llo</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringMethod02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1.toUpperCase转换成大写</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;heLLo&quot;</span>;<br>        System.out.println(s.toUpperCase()); <span class="hljs-comment">//HELLO</span><br>        <span class="hljs-comment">// 2.toLowerCase</span><br>        System.out.println(s.toLowerCase()); <span class="hljs-comment">//hello</span><br>        <span class="hljs-comment">// 3.concat拼接字符串</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;宝玉&quot;</span>;<br>        s1 = s1.concat(<span class="hljs-string">&quot;林黛玉&quot;</span>).concat(<span class="hljs-string">&quot;薛宝钗&quot;</span>).concat(<span class="hljs-string">&quot;together&quot;</span>);<br>        System.out.println(s1); <span class="hljs-comment">//宝玉林黛玉薛宝钗together</span><br>        <span class="hljs-comment">// 4.replace 替换字符串中的字符</span><br>        s1 = <span class="hljs-string">&quot;宝玉 and 林黛玉 林黛玉 林黛玉&quot;</span>;<br>        <span class="hljs-comment">//在s1中，将 所有的 林黛玉 替换成薛宝钗</span><br>        <span class="hljs-comment">// 老韩解读: s1.replace() 方法执行后，返回的结果才是替换过的.</span><br>        <span class="hljs-comment">// 注意 对s1没有任何影响</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s11</span> <span class="hljs-operator">=</span> s1.replace(<span class="hljs-string">&quot;宝玉&quot;</span>, <span class="hljs-string">&quot;jack&quot;</span>);<br>        System.out.println(s1);<span class="hljs-comment">//宝玉 and 林黛玉 林黛玉 林黛玉</span><br>        System.out.println(s11);<span class="hljs-comment">//jack and 林黛玉 林黛玉 林黛玉</span><br>        <span class="hljs-comment">// 5.split 分割字符串, 对于某些分割字符，我们需要 转义比如 | \\等</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">poem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;锄禾日当午,汗滴禾下土,谁知盘中餐,粒粒皆辛苦&quot;</span>;<br>        <span class="hljs-comment">//老韩解读：</span><br>        <span class="hljs-comment">// 1. 以 , 为标准对 poem 进行分割 , 返回一个数组</span><br>        <span class="hljs-comment">// 2. 在对字符串进行分割时，如果有特殊字符，需要加入 转义符 \</span><br>        String[] split = poem.split(<span class="hljs-string">&quot;,&quot;</span>);<br>        poem = <span class="hljs-string">&quot;E:\\aaa\\bbb&quot;</span>;<br>        split = poem.split(<span class="hljs-string">&quot;\\\\&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;==分割后内容===&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; split.length; i++) &#123;<br>            System.out.println(split[i]);<br>        &#125;<br>        <span class="hljs-comment">// 6.toCharArray 转换成字符数组</span><br>        s = <span class="hljs-string">&quot;happy&quot;</span>;<br>        <span class="hljs-type">char</span>[] chs = s.toCharArray();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; chs.length; i++) &#123;<br>            System.out.println(chs[i]);<br>        &#125;<br>        <span class="hljs-comment">// 7.compareTo 比较两个字符串的大小，如果前者大，</span><br>        <span class="hljs-comment">// 则返回正数，后者大，则返回负数，如果相等，返回0</span><br>        <span class="hljs-comment">// 老韩解读</span><br>        <span class="hljs-comment">// (1) 如果长度相同，并且每个字符也相同，就返回 0</span><br>        <span class="hljs-comment">// (2) 如果在进行比较时，可以区分大小</span><br>        <span class="hljs-comment">//     就返回 if (c1 != c2) &#123;</span><br>        <span class="hljs-comment">//                return c1 - c2;</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">// (3) 如果前面的部分都相同，就返回 str1.len - str2.len</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jcck&quot;</span>;<span class="hljs-comment">// len = 4</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<span class="hljs-comment">// len = 4</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jac&quot;</span>;<span class="hljs-comment">// len = 3</span><br>        System.out.println(a.compareTo(b)); <span class="hljs-comment">// 返回值是 &#x27;c&#x27; - &#x27;a&#x27; = 2的值</span><br>        System.out.println(a.compareTo(c)); <span class="hljs-comment">//a.length() - c.length() = 1</span><br>        <span class="hljs-comment">// 8.format 格式字符串</span><br>        <span class="hljs-comment">/* 占位符有:</span><br><span class="hljs-comment">         * %s 字符串 %c 字符 %d 整型 %.2f 浮点型</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;john&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>        <span class="hljs-type">double</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> <span class="hljs-number">56.857</span>;<br>        <span class="hljs-type">char</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;男&#x27;</span>;<br>        <span class="hljs-comment">//将所有的信息都拼接在一个字符串.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span><br>                <span class="hljs-string">&quot;我的姓名是&quot;</span> + name + <span class="hljs-string">&quot;年龄是&quot;</span> + age + <span class="hljs-string">&quot;,成绩是&quot;</span> + score + <span class="hljs-string">&quot;性别是&quot;</span> + gender + <span class="hljs-string">&quot;。希望大家喜欢我！&quot;</span>;<br>        System.out.println(info);<br>        <span class="hljs-comment">//format解读</span><br>        <span class="hljs-comment">//1. %s , %d , %.2f %c 称为占位符</span><br>        <span class="hljs-comment">//2. 这些占位符由后面变量来替换</span><br>        <span class="hljs-comment">//3. %s 表示后面由 字符串来替换</span><br>        <span class="hljs-comment">//4. %d 是整数来替换</span><br>        <span class="hljs-comment">//5. %.2f 表示使用小数来替换，替换后，只会保留小数点两位, 并且进行四舍五入的处理</span><br>        <span class="hljs-comment">//6. %c 使用char 类型来替换</span><br>        <span class="hljs-comment">//String info0 = String.format(&quot;我的姓名是%s 年龄是%d，成绩是%.2f 性别是%c.希望大家喜欢我！&quot;, name, age, score, gender);</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">formatStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;我的姓名是%s 年龄是%d，成绩是%.2f 性别是%c.希望大家喜欢我！&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">info2</span> <span class="hljs-operator">=</span> String.format(formatStr, name, age, score, gender);<br>        System.out.println(<span class="hljs-string">&quot;info2=&quot;</span> + info2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="StringBuffer-类"><a href="#StringBuffer-类" class="headerlink" title="StringBuffer 类"></a>StringBuffer 类</h3><p>java.lang.StringBuffer 代表可变的字符序列，可以对字符串内容进行增删</p>
<p>StringBuffer 很多方法与 String 相同，但 StringBuffer 是可变长度的</p>
<p>StringBuffer 是一个容器</p>
 <img src="image-20220908152913126.png" srcset="/img/loading.gif" lazyload alt="image-20220908152913126" style="zoom: 80%;" />

<ul>
<li>1）StringBuffer 实现了 Serializable, 即StringBuffer的对象可以串行化</li>
<li>2）StringBuffer 的直接父类 是 AbstractStringBuilder</li>
<li>3）在父类 AbstractStringBuilder 中有属性 char[] value,不是final<br>  该 value 数组存放 字符串内容，因此是存放在堆中的</li>
<li>4）StringBuffer 是一个 final类，不能被继承</li>
<li>5）因为StringBuffer 字符内容是存在 char[] value, 所有在变化(增加&#x2F;删除)<br>   不用每次都更换地址(即不是每次创建新对象)， 所以效率高于 String</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBuffer01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. StringBuffer 实现了 Serializable, 即StringBuffer的对象可以串行化</span><br>        <span class="hljs-comment">//2. StringBuffer 的直接父类 是 AbstractStringBuilder</span><br>        <span class="hljs-comment">//3. 在父类 AbstractStringBuilder 中有属性 char[] value,不是final</span><br>        <span class="hljs-comment">//   该 value 数组存放 字符串内容，因此是存放在堆中的</span><br>        <span class="hljs-comment">//4. StringBuffer 是一个 final类，不能被继承</span><br>        <span class="hljs-comment">//5. 因为StringBuffer 字符内容是存在 char[] value, 所有在变化(增加/删除)</span><br>        <span class="hljs-comment">//   不用每次都更换地址(即不是每次创建新对象)， 所以效率高于 String</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Srting-VS-StringBuffer"><a href="#Srting-VS-StringBuffer" class="headerlink" title="Srting VS StringBuffer"></a>Srting VS StringBuffer</h4><ul>
<li>String 保存的是字符串常量，里面的值不能更改，每次 String 类的更新实际上就是更改地址，效率较低</li>
<li>StringBuffer 保存的是字符串变量，里面的值可以更改，每次 StringBuffer 的更新实际上可以更新内容，不用每次更新地址，效率较高（因为StringBuffer 字符内容是存在在堆中的 char[] value 中的）</li>
</ul>
<h4 id="StringBuffer-构造器"><a href="#StringBuffer-构造器" class="headerlink" title="StringBuffer 构造器"></a>StringBuffer 构造器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBuffer02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//构造器的使用</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. 创建一个 大小为 16的 char[] ,用于存放字符内容</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>        <span class="hljs-comment">//2 通过构造器指定 char[] 大小</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-number">100</span>);<br>        <span class="hljs-comment">//3. 通过 给一个 String 创建 StringBuffer, char[] 大小就是 str.length() + 16</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="String-和-StringBuffer-相互转换"><a href="#String-和-StringBuffer-相互转换" class="headerlink" title="String 和 StringBuffer 相互转换"></a>String 和 StringBuffer 相互转换</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringAndStringBuffer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//看 String --&gt; StringBuffer</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello tom&quot;</span>;<br>        <span class="hljs-comment">//方式1 使用构造器</span><br>        <span class="hljs-comment">//注意： 返回的才是StringBuffer对象，对str 本身没有影响</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(str);<br>        <span class="hljs-comment">//方式2 使用的是append方法</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>        stringBuffer1 = stringBuffer1.append(str);<br><br>        <span class="hljs-comment">//看 StringBuffer --&gt; String</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;韩顺平教育&quot;</span>);<br>        <span class="hljs-comment">//方式1: 使用构造器来搞定</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(stringBuffer3);<br>        <span class="hljs-comment">//方式2 使用StringBuffer提供的 toString方法</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> stringBuffer3.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="StringBuffer-类常见方法"><a href="#StringBuffer-类常见方法" class="headerlink" title="StringBuffer 类常见方法"></a>StringBuffer 类常见方法</h4><ul>
<li>增  append(string)</li>
<li>删  delete(start, end)</li>
<li>改  replace(start, end, string)</li>
<li>查  indexOf(string)</li>
<li>插  insert(string)</li>
<li>获取长度  length()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBufferMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>        <span class="hljs-comment">//增</span><br>        s.append(<span class="hljs-string">&#x27;,&#x27;</span>); <span class="hljs-comment">// &quot;hello,&quot;</span><br>        s.append(<span class="hljs-string">&quot;张三丰&quot;</span>); <span class="hljs-comment">//&quot;hello,张三丰&quot;</span><br>        s.append(<span class="hljs-string">&quot;赵敏&quot;</span>).append(<span class="hljs-number">100</span>).append(<span class="hljs-literal">true</span>).append(<span class="hljs-number">10.5</span>); <span class="hljs-comment">//&quot;hello,张三丰赵敏100true10.5&quot;</span><br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,张三丰赵敏100true10.5&quot;</span><br>        <span class="hljs-comment">//删</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * 删除索引为&gt;=start &amp;&amp; &lt;end 处的字符</span><br><span class="hljs-comment">         * 解读: 删除 11~14 的字符 [11, 14)</span><br><span class="hljs-comment">         */</span><br>        s.delete(<span class="hljs-number">11</span>, <span class="hljs-number">14</span>);<br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,张三丰赵敏true10.5&quot;</span><br>        <span class="hljs-comment">//改</span><br>        <span class="hljs-comment">//例：使用 周芷若 替换 索引9-11的字符 [9,11)</span><br>        s.replace(<span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-string">&quot;周芷若&quot;</span>);<br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,张三丰周芷若true10.5&quot;</span><br>        <span class="hljs-comment">//查</span><br>        <span class="hljs-comment">//查找指定的子串在字符串第一次出现的索引，如果找不到返回-1</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">indexOf</span> <span class="hljs-operator">=</span> s.indexOf(<span class="hljs-string">&quot;张三丰&quot;</span>);<br>        System.out.println(indexOf); <span class="hljs-comment">//6</span><br>        <span class="hljs-comment">//插</span><br>        <span class="hljs-comment">//例：在索引为9的位置插入 &quot;赵敏&quot;,原来索引为9的内容自动后移</span><br>        s.insert(<span class="hljs-number">9</span>, <span class="hljs-string">&quot;赵敏&quot;</span>);<br>        System.out.println(s); <span class="hljs-comment">//&quot;hello,张三丰赵敏周芷若true10.5&quot;</span><br>        <span class="hljs-comment">//长度</span><br>        System.out.println(s.length()); <span class="hljs-comment">//22</span><br>        System.out.println(s);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="测试题-1"><a href="#测试题-1" class="headerlink" title="测试题"></a>测试题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//知识类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBufferExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">// ok</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(); <span class="hljs-comment">//ok</span><br>        sb.append(str);<span class="hljs-comment">//需要看源码 , 底层调用的是 AbstractStringBuilder 的 appendNull</span><br>        System.out.println(sb.length());<span class="hljs-comment">//4</span><br>        System.out.println(sb);<span class="hljs-comment">//null</span><br>        <span class="hljs-comment">//下面的构造器，会抛出NullpointerException</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(str); <span class="hljs-comment">//看底层源码 super(str.length() + 16);</span><br>        System.out.println(sb1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//应用类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBufferExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        输入商品名称和商品价格，要求打印效果示例, 使用前面学习的方法完成：</span><br><span class="hljs-comment">        商品名	商品价格</span><br><span class="hljs-comment">        手机	123,564.59  //比如 价格 3,456,789.88</span><br><span class="hljs-comment">        要求：价格的小数点前面每三位用逗号隔开, 再输出。</span><br><span class="hljs-comment">        思路分析</span><br><span class="hljs-comment">        1. 定义一个Scanner 对象，接收用户输入的 价格(String)</span><br><span class="hljs-comment">        2. 希望使用到 StringBuffer的 insert ，需要将 String 转成 StringBuffer</span><br><span class="hljs-comment">        3. 然后使用相关方法进行字符串的处理</span><br><span class="hljs-comment">        代码实现</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//new Scanner(System.in)</span><br>		<span class="hljs-comment">//先完成一个最简单的实现123,564.59</span><br>        <span class="hljs-comment">//找到小数点的索引，然后在该位置的前3位，插入,即可</span><br>        <span class="hljs-comment">//int i = sb.lastIndexOf(&quot;.&quot;);</span><br>        <span class="hljs-comment">//sb = sb.insert(i - 3, &quot;,&quot;);</span><br>        <span class="hljs-comment">//上面的两步需要做一个循环处理,才是正确的</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;8123564.59&quot;</span>;<br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(price);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> sb.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>) - <span class="hljs-number">3</span>; i &gt; <span class="hljs-number">0</span>; i -= <span class="hljs-number">3</span>) &#123;<br>            sb = sb.insert(i, <span class="hljs-string">&quot;,&quot;</span>);<br>        &#125;<br>        System.out.println(sb);<span class="hljs-comment">//8,123,564.59</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="StringBuilder-类"><a href="#StringBuilder-类" class="headerlink" title="StringBuilder 类"></a>StringBuilder 类</h3><p>一个可变的字符序列。此类提供一个与 StringBuffer 兼容的 API，但不保证同步（即StringBuilder 不是线程安全的）。该类被设计用作 StringBuffer 的一个简易替换，用在字符串缓冲区被单个线程使用的时候。如果可能，建议优先采用该类，因为在大多数实现中，它比 StringBuffer 要快</p>
<p>StringBuilder 和 StringBuffer 均代表可变的字符序列，方法是一样的，所以使用和 StringBuffer 一样</p>
<p>在 StringBuilder 上的主要操作是 append 和 insert 方法，可重载这些方法，以接受任意类型的数据</p>
<ul>
<li>1）StringBuilder 继承 AbstractStringBuilder 类</li>
<li>2）实现了 Serializable ,说明StringBuilder对象是可以串行化(对象可以网络传输，也可以保存到文件中)</li>
<li>3）StringBuilder 是 final 类, 不能被继承</li>
<li>4）StringBuilder 对象字符序列仍然是存放在其父类 AbstractStringBuilder 的 char[] value;<br>   因此，字符序列是存放在堆中</li>
<li>5）StringBuilder 的方法，没有做互斥的处理，即 没有 synchronized 关键字，因此在单线程的情况下使用</li>
</ul>
<h3 id="String、StringBuffer-和-StringBuilder-的比较"><a href="#String、StringBuffer-和-StringBuilder-的比较" class="headerlink" title="String、StringBuffer 和 StringBuilder 的比较"></a>String、StringBuffer 和 StringBuilder 的比较</h3><ul>
<li><p>StringBuilder 和 StringBuffer 非常类似，均代表可变的字符序列，而且方法也一样</p>
</li>
<li><p>String：不可变的字符序列，效率低，但是复用率高</p>
</li>
<li><p>StringBuffer：可变字符序列、效率较高（增删）、线程安全</p>
</li>
<li><p>StringBuilder：可变字符序列、效率最高（增删）、线程不安全</p>
</li>
<li><p>String 使用注意事项说明：</p>
<p>string s &#x3D; “a”;  &#x2F;&#x2F;创建了一个字符串</p>
<p>s +&#x3D; “b”;  &#x2F;&#x2F;实际上原来的”a”字符串对象已经丢弃了，现在又产生了一个字符串 s + “b”（也就是”ab”）。</p>
<p>​				&#x2F;&#x2F;如果多次执行这些改变串内容的操作，会导致大量副本字符串对象存留在内存中，降低效率</p>
<p>​				&#x2F;&#x2F;如果这样的操作放到循环中，会极大影响程序的性能</p>
<p>&#x2F;&#x2F;因此：如果我们要对字符串做大量修改，不要使用 String</p>
</li>
</ul>
<h4 id="String、StringBuffer-和-StringBuilder-的选择"><a href="#String、StringBuffer-和-StringBuilder-的选择" class="headerlink" title="String、StringBuffer 和 StringBuilder 的选择"></a>String、StringBuffer 和 StringBuilder 的选择</h4><ul>
<li>如果字符串存在大量的修改操作，并在单线程的情况，使用 StringBuilder</li>
<li>如果字符串存在大量的修改操作，并在多线程的情况，使用 StringBuffer</li>
<li>如果字符串很少修改，被多个对象引用，使用 String （比如配置信息等）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String、StringBuffer 和 StringBuilder 的 效率测试</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringVsStringBufferVsStringBuilder</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>        <span class="hljs-comment">//StringBuffer</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        startTime = System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<span class="hljs-comment">//StringBuffer 拼接 20000次</span><br>            buffer.append(String.valueOf(i));<br>        &#125;<br>        endTime = System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;StringBuffer的执行时间：&quot;</span> + (endTime - startTime));<br>        <span class="hljs-comment">//StringBuilder</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        startTime = System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<span class="hljs-comment">//StringBuilder 拼接 20000次</span><br>            builder.append(String.valueOf(i));<br>        &#125;<br>        endTime = System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;StringBuilder的执行时间：&quot;</span> + (endTime - startTime));<br>        <span class="hljs-comment">//String</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        startTime = System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<span class="hljs-comment">//String 拼接 20000次</span><br>            text = text + i;<br>        &#125;<br>        endTime = System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;String的执行时间：&quot;</span> + (endTime - startTime));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Math-类"><a href="#Math-类" class="headerlink" title="Math 类"></a>Math 类</h3><p>Math 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数 等等（均为静态方法）</p>
<ul>
<li>abs  &#x2F;&#x2F;绝对值</li>
<li>pow  &#x2F;&#x2F;求幂</li>
<li>ceil  &#x2F;&#x2F;向上取整</li>
<li>floor  &#x2F;&#x2F;向下取整</li>
<li>round  &#x2F;&#x2F;四舍五入</li>
<li>sqrt  &#x2F;&#x2F;求开方</li>
<li>random  &#x2F;&#x2F;求随机数</li>
<li>max  &#x2F;&#x2F;求两个数的最大值</li>
<li>min  &#x2F;&#x2F;求两个数的最小值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MathMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//看看Math常用的方法(静态方法)</span><br>        <span class="hljs-comment">//1.abs 绝对值</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">abs</span> <span class="hljs-operator">=</span> Math.abs(-<span class="hljs-number">9</span>);<br>        System.out.println(abs);  <span class="hljs-comment">//9</span><br>        <span class="hljs-comment">//2.pow 求幂</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">pow</span> <span class="hljs-operator">=</span> Math.pow(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>);  <span class="hljs-comment">//2的4次方</span><br>        System.out.println(pow);  <span class="hljs-comment">//16</span><br>        <span class="hljs-comment">//3.ceil 向上取整,返回&gt;=该参数的double类型的最小整数;</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">ceil</span> <span class="hljs-operator">=</span> Math.ceil(<span class="hljs-number">3.9</span>);<br>        System.out.println(ceil);  <span class="hljs-comment">//4.0</span><br>        <span class="hljs-comment">//4.floor 向下取整，返回&lt;=该参数的double类型的最大整数;</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">floor</span> <span class="hljs-operator">=</span> Math.floor(<span class="hljs-number">4.001</span>);<br>        System.out.println(floor);  <span class="hljs-comment">//4.0</span><br>        <span class="hljs-comment">//5.round 四舍五入  Math.floor(该参数+0.5)  返回long类型</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">round</span> <span class="hljs-operator">=</span> Math.round(<span class="hljs-number">5.51</span>);<br>        System.out.println(round);  <span class="hljs-comment">//6</span><br>        <span class="hljs-comment">//6.sqrt 求开方</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">sqrt</span> <span class="hljs-operator">=</span> Math.sqrt(<span class="hljs-number">9.0</span>);<br>        System.out.println(sqrt);  <span class="hljs-comment">//3.0</span><br>        <span class="hljs-comment">//7.random 求随机数</span><br>        <span class="hljs-comment">//  random 返回的是 0 &lt;= x &lt; 1 之间的一个随机小数</span><br>        <span class="hljs-comment">// 思考：请写出获取 a-b之间的一个随机整数,a,b均为整数 ，比如 a = 2, b=7</span><br>        <span class="hljs-comment">//  即返回一个数 x  2 &lt;= x &lt;= 7</span><br>        <span class="hljs-comment">// 解读： Math.random() * (b-a) 返回的就是 0 &lt;= 数 &lt; b-a</span><br>        <span class="hljs-comment">// (1) (int)(a) &lt;= x &lt;= (int)(a + Math.random() * (b-a+1) )</span><br>        <span class="hljs-comment">// (2) 使用具体的数给小伙伴介绍 a = 2  b = 7</span><br>        <span class="hljs-comment">//  (int)(a + Math.random() * (b-a +1) ) = (int)( 2 + Math.random()*6)</span><br>        <span class="hljs-comment">//  Math.random()*6 返回的是 0 &lt;= x &lt; 6 小数</span><br>        <span class="hljs-comment">//  2 + Math.random()*6 返回的就是 2&lt;= x &lt; 8 小数</span><br>        <span class="hljs-comment">//  (int)(2 + Math.random()*6) == 2 &lt;= x &lt;= 7</span><br>        <span class="hljs-comment">// (3) 公式就是  (int)(a + Math.random() * (b-a + 1) )</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println((<span class="hljs-type">int</span>)(<span class="hljs-number">2</span> +  Math.random() * (<span class="hljs-number">7</span> - <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)));<br>        &#125;<br>        <span class="hljs-comment">//8.max , min 返回最大值和最小值</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Math.min(<span class="hljs-number">1</span>, <span class="hljs-number">9</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> Math.max(<span class="hljs-number">45</span>, <span class="hljs-number">90</span>);<br>        System.out.println(<span class="hljs-string">&quot;min=&quot;</span> + min);<br>        System.out.println(<span class="hljs-string">&quot;max=&quot;</span> + max);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Arrays-类"><a href="#Arrays-类" class="headerlink" title="Arrays 类"></a>Arrays 类</h3><p>Arrays 谜面包含了一系列静态方法，用于管理或操作数组（比如排序和搜索）</p>
<ul>
<li><p>toString 返回数组的字符串形式</p>
<p>Arrays.toString(arr)</p>
</li>
<li><p>sort 排序（自然排序和定制排序） Integer arr[] &#x3D; {1, -1, 7, 0, 89};</p>
</li>
<li><p>binarySearch 通过二分搜索法进行查找，要求必须排好序</p>
<p>int index &#x3D; Arrays.binarySearch(arr, 3);</p>
</li>
<li><p>copyOf 数组元素的复制</p>
<p>Integer[] newArr &#x3D; Arrays.copyOf(arr,arr,length);</p>
</li>
<li><p>fill 数组元素的填充</p>
<p>Integer[] num &#x3D; new Integer[]{9, 3, 2};</p>
<p>Arrays.fill(num, 99);</p>
</li>
<li><p>equals 比较两个数组元素内容是否完全一致</p>
<p>boolean equals &#x3D; Arrays.equals(arr, arr2);</p>
</li>
<li><p>asList 将一组值，转换成list</p>
<p>List&lt;Integer&gt; asListt &#x3D; Arrays.asList(2, 3, 4, 5, 6, 1);</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArraysMethod01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        Integer[] integers = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">20</span>, <span class="hljs-number">90</span>&#125;;<br>        <span class="hljs-comment">//遍历数组</span><br>        <span class="hljs-comment">//for(int i = 0; i &lt; integers.length; i++) &#123;</span><br>        <span class="hljs-comment">//    System.out.println(integers[i]);</span><br>        <span class="hljs-comment">//&#125;</span><br>        <span class="hljs-comment">//直接使用Arrays.toString方法，显示数组</span><br>        <span class="hljs-comment">//System.out.println(Arrays.toString(integers));//</span><br><br>        <span class="hljs-comment">//演示 sort方法的使用</span><br>        Integer arr[] = &#123;<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">89</span>&#125;;<br>        <span class="hljs-comment">//进行排序</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. 可以直接使用冒泡排序 , 也可以直接使用Arrays提供的sort方法排序</span><br>        <span class="hljs-comment">//2. 因为数组是引用类型，所以通过sort排序后，会直接影响到 实参 arr</span><br>        <span class="hljs-comment">//3. sort重载的，也可以通过传入一个接口 Comparator 实现定制排序</span><br>        <span class="hljs-comment">//4. 调用 定制排序 时，传入两个参数 (1) 排序的数组 arr</span><br>        <span class="hljs-comment">//   (2) 实现了Comparator接口的匿名内部类 , 要求实现  compare方法</span><br>        <span class="hljs-comment">//5. 先演示效果，再解释</span><br>        <span class="hljs-comment">//6. 这里体现了接口编程的方式 , 看看源码，就明白</span><br>        <span class="hljs-comment">//   源码分析</span><br>        <span class="hljs-comment">//(1) Arrays.sort(arr, new Comparator()</span><br>        <span class="hljs-comment">//(2) 最终到 TimSort类的 private static &lt;T&gt; void binarySort(T[] a, int lo, int hi, int start,</span><br>        <span class="hljs-comment">//                                       Comparator&lt;? super T&gt; c)()</span><br>        <span class="hljs-comment">//(3) 执行到 binarySort方法的代码, 会根据动态绑定机制 c.compare()执行我们传入的</span><br>        <span class="hljs-comment">//    匿名内部类的 compare ()</span><br>        <span class="hljs-comment">//     while (left &lt; right) &#123;</span><br>        <span class="hljs-comment">//                int mid = (left + right) &gt;&gt;&gt; 1;</span><br>        <span class="hljs-comment">//                if (c.compare(pivot, a[mid]) &lt; 0)</span><br>        <span class="hljs-comment">//                    right = mid;</span><br>        <span class="hljs-comment">//                else</span><br>        <span class="hljs-comment">//                    left = mid + 1;</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">//(4) new Comparator() &#123;</span><br>        <span class="hljs-comment">//            @Override</span><br>        <span class="hljs-comment">//            public int compare(Object o1, Object o2) &#123;</span><br>        <span class="hljs-comment">//                Integer i1 = (Integer) o1;</span><br>        <span class="hljs-comment">//                Integer i2 = (Integer) o2;</span><br>        <span class="hljs-comment">//                return i2 - i1;</span><br>        <span class="hljs-comment">//            &#125;</span><br>        <span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">//(5) public int compare(Object o1, Object o2) 返回的值&gt;0 还是 &lt;0</span><br>        <span class="hljs-comment">//    会影响整个排序结果, 这就充分体现了 接口编程+动态绑定+匿名内部类的综合使用</span><br>        <span class="hljs-comment">//    将来的底层框架和源码的使用方式，会非常常见</span><br>        <span class="hljs-comment">//Arrays.sort(arr); // 默认排序方法</span><br>        <span class="hljs-comment">//定制排序</span><br>        Arrays.sort(arr, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">i1</span> <span class="hljs-operator">=</span> (Integer) o1;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> (Integer) o2;<br>                <span class="hljs-keyword">return</span> i2 - i1;<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;===排序后===&quot;</span>);<br>        System.out.println(Arrays.toString(arr));<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArraysMethod02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Integer[] arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">90</span>, <span class="hljs-number">123</span>, <span class="hljs-number">567</span>&#125;;<br>        <span class="hljs-comment">// binarySearch 通过二分搜索法进行查找，要求必须排好</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 使用 binarySearch 二叉查找</span><br>        <span class="hljs-comment">//2. 要求该数组是有序的. 如果该数组是无序的，不能使用binarySearch</span><br>        <span class="hljs-comment">//3. 如果数组中不存在该元素，就返回 return -(low + 1);  //low代表应该在的位置</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Arrays.binarySearch(arr, <span class="hljs-number">567</span>);<br>        System.out.println(<span class="hljs-string">&quot;index=&quot;</span> + index);<br><br>        <span class="hljs-comment">//copyOf 数组元素的复制</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 从 arr 数组中，拷贝 arr.length个元素到 newArr数组中</span><br>        <span class="hljs-comment">//2. 如果拷贝的长度 &gt; arr.length 就在新数组的后面 增加 null</span><br>        <span class="hljs-comment">//3. 如果拷贝长度 &lt; 0 就抛出异常NegativeArraySizeException</span><br>        <span class="hljs-comment">//4. 该方法的底层使用的是 System.arraycopy()</span><br>        Integer[] newArr = Arrays.copyOf(arr, arr.length);<br>        System.out.println(<span class="hljs-string">&quot;==拷贝执行完毕后==&quot;</span>);<br>        System.out.println(Arrays.toString(newArr));<br><br>        <span class="hljs-comment">//fill 数组元素的填充</span><br>        Integer[] num = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[]&#123;<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>&#125;;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 使用 99 去填充 num数组，可以理解成是替换原来的元素</span><br>        Arrays.fill(num, <span class="hljs-number">99</span>);<br>        System.out.println(<span class="hljs-string">&quot;==num数组填充后==&quot;</span>);<br>        System.out.println(Arrays.toString(num));<br><br>        <span class="hljs-comment">//equals 比较两个数组元素内容是否完全一致</span><br>        Integer[] arr2 = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">90</span>, <span class="hljs-number">123</span>&#125;;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 如果arr 和 arr2 数组的元素一样，则方法true;</span><br>        <span class="hljs-comment">//2. 如果不是完全一样，就返回 false</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">equals</span> <span class="hljs-operator">=</span> Arrays.equals(arr, arr2);<br>        System.out.println(<span class="hljs-string">&quot;equals=&quot;</span> + equals);<br><br>        <span class="hljs-comment">//asList 将一组值，转换成list</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. asList方法，会将(2,3,4,5,6,1)数据转成一个List集合</span><br>        <span class="hljs-comment">//2. 返回的 asList 的编译类型是 List(接口)</span><br>        <span class="hljs-comment">//3. asList 的运行类型是 java.util.Arrays#ArrayList, 是Arrays类的</span><br>        <span class="hljs-comment">//   静态内部类 private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br>        <span class="hljs-comment">//              implements RandomAccess, java.io.Serializable</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">asList</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>);<br>        System.out.println(<span class="hljs-string">&quot;asList=&quot;</span> + asList);<br>        System.out.println(<span class="hljs-string">&quot;asList的运行类型&quot;</span> + asList.getClass());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//sort排序类</span><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        案例：自定义Book类，里面包含name和price，按price排序(从大到小)。</span><br><span class="hljs-comment">        要求使用两种方式排序 , 有一个 Book[] books = 4本书对象.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        使用前面学习过的传递 实现Comparator接口匿名内部类，也称为定制排序。</span><br><span class="hljs-comment">        [同学们完成这个即可 10min  ],</span><br><span class="hljs-comment">        可以按照 price (1)从大到小 (2)从小到大 (3) 按照书名长度从大到小</span><br><span class="hljs-comment">         */</span><br>        Book[] books = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>[<span class="hljs-number">4</span>];<br>        books[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>, <span class="hljs-number">100</span>);<br>        books[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;金瓶梅新&quot;</span>, <span class="hljs-number">90</span>);<br>        books[<span class="hljs-number">2</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;青年文摘20年&quot;</span>, <span class="hljs-number">5</span>);<br>        books[<span class="hljs-number">3</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;java从入门到放弃~&quot;</span>, <span class="hljs-number">300</span>);<br><br>        <span class="hljs-comment">//(1)price从大到小</span><br><span class="hljs-comment">//        Arrays.sort(books, new Comparator() &#123;</span><br><span class="hljs-comment">//            //这里是对Book数组排序，因此  o1 和 o2 就是Book对象</span><br><span class="hljs-comment">//            @Override</span><br><span class="hljs-comment">//            public int compare(Object o1, Object o2) &#123;</span><br><span class="hljs-comment">//                Book book1 = (Book) o1;</span><br><span class="hljs-comment">//                Book book2 = (Book) o2;</span><br><span class="hljs-comment">//                double priceVal = book2.getPrice() - book1.getPrice();</span><br><span class="hljs-comment">//                //这里老师进行了一个转换</span><br><span class="hljs-comment">//                //如果发现返回结果和我们输出的不一致，就修改一下返回的 1 和 -1</span><br><span class="hljs-comment">//                if(priceVal &gt; 0) &#123;</span><br><span class="hljs-comment">//                    return  1;</span><br><span class="hljs-comment">//                &#125; else  if(priceVal &lt; 0) &#123;</span><br><span class="hljs-comment">//                    return -1;</span><br><span class="hljs-comment">//                &#125; else &#123;</span><br><span class="hljs-comment">//                    return 0;</span><br><span class="hljs-comment">//                &#125;</span><br><span class="hljs-comment">//            &#125;</span><br><span class="hljs-comment">//        &#125;);</span><br><br>        <span class="hljs-comment">//(2)price从小到大</span><br><span class="hljs-comment">//        Arrays.sort(books, new Comparator() &#123;</span><br><span class="hljs-comment">//            //这里是对Book数组排序，因此  o1 和 o2 就是Book对象</span><br><span class="hljs-comment">//            @Override</span><br><span class="hljs-comment">//            public int compare(Object o1, Object o2) &#123;</span><br><span class="hljs-comment">//                Book book1 = (Book) o1;</span><br><span class="hljs-comment">//                Book book2 = (Book) o2;</span><br><span class="hljs-comment">//                double priceVal = book2.getPrice() - book1.getPrice();</span><br><span class="hljs-comment">//                //这里老师进行了一个转换</span><br><span class="hljs-comment">//                //如果发现返回结果和我们输出的不一致，就修改一下返回的 1 和 -1</span><br><span class="hljs-comment">//                if(priceVal &gt; 0) &#123;</span><br><span class="hljs-comment">//                    return  -1;</span><br><span class="hljs-comment">//                &#125; else  if(priceVal &lt; 0) &#123;</span><br><span class="hljs-comment">//                    return 1;</span><br><span class="hljs-comment">//                &#125; else &#123;</span><br><span class="hljs-comment">//                    return 0;</span><br><span class="hljs-comment">//                &#125;</span><br><span class="hljs-comment">//            &#125;</span><br><span class="hljs-comment">//        &#125;);</span><br><br>        <span class="hljs-comment">//(3)按照书名长度从大到小</span><br>        Arrays.sort(books, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-comment">//这里是对Book数组排序，因此  o1 和 o2 就是Book对象</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) o1;<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) o2;<br>                <span class="hljs-comment">//要求按照书名的长度来进行排序</span><br>                <span class="hljs-keyword">return</span> book2.getName().length() - book1.getName().length();<br>            &#125;<br>        &#125;);<br>        System.out.println(Arrays.toString(books));<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> price;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> &#123;<span class="hljs-built_in">this</span>.price = price;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Book&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="System-类"><a href="#System-类" class="headerlink" title="System 类"></a>System 类</h3><ul>
<li><p>exit 退出当前程序</p>
</li>
<li><p>arraycopy  复制数组元素，比较适合底层调用，但我们一般使用 Arrays.copy() 完成复制数组</p>
<p>int[] src &#x3D; {1, 2, 3}</p>
<p>int[] dest &#x3D; new int[3];</p>
<p>System.arraycopy(src, 0, dest, 0, 3);</p>
</li>
<li><p>currentTimeMillens  返回当前时间距离 1970-1-1 的毫秒数</p>
</li>
<li><p>gc()  运行垃圾回收机制 System.gc();</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">System_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//exit 退出当前程序</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. exit(0) 表示程序退出</span><br>        <span class="hljs-comment">//2. 0 表示一个状态 , 正常的状态</span><br>        <span class="hljs-comment">//System.out.println(&quot;ok1&quot;);</span><br>        <span class="hljs-comment">//System.exit(0);</span><br>        <span class="hljs-comment">//System.out.println(&quot;ok2&quot;);</span><br><br>        <span class="hljs-comment">//arraycopy ：复制数组元素，比较适合底层调用，</span><br>        <span class="hljs-comment">// 一般使用Arrays.copyOf完成复制数组</span><br>        <span class="hljs-type">int</span>[] src=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<br>        <span class="hljs-type">int</span>[] dest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">3</span>]; <span class="hljs-comment">// dest 当前是 &#123;0,0,0&#125;</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 主要是搞清楚这五个参数的含义</span><br>        <span class="hljs-comment">//     src：源数组</span><br>        <span class="hljs-comment">//     * @param      src      the source array.</span><br>        <span class="hljs-comment">//     srcPos： 从源数组的哪个索引位置开始拷贝</span><br>        <span class="hljs-comment">//     * @param      srcPos   starting position in the source array.</span><br>        <span class="hljs-comment">//     dest : 目标数组，即把源数组的数据拷贝到哪个数组</span><br>        <span class="hljs-comment">//     * @param      dest     the destination array.</span><br>        <span class="hljs-comment">//     destPos: 把源数组的数据拷贝到 目标数组的哪个索引</span><br>        <span class="hljs-comment">//     * @param      destPos  starting position in the destination data.</span><br>        <span class="hljs-comment">//     length: 从源数组拷贝多少个数据到目标数组（注意不能越界）</span><br>        <span class="hljs-comment">//     * @param      length   the number of array elements to be copied.</span><br>        System.arraycopy(src, <span class="hljs-number">0</span>, dest, <span class="hljs-number">0</span>, src.length);<br>        <span class="hljs-comment">// int[] src=&#123;1,2,3&#125;;</span><br>        System.out.println(<span class="hljs-string">&quot;dest=&quot;</span> + Arrays.toString(dest));<span class="hljs-comment">//[1, 2, 3]</span><br><br>        <span class="hljs-comment">//currentTimeMillens:返回当前时间距离1970-1-1 的毫秒数</span><br>        <span class="hljs-comment">// 解读:</span><br>        System.out.println(System.currentTimeMillis());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>







<h3 id="BigInteger-和-BigDecimal-类"><a href="#BigInteger-和-BigDecimal-类" class="headerlink" title="BigInteger 和 BigDecimal 类"></a>BigInteger 和 BigDecimal 类</h3><ul>
<li>BigInteger 适合保存比较大的整形</li>
<li>BigDecimal 适合保存精度更高的浮点型</li>
</ul>
<p><strong>BigInteger 和 BigDecimal 常见方法</strong></p>
<ul>
<li>add  加</li>
<li>subtract  减</li>
<li>multiply  乘</li>
<li>divide  除</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigInteger_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//当我们编程中，需要处理很大的整数，long 不够用</span><br>        <span class="hljs-comment">//可以使用BigInteger的类来搞定</span><br><span class="hljs-comment">//        long l = 23788888899999999999999999999l;</span><br><span class="hljs-comment">//        System.out.println(&quot;l=&quot; + l);</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;23788888899999999999999999999&quot;</span>);<br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;10099999999999999999999999999999999999999999999999999999999999999999999999999999999&quot;</span>);<br>        System.out.println(bigInteger);<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 在对 BigInteger 进行加减乘除的时候，需要使用对应的方法，不能直接进行 + - * /</span><br>        <span class="hljs-comment">//2. 可以创建一个 要操作的 BigInteger 然后进行相应操作</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">add</span> <span class="hljs-operator">=</span> bigInteger.add(bigInteger2);<br>        System.out.println(add);<span class="hljs-comment">//加</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">subtract</span> <span class="hljs-operator">=</span> bigInteger.subtract(bigInteger2);<br>        System.out.println(subtract);<span class="hljs-comment">//减</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">multiply</span> <span class="hljs-operator">=</span> bigInteger.multiply(bigInteger2);<br>        System.out.println(multiply);<span class="hljs-comment">//乘</span><br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">divide</span> <span class="hljs-operator">=</span> bigInteger.divide(bigInteger2);<br>        System.out.println(divide);<span class="hljs-comment">//除</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.math.BigDecimal;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigDecimal_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//当我们需要保存一个精度很高的数时，double 不够用</span><br>        <span class="hljs-comment">//可以是 BigDecimal</span><br><span class="hljs-comment">//        double d = 1999.11111111111999999999999977788d;</span><br><span class="hljs-comment">//        System.out.println(d);</span><br>        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;1999.11&quot;</span>);<br>        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;3&quot;</span>);<br>        System.out.println(bigDecimal);<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 如果对 BigDecimal进行运算，比如加减乘除，需要使用对应的方法</span><br>        <span class="hljs-comment">//2. 创建一个需要操作的 BigDecimal 然后调用相应的方法即可</span><br>        System.out.println(bigDecimal.add(bigDecimal2));<br>        System.out.println(bigDecimal.subtract(bigDecimal2));<br>        System.out.println(bigDecimal.multiply(bigDecimal2));<br>        <span class="hljs-comment">//System.out.println(bigDecimal.divide(bigDecimal2));//可能抛出异常ArithmeticException</span><br>        <span class="hljs-comment">//在调用divide 方法时，指定精度即可. BigDecimal.ROUND_CEILING</span><br>        <span class="hljs-comment">//如果有无限循环小数，就会保留 分子 的精度</span><br>        System.out.println(bigDecimal.divide(bigDecimal2, BigDecimal.ROUND_CEILING));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>







<h3 id="日期类"><a href="#日期类" class="headerlink" title="日期类"></a>日期类</h3><h4 id="第一代日期类"><a href="#第一代日期类" class="headerlink" title="第一代日期类"></a>第一代日期类</h4><p><strong>Date</strong>：精确到毫秒，代表特定的瞬间</p>
<p><strong>SimpleDateFormat</strong>：格式化（日期-&gt;文本）和解析（文本-&gt;日期）日期的类</p>
<ul>
<li><p>提供两常用的方法（功能）</p>
<ul>
<li>1）.format()   &#x2F;&#x2F;可以把时间戳Date格式化成指定的范式（格式）字符串</li>
<li>2）.parse()   &#x2F;&#x2F;可以把符合范式的字符串解析成一个Date对象</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.ParseException;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Date01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ParseException &#123;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 获取当前系统时间</span><br>        <span class="hljs-comment">//2. 这里的Date 类是在java.util包</span><br>        <span class="hljs-comment">//3. 默认输出的日期格式是国外的方式, 因此通常需要对格式进行转换</span><br>        <span class="hljs-type">Date</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(); <span class="hljs-comment">//获取当前系统时间</span><br>        System.out.println(<span class="hljs-string">&quot;当前日期=&quot;</span> + d1);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">9234567</span>); <span class="hljs-comment">//通过指定毫秒数得到时间</span><br>        System.out.println(<span class="hljs-string">&quot;d2=&quot;</span> + d2); <span class="hljs-comment">//获取某个时间对应的毫秒数</span><br><br>        <span class="hljs-comment">//SimpleDateFormat</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 创建 SimpleDateFormat对象，可以指定相应的格式</span><br>        <span class="hljs-comment">//2. 这里的格式使用的字母是规定好，不能乱写</span><br>        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy年MM月dd日 hh:mm:ss E&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> sdf.format(d1); <span class="hljs-comment">// format:将日期转换成指定格式的字符串</span><br>        System.out.println(<span class="hljs-string">&quot;当前日期=&quot;</span> + format);<br><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 可以把一个格式化的String 转成对应的 Date</span><br>        <span class="hljs-comment">//2. 得到Date 仍然在输出时，还是按照国外的形式，如果希望指定格式输出，需要转换</span><br>        <span class="hljs-comment">//3. 在把 String -&gt; Date ， 使用的 sdf 格式需要和你给的String的格式一样，否则会抛出转换异常</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1996年01月01日 10:20:30 星期一&quot;</span>;<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">parse</span> <span class="hljs-operator">=</span> sdf.parse(s);<br>        System.out.println(<span class="hljs-string">&quot;parse=&quot;</span> + sdf.format(parse));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="第二代日期类"><a href="#第二代日期类" class="headerlink" title="第二代日期类"></a>第二代日期类</h4><p>第二代日期类，主要就是 Calendar 类（日历）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calendar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>,Cloneable,Comparable&lt;Calendar&gt;<br></code></pre></td></tr></table></figure>

<p>Calendar 类是一个抽象类，它为特定瞬间与一组诸如 YEAR、MONTH、DAY_OF|MONTH\HOUR 等 日历字段 之间的转换提供了一些方法，并为操作日历字段（例如获得下星期的日期）提供了一些方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Calendar;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calendar_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. Calendar是一个抽象类， 并且构造器是private</span><br>        <span class="hljs-comment">//2. 可以通过 getInstance() 来获取实例</span><br>        <span class="hljs-comment">//3. 提供大量的方法和字段提供给程序员</span><br>        <span class="hljs-comment">//4. Calendar没有提供对应的格式化的类，因此需要程序员自己组合来输出(灵活)</span><br>        <span class="hljs-comment">//5. 如果我们需要按照 24小时进制来获取时间， Calendar.HOUR ==改成=&gt; Calendar.HOUR_OF_DAY</span><br>        <span class="hljs-type">Calendar</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> Calendar.getInstance(); <span class="hljs-comment">//创建日历类对象//比较简单，自由</span><br>        System.out.println(<span class="hljs-string">&quot;c=&quot;</span> + c);<br>        <span class="hljs-comment">//2.获取日历对象的某个日历字段</span><br>        System.out.println(<span class="hljs-string">&quot;年：&quot;</span> + c.get(Calendar.YEAR));<br>        <span class="hljs-comment">// 这里为什么要 + 1, 因为Calendar 返回月时候，是按照 0 开始编号</span><br>        System.out.println(<span class="hljs-string">&quot;月：&quot;</span> + (c.get(Calendar.MONTH) + <span class="hljs-number">1</span>));<br>        System.out.println(<span class="hljs-string">&quot;日：&quot;</span> + c.get(Calendar.DAY_OF_MONTH));<br>        System.out.println(<span class="hljs-string">&quot;小时：&quot;</span> + c.get(Calendar.HOUR));<br>        System.out.println(<span class="hljs-string">&quot;分钟：&quot;</span> + c.get(Calendar.MINUTE));<br>        System.out.println(<span class="hljs-string">&quot;秒：&quot;</span> + c.get(Calendar.SECOND));<br>        <span class="hljs-comment">//Calender 没有专门的格式化方法，所以需要程序员自己来组合显示</span><br>        System.out.println(c.get(Calendar.YEAR) + <span class="hljs-string">&quot;-&quot;</span> + (c.get(Calendar.MONTH) + <span class="hljs-number">1</span>) + <span class="hljs-string">&quot;-&quot;</span> + c.get(Calendar.DAY_OF_MONTH) +<br>                <span class="hljs-string">&quot; &quot;</span> + c.get(Calendar.HOUR_OF_DAY) + <span class="hljs-string">&quot;:&quot;</span> + c.get(Calendar.MINUTE) + <span class="hljs-string">&quot;:&quot;</span> + c.get(Calendar.SECOND) );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="前两代日期类的不足"><a href="#前两代日期类的不足" class="headerlink" title="前两代日期类的不足"></a>前两代日期类的不足</h4><p>JDK 1.0中包含了一个 java.util.Date 类，但是它的大多数方法已经在 JDK 1.1 引入 Calendar 类之后就被弃用了。</p>
<p>而 Calendar 也存在问题：</p>
<ul>
<li>可变性：像日期和时间这样的类应该是不可变的</li>
<li>偏移性：Date 中的年份是从 1900 开始的，而月份都从 0 开始</li>
<li>格式化：格式化只对 Date 有用，Calendar 则不行</li>
<li>此外，它们也不是线程安全的，不能处理闰秒等（每隔两天，多出 1 s）</li>
</ul>
<h4 id="第三代日期类"><a href="#第三代日期类" class="headerlink" title="第三代日期类"></a>第三代日期类</h4><p>LocalDate（日期&#x2F;年月日）、LocalTime（时间&#x2F;时分秒）、LocalDateTime（日期时间&#x2F;年月日时分秒）JDK8 加入</p>
<ul>
<li>LocalDate 只包含日期，可以获取日期字段</li>
<li>LocalTime 只包含时间，可以获取时间字段</li>
<li>LocalDateTime 包含日期+时间，可以获取日期和时间字段</li>
</ul>
<p><strong>第三代日期类更多方法</strong></p>
<ul>
<li>MonthDay类：检查重复事件</li>
<li>是否是闰年</li>
<li>增加日期的某个部分</li>
<li>使用plus方法测试增加时间的某个部分</li>
<li>使用minus方法测试查看一年前和一年后的日期</li>
<li>其他的方法，使用的时候，再查看API使用即可</li>
</ul>
<p><strong>DateTimeFormatter 格式日期类</strong></p>
<p>类似于 SimpleDateFormat</p>
<p>DateTimeFormat dtf &#x3D; DateTimeFormatter.ofPattern(格式);</p>
<p>String str &#x3D; dtf.format(日期对象);</p>
<p>DateTimeFormatter dateTimeFormatter &#x3D; DateTimeFormatter.ofPattern(“yyyy-MM-dd HH:mm:ss”);</p>
<p>案例演示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.time.LocalDate;<br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><span class="hljs-keyword">import</span> java.time.LocalTime;<br><span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalDate_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//第三代日期</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. 使用now() 返回表示当前日期时间的 对象</span><br>        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">ldt</span> <span class="hljs-operator">=</span> LocalDateTime.now(); <span class="hljs-comment">//LocalDate.now();//LocalTime.now()</span><br>        System.out.println(ldt);<br><br>        <span class="hljs-comment">//2. 使用DateTimeFormatter 对象来进行格式化</span><br>        <span class="hljs-comment">// 创建 DateTimeFormatter对象</span><br>        <span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">dateTimeFormatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> dateTimeFormatter.format(ldt);<br>        System.out.println(<span class="hljs-string">&quot;格式化的日期=&quot;</span> + format);<br><br>        System.out.println(<span class="hljs-string">&quot;年=&quot;</span> + ldt.getYear());<br>        System.out.println(<span class="hljs-string">&quot;月=&quot;</span> + ldt.getMonth());<br>        System.out.println(<span class="hljs-string">&quot;月=&quot;</span> + ldt.getMonthValue());<br>        System.out.println(<span class="hljs-string">&quot;日=&quot;</span> + ldt.getDayOfMonth());<br>        System.out.println(<span class="hljs-string">&quot;时=&quot;</span> + ldt.getHour());<br>        System.out.println(<span class="hljs-string">&quot;分=&quot;</span> + ldt.getMinute());<br>        System.out.println(<span class="hljs-string">&quot;秒=&quot;</span> + ldt.getSecond());<br><br>        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> LocalDate.now(); <span class="hljs-comment">//可以获取年月日</span><br>        <span class="hljs-type">LocalTime</span> <span class="hljs-variable">now2</span> <span class="hljs-operator">=</span> LocalTime.now();<span class="hljs-comment">//获取到时分秒</span><br><br>        <span class="hljs-comment">//提供 plus 和 minus方法可以对当前时间进行加或者减</span><br>        <span class="hljs-comment">//看看890天后，是什么时候 把 年月日-时分秒</span><br>        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">localDateTime</span> <span class="hljs-operator">=</span> ldt.plusDays(<span class="hljs-number">890</span>);<br>        System.out.println(<span class="hljs-string">&quot;890天后=&quot;</span> + dateTimeFormatter.format(localDateTime));<br><br>        <span class="hljs-comment">//看看在 3456分钟前是什么时候，把 年月日-时分秒输出</span><br>        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">localDateTime2</span> <span class="hljs-operator">=</span> ldt.minusMinutes(<span class="hljs-number">3456</span>);<br>        System.out.println(<span class="hljs-string">&quot;3456分钟前 日期=&quot;</span> + dateTimeFormatter.format(localDateTime2));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="Instant-时间戳"><a href="#Instant-时间戳" class="headerlink" title="Instant 时间戳"></a>Instant 时间戳</h4><p>类似于 Date</p>
<p>提供了一系列和 Date 类转换的方式</p>
<p>Instant –&gt; Date</p>
<p>Date date &#x3D; Date.form(instant);</p>
<p>Date –&gt; Instant</p>
<p>Instant instant &#x3D; date.toInstant();</p>
<p>案例演示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.time.Instant;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Instant_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.通过 静态方法 now() 获取表示当前时间戳的对象</span><br>        <span class="hljs-type">Instant</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> Instant.now();<br>        System.out.println(now);<br>        <span class="hljs-comment">//2. 通过 from 可以把 Instant转成 Date</span><br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> Date.from(now);<br>        <span class="hljs-comment">//3. 通过 date的toInstant() 可以把 date 转成Instant对象</span><br>        <span class="hljs-type">Instant</span> <span class="hljs-variable">instant</span> <span class="hljs-operator">=</span> date.toInstant();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.ParseException;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Calendar;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AboutDateAndTime</span> &#123;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ParseException &#123;<br>		<span class="hljs-comment">/*</span><br><span class="hljs-comment">		 * 记录事件发生的时间：Date  时间戳</span><br><span class="hljs-comment">		 * 从1970-1-1 0：0：0 开始到现在已经经的毫秒数</span><br><span class="hljs-comment">		 * long 类型的长整数</span><br><span class="hljs-comment">		 * yyyy-mm-dd hh:mm:ss</span><br><span class="hljs-comment">		 * SimpleDateFormat 类</span><br><span class="hljs-comment">		 * 提供两常用的方法（功能）</span><br><span class="hljs-comment">		 * 1）.format() 可以把时间戳Date格式化成指定的范式（格式）字符串</span><br><span class="hljs-comment">		   2）.parse() 可以把符合范式的字符串解析成一个Date对象 </span><br><span class="hljs-comment">		 </span><br><span class="hljs-comment">		 * Calendar 日历对象</span><br><span class="hljs-comment">		 * 你可以定义一个指向任意时间戳的日历对象</span><br><span class="hljs-comment">		 * 它提供了非常方便的时间和日期计算方法</span><br><span class="hljs-comment">		 * add()</span><br><span class="hljs-comment">		 * </span><br><span class="hljs-comment">		 */</span><br>		<br>		  <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>		  System.out.println(date.getTime());  <span class="hljs-comment">//1663403451711</span><br>		  <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>          System.out.println(sdf.format(date));  <span class="hljs-comment">//2022-09-17</span><br>         <span class="hljs-comment">// Scanner sc = new Scanner(System.in);</span><br>         <span class="hljs-comment">// System.out.println(&quot;请输入yyyy-mm-dd 时间范式的字符串&quot;);</span><br>         <span class="hljs-comment">// String s =sc.nextLine();</span><br>         <span class="hljs-comment">// Date myDate = sdf.parse(s);</span><br>          <span class="hljs-type">Calendar</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span>  Calendar.getInstance(); <span class="hljs-comment">//静态工厂方法构成对象</span><br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-17</span><br>          cl.add(cl.DAY_OF_YEAR, <span class="hljs-number">1</span>);  <span class="hljs-comment">// 闰年问题</span><br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-18</span><br>          cl.set(cl.DAY_OF_WEEK, cl.SATURDAY);<br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-24</span><br>          cl.add(cl.DAY_OF_YEAR, -<span class="hljs-number">7</span>);<br>          System.out.println(sdf.format(cl.getTime()));  <span class="hljs-comment">//2022-09-17</span><br>          System.out.println(cl.get(cl.MONTH));  <span class="hljs-comment">//8</span><br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>









<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>前面我们保存多个数据使用的是数组，而数组有不足的地方：</p>
<ul>
<li>长度开始时必须指定，而且一旦指定，不能更改</li>
<li>保存的必须为同一类型的元素</li>
<li>使用数组进行增加&#x2F;删除元素时比较麻烦</li>
</ul>
<p><strong>集合：</strong></p>
<ul>
<li>可以动态保存任意多个对象（可不同类型），使用比较方便</li>
<li>提供了一系列方便操作对象的方法：add、remove、set、get 等</li>
</ul>
<p><strong>集合的框架体系：</strong></p>
<p>Java 的集合类很多，主要分为两大类，如图 ：[背下来]</p>
<p> <img src="image-20220912090212994.png" srcset="/img/loading.gif" lazyload alt="image-20220912090212994" style="zoom:33%;" /><img src="image-20220912090402260.png" srcset="/img/loading.gif" lazyload alt="image-20220912090402260" style="zoom:44%;" /></p>
<p>​										单列集合																		双列集合</p>
<h3 id="Collection-接口和常用方法"><a href="#Collection-接口和常用方法" class="headerlink" title="Collection 接口和常用方法"></a>Collection 接口和常用方法</h3><h4 id="Collection-接口实现类的特点"><a href="#Collection-接口实现类的特点" class="headerlink" title="Collection 接口实现类的特点"></a>Collection 接口实现类的特点</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Collection</span>&lt;E&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Iterable</span>&lt;E&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>Collection 实现子类可以存放多个元素，每个元素可以是 Object</p>
</li>
<li><p>有些 Collection 的实现类，可以存放重复的元素，有些不可以</p>
</li>
<li><p>有些 Collection 的实现类，有些是有序的（List），有些不是有序的（Set）</p>
</li>
<li><p>Collection 接口没有直接的实现子类，是通过它的子接口 Set 和 List 来实现的</p>
</li>
<li><p>方法：</p>
<ul>
<li>add：添加单个元素</li>
<li>remove：删除指定元素</li>
<li>contains：查找元素是否存在</li>
<li>size：获取元素个数</li>
<li>isEmpty：判断是否为空</li>
<li>clear：清空</li>
<li>addAll：添加多个元素</li>
<li>containsALL：查找多个元素是否都存在</li>
<li>removeAll：删除多个元素</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//以List来演示</span><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionMethod</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><span class="hljs-comment">//        add:添加单个元素</span><br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-number">10</span>);<span class="hljs-comment">//会自动装箱为list.add(new Integer(10))</span><br>        list.add(<span class="hljs-literal">true</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        remove:删除指定元素</span><br>        list.remove(<span class="hljs-number">0</span>);<span class="hljs-comment">//删除第一个元素</span><br>        list.remove(<span class="hljs-literal">true</span>);<span class="hljs-comment">//指定删除某个元素</span><br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        contains:查找元素是否存在</span><br>        System.out.println(list.contains(<span class="hljs-string">&quot;jack&quot;</span>));<span class="hljs-comment">//T</span><br><span class="hljs-comment">//        size:获取元素个数</span><br>        System.out.println(list.size());<span class="hljs-comment">//2</span><br><span class="hljs-comment">//        isEmpty:判断是否为空</span><br>        System.out.println(list.isEmpty());<span class="hljs-comment">//F</span><br><span class="hljs-comment">//        clear:清空</span><br>        list.clear();<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        addAll:添加多个元素</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list2.add(<span class="hljs-string">&quot;红楼梦&quot;</span>);<br>        list2.add(<span class="hljs-string">&quot;三国演义&quot;</span>);<br>        list.addAll(list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        containsAll:查找多个元素是否都存在</span><br>        System.out.println(list.containsAll(list2));<span class="hljs-comment">//T</span><br><span class="hljs-comment">//        removeAll：删除多个元素</span><br>        list.add(<span class="hljs-string">&quot;聊斋&quot;</span>);<br>        list.removeAll(list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<span class="hljs-comment">//[聊斋]</span><br><span class="hljs-comment">//        说明：以ArrayList实现类来演示.</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="Collection-接口遍历元素方式"><a href="#Collection-接口遍历元素方式" class="headerlink" title="Collection 接口遍历元素方式"></a>Collection 接口遍历元素方式</h4><p><strong>方式1：使用 Iterator（迭代器）</strong></p>
<ul>
<li><p>Iterator 对象称为迭代器，主要用于遍历 Collection 集合中的元素</p>
</li>
<li><p>所有实现了 Collection 接口的集合类都有一个 iterator() 方法，用以返回一个实现了 Iterator 接口的对象，即可以返回一个迭代器</p>
</li>
<li><p>Iterator 的结构</p>
 <img src="image-20220912090212994.png" srcset="/img/loading.gif" lazyload alt="image-20220912090212994" style="zoom:33%;" />
</li>
<li><p>Iterator 仅用于遍历集合，Iterator 本身并不存放对象</p>
</li>
<li><p>迭代器的执行原理：</p>
 <img src="image-20220912104049727.png" srcset="/img/loading.gif" lazyload alt="image-20220912104049727" style="zoom:50%;" />
</li>
<li><p>Iterator 接口的方法：</p>
 <img src="image-20220912104348570.png" srcset="/img/loading.gif" lazyload alt="image-20220912104348570" style="zoom:50%;" /></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionIterator</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;三国演义&quot;</span>, <span class="hljs-string">&quot;罗贯中&quot;</span>, <span class="hljs-number">10.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;小李飞刀&quot;</span>, <span class="hljs-string">&quot;古龙&quot;</span>, <span class="hljs-number">5.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>, <span class="hljs-string">&quot;曹雪芹&quot;</span>, <span class="hljs-number">34.6</span>));<br>        <span class="hljs-comment">//System.out.println(&quot;col=&quot; + col);</span><br>        <span class="hljs-comment">//现在老师希望能够遍历 col集合</span><br>        <span class="hljs-comment">//1. 先得到 col 对应的 迭代器</span><br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> col.iterator();<br>        <span class="hljs-comment">//2. 使用while循环遍历</span><br><span class="hljs-comment">//        while (iterator.hasNext()) &#123;//判断是否还有数据</span><br><span class="hljs-comment">//            //返回下一个元素，类型是Object</span><br><span class="hljs-comment">//            Object obj = iterator.next();</span><br><span class="hljs-comment">//            System.out.println(&quot;obj=&quot; + obj);</span><br><span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">//快捷键快速生成 while =&gt; itit</span><br>        <span class="hljs-comment">//显示所有的快捷键的的快捷键 ctrl + j</span><br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;obj=&quot;</span> + obj);<br>        &#125;<br>        <br>        <span class="hljs-comment">//3. 当退出while循环后 , 这时iterator迭代器，指向最后的元素</span><br>        <span class="hljs-comment">//   iterator.next();//NoSuchElementException</span><br>        <span class="hljs-comment">//4. 如果希望再次遍历，需要重置我们的迭代器</span><br>        iterator = col.iterator();<br>        System.out.println(<span class="hljs-string">&quot;===第二次遍历===&quot;</span>);<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;obj=&quot;</span> + obj);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String author;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, String author, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.author = author;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAuthor</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> author;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAuthor</span><span class="hljs-params">(String author)</span> &#123;<span class="hljs-built_in">this</span>.author = author;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> price;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> &#123;<span class="hljs-built_in">this</span>.price = price;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Book&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, author=&#x27;&quot;</span> + author + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>方式2：增强 for</strong></p>
<p>增强 for 循环，可以代替 iterator 迭代器，特点：增强 for 就是简化版的 iterator。</p>
<p>本质一样。只能用于遍历集合或数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(元素类型 元素名 : 集合名或数组名) &#123;<br>	<span class="hljs-comment">//访问元素</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionFor</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;三国演义&quot;</span>, <span class="hljs-string">&quot;罗贯中&quot;</span>, <span class="hljs-number">10.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;小李飞刀&quot;</span>, <span class="hljs-string">&quot;古龙&quot;</span>, <span class="hljs-number">5.1</span>));<br>        col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>, <span class="hljs-string">&quot;曹雪芹&quot;</span>, <span class="hljs-number">34.6</span>));<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 使用增强for, 在Collection集合</span><br>        <span class="hljs-comment">//2. 增强for， 底层仍然是迭代器</span><br>        <span class="hljs-comment">//3. 增强for可以理解成就是简化版本的 迭代器遍历</span><br>        <span class="hljs-comment">//4. 快捷键方式 I</span><br>        <span class="hljs-keyword">for</span> (Object obj : col) &#123;<br>            System.out.println(<span class="hljs-string">&quot;book=&quot;</span> + obj);<br>        &#125;<br>        <span class="hljs-comment">//增强for，也可以直接在数组使用</span><br><span class="hljs-comment">//        int[] nums = &#123;1, 8, 10, 90&#125;;</span><br><span class="hljs-comment">//        for (int i : nums) &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;i=&quot; + i);</span><br><span class="hljs-comment">//        &#125;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="List-接口和常用方法"><a href="#List-接口和常用方法" class="headerlink" title="List 接口和常用方法"></a>List 接口和常用方法</h3><ul>
<li>List 集合类中元素有序（即添加顺序和取出顺序一致）、且可重复</li>
<li>List 集合中的每个元素都有其对应的顺序索引，即支持索引</li>
<li>List 容器中的元素都对应一个整数型的序号记载其在容器中的位置，可以根据序号存取容器中的元素</li>
<li>JDK API 中 List 接口的实现类 有：ArrayList、LinkedList、Vector 等（这三个最为常用）</li>
<li>常用方法：<ul>
<li>void add(int index, Object ele)：在index位置插入ele元素</li>
<li>boolean addAll(int index, Collection eles)：从index位置开始将eles中的所有元素添加进来</li>
<li>Object get(int index)：获取指定index位置的元素</li>
<li>int indexOf(Object obj)：返回obj在集合中首次出现的位置</li>
<li>int lastIndexOf(Object obj)：返回obj在当前集合中末次出现的位置</li>
<li>Object remove(int index)：移除指定index位置的元素，并返回此元素</li>
<li>Object set(int index, Object ele)：设置指定index位置的元素为ele , 相当于是替换.</li>
<li>List subList(int fromIndex, int toIndex)：返回从 fromIndex（包含）到 toIndex（不含）位置的子集合</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List_</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1. List集合类中元素有序(即添加顺序和取出顺序一致)、且可重复 [案例]</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;hsp&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br>        <span class="hljs-comment">//2. List集合中的每个元素都有其对应的顺序索引，即支持索引</span><br>        <span class="hljs-comment">//   索引是从0开始的</span><br>        System.out.println(list.get(<span class="hljs-number">3</span>));<span class="hljs-comment">//hsp</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListMethod</span> &#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;张三丰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;贾宝玉&quot;</span>);<br><span class="hljs-comment">//        void add(int index, Object ele):在index位置插入ele元素</span><br><span class="hljs-comment">//        若不填索引，则默认插入在末尾</span><br>        <span class="hljs-comment">//在index = 1的位置插入一个对象</span><br>        list.add(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        boolean addAll(int index, Collection eles):从index位置开始将eles中的所有元素添加进来</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list2.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list2.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.addAll(<span class="hljs-number">1</span>, list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        Object get(int index):获取指定index位置的元素</span><br>        <span class="hljs-comment">//讲过了，跳过</span><br><span class="hljs-comment">//        int indexOf(Object obj):返回obj在集合中首次出现的位置</span><br>        System.out.println(list.indexOf(<span class="hljs-string">&quot;tom&quot;</span>));<span class="hljs-comment">//2</span><br><span class="hljs-comment">//        int lastIndexOf(Object obj):返回obj在当前集合中末次出现的位置</span><br>        list.add(<span class="hljs-string">&quot;韩顺平&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br>        System.out.println(list.lastIndexOf(<span class="hljs-string">&quot;韩顺平&quot;</span>));<br><span class="hljs-comment">//        Object remove(int index):移除指定index位置的元素，并返回此元素</span><br>        list.remove(<span class="hljs-number">0</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        Object set(int index, Object ele):设置指定index位置的元素为ele , 相当于是替换.</span><br>        list.set(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;玛丽&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        List subList(int fromIndex, int toIndex):返回从fromIndex到toIndex位置的子集合</span><br>        <span class="hljs-comment">// 注意返回的子集合 fromIndex &lt;= subList &lt; toIndex</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">returnlist</span> <span class="hljs-operator">=</span> list.subList(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>        System.out.println(<span class="hljs-string">&quot;returnlist=&quot;</span> + returnlist);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="List-的三种遍历方式"><a href="#List-的三种遍历方式" class="headerlink" title="List 的三种遍历方式"></a>List 的三种遍历方式</h4><ul>
<li><p>方式一：使用 iterator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Iterator</span> <span class="hljs-variable">iter</span> <span class="hljs-operator">=</span> col.inertaor();<br><span class="hljs-keyword">while</span>(iter.hasNext)&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> iter.next();<br>    System.out.println(o);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式二：使用增强 for</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(Object o:col)&#123;<br>    System.out.println(o);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式三：使用普通 for</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++)&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> list.get(i);<br>    System.out.println(obj);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListExercise02</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//List list = new ArrayList();</span><br>        <span class="hljs-comment">//List list = new Vector();</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>, <span class="hljs-string">&quot;曹雪芹&quot;</span>, <span class="hljs-number">100</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;西游记&quot;</span>, <span class="hljs-string">&quot;吴承恩&quot;</span>, <span class="hljs-number">10</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;水浒传&quot;</span>, <span class="hljs-string">&quot;施耐庵&quot;</span>, <span class="hljs-number">19</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;三国&quot;</span>, <span class="hljs-string">&quot;罗贯中&quot;</span>, <span class="hljs-number">80</span>));<br>        <span class="hljs-comment">//list.add(new Book(&quot;西游记&quot;, &quot;吴承恩&quot;, 10));</span><br><br>        <span class="hljs-comment">//如何对集合进行排序</span><br>        System.out.println(<span class="hljs-string">&quot;==排序前==&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o : list) &#123;System.out.println(o);&#125;<br>        <span class="hljs-comment">//冒泡排序</span><br>        sort(list);<br>        System.out.println(<span class="hljs-string">&quot;==排序后==&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o : list) &#123;System.out.println(o);&#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">//静态方法</span><br>    <span class="hljs-comment">//价格要求是从小到大</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">(List list)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">listSize</span> <span class="hljs-operator">=</span> list.size();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; listSize - <span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; listSize - <span class="hljs-number">1</span> - i; j++) &#123;<br>                <span class="hljs-comment">//取出对象Book 并向下转型</span><br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) list.get(j);<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) list.get(j + <span class="hljs-number">1</span>);<br>                <span class="hljs-keyword">if</span> (book1.getPrice() &gt; book2.getPrice()) &#123;<span class="hljs-comment">//交换</span><br>                    list.set(j, book2);  <span class="hljs-comment">//book1 仍然有引用，不会被回收</span><br>                    list.set(j + <span class="hljs-number">1</span>, book1); <span class="hljs-comment">//因此可以直接使用</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="ArrayList-底层结构和源码分析"><a href="#ArrayList-底层结构和源码分析" class="headerlink" title="ArrayList 底层结构和源码分析"></a>ArrayList 底层结构和源码分析</h3><h4 id="ArrayList-注意事项"><a href="#ArrayList-注意事项" class="headerlink" title="ArrayList 注意事项"></a>ArrayList 注意事项</h4><ul>
<li><p>“ permits all elements, including null ”, ArrayList 可以加入 null, 并且可以加入多个</p>
</li>
<li><p>ArrayList 底层是由数组来实现数据存储的</p>
</li>
<li><p>ArrayList 基本等同于 Vector, 除了 ArrayList 是线程不安全（但执行效率高）（看源码）</p>
<p>在多线程情况下，不建议使用 ArrayList  （没有实现 synchronized 接口）</p>
</li>
</ul>
<h4 id="ArrayList-的底层分析"><a href="#ArrayList-的底层分析" class="headerlink" title="ArrayList 的底层分析"></a>ArrayList 的底层分析</h4><ul>
<li><p>ArrayList 中维护了一个 Object 类型的数组 elementData</p>
<p>transient Object[] elementData;  &#x2F;&#x2F;transient 表示瞬间、短暂的，表示该属性不会被序列化</p>
</li>
<li><p>当创建 ArrayList 对象时，如果使用的时无参构造器，则初始 elementData 容量为0，</p>
<p>第1次添加，则扩容 elementData 为 10，如需再次扩容，则扩容 elementData 为1.5倍</p>
</li>
<li><p>如果使用的是指定大小的构造器，则初始 elementData 容量为指定大小，</p>
<p>如需扩容，则直接扩容 elementData 为1.5倍</p>
</li>
<li><p>源码分析：</p>
</li>
</ul>
<img src="image-20220912170319607.png" srcset="/img/loading.gif" lazyload alt="image-20220912170319607" style="zoom: 80%;" />

<img src="image-20220912170402225.png" srcset="/img/loading.gif" lazyload alt="image-20220912170402225" style="zoom:87%;" />





<h3 id="Vectoer-底层结构和源码分析"><a href="#Vectoer-底层结构和源码分析" class="headerlink" title="Vectoer 底层结构和源码分析"></a>Vectoer 底层结构和源码分析</h3><ul>
<li><p>vector 底层也是一个对象数组    protected Object[] elementData;</p>
</li>
<li><p>Vector 是线程同步的，即线程安全，Vector 类的操作方法带有 synchronized</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> sysnchronized E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>&#123;<br>    <span class="hljs-keyword">if</span>(index &gt;= elementCount)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayIndexOutOfBoundsException</span>(index);<br>    <span class="hljs-keyword">return</span> elementData(index);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>在开发中，需要线程同步安全时，考虑使用 Vector</p>
</li>
<li><p>扩容规则：</p>
<ul>
<li>如果是无参构造，则会默认指定为10，如需再次扩容。则按 2 倍扩容</li>
<li>如果是指定大小，则每次直接按 2 倍扩容</li>
</ul>
</li>
<li><p>Vector 和 ArrayList 的比较</p>
 <img src="image-20220913142121290.png" srcset="/img/loading.gif" lazyload alt="image-20220913142121290" style="zoom:50%;" /></li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//无参构造器</span><br>        <span class="hljs-comment">//有参数的构造</span><br>        <span class="hljs-type">Vector</span> <span class="hljs-variable">vector</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>();<br><span class="hljs-comment">//        Vector vector = new Vector(8);</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            vector.add(i);<br>        &#125;<br>        vector.add(<span class="hljs-number">100</span>);<br>        System.out.println(<span class="hljs-string">&quot;vector=&quot;</span> + vector);<br>        <span class="hljs-comment">//解读源码</span><br>        <span class="hljs-comment">//1. new Vector() 底层</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public Vector() &#123;</span><br><span class="hljs-comment">                this(10);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         补充：如果是  Vector vector = new Vector(8);</span><br><span class="hljs-comment">            走的方法:</span><br><span class="hljs-comment">            public Vector(int initialCapacity) &#123;</span><br><span class="hljs-comment">                this(initialCapacity, 0);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         2. vector.add(i)</span><br><span class="hljs-comment">         2.1  //下面这个方法就添加数据到vector集合</span><br><span class="hljs-comment">            public synchronized boolean add(E e) &#123;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">                ensureCapacityHelper(elementCount + 1);</span><br><span class="hljs-comment">                elementData[elementCount++] = e;</span><br><span class="hljs-comment">                return true;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          2.2  //确定是否需要扩容 条件 ： minCapacity - elementData.length &gt; 0</span><br><span class="hljs-comment">            private void ensureCapacityHelper(int minCapacity) &#123;</span><br><span class="hljs-comment">                // overflow-conscious code</span><br><span class="hljs-comment">                if (minCapacity - elementData.length &gt; 0)</span><br><span class="hljs-comment">                    grow(minCapacity);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          2.3 //如果 需要的数组大小 不够用，就扩容 , 扩容的算法</span><br><span class="hljs-comment">              //newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?</span><br><span class="hljs-comment">              //                             capacityIncrement : oldCapacity);</span><br><span class="hljs-comment">              //就是扩容两倍.</span><br><span class="hljs-comment">            private void grow(int minCapacity) &#123;</span><br><span class="hljs-comment">                // overflow-conscious code</span><br><span class="hljs-comment">                int oldCapacity = elementData.length;</span><br><span class="hljs-comment">                int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?</span><br><span class="hljs-comment">                                                 capacityIncrement : oldCapacity);</span><br><span class="hljs-comment">                if (newCapacity - minCapacity &lt; 0)</span><br><span class="hljs-comment">                    newCapacity = minCapacity;</span><br><span class="hljs-comment">                if (newCapacity - MAX_ARRAY_SIZE &gt; 0)</span><br><span class="hljs-comment">                    newCapacity = hugeCapacity(minCapacity);</span><br><span class="hljs-comment">                elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="LinkedList-底层结构"><a href="#LinkedList-底层结构" class="headerlink" title="LinkedList 底层结构"></a>LinkedList 底层结构</h3><ul>
<li>LinkedList 底层实现了双向链表和双端队列特点</li>
<li>可以添加任意元素（元素可以重复，也可以是 null ）</li>
<li>线程不安全，没有实现同步</li>
</ul>
<h4 id="LinkedList-的底层操作机制"><a href="#LinkedList-的底层操作机制" class="headerlink" title="LinkedList 的底层操作机制"></a>LinkedList 的底层操作机制</h4><ul>
<li>LinkedList 底层维护了一个双向链表</li>
<li>LinkedList 中维护了两个属性 finst 和 last 分别指向 首节点 和 尾节点</li>
<li>每个节点（Node 对象），里面又维护了 prev、next、item 三个属性，其中通过 prev 指向前一个，通过 next 指向后一个节点，最终实现双向链表</li>
<li>所以 LinkedList 的元素的 添加和删除，不是通过数组完成的，相对来说效率较高</li>
<li>模拟一个简单的双向链表</li>
</ul>
<h4 id="LinkedList-使用案例"><a href="#LinkedList-使用案例" class="headerlink" title="LinkedList 使用案例"></a>LinkedList 使用案例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListCRUD</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">LinkedList</span> <span class="hljs-variable">linkedList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();<br>        linkedList.add(<span class="hljs-number">1</span>);<br>        linkedList.add(<span class="hljs-number">2</span>);<br>        linkedList.add(<span class="hljs-number">3</span>);<br>        System.out.println(<span class="hljs-string">&quot;linkedList=&quot;</span> + linkedList);<br><br>        <span class="hljs-comment">//演示一个删除结点的</span><br>        linkedList.remove(); <span class="hljs-comment">// 这里默认删除的是第一个结点</span><br>        <span class="hljs-comment">//linkedList.remove(2); // 删除指定位置节点（位置从0开始）</span><br>        System.out.println(<span class="hljs-string">&quot;linkedList=&quot;</span> + linkedList);<br><br>        <span class="hljs-comment">//修改某个结点对象（位置从0开始）</span><br>        linkedList.set(<span class="hljs-number">1</span>, <span class="hljs-number">999</span>);<br>        System.out.println(<span class="hljs-string">&quot;linkedList=&quot;</span> + linkedList);<br><br>        <span class="hljs-comment">//得到某个结点对象（位置从0开始）</span><br>        <span class="hljs-comment">//get(1) 是得到双向链表的第二个对象</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> linkedList.get(<span class="hljs-number">1</span>);<br>        System.out.println(o);<span class="hljs-comment">//999</span><br><br>        <span class="hljs-comment">//LinkedList 遍历</span><br>        <span class="hljs-comment">//因为LinkedList 是 实现了List接口, 遍历方式</span><br>        System.out.println(<span class="hljs-string">&quot;===LinkeList遍历迭代器====&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> linkedList.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span>  iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;next=&quot;</span> + next);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;===LinkeList遍历增强for====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o1 : linkedList) &#123;<br>            System.out.println(<span class="hljs-string">&quot;o1=&quot;</span> + o1);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;===LinkeList遍历普通for====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; linkedList.size(); i++) &#123;<br>            System.out.println(linkedList.get(i));<br>        &#125;<br><br><br>        <span class="hljs-comment">//源码阅读.</span><br>        <span class="hljs-comment">/* 1. LinkedList linkedList = new LinkedList();</span><br><span class="hljs-comment">              public LinkedList() &#123;&#125;</span><br><span class="hljs-comment">           2. 这时 linkeList 的属性 first = null  last = null</span><br><span class="hljs-comment">           3. 执行 添加</span><br><span class="hljs-comment">               public boolean add(E e) &#123;</span><br><span class="hljs-comment">                    linkLast(e);</span><br><span class="hljs-comment">                    return true;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            4.将新的结点，加入到双向链表的最后</span><br><span class="hljs-comment">             void linkLast(E e) &#123;</span><br><span class="hljs-comment">                final Node&lt;E&gt; l = last;</span><br><span class="hljs-comment">                final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);</span><br><span class="hljs-comment">                last = newNode;</span><br><span class="hljs-comment">                if (l == null)</span><br><span class="hljs-comment">                    first = newNode;</span><br><span class="hljs-comment">                else</span><br><span class="hljs-comment">                    l.next = newNode;</span><br><span class="hljs-comment">                size++;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">          源码阅读 linkedList.remove(); // 这里默认删除的是第一个结点</span><br><span class="hljs-comment">          1. 执行 removeFirst</span><br><span class="hljs-comment">            public E remove() &#123;</span><br><span class="hljs-comment">                return removeFirst();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          2. 执行</span><br><span class="hljs-comment">            public E removeFirst() &#123;</span><br><span class="hljs-comment">                final Node&lt;E&gt; f = first;</span><br><span class="hljs-comment">                if (f == null)</span><br><span class="hljs-comment">                    throw new NoSuchElementException();</span><br><span class="hljs-comment">                return unlinkFirst(f);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          3. 执行 unlinkFirst, 将 f 指向的双向链表的第一个结点拿掉</span><br><span class="hljs-comment">            private E unlinkFirst(Node&lt;E&gt; f) &#123;</span><br><span class="hljs-comment">                // assert f == first &amp;&amp; f != null;</span><br><span class="hljs-comment">                final E element = f.item;</span><br><span class="hljs-comment">                final Node&lt;E&gt; next = f.next;</span><br><span class="hljs-comment">                f.item = null;</span><br><span class="hljs-comment">                f.next = null; // help GC</span><br><span class="hljs-comment">                first = next;</span><br><span class="hljs-comment">                if (next == null)</span><br><span class="hljs-comment">                    last = null;</span><br><span class="hljs-comment">                else</span><br><span class="hljs-comment">                    next.prev = null;</span><br><span class="hljs-comment">                size--;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">                return element;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ArrayList-和-LinkedList-的比较"><a href="#ArrayList-和-LinkedList-的比较" class="headerlink" title="ArrayList 和 LinkedList 的比较"></a>ArrayList 和 LinkedList 的比较</h4> <img src="image-20220913153254219.png" srcset="/img/loading.gif" lazyload alt="image-20220913153254219" style="zoom:50%;" />







<h3 id="Set-接口和常用方法"><a href="#Set-接口和常用方法" class="headerlink" title="Set 接口和常用方法"></a>Set 接口和常用方法</h3><h4 id="Set-接口基本介绍"><a href="#Set-接口基本介绍" class="headerlink" title="Set 接口基本介绍"></a>Set 接口基本介绍</h4><ul>
<li><p>无序（添加和取出的顺序不一致），没有索引</p>
</li>
<li><p>不允许重复元素（重复添加同一元素会被忽略），所以最多包含一个 null</p>
</li>
<li><p>JDK API 中 Set 接口的实现类有：</p>
<p>HashSet、TreeSet、EnumSet … …</p>
</li>
</ul>
<h4 id="Set-接口的常用方法"><a href="#Set-接口的常用方法" class="headerlink" title="Set 接口的常用方法"></a>Set 接口的常用方法</h4><p>同 Collection 的遍历方式一样，因为 Set 接口时 Collection 接口的子接口</p>
<h4 id="Set-接口的遍历方式"><a href="#Set-接口的遍历方式" class="headerlink" title="Set 接口的遍历方式"></a>Set 接口的遍历方式</h4><ul>
<li>可以使用迭代器</li>
<li>增强 for</li>
<li>不能使用索引的方式来获取</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//set 简单解读案例</span><br><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SetMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 以 Set 接口的实现类 HashSet 来讲解 Set 接口的方法</span><br>        <span class="hljs-comment">//2. set 接口的实现类的对象(Set接口对象), 不能存放重复的元素, 可以添加一个null</span><br>        <span class="hljs-comment">//3. set 接口对象存放数据是无序(即添加的顺序和取出的顺序不一致)</span><br>        <span class="hljs-comment">//4. 注意：取出的顺序的顺序虽然不是添加的顺序，但是他的固定.</span><br>        <span class="hljs-comment">//补充：</span><br>        <span class="hljs-comment">//1. 在执行add方法后，会返回一个boolean值</span><br>        <span class="hljs-comment">//2. 如果添加成功，返回 true, 否则返回false</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        set.add(<span class="hljs-string">&quot;john&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;john&quot;</span>);<span class="hljs-comment">//重复</span><br>        set.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;hsp&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>        set.add(<span class="hljs-literal">null</span>);<span class="hljs-comment">//</span><br>        set.add(<span class="hljs-literal">null</span>);<span class="hljs-comment">//再次添加null</span><br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br><br>        <span class="hljs-comment">//遍历</span><br>        <span class="hljs-comment">//方式1： 使用迭代器</span><br>        System.out.println(<span class="hljs-string">&quot;=====使用迭代器====&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> set.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span>  iterator.next();<br>            System.out.println(<span class="hljs-string">&quot;obj=&quot;</span> + obj);<br>        &#125;<br><br>        set.remove(<span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//方式2: 增强for</span><br>        System.out.println(<span class="hljs-string">&quot;=====增强for====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o : set) &#123;<br>            System.out.println(<span class="hljs-string">&quot;o=&quot;</span> + o);<br>        &#125;<br><br>        <span class="hljs-comment">//set 接口对象，不能通过索引来获取</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="HashSet-说明"><a href="#HashSet-说明" class="headerlink" title="HashSet 说明"></a>HashSet 说明</h3><ul>
<li><p>HashSet 实现了 Set 接口</p>
</li>
<li><p>HashSet 实际上是 HashMap</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span>&#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>可以存放 null 值，但是只能有一个 null</p>
</li>
<li><p>HashSet 不保证元素是有序的，取决于 hash 后，再确定索引的结果</p>
<p>即 不保证存放元素的顺序和取出顺序一致</p>
</li>
<li><p>不能有重复元素&#x2F;对象（与 Set 一致）</p>
</li>
</ul>
<h4 id="HashSet-案例说明"><a href="#HashSet-案例说明" class="headerlink" title="HashSet 案例说明"></a>HashSet 案例说明</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSet01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">//1. 在执行add方法后，会返回一个boolean值</span><br>        <span class="hljs-comment">//2. 如果添加成功，返回 true, 否则返回false</span><br>        <span class="hljs-comment">//3. 可以通过 remove 指定删除哪个对象</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;john&quot;</span>));<span class="hljs-comment">//T</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;lucy&quot;</span>));<span class="hljs-comment">//T</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;john&quot;</span>));<span class="hljs-comment">//F</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;jack&quot;</span>));<span class="hljs-comment">//T</span><br>        System.out.println(set.add(<span class="hljs-string">&quot;Rose&quot;</span>));<span class="hljs-comment">//T</span><br>        <br>        set.remove(<span class="hljs-string">&quot;john&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<span class="hljs-comment">//3个</span><br><br>        <span class="hljs-comment">//</span><br>        set  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<span class="hljs-comment">//0</span><br>        <span class="hljs-comment">//4 Hashset 不能添加相同的元素/数据?</span><br>        set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<span class="hljs-comment">//添加成功</span><br>        set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<span class="hljs-comment">//加入不了</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>));<span class="hljs-comment">//OK</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>));<span class="hljs-comment">//Ok</span><br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br><br>        <span class="hljs-comment">//在加深一下. 非常经典的面试题.</span><br>        <span class="hljs-comment">//看源码，做分析， 先给小伙伴留一个坑，以后讲完源码，你就了然</span><br>        <span class="hljs-comment">//去看他的源码，即 add 到底发生了什么?=&gt; 底层机制.</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>));<span class="hljs-comment">//ok</span><br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>));<span class="hljs-comment">//加入不了.</span><br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123; <span class="hljs-comment">//定义了Dog类</span><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="HashSet-底层机制说明"><a href="#HashSet-底层机制说明" class="headerlink" title="HashSet 底层机制说明"></a>HashSet 底层机制说明</h4><p><strong>图解：</strong></p>
<p> <img src="/2019/10/10/JavaNote/image-20220913212131074.png" srcset="/img/loading.gif" lazyload alt="image-20220913212131074"></p>
<p><strong>分析 HashSet 底层是 HashMap，而 HashMap 底层是（数组 + 链表 + 红黑树）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//模拟 数组+链表</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetStructure</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//模拟一个HashSet的底层 (HashMap 的底层结构)</span><br>        <span class="hljs-comment">//1. 创建一个数组，数组的类型是 Node[]</span><br>        <span class="hljs-comment">//2. 有些人，直接把 Node[] 数组称为 表</span><br>        Node[] table = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[<span class="hljs-number">16</span>];<br>        <span class="hljs-comment">//3. 创建结点</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">john</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-literal">null</span>);<br><br>        table[<span class="hljs-number">2</span>] = john;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">jack</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-literal">null</span>);<br>        john.next = jack;<span class="hljs-comment">// 将jack 结点挂载到john</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">rose</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;Rose&quot;</span>, <span class="hljs-literal">null</span>);<br>        jack.next = rose;<span class="hljs-comment">// 将rose 结点挂载到jack</span><br><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">lucy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-literal">null</span>);<br>        table[<span class="hljs-number">3</span>] = lucy; <span class="hljs-comment">// 把lucy 放到 table表的索引为3的位置.</span><br>        System.out.println(<span class="hljs-string">&quot;table=&quot;</span> + table);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123; <span class="hljs-comment">//结点, 存储数据, 可以指向下一个结点，从而形成链表</span><br>    Object item; <span class="hljs-comment">//存放数据</span><br>    Node next; <span class="hljs-comment">// 指向下一个结点</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(Object item, Node next)</span> &#123;<br>        <span class="hljs-built_in">this</span>.item = item;<br>        <span class="hljs-built_in">this</span>.next = next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>分析 HashSet 的添加元素底层是如何实现（hash() + equals()）</strong></p>
<p><strong>概括：</strong></p>
<p>1）先获取元素的哈希值（hashCode方法）</p>
<p>2）对哈希值进行运算，得出一个索引值即为要存放在哈希表中的位置号</p>
<p>3）如果该位置上有其它元素，则需要进行 equals 判断（equals 可以由程序员重写来定义判断标准）</p>
<p>​	  如果相等，则不再添加。如果不相等，则以链表的方式添加。</p>
<p><strong>细节：</strong></p>
<p>1）HashSet 底层是 HashMap </p>
<p>2）添加一个元素时，先得到 hash 值 - 会转成 –&gt; 索引值</p>
<p>3）找到存储数据表 table，看这个索引位置是否已经存放的有元素</p>
<p>4）如果没有，直接加入</p>
<p>5）如果有，调用 equals 比较，如果相同，就放弃添加，如果不相同，则添加到最后</p>
<p>6）在 Java8 中，如果一条链表的元素个数到达 TREEIFY_THRESHOLD（默认是 8），并且 table(数组) 的大小 &gt;&#x3D; MIN_TREEIFY_CAPACITY（默认64），就会进行树化（红黑树）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetSource</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        hashSet.add(<span class="hljs-string">&quot;java&quot;</span>);<span class="hljs-comment">//到此位置，第1次add分析完毕.</span><br>        hashSet.add(<span class="hljs-string">&quot;php&quot;</span>);<span class="hljs-comment">//到此位置，第2次add分析完毕</span><br>        hashSet.add(<span class="hljs-string">&quot;java&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + hashSet);<br><br><span class="hljs-comment">// ==========================================================================</span><br><span class="hljs-comment">// 对HashSet 的源码解读</span><br><span class="hljs-number">1.</span> 执行 HashSet()<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>&#125;<br><span class="hljs-number">2.</span> 执行 add()<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<span class="hljs-comment">//e = &quot;java&quot;</span><br>    <span class="hljs-keyword">return</span> map.put(e, PRESENT)==<span class="hljs-literal">null</span>;  <span class="hljs-comment">//(static) PRESENT = new Object();</span><br>&#125;<br><span class="hljs-number">3.</span>执行 put() , 该方法会先执行 hash(key) 得到key对应的hash值<br>    再通过算法得到 (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>)<br>    <span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<span class="hljs-comment">//key = &quot;java&quot;  value = PRESENT (静态=&gt;共享)</span><br>    <span class="hljs-keyword">return</span> putVal(hash(key), key, value, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);<br>&#125;<br><span class="hljs-number">4.</span>执行 putVal<br>    <span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,<span class="hljs-type">boolean</span> evict)</span> &#123;<br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i; <span class="hljs-comment">// 定义了辅助变量</span><br><br>    <span class="hljs-comment">// table 就是 HashMap 的一个数组，类型是 Node[]</span><br>    <span class="hljs-comment">// if 语句表示如果当前table 是null, 或者 大小=0</span><br>    <span class="hljs-comment">// 就是第一次扩容，到16个空间.</span><br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)<br>        n = (tab = resize()).length;<br><br>    <span class="hljs-comment">// (1)根据key，得到hash 去计算该key应该存放到table表的哪个索引位置</span><br>    <span class="hljs-comment">//    并把这个位置的对象，赋给 p</span><br>    <span class="hljs-comment">// (2)判断 p 是否为null</span><br>    <span class="hljs-comment">// (2.1) 如果 p 为 null, 表示还没有存放元素, 就创建一个 Node (key=&quot;java&quot;,value=PRESENT)</span><br>    <span class="hljs-comment">// (2.2) 就放在该位置 tab[i] = newNode(hash, key, value, null)</span><br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>)<br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>    <span class="hljs-comment">//</span><br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//一个开发技巧提示： 在需要局部变量(辅助变量)时候，再创建</span><br>        Node&lt;K,V&gt; e; K k; <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//如果当前索引位置对应的链表的第一个元素和准备添加的key的hash值一样</span><br>        <span class="hljs-comment">//并且满足 下面两个条件之一:</span><br>        <span class="hljs-comment">//(1) 准备加入的key 和 p 指向的Node 结点的 key 是同一个对象</span><br>        <span class="hljs-comment">//(2) p 指向的Node 结点的 key 的 equals() 和准备加入的key比较后相同</span><br>        <span class="hljs-comment">//就不能加入</span><br>        <span class="hljs-keyword">if</span> (p.hash == hash &amp;&amp;<br>            ((k = p.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>            e = p;<br>        <span class="hljs-comment">//再判断 p 是不是一颗红黑树,</span><br>        <span class="hljs-comment">//如果是一颗红黑树，就调用 putTreeVal , 来进行添加</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode)<br>            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="hljs-built_in">this</span>, tab, hash, key, value);<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//如果table对应索引位置，已经是一个链表, 就使用for循环依次比较</span><br>            <span class="hljs-comment">//(1) 依次和该链表的每一个元素比较后，都不相同, 则加入到该链表的最后</span><br>            <span class="hljs-comment">//    注意在把元素添加到链表后，立即判断 该链表是否已经达到8个结点</span><br>            <span class="hljs-comment">//    , 就调用 treeifyBin() 对当前这个链表进行树化(转成红黑树)</span><br>            <span class="hljs-comment">//    注意，在转成红黑树时，要进行判断, 判断条件</span><br>            <span class="hljs-comment">//    if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY(64))</span><br>            <span class="hljs-comment">//            resize();</span><br>            <span class="hljs-comment">//    如果上面条件成立，先table扩容，而不会转成红黑树</span><br>            <span class="hljs-comment">//    只有上面条件不成立时，才进行转成红黑树</span><br>            <span class="hljs-comment">//(2) 依次和该链表的每一个元素比较过程中，如果有相同情况,就直接break</span><br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123;<br>                <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;<br>                    p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>                    <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD(<span class="hljs-number">8</span>) - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span><br>                        treeifyBin(tab, hash);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp;<br>                    ((k = e.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>                    <span class="hljs-keyword">break</span>;<br>                p = e;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// existing mapping for key</span><br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;<br>            <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-literal">null</span>)<br>                e.value = value;<br>            afterNodeAccess(e);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br>    ++modCount;<br>    <span class="hljs-comment">//size 就是我们每加入一个结点Node(k,v,h,next), size++</span><br>    <span class="hljs-comment">//不管是加到table表上还是加到链表上</span><br>    <span class="hljs-keyword">if</span> (++size &gt; threshold)<br>        resize();<span class="hljs-comment">//扩容</span><br>    afterNodeInsertion(evict);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><span class="hljs-comment">// ==========================================================================</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>分析 HashSet 的扩容和转成红黑树机制</strong></p>
<p>1）HashSet 底层是 HashMap，第一次添加时，table 数组扩容到 16，临界值（threshold）是 16*加载因子（loadFactor）是 0.75 &#x3D; 12       &#x2F;&#x2F; 临界值（threshold）作为 缓冲，提前扩容</p>
<p>2）如果 table 数组使用了临界值 12，就会扩容到 16 * 2 &#x3D; 32，新的临界值就是 32 * 0.75 &#x3D; 24，依次类推</p>
<p>3）在 Java8-17 中，如果一条链表的元素个数到达 TREEIFY_THRESHOLD（默认是 8），并且 table 的大小 &gt;&#x3D; MIN_TREEIFY_CAPACITY（默认），就会进行树化（红黑树），否则仍然采用数组扩容机制</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetIncrement</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        HashSet底层是HashMap, 第一次添加时，table 数组扩容到 16，</span><br><span class="hljs-comment">        临界值(threshold)是 16*加载因子(loadFactor)是0.75 = 12</span><br><span class="hljs-comment">        如果table 数组使用到了临界值 12,就会扩容到 16 * 2 = 32,</span><br><span class="hljs-comment">        新的临界值就是 32*0.75 = 24, 依次类推</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><span class="hljs-comment">//        for(int i = 1; i &lt;= 100; i++) &#123;</span><br><span class="hljs-comment">//            hashSet.add(i);//1,2,3,4,5...100</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        在Java8中, 如果一条链表的元素个数到达 TREEIFY_THRESHOLD(默认是 8 )，</span><br><span class="hljs-comment">        并且table的大小 &gt;= MIN_TREEIFY_CAPACITY(默认64),就会进行树化(红黑树),</span><br><span class="hljs-comment">        否则仍然采用数组扩容机制</span><br><span class="hljs-comment">         */</span><br><br><span class="hljs-comment">//        for(int i = 1; i &lt;= 12; i++) &#123;</span><br><span class="hljs-comment">//            hashSet.add(new A(i));//</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            当我们向hashset增加一个元素，-&gt; 加入Node 或 -&gt; 加入table , 就算是一个size++</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">7</span>; i++) &#123;<span class="hljs-comment">//在table的某一条链表上添加了 7个A对象</span><br>            hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>(i));<span class="hljs-comment">//</span><br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">7</span>; i++) &#123;<span class="hljs-comment">//在table的另外一条链表上添加了 7个B对象</span><br>            hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(i));<span class="hljs-comment">//</span><br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<span class="hljs-built_in">this</span>.n = n;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">200</span>;&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<span class="hljs-built_in">this</span>.n = n;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="HashSet-课堂练习"><a href="#HashSet-课堂练习" class="headerlink" title="HashSet 课堂练习"></a>HashSet 课堂练习</h4><p> &#x2F;&#x2F;alt + ins 快捷键 快速重写 equals 和 hashCode </p>
 <img src="image-20220914225605186.png" srcset="/img/loading.gif" lazyload alt="image-20220914225605186" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         定义一个Employee类，该类包含：private成员属性name,age 要求:</span><br><span class="hljs-comment">         创建3个Employee 对象放入 HashSet中</span><br><span class="hljs-comment">         当 name和age的值相同时，认为是相同员工, 不能添加到HashSet集合中</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">18</span>));<span class="hljs-comment">//ok</span><br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-number">28</span>));<span class="hljs-comment">//ok</span><br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">18</span>));<span class="hljs-comment">//加入不成功.</span><br><br>        <span class="hljs-comment">//回答,加入了几个? 3个</span><br>        System.out.println(<span class="hljs-string">&quot;hashSet=&quot;</span> + hashSet);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//创建Employee</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Employee&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//alt + ins 快捷键 快速重写 equals 和 hashCode </span><br>    <span class="hljs-comment">//重写 equals 判断</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> (Employee) o;<br>        <span class="hljs-keyword">return</span> age == employee.age &amp;&amp;<br>                Objects.equals(name, employee.name);<br>    &#125;<br>    <span class="hljs-comment">//如果 name 和 age 值相同，则返回相同的hash值</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(name, age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="LinkedHashSet-全面说明"><a href="#LinkedHashSet-全面说明" class="headerlink" title="LinkedHashSet 全面说明"></a>LinkedHashSet 全面说明</h3><ul>
<li>LinkedHashSet 是 HashSet 的子类</li>
<li>LinkedHashSet 底层是一个 LinkedHashMap，底层维护了一个 数组 + 双向链表</li>
<li>LinkedHashSet 根据元素的 hashCode 值来决定元素的存储位置，同时使用链表维护元素的次序（图），这使得元素看起来是以插入顺序保存的（即：取出元素的顺序与添加元素的顺序一致）</li>
<li>LinkedHashSet 不允许添重复元素</li>
<li>LinkedHashSet 底层机制示意图</li>
</ul>
 <img src="image-20220915192249886.png" srcset="/img/loading.gif" lazyload alt="image-20220915192249886" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.LinkedHashSet;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedHashSetSource</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//分析一下LinkedHashSet的底层机制</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>();<br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;AA&quot;</span>));<br>        set.add(<span class="hljs-number">456</span>);<br>        set.add(<span class="hljs-number">456</span>);<br>        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Customer</span>(<span class="hljs-string">&quot;刘&quot;</span>, <span class="hljs-number">1001</span>));<br>        set.add(<span class="hljs-number">123</span>);<br>        set.add(<span class="hljs-string">&quot;HSP&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;set=&quot;</span> + set);<br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. LinkedHashSet 加入顺序和取出元素/数据的顺序一致</span><br>        <span class="hljs-comment">//2. LinkedHashSet 底层维护的是一个LinkedHashMap(是HashMap的子类)</span><br>        <span class="hljs-comment">//3. LinkedHashSet 底层结构 (数组table+双向链表)</span><br>        <span class="hljs-comment">//4. 添加第一次时，直接将 数组 table 扩容到 16，存放的结点类型是 LinkedHashMap$Entry</span><br>        <span class="hljs-comment">//5. 数组是 HashMap$Node[] 存放的元素/数据是 LinkedHashMap$Entry类型</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //继承关系是在内部类完成.</span><br><span class="hljs-comment">        static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123;</span><br><span class="hljs-comment">            Entry&lt;K,V&gt; before, after;</span><br><span class="hljs-comment">            Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="hljs-comment">                super(hash, key, value, next);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> no;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Customer</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> no)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.no = no;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="LinkedHashSet-课后练习题"><a href="#LinkedHashSet-课后练习题" class="headerlink" title="LinkedHashSet 课后练习题"></a>LinkedHashSet 课后练习题</h4> <img src="image-20220915192932489.png" srcset="/img/loading.gif" lazyload alt="image-20220915192932489" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.LinkedHashSet;<br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedHashSetExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">LinkedHashSet</span> <span class="hljs-variable">linkedHashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>();<br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;奥拓&quot;</span>, <span class="hljs-number">1000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;奥迪&quot;</span>, <span class="hljs-number">300000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;法拉利&quot;</span>, <span class="hljs-number">10000000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;奥迪&quot;</span>, <span class="hljs-number">300000</span>));<span class="hljs-comment">//默认情况OK，修改后no</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;保时捷&quot;</span>, <span class="hljs-number">70000000</span>));<span class="hljs-comment">//OK</span><br>        linkedHashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;奥迪&quot;</span>, <span class="hljs-number">300000</span>));<span class="hljs-comment">//默认情况OK，修改后no</span><br><br>        System.out.println(<span class="hljs-string">&quot;linkedHashSet=&quot;</span> + linkedHashSet);<br><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Car 类(属性:name,price)，  如果 name 和 price 一样，</span><br><span class="hljs-comment"> * 则认为是相同元素，就不能添加。 5min</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Car</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> price;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> &#123;<span class="hljs-built_in">this</span>.price = price;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;\nCar&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//重写equals 方法 和 hashCode</span><br>    <span class="hljs-comment">//当 name 和 price 相同时， 就返回相同的 hashCode值，equals 返回 ture</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> (Car) o;<br>        <span class="hljs-keyword">return</span> Double.compare(car.price, price) == <span class="hljs-number">0</span> &amp;&amp;<br>                Objects.equals(name, car.name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(name, price);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Map-接口和常用方法"><a href="#Map-接口和常用方法" class="headerlink" title="Map 接口和常用方法"></a>Map 接口和常用方法</h3><h4 id="Map-接口实现类的特点-很实用"><a href="#Map-接口实现类的特点-很实用" class="headerlink" title="Map 接口实现类的特点 [很实用]"></a>Map 接口实现类的特点 [很实用]</h4><p>注意：此处以 JDK8 为例</p>
<ul>
<li><p>Map 与 Collection 并列存在，用于保存具有映射关系的数据：Key - Value（Set只用到了Key，value是常量）</p>
</li>
<li><p>Map 中的 key 和 value 可以是任何引用类型的数据，会封装到 HsahMap$Node 对象中</p>
<p>基本数据类型也会进行自动装箱，任何把自动装箱生成的对象封装到 HsahMap$Node 对象中</p>
</li>
<li><p>Map 中的 key 不允许重复，原因和 HashSet 一样</p>
</li>
<li><p>Map 中的 value 可以重复</p>
</li>
<li><p>Map 中的 key 可以为 null，value 也可以为 null，注意 key 为 null 只能有一个，value 为 null 可以多个</p>
</li>
<li><p>常用 String类作为 Map 的 key，但使用其它（int、Object等）也可以</p>
</li>
<li><p>key 和 value 之间存在单向一对一关系，即通过指定的 key 总能找到对应的 value</p>
</li>
<li><p>Map 存放数据的 key-value 示意图，一堆 k-v 是放在一个 HashMap$Node 中的，而 Set 和 Collection 只是建立了一个指向 HashMap$Node 对象的引用，从而方便遍历（Node 实现了 Entry 接口）</p>
<p>（因为 Node 实现了 Entry 接口，有些书上也说 一对 k-v 就是一个 Entry）</p>
 <img src="image-20220915221924451.png" srcset="/img/loading.gif" lazyload alt="image-20220915221924451" style="zoom:80%;" /></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Map_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//老韩解读Map 接口实现类的特点, 使用实现类HashMap</span><br>        <span class="hljs-comment">//1. Map与Collection并列存在。用于保存具有映射关系的数据:Key-Value(双列元素)</span><br>        <span class="hljs-comment">//2. Map 中的 key 和  value 可以是任何引用类型的数据，会封装到HashMap$Node 对象中</span><br>        <span class="hljs-comment">//3. Map 中的 key 不允许重复，原因和HashSet 一样，前面分析过源码.</span><br>        <span class="hljs-comment">//4. Map 中的 value 可以重复</span><br>        <span class="hljs-comment">//5. Map 的key 可以为 null, value 也可以为null ，注意 key 为null,</span><br>        <span class="hljs-comment">//   只能有一个，value 为null ,可以多个</span><br>        <span class="hljs-comment">//6. 常用String类作为Map的 key</span><br>        <span class="hljs-comment">//7. key 和 value 之间存在单向一对一关系，即通过指定的 key 总能找到对应的 value</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no2&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;张三丰&quot;</span>);<span class="hljs-comment">//当有相同的k, 就等价于替换.</span><br>        map.put(<span class="hljs-string">&quot;no3&quot;</span>, <span class="hljs-string">&quot;张三丰&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;abc&quot;</span>); <span class="hljs-comment">//等价替换</span><br>        map.put(<span class="hljs-string">&quot;no4&quot;</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no5&quot;</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;赵敏&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>(), <span class="hljs-string">&quot;金毛狮王&quot;</span>);<span class="hljs-comment">//k-v</span><br>        <span class="hljs-comment">// 通过get 方法，传入 key ,会返回对应的value</span><br>        System.out.println(map.get(<span class="hljs-string">&quot;no2&quot;</span>));<span class="hljs-comment">//张无忌</span><br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//源码解读</span><br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapSource_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-string">&quot;no2&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>);<span class="hljs-comment">//k-v</span><br>        map.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>());<span class="hljs-comment">//k-v</span><br><span class="hljs-comment">//解读</span><br><span class="hljs-comment">//1. k-v 最后是存放在 HashMap$Node node = newNode(hash, key, value, null) 中的</span><br><span class="hljs-comment">//2. k-v 为了方便程序员的遍历，还会 创建 EntrySet 集合，该集合存放的元素的类型 Entry，而一个Entry</span><br><span class="hljs-comment">//   对象就有 k,v EntrySet&lt;Entry&lt;K,V&gt;&gt; 即：源码 transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="hljs-comment">//3. 在 entrySet 中， 定义的类型是 Map.Entry，但是实际上存放的还是 HashMap$Node</span><br><span class="hljs-comment">//   这是因为 static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt;，即实现了Map.Entry&lt;K,V&gt;接口</span><br><span class="hljs-comment">//4. 当把 HashMap$Node 对象 存放到 entrySet 就方便我们的遍历, 因为 Map.Entry 提供了重要方法</span><br><span class="hljs-comment">//   K getKey(); V getValue();</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> map.entrySet();<br>        System.out.println(set.getClass()); <span class="hljs-comment">// HashMap$EntrySet</span><br>        <span class="hljs-keyword">for</span> (Object obj : set) &#123;<br>            <span class="hljs-comment">//System.out.println(obj.getClass()); //HashMap$Node</span><br>            <span class="hljs-comment">//为了从 HashMap$Node 取出k-v</span><br>            <span class="hljs-comment">//1. 先做一个向下转型</span><br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> (Map.Entry) obj;<br>            System.out.println(entry.getKey() + <span class="hljs-string">&quot;-&quot;</span> + entry.getValue() );<br>        &#125;<br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set1</span> <span class="hljs-operator">=</span> map.keySet();<br>        System.out.println(set1.getClass());<br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> map.values();<br>        System.out.println(values.getClass());<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="Map-接口常用方法"><a href="#Map-接口常用方法" class="headerlink" title="Map 接口常用方法"></a>Map 接口常用方法</h4><ul>
<li>put：添加</li>
<li>remove：根据键删除映射关系</li>
<li>get：根据键获取值</li>
<li>size：获取元素个数</li>
<li>isEmpty：判断个数是否为0</li>
<li>clear：清除</li>
<li>containsKey：查找键是否存在</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//演示map接口常用方法</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;邓超&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">100</span>));<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;邓超&quot;</span>, <span class="hljs-string">&quot;孙俪&quot;</span>);<span class="hljs-comment">//替换-&gt; 一会分析源码</span><br>        map.put(<span class="hljs-string">&quot;王宝强&quot;</span>, <span class="hljs-string">&quot;马蓉&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;宋喆&quot;</span>, <span class="hljs-string">&quot;马蓉&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;刘令博&quot;</span>, <span class="hljs-literal">null</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;刘亦菲&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;鹿晗&quot;</span>, <span class="hljs-string">&quot;关晓彤&quot;</span>);<span class="hljs-comment">//OK</span><br>        map.put(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-string">&quot;hsp的老婆&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br><span class="hljs-comment">//        remove:根据键删除映射关系</span><br>        map.remove(<span class="hljs-literal">null</span>);<br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br><span class="hljs-comment">//        get：根据键获取值</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">val</span> <span class="hljs-operator">=</span> map.get(<span class="hljs-string">&quot;鹿晗&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;val=&quot;</span> + val);<br><span class="hljs-comment">//        size:获取元素个数</span><br>        System.out.println(<span class="hljs-string">&quot;k-v=&quot;</span> + map.size());<br><span class="hljs-comment">//        isEmpty:判断个数是否为0</span><br>        System.out.println(map.isEmpty());<span class="hljs-comment">//F</span><br><span class="hljs-comment">//        clear:清除k-v</span><br>        <span class="hljs-comment">//map.clear();</span><br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<br><span class="hljs-comment">//        containsKey:查找键是否存在</span><br>        System.out.println(<span class="hljs-string">&quot;结果=&quot;</span> + map.containsKey(<span class="hljs-string">&quot;hsp&quot;</span>));<span class="hljs-comment">//T</span><br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> num;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.num = num;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Map-接口遍历方法"><a href="#Map-接口遍历方法" class="headerlink" title="Map 接口遍历方法"></a>Map 接口遍历方法</h4> <img src="image-20220915222026118.png" srcset="/img/loading.gif" lazyload alt="image-20220915222026118" style="zoom:50%;" />

<ul>
<li>containKey：查找键是否存在</li>
<li>keySet：获取所有的键</li>
<li>entrySet：获取所有关系 k-v</li>
<li>value：获取所有的值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapFor</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;邓超&quot;</span>, <span class="hljs-string">&quot;孙俪&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;王宝强&quot;</span>, <span class="hljs-string">&quot;马蓉&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;宋喆&quot;</span>, <span class="hljs-string">&quot;马蓉&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;刘令博&quot;</span>, <span class="hljs-literal">null</span>);<br>        map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;刘亦菲&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;鹿晗&quot;</span>, <span class="hljs-string">&quot;关晓彤&quot;</span>);<br><br>        <span class="hljs-comment">//第一组: 先取出 所有的Key , 通过Key 取出对应的Value</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">keyset</span> <span class="hljs-operator">=</span> map.keySet();<br>        <span class="hljs-comment">//(1) 增强for</span><br>        System.out.println(<span class="hljs-string">&quot;-----第一种方式-------&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object key : keyset) &#123;<br>            System.out.println(key + <span class="hljs-string">&quot;-&quot;</span> + map.get(key));<br>        &#125;<br>        <span class="hljs-comment">//(2) 迭代器</span><br>        System.out.println(<span class="hljs-string">&quot;----第二种方式--------&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> keyset.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span>  iterator.next();<br>            System.out.println(key + <span class="hljs-string">&quot;-&quot;</span> + map.get(key));<br>        &#125;<br><br>        <span class="hljs-comment">//第二组: 把所有的values取出</span><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> map.values();<br>        <span class="hljs-comment">//这里可以使用所有的Collections使用的遍历方法</span><br>        <span class="hljs-comment">//(1) 增强for</span><br>        System.out.println(<span class="hljs-string">&quot;---取出所有的value 增强for----&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object value : values) &#123;<br>            System.out.println(value);<br>        &#125;<br>        <span class="hljs-comment">//(2) 迭代器</span><br>        System.out.println(<span class="hljs-string">&quot;---取出所有的value 迭代器----&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator2</span> <span class="hljs-operator">=</span> values.iterator();<br>        <span class="hljs-keyword">while</span> (iterator2.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span>  iterator2.next();<br>            System.out.println(value);<br><br>        &#125;<br><br>        <span class="hljs-comment">//第三组: 通过 EntrySet 来获取 k-v</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">entrySet</span> <span class="hljs-operator">=</span> map.entrySet();<span class="hljs-comment">// EntrySet&lt;Map.Entry&lt;K,V&gt;&gt;</span><br>        <span class="hljs-comment">//(1) 增强for</span><br>        System.out.println(<span class="hljs-string">&quot;----使用 EntrySet 的 for增强(第3种)----&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object entry : entrySet) &#123;<br>            <span class="hljs-comment">//将 entry 转成 Map.Entry</span><br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) entry;<br>            System.out.println(m.getKey() + <span class="hljs-string">&quot;-&quot;</span> + m.getValue());<br>        &#125;<br>        <span class="hljs-comment">//(2) 迭代器</span><br>        System.out.println(<span class="hljs-string">&quot;----使用 EntrySet 的 迭代器(第4种)----&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator3</span> <span class="hljs-operator">=</span> entrySet.iterator();<br>        <span class="hljs-keyword">while</span> (iterator3.hasNext()) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span>  iterator3.next();<br>            <span class="hljs-comment">//System.out.println(next.getClass());</span><br>            <span class="hljs-comment">//HashMap$Node -实现-&gt; Map.Entry (getKey,getValue)</span><br>            <span class="hljs-comment">//向下转型 Map.Entry</span><br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) entry;<br>            System.out.println(m.getKey() + <span class="hljs-string">&quot;-&quot;</span> + m.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Map-练习题"><a href="#Map-练习题" class="headerlink" title="Map 练习题"></a>Map 练习题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//完成代码</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">hashMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        <span class="hljs-comment">//添加对象</span><br>        hashMap.put(<span class="hljs-number">1</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">300000</span>, <span class="hljs-number">1</span>));<br>        hashMap.put(<span class="hljs-number">2</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">21000</span>, <span class="hljs-number">2</span>));<br>        hashMap.put(<span class="hljs-number">3</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">12000</span>, <span class="hljs-number">3</span>));<br><br>        <span class="hljs-comment">//遍历2种方式</span><br>        <span class="hljs-comment">//并遍历显示工资&gt;18000的员工(遍历方式最少两种)</span><br>        <span class="hljs-comment">//1. 使用keySet  -&gt; 增强for</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">keySet</span> <span class="hljs-operator">=</span> hashMap.keySet();<br>        System.out.println(<span class="hljs-string">&quot;====第一种遍历方式====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object key : keySet) &#123;<br>            <span class="hljs-comment">//先获取value</span><br>            <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> (Emp) hashMap.get(key);<br>            <span class="hljs-keyword">if</span>(emp.getSal() &gt;<span class="hljs-number">18000</span>) &#123;<br>                System.out.println(emp);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//2. 使用EntrySet -&gt; 迭代器</span><br>        <span class="hljs-comment">//   体现比较难的知识点</span><br>        <span class="hljs-comment">//   慢慢品，越品越有味道.</span><br>        System.out.println(<span class="hljs-string">&quot;======迭代器======&quot;</span>);<br>        <span class="hljs-type">Set</span> <span class="hljs-variable">entrySet</span> <span class="hljs-operator">=</span> hashMap.entrySet();<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> entrySet.iterator();<br>        <span class="hljs-comment">//二合一：Iterator iterator = (hashMap.entrySet()).iterator();</span><br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span>  (Map.Entry)iterator.next();<br>            <span class="hljs-comment">//通过entry 取得key 和 value</span><br>            <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> (Emp) entry.getValue();<br>            <span class="hljs-keyword">if</span>(emp.getSal() &gt; <span class="hljs-number">18000</span>) &#123;<br>                System.out.println(emp);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 使用HashMap添加3个员工对象，要求</span><br><span class="hljs-comment"> * 键：员工id</span><br><span class="hljs-comment"> * 值：员工对象</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * 并遍历显示工资&gt;18000的员工(遍历方式最少两种)</span><br><span class="hljs-comment"> * 员工类：姓名、工资、员工id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Emp</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Emp</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> sal, <span class="hljs-type">int</span> id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSal</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> sal;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSal</span><span class="hljs-params">(<span class="hljs-type">double</span> sal)</span> &#123;<span class="hljs-built_in">this</span>.sal = sal;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> id;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> &#123;<span class="hljs-built_in">this</span>.id = id;&#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Emp&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&quot;, id=&quot;</span> + id +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="HashMap-阶段小结"><a href="#HashMap-阶段小结" class="headerlink" title="HashMap 阶段小结"></a>HashMap 阶段小结</h4><ul>
<li><p>Map 接口的常用实现类：HashMap、Hashtable 和 Properties</p>
</li>
<li><p>HashMap 是 Map 接口使用频率最高的实现类</p>
</li>
<li><p>HashMap 以 key-val对 的方式来存储数据（HashMap$Node类型）</p>
</li>
<li><p>key 不能重复，但是值可以重复，允许 null 键 和 null 值</p>
</li>
<li><p>如果添加相同的key，则会覆盖原来的 key-val，等同于修改替换（key 不变，val 变）</p>
</li>
<li><p>与 HashSet 一样，不保证映射的顺序，因为底层是以 hash 表的方式来存储的</p>
<p>(JDK8 的 HashMap 底层：数组 + 链表 + 红黑树)</p>
</li>
<li><p>HashMap 没有实现同步，因此是线程不安全的，方法没有做同步互斥的操作，没有 synchronized</p>
</li>
</ul>
<h4 id="HashMap-底层机制及源码剖析"><a href="#HashMap-底层机制及源码剖析" class="headerlink" title="HashMap 底层机制及源码剖析"></a>HashMap 底层机制及源码剖析</h4> <img src="image-20220916141112139.png" srcset="/img/loading.gif" lazyload alt="image-20220916141112139" style="zoom:50%;" />



<p><strong>扩容机制： [和 HashSet 相同]</strong></p>
<ul>
<li>HashMap 底层维护了 Node 类型的数组 table，默认为 null</li>
<li>当创建对象时，将加载因子（loadfactor）初始化为 0.75</li>
<li>当添加 key-val 时，通过 key 的哈希值得到在 table 的索引，然后判断该索引处是否有元素，如果没有元素则直接添加；如果该索引处有元素，继续判断该元素的 key 和准备加入的 key 是否相等（equals），如果相等，则直接替换 val；如果不相等则需要判断是树结构还是链表结构，做出相应处理；如果添加时发现容量不够，则需要扩容</li>
<li>第 1 次添加，则需要扩容 table 容量为 16，临界值（threshold）为 12（16*0.75）</li>
<li>以后再扩容，则需要扩容 table 容量为原来的 2倍（32），临界值为原来的 2 倍（24），以此类推</li>
<li>在 java8 中，如果一条链的元素个数超过 TREEIFY_THRESHOLD（默认为8），并且 table &gt;&#x3D; MIN_TREEIFY_CAPACITY（默认 64），就会进行树化（红黑树）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//HashMap的put() 源码解读</span><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashMapSource1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">HashMap</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-number">10</span>);<span class="hljs-comment">//ok</span><br>        map.put(<span class="hljs-string">&quot;php&quot;</span>, <span class="hljs-number">10</span>);<span class="hljs-comment">//ok</span><br>        map.put(<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-number">20</span>);<span class="hljs-comment">//替换value</span><br>        System.out.println(<span class="hljs-string">&quot;map=&quot;</span> + map);<span class="hljs-comment">//</span><br>        <span class="hljs-comment">/* 解读 HashMap的源码+图解</span><br><span class="hljs-comment">        1. 执行构造器 new HashMap()</span><br><span class="hljs-comment">           初始化加载因子 loadfactor = 0.75</span><br><span class="hljs-comment">           此时 HashMap$Node[] table = null</span><br><span class="hljs-comment">        2. 执行put（如果参数中有基本数据类型则会先进行自动装箱）</span><br><span class="hljs-comment">        执行put 调用 hash方法，计算 key的 hash值 (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</span><br><span class="hljs-comment">            public V put(K key, V value) &#123;//K = &quot;java&quot; value = 10</span><br><span class="hljs-comment">                return putVal(hash(key), key, value, false, true);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         3. 执行 putVal</span><br><span class="hljs-comment">         final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span><br><span class="hljs-comment">                   boolean evict) &#123;</span><br><span class="hljs-comment">                Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;//辅助变量</span><br><span class="hljs-comment">                //01 如果底层的table 数组为null, 或者 length =0 , 就扩容到16</span><br><span class="hljs-comment">                if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="hljs-comment">                    n = (tab = resize()).length;</span><br><span class="hljs-comment">                //02 取出hash值对应的table的索引位置的Node，如果为null，就直接把加入的k-v</span><br><span class="hljs-comment">                //   创建成一个 Node，加入该位置即可</span><br><span class="hljs-comment">                if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="hljs-comment">                    tab[i] = newNode(hash, key, value, null);</span><br><span class="hljs-comment">                else &#123;</span><br><span class="hljs-comment">                    Node&lt;K,V&gt; e; K k;//辅助变量</span><br><span class="hljs-comment">                    // 如果table的索引位置的key的hash相同和新的key的hash值相同，</span><br><span class="hljs-comment">                    // 并 满足(table现有的结点的key和准备添加的key是同一个对象  || equals返回真)</span><br><span class="hljs-comment">                    // 就认为不能加入新的 k-v（但会在后面代码进行val的替换）</span><br><span class="hljs-comment">                    if (p.hash == hash &amp;&amp;</span><br><span class="hljs-comment">                        ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="hljs-comment">                        e = p;</span><br><span class="hljs-comment">                    //如果当前的table的已有的Node 是红黑树，就按照红黑树的方式处理</span><br><span class="hljs-comment">                    else if (p instanceof TreeNode)</span><br><span class="hljs-comment">                        e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span><br><span class="hljs-comment">                    //如果找到的结点，后面是链表，就循环比较</span><br><span class="hljs-comment">                    else &#123;</span><br><span class="hljs-comment">                        for (int binCount = 0; ; ++binCount) &#123;//死循环</span><br><span class="hljs-comment">                            //如果整个链表，没有和他相同,就加到该链表的最后</span><br><span class="hljs-comment">                            if ((e = p.next) == null) &#123;</span><br><span class="hljs-comment">                                p.next = newNode(hash, key, value, null);</span><br><span class="hljs-comment">                                //加入后，判断当前链表的个数，是否已经到8个，到8个，后</span><br><span class="hljs-comment">                                //就调用 treeifyBin 方法进行红黑树的转换</span><br><span class="hljs-comment">                                if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="hljs-comment">                                    treeifyBin(tab, hash);</span><br><span class="hljs-comment">                                break;</span><br><span class="hljs-comment">                            &#125;</span><br><span class="hljs-comment">                            //如果在循环比较过程中，发现有相同的key，就break，就只是替换 value</span><br><span class="hljs-comment">                            if (e.hash == hash &amp;&amp;</span><br><span class="hljs-comment">                                ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="hljs-comment">                                break;</span><br><span class="hljs-comment">                            p = e;</span><br><span class="hljs-comment">                        &#125;</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                    if (e != null) &#123; // existing mapping for key</span><br><span class="hljs-comment">                        V oldValue = e.value;</span><br><span class="hljs-comment">                        if (!onlyIfAbsent || oldValue == null)</span><br><span class="hljs-comment">                            e.value = value; //替换，key对应value</span><br><span class="hljs-comment">                        afterNodeAccess(e);</span><br><span class="hljs-comment">                        return oldValue;</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">                ++modCount; //每增加一个Node ,就size++</span><br><span class="hljs-comment">                if (++size &gt; threshold[12-24-48]) //如果 size &gt; 临界值，就扩容</span><br><span class="hljs-comment">                    resize();</span><br><span class="hljs-comment">                afterNodeInsertion(evict);</span><br><span class="hljs-comment">                return null;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">          5. 关于树化(转成红黑树)</span><br><span class="hljs-comment">          // 如果table 为null，或者大小还没有到 64，暂时不树化，而是进行扩容.</span><br><span class="hljs-comment">          // 否则才会真正的树化 / 剪枝（把树重新转为链表）</span><br><span class="hljs-comment">          final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123;</span><br><span class="hljs-comment">            int n, index; Node&lt;K,V&gt; e;</span><br><span class="hljs-comment">            if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="hljs-comment">                resize();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//HashMap扩容触发树化案例</span><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashMapSource2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">HashMap</span> <span class="hljs-variable">hashMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">12</span>; i++) &#123;<br>            hashMap.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>(i), <span class="hljs-string">&quot;hello&quot;</span>);<br>        &#125;<br>        hashMap.put(<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-string">&quot;bbb&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;hashMap=&quot;</span> + hashMap); <span class="hljs-comment">//12个 k-v</span><br>        <span class="hljs-comment">//布置一个任务，自己设计代码去验证，table 的扩容</span><br>        <span class="hljs-comment">//0 -&gt; 16(12) -&gt; 32(24) -&gt; 64(64*0.75=48)-&gt; 128 (96) -&gt;</span><br>        <span class="hljs-comment">//自己设计程序，验证 -&gt; 增强自己阅读源码能力. 看别人代码.</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>  &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> num;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-built_in">this</span>.num = num;<br>    &#125;<br>    <span class="hljs-comment">//让所有的A对象的hashCode都是100</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;\nA&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;num=&quot;</span> + num +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Map-接口实现类-Hashtable"><a href="#Map-接口实现类-Hashtable" class="headerlink" title="Map 接口实现类-Hashtable"></a>Map 接口实现类-Hashtable</h3><h4 id="HashTable-的基本介绍"><a href="#HashTable-的基本介绍" class="headerlink" title="HashTable 的基本介绍"></a>HashTable 的基本介绍</h4><ul>
<li>存放的元素是键值对：即 K-V</li>
<li>hashtable 的键和值都不能为 null，否则会抛出 NullPointerException</li>
<li>hashTable 使用方法基本上和 HashMap 一样</li>
<li>hashTable 是线程安全的（synchronized），hashMap 是线程不安全的</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Hashtable;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashTableExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Hashtable</span> <span class="hljs-variable">table</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>();<span class="hljs-comment">//ok</span><br>        table.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">//ok</span><br>        <span class="hljs-comment">//table.put(null, 100); //异常 NullPointerException</span><br>        <span class="hljs-comment">//table.put(&quot;john&quot;, null);//异常 NullPointerException</span><br>        table.put(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-number">100</span>);<span class="hljs-comment">//ok</span><br>        table.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">100</span>);<span class="hljs-comment">//ok</span><br>        table.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">88</span>);<span class="hljs-comment">//替换</span><br>        table.put(<span class="hljs-string">&quot;hello1&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello2&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello3&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello4&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello5&quot;</span>, <span class="hljs-number">1</span>);<br>        table.put(<span class="hljs-string">&quot;hello6&quot;</span>, <span class="hljs-number">1</span>);<br>        System.out.println(table);<br>        <span class="hljs-comment">//简单说明一下Hashtable的底层</span><br>        <span class="hljs-comment">//1. 底层有数组 Hashtable$Entry[] 初始化大小为 11</span><br>        <span class="hljs-comment">//2. 临界值 threshold 8 = 11 * 0.75</span><br>        <span class="hljs-comment">//3. 扩容: 按照自己的扩容机制来进行即可.</span><br>        <span class="hljs-comment">//4. 执行 方法 addEntry(hash, key, value, index); 添加K-V 封装到Entry</span><br>        <span class="hljs-comment">//5. 当 if (count &gt;= threshold) 满足时，就进行扩容</span><br>        <span class="hljs-comment">//5. 按照 int newCapacity = (oldCapacity &lt;&lt; 1) + 1; 的大小扩容.</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Hashtable-和-HashMap-对比"><a href="#Hashtable-和-HashMap-对比" class="headerlink" title="Hashtable 和 HashMap 对比"></a>Hashtable 和 HashMap 对比</h4> <img src="image-20220916161139702.png" srcset="/img/loading.gif" lazyload alt="image-20220916161139702" style="zoom: 50%;" />





<h3 id="Map-接口实现类-Properties"><a href="#Map-接口实现类-Properties" class="headerlink" title="Map 接口实现类-Properties"></a>Map 接口实现类-Properties</h3><h4 id="基本介绍-4"><a href="#基本介绍-4" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li><p>Properties 类继承自 Hashtable 类并且实现了 Map 接口，也是使用一种键值对的形式来保存数据</p>
</li>
<li><p>Properties 的使用特点和 Hashtable 类似（key 和 value 不能为 null）</p>
</li>
<li><p>Properties 还可以用于 从 xxx.properties 文件中，加载数据到 Properties 类对象，并进行读取和修改</p>
</li>
<li><p>说明：工作后 xxx.properties 文件通常作为配置文件，这个知识点在IO流举例说明</p>
<p>Java 读写 Properties 配置文件：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xudong-bupt/p/3758136.html">https://www.cnblogs.com/xudong-bupt/p/3758136.html</a></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Properties_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. Properties 继承  Hashtable</span><br>        <span class="hljs-comment">//2. 可以通过 k-v 存放数据，当然key 和 value 不能为 null</span><br>        <span class="hljs-comment">//增加</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//properties.put(null, &quot;abc&quot;);//抛出 空指针异常</span><br>        <span class="hljs-comment">//properties.put(&quot;abc&quot;, null); //抛出 空指针异常</span><br>        properties.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">100</span>);<span class="hljs-comment">//k-v</span><br>        properties.put(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-number">100</span>);<br>        properties.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">100</span>);<br>        properties.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">88</span>);<span class="hljs-comment">//如果有相同的key ， value被替换</span><br>        System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><br>        <span class="hljs-comment">//通过k 获取对应值</span><br>        System.out.println(properties.get(<span class="hljs-string">&quot;lic&quot;</span>));<span class="hljs-comment">//88</span><br><br>        <span class="hljs-comment">//删除</span><br>        properties.remove(<span class="hljs-string">&quot;lic&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><br>        <span class="hljs-comment">//修改</span><br>        properties.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-string">&quot;约翰&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="TreeSet-源码解读"><a href="#TreeSet-源码解读" class="headerlink" title="TreeSet 源码解读"></a>TreeSet 源码解读</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeSet_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. 当我们使用无参构造器，创建TreeSet时，默认使用key的Comparator比较器排序</span><br>        <span class="hljs-comment">//2. 老师希望添加的元素，按照字符串大小来排序</span><br>        <span class="hljs-comment">//3. 使用 TreeSet 提供的一个构造器，可以传入一个比较器(匿名内部类)</span><br>        <span class="hljs-comment">//   并指定排序规则</span><br>        <span class="hljs-comment">//4. 简单看看源码</span><br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        1. 构造器把传入的比较器对象，赋给了 TreeSet的底层的 TreeMap的属性this.comparator</span><br><span class="hljs-comment">         public TreeMap(Comparator&lt;? super K&gt; comparator) &#123;</span><br><span class="hljs-comment">                this.comparator = comparator;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         2. 在 调用 treeSet.add(&quot;tom&quot;), 在底层会执行到</span><br><span class="hljs-comment">         if (cpr != null) &#123;//cpr 就是我们的匿名内部类(对象)</span><br><span class="hljs-comment">            do &#123;</span><br><span class="hljs-comment">                parent = t;</span><br><span class="hljs-comment">                //动态绑定到我们的匿名内部类(对象)compare</span><br><span class="hljs-comment">                cmp = cpr.compare(key, t.key);</span><br><span class="hljs-comment">                if (cmp &lt; 0)</span><br><span class="hljs-comment">                    t = t.left;</span><br><span class="hljs-comment">                else if (cmp &gt; 0)</span><br><span class="hljs-comment">                    t = t.right;</span><br><span class="hljs-comment">                else //如果相等，即返回0,这个Key就没有加入(好好理解)</span><br><span class="hljs-comment">                    return t.setValue(value);</span><br><span class="hljs-comment">            &#125; while (t != null);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br><span class="hljs-comment">//        TreeSet treeSet = new TreeSet();</span><br>        <span class="hljs-type">TreeSet</span> <span class="hljs-variable">treeSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-comment">//下面 调用String的 compareTo方法进行字符串大小比较</span><br>                <span class="hljs-comment">//return ((String) o2).compareTo((String) o1);</span><br>                <span class="hljs-comment">//如果老韩要求加入的元素，按照长度大小排序</span><br>                <span class="hljs-keyword">return</span> ((String) o1).length() - ((String) o2).length();<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//添加数据.</span><br>        treeSet.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        treeSet.add(<span class="hljs-string">&quot;tom&quot;</span>);<span class="hljs-comment">//3</span><br>        treeSet.add(<span class="hljs-string">&quot;sp&quot;</span>);<br>        treeSet.add(<span class="hljs-string">&quot;a&quot;</span>);<br>        treeSet.add(<span class="hljs-string">&quot;abc&quot;</span>);<span class="hljs-comment">//3（因为前面已经有长度为3的元素，所以不能加入）</span><br>        <span class="hljs-comment">//TreeSet中判断能否加入的方法是compare，而不是equals</span><br>        System.out.println(<span class="hljs-string">&quot;treeSet=&quot;</span> + treeSet);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="TreeMap-源码解读"><a href="#TreeMap-源码解读" class="headerlink" title="TreeMap 源码解读"></a>TreeMap 源码解读</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.TreeMap;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeMap_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//使用默认的构造器，创建TreeMap, 默认使用key的Comparator比较器排序</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            要求：按照传入的 k(String) 的大小进行排序</span><br><span class="hljs-comment">         */</span><br><span class="hljs-comment">//        TreeMap treeMap = new TreeMap();</span><br>        <span class="hljs-type">TreeMap</span> <span class="hljs-variable">treeMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-comment">//按照传入的 k(String) 的大小进行排序</span><br>                <span class="hljs-comment">//按照K(String) 的长度大小排序</span><br>                <span class="hljs-comment">//return ((String) o2).compareTo((String) o1);</span><br>                <span class="hljs-keyword">return</span> ((String) o2).length() - ((String) o1).length();<br>            &#125;<br>        &#125;);<br>        treeMap.put(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-string">&quot;杰克&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;汤姆&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;kristina&quot;</span>, <span class="hljs-string">&quot;克瑞斯提诺&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-string">&quot;斯密斯&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>); <span class="hljs-comment">//加入不了</span><br>        <span class="hljs-comment">//TreeMap中判断能否加入的方法是compare，而不是equals</span><br>        System.out.println(<span class="hljs-string">&quot;treemap=&quot;</span> + treeMap);<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            解读源码：</span><br><span class="hljs-comment">            1. 构造器. 把传入的实现了 Comparator接口的匿名内部类(对象)，传给给TreeMap的comparator</span><br><span class="hljs-comment">             public TreeMap(Comparator&lt;? super K&gt; comparator) &#123;</span><br><span class="hljs-comment">                this.comparator = comparator;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            2. 调用put方法</span><br><span class="hljs-comment">            2.1 第一次添加, 把k-v 封装到 Entry对象，放入root</span><br><span class="hljs-comment">            Entry&lt;K,V&gt; t = root;</span><br><span class="hljs-comment">            if (t == null) &#123;</span><br><span class="hljs-comment">                // 此处调用compare方法是为了判断key是否为空</span><br><span class="hljs-comment">                // 如果为空，compare 里面则会抛出异常</span><br><span class="hljs-comment">                compare(key, key); // type (and possibly null) check</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                root = new Entry&lt;&gt;(key, value, null);</span><br><span class="hljs-comment">                size = 1;</span><br><span class="hljs-comment">                modCount++;</span><br><span class="hljs-comment">                return null;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            2.2 以后添加</span><br><span class="hljs-comment">            Comparator&lt;? super K&gt; cpr = comparator;</span><br><span class="hljs-comment">            if (cpr != null) &#123;</span><br><span class="hljs-comment">                do &#123; //遍历所有的key , 给当前key找到适当位置</span><br><span class="hljs-comment">                    parent = t;</span><br><span class="hljs-comment">                    //动态绑定到我们的匿名内部类的compare</span><br><span class="hljs-comment">                    cmp = cpr.compare(key, t.key);</span><br><span class="hljs-comment">                    if (cmp &lt; 0)</span><br><span class="hljs-comment">                        t = t.left;</span><br><span class="hljs-comment">                    else if (cmp &gt; 0)</span><br><span class="hljs-comment">                        t = t.right;</span><br><span class="hljs-comment">                    //如果遍历过程中，发现准备添加的Key 和当前已有的Key 相等，就不添加</span><br><span class="hljs-comment">                    else</span><br><span class="hljs-comment">                        return t.setValue(value);</span><br><span class="hljs-comment">                &#125; while (t != null);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>







<h3 id="总结-开发中如何选择集合实现类-记住"><a href="#总结-开发中如何选择集合实现类-记住" class="headerlink" title="总结-开发中如何选择集合实现类(记住)"></a>总结-开发中如何选择集合实现类(记住)</h3><img src="image-20220916163139229.png" srcset="/img/loading.gif" lazyload alt="image-20220916163139229" style="zoom: 80%;" />





<h3 id="Collections-工具类"><a href="#Collections-工具类" class="headerlink" title="Collections 工具类"></a>Collections 工具类</h3><h4 id="基本介绍-5"><a href="#基本介绍-5" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li>Collections 是一个操作 Set、List 和 Map 等集合的工具类</li>
<li>Collections 中提供了一系列静态的方法对集合元素进行排序、查询和修改等操作</li>
</ul>
<h4 id="排序操作"><a href="#排序操作" class="headerlink" title="排序操作"></a>排序操作</h4><p>以下均为 static 方法</p>
<ul>
<li>reverse(List)：反转 List 中元素的顺序</li>
<li>shuffle(List)：对 Liat 集合元素进行随机排序</li>
<li>sort(List)：根据元素的自然顺序对指定 List 集合元素按升序排序</li>
<li>sort(List, Comparator)：根据指定的 Comparator 产生的顺序对 List 集合元素进行排序</li>
<li>swap(List, int, int)：将指定 list 集合中的 i 处元素和 j 处元素进行交换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Collections_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//创建ArrayList 集合，用于测试.</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;smith&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;king&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;milan&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//      # reverse(List)：反转 List 中元素的顺序</span><br>        Collections.reverse(list);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//      # shuffle(List)：对 List 集合元素进行随机排序</span><br><span class="hljs-comment">//        for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="hljs-comment">//            Collections.shuffle(list);</span><br><span class="hljs-comment">//            System.out.println(&quot;list=&quot; + list);</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//      # sort(List)：根据元素的自然顺序对指定 List 集合元素按升序排序</span><br>        Collections.sort(list);<br>        System.out.println(<span class="hljs-string">&quot;自然排序后&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//      # sort(List，Comparator)：根据指定的 Comparator 产生的顺序对 List 集合元素进行排序</span><br>        <span class="hljs-comment">//我们希望按照 字符串的长度大小排序</span><br>        Collections.sort(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-comment">//可以加入校验代码.</span><br>                <span class="hljs-keyword">return</span> ((String) o2).length() - ((String) o1).length();<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;字符串长度大小排序=&quot;</span> + list);<br><br><span class="hljs-comment">//      # swap(List，int， int)：将指定 list 集合中的 i 处元素和 j 处元素进行交换</span><br>        <span class="hljs-comment">//比如</span><br>        Collections.swap(list, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>        System.out.println(<span class="hljs-string">&quot;交换后的情况&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><br><span class="hljs-comment">//      # Object max(Collection)：根据元素的自然顺序，返回给定集合中的最大元素</span><br>        System.out.println(<span class="hljs-string">&quot;自然顺序最大元素=&quot;</span> + Collections.max(list));<br><span class="hljs-comment">//      # Object max(Collection，Comparator)：以Comparator指定的顺序，返回给定集合中的最大元素</span><br>        <span class="hljs-comment">//比如，我们要返回长度最大的元素</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">maxObject</span> <span class="hljs-operator">=</span> Collections.max(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-keyword">return</span> ((String)o1).length() - ((String)o2).length();<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;长度最大的元素=&quot;</span> + maxObject);<br><br><span class="hljs-comment">//      # Object min(Collection)</span><br><span class="hljs-comment">//      # Object min(Collection，Comparator)</span><br>        <span class="hljs-comment">//上面的两个方法，参考max即可</span><br><br><span class="hljs-comment">//      # int frequency(Collection，Object)：返回指定集合中指定元素的出现次数</span><br>        System.out.println(<span class="hljs-string">&quot;tom出现的次数=&quot;</span> + Collections.frequency(list, <span class="hljs-string">&quot;tom&quot;</span>));<br><br><span class="hljs-comment">//      # void copy(List dest,List src)：将src中的内容复制到dest中</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">dest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        <span class="hljs-comment">//为了完成一个完整拷贝，我们需要先给dest 赋值，大小和list.size()一样</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>            dest.add(<span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//拷贝</span><br>        Collections.copy(dest, list);<br>        System.out.println(<span class="hljs-string">&quot;dest=&quot;</span> + dest);<br><br><span class="hljs-comment">//      # boolean replaceAll(List list，Object oldVal，Object newVal)：使用新值替换 List 对象的所有旧值</span><br>        <span class="hljs-comment">//如果list中，有tom 就替换成 汤姆</span><br>        Collections.replaceAll(list, <span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;汤姆&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list替换后=&quot;</span> + list);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="练习-1"><a href="#练习-1" class="headerlink" title="练习"></a>练习</h3><p><strong>试分析HashSet和TreeSets分别如何实现去重的</strong> </p>
<p> (1)HashSet的去重机制：hashCode() + equals()，底层先通过存入对象，进行运算得到一个 hash 值，通过 hash 值得到对应的索引，如果发现 table 索引所在的位置，没有数据，就直接存放；如果有数据，就进行 equals 比较[遍历比较]，如果比较后，不相同，就加入，否则就不加入.  </p>
<p>(2)TreeSet的去重机制：如果你传入了一个 Comparator 匿名对象，就使用实现的 compare 去重，如果方法返回0，就认为是相同的元素&#x2F;数据，就不添加，如果没有传入一个 Comparator 匿名对象，则以添加的对象实现的Compareable 接口的 compareTo 去重.</p>
<p><strong>一个陷阱：</strong>存放之后更改属性不会改变该元素位置，因此，当再次存放与修改后一样的元素时，若计算出的 hashCode 与更改属性前的 hashCode 不一致，就会计算出新的位置，从而能加入进去</p>
 <img src="image-20220916194412765.png" srcset="/img/loading.gif" lazyload alt="image-20220916194412765" style="zoom: 60%;" />



<p><strong>Vector 和 ArrayList 的比较</strong></p>
 <img src="image-20220916194828683.png" srcset="/img/loading.gif" lazyload alt="image-20220916194828683" style="zoom: 67%;" />







<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><h3 id="泛型的好处"><a href="#泛型的好处" class="headerlink" title="泛型的好处"></a>泛型的好处</h3><ul>
<li><p>编译时，检查添加元素的类型，提高了安全性</p>
</li>
<li><p>减少了类型转换的次数，提高效率</p>
<ul>
<li><p>不使用泛型：</p>
<p>Dog -加入-&gt; Object -取出-&gt; Dog  &#x2F;&#x2F;放入到 ArrayList 会先转成 Object，在取出时，还需要转回 Dog</p>
</li>
<li><p>使用泛型：</p>
<p>Dog -加入-&gt; Dog -取出-&gt; Dog  &#x2F;&#x2F;放入时和取出时，不需要进行类型转换，提高效率</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generic02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 使用传统的方法来解决</span><br><span class="hljs-comment">//        ArrayList arrayList = new ArrayList();</span><br><span class="hljs-comment">//        arrayList.add(new Dog(&quot;旺财&quot;, 10));</span><br><span class="hljs-comment">//        arrayList.add(new Dog(&quot;发财&quot;, 1));</span><br><span class="hljs-comment">//        arrayList.add(new Dog(&quot;小黄&quot;, 5));</span><br><span class="hljs-comment">//        //假如我们的程序员，不小心，添加了一只猫，遍历时就会出现ClassCastException异常</span><br><span class="hljs-comment">//        arrayList.add(new Cat(&quot;招财猫&quot;, 8));</span><br><span class="hljs-comment">//        //遍历</span><br><span class="hljs-comment">//        for (Object o : arrayList) &#123;</span><br><span class="hljs-comment">//            //向下转型Object -&gt;Dog</span><br><span class="hljs-comment">//            Dog dog = (Dog) o;</span><br><span class="hljs-comment">//            System.out.println(dog.getName() + &quot;-&quot; + dog.getAge());</span><br><span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">// 使用泛型</span><br>        <span class="hljs-comment">//老韩解读</span><br>        <span class="hljs-comment">//1. 当我们 ArrayList&lt;Dog&gt; 表示存放到 ArrayList 集合中的元素是Dog类型 (细节后面说...)</span><br>        <span class="hljs-comment">//2. 如果编译器发现添加的类型，不满足要求，就会报错</span><br>        <span class="hljs-comment">//3. 在遍历的时候，可以直接取出 Dog 类型而不是 Object</span><br>        <span class="hljs-comment">//4. public class ArrayList&lt;E&gt; &#123;&#125; //E称为泛型,那么Dog-&gt;E</span><br>        ArrayList&lt;Dog&gt; arrayList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Dog&gt;();<br>        arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;旺财&quot;</span>, <span class="hljs-number">10</span>));<br>        arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;发财&quot;</span>, <span class="hljs-number">1</span>));<br>        arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;小黄&quot;</span>, <span class="hljs-number">5</span>));<br>        <span class="hljs-comment">//假如我们的程序员，不小心，添加了一只猫</span><br>        <span class="hljs-comment">//arrayList.add(new Cat(&quot;招财猫&quot;, 8));</span><br>        System.out.println(<span class="hljs-string">&quot;===使用泛型====&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Dog dog : arrayList) &#123;<br>            System.out.println(dog.getName() + <span class="hljs-string">&quot;-&quot;</span> + dog.getAge());<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">1.请编写程序，在ArrayList 中，添加3个Dog对象</span><br><span class="hljs-comment">2.Dog对象含有name 和 age, 并输出name 和 age (要求使用getXxx())</span><br><span class="hljs-comment">3.老师使用泛型来完成代码</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> &#123; <span class="hljs-comment">//Cat类</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cat</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="泛型的理解"><a href="#泛型的理解" class="headerlink" title="泛型的理解"></a>泛型的理解</h3><p>泛（广泛）型（类型）理解：泛型是一种可以表示数据类型的类型（把数据类型赋给泛型）</p>
<ul>
<li><p>泛型又称参数化类型，是 JDK5.0 出现的新特性，解决数据类型的安全性问题</p>
</li>
<li><p>在类声明或实例化时，只要指定好需要的具体的类型即可</p>
</li>
<li><p>Java 泛型可以保证如果程序在编译时没有发出警告，运行时就不会产生 ClassCastException 异常</p>
<p>同时，代码更加简洁健壮</p>
</li>
<li><p>泛型的作用是：可以在类声明时通过一个标识表示类中某个属性的类型，或者是某个方法的返回值的类型，或者是参数类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generic03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//注意，特别强调：E具体的数据类型在定义Person对象的时候指定，即在编译期间，就确定E是什么类型</span><br>        Person&lt;String&gt; person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>&lt;String&gt;(<span class="hljs-string">&quot;韩顺平教育&quot;</span>);<br>        person.show(); <span class="hljs-comment">//String</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">你可以这样理解，上面的Person类</span><br><span class="hljs-comment">class Person &#123;</span><br><span class="hljs-comment">    String s ;</span><br><span class="hljs-comment">    //E表示 s的数据类型, 该数据类型在定义Person对象的时候指定,即在编译期间，就确定E是什么类型</span><br><span class="hljs-comment">    public Person(String s) &#123;//E也可以是参数类型</span><br><span class="hljs-comment">        this.s = s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    public String f() &#123;//返回类型使用E</span><br><span class="hljs-comment">        return s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">         */</span><br>        Person&lt;Integer&gt; person2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>&lt;Integer&gt;(<span class="hljs-number">100</span>);<br>        person2.show();<span class="hljs-comment">//Integer</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">class Person &#123;</span><br><span class="hljs-comment">    Integer s ;</span><br><span class="hljs-comment">    //E表示 s的数据类型, 该数据类型在定义Person对象的时候指定，即在编译期间，就确定E是什么类型</span><br><span class="hljs-comment">    public Person(Integer s) &#123;//E也可以是参数类型</span><br><span class="hljs-comment">        this.s = s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    public Integer f() &#123;//返回类型使用E</span><br><span class="hljs-comment">        return s;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//泛型的作用是：可以在类声明时通过一个标识表示类中某个属性的类型，</span><br><span class="hljs-comment">// 或者是某个方法的返回值的类型，或者是参数类型</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&lt;E&gt; &#123;<br>    E s ;<span class="hljs-comment">//E表示 s的数据类型, 该数据类型在定义Person对象的时候指定,即在编译期间，就确定E是什么类型</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(E s)</span> &#123;<span class="hljs-comment">//E也可以是参数类型</span><br>        <span class="hljs-built_in">this</span>.s = s;<br>    &#125;<br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">f</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//返回类型使用E</span><br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(s.getClass()); <span class="hljs-comment">//显示s的运行类型</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="泛型的语法"><a href="#泛型的语法" class="headerlink" title="泛型的语法"></a>泛型的语法</h3><h4 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h4><p>interface 接口&lt;T&gt;{}  和  class 类&lt;K, V&gt;{}</p>
<p>说明：</p>
<ul>
<li>其中，T、K、V 不代表值，而是表示类型</li>
<li>任意字母都可以。常用 T 表示（Type的缩写）</li>
</ul>
<h4 id="实例化"><a href="#实例化" class="headerlink" title="实例化"></a>实例化</h4><p>要在类名后面指定类型参数的值（类型）。如：</p>
<ul>
<li>List&lt;String&gt; strList &#x3D; new ArrayList&lt;String&gt;();  </li>
<li>Iterator&lt;Customer&gt; iterator &#x3D; customers.iterator();</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//使用泛型方式给HashSet 放入3个学生对象</span><br>        HashSet&lt;Student&gt; students = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;Student&gt;();<br>        students.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">18</span>));<br>        students.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">28</span>));<br>        students.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;mary&quot;</span>, <span class="hljs-number">19</span>));<br>        <span class="hljs-comment">//遍历</span><br>        <span class="hljs-keyword">for</span> (Student student : students) &#123;<br>            System.out.println(student);<br>        &#125;<br><br>        <span class="hljs-comment">//使用泛型方式给HashMap 放入3个学生对象</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public class HashMap&lt;K,V&gt;  &#123;&#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//K -&gt; String V-&gt;Student</span><br>        HashMap&lt;String, Student&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Student&gt;();<br>        hm.put(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;milan&quot;</span>, <span class="hljs-number">38</span>));<br>        hm.put(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;smith&quot;</span>, <span class="hljs-number">48</span>));<br>        hm.put(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;hsp&quot;</span>, <span class="hljs-number">28</span>));<br>        <span class="hljs-comment">//迭代器 EntrySet</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123;</span><br><span class="hljs-comment">            Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</span><br><span class="hljs-comment">            return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//先取出 Map.Entry</span><br>        Set&lt;Map.Entry&lt;String, Student&gt;&gt; entries = hm.entrySet();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123;</span><br><span class="hljs-comment">                return new EntryIterator();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        Iterator&lt;Map.Entry&lt;String, Student&gt;&gt; iterator = entries.iterator();<br>        System.out.println(<span class="hljs-string">&quot;==============================&quot;</span>);<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            Map.Entry&lt;String, Student&gt; next =  iterator.next();<br>            System.out.println(next.getKey() + <span class="hljs-string">&quot;-&quot;</span> + next.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 创建  3个学生对象</span><br><span class="hljs-comment"> * 放入到HashSet中学生对象, 使用.</span><br><span class="hljs-comment"> * 放入到  HashMap中，要求 Key 是 String name, Value 就是 学生对象</span><br><span class="hljs-comment"> * 使用两种方式遍历</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="泛型注意事项与细节"><a href="#泛型注意事项与细节" class="headerlink" title="泛型注意事项与细节"></a>泛型注意事项与细节</h3><ul>
<li><p>1）interface List&lt;T&gt;{}    、  public class HashSet&lt;E&gt;{}    等等</p>
<p><strong>说明：T、E 只能是引用类型</strong></p>
<p>List&lt;Integer&gt; list &#x3D; new ArrayList&lt;Integer&gt;();  &#x2F;&#x2F;OK</p>
<p>List&lt;int&gt; list &#x3D; new ArrayList&lt;int&gt;();  &#x2F;&#x2F;错误</p>
</li>
<li><p>2）在给泛型指定具体类型后，<strong>可以传入 该类型 或者 子类类型</strong></p>
</li>
<li><p>3）泛型使用形式</p>
<p>List&lt;Integer&gt; list &#x3D; new ArrayList&lt;Integer&gt;();</p>
<p>List&lt;Integer&gt; list &#x3D; new ArrayList&lt;&gt;();（推荐）[说明：编译器会进行类型推断]</p>
<p>如果这样写 List list &#x3D; new ArrayList();  &#x2F;&#x2F;默认给它的泛型是 [&lt;E&gt; E 就是 Object ]</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.给泛型指向数据类型是，要求是引用类型，不能是基本数据类型</span><br>        List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;(); <span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//List&lt;int&gt; list2 = new ArrayList&lt;int&gt;();//错误</span><br>        <span class="hljs-comment">//2. 说明</span><br>        <span class="hljs-comment">//因为 E 指定了 A 类型, 构造器传入了 new A()</span><br>        <span class="hljs-comment">//在给泛型指定具体类型后，可以传入该类型或者其子类类型</span><br>        Pig&lt;A&gt; aPig = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pig</span>&lt;A&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>());<br>        aPig.f();<br>        Pig&lt;A&gt; aPig2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pig</span>&lt;A&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br>        aPig2.f();<br><br>        <span class="hljs-comment">//3. 泛型的使用形式</span><br>        ArrayList&lt;Integer&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        List&lt;Integer&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        <span class="hljs-comment">//在实际开发中，我们往往简写</span><br>        <span class="hljs-comment">//编译器会进行类型推断, 老师推荐使用下面写法</span><br>        ArrayList&lt;Integer&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;Integer&gt; list4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        ArrayList&lt;Pig&gt; pigs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>        <span class="hljs-comment">//4. 如果定义了泛型但不传入，那么泛型默认是 Object</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">arrayList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        <span class="hljs-comment">//等价 ArrayList&lt;Object&gt; arrayList = new ArrayList&lt;Object&gt;();</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            public boolean add(Object e) &#123;</span><br><span class="hljs-comment">                ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br><span class="hljs-comment">                elementData[size++] = e;</span><br><span class="hljs-comment">                return true;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            class Tiger &#123;//类</span><br><span class="hljs-comment">                Object e;</span><br><span class="hljs-comment">                public Tiger() &#123;&#125;</span><br><span class="hljs-comment">                public Tiger(Object e) &#123;this.e = e;&#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span>&lt;E&gt; &#123;<span class="hljs-comment">//类</span><br>    E e;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(E e)</span> &#123;<span class="hljs-built_in">this</span>.e = e;&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pig</span>&lt;E&gt; &#123;<span class="hljs-comment">//</span><br>    E e;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Pig</span><span class="hljs-params">(E e)</span> &#123;<span class="hljs-built_in">this</span>.e = e;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(e.getClass()); <span class="hljs-comment">//运行类型</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="课堂练习"><a href="#课堂练习" class="headerlink" title="课堂练习"></a>课堂练习</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 定义Employee类</span><br><span class="hljs-comment"> * 1) 该类包含：private成员变量name,sal,birthday，其中 birthday 为 MyDate 类的对象；</span><br><span class="hljs-comment"> * 2) 为每一个属性定义 getter, setter 方法；</span><br><span class="hljs-comment"> * 3) 重写 toString 方法输出 name, sal, birthday</span><br><span class="hljs-comment"> * 4) MyDate类包含: private成员变量month,day,year；并为每一个属性定义 getter, setter 方法；</span><br><span class="hljs-comment"> * 5) 创建该类的 3 个对象，并把这些对象放入 ArrayList 集合中（ArrayList 需使用泛型来定义），对集合中的元素进行排序，并遍历输出：</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * 排序方式： 调用ArrayList 的 sort 方法 ,</span><br><span class="hljs-comment"> * 传入 Comparator对象[使用泛型]，先按照name排序，如果name相同，则按生日日期的先后排序。【即：定制排序】</span><br><span class="hljs-comment"> * 有一定难度 15min , 比较经典 泛型使用案例 GenericExercise02.java</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ArrayList&lt;Employee&gt; employees = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">20000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">1980</span>,<span class="hljs-number">12</span>,<span class="hljs-number">11</span>)));<br>        employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">12000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2001</span>,<span class="hljs-number">12</span>,<span class="hljs-number">12</span>)));<br>        employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">50000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">1980</span>,<span class="hljs-number">12</span>,<span class="hljs-number">10</span>)));<br>        System.out.println(<span class="hljs-string">&quot;employees=&quot;</span> + employees);<br><br>        employees.sort(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Employee&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Employee emp1, Employee emp2)</span> &#123;<br>                <span class="hljs-comment">//先按照name排序，如果name相同，则按生日日期的先后排序。【即：定制排序】</span><br>                <span class="hljs-comment">//先对传入的参数进行验证</span><br>                <span class="hljs-keyword">if</span>(!(emp1 <span class="hljs-keyword">instanceof</span>  Employee &amp;&amp; emp2 <span class="hljs-keyword">instanceof</span> Employee)) &#123;<br>                    System.out.println(<span class="hljs-string">&quot;类型不正确..&quot;</span>);<br>                    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>                &#125;<br>                <span class="hljs-comment">//比较name</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> emp1.getName().compareTo(emp2.getName());<br>                <span class="hljs-keyword">if</span>(i != <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-keyword">return</span> i;<br>                &#125;<br>                <span class="hljs-comment">//下面是对birthday的比较，因此，我们最好把这个比较，放在MyDate类完成</span><br>                <span class="hljs-comment">//封装后，将来可维护性和复用性，就大大增强.</span><br>                <span class="hljs-keyword">return</span> emp1.getBirthday().compareTo(emp2.getBirthday());<br>            &#125;<br>        &#125;);<br><br>        System.out.println(<span class="hljs-string">&quot;==对雇员进行排序==&quot;</span>);<br>        System.out.println(employees);<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-keyword">private</span> MyDate birthday;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> sal, MyDate birthday)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>        <span class="hljs-built_in">this</span>.birthday = birthday;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSal</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sal;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSal</span><span class="hljs-params">(<span class="hljs-type">double</span> sal)</span> &#123;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>    &#125;<br>    <span class="hljs-keyword">public</span> MyDate <span class="hljs-title function_">getBirthday</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> birthday;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBirthday</span><span class="hljs-params">(MyDate birthday)</span> &#123;<br>        <span class="hljs-built_in">this</span>.birthday = birthday;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;\nEmployee&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&quot;, birthday=&quot;</span> + birthday +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;MyDate&gt;&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> year;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> month;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> day;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyDate</span><span class="hljs-params">(<span class="hljs-type">int</span> year, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> day)</span> &#123;<br>        <span class="hljs-built_in">this</span>.year = year;<br>        <span class="hljs-built_in">this</span>.month = month;<br>        <span class="hljs-built_in">this</span>.day = day;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYear</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> year;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setYear</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> &#123;<span class="hljs-built_in">this</span>.year = year;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> month;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMonth</span><span class="hljs-params">(<span class="hljs-type">int</span> month)</span> &#123;<span class="hljs-built_in">this</span>.month = month;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDay</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> day;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDay</span><span class="hljs-params">(<span class="hljs-type">int</span> day)</span> &#123;<span class="hljs-built_in">this</span>.day = day;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;MyDate&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;year=&quot;</span> + year +<br>                <span class="hljs-string">&quot;, month=&quot;</span> + month +<br>                <span class="hljs-string">&quot;, day=&quot;</span> + day +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(MyDate o)</span> &#123; <span class="hljs-comment">//把对year-month-day比较放在这里</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">yearMinus</span> <span class="hljs-operator">=</span> year - o.getYear();<br>        <span class="hljs-keyword">if</span>(yearMinus != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> yearMinus;<br>        &#125;<br>        <span class="hljs-comment">//如果year相同，就比较month</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">monthMinus</span> <span class="hljs-operator">=</span> month - o.getMonth();<br>        <span class="hljs-keyword">if</span>(monthMinus != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> monthMinus;<br>        &#125;<br>        <span class="hljs-comment">//如果year 和 month</span><br>        <span class="hljs-keyword">return</span> day - o.getDay();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="自定义泛型"><a href="#自定义泛型" class="headerlink" title="自定义泛型"></a>自定义泛型</h3><h4 id="自定义泛型类-难度"><a href="#自定义泛型类-难度" class="headerlink" title="自定义泛型类 (难度)"></a>自定义泛型类 (难度)</h4><p><strong>基本语法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">class 类名&lt;T, R...&gt; &#123;  <span class="hljs-comment">//...表示可以有多个泛型</span><br>	<span class="hljs-comment">//成员</span><br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>注意细节</strong></p>
<ul>
<li>普通成员可以使用泛型（属性、方法）</li>
<li>使用泛型的数组，不能初始化</li>
<li>静态方法中不能使用类的泛型</li>
<li>泛型类的类型，是在创建对象时确定的（因为创建对象时，需要指定确定类型）</li>
<li>如果在创建对象时，没有指定类型，默认为 Object</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomGeneric_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//练习</span><br>        <span class="hljs-comment">//T=Double, R=String, M=Integer</span><br>        Tiger&lt;Double,String,Integer&gt; g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>&lt;&gt;(<span class="hljs-string">&quot;john&quot;</span>);<br>        g.setT(<span class="hljs-number">10.9</span>); <span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//g.setT(&quot;yy&quot;); //错误，类型不对</span><br>        System.out.println(g);<br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">g2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>(<span class="hljs-string">&quot;john~~&quot;</span>);<span class="hljs-comment">//OK T=Object R=Object M=Object</span><br>        g2.setT(<span class="hljs-string">&quot;yy&quot;</span>); <span class="hljs-comment">//OK ,因为 T=Object &quot;yy&quot;=String 是Object子类</span><br>        System.out.println(<span class="hljs-string">&quot;g2=&quot;</span> + g2);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//解读</span><br><span class="hljs-comment">//1. Tiger 后面泛型，所以我们把 Tiger 就称为自定义泛型类</span><br><span class="hljs-comment">//2, T, R, M 泛型的标识符, 一般是单个大写字母</span><br><span class="hljs-comment">//3. 泛型标识符可以有多个.</span><br><span class="hljs-comment">//4. 普通成员可以使用泛型 (属性、方法)</span><br><span class="hljs-comment">//5. 使用泛型的数组，不能初始化</span><br><span class="hljs-comment">//6. 静态方法中不能使用类的泛型</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span>&lt;T, R, M&gt; &#123;<br>    String name;<br>    R r; <span class="hljs-comment">//属性使用到泛型</span><br>    M m;<br>    T t;<br>    <span class="hljs-comment">//因为数组在new 不能确定T的类型，就无法在内存开空间</span><br>    T[] ts;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(R r, M m, T t)</span> &#123;<span class="hljs-comment">//构造器使用泛型</span><br>        <span class="hljs-built_in">this</span>.r = r;<br>        <span class="hljs-built_in">this</span>.m = m;<br>        <span class="hljs-built_in">this</span>.t = t;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Tiger</span><span class="hljs-params">(String name, R r, M m, T t)</span> &#123;<span class="hljs-comment">//构造器使用泛型</span><br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.r = r;<br>        <span class="hljs-built_in">this</span>.m = m;<br>        <span class="hljs-built_in">this</span>.t = t;<br>    &#125;<br><br>    <span class="hljs-comment">//因为静态是和类相关的，在类加载时，对象还没有创建</span><br>    <span class="hljs-comment">//所以，如果静态方法和静态属性使用了泛型，JVM就无法完成初始化</span><br><span class="hljs-comment">//    static R r2;  //静态属性</span><br><span class="hljs-comment">//    public static void m1(M m) &#123;  //静态方法</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-comment">//方法使用泛型</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-comment">//返回类型可以使用泛型.</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">getR</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> r;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setR</span><span class="hljs-params">(R r)</span> &#123;<span class="hljs-built_in">this</span>.r = r;&#125;<br>    <span class="hljs-keyword">public</span> M <span class="hljs-title function_">getM</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> m;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setM</span><span class="hljs-params">(M m)</span> &#123;<span class="hljs-built_in">this</span>.m = m;&#125;<br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getT</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> t;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setT</span><span class="hljs-params">(T t)</span> &#123;<span class="hljs-built_in">this</span>.t = t;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Tiger&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, r=&quot;</span> + r +<br>                <span class="hljs-string">&quot;, m=&quot;</span> + m +<br>                <span class="hljs-string">&quot;, t=&quot;</span> + t +<br>                <span class="hljs-string">&quot;, ts=&quot;</span> + Arrays.toString(ts) +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="自定义泛型接口"><a href="#自定义泛型接口" class="headerlink" title="自定义泛型接口"></a>自定义泛型接口</h4><p><strong>基本语法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">interface 接口名&lt;T, R...&gt; &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>注意细节</strong></p>
<ul>
<li>接口中，静态成员不能使用泛型（注意：在接口中，属性都是 public static final 修饰的）</li>
<li>泛型接口的类型，在 继承接口时 或者 实现接口时 确定</li>
<li>没有指定类型，默认为 Object</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomInterfaceGeneric</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  泛型接口使用的说明</span><br><span class="hljs-comment"> *  1. 接口中，静态成员也不能使用泛型</span><br><span class="hljs-comment"> *  2. 泛型接口的类型, 在继承接口或者实现接口时确定</span><br><span class="hljs-comment"> *  3. 没有指定类型，默认为Object</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUsb</span>&lt;U, R&gt; &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//U name; 不能这样使用</span><br>    <span class="hljs-comment">//普通方法中，可以使用接口泛型</span><br>    R <span class="hljs-title function_">get</span><span class="hljs-params">(U u)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(R r)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(R r1, R r2, U u1, U u2)</span>;<br>    <span class="hljs-comment">//在jdk8 中，可以在接口中，使用默认方法, 也是可以使用泛型</span><br>    <span class="hljs-keyword">default</span> R <span class="hljs-title function_">method</span><span class="hljs-params">(U u)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//在继承接口 指定泛型接口的类型</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IUsb</span>&lt;String, Double&gt; &#123;<br>&#125;<br><span class="hljs-comment">//当我们去实现IA接口时，因为IA在继承IUsu 接口时，指定了U 为String R为Double</span><br><span class="hljs-comment">//，在实现IUsu接口的方法时，使用String替换U, 是Double替换R</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">get</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Double aDouble)</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Double r1, Double r2, String u1, String u2)</span> &#123;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//实现接口时，直接指定泛型接口的类型</span><br><span class="hljs-comment">//给U 指定Integer 给 R 指定了 Float</span><br><span class="hljs-comment">//所以，当我们实现IUsb方法时，会使用Integer替换U, 使用Float替换R</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUsb</span>&lt;Integer, Float&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Float <span class="hljs-title function_">get</span><span class="hljs-params">(Integer integer)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Float aFloat)</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Float r1, Float r2, Integer u1, Integer u2)</span> &#123;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//没有指定类型，默认为Object</span><br><span class="hljs-comment">//建议直接写成 IUsb&lt;Object,Object&gt;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUsb</span> &#123; <span class="hljs-comment">//等价 class CC implements IUsb&lt;Object,Object&gt; &#123;</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">get</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Object o)</span> &#123;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Object r1, Object r2, Object u1, Object u2)</span> &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="自定义泛型方法"><a href="#自定义泛型方法" class="headerlink" title="自定义泛型方法"></a>自定义泛型方法</h4><p><strong>基本语法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">修饰符&lt;T, R...&gt; 返回类型 方法名(参数列表)&#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>注意细节</strong></p>
<ul>
<li>泛型方法，可以定义在普通类中，也可以定义在泛型类中</li>
<li>当泛型方法被调用时，类型需要确定（直接传值就行，编译器会自动确定类型）</li>
<li>public void eat(E, e){},  修饰符后没有&lt;T, R&gt;，eat 方法不是泛型方法，而是使用了泛型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomMethodGeneric</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br>        car.fly(<span class="hljs-string">&quot;宝马&quot;</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">//当调用方法时，传入参数，编译器，就会确定类型</span><br>        System.out.println(<span class="hljs-string">&quot;=======&quot;</span>);<br>        car.fly(<span class="hljs-number">300</span>, <span class="hljs-number">100.1</span>); <span class="hljs-comment">//当调用方法时，传入参数，编译器，就会确定类型</span><br>        System.out.println(<span class="hljs-string">&quot;=======&quot;</span>);<br>        <span class="hljs-comment">//测试</span><br>        <span class="hljs-comment">//T-&gt;String, R-&gt; ArrayList</span><br>        Fish&lt;String, ArrayList&gt; fish = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fish</span>&lt;&gt;();<br>        fish.hello(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(), <span class="hljs-number">11.3f</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//泛型方法，可以定义在普通类中, 也可以定义在泛型类中</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<span class="hljs-comment">//普通类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//普通方法</span><br>    &#125;<br>    <span class="hljs-comment">//说明 泛型方法</span><br>    <span class="hljs-comment">//1. &lt;T,R&gt; 就是泛型</span><br>    <span class="hljs-comment">//2. 是提供给 fly使用的</span><br>    <span class="hljs-keyword">public</span> &lt;T, R&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">(T t, R r)</span> &#123;<span class="hljs-comment">//泛型方法</span><br>        System.out.println(t.getClass());<span class="hljs-comment">//String</span><br>        System.out.println(r.getClass());<span class="hljs-comment">//Integer</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fish</span>&lt;T, R&gt; &#123;<span class="hljs-comment">//泛型类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//普通方法</span><br>    &#125;<br>    <span class="hljs-keyword">public</span>&lt;U,M&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(U u, M m)</span> &#123;<span class="hljs-comment">//泛型方法</span><br><br>    &#125;<br>    <span class="hljs-comment">//说明</span><br>    <span class="hljs-comment">//1. 下面hi方法不是泛型方法</span><br>    <span class="hljs-comment">//2. 是hi方法使用了类声明的 泛型</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(T t)</span> &#123;<br>    &#125;<br>    <span class="hljs-comment">//泛型方法，可以使用类声明的泛型，也可以使用自己声明泛型</span><br>    <span class="hljs-keyword">public</span>&lt;K&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">(R r, K k)</span> &#123;<br>        System.out.println(r.getClass());<span class="hljs-comment">//ArrayList</span><br>        System.out.println(k.getClass());<span class="hljs-comment">//Float</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="泛型的继承和通配符"><a href="#泛型的继承和通配符" class="headerlink" title="泛型的继承和通配符"></a>泛型的继承和通配符</h3><ul>
<li><p>泛型不具备继承性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();  <span class="hljs-comment">//错误</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>&lt;?&gt;：支持任意泛型类型</p>
</li>
<li><p>&lt;? extends A&gt;：支持 A类 以及 A类的子类，规定了泛型的上限</p>
</li>
<li><p>&lt;? super A&gt;：支持 A类 以及 A类的父类（不限于直接父类），规定了泛型的下限</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericExtends</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//类的多态</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;xx&quot;</span>);<br>        <span class="hljs-comment">//泛型没有继承性</span><br>        <span class="hljs-comment">//List&lt;Object&gt; list = new ArrayList&lt;String&gt;();</span><br><br>        <span class="hljs-comment">//举例说明下面三个方法的使用</span><br>        List&lt;Object&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;AA&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;BB&gt; list4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;CC&gt; list5 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>        <span class="hljs-comment">//如果是 List&lt;?&gt; c ，可以接受任意的泛型类型</span><br>        printCollection1(list1);<br>        printCollection1(list2);<br>        printCollection1(list3);<br>        printCollection1(list4);<br>        printCollection1(list5);<br><br>        <span class="hljs-comment">//List&lt;? extends AA&gt; c： 表示 上限，可以接受 AA或者AA子类</span><br>        <span class="hljs-comment">//printCollection2(list1);//×</span><br>        <span class="hljs-comment">//printCollection2(list2);//×</span><br>        printCollection2(list3);<span class="hljs-comment">//√</span><br>        printCollection2(list4);<span class="hljs-comment">//√</span><br>        printCollection2(list5);<span class="hljs-comment">//√</span><br><br>        <span class="hljs-comment">//List&lt;? super AA&gt; c: 支持AA类以及AA类的父类，不限于直接父类</span><br>        printCollection3(list1);<span class="hljs-comment">//√</span><br>        <span class="hljs-comment">//printCollection3(list2);//×</span><br>        printCollection3(list3);<span class="hljs-comment">//√</span><br>        <span class="hljs-comment">//printCollection3(list4);//×</span><br>        <span class="hljs-comment">//printCollection3(list5);//×</span><br><br>        <span class="hljs-comment">//冒泡排序</span><br>        <span class="hljs-comment">//插入排序</span><br>        <span class="hljs-comment">//....</span><br>    &#125;<br>    <span class="hljs-comment">// ? extends AA 表示 上限，可以接受 AA或者AA子类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection2</span><span class="hljs-params">(List&lt;? extends AA&gt; c)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Object object : c) &#123;<br>            System.out.println(object);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//说明: List&lt;?&gt; 表示 任意的泛型类型都可以接受</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection1</span><span class="hljs-params">(List&lt;?&gt; c)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Object object : c) &#123; <span class="hljs-comment">// 通配符，取出时，就是Object</span><br>            System.out.println(object);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ? super 子类类名AA:支持AA类以及AA类的父类，不限于直接父类，</span><br>    <span class="hljs-comment">//规定了泛型的下限</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection3</span><span class="hljs-params">(List&lt;? <span class="hljs-built_in">super</span> AA&gt; c)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Object object : c) &#123;<br>            System.out.println(object);<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> &#123;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AA</span> &#123;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BB</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="JUnit"><a href="#JUnit" class="headerlink" title="JUnit"></a>JUnit</h3><ul>
<li><p>一个类有很多功能代码需要测试，为了测试，就需要写入到 main 方法中</p>
</li>
<li><p>如果有多个功能代码测试，就需要来回注销，切换很麻烦</p>
</li>
<li><p>如果可以直接运行一个方法，就方便很多，并且可以给出相关信息，就好了</p>
</li>
<li><p>JUnit 是一个 Java 语言的单元测试框架</p>
</li>
<li><p>多数 Java 的开发环境都已经继承了 JUnit 作为单元测试的工具</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JUnit_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//传统方式</span><br>        <span class="hljs-comment">//new JUnit_().m1();</span><br>        <span class="hljs-comment">//new JUnit_().m2();</span><br>    &#125;<br>    <span class="hljs-comment">// alt + Enter</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;m1方法被调用&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;m2方法被调用&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;m3方法被调用&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>







<h2 id="多线程基础"><a href="#多线程基础" class="headerlink" title="多线程基础"></a>多线程基础</h2><p>程序：是为了完成特定任务、用某种语言编写的一组指令的集合（简单来说，就是我们写的代码）</p>
<p>进程：（1）进程是指运行中的程序，比如我们使用QQ，就启动了一个进程，操作系统就会为该进程分配内存空间；当我们使用迅雷，又启动了一个进程，操作系统将为迅雷分配新的内存空间  （2）进程是程序的一次执行过程，或者是正在运行的一个程序；是动态过程：有它自身的产生、存在和消亡的过程</p>
<h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><ul>
<li><p>线程是由进程创建的，是进程的一个实体</p>
</li>
<li><p>一个进程可以拥有多个线程</p>
</li>
<li><p>单线程：同一时刻，只允许执行一个线程</p>
</li>
<li><p>多线程：同一时刻，可以执行多个线程</p>
<p>比如：一个qq进程，可以同时打开多个聊天窗口；一个迅雷进程，可以同时下载多个文件</p>
</li>
<li><p>并发：同一时刻，多个任务交替执行，造成 “貌似同时” 的错觉。简单说，单核 cpu 实现的多任务就是并发</p>
</li>
<li><p>并行：同一时刻，多个任务同时执行。多核 cpu 可以实现并行。</p>
</li>
<li><p>并发 与 并行 可以同时存在</p>
</li>
</ul>
<h3 id="线程基本使用"><a href="#线程基本使用" class="headerlink" title="线程基本使用"></a>线程基本使用</h3><h4 id="创建线程的两种方式"><a href="#创建线程的两种方式" class="headerlink" title="创建线程的两种方式"></a>创建线程的两种方式</h4><p>在 java 中线程使用有两种方法</p>
<ul>
<li>继承 Thread 类，重写 run 方法</li>
<li>实现 Runnable 接口，重写 run 方法</li>
</ul>
 <img src="image-20220918091701532.png" srcset="/img/loading.gif" lazyload alt="image-20220918091701532" style="zoom:80%;" />







<h4 id="线程应用案例1-继承-Thread-类"><a href="#线程应用案例1-继承-Thread-类" class="headerlink" title="线程应用案例1-继承 Thread 类"></a>线程应用案例1-继承 Thread 类</h4><p><strong>为什么启动线程是调用 .start() 而不是 .run()</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-comment">//创建Cat对象，可以当做线程使用</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        cat.start(); <span class="hljs-comment">//启动线程-&gt; 最终会执行cat的run方法</span><br>        <span class="hljs-comment">// .start()源码</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            (1)</span><br><span class="hljs-comment">            public synchronized void start() &#123;</span><br><span class="hljs-comment">                start0();</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            (2)</span><br><span class="hljs-comment">            //start0() 是本地方法，是JVM调用, 底层是c/c++实现</span><br><span class="hljs-comment">            //真正实现多线程的效果，是start0(), 而不是 run</span><br><span class="hljs-comment">            private native void start0();</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">//cat.run();</span><br>        <span class="hljs-comment">// run方法就是一个普通的方法, 没有真正的启动一个线程</span><br>        <span class="hljs-comment">// 此时的运行它的线程仍然是当前线程（main）</span><br>        <span class="hljs-comment">// 就会把run方法执行完毕，才继续向下执行</span><br><br>        <span class="hljs-comment">// .start()</span><br>        <span class="hljs-comment">// 说明: 当main线程启动一个子线程 Thread-0, 主线程不会阻塞, 会继续执行</span><br>        <span class="hljs-comment">// 这时 主线程和子线程是交替执行..</span><br>        System.out.println(<span class="hljs-string">&quot;主线程继续执行&quot;</span> + Thread.currentThread().getName());<span class="hljs-comment">//名字main</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">60</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;主线程 i=&quot;</span> + i);<br>            <span class="hljs-comment">//让主线程休眠</span><br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>        &#125;<br>        <span class="hljs-comment">//在多线程里，主线程结束了不会影响子线程的运行</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//老韩说明</span><br><span class="hljs-comment">//1. 当一个类继承了 Thread 类， 该类就可以当做线程使用</span><br><span class="hljs-comment">//2. 我们会重写 run方法，写上自己的业务代码</span><br><span class="hljs-comment">//3. run Thread 类 实现了 Runnable 接口的run方法</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    @Override</span><br><span class="hljs-comment">    public void run() &#123;</span><br><span class="hljs-comment">        if (target != null) &#123;</span><br><span class="hljs-comment">            target.run();</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">times</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//重写run方法，写上自己的业务逻辑</span><br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//该线程每隔1秒。在控制台输出 “喵喵, 我是小猫咪”</span><br>            System.out.println(<span class="hljs-string">&quot;喵喵, 我是小猫咪&quot;</span> + (++times) + <span class="hljs-string">&quot; 线程名=&quot;</span> + Thread.currentThread().getName());<br>            <span class="hljs-comment">//让该线程休眠1秒 ctrl+alt+t</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(times == <span class="hljs-number">80</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<span class="hljs-comment">//当times 到80, 退出while, 这时线程也就退出..</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

 <img src="image-20220918101953780.png" srcset="/img/loading.gif" lazyload alt="image-20220918101953780" style="zoom: 67%;" />





<h4 id="线程应用案例2-实现-Runnable-接口"><a href="#线程应用案例2-实现-Runnable-接口" class="headerlink" title="线程应用案例2-实现 Runnable 接口"></a>线程应用案例2-实现 Runnable 接口</h4><ul>
<li>java 是单线程的，在某些情况下一个类可能已经继承了某个父类，这时再用继承 Thread 类方法来创建线程显然是不可能了</li>
<li>java 设计者们提供了另外一个方式创建线程，就是通过实现 Runnable 接口来创建线程</li>
</ul>
<p><strong>代理模式</strong></p>
<p>实现 Runnable 接口的类不能直接调用 .start() 方法启动线程，而应该用 Thread 代理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(dog);<br>thread.start();<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        <span class="hljs-comment">//dog.start(); // 这里不能调用start</span><br>        <span class="hljs-comment">//创建Thread对象,把dog对象(实现Runnable接口的对象),放入Thread</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(dog);<br>        thread.start();<br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>();<span class="hljs-comment">//实现了 Runnable</span><br>        <span class="hljs-type">ThreadProxy</span> <span class="hljs-variable">threadProxy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadProxy</span>(tiger);<br>        threadProxy.start();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123; &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;老虎嗷嗷叫....&quot;</span>+ (++count) + Thread.currentThread().getName());<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">10</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><span class="hljs-comment">//静态代理模式讲解：（模仿）</span><br><span class="hljs-comment">//线程代理类 , 模拟了一个极简的Thread类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<span class="hljs-comment">//你可以把该类当做Thread类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Runnable</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">//属性，类型是 Runnable</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (target != <span class="hljs-literal">null</span>) &#123;<br>            target.run();<span class="hljs-comment">//动态绑定（运行类型Tiger）</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadProxy</span><span class="hljs-params">(Runnable target)</span> &#123;<br>        <span class="hljs-built_in">this</span>.target = target;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>        start0();<span class="hljs-comment">//这个方法是真正实现多线程方法</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start0</span><span class="hljs-params">()</span> &#123;<br>        run();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123; <span class="hljs-comment">//通过实现Runnable接口，开发线程</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//普通方法，不会启动线程</span><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;小狗汪汪叫..hi&quot;</span> + (++count) + Thread.currentThread().getName());<br>            <span class="hljs-comment">//休眠1秒</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">10</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="继承Thread-与-实现Runnable-的区别"><a href="#继承Thread-与-实现Runnable-的区别" class="headerlink" title="继承Thread 与 实现Runnable 的区别"></a>继承Thread 与 实现Runnable 的区别</h4><ul>
<li><p>从 java 的设计来看，通过继承 Thread 或者实现 Runnable 接口来创建线程本质上没有区别，从jdk帮助文档我们可以看到 Thread 类本身就实现了 Runnable 接口</p>
</li>
<li><p>实现 Runnable 接口的方式 更加适合多个线程共享一个资源(同时执行一个对象)的情况，并且避免了单继承的限制，建议使用 Runnable</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(<span class="hljs-string">&quot;===使用实现接口方式来售票=====&quot;</span>);<br><span class="hljs-type">SellTicket02</span> <span class="hljs-variable">sellTicket02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SellTicket02</span>();<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket02).start();<span class="hljs-comment">//第1个线程-窗口</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket02).start();<span class="hljs-comment">//第2个线程-窗口</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket02).start();<span class="hljs-comment">//第3个线程-窗口</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="线程使用应用案例-多线程执行"><a href="#线程使用应用案例-多线程执行" class="headerlink" title="线程使用应用案例-多线程执行"></a>线程使用应用案例-多线程执行</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">T1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T1</span>();<br>        <span class="hljs-type">T2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T2</span>();<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(t1);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(t2);<br>        thread1.start();<span class="hljs-comment">//启动第1个线程</span><br>        thread2.start();<span class="hljs-comment">//启动第2个线程</span><br>        <span class="hljs-comment">//...</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//每隔1秒输出 “hello,world”,输出10次</span><br>            System.out.println(<span class="hljs-string">&quot;hello,world &quot;</span> + (++count));<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(count == <span class="hljs-number">60</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//每隔1秒输出 “hi”,输出5次</span><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + (++count));<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(count == <span class="hljs-number">50</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="线程终止"><a href="#线程终止" class="headerlink" title="线程终止"></a>线程终止</h3><h4 id="基本说明"><a href="#基本说明" class="headerlink" title="基本说明"></a>基本说明</h4><ul>
<li>当线程完成任务后，会自动退出</li>
<li>还可以通过使用变量来控制 run 方法退出的方式停止线程，即通知方式</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadExit_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">T</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T</span>();<br>        t1.start();<br>        <span class="hljs-comment">//如果希望main线程去控制t1 线程的终止, 必须可以修改 循环判断条件（loop）</span><br>        <span class="hljs-comment">//让t1 退出run方法，从而终止 t1线程 -&gt; 通知方式</span><br><br>        <span class="hljs-comment">//让主线程休眠 10 秒，再通知 t1线程退出</span><br>        System.out.println(<span class="hljs-string">&quot;main线程休眠10s...&quot;</span>);<br>        Thread.sleep(<span class="hljs-number">10</span> * <span class="hljs-number">1000</span>);<br>        t1.setLoop(<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//设置一个控制变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">loop</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (loop) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">50</span>);<span class="hljs-comment">// 让当前线程休眠50ms</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;T 运行中....&quot;</span> + (++count));<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLoop</span><span class="hljs-params">(<span class="hljs-type">boolean</span> loop)</span> &#123;<br>        <span class="hljs-built_in">this</span>.loop = loop;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="线程常用方法"><a href="#线程常用方法" class="headerlink" title="线程常用方法"></a>线程常用方法</h3><h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><ul>
<li><p>setName  &#x2F;&#x2F;设置线程名称，使之与参数name相同</p>
</li>
<li><p>getName  &#x2F;&#x2F;返回该线程的名称</p>
</li>
<li><p>start  &#x2F;&#x2F;使该线程开始执行，Java 虚拟机底层调用该线程的 start0() 方法</p>
<p>start() 底层会创建新的线程来调用 run()，而 run() 就是一个简单的方法调用，不会启动新的线程</p>
</li>
<li><p>run  &#x2F;&#x2F;调用线程对象 run() 方法</p>
</li>
<li><p>setPriority  &#x2F;&#x2F;更改线程的优先级</p>
</li>
<li><p>getPriority  &#x2F;&#x2F;获取线程的优先级 </p>
<p>线程优先级的范围： MAX_PRIORITY&#x3D;10;   MIN_PRIORITY&#x3D;1;   NORM_PRIORITY&#x3D;5;</p>
</li>
<li><p>sleep  &#x2F;&#x2F;线程的静态方法，在指定的毫秒数内让当前正在执行的线程休眠（暂停执行）</p>
</li>
<li><p>interrupt  &#x2F;&#x2F;中断线程休眠</p>
<p>interrupt 中断线程休眠，但并没有结束线程，所以一般用于中断正在休眠的线程</p>
<p>比如：正有一个线程t1在休眠，如果调用t1.interrupt()中断休眠，就会catch到一个异常（InterruptedException异常）</p>
</li>
<li><p>yield：线程的礼让。让出 cpu，让其他线程执行，但礼让的资源不确定，所以也不一定礼让成功</p>
</li>
<li><p>join：线程的加入。加入的线程一旦插队成功，则肯定先执行完加入的线程所有的任务</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMethod01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-comment">//测试相关的方法</span><br>        <span class="hljs-type">T</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T</span>();<br>        t.setName(<span class="hljs-string">&quot;老韩&quot;</span>);<br>        t.setPriority(Thread.MIN_PRIORITY);<span class="hljs-comment">//1</span><br>        t.start();<span class="hljs-comment">//启动子线程</span><br>        <span class="hljs-comment">//主线程打印5 hi ,然后我就中断 子线程的休眠</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + i);<br>        &#125;<br>        System.out.println(t.getName() + <span class="hljs-string">&quot; 线程的优先级 =&quot;</span> + t.getPriority());<span class="hljs-comment">//1</span><br>        t.interrupt();<span class="hljs-comment">//当执行到这里，就会中断 t线程的休眠.</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123; <span class="hljs-comment">//自定义的线程类</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>                <span class="hljs-comment">//Thread.currentThread().getName() 获取当前线程的名称</span><br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;  吃包子~~~~&quot;</span> + i);<br>            &#125;<br>            <span class="hljs-keyword">try</span> &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; 休眠中~~~&quot;</span>);<br>                Thread.sleep(<span class="hljs-number">20000</span>);<span class="hljs-comment">//20秒</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                <span class="hljs-comment">//当该线程执行到一个interrupt 方法时，就会catch到一个异常, 可以加入自己的业务代码</span><br>                <span class="hljs-comment">//InterruptedException 是捕获到一个中断异常.</span><br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;被 interrupt了&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//.join()与.yield()</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMethod02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-type">T2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T2</span>();<br>        t2.start();<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">20</span>; i++) &#123;<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            System.out.println(<span class="hljs-string">&quot;主线程(小弟) 吃了 &quot;</span> + i  + <span class="hljs-string">&quot; 包子&quot;</span>);<br>            <span class="hljs-keyword">if</span>(i == <span class="hljs-number">5</span>) &#123;<br>                System.out.println(<span class="hljs-string">&quot;主线程(小弟) 让 子线程(老大) 先吃..&quot;</span>);<br>                <span class="hljs-comment">//join, 线程插队</span><br>                t2.join();<span class="hljs-comment">// 这里相当于让t2 线程先执行完毕</span><br><span class="hljs-comment">//                Thread.yield();//礼让，不一定成功..</span><br>                System.out.println(<span class="hljs-string">&quot;线程(老大) 吃完了 主线程(小弟) 接着吃..&quot;</span>);<br>            &#125;<br><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">20</span>; i++) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<span class="hljs-comment">//休眠1秒</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;子线程(老大) 吃了 &quot;</span> + i +  <span class="hljs-string">&quot; 包子&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="用户线程和守护线程"><a href="#用户线程和守护线程" class="headerlink" title="用户线程和守护线程"></a>用户线程和守护线程</h4><ul>
<li><p>用户线程：也叫工作线程，当线程的任务执行完后或以通知方式结束</p>
</li>
<li><p>守护线程：一般是为工作线程服务的，当所有的用户线程结束，守护线程自动结束</p>
</li>
<li><p>常见的守护线程：垃圾回收机制</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//语法：</span><br>线程对象.setDaemon(<span class="hljs-literal">true</span>);<br>线程对象.start();<br></code></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//案例</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMethod03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">MyDaemonThread</span> <span class="hljs-variable">myDaemonThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDaemonThread</span>();<br>        <span class="hljs-comment">// 如果我们希望当main线程结束后，子线程自动结束，</span><br>        <span class="hljs-comment">// 那么只需将子线程设为守护线程即可</span><br>        myDaemonThread.setDaemon(<span class="hljs-literal">true</span>);<br>        myDaemonThread.start();<br>        <span class="hljs-keyword">for</span>( <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<span class="hljs-comment">//main线程</span><br>            System.out.println(<span class="hljs-string">&quot;宝强在辛苦的工作...&quot;</span>);<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;宝强回家了...&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDaemonThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (; ; ) &#123;<span class="hljs-comment">//无限循环</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<span class="hljs-comment">//休眠1000毫秒</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;马蓉和宋喆快乐聊天，哈哈哈~~~&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="线程的生命周期"><a href="#线程的生命周期" class="headerlink" title="线程的生命周期"></a>线程的生命周期</h3> <img src="image-20220918154416827.png" srcset="/img/loading.gif" lazyload alt="image-20220918154416827" style="zoom: 80%;" />

 <img src="image-20220918154841698.png" srcset="/img/loading.gif" lazyload alt="image-20220918154841698" style="zoom:55%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 写程序查看线程状态</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadState_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">T</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">T</span>();<br>        System.out.println(t.getName() + <span class="hljs-string">&quot; 状态 &quot;</span> + t.getState());<br>        t.start();<br>        <span class="hljs-keyword">while</span> (Thread.State.TERMINATED != t.getState()) &#123;<br>            System.out.println(t.getName() + <span class="hljs-string">&quot; 状态 &quot;</span> + t.getState());<br>            Thread.sleep(<span class="hljs-number">500</span>);<br>        &#125;<br>        System.out.println(t.getName() + <span class="hljs-string">&quot; 状态 &quot;</span> + t.getState());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>                System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + i);<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="线程的同步"><a href="#线程的同步" class="headerlink" title="线程的同步"></a>线程的同步</h3><h4 id="线程同步机制"><a href="#线程同步机制" class="headerlink" title="线程同步机制"></a>线程同步机制</h4><ul>
<li>在多线程编程中，一些敏感数据不允许被多个线程同时访问，此时就使用同步访问技术，保证数据在任何同一时刻，最多有一个线程访问，以保证数据的完整性</li>
<li>也可以这样理解：线程同步，即当有一个线程在对内存进行操作时，其它线程都不可以对这个内存地址进行操作，直到该线程完成操作，其它线程才能对该线程内存地址进行操作</li>
</ul>
<h4 id="同步具体方法-Synchronized"><a href="#同步具体方法-Synchronized" class="headerlink" title="同步具体方法-Synchronized"></a>同步具体方法-Synchronized</h4><p>Synchronized 是非公平锁</p>
<ul>
<li><p>同步代码块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">synchronized</span>(对象)&#123;  <span class="hljs-comment">// 得到对象的锁，才能操作同步代码</span><br>    <span class="hljs-comment">//需要被同步代码</span><br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>synchronized 还可以放在方法声明中，表示整个方法为同步方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m</span><span class="hljs-params">(String name)</span>&#123;<br>    <span class="hljs-comment">//需要被同步的代码</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><ul>
<li><p>Java 语言中，引入了对象互斥锁的概念，来保证共享数据操作的完整性</p>
</li>
<li><p>每个对象都对应于一个可称为 “互斥锁” 的标记，这个标记用来保证在任一时刻，只能有一个线程访问该对象</p>
</li>
<li><p>关键字 synchronized 来与对象的互斥锁联系。当某个对象用 synchronized 修饰时，表明该对象在任一时刻只能由一个线程访问</p>
</li>
<li><p>同步的局限性：导致程序的执行效率降低</p>
</li>
<li><p><strong>同步方法（非静态的）的锁默认是 this，也可以是其它任意对象（但要求是同一个对象）</strong></p>
</li>
<li><p><strong>同步方法（静态的）的锁默认为当前类本身（类名.class）。（静态方法没有 this）</strong></p>
</li>
<li><p>实现的落地步骤</p>
<ul>
<li><p>需要先分析上锁的代码</p>
</li>
<li><p>选择同步代码块或同步方法（推荐使用同步代码块）</p>
</li>
<li><p>要求多个线程的锁对象为同一个（注意 this 中存在的陷阱）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注意 this 中存在的陷阱</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">synchronized</span>&#123;&#125;<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().start();<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().start();<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().start();<br><span class="hljs-comment">//此时三个线程的this不相同</span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> testPackage;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JavaTest</span> &#123;<br>	<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">SellTicket03</span> <span class="hljs-variable">sellTicket03</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SellTicket03</span>();<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket03).start();<span class="hljs-comment">//第 1 个线程-窗口</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket03).start();<span class="hljs-comment">//第 2 个线程-窗口</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(sellTicket03).start();<span class="hljs-comment">//第 3 个线程-窗口</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//实现接口方式, 使用 synchronized 实现线程同步</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SellTicket03</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>	<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">ticketNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<span class="hljs-comment">//让多个线程共享 ticketNum</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">loop</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<span class="hljs-comment">//控制 run 方法变量</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">synchronized</span> (SellTicket03.class) &#123;<br>            System.out.println(<span class="hljs-string">&quot;m2&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sell</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//同步方法, 在同一时刻， 只能有一个线程来执行 sell 方法</span><br>    	<span class="hljs-keyword">if</span> (ticketNum &lt;= <span class="hljs-number">0</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;售票结束...&quot;</span>);<br>            loop = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="hljs-string">&quot; 售出一张票&quot;</span><br>                           + <span class="hljs-string">&quot; 剩余票数=&quot;</span> + (--ticketNum));<span class="hljs-comment">//1 - 0 - -1 - -2</span><br>		<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (loop) &#123;<br>        	<span class="hljs-keyword">try</span> &#123;<br>				Thread.sleep(<span class="hljs-number">50</span>);<br>			&#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>				e.printStackTrace();<br>			&#125;<br>            sell();<span class="hljs-comment">//sell 方法是一个同步方法</span><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="线程的死锁"><a href="#线程的死锁" class="headerlink" title="线程的死锁"></a>线程的死锁</h3><p><strong>基本介绍：</strong>多个线程都占用了对方的锁资源，但不肯相让，导致了死锁（一定要避免死锁的发生）</p>
<p>一个通俗的例子：</p>
<p>妈妈：你先完成作业，我才让你玩手机</p>
<p>小明：你先让我玩手机，我才完成作业</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//模拟死锁</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLock_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//模拟死锁现象</span><br>        <span class="hljs-type">DeadLockDemo</span> <span class="hljs-variable">A</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeadLockDemo</span>(<span class="hljs-literal">true</span>);<br>        A.setName(<span class="hljs-string">&quot;A线程&quot;</span>);<br>        <span class="hljs-type">DeadLockDemo</span> <span class="hljs-variable">B</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeadLockDemo</span>(<span class="hljs-literal">false</span>);<br>        B.setName(<span class="hljs-string">&quot;B线程&quot;</span>);<br>        A.start();<br>        B.start();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//线程</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLockDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">o1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<span class="hljs-comment">// 保证多线程，共享一个对象,这里使用static</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">o2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>    <span class="hljs-type">boolean</span> flag;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeadLockDemo</span><span class="hljs-params">(<span class="hljs-type">boolean</span> flag)</span> &#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-built_in">this</span>.flag = flag;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//下面业务逻辑的分析</span><br>        <span class="hljs-comment">//1. 如果flag 为 T, 线程A 就会先得到/持有 o1 对象锁, 然后尝试去获取 o2 对象锁</span><br>        <span class="hljs-comment">//2. 如果线程A 得不到 o2 对象锁，就会Blocked</span><br>        <span class="hljs-comment">//3. 如果flag 为 F, 线程B 就会先得到/持有 o2 对象锁, 然后尝试去获取 o1 对象锁</span><br>        <span class="hljs-comment">//4. 如果线程B 得不到 o1 对象锁，就会Blocked</span><br>        <span class="hljs-keyword">if</span> (flag) &#123;<br>            <span class="hljs-keyword">synchronized</span> (o1) &#123;<span class="hljs-comment">//对象互斥锁, 下面就是同步代码</span><br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; 进入o1_1&quot;</span>);<br>                <span class="hljs-keyword">synchronized</span> (o2) &#123; <span class="hljs-comment">// 这里获得li对象的监视权</span><br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; 进入o1_2&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">synchronized</span> (o2) &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; 进入o2_1&quot;</span>);<br>                <span class="hljs-keyword">synchronized</span> (o1) &#123; <span class="hljs-comment">// 这里获得li对象的监视权</span><br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; 进入2_2&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="释放锁"><a href="#释放锁" class="headerlink" title="释放锁"></a>释放锁</h3><h4 id="会释放锁的操作"><a href="#会释放锁的操作" class="headerlink" title="会释放锁的操作"></a>会释放锁的操作</h4><ul>
<li>当前线程的同步代码块、同步方法执行结束</li>
<li>当前线程在同步代码块、同步方法中遇到 break、return</li>
<li>当前线程在同步代码块、同步方法中出现了未处理的 Error 或 Exception，导致异常结束</li>
<li>当前线程在同步代码块、同步方法中执行了线程对象的 wait() 方法，当前线程暂停，并释放锁</li>
</ul>
<h4 id="不会释放锁的操作"><a href="#不会释放锁的操作" class="headerlink" title="不会释放锁的操作"></a>不会释放锁的操作</h4><ul>
<li>线程执行同步代码块或同步方法时，程序调用了 Thread.sleep()、Thread.yield() 方法暂停当前线程的执行，不会释放锁</li>
<li>线程执行同步代码块时，其它线程调用了该线程的 suspend() 方法将该线程挂起，该线程不会释放锁</li>
<li>提示：应尽量避免使用 suspend() 和 resume() 来控制线程，方法不再推荐使用</li>
</ul>
<h3 id="Semaphore-限流"><a href="#Semaphore-限流" class="headerlink" title="Semaphore(限流)"></a>Semaphore(限流)</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45203607/article/details/122840245">Java多线程-Semaphore(限流)</a></p>
<h2 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h2><h3 id="文件-文件流"><a href="#文件-文件流" class="headerlink" title="文件-文件流"></a>文件-文件流</h3> <img src="image-20220920140407846.png" srcset="/img/loading.gif" lazyload alt="image-20220920140407846" style="zoom:50%;" />



<h3 id="常用的文件操作"><a href="#常用的文件操作" class="headerlink" title="常用的文件操作"></a>常用的文件操作</h3><h4 id="创建文件对象相关构造器和方法"><a href="#创建文件对象相关构造器和方法" class="headerlink" title="创建文件对象相关构造器和方法"></a>创建文件对象相关构造器和方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">（<span class="hljs-number">1</span>） <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(String pathname) <span class="hljs-comment">//根据路径构建一个File对象</span><br>（<span class="hljs-number">2</span>） <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(File parent, String child)  <span class="hljs-comment">//根据父目录文件+子路径构建一个File对象</span><br>（<span class="hljs-number">3</span>） <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(String parent, String child)  <span class="hljs-comment">//根据父目录+子路径构建一个File对象</span><br>（<span class="hljs-number">0</span>） createNewFile  <span class="hljs-comment">//创建新文件  注意：在使用 createNewFile方法后才会真正创建文件</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileCreate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">//方式1 new File(String pathname)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create01</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\news1.txt&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);  <span class="hljs-comment">//创建文件对象</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            file.createNewFile();  <span class="hljs-comment">//创建新文件</span><br>            System.out.println(<span class="hljs-string">&quot;文件创建成功&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-comment">//方式2 new File(File parent,String child) //根据父目录文件+子路径构建</span><br>    <span class="hljs-comment">//e:\\news2.txt</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">create02</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">parentFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;d:\\&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;news2.txt&quot;</span>;<br>        <span class="hljs-comment">//这里的file对象，在java程序中，只是一个对象</span><br>        <span class="hljs-comment">//只有执行了createNewFile 方法，才会真正的，在磁盘创建该文件</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(parentFile, fileName);<br>        <span class="hljs-keyword">try</span> &#123;<br>            file.createNewFile();<br>            System.out.println(<span class="hljs-string">&quot;创建成功~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//方式3 new File(String parent,String child) //根据父目录+子路径构建</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create03</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//String parentPath = &quot;d:/&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">parentPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\&quot;</span>;  <span class="hljs-comment">//推荐这种</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;news3.txt&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(parentPath, fileName);<br>        <span class="hljs-keyword">try</span> &#123;<br>            file.createNewFile();<br>            System.out.println(<span class="hljs-string">&quot;创建成功~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//下面四个都是抽象类</span><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-comment">//InputStream</span><br>    <span class="hljs-comment">//OutputStream</span><br>    <span class="hljs-comment">//Reader //字符输入流</span><br>    <span class="hljs-comment">//Writer  //字符输出流</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="获取文件的相关信息"><a href="#获取文件的相关信息" class="headerlink" title="获取文件的相关信息"></a>获取文件的相关信息</h4><p>getName、getAbsolutePath、getParent、length、exists、isFile、isDirectory</p>
 <img src="image-20220920142432214.png" srcset="/img/loading.gif" lazyload alt="image-20220920142432214" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.File;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInformation</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">//获取文件的信息</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">info</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//先创建文件对象</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;d:\\news1.txt&quot;</span>);<br>        <span class="hljs-comment">//调用相应的方法，得到对应信息</span><br>        System.out.println(<span class="hljs-string">&quot;文件名字=&quot;</span> + file.getName());<br>        <span class="hljs-comment">//getName、getAbsolutePath、getParent、length、exists、isFile、isDirectory</span><br>        System.out.println(<span class="hljs-string">&quot;文件绝对路径=&quot;</span> + file.getAbsolutePath());<br>        System.out.println(<span class="hljs-string">&quot;文件父级目录=&quot;</span> + file.getParent());<br>        System.out.println(<span class="hljs-string">&quot;文件大小(字节)=&quot;</span> + file.length());<span class="hljs-comment">//不同编码的存储方式不同</span><br>        System.out.println(<span class="hljs-string">&quot;文件是否存在=&quot;</span> + file.exists());<span class="hljs-comment">//T</span><br>        System.out.println(<span class="hljs-string">&quot;是不是一个文件=&quot;</span> + file.isFile());<span class="hljs-comment">//T</span><br>        System.out.println(<span class="hljs-string">&quot;是不是一个目录=&quot;</span> + file.isDirectory());<span class="hljs-comment">//F</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="目录的操作和文件删除"><a href="#目录的操作和文件删除" class="headerlink" title="目录的操作和文件删除"></a>目录的操作和文件删除</h4><p>mkdir 创建一级目录</p>
<p>mkdirs 创建多级目录</p>
<p>delete 删除空目录或文件</p>
<p>注意：delete 只能删除空目录或文件，如果目录里有文件或子目录，则需先删除里面的文件或子目录</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.File;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Directory_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//</span><br>    &#125;<br><br>    <span class="hljs-comment">//判断 d:\\news1.txt 是否存在，如果存在就删除</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\news1.txt&quot;</span>;  <span class="hljs-comment">//文件</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-keyword">if</span> (file.exists()) &#123;<br>            <span class="hljs-keyword">if</span> (file.delete()) &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;删除成功&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;删除失败&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;该文件不存在...&quot;</span>);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">//判断 D:\\demo02 是否存在，存在就删除，否则提示不存在</span><br>    <span class="hljs-comment">//这里我们需要体会到，在java编程中，目录也被当做文件</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;D:\\demo02&quot;</span>;  <span class="hljs-comment">//目录</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-keyword">if</span> (file.exists()) &#123;<br>            <span class="hljs-keyword">if</span> (file.delete()) &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;删除成功&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot;删除失败&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;该目录不存在...&quot;</span>);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">//判断 D:\\demo\\a\\b\\c 目录是否存在，如果存在就提示已经存在，否则就创建</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">directoryPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;D:\\demo\\a\\b\\c&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(directoryPath);<br>        <span class="hljs-keyword">if</span> (file.exists()) &#123;<br>            System.out.println(directoryPath + <span class="hljs-string">&quot;存在..&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (file.mkdirs()) &#123; <span class="hljs-comment">//创建一级目录使用mkdir() ，创建多级目录使用mkdirs()</span><br>                System.out.println(directoryPath + <span class="hljs-string">&quot;创建成功..&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(directoryPath + <span class="hljs-string">&quot;创建失败...&quot;</span>);<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="IO-流原理及流的分类"><a href="#IO-流原理及流的分类" class="headerlink" title="IO 流原理及流的分类"></a>IO 流原理及流的分类</h3><h4 id="Java-IO-流原理"><a href="#Java-IO-流原理" class="headerlink" title="Java IO 流原理"></a>Java IO 流原理</h4><ul>
<li><p>I&#x2F;O是Input&#x2F;Output的缩写，I&#x2F;O技术是非常实用的技术，用于处理数据传输。</p>
<p>如读&#x2F;写文件，网络通讯等</p>
</li>
<li><p>Java程序中，对于数据的输入&#x2F;输出操作以 “流（stream）” 的方式进行</p>
</li>
<li><p>java.io 包下提供了各种 “流” 类和接口，用以获取不同种类的数据，并通过方法输入或输出数据</p>
</li>
<li><p>输入 input：读取外部数据（网络或磁盘、光盘等存储设备的数据）到程序（内存）中。</p>
</li>
<li><p>输出 output：将程序（内存）数据输出到网络或磁盘、光盘等存储设备中</p>
</li>
</ul>
<h4 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h4><ul>
<li><p>按操作数据单位不同分为：字节流（8 bit）二进制文件，字节流（按字符）文本文件  |（否则可能有损失）</p>
</li>
<li><p>按数据流的流向不同分为：输入流、输出流</p>
</li>
<li><p>按流的角色不同分为：字节流、处理流&#x2F;包装流</p>
 <img src="image-20220920145929039.png" srcset="/img/loading.gif" lazyload alt="image-20220920145929039" style="zoom: 80%;" />
</li>
<li><p>Java 的 IO 流共涉及40多个类，实际上非常规则，都是从如上4个抽象基类派生出来的</p>
</li>
<li><p>由这4个抽象基类派生出来的子类名称都是以其父类名作为子类名后缀</p>
</li>
</ul>
<h3 id="IO-流体系图-常用的类"><a href="#IO-流体系图-常用的类" class="headerlink" title="IO 流体系图-常用的类"></a>IO 流体系图-常用的类</h3><p><strong>IO 流体系图：</strong></p>
 <img src="image-20220920150646088.png" srcset="/img/loading.gif" lazyload alt="image-20220920150646088" style="zoom:80%;" />

<p><strong>文件 VS 流：</strong></p>
 <img src="image-20220920150738374.png" srcset="/img/loading.gif" lazyload alt="image-20220920150738374" style="zoom:50%;" />



<p><strong>各个InputStream的关系：</strong></p>
 <img src="image-20220920151707753.png" srcset="/img/loading.gif" lazyload alt="image-20220920151707753" style="zoom:50%;" />





<h4 id="FileInputStream"><a href="#FileInputStream" class="headerlink" title="FileInputStream"></a>FileInputStream</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 演示读取文件...</span><br><span class="hljs-comment">     * 单个字节的读取，效率比较低</span><br><span class="hljs-comment">     * -&gt; 使用 read(byte[] b)</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile01</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hello.txt&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readData</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//创建 FileInputStream 对象，用于读取 文件</span><br>            fileInputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath);<br>            <span class="hljs-comment">//.read()从该输入流读取一个字节的数据。如果没有输入可用，此方法将被阻止。</span><br>            <span class="hljs-comment">//如果返回-1 , 表示读取完毕</span><br>            <span class="hljs-keyword">while</span> ((readData = fileInputStream.read()) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">// 读取到的值为int类型 要转成char显示</span><br>                System.out.print((<span class="hljs-type">char</span>)readData);<br>                <span class="hljs-comment">// 注意：该方法一次只能读取一个字节（utf-8中字母占1字节，汉字占3字节）</span><br>                <span class="hljs-comment">// 如果出现汉字等需3个字节存储的文字，则会出现乱码</span><br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭文件流，释放资源.</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                fileInputStream.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 使用 read(byte[] b) 读取文件，提高效率</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile02</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hello.txt&quot;</span>;<br>        <span class="hljs-comment">//字节数组</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">8</span>]; <span class="hljs-comment">//一次读取8个字节.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//创建 FileInputStream 对象，用于读取 文件</span><br>            fileInputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath);<br>            <span class="hljs-comment">//.read(buf)</span><br>            <span class="hljs-comment">// 从该输入流读取最多buf.length字节的数据到字节数组（buf）。</span><br>            <span class="hljs-comment">// 如果返回-1 , 表示读取完毕</span><br>            <span class="hljs-comment">// 如果读取正常, 返回实际读取的字节数</span><br>            <span class="hljs-keyword">while</span> ((readLen = fileInputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<span class="hljs-comment">//显示</span><br>            &#125;<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭文件流，释放资源.</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                fileInputStream.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h4><p> 如果文件不存在，会创建文件(注意：前提是目录已经存在.)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStream01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeFile</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//创建 FileOutputStream对象</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.txt&quot;</span>;<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fileOutputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//得到 FileOutputStream对象 对象</span><br>            <span class="hljs-comment">//老师说明</span><br>            <span class="hljs-comment">//1. new FileOutputStream(filePath) ，当写入内容时，会覆盖原来的内容</span><br>            <span class="hljs-comment">//2. new FileOutputStream(filePath, true) ，当写入内容时，是追加到文件后面</span><br>            fileOutputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath, <span class="hljs-literal">true</span>);<br>            <span class="hljs-comment">//写入一个字节</span><br>            <span class="hljs-comment">//fileOutputStream.write(&#x27;H&#x27;);//</span><br>            <span class="hljs-comment">//写入字符串</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hsp,world!&quot;</span>;<br>            <span class="hljs-comment">//str.getBytes() 可以把 字符串-&gt; 字节数组</span><br>            <span class="hljs-comment">//fileOutputStream.write(str.getBytes());</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            write(byte[] b, int off, int len)</span><br><span class="hljs-comment">            将len字节从位于偏移量off的指定字节数组写入此文件输出流</span><br><span class="hljs-comment">             */</span><br>            fileOutputStream.write(str.getBytes(), <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                fileOutputStream.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="案例：文件拷贝"><a href="#案例：文件拷贝" class="headerlink" title="案例：文件拷贝"></a><strong>案例：文件拷贝</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileCopy</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//完成 文件拷贝，将 d:\\Koala.jpg 拷贝 d:\\Koala3.jpg</span><br>        <span class="hljs-comment">//思路分析</span><br>        <span class="hljs-comment">//1. 创建文件的输入流 , 将文件读入到程序</span><br>        <span class="hljs-comment">//2. 创建文件的输出流， 将读取到的文件数据，写入到指定的文件.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">srcFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\Koala.jpg&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\Koala3.jpg&quot;</span>;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fileOutputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            fileInputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(srcFilePath);<br>            fileOutputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(destFilePath);<br>            <span class="hljs-comment">//定义一个字节数组,提高读取效果</span><br>            <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span> ((readLen = fileInputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">//读取到后，就写入到文件 通过 fileOutputStream</span><br>                <span class="hljs-comment">//即，是一边读，一边写</span><br>                fileOutputStream.write(buf, <span class="hljs-number">0</span>, readLen);<span class="hljs-comment">//一定要使用这个方法</span><br>                <span class="hljs-comment">//fileOutputStream.write(buf);  //整个写入（拷贝不能使用这种）</span><br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;拷贝ok~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//关闭输入流和输出流，释放资源</span><br>                <span class="hljs-keyword">if</span> (fileInputStream != <span class="hljs-literal">null</span>) &#123;<br>                    fileInputStream.close();<br>                &#125;<br>                <span class="hljs-keyword">if</span> (fileOutputStream != <span class="hljs-literal">null</span>) &#123;<br>                    fileOutputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="FileReader-和-FileWriter-介绍"><a href="#FileReader-和-FileWriter-介绍" class="headerlink" title="FileReader 和 FileWriter 介绍"></a>FileReader 和 FileWriter 介绍</h4> <img src="image-20220920171124837.png" srcset="/img/loading.gif" lazyload alt="image-20220920171124837" style="zoom:80%;" />

 

<h4 id="FileReader-相关方法："><a href="#FileReader-相关方法：" class="headerlink" title="FileReader 相关方法："></a><strong>FileReader 相关方法：</strong></h4><ul>
<li>new FileReader(File&#x2F;String)</li>
<li>read：每次读取单个字符（不会出现乱码），返回该字符，如果到文件末尾返回 -1</li>
<li>read(char[])：批量读取多个字符到数组，返回读取到的字符数，如果到文件末尾返回 -1</li>
</ul>
<p><strong>相关API：</strong></p>
<ul>
<li>new String(char[])：将 char[] 转换成 String</li>
<li>new String(char[], off, len)：将 char[] 的指定部分转换成 String</li>
</ul>
<h4 id="FileWriter-常用方法："><a href="#FileWriter-常用方法：" class="headerlink" title="FileWriter 常用方法："></a><strong>FileWriter 常用方法：</strong></h4><ul>
<li>new FileWriter(File&#x2F;String)：覆盖模式，相当于流的指针在首端</li>
<li>new FileWritter(File&#x2F;String, true)：追加模式，相当于流的指针在尾端</li>
<li>write(int)：写入单个字符</li>
<li>write(char [])：写入指定数组</li>
<li>write(char[], off, len)：写入指定数组的指定部分</li>
<li>write(string)：写入整个字符串</li>
<li>write(string, off, len)：写入字符串的指定部分</li>
</ul>
<p><strong>相关API：</strong></p>
<p>String 类：toCharArray：将 String 转换成 char[]</p>
<p><strong>注意：</strong> <strong>FileWriter 使用后，必须要关闭（close）或刷新（flush），否则只是在内存中而写入不到指定的文件！</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">///FileReader案例</span><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileReader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 单个字符读取文件</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile01</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\story.txt&quot;</span>;<br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fileReader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//1. 创建FileReader对象</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath);<br>            <span class="hljs-comment">//循环读取 使用read, 单个字符读取</span><br>            <span class="hljs-keyword">while</span> ((data = fileReader.read()) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.print((<span class="hljs-type">char</span>) data);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (fileReader != <span class="hljs-literal">null</span>) &#123;<br>                    fileReader.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 字符数组读取文件</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile02</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;~~~readFile02 ~~~&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\story.txt&quot;</span>;<br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fileReader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">char</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">8</span>];<br>        <span class="hljs-comment">//1. 创建FileReader对象</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath);<br>            <span class="hljs-comment">//循环读取 使用read(buf), 返回的是实际读取到的字符数</span><br>            <span class="hljs-comment">//如果返回-1, 说明到文件结束</span><br>            <span class="hljs-keyword">while</span> ((readLen = fileReader.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>                System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (fileReader != <span class="hljs-literal">null</span>) &#123;<br>                    fileReader.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//FileWriter案例</span><br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\note.txt&quot;</span>;<br>        <span class="hljs-comment">//创建FileWriter对象</span><br>        <span class="hljs-type">FileWriter</span> <span class="hljs-variable">fileWriter</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">char</span>[] chars = &#123;<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>&#125;;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fileWriter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(filePath);<span class="hljs-comment">//默认是覆盖写入</span><br>            <span class="hljs-comment">//注意：覆盖写入指的是每次打开会重新覆盖，而不是每次写入都会重新覆盖</span><br><span class="hljs-comment">//            3) write(int):写入单个字符</span><br>            fileWriter.write(<span class="hljs-string">&#x27;H&#x27;</span>);<br><span class="hljs-comment">//            4) write(char[]):写入指定数组</span><br>            fileWriter.write(chars);<br><span class="hljs-comment">//            5) write(char[],off,len):写入指定数组的指定部分</span><br>            fileWriter.write(<span class="hljs-string">&quot;韩顺平教育&quot;</span>.toCharArray(), <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br><span class="hljs-comment">//            6) write（string）：写入整个字符串</span><br>            fileWriter.write(<span class="hljs-string">&quot; 你好北京~&quot;</span>);<br>            fileWriter.write(<span class="hljs-string">&quot;风雨之后，定见彩虹&quot;</span>);<br><span class="hljs-comment">//            7) write(string,off,len):写入字符串的指定部分</span><br>            fileWriter.write(<span class="hljs-string">&quot;上海天津&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>            <span class="hljs-comment">//在数据量大的情况下，可以使用循环操作.</span><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//fileWriter.flush();</span><br>                <span class="hljs-comment">//关闭文件流，等价 flush() + 关闭</span><br>                fileWriter.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br><br>        &#125;<br>        <span class="hljs-comment">//对于 FileWriter , 一定要关闭流，或者flush才能真正的把数据写入到文件</span><br>        <span class="hljs-comment">//否则数据还只是在内存中，而没有写入到磁盘</span><br>        <span class="hljs-comment">//老韩看源码就知道原因.</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        看看代码</span><br><span class="hljs-comment">        private void writeBytes() throws IOException &#123;</span><br><span class="hljs-comment">            this.bb.flip();</span><br><span class="hljs-comment">            int var1 = this.bb.limit();</span><br><span class="hljs-comment">            int var2 = this.bb.position();</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">            assert var2 &lt;= var1;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">            int var3 = var2 &lt;= var1 ? var1 - var2 : 0;</span><br><span class="hljs-comment">            if (var3 &gt; 0) &#123;</span><br><span class="hljs-comment">                if (this.ch != null) &#123;</span><br><span class="hljs-comment">                    assert this.ch.write(this.bb) == var3 : var3;</span><br><span class="hljs-comment">                &#125; else &#123;</span><br><span class="hljs-comment">                    this.out.write(this.bb.array(), this.bb.arrayOffset() + var2, var3);</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            this.bb.clear();</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br>        System.out.println(<span class="hljs-string">&quot;程序结束...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="节点流和处理流"><a href="#节点流和处理流" class="headerlink" title="节点流和处理流"></a>节点流和处理流</h3><h4 id="基本介绍-6"><a href="#基本介绍-6" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li>节点流可以从一个特定的数据源读写数据，如 FileReader、FileWriter    [数据源就是存放数据的地方]</li>
<li>处理流（也叫包装流）是 “连接” 在已存在的流（节点流或处理流）之上，为程序提供更为强大的读写功能，也更加灵活，如 BufferedReader、BufferedWriter</li>
</ul>
<p>注意：（以BufferedReader&#x2F;BufferedWriter举例说明）</p>
<p><strong>BufferedReader中，有属性Reader，即 可以封装任意一个的Reader子类的节点流</strong></p>
<p><strong>BufferedWriter中，有属性Writer，即 可以封装任意一个的Writer子类的节点流</strong></p>
<h4 id="节点流和处理流一览图"><a href="#节点流和处理流一览图" class="headerlink" title="节点流和处理流一览图"></a>节点流和处理流一览图</h4> <img src="image-20220920192614729.png" srcset="/img/loading.gif" lazyload alt="image-20220920192614729" style="zoom:90%;" />



<h4 id="节点流和处理流的区别和联系"><a href="#节点流和处理流的区别和联系" class="headerlink" title="节点流和处理流的区别和联系"></a>节点流和处理流的区别和联系</h4><ul>
<li>节点流是底层流&#x2F;低级流，直接跟数据源相接</li>
<li>处理流（包装流）包装节点流，既可以消除不同节点流的实现差异，也可以提供更方便的方法来完成输入输出</li>
<li>处理流（也叫包装流）对节点流进行包装，使用了修饰器设计模式，不会直接与数据相连</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//处理流 修饰器设计模式 模拟案例</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reader_</span> &#123; <span class="hljs-comment">//抽象类</span><br>   <span class="hljs-comment">//示意</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readString</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-comment">//也可以 在Reader_ 抽象类，使用read方法统一管理.</span><br>    <span class="hljs-comment">//后面在调用时，利于对象动态绑定机制， 绑定到对应的实现子类即可.</span><br>    <span class="hljs-comment">//public abstract void read();</span><br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileReader_</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;对文件进行读取...&quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringReader_</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readString</span><span class="hljs-params">()</span> &#123;System.out.println(<span class="hljs-string">&quot;读取字符串..&quot;</span>);&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedReader_</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reader_</span>&#123;<br><br>    <span class="hljs-keyword">private</span> Reader_ reader_; <span class="hljs-comment">//属性是 Reader_ 类型</span><br><br>    <span class="hljs-comment">//接收Reader_ 子类对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BufferedReader_</span><span class="hljs-params">(Reader_ reader_)</span> &#123;<br>        <span class="hljs-built_in">this</span>.reader_ = reader_;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">//封装一层</span><br>        reader_.readFile();<br>    &#125;<br><br>    <span class="hljs-comment">//扩张功能：让方法更加灵活，多次读取文件，或者加缓冲byte[] ....</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFiles</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>            reader_.readFile();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//扩展 readString, 批量处理字符串数据</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readStrings</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;num; i++) &#123;<br>            reader_.readString();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">BufferedReader_</span> <span class="hljs-variable">bufferedReader_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader_</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader_</span>());<br>        bufferedReader_.readFiles(<span class="hljs-number">10</span>);  <span class="hljs-comment">//使用扩展功能</span><br>        <span class="hljs-comment">//bufferedReader_.readFile();  //原方法</span><br>        <span class="hljs-comment">//Serializable</span><br>        <span class="hljs-comment">//Externalizable</span><br>        <span class="hljs-comment">//ObjectInputStream</span><br>        <span class="hljs-comment">//ObjectOutputStream</span><br>        <span class="hljs-comment">//这次希望通过 BufferedReader_ 多次读取字符串</span><br>        <span class="hljs-type">BufferedReader_</span> <span class="hljs-variable">bufferedReader_2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader_</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringReader_</span>());<br>        bufferedReader_2.readStrings(<span class="hljs-number">5</span>);  <span class="hljs-comment">//使用扩展功能</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="处理流"><a href="#处理流" class="headerlink" title="处理流"></a>处理流</h4><ul>
<li>性能的提高：主要以增加缓冲的方式来提高输入输出的效率</li>
<li>操作的便捷：处理流可能提供了一系列边界的方法来一次输入输出大批量的数据，使用更加灵活方便</li>
</ul>
<p><strong>注意：使用处理流（Buffered）时记得 flash &#x2F; shutdown(网络)</strong></p>
<h4 id="处理流-BufferedReader-和-BufferedWriter"><a href="#处理流-BufferedReader-和-BufferedWriter" class="headerlink" title="处理流-BufferedReader 和 BufferedWriter"></a>处理流-BufferedReader 和 BufferedWriter</h4><ul>
<li><p>BufferedReader 和 BufferedWriter 属于字符流，是按照字符来读取数据的</p>
</li>
<li><p>关闭处理流时，只需要关闭外层流（即包装流）即可</p>
<p>（理解：关闭外层流时会自动关闭包装在其中的节点流）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//BufferedReader使用案例</span><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedReader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.java&quot;</span>;<br>        <span class="hljs-comment">//创建bufferedReader</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath));<br>        <span class="hljs-comment">//读取</span><br>        String line; <span class="hljs-comment">//按行读取, 效率高</span><br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">//1. bufferedReader.readLine() 是按行读取文件</span><br>        <span class="hljs-comment">//2. 当返回null 时，表示文件读取完毕</span><br>        <span class="hljs-keyword">while</span> ((line = bufferedReader.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>            System.out.println(line);<br>        &#125;<br>        <span class="hljs-comment">//关闭流, 这里注意，只需要关闭 BufferedReader ，因为底层会自动的去关闭节点流（FileReader）</span><br>        <span class="hljs-comment">/*  源码解读</span><br><span class="hljs-comment">        public void close() throws IOException &#123;</span><br><span class="hljs-comment">            synchronized (lock) &#123;</span><br><span class="hljs-comment">                if (in == null)</span><br><span class="hljs-comment">                    return;</span><br><span class="hljs-comment">                try &#123;</span><br><span class="hljs-comment">                    in.close(); //in 就是我们传入的 new FileReader(filePath), 关闭了.</span><br><span class="hljs-comment">                &#125; finally &#123;</span><br><span class="hljs-comment">                    in = null;</span><br><span class="hljs-comment">                    cb = null;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        bufferedReader.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//BufferedWriter使用案例</span><br><span class="hljs-keyword">import</span> java.io.BufferedWriter;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\ok.txt&quot;</span>;<br>        <span class="hljs-comment">//创建BufferedWriter</span><br>        <span class="hljs-comment">//说明:</span><br>        <span class="hljs-comment">//1. new FileWriter(filePath, true) 表示以追加的方式写入(在节点流中表示追加)</span><br>        <span class="hljs-comment">//2. new FileWriter(filePath) , 表示以覆盖的方式写入</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(filePath));<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello, 韩顺平教育!&quot;</span>);<br>        bufferedWriter.newLine();<span class="hljs-comment">//插入一个和系统相关的换行</span><br>        bufferedWriter.write(<span class="hljs-string">&quot;hello2, 韩顺平教育!&quot;</span>);<br>        bufferedWriter.newLine();<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello3, 韩顺平教育!&quot;</span>);<br>        bufferedWriter.newLine();<br>        <span class="hljs-comment">//说明：关闭外层流即可 ， 传入的 new FileWriter(filePath) ,会在底层关闭</span><br>        bufferedWriter.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Buffered拷贝 案例</span><br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedCopy_</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">//1. BufferedReader 和 BufferedWriter 是按照字符操作</span><br>        <span class="hljs-comment">//2. 不要去操作 二进制文件[声音，视频，doc, pdf ], 可能造成文件损坏</span><br>        <span class="hljs-comment">//BufferedInputStream</span><br>        <span class="hljs-comment">//BufferedOutputStream</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">srcFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.java&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a2.java&quot;</span>;<br><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        String line;<br>        <span class="hljs-keyword">try</span> &#123;<br>            br = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(srcFilePath));<br>            bw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(destFilePath));<br>            <span class="hljs-comment">//说明: readLine 读取一行内容，但是不包含换行符</span><br>            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-comment">//每读取一行，就写入</span><br>                bw.write(line);<br>                <span class="hljs-comment">//插入一个换行</span><br>                bw.newLine();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;拷贝完毕...&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭流</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span>(br != <span class="hljs-literal">null</span>) &#123;<br>                    br.close();<br>                &#125;<br>                <span class="hljs-keyword">if</span>(bw != <span class="hljs-literal">null</span>) &#123;<br>                    bw.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="处理流-BufferedInputStream-和-BufferedOutputStream"><a href="#处理流-BufferedInputStream-和-BufferedOutputStream" class="headerlink" title="处理流-BufferedInputStream 和 BufferedOutputStream"></a>处理流-BufferedInputStream 和 BufferedOutputStream</h4><ul>
<li>BufferedInputStream 是字节流，在创建 BufferedInputStream 时，会创建一个内部缓存区数组</li>
<li>BufferedOutputStream 是字节流，实现缓冲的输出流，可以将多个字节写入底层输出流中，而不必对每次字节写入调用底层系统</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//案例：演示使用BufferedOutputStream 和 BufferedInputStream 完成二进制文件拷贝</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-comment">// 思考：字节流可以操作二进制文件，可以操作文本文件吗？当然可以，而且操作方式相同</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedCopy02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">srcFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\Koala.jpg&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hsp.jpg&quot;</span>;<br><span class="hljs-comment">//        String srcFilePath = &quot;d:\\0245_韩顺平零基础学Java_引出this.avi&quot;;</span><br><span class="hljs-comment">//        String destFilePath = &quot;d:\\hsp.avi&quot;;</span><br><span class="hljs-comment">//        String srcFilePath = &quot;e:\\a.java&quot;;</span><br><span class="hljs-comment">//        String destFilePath = &quot;e:\\a3.java&quot;;</span><br><br>        <span class="hljs-comment">//创建BufferedOutputStream对象BufferedInputStream对象</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//因为 FileInputStream  是 InputStream 子类</span><br>            bis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(srcFilePath));<br>            bos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(destFilePath));<br><br>            <span class="hljs-comment">//循环的读取文件，并写入到 destFilePath</span><br>            <span class="hljs-type">byte</span>[] buff = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-comment">//当返回 -1 时，就表示文件读取完毕</span><br>            <span class="hljs-keyword">while</span> ((readLen = bis.read(buff)) != -<span class="hljs-number">1</span>) &#123;<br>                bos.write(buff, <span class="hljs-number">0</span>, readLen);<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;文件拷贝完毕~~~&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭流 , 关闭外层的处理流即可，底层会去关闭节点流</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span>(bis != <span class="hljs-literal">null</span>) &#123;<br>                    bis.close();<br>                &#125;<br>                <span class="hljs-keyword">if</span>(bos != <span class="hljs-literal">null</span>) &#123;<br>                    bos.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="对象流-ObjectInputStream-和-ObjectOutputStream"><a href="#对象流-ObjectInputStream-和-ObjectOutputStream" class="headerlink" title="对象流-ObjectInputStream 和 ObjectOutputStream"></a>对象流-ObjectInputStream 和 ObjectOutputStream</h4> <img src="image-20220920222410638.png" srcset="/img/loading.gif" lazyload alt="image-20220920222410638" style="zoom: 80%;" />

 <img src="image-20220920222614466.png" srcset="/img/loading.gif" lazyload alt="image-20220920222614466" style="zoom: 33%;" />

<p><strong>序列化和反序列化</strong></p>
<ul>
<li>序列化就是在保存数据时，保存数据的值和数据类型</li>
<li>反序列化就是在恢复数据时，恢复数据的值和数据类型</li>
<li>需要让某个对象支持序列化机制，则必须让其类是可序列化的，为了让某个类是可序列化的，该类必须实现如下两个接口之一：<ul>
<li>Serializable  &#x2F;&#x2F;这是一个标记接口，里面没有方法（推荐使用）</li>
<li>Externalizable  &#x2F;&#x2F;该接口有方法需要实现，因此我们一般实现 Serializable 接口</li>
</ul>
</li>
</ul>
<h4 id="对象流介绍"><a href="#对象流介绍" class="headerlink" title="对象流介绍"></a>对象流介绍</h4><p>功能：提供了对基本类型或对象类型的序列化和反序列化的方法</p>
<ul>
<li><p>ObjectOutputStream 提供 序列化功能</p>
</li>
<li><p>ObjectInputStream 提供 反序列化功能</p>
</li>
</ul>
 <img src="image-20220920223003450.png" srcset="/img/loading.gif" lazyload alt="image-20220920223003450" style="zoom: 50%;" />

 <img src="image-20220920223115442.png" srcset="/img/loading.gif" lazyload alt="image-20220920223115442" style="zoom:49%;" />

<p><strong>注意事项和细节：</strong></p>
<ul>
<li><p><strong>读写顺序要一致 （否则会异常）</strong></p>
</li>
<li><p><strong>要求序列化或反序列化对象实现 Serializable</strong></p>
</li>
<li><p>序列化的类中建议添加 SerialVersionUID，提高版本的兼容性</p>
<p>如果有 SerialVersionUID ，当序列化的类修改了后，则只会认为该类只是修改了而不是一个新的类</p>
</li>
<li><p>序列化对象时，默认将里面所有属性都进行序列化，但除了 static 或 transient 修饰的成员</p>
</li>
<li><p>序列化对象时，要求里面属性的类型也需要实现序列化接口（当有属性是类时）</p>
</li>
<li><p>序列化具备可继承性，也就是如果某类已经实现了序列化，则它的所有子类也已经默认实现了序列化</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//序列化信息：使用ObjectOutputStream 序列化 基本数据类型和一个 Dog对象(name, age),</span><br><span class="hljs-comment">//			并保存到 data.dat 文件中</span><br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectOutputStream;<br><span class="hljs-keyword">import</span> java.io.Serializable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectOutStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//序列化后，保存的文件格式，不是存文本，而是按照它的格式来保存</span><br>        <span class="hljs-comment">//如果按文本格式保存 打开后看到的是乱码</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\data.dat&quot;</span>;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath));<br><br>        <span class="hljs-comment">//序列化数据到 d:\data.dat</span><br>        oos.writeInt(<span class="hljs-number">100</span>);<span class="hljs-comment">// int -&gt; Integer (实现了 Serializable)</span><br>        oos.writeBoolean(<span class="hljs-literal">true</span>);<span class="hljs-comment">// boolean -&gt; Boolean (实现了 Serializable)</span><br>        oos.writeChar(<span class="hljs-string">&#x27;a&#x27;</span>);<span class="hljs-comment">// char -&gt; Character (实现了 Serializable)</span><br>        oos.writeDouble(<span class="hljs-number">9.5</span>);<span class="hljs-comment">// double -&gt; Double (实现了 Serializable)</span><br>        oos.writeUTF(<span class="hljs-string">&quot;韩顺平教育&quot;</span>);<span class="hljs-comment">//String (实现了 Serializable)</span><br>        <span class="hljs-comment">//保存一个dog对象</span><br>        oos.writeObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;旺财&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;日本&quot;</span>, <span class="hljs-string">&quot;白色&quot;</span>));<br>        oos.close();<br>        System.out.println(<span class="hljs-string">&quot;数据保存完毕(序列化形式)&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Master</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>&#125;<br><span class="hljs-comment">//如果需要序列化某个类的对象，实现 Serializable</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-comment">//序列化对象时，默认将里面所有属性都进行序列化，但除了static或transient修饰的成员</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String nation;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> String color;<br>    <span class="hljs-comment">//序列化对象时，要求里面属性的类型也需要实现序列化接口</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Master</span> <span class="hljs-variable">master</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Master</span>();<br>    <span class="hljs-comment">//serialVersionUID 序列化的版本号，可以提高兼容性</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, String nation, String color)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.color = color;<br>        <span class="hljs-built_in">this</span>.nation = nation;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, color=&#x27;&quot;</span> + color + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span> + <span class="hljs-string">&quot;  nation=&quot;</span>+ nation + <span class="hljs-string">&quot;  master=&quot;</span> + master;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-built_in">this</span>.name = name;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<span class="hljs-built_in">this</span>.age = age;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//反序列化信息：使用ObjectInputStream 读取 data.dat 并反序列化恢复数据</span><br><span class="hljs-keyword">import</span> com.hspedu.outputstream_.Dog;  <span class="hljs-comment">//注意：要引入反序列化中包含的类</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectInputStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br>        <span class="hljs-comment">//指定反序列化的文件</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\data.dat&quot;</span>;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath));<br>        <span class="hljs-comment">//读取</span><br>        <span class="hljs-comment">//老师解读</span><br>        <span class="hljs-comment">//1. 读取(反序列化)的顺序需要和你保存数据(序列化)的顺序一致</span><br>        <span class="hljs-comment">//2. 否则会出现异常</span><br>        System.out.println(ois.readInt());<br>        System.out.println(ois.readBoolean());<br>        System.out.println(ois.readChar());<br>        System.out.println(ois.readDouble());<br>        System.out.println(ois.readUTF());<br><br>        <span class="hljs-comment">//dog 的编译类型是 Object , dog 的运行类型是 Dog</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> ois.readObject();<br>        System.out.println(<span class="hljs-string">&quot;运行类型=&quot;</span> + dog.getClass());<br>        System.out.println(<span class="hljs-string">&quot;dog信息=&quot;</span> + dog);<span class="hljs-comment">//底层 Object -&gt; Dog</span><br><br>        <span class="hljs-comment">//这里是特别重要的细节:</span><br>        <span class="hljs-comment">//1. 如果我们希望调用Dog的方法, 需要向下转型</span><br>        <span class="hljs-comment">//2. 我们需要引用Dog类，需要我们导入Dog类（import）|（在不同包里是需要注意该问题）</span><br>        <span class="hljs-comment">//   因此我们也需要将Dog的定义，放在 反序列化class文件 可以引用的位置</span><br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog2</span> <span class="hljs-operator">=</span> (Dog)dog;<br>        System.out.println(dog2.getName()); <span class="hljs-comment">//旺财..</span><br><br>        <span class="hljs-comment">//关闭流, 关闭外层流即可，底层会关闭 FileInputStream 流</span><br>        ois.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="标准输入输出流"><a href="#标准输入输出流" class="headerlink" title="标准输入输出流"></a>标准输入输出流</h4> <img src="image-20220920232521586.png" srcset="/img/loading.gif" lazyload alt="image-20220920232521586" style="zoom:80%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.io.OutputStreamWriter;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InputAndOutput</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//System类 的 public final static InputStream in = null;</span><br>        <span class="hljs-comment">// System.in 编译类型 InputStream</span><br>        <span class="hljs-comment">// System.in 运行类型 BufferedInputStream</span><br>        <span class="hljs-comment">// 表示的是标准输入 键盘</span><br>        System.out.println(System.in.getClass());<br>        <span class="hljs-comment">//解读</span><br>        <span class="hljs-comment">//1. System.out public final static PrintStream out = null;</span><br>        <span class="hljs-comment">//2. 编译类型 PrintStream</span><br>        <span class="hljs-comment">//3. 运行类型 PrintStream</span><br>        <span class="hljs-comment">//4. 表示的是标准输出 显示器</span><br>        System.out.println(System.out.getClass());<br>        System.out.println(<span class="hljs-string">&quot;hello, 韩顺平教育~&quot;</span>);<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;输入内容&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> scanner.next();<br>        System.out.println(<span class="hljs-string">&quot;next=&quot;</span> + next);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="转换流-InputStreamReader-和-OutputStreamWriter"><a href="#转换流-InputStreamReader-和-OutputStreamWriter" class="headerlink" title="转换流-InputStreamReader 和 OutputStreamWriter"></a>转换流-InputStreamReader 和 OutputStreamWriter</h4><ul>
<li>InputStreamReader：Reader 的子类，可以将 InputStream（字节流）包装成（转换）Reader（字符流）</li>
<li>OutputStreamWriter：Writer 的子类，实现将 OutputStream（字节流）包装成（转换） Writer（字符流）</li>
<li>当处理纯文本数据时，如果使用字符流效率更高，且可以有效解决中文问题，所以建议将字节流转换成字符流</li>
<li>可以在使用时指定编码格式（比如 utf-8，gbk、gb2312、ISO8859-1 等）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示使用 InputStreamReader 转换流解决中文乱码问题</span><br><span class="hljs-comment"> * 将字节流 FileInputStream 转成字符流  InputStreamReader, 指定编码 gbk/utf-8</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InputStreamReader_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\a.txt&quot;</span>;<br><span class="hljs-comment">//解读</span><br><span class="hljs-comment">//1. 把 FileInputStream 转成 InputStreamReader</span><br><span class="hljs-comment">//2. 指定编码 gbk</span><br><span class="hljs-comment">//InputStreamReader isr = new InputStreamReader(new FileInputStream(filePath), &quot;gbk&quot;);</span><br><span class="hljs-comment">//3. 把 InputStreamReader 传入 BufferedReader</span><br><span class="hljs-comment">//BufferedReader br = new BufferedReader(isr);</span><br>        <span class="hljs-comment">//将2 和 3 合在一起</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(<br>                                               <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath), <span class="hljs-string">&quot;gbk&quot;</span>));<br>        <span class="hljs-comment">//4. 读取</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> br.readLine();<br>        System.out.println(<span class="hljs-string">&quot;读取内容=&quot;</span> + s);<br>        <span class="hljs-comment">//5. 关闭外层流</span><br>        br.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示 OutputStreamWriter 使用</span><br><span class="hljs-comment"> * 把FileOutputStream 字节流，转成字符流 OutputStreamWriter</span><br><span class="hljs-comment"> * 指定处理的编码 gbk/utf-8/utf8</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OutputStreamWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\hsp.txt&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">charSet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;utf-8&quot;</span>;<br>        <span class="hljs-type">OutputStreamWriter</span> <span class="hljs-variable">osw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath), charSet);<br>        osw.write(<span class="hljs-string">&quot;hi, 韩顺平教育&quot;</span>);<br>        osw.close();<br>        System.out.println(<span class="hljs-string">&quot;按照 &quot;</span> + charSet + <span class="hljs-string">&quot; 保存文件成功~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="打印流-PrintStream-和-PrintWriter"><a href="#打印流-PrintStream-和-PrintWriter" class="headerlink" title="打印流-PrintStream 和 PrintWriter"></a>打印流-PrintStream 和 PrintWriter</h4><p>打印流只有输出流，没有输入流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示PrintStream （字节打印流/输出流）</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintStream_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-type">PrintStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> System.out;<br>        <span class="hljs-comment">//在默认情况下，PrintStream 输出数据的位置是 标准输出，即显示器</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        public void print(String s) &#123;</span><br><span class="hljs-comment">            if (s == null) &#123;</span><br><span class="hljs-comment">                s = &quot;null&quot;;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            write(s);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        out.print(<span class="hljs-string">&quot;john, hello&quot;</span>);<br>        <span class="hljs-comment">//因为print底层使用的是write , 所以我们可以直接调用write进行打印/输出</span><br>        out.write(<span class="hljs-string">&quot;韩顺平,你好&quot;</span>.getBytes());<br>        out.close();<br><br>        <span class="hljs-comment">//我们可以去修改打印流输出的位置/设备</span><br>        <span class="hljs-comment">//1. 输出位置修改成到 &quot;e:\\f1.txt&quot;</span><br>        <span class="hljs-comment">//2. &quot;hello, 韩顺平教育~&quot; 就会输出到 e:\f1.txt</span><br>        <span class="hljs-comment">//3. public static void setOut(PrintStream out) &#123;</span><br>        <span class="hljs-comment">//        checkIO();</span><br>        <span class="hljs-comment">//        setOut0(out); // native 方法，修改了out</span><br>        <span class="hljs-comment">//   &#125;</span><br>        System.setOut(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-string">&quot;e:\\f1.txt&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;hello, 韩顺平教育~&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示 PrintWriter 使用方式</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintWriter_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//PrintWriter printWriter = new PrintWriter(System.out);</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">printWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;e:\\f2.txt&quot;</span>));<br>        printWriter.print(<span class="hljs-string">&quot;hi, 北京你好~~~~&quot;</span>);<br>        printWriter.close();<span class="hljs-comment">//flush + 关闭流, 才会将数据写入到文件..</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Properties-类"><a href="#Properties-类" class="headerlink" title="Properties 类"></a>Properties 类</h3><p>1）专门用于读写配置文件的集合类</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">配置文件的格式：（不需要空格，不需要引号）<br>键<span class="hljs-operator">=</span>值<br>键<span class="hljs-operator">=</span>值<br></code></pre></td></tr></table></figure>

<p>2）注意：键值对不需要有空格，值不需要用引号一起来。默认类型是String</p>
<p>3）Properties 的常见方法</p>
<ul>
<li><p>load：加载配置文件的键值对到 Properties 对象</p>
</li>
<li><p>list：将数据输出到指定设备&#x2F;文件（流对象）</p>
</li>
<li><p>getProperty(key)：根据键获取值</p>
</li>
<li><p>setProperty(key, value)：设置键值对 到 Properties 对象</p>
</li>
<li><p>store：将 Properties 中的键值对存储到配置文件</p>
<p>在 IDEA 中，保存信息到配置文件，如果含有中文，会存储为 Unicode 编码</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//案例演示</span><br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Properties02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//使用Properties 类来读取mysql.properties 文件</span><br><br>        <span class="hljs-comment">//1. 创建Properties 对象</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//2. 加载指定配置文件</span><br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//3. 把k-v显示控制台</span><br>        properties.list(System.out);<br>        <span class="hljs-comment">//4. 根据key 获取对应的值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;pwd&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;用户名=&quot;</span> + user);<br>        System.out.println(<span class="hljs-string">&quot;密码是=&quot;</span> + pwd);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Properties03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//使用Properties 类来创建 配置文件, 修改配置文件内容</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//创建</span><br>        <span class="hljs-comment">//1.如果该文件没有该key 就是创建</span><br>        <span class="hljs-comment">//2.如果该文件中有该key ,就是修改</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            Properties 父类是 Hashtable ， 底层就是Hashtable 核心方法</span><br><span class="hljs-comment">            public synchronized V put(K key, V value) &#123;</span><br><span class="hljs-comment">                // Make sure the value is not null</span><br><span class="hljs-comment">                if (value == null) &#123;</span><br><span class="hljs-comment">                    throw new NullPointerException();</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                // Makes sure the key is not already in the hashtable.</span><br><span class="hljs-comment">                Entry&lt;?,?&gt; tab[] = table;</span><br><span class="hljs-comment">                int hash = key.hashCode();</span><br><span class="hljs-comment">                int index = (hash &amp; 0x7FFFFFFF) % tab.length;</span><br><span class="hljs-comment">                @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="hljs-comment">                Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index];</span><br><span class="hljs-comment">                for(; entry != null ; entry = entry.next) &#123;</span><br><span class="hljs-comment">                    if ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123;</span><br><span class="hljs-comment">                        V old = entry.value;</span><br><span class="hljs-comment">                        entry.value = value;//如果key 存在，就替换</span><br><span class="hljs-comment">                        return old;</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                addEntry(hash, key, value, index);//如果是新k, 就addEntry</span><br><span class="hljs-comment">                return null;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">         */</span><br>        properties.setProperty(<span class="hljs-string">&quot;charset&quot;</span>, <span class="hljs-string">&quot;utf8&quot;</span>);<br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;汤姆&quot;</span>);<span class="hljs-comment">//注意保存时，是中文的unicode码值</span><br>        properties.setProperty(<span class="hljs-string">&quot;pwd&quot;</span>, <span class="hljs-string">&quot;888666&quot;</span>);<br><br>        <span class="hljs-comment">//将k-v 存储到文件中即可  //第二个参数是注释</span><br>        properties.store(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;src\\mysql2.properties&quot;</span>), <span class="hljs-literal">null</span>);<br>        System.out.println(<span class="hljs-string">&quot;保存配置文件成功~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="课堂练习-过"><a href="#课堂练习-过" class="headerlink" title="课堂练习(过)"></a>课堂练习(过)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *(1) 在判断e盘下是否有文件夹mytemp ,如果没有就创建mytemp</span><br><span class="hljs-comment"> *(2) 在e:\\mytemp 目录下, 创建文件 hello.txt</span><br><span class="hljs-comment"> *(3) 如果hello.txt 已经存在，提示该文件已经存在，就不要再重复创建了</span><br><span class="hljs-comment"> *(4) 并且在hello.txt 文件中，写入 hello,world~</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.BufferedWriter;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">directoryPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\mytemp&quot;</span>;<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(directoryPath);<br>        <span class="hljs-keyword">if</span>(!file.exists()) &#123;<br>            <span class="hljs-comment">//创建</span><br>            <span class="hljs-keyword">if</span>(file.mkdirs()) &#123;<br>                System.out.println(<span class="hljs-string">&quot;创建 &quot;</span> + directoryPath + <span class="hljs-string">&quot; 创建成功&quot;</span> );<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;创建 &quot;</span> + directoryPath + <span class="hljs-string">&quot; 创建失败&quot;</span>);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span>  <span class="hljs-operator">=</span> directoryPath + <span class="hljs-string">&quot;\\hello.txt&quot;</span>;<span class="hljs-comment">// d:\mytemp\hello.txt</span><br>        file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-keyword">if</span>(!file.exists()) &#123;<br>            <span class="hljs-comment">//创建文件</span><br>            <span class="hljs-keyword">if</span>(file.createNewFile()) &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot; 创建成功~&quot;</span>);<br>                <span class="hljs-comment">//如果文件存在，我们就使用BufferedWriter 字符输入流写入内容</span><br>                <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(file));<br>                bufferedWriter.write(<span class="hljs-string">&quot;hello, world~~ 韩顺平教育&quot;</span>);<br>                bufferedWriter.close();<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(filePath + <span class="hljs-string">&quot; 创建失败~&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//如果文件已经存在，给出提示信息</span><br>            System.out.println(filePath + <span class="hljs-string">&quot; 已经存在，不在重复创建...&quot;</span>);<br>        &#125;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 要求:  使用BufferedReader读取一个文本文件，为每行加上行号，</span><br><span class="hljs-comment"> * 再连同内容一并输出到屏幕上。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\a.txt&quot;</span>;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">lineNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            br = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath));<br>            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//循环读取</span><br>                System.out.println(++lineNum + line);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span>(br != <span class="hljs-literal">null</span>) &#123;<br>                    br.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * (1) 要编写一个dog.properties   name=tom age=5 color=red</span><br><span class="hljs-comment"> * (2) 编写Dog 类(name,age,color)  创建一个dog对象，读取dog.properties 用相应的内容完成属性初始化, 并输出</span><br><span class="hljs-comment"> * (3) 将创建的Dog 对象 ，序列化到 文件 e:\\dog.dat 文件</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;src\\dog.properties&quot;</span>;<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;name&quot;</span>) + <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">//Object -&gt; String</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> Integer.parseInt(properties.get(<span class="hljs-string">&quot;age&quot;</span>) + <span class="hljs-string">&quot;&quot;</span>);<span class="hljs-comment">// Object -&gt; int</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">color</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;color&quot;</span>) + <span class="hljs-string">&quot;&quot;</span>;<span class="hljs-comment">//Object -&gt; String</span><br><br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(name, age, color);<br>        System.out.println(<span class="hljs-string">&quot;===dog对象信息====&quot;</span>);<br>        System.out.println(dog);<br><br>        <span class="hljs-comment">//将创建的Dog 对象 ，序列化到 文件 dog.dat 文件</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">serFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\dog.dat&quot;</span>;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(serFilePath));<br>        oos.writeObject(dog);<br><br>        <span class="hljs-comment">//关闭流</span><br>        oos.close();<br>        System.out.println(<span class="hljs-string">&quot;dog对象，序列化完成...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//在编写一个方法，反序列化dog</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">serFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\dog.dat&quot;</span>;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(serFilePath));<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> (Dog)ois.readObject();<br>        System.out.println(<span class="hljs-string">&quot;===反序列化后 dog====&quot;</span>);<br>        System.out.println(dog);<br>        ois.close();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String color;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, String color)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.color = color;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, color=&#x27;&quot;</span> + color + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>







<h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h2><h3 id="网络的相关概念"><a href="#网络的相关概念" class="headerlink" title="网络的相关概念"></a>网络的相关概念</h3><h4 id="网络通信"><a href="#网络通信" class="headerlink" title="网络通信"></a>网络通信</h4>  <img src="image-20220921112611952.png" srcset="/img/loading.gif" lazyload alt="image-20220921112611952" style="zoom:80%;" />

<ol>
<li><p>概念：两台设备之间通过网络实现数据传输  </p>
</li>
<li><p>网络通信：将数据通过网络从一台设备传输到另一台设备  </p>
</li>
<li><p>java.net包下提供了一系列的类或接口，供程序员使用，完成网络通信</p>
</li>
</ol>
<h4 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h4><ul>
<li><p>概念：两台或多台设备通过一定物理设备连接起来构成了网络</p>
</li>
<li><p>根据网络的覆盖范围不同，对网络进行分类：</p>
<ul>
<li>局域网：覆盖范围最小，仅仅覆盖 一个教室或一个机房</li>
<li>城域网：覆盖范围较大，可以覆盖 一个城市</li>
<li>广域网：覆盖范围最大，可以覆盖 全国，甚至全球，万维网是广域网的代表</li>
</ul>
</li>
</ul>
<h4 id="ip-地址-重要"><a href="#ip-地址-重要" class="headerlink" title="ip 地址(重要)"></a>ip 地址(重要)</h4><ul>
<li><p>概念：用于唯一标识网络中的每台计算机&#x2F;主机</p>
</li>
<li><p>查看ip地址：ipconfig</p>
</li>
<li><p>ip地址的表示形式：点分十进制 xxx.xxx.xxx.xxx</p>
</li>
<li><p>每一个十进制数的范围：0～255</p>
</li>
<li><p>ip地址的组成 &#x3D; 网络地址+主机地址，比如：192.168.16.69</p>
</li>
<li><p>lPv6是互联网工程任务组设计的用于替代IPv4的下一代IP协议，其地址数量号称可以为全世界的每一粒沙子编上一个地址[1]。</p>
</li>
<li><p>由于IPv4最大的问题在于网络地址资源有限，严重制约了互联网的应用和发展。</p>
<p>IPv6的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍</p>
</li>
</ul>
<h4 id="ipv4-地址分类"><a href="#ipv4-地址分类" class="headerlink" title="ipv4 地址分类"></a>ipv4 地址分类</h4><p> <img src="image-20220921114615816.png" srcset="/img/loading.gif" lazyload alt="image-20220921114615816" style="zoom: 50%;" /> <img src="image-20220921114848511.png" srcset="/img/loading.gif" lazyload alt="image-20220921114848511" style="zoom:50%;" /></p>
<p>特殊的：127.0.0.1 表示本机地址</p>
<h4 id="域名和端口"><a href="#域名和端口" class="headerlink" title="域名和端口"></a>域名和端口</h4><ul>
<li><p>域名：例如：<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<ul>
<li>好处：为了方便记忆，解决记ip的困难  </li>
<li>概念：将ip地址映射成域名，这里怎么映射上，HTTP协议</li>
</ul>
</li>
<li><p>端口号</p>
<ul>
<li><p>概念：用于标识计算机上某个特定的网络程序  </p>
</li>
<li><p>表示形式：以整数形式，端口范围0<del>65535[2个字节表示端口0</del>216-1]  </p>
</li>
<li><p>0~1024已经被占用，比如 ssh 22 ,  ftp 21 ,  smtp 25 ,  http 80  </p>
<p>(因此，在网络开发中，不要使用 0-1024 的端口)</p>
</li>
<li><p>常见的网络程序端口号：  </p>
<ul>
<li>ssh 22 ,  ftp 21 ,  smtp 25 ,  http 80 </li>
<li>tomcat：8080</li>
<li>mysql：3306</li>
<li>oracle：1521</li>
<li>sqlserver：1433</li>
</ul>
</li>
</ul>
</li>
<li><p>域名和端口的理解：</p>
 <img src="image-20220921144831286.png" srcset="/img/loading.gif" lazyload alt="image-20220921144831286" style="zoom: 50%;" /></li>
</ul>
<h4 id="网络通信协议-TCP-x2F-IP"><a href="#网络通信协议-TCP-x2F-IP" class="headerlink" title="网络通信协议(TCP&#x2F;IP)"></a>网络通信协议(TCP&#x2F;IP)</h4><p>TCP&#x2F;IP (Transmission Control  Protocol&#x2F;Internet Protocol的简写)，中文译名为传输控制协议&#x2F;因特网互联协议，又叫网络通讯协议，这个协议是 Internet 最基本的协议、Internet国际互联网络的基础，简单地说，就是由网络层的 IP 协议和传输层的 TCP 协议组成的。[示意图]</p>
<p>个人理解：网络通信协议 规范了网络数据的结构</p>
 <img src="image-20220921114510403.png" srcset="/img/loading.gif" lazyload alt="image-20220921114510403" style="zoom:50%;" />



<h4 id="网络通信协议"><a href="#网络通信协议" class="headerlink" title="网络通信协议"></a>网络通信协议</h4> <img src="image-20220921151249596.png" srcset="/img/loading.gif" lazyload alt="image-20220921151249596" style="zoom:45%;" />



<h4 id="TCP-和-UDP"><a href="#TCP-和-UDP" class="headerlink" title="TCP 和 UDP"></a>TCP 和 UDP</h4><p><strong>√</strong> <strong>TCP协议：传输控制协议</strong></p>
<ol>
<li><p>使用TCP协议前，须先建立TCP连接，形成传输数据通道</p>
</li>
<li><p>传输前，采用 “<strong>三次握手</strong>” 方式，是可靠的</p>
</li>
<li><p>TCP协议进行通信的两个应用进程：客户端、服务端  </p>
</li>
<li><p>在连接中可进行大数据量的传输</p>
</li>
<li><p>传输完毕，需释放已建立的连接，效率低</p>
</li>
</ol>
<p><strong>√</strong> <strong>UDP协议：用户数据协议</strong></p>
<ol>
<li>将数据、源、目的封装成数据包，不需要建立连接  </li>
<li>每个数据包的大小限制在64K内，不适合传输大量数据</li>
<li>因无需连接，故是不可靠的（不能保证数据一定被对方接收到）</li>
<li>发送数据结束时无需释放资源（因为不是面向连接的），速度快</li>
</ol>
<h3 id="InetAddress-类"><a href="#InetAddress-类" class="headerlink" title="InetAddress 类"></a>InetAddress 类</h3><ul>
<li>获取本机 InetAddress 对象：getLocalHost</li>
<li>根据指定 主机名&#x2F;域名 获取 ip 地址对象：getByName</li>
<li>获取 InetAddress对象 的主机名：getHostName</li>
<li>获取 InetAddress对象 的地址：getHostAddress</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><span class="hljs-comment">//演示 InetAddress类 的使用</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">API_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnknownHostException &#123;<br><br>        <span class="hljs-comment">//1. 获取本机的InetAddress 对象</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">localHost</span> <span class="hljs-operator">=</span> InetAddress.getLocalHost();<br>        System.out.println(localHost);<span class="hljs-comment">//DESKTOP-S4MP84S/192.168.12.1</span><br><br>        <span class="hljs-comment">//2. 根据指定主机名 获取 InetAddress对象</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">host1</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;LAPTOP-A2UEI881&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;host1=&quot;</span> + host1);<span class="hljs-comment">//DESKTOP-S4MP84S/192.168.12.1</span><br><br>        <span class="hljs-comment">//3. 根据域名返回 InetAddress对象, 比如 www.baidu.com 对应</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">host2</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;www.baidu.com&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;host2=&quot;</span> + host2);<span class="hljs-comment">//www.baidu.com/183.232.231.174</span><br><br>        <span class="hljs-comment">//4. 通过 InetAddress 对象，获取对应的地址</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">hostAddress</span> <span class="hljs-operator">=</span> host2.getHostAddress();<span class="hljs-comment">//IP 110.242.68.4</span><br>        System.out.println(<span class="hljs-string">&quot;host2 对应的ip = &quot;</span> + hostAddress);<span class="hljs-comment">//183.232.231.174</span><br><br>        <span class="hljs-comment">//5. 通过 InetAddress 对象，获取对应的主机名/或者的域名</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">hostName</span> <span class="hljs-operator">=</span> host2.getHostName();<br>        System.out.println(<span class="hljs-string">&quot;host2对应的主机名/域名=&quot;</span> + hostName); <span class="hljs-comment">// www.baidu.com</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h3><ul>
<li><p>套接字（Socket）开发网络应用程序被广泛采用，以至于成为事实上的标准。</p>
</li>
<li><p>通信的两端都要有 Socket，是两台机器间通信的端点</p>
</li>
<li><p>网络通信其实就是 Socket 间的通信</p>
</li>
<li><p>Socket 允许程序把网络连接当成一个流，数据在两个 Socket 间通过 IO 传输</p>
</li>
<li><p>一般主动发起通信的应用程序属客户端，等待通信请求的为服务端</p>
</li>
<li><p>Socket 有两种方式：TCP编程（可靠的）、UDP编程（不可靠的）</p>
</li>
<li><p>示意图：</p>
 <img src="image-20220921194523349.png" srcset="/img/loading.gif" lazyload alt="image-20220921194523349" style="zoom: 67%;" />

 <img src="image-20220921195106779.png" srcset="/img/loading.gif" lazyload alt="image-20220921195106779" style="zoom:56%;" /></li>
</ul>
<h3 id="TCP-网络通信编程"><a href="#TCP-网络通信编程" class="headerlink" title="TCP 网络通信编程"></a>TCP 网络通信编程</h3><h4 id="基本介绍-7"><a href="#基本介绍-7" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li>基于客户端一服务端的网络通信</li>
<li>底层使用的是TCP&#x2F;IP协议</li>
<li>应用场景举例：客户端发送数据，服务端接受并显示控制台</li>
<li>基于Socket的TCP编程</li>
</ul>
<h4 id="应用案例1"><a href="#应用案例1" class="headerlink" title="应用案例1"></a>应用案例1</h4><ol>
<li><p>编写一个服务器端，和一个客户端</p>
</li>
<li><p>服务器端在 9999端口监听</p>
</li>
<li><p>客户端连接到服务器端，发送 “hello，server”，然后退出</p>
</li>
<li><p>服务器端接收到客户端发送的信息，输出，并退出</p>
</li>
<li><p>过程示意图：</p>
 <img src="image-20220921202032716.png" srcset="/img/loading.gif" lazyload alt="image-20220921202032716" style="zoom:50%;" /></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 服务端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP01Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. new ServerSocket(9999);</span><br>        <span class="hljs-comment">//   在本机 的9999端口监听, 等待连接</span><br>        <span class="hljs-comment">//   细节：要求在本机没有其它服务在监听9999</span><br>        <span class="hljs-comment">//   补充：这个 ServerSocket 可以通过 .accept() 返回多个Socket[多个客户端连接服务器的并发]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;服务端，在9999端口监听，等待连接..&quot;</span>);<br>        <span class="hljs-comment">//2. .accept()</span><br>        <span class="hljs-comment">//   当没有客户端连接9999端口时，程序会 阻塞, 等待连接</span><br>        <span class="hljs-comment">//   如果有客户端连接，则会返回Socket对象，程序继续</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();  <span class="hljs-comment">//补充（见上一条补充）</span><br>        System.out.println(<span class="hljs-string">&quot;服务端 socket =&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//3. 通过socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IO读取</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<span class="hljs-comment">//根据读取到的实际长度，显示内容.</span><br>        &#125;<br>        <span class="hljs-comment">//5.关闭流和socket</span><br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//关闭</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 客户端，发送 &quot;hello, server&quot; 给服务端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP01Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 连接服务端 (ip , 端口）</span><br>        <span class="hljs-comment">//解读: 连接本机的 9999端口, 如果连接成功，返回Socket对象</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;客户端 socket返回=&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//2. 连接上后，生成Socket, 通过socket.getOutputStream()</span><br>        <span class="hljs-comment">//   得到 和 socket对象关联的输出流对象</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. 通过输出流，写入数据到 数据通道</span><br>        outputStream.write(<span class="hljs-string">&quot;hello, server&quot;</span>.getBytes());<br>        <span class="hljs-comment">//4. 关闭流对象和socket, 必须关闭</span><br>        outputStream.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;客户端退出.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="应用案例2"><a href="#应用案例2" class="headerlink" title="应用案例2"></a>应用案例2</h4><ol>
<li><p>编写一个服务端，和一个客户端  </p>
</li>
<li><p>服务器端在 9999 端口监听  </p>
</li>
<li><p>客户端连接到服务端，发送“hello,server”，并接收服务器端回发的 “hello,client”，再退出</p>
</li>
<li><p>服务器端接收到客户端发送的信息，输出，并发送 “hello,client”，再退出</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 服务端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP02Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 在本机 的9999端口监听, 等待连接</span><br>        <span class="hljs-comment">//   细节: 要求在本机没有其它服务在监听9999</span><br>        <span class="hljs-comment">//   细节：这个 ServerSocket 可以通过 accept() 返回多个Socket[多个客户端连接服务器的并发]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;服务端，在9999端口监听，等待连接..&quot;</span>);<br>        <span class="hljs-comment">//2. 当没有客户端连接9999端口时，程序会 阻塞, 等待连接</span><br>        <span class="hljs-comment">//   如果有客户端连接，则会返回Socket对象，程序继续</span><br><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        System.out.println(<span class="hljs-string">&quot;服务端 socket =&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//3. 通过socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IO读取</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<span class="hljs-comment">//根据读取到的实际长度，显示内容.</span><br>        &#125;<br>        <span class="hljs-comment">//5. 获取socket相关联的输出流</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        outputStream.write(<span class="hljs-string">&quot;hello, client&quot;</span>.getBytes());<br>        <span class="hljs-comment">//   设置写入结束标记</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-comment">//6.关闭流和socket</span><br>        outputStream.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//关闭</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 客户端，发送 &quot;hello, server&quot; 给服务端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP02Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 连接服务端 (ip , 端口）</span><br>        <span class="hljs-comment">//解读: 连接本机的 9999端口, 如果连接成功，返回Socket对象</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;客户端 socket返回=&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//2. 连接上后，生成Socket, 通过socket.getOutputStream()</span><br>        <span class="hljs-comment">//   得到 和 socket对象关联的输出流对象</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. 通过输出流，写入数据到 数据通道</span><br>        outputStream.write(<span class="hljs-string">&quot;hello, server&quot;</span>.getBytes());<br>        <span class="hljs-comment">//   设置写入结束标记</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-comment">//4. 获取和socket关联的输入流. 读取数据(字节)，并显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">readLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf, <span class="hljs-number">0</span>, readLen));<br>        &#125;<br><br>        <span class="hljs-comment">//5. 关闭流对象和socket, 必须关闭</span><br>        inputStream.close();<br>        outputStream.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;客户端退出.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="应用案例-3-使用字符流"><a href="#应用案例-3-使用字符流" class="headerlink" title="应用案例 3(使用字符流)"></a>应用案例 3(使用字符流)</h4><ol>
<li><p>编写一个服务端，和一个客户端</p>
</li>
<li><p>服务端在9999端口监听</p>
</li>
<li><p>客户端连接到服务端，发送”hello, server’”，并接收服务端回发的 “hello,client”，再退出  </p>
</li>
<li><p>服务端接收到客户端发送的信息，输出，并发送”hello, client”，再退出</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 服务端, 使用字符流方式读写</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP03Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 在本机 的9999端口监听, 等待连接</span><br>        <span class="hljs-comment">//   细节: 要求在本机没有其它服务在监听9999</span><br>        <span class="hljs-comment">//   细节：这个 ServerSocket 可以通过 accept() 返回多个Socket[多个客户端连接服务器的并发]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;服务端，在9999端口监听，等待连接..&quot;</span>);<br>        <span class="hljs-comment">//2. 当没有客户端连接9999端口时，程序会 阻塞, 等待连接</span><br>        <span class="hljs-comment">//   如果有客户端连接，则会返回Socket对象，程序继续</span><br><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        System.out.println(<span class="hljs-string">&quot;服务端 socket =&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-comment">//3. 通过socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IO读取, 使用字符流, 老师使用 InputStreamReader 将 inputStream 转成字符流</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine();<span class="hljs-comment">//使用readLine()读取</span><br>        System.out.println(s);<span class="hljs-comment">//输出</span><br><br>        <span class="hljs-comment">//5. 获取socket相关联的输出流</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>       <span class="hljs-comment">//    使用字符输出流的方式回复信息</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello client 字符流&quot;</span>);<br>        <span class="hljs-comment">//插入一个换行符，表示写入的内容结束, 注意，要求对方使用readLine()!!!!</span><br>        <span class="hljs-comment">//这样的话就不需要使用.shutdownOutput();标记结束 你妈的韩顺平！！！这里是错误的</span><br>        <span class="hljs-comment">//.shutdownOutput() 一定要加上 —— 血的教训</span><br>        bufferedWriter.newLine();<br>        bufferedWriter.flush();<span class="hljs-comment">//注意：如果使用的字符流，需要手动刷新，否则数据不会写入数据通道</span><br><br>        <span class="hljs-comment">//6.关闭流和socket</span><br>        <span class="hljs-comment">//一般来说 后开的流先关闭</span><br>        bufferedWriter.close();<br>        bufferedReader.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//关闭</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 客户端，发送 &quot;hello, server&quot; 给服务端， 使用字符流</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketTCP03Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 连接服务端 (ip , 端口）</span><br>        <span class="hljs-comment">//解读: 连接本机的 9999端口, 如果连接成功，返回Socket对象</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;客户端 socket返回=&quot;</span> + socket.getClass());<br>        <span class="hljs-comment">//2. 连接上后，生成Socket, 通过socket.getOutputStream()</span><br>        <span class="hljs-comment">//   得到 和 socket对象关联的输出流对象</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. 通过输出流，写入数据到 数据通道, 使用字符流</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br>        bufferedWriter.write(<span class="hljs-string">&quot;hello, server 字符流&quot;</span>);<br>        <span class="hljs-comment">//插入一个换行符，表示写入的内容结束, 注意，要求对方使用readLine()!!!!</span><br>        <span class="hljs-comment">//这样的话就不需要使用.shutdownOutput();标记结束</span><br>        bufferedWriter.newLine();<br>        bufferedWriter.flush();<span class="hljs-comment">// 如果使用的字符流，需要手动刷新，否则数据不会写入数据通道</span><br><br>        <span class="hljs-comment">//4. 获取和socket关联的输入流. 读取数据(字符)，并显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine(); <span class="hljs-comment">//使用readLine()读取</span><br>        System.out.println(s);<br><br>        <span class="hljs-comment">//5. 关闭流对象和socket, 必须关闭</span><br>        <span class="hljs-comment">//一般来说 后开的流先关闭</span><br>        bufferedReader.close();<span class="hljs-comment">//关闭外层流</span><br>        bufferedWriter.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;客户端退出.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="应用案例-4（文件）"><a href="#应用案例-4（文件）" class="headerlink" title="应用案例 4（文件）"></a>应用案例 4（文件）</h4><ol>
<li><p>编写一个服务端和一个客户端  </p>
</li>
<li><p>服务器端在8888端口监听  </p>
</li>
<li><p>客户端连接到服务端，发送一张图片 e:\\qie.png  </p>
</li>
<li><p>服务器端接收到客户端发送的图片，保存到src下，发送”收到图片”再退出  </p>
</li>
<li><p>客户端接收到服务端发送的 “收到图片”，再退出  </p>
</li>
<li><p>该程序要求使用 StreamUtils.java（已经准备好了，直接使用）</p>
</li>
<li><p>过程示意图：</p>
 <img src="image-20220921235649357.png" srcset="/img/loading.gif" lazyload alt="image-20220921235649357" style="zoom: 67%;" /></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 文件上传的服务端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TCPFileUploadServer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//1. 服务端在本机监听8888端口</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">8888</span>);<br>        System.out.println(<span class="hljs-string">&quot;服务端在8888端口监听....&quot;</span>);<br>        <span class="hljs-comment">//2. 等待连接</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        <span class="hljs-comment">//3. 读取客户端发送的数据</span><br>        <span class="hljs-comment">//   通过Socket得到输入流</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(socket.getInputStream());<br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br>        <span class="hljs-comment">//4. 将得到 bytes 数组，写入到指定的路径，就得到一个文件了</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">destFilePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;chapter21\\src\\qie2.png&quot;</span>;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(destFilePath));<br>        bos.write(bytes);<br>        bos.close();<br><br>        <span class="hljs-comment">// 向客户端回复 &quot;收到图片&quot;</span><br>        <span class="hljs-comment">// 通过socket 获取到输出流(字符)</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(socket.getOutputStream()));<br>        writer.write(<span class="hljs-string">&quot;收到图片&quot;</span>);<br>        writer.flush();<span class="hljs-comment">//使用Writer需要手动把内容刷新到数据通道</span><br>        socket.shutdownOutput();<span class="hljs-comment">//设置写入结束标记</span><br><br>        <span class="hljs-comment">//关闭其他资源</span><br>        writer.close();<br>        bis.close();<br>        socket.close();<br>        serverSocket.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 文件上传的客户端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TCPFileUploadClient</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//客户端连接服务端 8888，得到Socket对象</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">8888</span>);<br>        <span class="hljs-comment">//创建读取磁盘文件的输入流</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;d:\\qie.png&quot;</span>;<br><span class="hljs-comment">//        String filePath = &quot;d:\\abc.mp4&quot;;</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath));<br><br>        <span class="hljs-comment">//bytes 就是filePath对应的字节数组</span><br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br><br>        <span class="hljs-comment">//通过socket获取到输出流, 将bytes数据发送给服务端</span><br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(socket.getOutputStream());<br>        bos.write(bytes);<span class="hljs-comment">//将文件对应的字节数组的内容，写入到数据通道</span><br>        bis.close();<br>        socket.shutdownOutput();<span class="hljs-comment">//设置写入数据的结束标记</span><br><br>        <span class="hljs-comment">//=====接收从服务端回复的消息=====//</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//使用StreamUtils 的方法，直接将 inputStream 读取到的内容 转成字符串</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> StreamUtils.streamToString(inputStream);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//关闭相关的流</span><br>        inputStream.close();<br>        bos.close();<br>        socket.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//一个关于 流的转换 的工具类</span><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.ByteArrayOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 此类用于演示关于流的读写方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamUtils</span> &#123;<br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * 功能：将输入流转换成byte[]</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] streamToByteArray(InputStream is) <span class="hljs-keyword">throws</span> Exception&#123;<br>		<span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<span class="hljs-comment">//创建输出流对象</span><br>		<span class="hljs-type">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<span class="hljs-comment">//字节数组</span><br>		<span class="hljs-type">int</span> len;<br>		<span class="hljs-keyword">while</span>((len=is.read(b))!=-<span class="hljs-number">1</span>)&#123;<span class="hljs-comment">//循环读取</span><br>			bos.write(b, <span class="hljs-number">0</span>, len);	<span class="hljs-comment">//把读取到的数据写入bos</span><br>		&#125;<br>		<span class="hljs-type">byte</span>[] array = bos.toByteArray(); <span class="hljs-comment">//将bos转换成字节数组</span><br>		bos.close();<br>		<span class="hljs-keyword">return</span> array;<br>	&#125;<br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * 功能：将InputStream转换成String</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">streamToString</span><span class="hljs-params">(InputStream is)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>		<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is));<br>		StringBuilder builder= <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>		String line;<br>		<span class="hljs-keyword">while</span>((line=reader.readLine())!=<span class="hljs-literal">null</span>)&#123; <span class="hljs-comment">//当读取到 null时，就表示结束</span><br>			builder.append(line+<span class="hljs-string">&quot;\r\n&quot;</span>);<br>		&#125;<br>		<span class="hljs-keyword">return</span> builder.toString();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="netstat-指令"><a href="#netstat-指令" class="headerlink" title="netstat 指令"></a>netstat 指令</h4><p>1.netstat -an 可以查看当前主机网络情况，包括端口监听情况和网络连接情况</p>
<p>2.netstat -an| more 可以分页显示</p>
<p>3.要求在 dos 控制台下执行（win+r）</p>
<p>说明：</p>
<ul>
<li><p>本地地址：IP地址 + 端口号</p>
</li>
<li><p>外部地址：有没有外部的连接连到本机，显示的是 外部端（客户端）的 IP地址 + 端口号</p>
</li>
<li><p>Listening 表示某个端口在监听</p>
</li>
<li><p>如果有一个外部程序（客户端）连接到该端口，就会显示一条连接信息。</p>
</li>
<li><p>可以输入 ctrl+c 退出指令</p>
</li>
</ul>
<p>示意图：</p>
<p>​	<img src="image-20220922121512178.png" srcset="/img/loading.gif" lazyload alt="image-20220922121512178" style="zoom:67%;" /></p>
<h4 id="TCP-的相关补充"><a href="#TCP-的相关补充" class="headerlink" title="TCP 的相关补充"></a>TCP 的相关补充</h4><p>当客户端连接到服务端后，实际上客户端也是通过一个端口和服务端进行通讯的</p>
<p>这个端口是由 TCP&#x2F;IP 来分配的，是不确定的，是随机的。</p>
 <img src="image-20220922123249795.png" srcset="/img/loading.gif" lazyload alt="image-20220922123249795" style="zoom: 50%;" />





<h3 id="UDP-网络通信编程-了解"><a href="#UDP-网络通信编程-了解" class="headerlink" title="UDP 网络通信编程[了解]"></a>UDP 网络通信编程[了解]</h3><h4 id="基本介绍-8"><a href="#基本介绍-8" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li><p>类 DatagramSocket 和 DatagramPacket（数据包&#x2F;数据报）实现了基于UDP协议网络程序。    </p>
</li>
<li><p>UDP 数据包 通过 数据包套接字 DatagramSocket 发送和接收，系统不保证 UDP 数据包一定能够安全送到目的地，也不能确定什么时候可以抵达。</p>
</li>
<li><p>DatagramPacket对象 封装了 UDP数据包，在数据报中包含了 发送端 的 lP地址 和 端口号 以及 接收端 的 IP地址和 端口号。</p>
</li>
<li><p>UDP协议中 每个数据包都给出了完整的地址信息，因此无须建立发送方和接收方的连接</p>
</li>
</ul>
<h4 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h4><ol>
<li><p>核心的两个 类&#x2F;对象 DatagramSocket与DatagramPacket </p>
</li>
<li><p>建立发送端，接收端（没有服务端和客户端的概念）（发送端与接收端的身份会随时改变）</p>
</li>
<li><p>发送数据前，建立 数据包&#x2F;报 DatagramPacket对象  </p>
</li>
<li><p>调用 DatagramSocket 的发送、接收方法（接收和发送数据是通过 DatagramSocket 对象完成）</p>
</li>
<li><p>关闭 DatagramSocket</p>
 <img src="image-20220922144417511.png" srcset="/img/loading.gif" lazyload alt="image-20220922144417511" style="zoom:58%;" /></li>
</ol>
<h4 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h4><ol>
<li><p>编写一个接收端A和一个发送端B  </p>
</li>
<li><p>接收端A在9999端口等待接收数据(receive)  </p>
</li>
<li><p>发送端B向接收端A发送数据”hello,明天吃火锅~”  </p>
</li>
<li><p>接收端A接收到发送端B发送的数据，回复“好的，明天见”，再退出  </p>
</li>
<li><p>发送端接收回复的数据，再退出</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * UDP接收端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.DatagramPacket;<br><span class="hljs-keyword">import</span> java.net.DatagramSocket;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.SocketException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UDPReceiverA</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1. 创建一个 DatagramSocket 对象，准备在9999端口接收数据</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">9999</span>);<br>        <span class="hljs-comment">//2. 构建一个 DatagramPacket 对象，准备接收数据</span><br>        <span class="hljs-comment">//   在UDP协议中，数据包最大为64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//3. 调用 接收方法, 将通过网络传输的 DatagramPacket 对象</span><br>        <span class="hljs-comment">//   填充到 packet对象</span><br>        <span class="hljs-comment">//提示: 当有数据包发送到 本机的9999端口时，就会接收到数据</span><br>        <span class="hljs-comment">//   如果没有数据包发送到 本机的9999端口, 就会阻塞等待.</span><br>        System.out.println(<span class="hljs-string">&quot;接收端A 等待接收数据..&quot;</span>);<br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//4. 可以把packet 进行拆包，取出数据，并显示.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//实际接收到的数据字节长度</span><br>        <span class="hljs-type">byte</span>[] data = packet.getData();<span class="hljs-comment">//接收到数据</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//===回复信息给B端</span><br>        <span class="hljs-comment">//将需要发送的数据，封装到 DatagramPacket对象</span><br>        data = <span class="hljs-string">&quot;好的, 明天见&quot;</span>.getBytes();<br>		<span class="hljs-comment">//说明: 封装的DatagramPacket对象 data 内容字节数组, data.length, 目标主机(IP), 目标端口</span><br>        packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.228.1&quot;</span>), <span class="hljs-number">9998</span>);<br><br>        socket.send(packet);<span class="hljs-comment">//发送</span><br><br>        <span class="hljs-comment">//5. 关闭资源</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;A端退出...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 发送端B（也可以接收数据）</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.*;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UDPSenderB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//1.创建 DatagramSocket 对象，准备在9998端口接收数据</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">9998</span>);<br><br>        <span class="hljs-comment">//2. 将需要发送的数据，封装到 DatagramPacket对象</span><br>        <span class="hljs-type">byte</span>[] data = <span class="hljs-string">&quot;hello 明天吃火锅~&quot;</span>.getBytes(); <span class="hljs-comment">//</span><br><br>		<span class="hljs-comment">//说明: 封装的DatagramPacket对象 data 内容字节数组, data.length, 目标主机(IP), 目标端口</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.228.1&quot;</span>), <span class="hljs-number">9999</span>);<br><br>        socket.send(packet);<br><br>        <span class="hljs-comment">//3.=== 接收从A端回复的信息</span><br>        <span class="hljs-comment">//(1)   构建一个 DatagramPacket 对象，准备接收数据</span><br>        <span class="hljs-comment">//   在前面讲解UDP 协议时，老师说过一个数据包最大 64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//(2)    调用 接收方法, 将通过网络传输的 DatagramPacket 对象</span><br>        <span class="hljs-comment">//   填充到 packet对象</span><br>        <span class="hljs-comment">//老师提示: 当有数据包发送到 本机的9998端口时，就会接收到数据</span><br>        <span class="hljs-comment">//   如果没有数据包发送到 本机的9998端口, 就会阻塞等待.</span><br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//(3)  可以把packet 进行拆包，取出数据，并显示.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//实际接收到的数据字节长度</span><br>        data = packet.getData();<span class="hljs-comment">//接收到数据</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//关闭资源</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;B端退出&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>





<h3 id="课后练习"><a href="#课后练习" class="headerlink" title="课后练习"></a>课后练习</h3> <img src="image-20220922153658489.png" srcset="/img/loading.gif" lazyload alt="image-20220922153658489" style="zoom:50%;" />



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 服务端, 使用字符流方式读写</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 在本机 的9999端口监听, 等待连接</span><br>        <span class="hljs-comment">//   细节: 要求在本机没有其它服务在监听9999</span><br>        <span class="hljs-comment">//   细节：这个 ServerSocket 可以通过 accept() 返回多个Socket[多个客户端连接服务器的并发]</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        System.out.println(<span class="hljs-string">&quot;服务端，在9999端口监听，等待连接..&quot;</span>);<br>        <span class="hljs-comment">//2. 当没有客户端连接9999端口时，程序会 阻塞, 等待连接</span><br>        <span class="hljs-comment">//   如果有客户端连接，则会返回Socket对象，程序继续</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br><br>        <span class="hljs-comment">//3. 通过socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-comment">//4. IO读取, 使用字符流, 老师使用 InputStreamReader 将 inputStream 转成字符流</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;name&quot;</span>.equals(s)) &#123;<br>            answer = <span class="hljs-string">&quot;我是韩顺平&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;hobby&quot;</span>.equals(s)) &#123;<br>            answer = <span class="hljs-string">&quot;编写java程序&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            answer = <span class="hljs-string">&quot;你说的啥子&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//5. 获取socket相关联的输出流</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//    使用字符输出流的方式回复信息</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br>        bufferedWriter.write(answer);<br>        bufferedWriter.newLine();<span class="hljs-comment">// 插入一个换行符，表示回复内容的结束</span><br>        bufferedWriter.flush();<span class="hljs-comment">//注意需要手动的flush</span><br><br>        <span class="hljs-comment">//6.关闭流和socket</span><br>        bufferedWriter.close();<br>        bufferedReader.close();<br>        socket.close();<br>        serverSocket.close();<span class="hljs-comment">//关闭</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 客户端，发送 &quot;hello, server&quot; 给服务端， 使用字符流</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//思路</span><br>        <span class="hljs-comment">//1. 连接服务端 (ip , 端口）</span><br>        <span class="hljs-comment">//解读: 连接本机的 9999端口, 如果连接成功，返回Socket对象</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br><br>        <span class="hljs-comment">//2. 连接上后，生成Socket, 通过socket.getOutputStream()</span><br>        <span class="hljs-comment">//   得到 和 socket对象关联的输出流对象</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-comment">//3. 通过输出流，写入数据到 数据通道, 使用字符流</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bufferedWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(outputStream));<br><br>        <span class="hljs-comment">//从键盘读取用户的问题</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;请输入你的问题&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">question</span> <span class="hljs-operator">=</span> scanner.next();<br><br>        bufferedWriter.write(question);<br>        bufferedWriter.newLine();<span class="hljs-comment">//插入一个换行符，表示写入的内容结束, 注意，要求对方使用readLine()!!!!</span><br>        bufferedWriter.flush();<span class="hljs-comment">// 如果使用的字符流，需要手动刷新，否则数据不会写入数据通道</span><br><br>        <span class="hljs-comment">//4. 获取和socket关联的输入流. 读取数据(字符)，并显示</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> bufferedReader.readLine();<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//5. 关闭流对象和socket, 必须关闭</span><br>        bufferedReader.close();<span class="hljs-comment">//关闭外层流</span><br>        bufferedWriter.close();<br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;客户端退出.....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



 <img src="image-20220922153711315.png" srcset="/img/loading.gif" lazyload alt="image-20220922153711315" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * UDP接收端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.DatagramPacket;<br><span class="hljs-keyword">import</span> java.net.DatagramSocket;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02ReceiverA</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1. 创建一个 DatagramSocket 对象，准备在8888接收数据</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">8888</span>);<br>        <span class="hljs-comment">//2. 构建一个 DatagramPacket 对象，准备接收数据</span><br>        <span class="hljs-comment">//   在前面讲解UDP 协议时，老师说过一个数据包最大 64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//3. 调用 接收方法, 将通过网络传输的 DatagramPacket 对象</span><br>        <span class="hljs-comment">//   填充到 packet对象</span><br>        System.out.println(<span class="hljs-string">&quot;接收端 等待接收问题 &quot;</span>);<br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//4. 可以把 packet 进行拆包，取出数据，并显示.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//实际接收到的数据字节长度</span><br>        <span class="hljs-type">byte</span>[] data = packet.getData();<span class="hljs-comment">//接收到数据</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        <span class="hljs-comment">//判断接收到的信息是什么</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;四大名著是哪些&quot;</span>.equals(s)) &#123;<br>            answer = <span class="hljs-string">&quot;四大名著 &lt;&lt;红楼梦&gt;&gt; &lt;&lt;三国演示&gt;&gt; &lt;&lt;西游记&gt;&gt; &lt;&lt;水浒传&gt;&gt;&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            answer = <span class="hljs-string">&quot;what?&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//===回复信息给B端</span><br>        <span class="hljs-comment">//将需要发送的数据，封装到 DatagramPacket对象</span><br>        data = answer.getBytes();<br>        <span class="hljs-comment">//说明: 封装的 DatagramPacket对象 data 内容字节数组 , data.length , 主机(IP) , 端口</span><br>        packet =<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.12.1&quot;</span>), <span class="hljs-number">9998</span>);<br><br>        socket.send(packet);<span class="hljs-comment">//发送</span><br><br>        <span class="hljs-comment">//5. 关闭资源</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;A端退出...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 发送端B ====&gt; 也可以接收数据</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.DatagramPacket;<br><span class="hljs-keyword">import</span> java.net.DatagramSocket;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02SenderB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//1.创建 DatagramSocket 对象，准备在9998端口 接收数据</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">9998</span>);<br><br>        <span class="hljs-comment">//2. 将需要发送的数据，封装到 DatagramPacket对象</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;请输入你的问题: &quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">question</span> <span class="hljs-operator">=</span> scanner.next();<br>        <span class="hljs-type">byte</span>[] data = question.getBytes(); <span class="hljs-comment">//</span><br><br>        <span class="hljs-comment">//说明: 封装的 DatagramPacket对象 data 内容字节数组 , data.length , 主机(IP) , 端口</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">packet</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(data, data.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.12.1&quot;</span>), <span class="hljs-number">8888</span>);<br><br>        socket.send(packet);<br><br>        <span class="hljs-comment">//3.=== 接收从A端回复的信息</span><br>        <span class="hljs-comment">//(1)   构建一个 DatagramPacket 对象，准备接收数据</span><br>        <span class="hljs-comment">//   在前面讲解UDP 协议时，老师说过一个数据包最大 64k</span><br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(buf, buf.length);<br>        <span class="hljs-comment">//(2)    调用 接收方法, 将通过网络传输的 DatagramPacket 对象</span><br>        <span class="hljs-comment">//   填充到 packet对象</span><br>        <span class="hljs-comment">//老师提示: 当有数据包发送到 本机的9998端口时，就会接收到数据</span><br>        <span class="hljs-comment">//   如果没有数据包发送到 本机的9998端口, 就会阻塞等待.</span><br>        socket.receive(packet);<br><br>        <span class="hljs-comment">//(3)  可以把packet 进行拆包，取出数据，并显示.</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> packet.getLength();<span class="hljs-comment">//实际接收到的数据字节长度</span><br>        data = packet.getData();<span class="hljs-comment">//接收到数据</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data, <span class="hljs-number">0</span>, length);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//关闭资源</span><br>        socket.close();<br>        System.out.println(<span class="hljs-string">&quot;B端退出&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



 <img src="image-20220922153817732.png" srcset="/img/loading.gif" lazyload alt="image-20220922153817732" style="zoom:50%;" />

 <img src="image-20220922162428406.png" srcset="/img/loading.gif" lazyload alt="image-20220922162428406" style="zoom: 65%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 先写文件下载的服务端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//1 监听 9999端口</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">9999</span>);<br>        <span class="hljs-comment">//2.等待客户端连接</span><br>        System.out.println(<span class="hljs-string">&quot;服务端，在9999端口监听，等待下载文件&quot;</span>);<br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br>        <span class="hljs-comment">//3.读取 客户端发送要下载的文件名</span><br>        <span class="hljs-comment">//  这里老师使用了while读取文件名，是考虑将来客户端发送的数据较大的情况</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> socket.getInputStream();<br>        <span class="hljs-type">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">downLoadFileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span> ((len = inputStream.read(b)) != -<span class="hljs-number">1</span>) &#123;<br>            downLoadFileName += <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(b, <span class="hljs-number">0</span> , len);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;客户端希望下载文件名=&quot;</span> + downLoadFileName);<br><br>        <span class="hljs-comment">//老师在服务器上有两个文件, 无名.mp3 高山流水.mp3</span><br>        <span class="hljs-comment">//如果客户下载的是 高山流水 我们就返回该文件，否则一律返回 无名.mp3</span><br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">resFileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;高山流水&quot;</span>.equals(downLoadFileName)) &#123;<br>            resFileName = <span class="hljs-string">&quot;src\\高山流水.mp3&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            resFileName = <span class="hljs-string">&quot;src\\无名.mp3&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//4. 创建一个输入流，读取文件</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(resFileName));<br><br>        <span class="hljs-comment">//5. 使用工具类StreamUtils，读取文件到一个字节数组</span><br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br>        <span class="hljs-comment">//6. 得到Socket关联的输出流</span><br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(socket.getOutputStream());<br>        <span class="hljs-comment">//7. 写入到数据通道，返回给客户端</span><br>        bos.write(bytes);<br>        socket.shutdownOutput();<span class="hljs-comment">//很关键.</span><br><br>        <span class="hljs-comment">//8 关闭相关的资源</span><br>        bis.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<br>        System.out.println(<span class="hljs-string">&quot;服务端退出...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 文件下载的客户端</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//1. 接收用户输入，指定下载文件名</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;请输入下载文件名&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">downloadFileName</span> <span class="hljs-operator">=</span> scanner.next();<br><br>        <span class="hljs-comment">//2. 客户端连接服务端，准备发送</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getLocalHost(), <span class="hljs-number">9999</span>);<br>        <span class="hljs-comment">//3. 获取和Socket关联的输出流</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        outputStream.write(downloadFileName.getBytes());<br>        <span class="hljs-comment">//设置写入结束的标志</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-comment">//4. 读取服务端返回的文件(字节数据)</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(socket.getInputStream());<br>        <span class="hljs-type">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);<br>        <span class="hljs-comment">//5. 得到一个输出流，准备将 bytes 写入到磁盘文件</span><br>        <span class="hljs-comment">//比如你下载的是 高山流水 =&gt; 下载的就是 高山流水.mp3</span><br>        <span class="hljs-comment">//    你下载的是 韩顺平 =&gt; 下载的就是 无名.mp3  文件名 韩顺平.mp3</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\&quot;</span> + downloadFileName + <span class="hljs-string">&quot;.mp3&quot;</span>;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(filePath));<br>        bos.write(bytes);<br><br>        <span class="hljs-comment">//6. 关闭相关的资源</span><br>        bos.close();<br>        bis.close();<br>        outputStream.close();<br>        socket.close();<br><br>        System.out.println(<span class="hljs-string">&quot;客户端下载完毕，正确退出..&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.ByteArrayOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 此类用于演示关于流的读写方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamUtils</span> &#123;<br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * 功能：将输入流转换成byte[]</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] streamToByteArray(InputStream is) <span class="hljs-keyword">throws</span> Exception&#123;<br>		<span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<span class="hljs-comment">//创建输出流对象</span><br>		<span class="hljs-type">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>		<span class="hljs-type">int</span> len;<br>		<span class="hljs-keyword">while</span>((len=is.read(b))!=-<span class="hljs-number">1</span>)&#123;<br>			bos.write(b, <span class="hljs-number">0</span>, len);	<br>		&#125;<br>		<span class="hljs-type">byte</span>[] array = bos.toByteArray();<br>		bos.close();<br>		<span class="hljs-keyword">return</span> array;<br>	&#125;<br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * 功能：将InputStream转换成String</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@param</span> is</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">streamToString</span><span class="hljs-params">(InputStream is)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>		<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is));<br>		StringBuilder builder= <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>		String line;<br>		<span class="hljs-keyword">while</span>((line=reader.readLine())!=<span class="hljs-literal">null</span>)&#123;<br>			builder.append(line+<span class="hljs-string">&quot;\r\n&quot;</span>);<br>		&#125;<br>		<span class="hljs-keyword">return</span> builder.toString();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>







<h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><h3 id="反射机制"><a href="#反射机制" class="headerlink" title="反射机制"></a>反射机制</h3><h4 id="基本介绍-9"><a href="#基本介绍-9" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li><p>反射机制允许程序在执行期借助于 Reflection API 取得任何类的内部信息（比如成员变量，构造器，成员方法等等），并能操作对象的属性及方法。反射在设计模式和框架底层都会用到</p>
</li>
<li><p>加载完类之后，在堆中就产生了一个 Class 类型的对象（一个类只有一个 Class 对象），这个对象包含了类的完整结构信息。通过这个对象得到类的结构。</p>
<p>这个 Class 对象就像一面镜子，透过这个镜子看到类的结构，所以形象地称之为：反射</p>
</li>
<li><p>普通：p 对象  –&gt;  类型 Person类</p>
</li>
<li><p>反射：Class 对象  cls  —&gt;  类型 Class类</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 反射问题的引入</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Cat;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflectionQuestion</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException, NoSuchFieldException &#123;<br>        <span class="hljs-comment">//根据配置文件 re.properties 指定信息, 创建Cat对象并调用方法hi</span><br>        <span class="hljs-comment">//回忆</span><br>        <span class="hljs-comment">//传统的方式 new 对象 -》 调用方法</span><br><span class="hljs-comment">//        Cat cat = new Cat();</span><br><span class="hljs-comment">//        cat.hi(); ===&gt; cat.cry() 修改源码.</span><br><br>        <span class="hljs-comment">//我们尝试做一做 -&gt; 明白反射</span><br>        <span class="hljs-comment">//1. 使用Properties 类, 可以读写配置文件</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\re.properties&quot;</span>));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">classfullpath</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;classfullpath&quot;</span>).toString();<span class="hljs-comment">//&quot;com.hspedu.Cat&quot;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;method&quot;</span>).toString();<span class="hljs-comment">//&quot;hi&quot;</span><br>        System.out.println(<span class="hljs-string">&quot;classfullpath=&quot;</span> + classfullpath);<br>        System.out.println(<span class="hljs-string">&quot;method=&quot;</span> + methodName);<br><br>        <span class="hljs-comment">//2. 创建对象 , 传统的方法，行不通 =》 反射机制</span><br>        <span class="hljs-comment">//new classfullpath();</span><br><br>        <span class="hljs-comment">//3. 使用反射机制解决</span><br>        <span class="hljs-comment">//(1) 加载类, 返回Class类型的对象cls</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(classfullpath);<br>        <span class="hljs-comment">//(2) 通过 cls 得到你加载的类 com.hspedu.Cat 的对象实例</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        System.out.println(<span class="hljs-string">&quot;o的运行类型=&quot;</span> + o.getClass()); <span class="hljs-comment">//运行类型</span><br>        <span class="hljs-comment">//(3) 通过 cls 得到你加载的类 com.hspedu.Cat 的 methodName&quot;hi&quot;  的方法对象</span><br>        <span class="hljs-comment">//    即：在反射中，可以把方法视为对象（万物皆对象）</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method1</span> <span class="hljs-operator">=</span> cls.getMethod(methodName);<br>        <span class="hljs-comment">//(4) 通过method1 调用方法: 即通过方法对象来实现调用方法</span><br>        System.out.println(<span class="hljs-string">&quot;=============================&quot;</span>);<br>        method1.invoke(o); <span class="hljs-comment">//传统方法 对象.方法() , 反射机制 方法.invoke(对象)</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="反射机制原理示意图"><a href="#反射机制原理示意图" class="headerlink" title="反射机制原理示意图"></a>反射机制原理示意图</h4> <img src="image-20220924103955134.png" srcset="/img/loading.gif" lazyload alt="image-20220924103955134" style="zoom:54%;" />



<h4 id="反射机制可以完成的事"><a href="#反射机制可以完成的事" class="headerlink" title="反射机制可以完成的事"></a>反射机制可以完成的事</h4><ul>
<li>在运行时判断任意一个对象所属的类</li>
<li>在运行时构造任意一个类的对象</li>
<li>在运行时得到任意一个类所具有的成员变量和方法</li>
<li>在运行时调用任意一个对象的成员变量和方法</li>
<li>生成动态代理</li>
</ul>
<h4 id="反射相关的主要类"><a href="#反射相关的主要类" class="headerlink" title="反射相关的主要类"></a>反射相关的主要类</h4><ul>
<li>java.lang.Class：代表一个类，Class对象 表示某个类加载后在堆中的对象</li>
<li>java.lang.reflect.Method：代表类的方法，Method对象 表示某个类的方法</li>
<li>java.lang.reflect.Field：代表类的成员变量，Field对象表示某个类的成员变量</li>
<li>java.lang.reflect.Constructor：代表类的构造方法，Constructor对象表示构造器</li>
<li>这些类在 包 java.lang.reflect 中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reflection01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//1. 使用Properties 类, 可以读写配置文件</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\re.properties&quot;</span>));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">classfullpath</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;classfullpath&quot;</span>).toString();<span class="hljs-comment">//&quot;com.hspedu.Cat&quot;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> properties.get(<span class="hljs-string">&quot;method&quot;</span>).toString();<span class="hljs-comment">//&quot;hi&quot;</span><br><br>        <span class="hljs-comment">//2. 使用反射机制解决</span><br>        <span class="hljs-comment">//(1) 加载类, 返回Class类型的对象cls</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(classfullpath);<br>        <span class="hljs-comment">//(2) 通过 cls 得到你加载的类 com.hspedu.Cat 的对象实例</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        System.out.println(<span class="hljs-string">&quot;o的运行类型=&quot;</span> + o.getClass()); <span class="hljs-comment">//运行类型</span><br>        <span class="hljs-comment">//(3) 通过 cls 得到你加载的类 com.hspedu.Cat 的 methodName&quot;hi&quot;  的方法对象</span><br>        <span class="hljs-comment">//    即：在反射中，可以把方法视为对象（万物皆对象）</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method1</span> <span class="hljs-operator">=</span> cls.getMethod(methodName);<br>        <span class="hljs-comment">//(4) 通过method1 调用方法: 即通过方法对象来实现调用方法</span><br>        System.out.println(<span class="hljs-string">&quot;=============================&quot;</span>);<br>        method1.invoke(o); <span class="hljs-comment">//传统方法 对象.方法() , 反射机制 方法.invoke(对象)</span><br><br>        <span class="hljs-comment">//java.lang.reflect.Field: 代表类的成员变量, Field对象表示某个类的成员变量</span><br>        <span class="hljs-comment">//得到name字段</span><br>        <span class="hljs-comment">//注意：getField不能得到私有的属性</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">nameField</span> <span class="hljs-operator">=</span> cls.getField(<span class="hljs-string">&quot;age&quot;</span>); <span class="hljs-comment">//</span><br>        <span class="hljs-comment">// 传统写法：对象.成员变量 ； 反射：成员变量对象.get(对象)</span><br>        System.out.println(nameField.get(o));<br><br>        <span class="hljs-comment">//java.lang.reflect.Constructor: 代表类的构造方法, Constructor对象表示构造器</span><br>        <span class="hljs-comment">//在()中可以指定构造器参数类型, 下面返回的是无参构造器</span><br>        <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor</span> <span class="hljs-operator">=</span> cls.getConstructor();<br>        System.out.println(constructor);<span class="hljs-comment">//Cat()</span><br>        <span class="hljs-comment">//下面返回的是带有参数(String name)的构造器</span><br>        <span class="hljs-comment">//这里传入的 String.class 就是String类的Class对象</span><br>        <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor2</span> <span class="hljs-operator">=</span> cls.getConstructor(String.class);<br>        System.out.println(constructor2);<span class="hljs-comment">//Cat(String name)</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="反射优点和缺点"><a href="#反射优点和缺点" class="headerlink" title="反射优点和缺点"></a>反射优点和缺点</h4><ul>
<li>优点：可以动态的创建和使用对象（框架底层核心），使用灵活，没有反射机制，框架技术就失去底层支撑</li>
<li>缺点：使用反射基本是解释执行，对执行速度有影响</li>
</ul>
<h4 id="反射调用优化-关闭访问检查"><a href="#反射调用优化-关闭访问检查" class="headerlink" title="反射调用优化 - 关闭访问检查"></a>反射调用优化 - 关闭访问检查</h4><ul>
<li><p>Method 和 Field、Constructor对象都有 setAccessible() 方法</p>
</li>
<li><p>setAccessible 作用是启动和启动和禁用访问安全检查的开关</p>
</li>
<li><p>参数值为 true 表示 反射的对象在使用时去校访问检查，提高反射的效率。</p>
<p>参数值为 false 表示 反射的对象执行访问检查</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 测试反射调用的性能，和优化方案</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Cat;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reflection02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123;<br>        <span class="hljs-comment">//Field</span><br>        <span class="hljs-comment">//Method</span><br>        <span class="hljs-comment">//Constructor</span><br>        m1();<br>        m2();<br>        m3();<br>    &#125;<br><br>    <span class="hljs-comment">//传统方法来调用hi</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">900000000</span>; i++) &#123;<br>            cat.hi();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;m1() 耗时=&quot;</span> + (end - start));<br>    &#125;<br><br>    <span class="hljs-comment">//反射机制调用方法hi</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;<br><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">hi</span> <span class="hljs-operator">=</span> cls.getMethod(<span class="hljs-string">&quot;hi&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">900000000</span>; i++) &#123;<br>            hi.invoke(o);<span class="hljs-comment">//反射调用方法</span><br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;m2() 耗时=&quot;</span> + (end - start));<br>    &#125;<br><br>    <span class="hljs-comment">//反射调用优化 + 关闭访问检查</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;<br>        <br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> cls.newInstance();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">hi</span> <span class="hljs-operator">=</span> cls.getMethod(<span class="hljs-string">&quot;hi&quot;</span>);<br>        hi.setAccessible(<span class="hljs-literal">true</span>);<span class="hljs-comment">//在反射调用方法时，取消访问检查</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">900000000</span>; i++) &#123;<br>            hi.invoke(o);<span class="hljs-comment">//反射调用方法</span><br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;m3() 耗时=&quot;</span> + (end - start));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Class-类"><a href="#Class-类" class="headerlink" title="Class 类"></a>Class 类</h3><h4 id="基本介绍-10"><a href="#基本介绍-10" class="headerlink" title="基本介绍"></a>基本介绍</h4> <img src="image-20220924091230962.png" srcset="/img/loading.gif" lazyload alt="image-20220924091230962" style="zoom:46%;" />

<ul>
<li>Class 也是类，因此也继承 Object 类</li>
<li>Class 类对象不是 new 出来的，而是系统创建的</li>
<li>对于某个类的 Class 类对象，在内存中只能有一份，因为类只加载一次</li>
<li>每个类的实例都会记得自己是由哪个 Class 实例所生产的</li>
<li>通过 Class 对象可以得到一个类的完整结构，通过一系列 API</li>
<li>Class 对象是存放在堆中的</li>
<li>类的字节码二进制数据，是存放在方法区的，有的地方称为类的元数据（包括 方法代码、变量名、方法名、访问权限等等）[<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/38496907]">https://www.zhihu.com/question/38496907]</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 对Class类特点的梳理</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Cat;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Class01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;<br>        <span class="hljs-comment">//看看Class类图</span><br>        <span class="hljs-comment">//1. Class也是类，因此也继承Object类</span><br>        <span class="hljs-comment">//Class</span><br>        <span class="hljs-comment">//2. Class类对象不是new出来的，而是系统创建的</span><br>        <span class="hljs-comment">//(1) 传统new对象</span><br>        <span class="hljs-comment">/*  ClassLoader类</span><br><span class="hljs-comment">            public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123;</span><br><span class="hljs-comment">                return loadClass(name, false);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br><span class="hljs-comment">//        Cat cat = new Cat();</span><br>        <span class="hljs-comment">//(2) 反射方式, 刚才没有debug到 ClassLoader类的 loadClass,</span><br>        <span class="hljs-comment">//    原因是，没有注销Cat cat = new Cat();</span><br>        <span class="hljs-comment">//    而类只会加载一次</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            ClassLoader类, 仍然是通过 ClassLoader类加载Cat类的 Class对象</span><br><span class="hljs-comment">            public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123;</span><br><span class="hljs-comment">                return loadClass(name, false);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls1</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br><br>        <span class="hljs-comment">//3. 对于某个类的Class类对象，在内存中只有一份，因为类只加载一次</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls2</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Cat&quot;</span>);<br>        <span class="hljs-comment">// cls1 与 cls2 是同一个对象</span><br>        System.out.println(cls1.hashCode());<br>        System.out.println(cls2.hashCode());<br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls3</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.hspedu.Dog&quot;</span>);<br>        System.out.println(cls3.hashCode());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Class-类的常用方法"><a href="#Class-类的常用方法" class="headerlink" title="Class 类的常用方法"></a>Class 类的常用方法</h4> <img src="image-20220924093824530.png" srcset="/img/loading.gif" lazyload alt="image-20220924093824530" style="zoom:60%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示Class类的常用方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Car;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Class02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">classAllPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;com.hspedu.Car&quot;</span>;<br>        <span class="hljs-comment">//1 . 获取到Car类 对应的 Class对象</span><br>        <span class="hljs-comment">//    &lt;?&gt; 表示不确定的Java类型</span><br>        Class&lt;?&gt; cls = Class.forName(classAllPath);<br>        <span class="hljs-comment">//2. 输出cls</span><br>        <span class="hljs-comment">//显示cls对象, 是哪个类的Class对象： com.hspedu.Car</span><br>        System.out.println(cls);<br>        <span class="hljs-comment">//输出cls运行类型： java.lang.Class</span><br>        System.out.println(cls.getClass());<br>        <span class="hljs-comment">//3. 得到包名</span><br>        System.out.println(cls.getPackage().getName());<span class="hljs-comment">//包名</span><br>        <span class="hljs-comment">//4. 得到全类名</span><br>        System.out.println(cls.getName());<br>        <span class="hljs-comment">//5. 通过cls创建对象实例</span><br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> (Car) cls.newInstance();<br>        System.out.println(car);<span class="hljs-comment">//car.toString()</span><br>        <span class="hljs-comment">//6. 通过反射获取属性 brand</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">brand</span> <span class="hljs-operator">=</span> cls.getField(<span class="hljs-string">&quot;brand&quot;</span>);<br>        System.out.println(brand.get(car));<span class="hljs-comment">//宝马</span><br>        <span class="hljs-comment">//7. 通过反射给属性赋值</span><br>        brand.set(car, <span class="hljs-string">&quot;奔驰&quot;</span>);<br>        System.out.println(brand.get(car));<span class="hljs-comment">//奔驰</span><br>        <span class="hljs-comment">//8 我希望大家可以得到所有的属性(字段)</span><br>        System.out.println(<span class="hljs-string">&quot;=======所有的字段属性====&quot;</span>);<br>        Field[] fields = cls.getFields();<br>        <span class="hljs-keyword">for</span> (Field f : fields) &#123;<br>            System.out.println(f.getName());<span class="hljs-comment">//名称</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="获取-Class-类对象"><a href="#获取-Class-类对象" class="headerlink" title="获取 Class 类对象"></a>获取 Class 类对象</h3><ul>
<li><p>前提：已知一个类的全类名，且该类在类路径下，可通过 Class 类的静态方法 forName() 获取，可能抛出 ClassNotFoundException，</p>
<p>实例：Class cls1 &#x3D; Class.forName(“java.lang.Cat”); </p>
<p>应用场景：多用于配置文件，读取类全路径，加载类</p>
</li>
<li><p>前提：若已知具体的类，通过类的 class 获取，该方式 最为安全可靠，程序性能最高</p>
<p>实例：Class cls2 &#x3D; Cat.class;</p>
<p>应用场景：多用于参数传递，比如反射得到对应构造器对象</p>
</li>
<li><p>前提：已知某个类的实例，调用该实例的 getClass() 方法获取 Class 对象</p>
<p>实例：Class cla3 &#x3D; 对象.getClass();  &#x2F;&#x2F;运行类型</p>
<p>应用场景：通过创建好的对象，获取 Class 对象</p>
</li>
<li><p>其它方式：（类加载器）</p>
<p>ClassLoader cl &#x3D; 对象.getClass().getClassLoader();</p>
<p>Class cla4 &#x3D; cl.loadClass(“类的全类名”);</p>
</li>
<li><p>基本数据（int, char, boolean, float, double, byte, long, short）按如下方式得到 Class 类对象</p>
<p>Class cls &#x3D; 基本数据类型.class</p>
</li>
<li><p>基本数据类型对应的包装类，可以通过 .TYPE 得到 Class 类对象</p>
<p>Class cls &#x3D; 包装类.TYPE</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示得到Class对象的各种方式(6)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> com.hspedu.Car;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetClass_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;<br>        <span class="hljs-comment">//1.Class.forName  ,  多用于配置文件，读取类全路径，加载类</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">classAllPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;com.hspedu.Car&quot;</span>; <span class="hljs-comment">//通过读取配置文件获取</span><br>        Class&lt;?&gt; cls1 = Class.forName(classAllPath);<br>        System.out.println(cls1);<br><br>        <span class="hljs-comment">//2. 类名.class , 多用于参数传递</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls2</span> <span class="hljs-operator">=</span> Car.class;<br>        System.out.println(cls2);<br><br>        <span class="hljs-comment">//3. 对象.getClass() , 应用场景，已经有对象实例时</span><br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls3</span> <span class="hljs-operator">=</span> car.getClass();<br>        System.out.println(cls3);<br><br>        <span class="hljs-comment">//4. 通过类加载器【4种】来获取到类的Class对象 （这种方式的优点？）</span><br>        <span class="hljs-comment">//(1)先得到类加载器 car</span><br>        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> car.getClass().getClassLoader();<br>        <span class="hljs-comment">//(2)通过类加载器得到Class对象</span><br>        <span class="hljs-type">Class</span> <span class="hljs-variable">cls4</span> <span class="hljs-operator">=</span> classLoader.loadClass(classAllPath);<br>        System.out.println(cls4);<br><br>        <span class="hljs-comment">//cls1 , cls2 , cls3 , cls4 其实是同一个对象</span><br>        System.out.println(cls1.hashCode());<br>        System.out.println(cls2.hashCode());<br>        System.out.println(cls3.hashCode());<br>        System.out.println(cls4.hashCode());<br><br>        <span class="hljs-comment">//5. 基本数据(int, char,boolean,float,double,byte,long,short)按如下方式得到Class类对象</span><br>        Class&lt;Integer&gt; integerClass = <span class="hljs-type">int</span>.class;<br>        Class&lt;Character&gt; characterClass = <span class="hljs-type">char</span>.class;<br>        Class&lt;Boolean&gt; booleanClass = <span class="hljs-type">boolean</span>.class;<br>        System.out.println(integerClass);<span class="hljs-comment">//int 自动拆箱</span><br><br>        <span class="hljs-comment">//6. 基本数据类型对应的包装类，可以通过 .TYPE 得到Class类对象</span><br>        Class&lt;Integer&gt; type1 = Integer.TYPE;<br>        Class&lt;Character&gt; type2 = Character.TYPE; <span class="hljs-comment">//其它包装类BOOLEAN, DOUBLE, LONG,BYTE等待</span><br>        System.out.println(type1);<span class="hljs-comment">//int 自动拆箱</span><br>        <span class="hljs-comment">// 这两种方式得到的时同一个对象</span><br>        System.out.println(integerClass.hashCode());<span class="hljs-comment">//</span><br>        System.out.println(type1.hashCode());<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="哪些类型有-Class-对象"><a href="#哪些类型有-Class-对象" class="headerlink" title="哪些类型有 Class 对象"></a>哪些类型有 Class 对象</h3><ol>
<li><p>外部类，成员内部类，静态内部类，局部内部类，匿名内部类  </p>
</li>
<li><p>interface:接口</p>
</li>
<li><p>数组  </p>
</li>
<li><p>enum:枚举  </p>
</li>
<li><p>annotation:注解  </p>
</li>
<li><p>基本数据类型  </p>
</li>
<li><p>void</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示哪些类型有Class对象</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.io.Serializable;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AllTypeClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        Class&lt;String&gt; cls1 = String.class;<span class="hljs-comment">//外部类</span><br>        Class&lt;Serializable&gt; cls2 = Serializable.class;<span class="hljs-comment">//接口</span><br>        Class&lt;Integer[]&gt; cls3 = Integer[].class;<span class="hljs-comment">//数组</span><br>        Class&lt;<span class="hljs-type">float</span>[][]&gt; cls4 = <span class="hljs-type">float</span>[][].class;<span class="hljs-comment">//二维数组</span><br>        Class&lt;Deprecated&gt; cls5 = Deprecated.class;<span class="hljs-comment">//注解</span><br>        Class&lt;Thread.State&gt; cls6 = Thread.State.class;<span class="hljs-comment">//枚举</span><br>        Class&lt;Long&gt; cls7 = <span class="hljs-type">long</span>.class;<span class="hljs-comment">//基本数据类型</span><br>        Class&lt;Void&gt; cls8 = <span class="hljs-keyword">void</span>.class;<span class="hljs-comment">//void数据类型</span><br>        Class&lt;Class&gt; cls9 = Class.class;<span class="hljs-comment">//Class也是外部类</span><br><br>        System.out.println(cls1);<br>        System.out.println(cls2);<br>        System.out.println(cls3);<br>        System.out.println(cls4);<br>        System.out.println(cls5);<br>        System.out.println(cls6);<br>        System.out.println(cls7);<br>        System.out.println(cls8);<br>        System.out.println(cls9);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="类加载"><a href="#类加载" class="headerlink" title="类加载"></a>类加载</h3><h4 id="基本说明-1"><a href="#基本说明-1" class="headerlink" title="基本说明"></a>基本说明</h4><p>反射机制是 Java 实现动态语言的关键，也就是通过反射实现类动态加载</p>
<ul>
<li>静态加载：编译时加载相关的类，如果没有则报错，依赖性太强</li>
<li>动态加载：运行时加载需要的类，如果实际运行时没用到该类，则即使不存在该类也不报错，降低了依赖性</li>
</ul>
<h4 id="类加载时机"><a href="#类加载时机" class="headerlink" title="类加载时机"></a>类加载时机</h4><ul>
<li>当创建对象时（new）  &#x2F;&#x2F;静态加载</li>
<li>当子类被加载时，父类也加载  &#x2F;&#x2F;静态加载</li>
<li>调用类中的静态成员时  &#x2F;&#x2F;静态加载</li>
<li>通过反射  &#x2F;&#x2F;动态加载     例：Class.forName(“com.test.Cat”);</li>
</ul>
<h4 id="类加载过程图"><a href="#类加载过程图" class="headerlink" title="类加载过程图"></a>类加载过程图</h4> <img src="image-20220924113503012.png" srcset="/img/loading.gif" lazyload alt="image-20220924113503012" style="zoom: 78%;" />



<h4 id="加载阶段"><a href="#加载阶段" class="headerlink" title="加载阶段"></a>加载阶段</h4><p>JVM在该阶段的主要目的是将字节码从不同的数据源（可能是class文件、也可能是 jar包，甚至网络）转化为<strong>二进制字节流</strong>加载到内存中，并生成一个代表该类的  java.lang.Class 对象</p>
<h4 id="连接阶段-验证"><a href="#连接阶段-验证" class="headerlink" title="连接阶段-验证"></a>连接阶段-验证</h4><ol>
<li><p>目的是为了确保 Class 文件的字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全。</p>
</li>
<li><p>包括：文件格式验证（是否以魔数 oxcafebabe 开头）、元数据验证、字节码验证和符号引用验证 [举例说明]        </p>
</li>
<li><p>可以考虑使用 -Xverify:none 参数来关闭大部分的类验证措施，缩短虚拟机类加载的时间。</p>
</li>
</ol>
<h4 id="连接阶段-准备"><a href="#连接阶段-准备" class="headerlink" title="连接阶段-准备"></a>连接阶段-准备</h4><p>JVM 会在该阶段对静态变量，分配内存并默认初始化（对应数据类型的默认初始值，如 0、0L、null、false等）。这些变量所使用的内存都将在方法区中进行分配</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 说明类加载的链接阶段-准备</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-comment">//属性-成员变量-字段</span><br>    <span class="hljs-comment">//老韩分析类加载的链接阶段-准备 属性是如何处理</span><br>    <span class="hljs-comment">//1. n1 是实例属性, 不是静态变量，因此在准备阶段，是不会分配内存</span><br>    <span class="hljs-comment">//2. n2 是静态变量，分配内存 n2 是默认初始化为 0 , 而不是 20（到初始化阶段才会初始化为20）</span><br>    <span class="hljs-comment">//3. n3 是 static final, 是常量, 它和静态变量不一样, 因为一旦赋值就不变 n3 = 30</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span>  <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="连接阶段-解析"><a href="#连接阶段-解析" class="headerlink" title="连接阶段-解析"></a>连接阶段-解析</h4><p>虚拟机将常量池内的 符号引用 替换为 直接引用（内存地址）的过程。</p>
<h4 id="初始化（Initialization"><a href="#初始化（Initialization" class="headerlink" title="初始化（Initialization)"></a>初始化（Initialization)</h4><ul>
<li>到了初始化阶段，才真正开始执行类中定义的 Java 程序代码，此阶段是执行&lt;clinit&gt;() 方法的过程</li>
<li>&lt;clinit&gt;() 方法是由编译器按语句在源文件中出现的顺序，一次自动收集类中所有的静态变量的赋值动作和静态代码块中的语句，并进行合并</li>
<li>虚拟机会保证一个类的 &lt;clinit&gt;() 方法在多线程环境中被正确地加锁、同步，如果多个线程同时去初始化一个类，那么只会有一个线程去执行这个类的 &lt;clinit&gt;() 方法，其它线程都需要阻塞等待，直到活动线程执行 &lt;clinit&gt;() 方法完毕</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示类加载-初始化阶段</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassLoad03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;<br>        <span class="hljs-comment">//分析</span><br>        <span class="hljs-comment">//1. 加载B类，并生成 B的class对象</span><br>        <span class="hljs-comment">//2. 连接阶段 num = 0</span><br>        <span class="hljs-comment">//3. 初始化阶段</span><br>        <span class="hljs-comment">//   依次自动收集类中的所有静态变量的赋值动作和静态代码块中的语句,并合并</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            clinit() &#123;</span><br><span class="hljs-comment">                System.out.println(&quot;B 静态代码块被执行&quot;);</span><br><span class="hljs-comment">                //num = 300;</span><br><span class="hljs-comment">                num = 100;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            合并: num = 100</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">//new B();//类加载</span><br>        <span class="hljs-comment">//System.out.println(B.num);//100, 如果直接使用类的静态属性，也会导致类的加载</span><br><br>        <span class="hljs-comment">//看看加载类的时候，是有同步机制控制</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        protected Class&lt;?&gt; loadClass(String name, boolean resolve)</span><br><span class="hljs-comment">        throws ClassNotFoundException</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            //正因为有这个机制，才能保证某个类在内存中, 只有一份Class对象</span><br><span class="hljs-comment">            synchronized (getClassLoadingLock(name)) &#123;</span><br><span class="hljs-comment">            //....</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B 静态代码块被执行&quot;</span>);<br>        num = <span class="hljs-number">300</span>;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;B() 构造器被执行&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="反射获取类的结构"><a href="#反射获取类的结构" class="headerlink" title="反射获取类的结构"></a>反射获取类的结构</h3><h4 id="一-java-lang-Class-类"><a href="#一-java-lang-Class-类" class="headerlink" title="一: java.lang.Class 类"></a>一: java.lang.Class 类</h4><ul>
<li>getName：获取全类名</li>
<li>getSimpleName：获取简单类名</li>
<li>getFields：获取所有 public 修饰的属性，包含本类以及父类的</li>
<li>getDeclaredFields：获取本类中所有属性</li>
<li>getMethods：获取所有 public 修饰的方法，包含本类以及父类的</li>
<li>getDeclaredMethods：获取本类中所有方法</li>
<li>getConstructors：获取本类所有 public 修饰的构造器</li>
<li>getDeclaredConstructors：获取本类中所有构造器</li>
<li>getPackage：以 Package 形式返回包信息</li>
<li>getSuperClass：以 Class 形式返回父类信息</li>
<li>getlnterfaces：以 Class[] 形式返回接口信息</li>
<li>getAnnotations：以 Annotation[] 形式返回注解信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//第一组方法API</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">api_01</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;<br><br>    <span class="hljs-comment">//得到Class对象</span><br>    Class&lt;?&gt; personCls = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Person&quot;</span>);<br>    <span class="hljs-comment">//getName:获取全类名</span><br>    System.out.println(personCls.getName());<span class="hljs-comment">//com.hspedu.reflection.Person</span><br>    <span class="hljs-comment">//getSimpleName:获取简单类名</span><br>    System.out.println(personCls.getSimpleName());<span class="hljs-comment">//Person</span><br>    <span class="hljs-comment">//getFields:获取所有public修饰的属性，包含本类以及父类的</span><br>    Field[] fields = personCls.getFields();<br>    <span class="hljs-keyword">for</span> (Field field : fields) &#123;<span class="hljs-comment">//增强for</span><br>        System.out.println(<span class="hljs-string">&quot;本类以及父类的public属性=&quot;</span> + field.getName());<br>    &#125;<br>    <span class="hljs-comment">//getDeclaredFields:获取本类中所有属性</span><br>    Field[] declaredFields = personCls.getDeclaredFields();<br>    <span class="hljs-keyword">for</span> (Field declaredField : declaredFields) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类中所有属性=&quot;</span> + declaredField.getName());<br>    &#125;<br>    <span class="hljs-comment">//getMethods:获取所有public修饰的方法，包含本类以及父类（不局限于直接父类）的</span><br>    Method[] methods = personCls.getMethods();<br>    <span class="hljs-keyword">for</span> (Method method : methods) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类以及父类的方法=&quot;</span> + method.getName());<br>    &#125;<br>    <span class="hljs-comment">//getDeclaredMethods:获取本类中所有方法</span><br>    Method[] declaredMethods = personCls.getDeclaredMethods();<br>    <span class="hljs-keyword">for</span> (Method declaredMethod : declaredMethods) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类中所有方法=&quot;</span> + declaredMethod.getName());<br>    &#125;<br>    <span class="hljs-comment">//getConstructors: 获取本类所有 public 修饰的构造器</span><br>    Constructor&lt;?&gt;[] constructors = personCls.getConstructors();<br>    <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; constructor : constructors) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类的构造器=&quot;</span> + constructor.getName());<br>    &#125;<br>    <span class="hljs-comment">//getDeclaredConstructors:获取本类中所有构造器（包括私有构造器）</span><br>    Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();<br>    <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类中所有构造器=&quot;</span> + declaredConstructor.getName());<br>        <span class="hljs-comment">//这里老师只是输出名字</span><br>    &#125;<br>    <span class="hljs-comment">//getPackage:以Package形式返回 包信息</span><br>    System.out.println(personCls.getPackage());<span class="hljs-comment">//com.hspedu.reflection</span><br>    <span class="hljs-comment">//getSuperClass:以Class形式返回父类信息</span><br>    Class&lt;?&gt; superclass = personCls.getSuperclass();<br>    System.out.println(<span class="hljs-string">&quot;父类的class对象=&quot;</span> + superclass);<span class="hljs-comment">//</span><br>    <span class="hljs-comment">//getInterfaces:以Class[]形式返回接口信息</span><br>    Class&lt;?&gt;[] interfaces = personCls.getInterfaces();<br>    <span class="hljs-keyword">for</span> (Class&lt;?&gt; anInterface : interfaces) &#123;<br>        System.out.println(<span class="hljs-string">&quot;接口信息=&quot;</span> + anInterface);<br>    &#125;<br>    <span class="hljs-comment">//getAnnotations:以Annotation[] 形式返回注解信息</span><br>    Annotation[] annotations = personCls.getAnnotations();<br>    <span class="hljs-keyword">for</span> (Annotation annotation : annotations) &#123;<br>        System.out.println(<span class="hljs-string">&quot;注解信息=&quot;</span> + annotation);<span class="hljs-comment">//注解</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">public</span> String hobby;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> &#123; &#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IB</span> &#123; &#125;<br><span class="hljs-meta">@Deprecated</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>, IB &#123;<br>    <span class="hljs-comment">//属性</span><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> age; <span class="hljs-comment">// 4 + 8 = 12</span><br>    String job;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-comment">//构造器</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>    <span class="hljs-comment">//私有的</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;&#125;<br>    <span class="hljs-comment">//方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> sal)</span> &#123;&#125;<br>    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="二-java-lang-reflect-Field-类"><a href="#二-java-lang-reflect-Field-类" class="headerlink" title="二: java.lang.reflect.Field 类"></a>二: java.lang.reflect.Field 类</h4><ul>
<li><p>getModifiers：以 int 形式返回修饰符</p>
<p>[说明：默认修饰符：0，public：1，private：2，protected：4，static：8，final：16]</p>
<p>特别的，若被多个同时修饰符修饰则相加，如：public(1) + static(8) &#x3D; 9</p>
</li>
<li><p>getType：以 Class 形式 返回 属性类型（的Class对象）</p>
</li>
<li><p>getName：返回属性名</p>
</li>
</ul>
<h4 id="三-java-lang-reflect-Method-类"><a href="#三-java-lang-reflect-Method-类" class="headerlink" title="三: java.lang.reflect.Method 类"></a>三: java.lang.reflect.Method 类</h4><ul>
<li><p>getModifiers：以 int 形式返回修饰符</p>
<p>[说明：默认修饰符：0，public：1，private：2，protected：4，static：8，final：16]</p>
<p>特别的，若被多个同时修饰符修饰则相加，如：public(1) + static(8) &#x3D; 9</p>
</li>
<li><p>getReturnType：以 Class 形式获取返回类型（的Class对象）</p>
</li>
<li><p>getName：返回方法名</p>
</li>
<li><p>getParameterTypes：以 Class[] 返回参数类型数组</p>
</li>
</ul>
<h4 id="四-java-lang-reflect-Constructor-类"><a href="#四-java-lang-reflect-Constructor-类" class="headerlink" title="四: java.lang.reflect.Constructor 类"></a>四: java.lang.reflect.Constructor 类</h4><ul>
<li><p>getModifiers：以 int 形式返回修饰符</p>
<p>[说明：默认修饰符：0，public：1，private：2，protected：4，static：8，final：16]</p>
<p>特别的，若被多个同时修饰符修饰则相加，如：public(1) + static(8) &#x3D; 9</p>
</li>
<li><p>getName：返回构造器名（全类名）</p>
</li>
<li><p>getParameterTypes：以 Class[] 返回参数类型数组</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//第二、三、四组</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">api_02</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;<br>    <span class="hljs-comment">//得到Class对象</span><br>    Class&lt;?&gt; personCls = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Person&quot;</span>);<br>    <span class="hljs-comment">//getDeclaredFields:获取本类中所有属性</span><br>    <span class="hljs-comment">//规定 说明: 默认修饰符是0，public是1，private是2，protected是4，static是8，final是16</span><br>    Field[] declaredFields = personCls.getDeclaredFields();<br>    <span class="hljs-keyword">for</span> (Field declaredField : declaredFields) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类中所有属性=&quot;</span> + declaredField.getName()<br>                           + <span class="hljs-string">&quot; 该属性的修饰符值=&quot;</span> + declaredField.getModifiers()<br>                           + <span class="hljs-string">&quot; 该属性的类型=&quot;</span> + declaredField.getType());<br>    &#125;<br><br>    <span class="hljs-comment">//getDeclaredMethods:获取本类中所有方法</span><br>    Method[] declaredMethods = personCls.getDeclaredMethods();<br>    <span class="hljs-keyword">for</span> (Method declaredMethod : declaredMethods) &#123;<br>        System.out.println(<span class="hljs-string">&quot;本类中所有方法=&quot;</span> + declaredMethod.getName()<br>                           + <span class="hljs-string">&quot; 该方法的访问修饰符值=&quot;</span> + declaredMethod.getModifiers()<br>                           + <span class="hljs-string">&quot; 该方法返回类型&quot;</span> + declaredMethod.getReturnType());<br><br>        <span class="hljs-comment">//输出当前这个方法的形参数组情况</span><br>        Class&lt;?&gt;[] parameterTypes = declaredMethod.getParameterTypes();<br>        <span class="hljs-keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;<br>            System.out.println(<span class="hljs-string">&quot;该方法的形参类型=&quot;</span> + parameterType);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//getDeclaredConstructors:获取本类中所有构造器</span><br>    Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();<br>    <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>        System.out.println(<span class="hljs-string">&quot;====================&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;本类中所有构造器=&quot;</span> + declaredConstructor.getName());<span class="hljs-comment">//这里老师只是输出名</span><br><br>        Class&lt;?&gt;[] parameterTypes = declaredConstructor.getParameterTypes();<br>        <span class="hljs-keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;<br>            System.out.println(<span class="hljs-string">&quot;该构造器的形参类型=&quot;</span> + parameterType);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">public</span> String hobby;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> &#123; &#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IB</span> &#123; &#125;<br><span class="hljs-meta">@Deprecated</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>, IB &#123;<br>    <span class="hljs-comment">//属性</span><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> age; <span class="hljs-comment">// 4 + 8 = 12</span><br>    String job;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-comment">//构造器</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name)</span> &#123;&#125;<br>    <span class="hljs-comment">//私有的</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;&#125;<br>    <span class="hljs-comment">//方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> sal)</span> &#123;&#125;<br>    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="通过反射创建对象"><a href="#通过反射创建对象" class="headerlink" title="通过反射创建对象"></a>通过反射创建对象</h3><ul>
<li><p>方式一：调用类中的 public 修饰的无参构造器</p>
</li>
<li><p>方式二：调用类中的指定构造器</p>
</li>
<li><p>Class类 相关方法</p>
<ul>
<li>newInstance：调用类中的无参构造器，获取对应类的对象</li>
<li>getConstructor(Class…clazz)：根据参数列表，获取对应的 public 构造器对象</li>
<li>getDecalaredConstructor(Class..clazz)：根据参数列表，获取对应的所有构造器对象</li>
</ul>
</li>
<li><p>Constructor类 相关方法</p>
<ul>
<li>setAccessible：暴破【暴力破解】，使用反射可以访问 private 构造器&#x2F;方法&#x2F;属性</li>
<li>newInstance(Object..obj)：调用构造器</li>
</ul>
</li>
</ul>
<p>案例演示 com.hspedu.reflection ReflecCreateInstance.java</p>
<p>测试 1：通过反射创建某类的对象，要求该类中必须有 public 的无参构造</p>
<p>测试 2：通过调用某个特定构造器的方式，实现创建某类的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示通过反射机制创建实例</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflecCreateInstance</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;<br><br>        <span class="hljs-comment">//1. 先获取到User类的Class对象</span><br>        Class&lt;?&gt; userClass = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.User&quot;</span>);<br>        <span class="hljs-comment">//2. 通过public的无参构造器创建实例</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> userClass.newInstance();<br>        System.out.println(o);<br>        System.out.println(o.hashCode());<br>        <span class="hljs-comment">//3. 通过public的有参构造器创建实例</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            constructor 对象就是</span><br><span class="hljs-comment">            public User(String name) &#123;//public的有参构造器</span><br><span class="hljs-comment">                this.name = name;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//  3.1 先得到对应构造器</span><br>        Constructor&lt;?&gt; constructor = userClass.getConstructor(String.class);<br>        <span class="hljs-comment">//  3.2 创建实例，并传入实参</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">hsp</span> <span class="hljs-operator">=</span> constructor.newInstance(<span class="hljs-string">&quot;hsp&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;hsp=&quot;</span> + hsp);<br>        System.out.println(hsp.hashCode());<br>        <span class="hljs-comment">//4. 通过非public的有参构造器创建实例</span><br>        <span class="hljs-comment">//  4.1 得到private的构造器对象</span><br>        Constructor&lt;?&gt; constructor1 = userClass.getDeclaredConstructor(<span class="hljs-type">int</span>.class, String.class);<br>        <span class="hljs-comment">//  4.2 创建实例</span><br>        <span class="hljs-comment">//暴破【暴力破解】, 使用反射可以访问private构造器/方法/属性, 反射面前，都是纸老虎</span><br>        constructor1.setAccessible(<span class="hljs-literal">true</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> constructor1.newInstance(<span class="hljs-number">100</span>, <span class="hljs-string">&quot;张三丰&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;user2=&quot;</span> + user2);<br>        System.out.println(user2.hashCode());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123; <span class="hljs-comment">//User类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平教育&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//无参 public</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String name)</span> &#123;<span class="hljs-comment">//public的有参构造器</span><br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">User</span><span class="hljs-params">(<span class="hljs-type">int</span> age, String name)</span> &#123;<span class="hljs-comment">//private 有参构造器</span><br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User [age=&quot;</span> + age + <span class="hljs-string">&quot;, name=&quot;</span> + name + <span class="hljs-string">&quot;]&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="通过反射访问类中的成员"><a href="#通过反射访问类中的成员" class="headerlink" title="通过反射访问类中的成员"></a>通过反射访问类中的成员</h3><h4 id="访问属性"><a href="#访问属性" class="headerlink" title="访问属性"></a>访问属性</h4><ul>
<li><p>根据属性名获取 Field 对象</p>
<p>Field f &#x3D; clazz对象.getDeclaredField(属性名);</p>
</li>
<li><p>暴破：field.setAccessible(true);  &#x2F;&#x2F; field 是 Field</p>
</li>
<li><p>访问：</p>
<p>f.set(obj, val);  </p>
<p>syso(field.get(obj));</p>
</li>
<li><p>补充：如果是静态属性，则 set 和 get 中的参数 obj，可以写成 null</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示反射操作属性</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflecAccessProperty</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchFieldException &#123;<br><br>        <span class="hljs-comment">//1. 得到Student类对应的 Class对象</span><br>        Class&lt;?&gt; stuClass = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Student&quot;</span>);<br>        <span class="hljs-comment">//2. 创建对象</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> stuClass.newInstance();<span class="hljs-comment">//o 的运行类型就是Student</span><br>        System.out.println(o.getClass());<span class="hljs-comment">//Student</span><br>        <span class="hljs-comment">//3. 使用反射得到age 属性对象</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> stuClass.getField(<span class="hljs-string">&quot;age&quot;</span>);<br>        age.set(o, <span class="hljs-number">88</span>);<span class="hljs-comment">//通过反射来操作属性</span><br>        System.out.println(o);<span class="hljs-comment">//</span><br>        System.out.println(age.get(o));<span class="hljs-comment">//返回age属性的值</span><br><br>        <span class="hljs-comment">//4. 使用反射操作 name 属性</span><br>        <span class="hljs-type">Field</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> stuClass.getDeclaredField(<span class="hljs-string">&quot;name&quot;</span>);<br>        <span class="hljs-comment">//对 name 进行暴破, 可以操作private 属性</span><br>        name.setAccessible(<span class="hljs-literal">true</span>);<br>        <span class="hljs-comment">//name.set(o, &quot;老韩&quot;);</span><br>        name.set(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;老韩~&quot;</span>);<span class="hljs-comment">//因为name是static属性，因此 o 也可以写出null</span><br>        System.out.println(o);<br>        System.out.println(name.get(o)); <span class="hljs-comment">//获取属性值</span><br>        System.out.println(name.get(<span class="hljs-literal">null</span>));<span class="hljs-comment">//获取属性值, 要求name是static</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//构造器</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student [age=&quot;</span> + age + <span class="hljs-string">&quot;, name=&quot;</span> + name + <span class="hljs-string">&quot;]&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="访问方法"><a href="#访问方法" class="headerlink" title="访问方法"></a>访问方法</h4><ul>
<li><p>根据方法名和参数列表获取 Method 方法对象：</p>
<p>Method m &#x3D; clazz.getDeclaredMethod(方法名, X.class);  &#x2F;&#x2F;可得到本类的所有方法</p>
</li>
<li><p>获取对象：Object obj &#x3D; clazz.newInstance();</p>
</li>
<li><p>暴破：m.setAccessible(true);</p>
</li>
<li><p>访问：Object returnValue &#x3D; m.invoke(obj, 实参列表);  &#x2F;&#x2F;obj 就是对象</p>
</li>
<li><p>补充：如果是静态方法，则 invoke 的参数 obj，可以写成 null</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示通过反射调用方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflecAccessMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException &#123;<br><br>        <span class="hljs-comment">//1. 得到Boss类对应的Class对象</span><br>        Class&lt;?&gt; bossCls = Class.forName(<span class="hljs-string">&quot;com.hspedu.reflection.Boss&quot;</span>);<br>        <span class="hljs-comment">//2. 创建对象</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> bossCls.newInstance();<br>        <span class="hljs-comment">//3. 调用public的hi方法</span><br>        <span class="hljs-comment">//Method hi = bossCls.getMethod(&quot;hi&quot;, String.class);//OK</span><br>        <span class="hljs-comment">//  3.1 得到hi方法对象</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">hi</span> <span class="hljs-operator">=</span> bossCls.getDeclaredMethod(<span class="hljs-string">&quot;hi&quot;</span>, String.class);<span class="hljs-comment">//OK</span><br>        <span class="hljs-comment">//  3.2 调用</span><br>        hi.invoke(o, <span class="hljs-string">&quot;韩顺平教育~&quot;</span>);<br><br>        <span class="hljs-comment">//4. 调用private static 方法</span><br>        <span class="hljs-comment">//  4.1 得到 say 方法对象</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">say</span> <span class="hljs-operator">=</span> bossCls.getDeclaredMethod(<span class="hljs-string">&quot;say&quot;</span>, <span class="hljs-type">int</span>.class, String.class, <span class="hljs-type">char</span>.class);<br>        <span class="hljs-comment">//  4.2 因为say方法是private, 所以需要暴破，原理和前面讲的构造器和属性一样</span><br>        say.setAccessible(<span class="hljs-literal">true</span>);<br>        System.out.println(say.invoke(o, <span class="hljs-number">100</span>, <span class="hljs-string">&quot;张三&quot;</span>, <span class="hljs-string">&#x27;男&#x27;</span>));<br>        <span class="hljs-comment">//  4.3 因为say方法是static的，还可以这样调用 ，可以传入null</span><br>        System.out.println(say.invoke(<span class="hljs-literal">null</span>, <span class="hljs-number">200</span>, <span class="hljs-string">&quot;李四&quot;</span>, <span class="hljs-string">&#x27;女&#x27;</span>));<br><br>        <span class="hljs-comment">//5. 在反射中，如果方法有返回值，统一返回Object , 但是他运行类型和方法定义的返回类型一致</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">reVal</span> <span class="hljs-operator">=</span> say.invoke(<span class="hljs-literal">null</span>, <span class="hljs-number">300</span>, <span class="hljs-string">&quot;王五&quot;</span>, <span class="hljs-string">&#x27;男&#x27;</span>);<br>        System.out.println(<span class="hljs-string">&quot;reVal 的运行类型=&quot;</span> + reVal.getClass());<span class="hljs-comment">//String</span><br><br>        <span class="hljs-comment">//再演示一个返回的案例</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">m1</span> <span class="hljs-operator">=</span> bossCls.getDeclaredMethod(<span class="hljs-string">&quot;m1&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">reVal2</span> <span class="hljs-operator">=</span> m1.invoke(o);<br>        System.out.println(<span class="hljs-string">&quot;reVal2的运行类型=&quot;</span> + reVal2.getClass());<span class="hljs-comment">//Monster</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Boss</span> &#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Boss</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//构造器</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> Monster <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>();&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">say</span><span class="hljs-params">(<span class="hljs-type">int</span> n, String s, <span class="hljs-type">char</span> c)</span> &#123;<span class="hljs-comment">//静态方法</span><br>        <span class="hljs-keyword">return</span> n + <span class="hljs-string">&quot; &quot;</span> + s + <span class="hljs-string">&quot; &quot;</span> + c;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(String s)</span> &#123;<span class="hljs-comment">//普通public方法</span><br>        System.out.println(<span class="hljs-string">&quot;hi &quot;</span> + s);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="课后练习-1"><a href="#课后练习-1" class="headerlink" title="课后练习"></a>课后练习</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * 利用Class类的forName方法得到File类的class 对象</span><br><span class="hljs-comment">         * 在控制台打印File类的所有构造器</span><br><span class="hljs-comment">         * 通过newInstance的方法创建File对象，并创建E:\mynew.txt文件</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//1. Class类的forName方法得到File类的class 对象</span><br>        Class&lt;?&gt; fileCls = Class.forName(<span class="hljs-string">&quot;java.io.File&quot;</span>);<br>        <span class="hljs-comment">//2. 得到所有的构造器</span><br>        Constructor&lt;?&gt;[] declaredConstructors = fileCls.getDeclaredConstructors();<br>        <span class="hljs-comment">//遍历输出</span><br>        <span class="hljs-keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>            System.out.println(<span class="hljs-string">&quot;File构造器=&quot;</span> + declaredConstructor);<br>        &#125;<br>        <span class="hljs-comment">//3. 指定的得到 public java.io.File(java.lang.String)</span><br>        Constructor&lt;?&gt; declaredConstructor = fileCls.getDeclaredConstructor(String.class);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileAllPath</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e:\\mynew.txt&quot;</span>;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> declaredConstructor.newInstance(fileAllPath);<span class="hljs-comment">//创建File对象</span><br><br>        <span class="hljs-comment">//4. 得到createNewFile 的方法对象</span><br>        <span class="hljs-type">Method</span> <span class="hljs-variable">createNewFile</span> <span class="hljs-operator">=</span> fileCls.getMethod(<span class="hljs-string">&quot;createNewFile&quot;</span>);<br>        createNewFile.invoke(file);<span class="hljs-comment">//创建文件，调用的是 createNewFile</span><br>        <span class="hljs-comment">//file的运行类型就是File</span><br>        System.out.println(file.getClass());<br>        System.out.println(<span class="hljs-string">&quot;创建文件成功&quot;</span> + fileAllPath);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="Java8新特性"><a href="#Java8新特性" class="headerlink" title="Java8新特性"></a>Java8新特性</h2> <img src="image-20220925091551275.png" srcset="/img/loading.gif" lazyload alt="image-20220925091551275" style="zoom:76%;" />



<h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><p><strong>简要介绍：</strong></p>
<p>Lambda 是一个 匿名函数，我们可以把 Lambda 表达式理解为是 一段可以传递的代码（将代码像数据一样进行传递）。使用它可以写出更简洁、更灵活的代码。作为一种更紧凑的代码风格，使Java的语言表达能力得到了提升。</p>
<p><strong>Lambda表达式的使用：</strong></p>
<ul>
<li><p>举例： (o1,o2) -&gt; Integer.compare(o1,o2);</p>
</li>
<li><p>格式：</p>
<ul>
<li>-&gt; ：lambda操作符 或 箭头操作符</li>
<li>-&gt; 左边：lambda形参列表 （其实就是接口中的抽象方法的形参列表）</li>
<li>-&gt; 右边：lambda体 （其实就是重写的抽象方法的方法体）</li>
</ul>
</li>
<li><p>Lambda表达式的使用：（分为6种情况介绍）</p>
<p><strong>总结：</strong></p>
<ul>
<li><strong>-&gt; 左边：</strong>lambda形参列表的参数类型可以省略(类型推断)；如果lambda形参列表只有一个参数，其一对()也可以省略</li>
<li><strong>-&gt; 右边：</strong>lambda体应该使用一对 {} 包裹；如果 lambda 体只有一条执行语句（可能是return语句），省略这一对 {} 和 return 关键字</li>
</ul>
</li>
<li><p>Lambda表达式的本质：作为函数式接口的实例（即相当于new了一个对象）（函数式接口是必要条件）</p>
<p>Lambda表达式是对象，而不是函数，并且必须依附于一类特别的对象类型 —— 函数式接口。</p>
<p>（与其它语言不同，其它语言一般是直接作为一个匿名函数 [ 如 JS 中的箭头函数 ]）</p>
</li>
<li><p>如果一个接口中，只声明了一个抽象方法，则此接口就称为函数式接口。我们可以在一个接口上使用 @FunctionalInterface 注解，这样做可以检查它是否是一个函数式接口。</p>
</li>
<li><p>因此，以前用匿名实现类表示的现在都可以用Lambda表达式来写。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaTest1</span> &#123;<br>    <span class="hljs-comment">//语法格式一：无参，无返回值</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Runnable</span> <span class="hljs-variable">r1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;我爱北京天安门&quot;</span>);<br>            &#125;<br>        &#125;;<br>        r1.run();<br>        System.out.println(<span class="hljs-string">&quot;***********************&quot;</span>);<br><br>        <span class="hljs-type">Runnable</span> <span class="hljs-variable">r2</span> <span class="hljs-operator">=</span> () -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;我爱北京故宫&quot;</span>);<br>        &#125;;<br>        r2.run();<br>    &#125;<br>    <br>    <span class="hljs-comment">//语法格式二：Lambda 需要一个参数，但是没有返回值。</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;String&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(String s)</span> &#123;<br>                System.out.println(s);<br>            &#125;<br>        &#125;;<br>        con.accept(<span class="hljs-string">&quot;谎言和誓言的区别是什么？&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//语法格式三：数据类型可以省略，因为可由编译器推断得出，称为“类型推断”</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Consumer&lt;String&gt; con2 = (s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con2.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<span class="hljs-comment">//类型推断</span><br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<span class="hljs-comment">//类型推断</span><br>    &#125;<br><br>    <span class="hljs-comment">//语法格式四：Lambda 若只需要一个参数时，参数的小括号可以省略</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = (s) -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Consumer&lt;String&gt; con2 = s -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con2.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//语法格式五：Lambda 需要两个或以上的参数，多条执行语句，并且可以有返回值</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test6</span><span class="hljs-params">()</span>&#123;<br>        Comparator&lt;Integer&gt; com1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Integer&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Integer o1, Integer o2)</span> &#123;<br>                System.out.println(o1);<br>                System.out.println(o2);<br>                <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>            &#125;<br>        &#125;;<br>        System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>        System.out.println(<span class="hljs-string">&quot;*****************************&quot;</span>);<br><br>        Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; &#123;<br>            System.out.println(o1);<br>            System.out.println(o2);<br>            <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>        &#125;;<br>        System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>));<br>    &#125;<br><br>    <span class="hljs-comment">//语法格式六：当 Lambda 体只有一条语句时，return 与大括号若有，都可以省略</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test7</span><span class="hljs-params">()</span>&#123;<br>        Comparator&lt;Integer&gt; com1 = (o1,o2) -&gt; &#123;<br>            <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>        &#125;;<br>        System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>));<br>        System.out.println(<span class="hljs-string">&quot;*****************************&quot;</span>);<br><br>        Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; o1.compareTo(o2);<br>        System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test8</span><span class="hljs-params">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = s -&gt; &#123;<br>            System.out.println(s);<br>        &#125;;<br>        con1.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*****************************&quot;</span>);<br><br>        Consumer&lt;String&gt; con2 = s -&gt; System.out.println(s);<br>        con2.accept(<span class="hljs-string">&quot;一个是听得人当真了，一个是说的人当真了&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h3><ul>
<li><p>只包含一个抽象方法的接口，称为 函数式接口。</p>
</li>
<li><p>你可以通过 Lambda 表达式来创建该接口的对象。（若 Lambda 表达式抛出一个受检异常(即：非运行时异常)，那么该异常需要在目标接口的抽象方法上进行声明）。</p>
</li>
<li><p>我们可以在一个接口上使用 @FunctionalInterface 注解，这样做可以检查它是否是一个函数式接口。同时 javadoc 也会包含一条声明，说明这个接口是一个函数式接口。</p>
</li>
<li><p>在 java.util.function 包下定义了 Java 8 的丰富的函数式接口</p>
</li>
</ul>
<p><strong>Java 内置四大核心函数式接口：</strong></p>
 <img src="image-20220925105023050.png" srcset="/img/loading.gif" lazyload alt="image-20220925105023050" style="zoom: 60%;" />

<p><strong>其他接口：</strong></p>
 <img src="image-20220925105124856.png" srcset="/img/loading.gif" lazyload alt="image-20220925105124856" style="zoom:60%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * java内置的4大核心函数式接口</span><br><span class="hljs-comment"> * 消费型接口 Consumer&lt;T&gt;     void accept(T t)</span><br><span class="hljs-comment"> * 供给型接口 Supplier&lt;T&gt;     T get()</span><br><span class="hljs-comment"> * 函数型接口 Function&lt;T,R&gt;   R apply(T t)</span><br><span class="hljs-comment"> * 断定型接口 Predicate&lt;T&gt;    boolean test(T t)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.function.Consumer;<br><span class="hljs-keyword">import</span> java.util.function.Predicate;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaTest2</span> &#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        happyTime(<span class="hljs-number">500</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;Double&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Double aDouble)</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;学习太累了，去天上人间买了瓶矿泉水，价格为：&quot;</span> + aDouble);<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;********************&quot;</span>);<br><br>        happyTime(<span class="hljs-number">400</span>,money -&gt; System.out.println(<span class="hljs-string">&quot;去店铺喝了口水，价格为：&quot;</span> + money));<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">happyTime</span><span class="hljs-params">(<span class="hljs-type">double</span> money, Consumer&lt;Double&gt; con)</span>&#123;<br>        con.accept(money);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;北京&quot;</span>,<span class="hljs-string">&quot;南京&quot;</span>,<span class="hljs-string">&quot;天津&quot;</span>,<span class="hljs-string">&quot;东京&quot;</span>,<span class="hljs-string">&quot;西京&quot;</span>,<span class="hljs-string">&quot;普京&quot;</span>);<br>        List&lt;String&gt; filterStrs = filterString(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Predicate</span>&lt;String&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">test</span><span class="hljs-params">(String s)</span> &#123;<br>                <span class="hljs-keyword">return</span> s.contains(<span class="hljs-string">&quot;京&quot;</span>);<br>            &#125;<br>        &#125;);<br>        System.out.println(filterStrs);<br>        List&lt;String&gt; filterStrs1 = filterString(list,s -&gt; s.contains(<span class="hljs-string">&quot;京&quot;</span>));<br>        System.out.println(filterStrs1);<br>    &#125;<br><br>    <span class="hljs-comment">//根据给定的规则，过滤集合中的字符串。此规则由Predicate的方法决定</span><br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">filterString</span><span class="hljs-params">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span>&#123;<br>        ArrayList&lt;String&gt; filterList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(String s : list)&#123;<br>            <span class="hljs-keyword">if</span>(pre.test(s))&#123;<br>                filterList.add(s);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> filterList;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><ul>
<li><p>当要传递给Lambda体的操作，已经有实现的方法了，可以使用方法引用！</p>
</li>
<li><p>方法引用可以看做是Lambda表达式深层次的表达。换句话说，方法引用就是Lambda表达式，也就是函数式接口的一个实例，通过方法的名字来指向一个方法，可以认为是Lambda表达式的一个语法糖。</p>
</li>
<li><p>要求：实现接口的抽象方法的参数列表和返回值类型，必须与方法引用的方法的参数列表和返回值类型保持一致！</p>
</li>
<li><p>格式：使用操作符 “::” 将类(或对象) 与 方法名分隔开来。</p>
</li>
</ul>
<p><strong>方法引用的使用：</strong></p>
<ul>
<li>使用情境：当要传递给Lambda体的操作，已经有实现的方法了，可以使用方法引用！</li>
<li>方法引用，本质上就是Lambda表达式，而Lambda表达式作为函数式接口的实例。所以方法引用，也是函数式接口的实例。</li>
<li>使用格式：  类(或对象) :: 方法名</li>
<li>具体分为如下的三种情况：<ul>
<li>情况1     对象 :: 非静态方法</li>
<li>情况2     类 :: 静态方法</li>
<li>情况3     类 :: 非静态方法</li>
</ul>
</li>
<li>使用要求：要求接口中的抽象方法的形参列表和返回值类型与方法引用的方法的形参列表和返回值类型相同！（针对于情况1和情况2）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodRefTest</span> &#123;<br><br>	<span class="hljs-comment">// 情况一：对象 :: 实例方法</span><br>	<span class="hljs-comment">// Consumer 中的 void accept(T t)</span><br>	<span class="hljs-comment">// PrintStream 中的 void println(T t)</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>		Consumer&lt;String&gt; con1 = str -&gt; System.out.println(str);<br>		con1.accept(<span class="hljs-string">&quot;北京&quot;</span>);<br><br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br>		<span class="hljs-type">PrintStream</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> System.out;<br>		Consumer&lt;String&gt; con2 = ps::println;<br>		con2.accept(<span class="hljs-string">&quot;beijing&quot;</span>);<br>	&#125;<br>	<br>	<span class="hljs-comment">//Supplier中的T get()</span><br>	<span class="hljs-comment">//Employee中的String getName()</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">Employee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-number">5600</span>);<br><br>		Supplier&lt;String&gt; sup1 = () -&gt; emp.getName();<br>		System.out.println(sup1.get());<br><br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br>		Supplier&lt;String&gt; sup2 = emp::getName;<br>		System.out.println(sup2.get());<br>	&#125;<br><br>	<span class="hljs-comment">// 情况二：类 :: 静态方法</span><br>	<span class="hljs-comment">//Comparator中的int compare(T t1,T t2)</span><br>	<span class="hljs-comment">//Integer中的static int compare(T t1,T t2)</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>		Comparator&lt;Integer&gt; com1 = (t1,t2) -&gt; Integer.compare(t1,t2);<br>		System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>		Comparator&lt;Integer&gt; com2 = Integer::compare;<br>		System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">3</span>));<br>	&#125;<br>	<br>	<span class="hljs-comment">//Function中的R apply(T t)</span><br>	<span class="hljs-comment">//Math中的Long round(Double d)</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> &#123;<br>		Function&lt;Double,Long&gt; func = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>&lt;Double, Long&gt;() &#123;<br>			<span class="hljs-meta">@Override</span><br>			<span class="hljs-keyword">public</span> Long <span class="hljs-title function_">apply</span><span class="hljs-params">(Double d)</span> &#123;<br>				<span class="hljs-keyword">return</span> Math.round(d);<br>			&#125;<br>		&#125;;<br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>		Function&lt;Double,Long&gt; func1 = d -&gt; Math.round(d);<br>		System.out.println(func1.apply(<span class="hljs-number">12.3</span>));<br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>		Function&lt;Double,Long&gt; func2 = Math::round;<br>		System.out.println(func2.apply(<span class="hljs-number">12.6</span>));<br>	&#125;<br><br>	<span class="hljs-comment">// 情况三：类 :: 实例方法  (有难度)</span><br>	<span class="hljs-comment">// Comparator中的int comapre(T t1,T t2)</span><br>	<span class="hljs-comment">// String中的int t1.compareTo(t2)</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> &#123;<br>		Comparator&lt;String&gt; com1 = (s1,s2) -&gt; s1.compareTo(s2);<br>		System.out.println(com1.compare(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abd&quot;</span>));<br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>		Comparator&lt;String&gt; com2 = String :: compareTo;<br>		System.out.println(com2.compare(<span class="hljs-string">&quot;abd&quot;</span>,<span class="hljs-string">&quot;abm&quot;</span>));<br>	&#125;<br><br>	<span class="hljs-comment">//BiPredicate中的boolean test(T t1, T t2);</span><br>	<span class="hljs-comment">//String中的boolean t1.equals(t2)</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test6</span><span class="hljs-params">()</span> &#123;<br>		BiPredicate&lt;String,String&gt; pre1 = (s1,s2) -&gt; s1.equals(s2);<br>		System.out.println(pre1.test(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>));<br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br>        <br>		BiPredicate&lt;String,String&gt; pre2 = String :: equals;<br>		System.out.println(pre2.test(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abd&quot;</span>));<br>	&#125;<br>	<br>	<span class="hljs-comment">// Function中的R apply(T t)</span><br>	<span class="hljs-comment">// Employee中的String getName();</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test7</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">&quot;Jerry&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">6000</span>);<br><br>		Function&lt;Employee,String&gt; func1 = e -&gt; e.getName();<br>		System.out.println(func1.apply(employee));<br>		System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>		Function&lt;Employee,String&gt; func2 = Employee::getName;<br>		System.out.println(func2.apply(employee));<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="构造器引用"><a href="#构造器引用" class="headerlink" title="构造器引用"></a>构造器引用</h3><p>和方法引用类似，函数式接口的抽象方法的形参列表和构造器的形参列表一致。</p>
<p>抽象方法的返回值类型即为构造器所属的类的类型</p>
<ul>
<li><p>格式： ClassName::new</p>
</li>
<li><p>与函数式接口相结合，自动与函数式接口中方法兼容。</p>
</li>
<li><p>可以把构造器引用赋值给定义的方法，要求构造器参数列表要与接口中抽象方法的参数列表一致！</p>
<p>且方法的返回值即为构造器对应类的对象。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstructorRefTest</span> &#123;<br>	<span class="hljs-comment">//构造器引用</span><br>    <span class="hljs-comment">//Supplier中的T get()</span><br>    <span class="hljs-comment">//Employee的空参构造器：Employee()</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        Supplier&lt;Employee&gt; sup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Supplier</span>&lt;Employee&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Employee <span class="hljs-title function_">get</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Supplier&lt;Employee&gt;  sup1 = () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>        System.out.println(sup1.get());<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Supplier&lt;Employee&gt;  sup2 = Employee :: <span class="hljs-keyword">new</span>;<br>        System.out.println(sup2.get());<br>    &#125;<br><br>	<span class="hljs-comment">//Function中的R apply(T t)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        Function&lt;Integer,Employee&gt; func1 = id -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(id);<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> func1.apply(<span class="hljs-number">1001</span>);<br>        System.out.println(employee);<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        Function&lt;Integer,Employee&gt; func2 = Employee :: <span class="hljs-keyword">new</span>;<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee1</span> <span class="hljs-operator">=</span> func2.apply(<span class="hljs-number">1002</span>);<br>        System.out.println(employee1);<br>    &#125;<br><br>	<span class="hljs-comment">//BiFunction中的R apply(T t,U u)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>        BiFunction&lt;Integer,String,Employee&gt; func1 = (id,name) -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(id,name);<br>        System.out.println(func1.apply(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>        BiFunction&lt;Integer,String,Employee&gt; func2 = Employee :: <span class="hljs-keyword">new</span>;<br>        System.out.println(func2.apply(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;Tom&quot;</span>));<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="数组引用"><a href="#数组引用" class="headerlink" title="数组引用"></a>数组引用</h3><p>可以把数组看做是一个特殊的类，则写法与构造器引用一致。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    Function&lt;Integer,String[]&gt; func1 = length -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[length];<br>    String[] arr1 = func1.apply(<span class="hljs-number">5</span>);<br>    System.out.println(Arrays.toString(arr1));<br>    System.out.println(<span class="hljs-string">&quot;*******************&quot;</span>);<br><br>    Function&lt;Integer,String[]&gt; func2 = String[] :: <span class="hljs-keyword">new</span>;<br>    String[] arr2 = func2.apply(<span class="hljs-number">10</span>);<br>    System.out.println(Arrays.toString(arr2));<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h3><h4 id="Stream-API-说明"><a href="#Stream-API-说明" class="headerlink" title="Stream API 说明"></a>Stream API 说明</h4><p>Stream API ( java.util.stream) 把真正的函数式编程风格引入到 Java 中。这是目前为止对Java类库最好的补充，因为 Stream API 可以极大提供 Java 程序员的生产力，让程序员写出高效率、干净、简洁的代码。</p>
<p>Stream 是 Java8 中处理集合的关键抽象概念，它可以指定你希望对集合进行的操作，可以执行非常复杂的查找、过滤和映射数据等操作。 使用 Stream API 对集合数据进行操作，就类似于使用 SQL 执行的数据库查询。也可以使用 Stream API 来并行执行操作。简言之，Stream API 提供了一种高效且易于使用的处理数据的方式。</p>
<h4 id="为什么要使用Stream-API"><a href="#为什么要使用Stream-API" class="headerlink" title="为什么要使用Stream API"></a>为什么要使用Stream API</h4><p>实际开发中，项目中多数数据源都来自于Mysql，Oracle等。但现在数据源可以更多了，有MongDB，Radis等，而这些NoSQL的数据就需要 Java 层面去处理。</p>
<p>Stream 和 Collection 集合的区别：Collection 是一种静态的内存数据结构，而 Stream 是有关计算的。前者是主要面向内存，存储在内存中，后者主要是面向 CPU，通过 CPU 实现计算。</p>
<h4 id="什么是-Stream"><a href="#什么是-Stream" class="headerlink" title="什么是 Stream"></a>什么是 Stream</h4><p>是数据渠道，用于操作数据源（集合、数组等）所生成的元素序列。<br>“集合 讲的是数据，Stream 讲的是计算！”</p>
<p><strong>注意：</strong><br>① Stream 自己不会存储元素。<br>② Stream 不会改变源对象。相反，他们会返回一个持有结果的新Stream。<br>③ Stream 操作是延迟执行的。这意味着他们会等到需要结果的时候才执行。</p>
<h4 id="Stream-的操作三步骤"><a href="#Stream-的操作三步骤" class="headerlink" title="Stream 的操作三步骤"></a>Stream 的操作三步骤</h4><p>1- 创建 Stream（Stream的实例化）<br>一个数据源（如：集合、数组），获取一个流</p>
<p>2- 中间操作<br>一个中间操作链，对数据源的数据进行处理（过滤、映射、…)</p>
<p>3- 终止操作( 终端操作)<br>一旦执行终止操作，就执行中间操作链，并产生结果。之后，不能再被使用。</p>
 <img src="image-20220925154323456.png" srcset="/img/loading.gif" lazyload alt="image-20220925154323456" style="zoom:70%;" />

<h5 id="Stream-的创建"><a href="#Stream-的创建" class="headerlink" title="Stream 的创建"></a>Stream 的创建</h5><ul>
<li><p><strong>通过集合：</strong></p>
<p>Java8 中的 Collection 接口被扩展，提供了两个获取流的方法：</p>
<ul>
<li>default Stream&lt;E&gt; stream() : 返回一个顺序流</li>
<li>default Stream&lt;E&gt; parallelStream() : 返回一个并行流</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br><br>    <span class="hljs-comment">//default Stream&lt;E&gt; stream() : 返回一个顺序流（会按照集合中的顺序来操作）</span><br>    Stream&lt;Employee&gt; stream = employees.stream();<br><br>    <span class="hljs-comment">//default Stream&lt;E&gt; parallelStream() : 返回一个并行流</span><br>    Stream&lt;Employee&gt; parallelStream = employees.parallelStream();<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p><strong>通过数组：</strong></p>
<p>Java8 中的 Arrays 的静态方法 stream() 可以获取数组流：</p>
<ul>
<li>static &lt;T&gt; Stream&lt;T&gt; stream(T[] array): 返回一个流</li>
</ul>
<p>重载形式，能够处理对应基本类型的数组：</p>
<ul>
<li>public static IntStream stream(int[] array)</li>
<li>public static LongStream stream(long[] array)</li>
<li>public static DoubleStream stream(double[] array)</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span>[] arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;;<br>    <span class="hljs-comment">//调用Arrays类的static &lt;T&gt; Stream&lt;T&gt; stream(T[] array): 返回一个流</span><br>    <span class="hljs-type">IntStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Arrays.stream(arr);<br><br>    <span class="hljs-type">Employee</span> <span class="hljs-variable">e1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>);<br>    <span class="hljs-type">Employee</span> <span class="hljs-variable">e2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;Jerry&quot;</span>);<br>    Employee[] arr1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>[]&#123;e1,e2&#125;;<br>    Stream&lt;Employee&gt; stream1 = Arrays.stream(arr1);<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p><strong>通过Stream 的of() ：</strong></p>
<p>可以调用Stream类静态方法 of()，通过显示值创建一个流。它可以接收任意数量的参数。</p>
<p> public static&lt;T&gt; Stream&lt;T&gt; of(T… values) ：返回一个流</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//基本数据类型会进行自动装箱</span><br>    Stream&lt;Integer&gt; stream = Stream.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p><strong>创建无限流：</strong></p>
<p>可以使用静态方法 Stream.iterate() 和 Stream.generate()，创建无限流。</p>
<ul>
<li><p>迭代：public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</p>
</li>
<li><p>生成：public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//迭代</span><br>    <span class="hljs-comment">//public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</span><br>    <span class="hljs-comment">//遍历前10个偶数</span><br>    Stream.iterate(<span class="hljs-number">0</span>, t -&gt; t + <span class="hljs-number">2</span>).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br><br>    <span class="hljs-comment">//生成</span><br>    <span class="hljs-comment">//public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</span><br>    Stream.generate(Math::random).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure>



<h5 id="Stream-的中间操作"><a href="#Stream-的中间操作" class="headerlink" title="Stream 的中间操作"></a>Stream 的中间操作</h5><p>多个 中间操作可以连接起来形成一个 流水线，除非流水线上触发终止操作，否则 中间操作不会执行任何的处理！而在 终止操作时一次性全部处理，称为“惰性求值”。</p>
<ul>
<li><p><strong>筛选与切片</strong></p>
 <img src="image-20220925162037977.png" srcset="/img/loading.gif" lazyload alt="image-20220925162037977" style="zoom: 67%;" />

 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1-筛选与切片</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; list = EmployeeData.getEmployees();<br>    <span class="hljs-comment">// filter(Predicate p)——接收 Lambda ， 从流中排除某些元素。</span><br>    Stream&lt;Employee&gt; stream = list.stream();<br>    <span class="hljs-comment">//练习：查询员工表中薪资大于7000的员工信息</span><br>    stream.filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">7000</span>).forEach(System.out::println);<br>    System.out.println();<br><br>    <span class="hljs-comment">// limit(n)——截断流，使其元素不超过给定数量。</span><br>    list.stream().limit(<span class="hljs-number">3</span>).forEach(System.out::println);<br>    System.out.println();<br><br>    <span class="hljs-comment">// skip(n) —— 跳过元素，返回一个扔掉了前 n 个元素的流。</span><br>    <span class="hljs-comment">// 若流中元素不足 n 个，则返回一个空流。与 limit(n) 互补</span><br>    list.stream().skip(<span class="hljs-number">3</span>).forEach(System.out::println);<br>    System.out.println();<br><br>    <span class="hljs-comment">// distinct()——筛选（去重），通过流所生成元素的 hashCode() 和 equals() 去除重复元素</span><br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;刘强东&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;刘强东&quot;</span>,<span class="hljs-number">41</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;刘强东&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;刘强东&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1010</span>,<span class="hljs-string">&quot;刘强东&quot;</span>,<span class="hljs-number">40</span>,<span class="hljs-number">8000</span>));<br>    <span class="hljs-comment">//System.out.println(list);</span><br>    list.stream().distinct().forEach(System.out::println);<br>    System.out.println();<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>映射</strong></p>
 <img src="image-20220925164043557.png" srcset="/img/loading.gif" lazyload alt="image-20220925164043557" style="zoom:67%;" />

 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//映射</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// map(Function f)：接收一个函数作为参数，将元素转换成其他形式或提取信息，</span><br>    <span class="hljs-comment">// 该函数会被应用到每个元素上，并将其映射成一个新的元素。</span><br>    List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;aa&quot;</span>, <span class="hljs-string">&quot;bb&quot;</span>, <span class="hljs-string">&quot;cc&quot;</span>, <span class="hljs-string">&quot;dd&quot;</span>);<br>    list.stream().map(str -&gt; str.toUpperCase()).forEach(System.out::println);<br><br>    <span class="hljs-comment">// 练习1：获取员工姓名长度大于3的员工的姓名。</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    Stream&lt;String&gt; namesStream = employees.stream().map(Employee::getName);<br>    namesStream.filter(name -&gt; name.length() &gt; <span class="hljs-number">3</span>).forEach(System.out::println);<br>    System.out.println();<br>    <span class="hljs-comment">//练习2：与flatMap对比</span><br>    Stream&lt;Stream&lt;Character&gt;&gt; streamStream = list.stream().map(StreamAPITest1::fromStringToStream);<br>    streamStream.forEach(s -&gt;&#123;<br>        s.forEach(System.out::println);<br>    &#125;);<br>    System.out.println();<br><br>    <span class="hljs-comment">// flatMap(Function f)：接收一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流连接成一个流。</span><br>    <span class="hljs-comment">// 如果说map(Function f)类似于ArrayList中的add()方法，</span><br>    <span class="hljs-comment">// 那么flatMap(Function f)就类似于addAll()方法</span><br>    Stream&lt;Character&gt; characterStream = list.stream().flatMap(StreamAPITest1::fromStringToStream);<br>    characterStream.forEach(System.out::println);<br>&#125;<br><br><span class="hljs-comment">//将字符串中的多个字符构成的集合转换为对应的Stream的实例</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Stream&lt;Character&gt; <span class="hljs-title function_">fromStringToStream</span><span class="hljs-params">(String str)</span>&#123;<span class="hljs-comment">//aa</span><br>    ArrayList&lt;Character&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-keyword">for</span>(Character c : str.toCharArray())&#123;<br>        list.add(c);<br>    &#125;<br>    <span class="hljs-keyword">return</span> list.stream();<br>&#125;<br><br><span class="hljs-meta">@Test</span>  <span class="hljs-comment">//举例</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>    list1.add(<span class="hljs-number">1</span>);<br>    list1.add(<span class="hljs-number">2</span>);<br>    list1.add(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>    list2.add(<span class="hljs-number">4</span>);<br>    list2.add(<span class="hljs-number">5</span>);<br>    list2.add(<span class="hljs-number">6</span>);<br><br>    <span class="hljs-comment">//        list1.add(list2);  //[1, 2, 3, [4, 5, 6]]</span><br>    list1.addAll(list2);  <span class="hljs-comment">//[1, 2, 3, 4, 5, 6]</span><br>    System.out.println(list1);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>排序</strong></p>
 <img src="image-20220925164121230.png" srcset="/img/loading.gif" lazyload alt="image-20220925164121230" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//3-排序</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// sorted()——自然排序</span><br>    List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">12</span>, <span class="hljs-number">43</span>, <span class="hljs-number">65</span>, <span class="hljs-number">34</span>, <span class="hljs-number">87</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">98</span>, <span class="hljs-number">7</span>);<br>    list.stream().sorted().forEach(System.out::println);<br>    <br>    <span class="hljs-comment">// 下面代码抛异常，原因:Employee没有实现Comparable接口</span><br>    <span class="hljs-comment">// List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br>    <span class="hljs-comment">// employees.stream().sorted().forEach(System.out::println);</span><br><br>    <span class="hljs-comment">// sorted(Comparator com)——定制排序</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    employees.stream().sorted( (e1,e2) -&gt; &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ageValue</span> <span class="hljs-operator">=</span> Integer.compare(e1.getAge(),e2.getAge());<br>        <span class="hljs-keyword">if</span>(ageValue != <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> ageValue;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> -Double.compare(e1.getSalary(),e2.getSalary());<br>        &#125;<br>    &#125;).forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h5 id="Stream-的终止操作"><a href="#Stream-的终止操作" class="headerlink" title="Stream 的终止操作"></a>Stream 的终止操作</h5><p>终端操作会从流的流水线生成结果。其结果可以是任何不是流的值，例如：List、Integer，甚至是 void 。</p>
<p>流进行了终止操作后，不能再次使用。</p>
<ul>
<li><p><strong>匹配与查找</strong></p>
 <img src="image-20220925193138861.png" srcset="/img/loading.gif" lazyload alt="image-20220925193138861" style="zoom: 67%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1-匹配与查找</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br><br>    <span class="hljs-comment">// allMatch(Predicate p)：检查是否匹配所有元素。</span><br>    <span class="hljs-comment">// 练习：是否所有的员工的年龄都大于18</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">allMatch</span> <span class="hljs-operator">=</span> employees.stream().allMatch(e -&gt; e.getAge() &gt; <span class="hljs-number">18</span>);<br>    System.out.println(allMatch);<br><br>    <span class="hljs-comment">// anyMatch(Predicate p)：检查是否至少匹配一个元素。</span><br>    <span class="hljs-comment">// 练习：是否存在员工的工资大于 10000</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">anyMatch</span> <span class="hljs-operator">=</span> employees.stream().anyMatch(e -&gt; e.getSalary() &gt; <span class="hljs-number">10000</span>);<br>    System.out.println(anyMatch);<br><br>    <span class="hljs-comment">// noneMatch(Predicate p)：检查是否没有匹配的元素。</span><br>    <span class="hljs-comment">// 练习：是否存在员工姓“雷”</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">noneMatch</span> <span class="hljs-operator">=</span> employees.stream().noneMatch(e -&gt; e.getName().startsWith(<span class="hljs-string">&quot;雷&quot;</span>));<br>    System.out.println(noneMatch);<br><br>    <span class="hljs-comment">// findFirst：返回第一个元素</span><br>    Optional&lt;Employee&gt; employee = employees.stream().findFirst();<br>    System.out.println(employee);<br><br>    <span class="hljs-comment">// findAny：返回当前流中的任意元素</span><br>    Optional&lt;Employee&gt; employee1 = employees.parallelStream().findAny();<br>    System.out.println(employee1);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    <span class="hljs-comment">// count——返回流中元素的总个数</span><br>    <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> employees.stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">5000</span>).count();<br>    System.out.println(count);<br><br>    <span class="hljs-comment">// max(Comparator c)——返回流中最大值</span><br>    <span class="hljs-comment">// 练习：返回最高的工资：</span><br>    Stream&lt;Double&gt; salaryStream = employees.stream().map(e -&gt; e.getSalary());<br>    Optional&lt;Double&gt; maxSalary = salaryStream.max(Double::compare);<br>    System.out.println(maxSalary);<br><br>    <span class="hljs-comment">// min(Comparator c)——返回流中最小值</span><br>    <span class="hljs-comment">// 练习：返回最低工资的员工</span><br>    Optional&lt;Employee&gt; employee = employees.stream().min((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()));<br>    System.out.println(employee);<br>    System.out.println();<br><br>    <span class="hljs-comment">// forEach(Consumer c)——内部迭代</span><br>    employees.stream().forEach(System.out::println);<br><br>    <span class="hljs-comment">//使用集合的遍历操作</span><br>    employees.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
<li><p><strong>归约</strong></p>
<p>备注：map 和 reduce 的连接通常称为 map-reduce 模式，因 Google用它来进行网络搜索而出名。</p>
 <img src="image-20220925200039053.png" srcset="/img/loading.gif" lazyload alt="image-20220925200039053" style="zoom:67%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//2-归约</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// reduce(T identity, BinaryOperator)——可以将流中元素反复结合起来，得到一个值。返回 T</span><br>    <span class="hljs-comment">// 练习1：计算1-10的自然数的和</span><br>    List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>);<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> list.stream().reduce(<span class="hljs-number">0</span>, Integer::sum);<br>    System.out.println(sum);<br><br>    <span class="hljs-comment">// reduce(BinaryOperator) ——可以将流中元素反复结合起来，得到一个值。返回 Optional&lt;T&gt;</span><br>    <span class="hljs-comment">// 练习2：计算公司所有员工工资的总和</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    Stream&lt;Double&gt; salaryStream = employees.stream().map(Employee::getSalary);<br>    <span class="hljs-comment">// Optional&lt;Double&gt; sumMoney = salaryStream.reduce(Double::sum);</span><br>    Optional&lt;Double&gt; sumMoney = salaryStream.reduce((d1,d2) -&gt; d1 + d2);<br>    System.out.println(sumMoney.get());<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
<li><p><strong>收集</strong></p>
 <img src="image-20220925201152414.png" srcset="/img/loading.gif" lazyload alt="image-20220925201152414" style="zoom:60%;" />

<p>Collector 接口中方法的实现决定了如何对流执行收集的操作(如收集到 List、Set、Map)。<br>另外， Collectors 实用类提供了很多静态方法，可以方便地创建常见收集器实例，具体方法与实例如下表：</p>
 <img src="image-20220925201237667.png" srcset="/img/loading.gif" lazyload alt="image-20220925201237667" style="zoom:66%;" />

 <img src="image-20220925201407366.png" srcset="/img/loading.gif" lazyload alt="image-20220925201407366" style="zoom:68%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//3-收集</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// collect(Collector c)——将流转换为其他形式。接收一个 Collector接口的实现，用于给Stream中元素做汇总的方法</span><br>    <span class="hljs-comment">// 练习1：查找工资大于6000的员工，结果返回为一个List或Set</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    List&lt;Employee&gt; employeeList = employees.stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).collect(Collectors.toList());<br>    employeeList.forEach(System.out::println);<br>    System.out.println();<br>    <br>    Set&lt;Employee&gt; employeeSet = employees.stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).collect(Collectors.toSet());<br>    employeeSet.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="Optional类"><a href="#Optional类" class="headerlink" title="Optional类"></a>Optional类</h3><p>Optional&lt;T&gt; 类(java.util.Optional) 是一个容器类，它可以保存类型T的值，代表这个值存在。或者仅仅保存null，表示这个值不存在。</p>
<p>原来用 null 表示一个值不存在，现在 Optional 可以更好的表达这个概念。并且可以避免空指针异常。</p>
<p>Optional类的Javadoc描述如下：这是一个可以为null的容器对象。</p>
<p>如果值存在则isPresent()方法会返回true，调用get()方法会返回该对象。</p>
<ul>
<li>Optional提供很多有用的方法，这样我们就不用显式进行空值检测。</li>
<li>创建Optional<ul>
<li>Optional.of(T t) : 创建一个 Optional 实例，t 必须 非空；</li>
<li>Optional.empty() : 创建一个空的 Optional 实例</li>
<li>Optional.ofNullable(T t) ：t 可以为 null</li>
</ul>
</li>
<li>判断Optional 容器中是否包含对象：<ul>
<li>boolean isPresent() : 判断是否包含对象</li>
<li>void ifPresent(Consumer&lt;? super T&gt; consumer) ：如果有值，就执行Consumer接口的实现代码，并且该值会作为参数传给它。</li>
</ul>
</li>
<li>获取Optional 容器的对象：</li>
<li>T get() : 如果调用对象包含值，返回该值，否则抛异常</li>
<li>T orElse(T other) ：如果有值则将其返回，否则返回指定的other对象。</li>
<li>T orElseGet(Supplier&lt;? extends T&gt; other) ：如果有值则将其返回，否则返回由Supplier接口实现提供的对象。</li>
<li>T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) ：如果有值则将其返回，否则抛出由Supplier接口实现提供的异常。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">Optional类：为了在程序中避免出现空指针异常而创建的。</span><br><span class="hljs-comment">常用方法：</span><br><span class="hljs-comment">Optional.of(T t) : 创建一个 Optional 实例，t必须非空；</span><br><span class="hljs-comment">Optional.empty() : 创建一个空的 Optional 实例</span><br><span class="hljs-comment">Optional.ofNullable(T t)：t可以为null</span><br><span class="hljs-comment">Optional.orElse(T t)：如果有值则将其返回，否则返回指定的other对象。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>();<br>    <span class="hljs-comment">//Girl girl = null;</span><br>    <span class="hljs-comment">//of(T t):保证t是非空的</span><br>    Optional&lt;Girl&gt; optionalGirl = Optional.of(girl);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>();<br>    <span class="hljs-comment">//Girl girl = null;</span><br>    <span class="hljs-comment">//ofNullable(T t)：t可以为null</span><br>    Optional&lt;Girl&gt; optionalGirl = Optional.ofNullable(girl);<br>    System.out.println(optionalGirl);<br><br>    <span class="hljs-comment">//orElse(T t1):如果当前的Optional内部封装的t是非空的，则返回内部的t.</span><br>    <span class="hljs-comment">//如果内部的t是空的，则返回orElse()方法中的参数t1.</span><br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl1</span> <span class="hljs-operator">=</span> optionalGirl.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;赵丽颖&quot;</span>));<br>    System.out.println(girl1);<br>&#125;<br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName</span><span class="hljs-params">(Boy boy)</span>&#123;<br>    <span class="hljs-keyword">return</span> boy.getGirl().getName();<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>();<br>    boy = <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName(boy);<br>    System.out.println(girlName);<br><br>&#125;<br><br><span class="hljs-comment">//优化以后的getGirlName():</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName1</span><span class="hljs-params">(Boy boy)</span>&#123;<br>    <span class="hljs-keyword">if</span>(boy != <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> boy.getGirl();<br>        <span class="hljs-keyword">if</span>(girl != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> girl.getName();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>();<br>    boy = <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName1(boy);<br>    System.out.println(girlName);<br>&#125;<br><br><span class="hljs-comment">//使用Optional类的getGirlName():</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName2</span><span class="hljs-params">(Boy boy)</span>&#123;<br>    Optional&lt;Boy&gt; boyOptional = Optional.ofNullable(boy);<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy1</span> <span class="hljs-operator">=</span> boyOptional.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;迪丽热巴&quot;</span>)));<br>    <span class="hljs-comment">//此时的boy1一定非空</span><br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> boy1.getGirl();<br>    Optional&lt;Girl&gt; girlOptional = Optional.ofNullable(girl);<br>    <span class="hljs-type">Girl</span> <span class="hljs-variable">girl1</span> <span class="hljs-operator">=</span> girlOptional.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;古力娜扎&quot;</span>));<br>    <span class="hljs-comment">//此时的girl1一定非空</span><br>    <span class="hljs-keyword">return</span> girl1.getName();<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>();<br>    <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;小女孩&quot;</span>));<br>    <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName2(boy);<br>    System.out.println(girlName);<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="JDBC-概述"><a href="#JDBC-概述" class="headerlink" title="JDBC 概述"></a>JDBC 概述</h3><ul>
<li><p>JDBC API 是一系列的接口，它统一和规范了应用程序与数据库的连接、执行 SQL 语句，并得到返回结果等各类操作，相关类和接口在 java.sql 与 javax.sql 包中</p>
</li>
<li><p>JDBC 为访问不同的数据库提供了统一的接口，为使用者屏蔽了细节问题</p>
</li>
<li><p>Java 程序员使用 JDBC，可以连接任何提供了 JDBC 驱动程序的数据库系统，从而完成对数据库的各种操作</p>
</li>
<li><p>JDBC 是 Java 提供一套用于数据库操作的 API ，Java 程序员只需要面向这套接口编程即可。</p>
<p>不同的数据库厂商，需要针对这套接口提供不同实现</p>
</li>
<li><p>JDBC 的基本原理图（重要）</p>
 <img src="image-20221010214327674.png" srcset="/img/loading.gif" lazyload alt="image-20221010214327674" style="zoom: 45%;" />

 <img src="image-20221010220350562.png" srcset="/img/loading.gif" lazyload alt="image-20221010220350562" style="zoom:80%;" /></li>
</ul>
<h3 id="JDBC-程序编写步骤"><a href="#JDBC-程序编写步骤" class="headerlink" title="JDBC 程序编写步骤"></a>JDBC 程序编写步骤</h3><ol>
<li>注册驱动 —— 加载 Driver 类</li>
<li>获取连接 —— 得到 Connection</li>
<li>执行增删改查 —— 发送 SQL 给 mysql 执行</li>
<li>释放资源 —— 关闭相关连接</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *	快速入门</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Driver;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Jdbc01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-comment">//前置工作：在项目下创建一个文件夹如 libs</span><br>        <span class="hljs-comment">//将 mysql.jar 拷贝到该目录下，点击 add to project..加入到项目中</span><br><br>        <span class="hljs-comment">//1.注册驱动</span><br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Driver</span>();<br><br>        <span class="hljs-comment">//2.得到连接</span><br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//(1) jdbc:mysql:// 规定好的，表示一个协议，通过jdbc的方式连接mysql</span><br>        <span class="hljs-comment">//(2) localhost  表示主机，也可以是一个IP地址</span><br>        <span class="hljs-comment">//(3) 3306  表示mysql监听的端口</span><br>        <span class="hljs-comment">//(4) lyh_db02 表示要连接到mysql的哪个数据库</span><br>        <span class="hljs-comment">//(5) mysql的连接的本质就是前面学过的 socket 连接</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br>        <span class="hljs-comment">//将用户名和密码放入到Properties对象</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//说明：user 和 password 是规定好的键，值可以根据实际情况写</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);  <span class="hljs-comment">//用户</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;lyh&quot;</span>);  <span class="hljs-comment">//密码</span><br>        <span class="hljs-comment">//得到的connect就是一个网络连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connect</span> <span class="hljs-operator">=</span> driver.connect(url, properties);<br><br>        <span class="hljs-comment">//3.执行sql</span><br><span class="hljs-comment">//        String sql = &quot;insert into actor values(null,&#x27;刘德华&#x27;,&#x27;男&#x27;,&#x27;1970-11-11&#x27;,&#x27;110&#x27;)&quot;;</span><br><span class="hljs-comment">//        String sql = &quot;update actor set name = &#x27;周星驰&#x27; where id = 1&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from actor where id = 1&quot;</span>;<br>        <span class="hljs-comment">//statement用于执行静态SQL语句并返回其生成的结构对象</span><br><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connect.createStatement();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> statement.executeUpdate(sql);  <span class="hljs-comment">//如果是dml语句，返回的就是影响行数</span><br>        System.out.println(rows&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;成功&quot;</span>:<span class="hljs-string">&quot;失败&quot;</span>);<br><br>        <span class="hljs-comment">//4.关闭连接资源</span><br>        statement.close();<br>        connect.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="获取数据库连接-5-种方式"><a href="#获取数据库连接-5-种方式" class="headerlink" title="获取数据库连接 5 种方式"></a>获取数据库连接 5 种方式</h3><ul>
<li><p>方式一：获取 Driver 实现类对象  （会直接使用com.mysql.jdbc.Driver()，属于静态加载，灵活性差）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.mysql.jdbc.Driver();<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc_db&quot;</span>;<br><br><span class="hljs-type">Properties</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>info.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);<br>info.setProperty(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;hsp&quot;</span>);<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> driver.connect(url,info);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式二：使用反射机制</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Class</span> <span class="hljs-variable">clazz</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver)clazz.newInstance();<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc_db&quot;</span>;<br><br><span class="hljs-type">Properties</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>info.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);<br>info.setProperty(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;hsp&quot;</span>);<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> driver.connect(url,info);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式三：使用DriverManager替换Driver</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Class</span> <span class="hljs-variable">clazz</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver) clazz.newInstance();<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql//localhost:3306/jdbc_db&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br>DriverManager.registerDriver(driver);<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式四：使用 Class.forName 自动完成注册驱动，简化代码 &#x3D;&gt; 分析源码</p>
<p>提示：</p>
<ul>
<li>mysql 驱动 5.1.6 及以后 可以无需 Class.forName(“com.mysql.jdbc.Driver”);</li>
<li>从jdk1.5以后使用了jdbc4，不在需要显式调用class.forName() 注册驱动，而是自动调用驱动 jar 包下的 META-INF\services\java.sql.Driver 文本种的类名称取注册</li>
<li>建议还是写上 Class.forName(“com.mysql.jdbc.Driver”);  更加明确</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc_db&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>System.out.println(conn);<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式五（推荐）：在方式四的基础上，使用配置文件，连接数据库更灵活</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># mysql.propersties</span><br><span class="hljs-attr">user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">lyh</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/lyh_db02</span><br><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>代码：分析java连接mysql的5种方式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 分析java连接mysql的5种方式</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Driver;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcConn</span> &#123;<br>    <span class="hljs-comment">//方式一</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect01</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException&#123;<br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Driver</span>();<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br><br>        <span class="hljs-comment">//将用户名和密码放入到Properties对象</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//说明：user 和 password 是规定好的键，值可以根据实际情况写</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);  <span class="hljs-comment">//用户</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;lyh&quot;</span>);  <span class="hljs-comment">//密码</span><br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connect</span> <span class="hljs-operator">=</span> driver.connect(url,properties);<br>        System.out.println(connect);<br>    &#125;<br><br>    <span class="hljs-comment">//方式二</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect02</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException &#123;<br>        <span class="hljs-comment">//使用反射加载Driver类，动态加载，更加灵活，减少依赖性</span><br>        Class&lt;?&gt; aClass = Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver) aClass.newInstance();<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br><br>        <span class="hljs-comment">//将用户名和密码放入到Properties对象</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-comment">//说明：user 和 password 是规定好的键，值可以根据实际情况写</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>);  <span class="hljs-comment">//用户</span><br>        properties.setProperty(<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&quot;lyh&quot;</span>);  <span class="hljs-comment">//密码</span><br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connect</span> <span class="hljs-operator">=</span> driver.connect(url,properties);<br>        System.out.println(connect);<br>    &#125;<br><br>    <span class="hljs-comment">//方式三 使用DriverManager 替代 Diver 进行统一管理</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect03</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException &#123;<br>        <span class="hljs-comment">//使用反射加载Driver</span><br>        Class&lt;?&gt; aClass = Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver)aClass.newInstance();<br><br>        <span class="hljs-comment">//创建url和user和password</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br>        DriverManager.registerDriver(driver); <span class="hljs-comment">//注册Driver驱动</span><br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>        System.out.println(conn);<br>    &#125;<br><br>    <span class="hljs-comment">//方式四 使用 Class.forName 自动完成注册驱动，简化代码</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect04</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, SQLException &#123;<br>        <span class="hljs-comment">//使用反射加载 Driver 类</span><br>        <span class="hljs-comment">//在加载Driver类时，自动完成注册</span><br>        <span class="hljs-comment">/* 源码：</span><br><span class="hljs-comment">        1.静态代码块，在类加载时，会自动执行一次</span><br><span class="hljs-comment">        2.DriverManager.registerDriver(new Driver());</span><br><span class="hljs-comment">        3.因此注册driver的工作已经完成</span><br><span class="hljs-comment">        static &#123;</span><br><span class="hljs-comment">            try &#123;</span><br><span class="hljs-comment">                DriverManager.registerDriver(new Driver());</span><br><span class="hljs-comment">            &#125; catch (SQLException var1) &#123;</span><br><span class="hljs-comment">                throw new RuntimeException(&quot;Can&#x27;t register driver!&quot;);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         &#125;</span><br><span class="hljs-comment">         */</span><br>        Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br><br>        <span class="hljs-comment">//创建url和user和password</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/lyh_db02&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;lyh&quot;</span>;<br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url,user,password);<br>        System.out.println(conn);<br>    &#125;<br><br>    <span class="hljs-comment">//方式五 在方式四的基础上改进，增加配置文件，让连接mysql更加灵活</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect05</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException, SQLException &#123;<br>        <span class="hljs-comment">//通过Properties对象获取配置文件的信息</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//获取相关的值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br><br>        Class.forName(driver);<br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br><br>        System.out.println(connection);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="ResultSet-结果集"><a href="#ResultSet-结果集" class="headerlink" title="ResultSet[结果集]"></a>ResultSet[结果集]</h3><ul>
<li>表示数据库结果集的数据表，通常通过执行查询数据库的语句生成</li>
<li>ResultSet对象保持一个光标指向其当前的数据行。最初，光标位于第一行之前</li>
<li>next 方法 将光标移动到下一行，并且由于在 ResultSet 对象中没有更多行时返回 false，因此可以在 while 循环中来遍历结果集</li>
</ul>
 <img src="image-20221011193054014.png" srcset="/img/loading.gif" lazyload alt="image-20221011193054014" style="zoom: 50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示select语句返回ResultSet，并取出结果</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.resultset;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultSet_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">//通过Properties对象获取配置文件的信息</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//获取相关的值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        <span class="hljs-comment">//1.注册驱动</span><br>        Class.forName(driver);<br>        <span class="hljs-comment">//2.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br>        <span class="hljs-comment">//3.得到Statement</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br>        <span class="hljs-comment">//4.组织SQL</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select id,name,sex,borndate from actor&quot;</span>;<br>        <span class="hljs-comment">//执行给定的SQL语句，该语句返回单个ResultSet对象</span><br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);<br>        <span class="hljs-comment">//5.使用while取出数据</span><br>        <span class="hljs-keyword">while</span>(resultSet.next())&#123; <span class="hljs-comment">//让光标后移，如果没有更多行，则返回false</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> resultSet.getInt(<span class="hljs-number">1</span>);<span class="hljs-comment">//获取该行的第1列</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-number">2</span>);<span class="hljs-comment">//该行第2列</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-number">3</span>);<span class="hljs-comment">//</span><br>            <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> resultSet.getDate(<span class="hljs-number">4</span>);<br>            System.out.println(id + <span class="hljs-string">&quot;\t&quot;</span> + name + <span class="hljs-string">&quot;\t&quot;</span> + sex + <span class="hljs-string">&quot;\t&quot;</span> + date);<br>        &#125;<br>        <span class="hljs-comment">//6.关闭连接</span><br>        resultSet.close();<br>        statement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="Statement"><a href="#Statement" class="headerlink" title="Statement"></a>Statement</h3><ul>
<li>Statement对象 用于执行静态SQL语句并返回其生成的结果的对象</li>
<li>在连接建立后，需要对数据库进行访问，执行命名或是SQL语句，可以通过<ul>
<li>Statement [存在SQL注入]</li>
<li><strong>PreparedStatement</strong> [预处理]</li>
<li>CallableStatement [存储过程]</li>
</ul>
</li>
<li>Statement对象执行SQL语句，存在 <strong>SQL注入</strong> 风险</li>
<li>SQL注入是利用某些系统没有对用户的输入进行充分的检查，而在用户输入数据中注入非法的SQL语句段或命令，恶意攻击数据库</li>
<li>要防范SQL注入，只要用 PreparedStatement（从Statement扩展而来）取代Statement就可以了</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># 演示 sql注入<br>-- 创建一张表<br>CREATE TABLE admin ( -- 管理员表<br>	NAME VARCHAR(32) NOT NULL UNIQUE,<br>	pwd VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;) CHARACTER SET utf8;<br><br>-- 添加数据<br>INSERT INTO admin VALUES(&#x27;tom&#x27;, &#x27;123&#x27;);<br><br>-- 查找某个管理是否存在<br>SELECT *<br>	FROM admin<br>	WHERE NAME = &#x27;tom&#x27; AND pwd = &#x27;123&#x27;<br><br>-- SQL<br>-- 输入用户名 为 1&#x27; or<br>-- 输入万能密码 为 or &#x27;1&#x27;= &#x27;1<br>SELECT *<br>	FROM admin<br>	WHERE NAME = &#x27;1&#x27; OR &#x27;AND pwd = &#x27; OR &#x27;1&#x27;= &#x27;1&#x27;<br>SELECT * FROM admin<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.statement;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Statement_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-comment">//让用户输入管理员名和密码</span><br>        <span class="hljs-comment">//如果希望看到SQL注入，需要用nextLine()</span><br>        <span class="hljs-comment">//next()当接收到空格或单引号就表示结束</span><br>        System.out.print(<span class="hljs-string">&quot;请输入管理员名：&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_name</span> <span class="hljs-operator">=</span> scanner.nextLine();<br>        System.out.print(<span class="hljs-string">&quot;请输入管理员密码：&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_pwd</span> <span class="hljs-operator">=</span> scanner.nextLine();<br><br>        <span class="hljs-comment">//通过Properties对象获取配置文件的信息</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//获取相关的值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        <span class="hljs-comment">//1.注册驱动</span><br>        Class.forName(driver);<br>        <span class="hljs-comment">//2.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br>        <span class="hljs-comment">//3.得到Statement</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br>        <span class="hljs-comment">//4.组织SQL</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select name,pwd from admin where name = &#x27;&quot;</span><br>                + admin_name + <span class="hljs-string">&quot;&#x27; and pwd = &#x27;&quot;</span> +admin_pwd+ <span class="hljs-string">&quot;&#x27;&quot;</span>;<br><br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);<br>        <span class="hljs-keyword">if</span>(resultSet.next())&#123; <span class="hljs-comment">//如果查询到一条记录，则说明该管理员存在</span><br>            System.out.println(<span class="hljs-string">&quot;登录成功&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;登录失败&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//关闭连接</span><br>        resultSet.close();<br>        statement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">String sql = &quot;SELECT COUNT(*) FROM admin WHERE username =? AND PASSWORD=?&quot;;<br></code></pre></td></tr></table></figure>

<ul>
<li>PreparedStatement执行的SQL语句中的参数用问号（?）来表示，调用 PrepareStatement 对象的 setXXX() 方法来设置这些参数。setXXX() 方法有两个参数，第一个参数是要设置的 SQL 语句中的参数的索引（从 1 开始），第二个是设置的 SQL 语句中的参数的值</li>
<li>调用 executeQuery()，执行查询，返回 ResultSet 对象</li>
<li>调用 executeUpdate()，执行更新，包括增、删、修改，返回影响的行数</li>
</ul>
<p><strong>预处理好处：</strong></p>
<ul>
<li>不再使用  + 拼接SQL语句，减少语法错误</li>
<li>有效解决了SQL注入问题</li>
<li>大大减少了编译次数，效率较高</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 演示 PreparedStatement 使用 （查询）</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.preparedstatement_;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreparedStatement</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-comment">//让用户输入管理员名和密码</span><br>        <span class="hljs-comment">//如果希望看到SQL注入，需要用nextLine()</span><br>        <span class="hljs-comment">//next()当接收到空格或单引号就表示结束</span><br>        System.out.print(<span class="hljs-string">&quot;请输入管理员名：&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_name</span> <span class="hljs-operator">=</span> scanner.nextLine();<br>        System.out.print(<span class="hljs-string">&quot;请输入管理员密码：&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_pwd</span> <span class="hljs-operator">=</span> scanner.nextLine();<br><br>        <span class="hljs-comment">//通过Properties对象获取配置文件的信息</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br><br>        <span class="hljs-comment">//获取相关的值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br><br>        <span class="hljs-comment">//1.注册驱动</span><br>        Class.forName(driver);<br><br>        <span class="hljs-comment">//2.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br><br>        <span class="hljs-comment">//3.得到PreparedStatement</span><br>        <span class="hljs-comment">//3.1组织SQL，SQL语句中的 ? 就相当于占位符</span><br>        <span class="hljs-comment">// 查询操作</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select name,pwd from admin where name =? and pwd =? &quot;</span>;<br><br>        <span class="hljs-comment">//3.2preparedStatement对象实现了PreparedStatement接口的实现类的对象</span><br>        java.sql.<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        <span class="hljs-comment">//3.3给 ? 赋值</span><br>        preparedStatement.setString(<span class="hljs-number">1</span>,admin_name);<br>        preparedStatement.setString(<span class="hljs-number">2</span>,admin_pwd);<br><br>        <span class="hljs-comment">//4.执行select语句，使用executeQuery()</span><br>        <span class="hljs-comment">//  如果执行的是dml，使用 executeUpdate()</span><br>        <span class="hljs-comment">//  这里执行executeQuery时，不要再写sql</span><br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> preparedStatement.executeQuery();<br>        <span class="hljs-keyword">if</span>(resultSet.next())&#123; <span class="hljs-comment">//如果查询到一条记录，则说明该管理员存在</span><br>            System.out.println(<span class="hljs-string">&quot;登录成功&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;登录失败&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//关闭连接</span><br>        resultSet.close();<br>        preparedStatement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 演示 PreparedStatement 使用 dml 语句</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.preparedstatement_;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreparedStatementDML_</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-comment">//让用户输入管理员名和密码</span><br>        <span class="hljs-comment">//如果希望看到SQL注入，需要用nextLine()</span><br>        <span class="hljs-comment">//next()当接收到空格或单引号就表示结束</span><br>        System.out.print(<span class="hljs-string">&quot;请输入要删除的管理员名：&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">admin_name</span> <span class="hljs-operator">=</span> scanner.nextLine();<br><span class="hljs-comment">//        System.out.print(&quot;请输入管理员新密码：&quot;);</span><br><span class="hljs-comment">//        String admin_pwd = scanner.nextLine();</span><br><br>        <span class="hljs-comment">//通过Properties对象获取配置文件的信息</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br><br>        <span class="hljs-comment">//获取相关的值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br><br>        <span class="hljs-comment">//1.注册驱动</span><br>        Class.forName(driver);<br><br>        <span class="hljs-comment">//2.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);<br><br>        <span class="hljs-comment">//3.得到PreparedStatement</span><br>        <span class="hljs-comment">//3.1组织SQL，SQL语句中的 ? 就相当于占位符</span><br>        <span class="hljs-comment">//添加记录</span><br>        <span class="hljs-comment">//String sql = &quot;insert into admin values(?, ?)&quot;;</span><br>        <span class="hljs-comment">//修改记录</span><br>        <span class="hljs-comment">//String sql = &quot;update admin set pwd =? where name =?&quot;;</span><br>        <span class="hljs-comment">//删除记录</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from admin where name = ? &quot;</span>;<br>        <span class="hljs-comment">//3.2preparedStatement对象实现了PreparedStatement接口的实现类的对象</span><br>        java.sql.<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        <span class="hljs-comment">//3.3给 ? 赋值</span><br>        preparedStatement.setString(<span class="hljs-number">1</span>,admin_name);<br>        <span class="hljs-comment">//preparedStatement.setString(2,admin_name);</span><br><br>        <span class="hljs-comment">//4.执行dml语句，使用executeUpdate()</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> preparedStatement.executeUpdate();<br>        System.out.println(rows &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;执行成功&quot;</span> : <span class="hljs-string">&quot;执行失败&quot;</span>);<br><br>        <span class="hljs-comment">//关闭连接</span><br>        preparedStatement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="JDBC-的相关-API-小结"><a href="#JDBC-的相关-API-小结" class="headerlink" title="JDBC 的相关 API 小结"></a>JDBC 的相关 API 小结</h3> <img src="image-20221011220559484.png" srcset="/img/loading.gif" lazyload alt="image-20221011220559484" style="zoom: 50%;" />

 <img src="image-20221011220610323.png" srcset="/img/loading.gif" lazyload alt="image-20221011220610323" style="zoom: 47%;" />





<h3 id="封装-JDBCUtils"><a href="#封装-JDBCUtils" class="headerlink" title="封装 JDBCUtils"></a>封装 JDBCUtils</h3><p>关闭连接, 得到连接</p>
<p>在 jdbc 操作中，获取连接 和 释放资源 时经常使用到，可以将其封装 JDBC 连接的工具类 JDBCUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.utils;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Statement;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 这是一个工具类，完成 mysql的连接和关闭资源</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtils</span> &#123;<br>    <span class="hljs-comment">//定义相关的属性（4个），因为只需要一份，因此做成static</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String user; <span class="hljs-comment">//用户名</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String password; <span class="hljs-comment">//密码</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String url;  <span class="hljs-comment">//url</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String driver; <span class="hljs-comment">//驱动名</span><br><br>    <span class="hljs-comment">//在static代码块去初始化</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>            <span class="hljs-comment">//读取相关的属性值</span><br>            user = properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>            password = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>            url = properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>            driver = properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-comment">//在实际开发中，我们可以这样处理</span><br>            <span class="hljs-comment">//1.将编译异常转成运行异常</span><br>            <span class="hljs-comment">//2.这时调用者可以选择捕获该异常，也可以选择默认处理该异常</span><br>            <span class="hljs-keyword">throw</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//连接数据库，返回Connection</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> DriverManager.getConnection(url,user,password);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-comment">//1.将编译异常转成运行异常</span><br>            <span class="hljs-comment">//2.这时调用者可以选择捕获该异常，也可以选择默认处理该异常</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//关闭相关资源</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        1.ResultSet 结果集</span><br><span class="hljs-comment">        2.Statement 或 PreparedStatement</span><br><span class="hljs-comment">        3.Connection</span><br><span class="hljs-comment">        4.如果需要关闭资源，就传入对象，否则传入null</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(ResultSet set, Statement statement, Connection connection)</span>&#123;<br>        <span class="hljs-comment">//判断是否为null</span><br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-keyword">if</span>(set!=<span class="hljs-literal">null</span>)&#123;<br>                set.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(statement!=<span class="hljs-literal">null</span>)&#123;<br>                statement.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(connection!=<span class="hljs-literal">null</span>)&#123;<br>                connection.close();<br>            &#125;<br>        &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="实际使用使用工具类-JDBCUtils"><a href="#实际使用使用工具类-JDBCUtils" class="headerlink" title="实际使用使用工具类 JDBCUtils"></a>实际使用使用工具类 JDBCUtils</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.utils;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtils_Use</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelect</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//1.得到连接（写进try语句，方便捕获异常）</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.组织一个sql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>;<br>        <br>        <span class="hljs-comment">//（写进try语句，方便捕获异常）</span><br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//3.创建PreparedStatement对象</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtils.getConnection();<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setInt(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br>            <span class="hljs-comment">//执行，得到结果集</span><br>            set = preparedStatement.executeQuery();<br>            <span class="hljs-comment">//遍历结果集</span><br>            <span class="hljs-keyword">while</span>(set.next())&#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> set.getInt(<span class="hljs-string">&quot;id&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;name&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;sex&quot;</span>);<br>                <span class="hljs-type">Date</span> <span class="hljs-variable">borndate</span> <span class="hljs-operator">=</span> set.getDate(<span class="hljs-string">&quot;borndate&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;phone&quot;</span>);<br>                System.out.println(id + <span class="hljs-string">&quot;\t&quot;</span> + name + <span class="hljs-string">&quot;\t&quot;</span> + sex + <span class="hljs-string">&quot;\t&quot;</span> + borndate + <span class="hljs-string">&quot;\t&quot;</span> + phone + <span class="hljs-string">&quot;\t&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭资源</span><br>            JDBCUtils.close(set,preparedStatement,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDML</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//insert, update, delete</span><br>        <span class="hljs-comment">//1.得到连接（写进try语句，方便捕获异常）</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.组织一个sql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update actor set name = ? where id = ?&quot;</span>;<br><br>        <span class="hljs-comment">//3.创建PreparedStatement对象（写进try语句，方便捕获异常）</span><br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.得到连接</span><br>            connection = JDBCUtils.getConnection();<br>            preparedStatement = connection.prepareStatement(sql);<br>            <span class="hljs-comment">//给占位符赋值</span><br>            preparedStatement.setString(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;周星驰&quot;</span>);<br>            preparedStatement.setInt(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>            <span class="hljs-comment">//执行</span><br>            preparedStatement.executeUpdate();<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭资源</span><br>            JDBCUtils.close(<span class="hljs-literal">null</span>,preparedStatement,connection);<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><ul>
<li>JDBC程序中当一个 Connection 对象创建时，默认情况下是自动提交事务：每次执行一个SQL语句，如果执行成功，就会像数据库自动提交，而不能回滚</li>
<li>JDBC程序中为了让多个SQL语句作为一个整体执行，需要使用事务</li>
<li>调用 Connection 的 setAutoCommit(false) 可以取消自动提交事务</li>
<li>在所有的 SQL 语句都成功执行后，调用 Connection 的 commit() 方法提交事务</li>
<li>在其中某个操作失败或出现异常时，调用 Connection 的 rollback() 方法回滚事务</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 操作转账的业务 演示 事务的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.transaction;<br><br><span class="hljs-keyword">import</span> com.jdbcStudy.utils.JDBCUtils;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Transaction_</span> &#123;<br>    <span class="hljs-comment">//没有使用事务</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">noTransaction</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//1.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.组织一个sql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance - 100 where id = 1&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance + 100 where id = 2&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//3.创建PreparedStatement对象</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.得到连接</span><br>            connection = JDBCUtils.getConnection();<br><br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//执行第一条</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>/<span class="hljs-number">0</span>;  <span class="hljs-comment">//抛出异常</span><br>            preparedStatement = connection.prepareStatement(sql2);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//执行第二条</span><br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭资源</span><br>            JDBCUtils.close(<span class="hljs-literal">null</span>,preparedStatement,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//使用事务</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">useTransaction</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//1.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//2.组织一个sql</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance - 100 where id = 1&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account02 set balance = balance + 100 where id = 2&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//3.创建PreparedStatement对象</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.得到连接</span><br>            connection = JDBCUtils.getConnection();<br>            <span class="hljs-comment">//将connection设置为不自动提交</span><br>            connection.setAutoCommit(<span class="hljs-literal">false</span>);  <span class="hljs-comment">//开启事务</span><br><br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//执行第一条</span><br>            <span class="hljs-comment">//int i = 1/0;  //抛出异常</span><br>            preparedStatement = connection.prepareStatement(sql2);<br>            preparedStatement.executeUpdate();<span class="hljs-comment">//执行第二条</span><br><br>            <span class="hljs-comment">//提交事务</span><br>            connection.commit();<br><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">//这里可以进行事务回滚，撤销执行的sql</span><br>            System.out.println(<span class="hljs-string">&quot;执行发生了异常，撤销执行的sql&quot;</span>);<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.rollback();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException ex) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(ex);<br>            &#125;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">//关闭资源</span><br>            JDBCUtils.close(<span class="hljs-literal">null</span>,preparedStatement,connection);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h3><ul>
<li>当需要成批插入或者更新记录时，可以采用 Java 的批量更新机制，这一机制允许多条语句一次性提交给数据库批量处理。通常情况下比单独提交处理更有效率</li>
<li>JDBC 的批量处理语句包括下面方法：<ul>
<li>addBatch()：添加需要批量处理的SQL语句或参数</li>
<li>executeBatch()：执行批量处理语句</li>
<li>clearBatch()：清空批处理包的语句</li>
</ul>
</li>
<li>JDBC 连接MySQL 时，如果要使用批处理功能，请在 url 中加参数 <strong>?rewriteBatchedStatements&#x3D;true</strong></li>
<li>批处理往往和 PreparedStatement 一起搭配使用，可以既减少编译次数，又减少允许次数，效率大大提高</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示java的批处理</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.batch_;<br><br><span class="hljs-keyword">import</span> com.jdbcStudy.utils.JDBCUtils;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Batch_</span> &#123;<br><br>    <span class="hljs-comment">//传统方法，添加5000条数据到admin2</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">noBatch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtils.getConnection();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into admin2 values(null, ?, ?)&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        System.out.println(<span class="hljs-string">&quot;开始执行&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//开始时间</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5000</span>;i++)&#123;<br>            preparedStatement.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;jack&quot;</span>+i);<br>            preparedStatement.setString(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;666&quot;</span>);<br>            preparedStatement.executeUpdate();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//开始时间</span><br>        System.out.println(<span class="hljs-string">&quot;耗时：&quot;</span> + (end-start));  <span class="hljs-comment">//1005</span><br>        <span class="hljs-comment">//关闭连接</span><br>        JDBCUtils.close(<span class="hljs-literal">null</span>, preparedStatement, connection);<br><br>    &#125;<br><br>    <span class="hljs-comment">//使用批量方式添加数据</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtils.getConnection();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into admin2 values(null, ?, ?)&quot;</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);<br>        System.out.println(<span class="hljs-string">&quot;开始执行&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//开始时间</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5000</span>;i++)&#123;<br>            preparedStatement.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;jack&quot;</span>+i);<br>            preparedStatement.setString(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;666&quot;</span>);<br>            <span class="hljs-comment">//将sql语句加入到批处理包中 -&gt; 看源码</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            1.第一次就创建 ArrayList - elementData =&gt; Object[]</span><br><span class="hljs-comment">            2.elementData =&gt; Object[] 就会存放我们预处理的sql语句</span><br><span class="hljs-comment">            3.当elementData满后，就按照1.5扩容</span><br><span class="hljs-comment">            4.当添加指定的值后，就执行executeBatch</span><br><span class="hljs-comment">            5.批量处理可以减少发送sql语句的网络开销，减少编译次数和运行次数，因此效率更高</span><br><span class="hljs-comment">            public void addBatch() throws SQLException &#123;</span><br><span class="hljs-comment">                synchronized(this.checkClosed().getConnectionMutex()) &#123;</span><br><span class="hljs-comment">                    if (this.batchedArgs == null) &#123;</span><br><span class="hljs-comment">                        this.batchedArgs = new ArrayList();</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                    for(int i = 0; i &lt; this.parameterValues.length; ++i) &#123;</span><br><span class="hljs-comment">                        this.checkAllParametersSet(this.parameterValues[i], this.parameterStreams[i], i);</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                    this.batchedArgs.add(new BatchParams(this.parameterValues, this.parameterStreams, this.isStream, this.streamLengths, this.isNull));</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">             */</span><br>            preparedStatement.addBatch();<br>            <span class="hljs-comment">//当有1000条记录时，批量执行</span><br>            <span class="hljs-keyword">if</span>((i+<span class="hljs-number">1</span>)%<span class="hljs-number">1000</span>==<span class="hljs-number">0</span>)&#123;<br>                preparedStatement.executeBatch();<br>                preparedStatement.clearBatch();<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();  <span class="hljs-comment">//开始时间</span><br>        System.out.println(<span class="hljs-string">&quot;耗时：&quot;</span> + (end-start));  <span class="hljs-comment">//64</span><br>        <span class="hljs-comment">//关闭连接</span><br>        JDBCUtils.close(<span class="hljs-literal">null</span>, preparedStatement, connection);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><h4 id="传统获取-Connection-问题分析"><a href="#传统获取-Connection-问题分析" class="headerlink" title="传统获取 Connection 问题分析"></a>传统获取 Connection 问题分析</h4><ul>
<li>传统的 JDBC 数据库连接使用 DriverManager 来获取，每次向数据库建立连接的时候都要将 Connection 加载到内存中，再验证 IP 地址、用户名和密码（0.05s ~ 1s 时间）。需要数据库连接的时候，就向数据库要求一个，频繁的进行数据库连接操作将占用很多的系统资源，容易造成服务器崩溃。</li>
<li>每一次数据库连接，使用完后都得断开，如果程序出现异常而未能关闭，将导致数据库内存泄漏，最终将导致重启数据库。</li>
<li>传统获取连接的方式，不能控制创建的连接数量，如连接过多，也可能导致内存泄漏，MySQL 崩溃</li>
<li>解决传统开发中的数据库连接问题，可以采用数据库连接池技术（connection pool）</li>
</ul>
<h4 id="数据库连接池简介"><a href="#数据库连接池简介" class="headerlink" title="数据库连接池简介"></a>数据库连接池简介</h4><ul>
<li><p>预先在缓冲池中放入一定数量的连接，当需要建立数据库连接时，只需从 “缓冲池” 中取出一个，使用完毕之后再放回去</p>
</li>
<li><p>数据库连接池负责分配、管理和释放数据库连接，它允许应用程序重复使用一个现有的数据库连接，而不是重新建立一个</p>
</li>
<li><p>当应用程序向连接池请求的连接数超过最大连接数量时，这些请求将被加入到等待队列中</p>
</li>
<li><p>数据库连接池示意图：</p>
 <img src="image-20221012195509452.png" srcset="/img/loading.gif" lazyload alt="image-20221012195509452" style="zoom: 67%;" />

  <img src="image-20221012195217855.png" srcset="/img/loading.gif" lazyload alt="image-20221012195217855" style="zoom: 67%;" /></li>
</ul>
<h4 id="数据库连接池种类"><a href="#数据库连接池种类" class="headerlink" title="数据库连接池种类"></a>数据库连接池种类</h4><ul>
<li>JDBC 的数据库连接池 使用 javax.sql.DataSource 来表示，DataSource 只是一个接口，该接口通常由第三方提供实现 [提供 .jar]</li>
<li>C3P0 数据库连接池，速度相对较慢，稳定性不错（hibernate，spring）</li>
<li>DBCP 数据库连接池，速度相对 C3P0 较快，但不稳定</li>
<li>Proxool 数据库连接池，有监控连接池状态的功能，稳定性较 C3P0 差一点</li>
<li>BoneCP 数据库连接池，速度快</li>
<li>Druid（德鲁伊）是阿里提供的数据库连接池，集 DBCP、C3P0、Proxool 优点于一身的数据库连接池</li>
</ul>
<h4 id="C3P0-应用实例"><a href="#C3P0-应用实例" class="headerlink" title="C3P0 应用实例"></a>C3P0 应用实例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">C3P0_</span> &#123;<br><br>    <span class="hljs-comment">//方式一：相关参数，再程序中指定user，url，password等</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testC3P0_01</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">//1. 创建一个数据源对象</span><br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">comboPooledDataSource</span> <span class="hljs-operator">=</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br><br>        <span class="hljs-comment">//2.通过配置文件 mysql.properties 获取相关连接的信息</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\mysql.properties&quot;</span>));<br>        <span class="hljs-comment">//读取相关的属性值</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br><br>        <span class="hljs-comment">//给数据源 comboPooledDataSource 设置相关的参数</span><br>        <span class="hljs-comment">//说明：连接管理是由 comboPooledDataSource 来管理的</span><br>        comboPooledDataSource.setDriverClass(driver);<br>        comboPooledDataSource.setJdbcUrl(url);<br>        comboPooledDataSource.setUser(user);<br>        comboPooledDataSource.setPassword(password);<br><br>        <span class="hljs-comment">//设置初始化连接数</span><br>        comboPooledDataSource.setInitialPoolSize(<span class="hljs-number">10</span>);<br>        <span class="hljs-comment">//设置最大连接数（超过最大连接数就会进入等待队列）</span><br>        comboPooledDataSource.setMaxPoolSize(<span class="hljs-number">50</span>);<br><br>        <span class="hljs-comment">//测试连接池的效率</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5000</span>;i++)&#123;<br>            <span class="hljs-comment">//获取连接（从 DataSource 接口实现的）</span><br>            <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> comboPooledDataSource.getConnection();<br>            connection.close();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;耗时：&quot;</span> + (end - start)); <span class="hljs-comment">//耗时：371</span><br><br>        System.out.println(<span class="hljs-string">&quot;连接OK&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//方式二 使用配置文件模板来完成</span><br>    <span class="hljs-comment">//1.将 C3P0 提供的 c3p0.config.xml 拷贝到 src 目录下</span><br>    <span class="hljs-comment">//2.该文件指定了连接数据库和连接池的相关参数</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testC3P0_02</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">comboPooledDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>(<span class="hljs-string">&quot;db_pool&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> comboPooledDataSource.getConnection();<br>        System.out.println(<span class="hljs-string">&quot;连接OK&quot;</span>);<br>        connection.close();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>



<h4 id="Druid-德鲁伊-应用实例"><a href="#Druid-德鲁伊-应用实例" class="headerlink" title="Druid(德鲁伊)应用实例"></a>Druid(德鲁伊)应用实例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Druid_</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDruid</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//1.加入 Druid .jar包</span><br>        <span class="hljs-comment">//2.加入 配置文件，将该文件拷贝到项目的src目录</span><br>        <span class="hljs-comment">//3.创建 Properties 对象，读取配置文件</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\druid.properties&quot;</span>));<br><br>        <span class="hljs-comment">//4.创建一个指定参数的数据库连接池，Druid连接池</span><br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> DruidDataSourceFactory.createDataSource(properties);<br><span class="hljs-comment">//        Connection connection = dataSource.getConnection();</span><br><span class="hljs-comment">//        System.out.println(&quot;连接成功！&quot;);</span><br><span class="hljs-comment">//        connection.close();</span><br>        <span class="hljs-comment">//测试连接效率</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">500000</span>;i++)&#123;<br>            <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br><span class="hljs-comment">//            System.out.println(&quot;连接成功！&quot;);</span><br>            connection.close();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;耗时：&quot;</span>+(end-start)); <span class="hljs-comment">//耗时：398</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h4 id="将-JDBCUtils-工具类改成-Druid-德鲁伊-实现"><a href="#将-JDBCUtils-工具类改成-Druid-德鲁伊-实现" class="headerlink" title="将 JDBCUtils 工具类改成 Druid(德鲁伊)实现"></a>将 JDBCUtils 工具类改成 Druid(德鲁伊)实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtilsByDruid</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> DataSource ds;<br><br>    <span class="hljs-comment">//在静态代码块初始化ds</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-keyword">try</span> &#123;<br>            properties.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;src\\druid.properties&quot;</span>));<br>            ds = DruidDataSourceFactory.createDataSource(properties);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//编写getConnection方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException&#123;<br>        <span class="hljs-keyword">return</span> ds.getConnection();<br>    &#125;<br><br>    <span class="hljs-comment">//关闭连接（在数据库连接池技术中，close只是把使用的Connection对象放回连接池）</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(ResultSet resultSet, PreparedStatement statement, Connection connection)</span>&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-keyword">if</span>(resultSet!=<span class="hljs-literal">null</span>)&#123;<br>                resultSet.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(statement!=<span class="hljs-literal">null</span>)&#123;<br>                statement.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(connection!=<span class="hljs-literal">null</span>)&#123;<br>                connection.close();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>            <span class="hljs-keyword">throw</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Apache—DBUtils"><a href="#Apache—DBUtils" class="headerlink" title="Apache—DBUtils"></a>Apache—DBUtils</h3><h4 id="问题引出"><a href="#问题引出" class="headerlink" title="问题引出"></a>问题引出</h4><ol>
<li><p>关闭 connection 后，resultSet 结果集无法使用</p>
</li>
<li><p>resultSet 不利于数据的管理</p>
</li>
<li><p>示意图：</p>
 <img src="image-20221012213546711.png" srcset="/img/loading.gif" lazyload alt="image-20221012213546711" style="zoom: 43%;" /></li>
</ol>
<h4 id="使用土方法解决"><a href="#使用土方法解决" class="headerlink" title="使用土方法解决"></a>使用土方法解决</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//使用土方法解决ResultSet 封装到 ArrayList</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectToArrayList</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//1.得到连接（写进try语句，方便捕获异常）</span><br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-comment">//2.组织一个sql</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>;<br>    <span class="hljs-comment">//（写进try语句，方便捕获异常）</span><br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    ArrayList&lt;Actor&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Actor&gt;();  <span class="hljs-comment">//创建ArrayLiat对象，存放actor对象</span><br>    <span class="hljs-comment">//3.创建PreparedStatement对象</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        connection = JDBCUtilsByDruid.getConnection();<br>        System.out.println(connection.getClass());<br>        preparedStatement = connection.prepareStatement(sql);<br>        preparedStatement.setInt(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br>        <span class="hljs-comment">//执行，得到结果集</span><br>        set = preparedStatement.executeQuery();<br>        <span class="hljs-comment">//遍历结果集</span><br>        <span class="hljs-keyword">while</span>(set.next())&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> set.getInt(<span class="hljs-string">&quot;id&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;name&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;sex&quot;</span>);<br>            <span class="hljs-type">Date</span> <span class="hljs-variable">borndate</span> <span class="hljs-operator">=</span> set.getDate(<span class="hljs-string">&quot;borndate&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> set.getString(<span class="hljs-string">&quot;phone&quot;</span>);<br>            <span class="hljs-comment">//把得到的resultset记录，封装到Actor对象，加入到List集合</span><br>            list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Actor</span>(id,name,sex,borndate,phone));<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;list集合数据：&quot;</span>+list);<br>        <span class="hljs-keyword">for</span>(Actor actor:list)&#123;<br>            System.out.println(<span class="hljs-string">&quot;id=&quot;</span>+actor.getId() + <span class="hljs-string">&quot;\t&quot;</span> + actor.getName());<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-comment">//关闭资源</span><br>        JDBCUtilsByDruid.close(set,preparedStatement,connection);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Actor</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String sex;<br>    <span class="hljs-keyword">private</span> Date borndate;<br>    <span class="hljs-keyword">private</span> String phone;<br><br>    <span class="hljs-comment">//一定要给一个无参构造器，反射需要</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Actor</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <br>    <span class="hljs-comment">//有参构造器... get和set......</span><br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="基本介绍-11"><a href="#基本介绍-11" class="headerlink" title="基本介绍"></a>基本介绍</h4><ul>
<li>commons-dbutils 是 Apache 组织提供的一个开源 JDBC 工具类库，它是对 JDBC 的封装，使用 dbutils 能极大简化 jdbc 编码的工作量</li>
<li>DbUtils 类<ul>
<li>QueryRunner类：该类封装了SQL的执行，是线程安全的。可以实现增、删、改、查、批处理</li>
<li>使用 QueryRunner 类实现查询</li>
<li>ResultSetHandler 接口：该接口用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式</li>
</ul>
</li>
<li>方法：<ul>
<li>ArrayHandler：把结果集中的第一行数据转成对象数组</li>
<li>ArrayListHandler：把结果集中的每一行数据都转成一个数组，再存放到List中</li>
<li>BeanHandler：将结果中的第一行数据封装到一个对于的 JavaBean 实例中</li>
<li>BeanListHandler：将结果集中的每一行数据都封装到一个对于的 JavaBean 实例中，再存放到List中</li>
<li>ColumnListHandler：将结果集中某一列的数据存放到 List 中</li>
<li>KeyedHandler(name)：将结果集中的每行数据都封装到 Map 里，再把这些map再存到一个map里，其 key 为指定的key</li>
<li>MapHandler：将结果集中的第一行数据封装到一个 Map 里，key 是列名，value 就是对于的值</li>
<li>ManListHandler：将结果集中的每一行数据都封装到一个 Map 里，然后再存放到 List</li>
</ul>
</li>
</ul>
<h4 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.jdbc.datasource;<br><br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.QueryRunner;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DBUtils_USE</span> &#123;<br><br>    <span class="hljs-comment">//使用apache-DBUtils 工具类 + druid 完成对表的crud操作</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testQueryMany</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">//1.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.使用DBUtils类和结果，先引入DBUtils相关jar,加入到本Project</span><br><br>        <span class="hljs-comment">//3.创建 QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.就可以执行相关的方法，返回ArrayList</span><br>        <span class="hljs-comment">//String sql = &quot;select * from actor where id &gt;= ?&quot;;</span><br>        <span class="hljs-comment">//说明：sql语句也可以只查询部分列</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select id, name from actor where id &gt;= ?&quot;</span>;<br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//（1）query方法就是执行sql语句，得到resultset --&gt; 封装到 ArrayList 集合中</span><br>        <span class="hljs-comment">//（2）返回集合</span><br>        <span class="hljs-comment">//（3）connection：连接</span><br>        <span class="hljs-comment">//（4）sql：执行的sql语句</span><br>        <span class="hljs-comment">//（5）new BeanListHandler&lt;&gt;(XXX.class)：将 resultset -&gt; Actor对象 -&gt; 封装到 ArrayList</span><br>        <span class="hljs-comment">//    底层使用反射机制 去获取Actor类的属性，然后进行封装</span><br>        <span class="hljs-comment">//（6）最后的“1”就是给sql语句中的“?”赋值，可以有多个值，因为是可变参数</span><br>        <span class="hljs-comment">//（7）底层得到的resultset，会在query关闭，PreparedStatement也会关闭</span><br>        List&lt;Actor&gt; list = queryRunner.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;&gt;(Actor.class), <span class="hljs-number">1</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;输出集合信息：&quot;</span>);<br>        <span class="hljs-keyword">for</span>(Actor actor:list)&#123;<br>            System.out.println(actor);<br>        &#125;<br><br>        <span class="hljs-comment">//释放资源</span><br>        connection.close();<br>        <span class="hljs-comment">//JDBCUtilsByDruid.close(null,null,connection);</span><br>    &#125;<br><br>    <span class="hljs-comment">//演示 apache-dbutils + druid 完成 返回的结果是单行记录（单个对象）</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testQuerySingle</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//1.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.使用DBUtils类和结果，先引入DBUtils相关jar,加入到本Project</span><br><br>        <span class="hljs-comment">//3.创建 QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.就可以执行相关的方法，返回单个对象</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>;<br><br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//因为我们返回的是单行记录 &lt;---&gt; 单个对象，因此使用的Hander是BeanHandler</span><br>        <span class="hljs-type">Actor</span> <span class="hljs-variable">actor</span> <span class="hljs-operator">=</span> queryRunner.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanHandler</span>&lt;&gt;(Actor.class), <span class="hljs-number">3</span>);<br>        System.out.println(actor);<br><br>        <span class="hljs-comment">//释放资源</span><br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-comment">//演示 apache-dbutils + druid 完成 返回的结果是单行单列的情况 - 返回的就是object</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testScalar</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//1.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.使用DBUtils类和结果，先引入DBUtils相关jar,加入到本Project</span><br><br>        <span class="hljs-comment">//3.创建 QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.就可以执行相关的方法，返回单行单列</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select name from actor where id = ?&quot;</span>;<br>        <span class="hljs-comment">//解读：因为返回的是一个对象，使用的handler就是ScalarHandler</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> queryRunner.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScalarHandler</span>(), <span class="hljs-number">2</span>);<br>        System.out.println(obj);<br><br>        <span class="hljs-comment">//释放资源</span><br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-comment">//演示 apache-dbutils + druid 完成 dml（update, insert, delete）</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDML</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//1.得到连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JDBCUtilsByDruid.getConnection();<br><br>        <span class="hljs-comment">//2.使用DBUtils类和结果，先引入DBUtils相关jar,加入到本Project</span><br><br>        <span class="hljs-comment">//3.创建 QueryRunner</span><br>        <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">queryRunner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>        <span class="hljs-comment">//4.这里可以组织sql完成update, insert, delete</span><br>        <span class="hljs-comment">//String sql = &quot;update actor set name = ? where id = ?&quot;;  //修改</span><br>        <span class="hljs-comment">//String sql = &quot;insert into actor values(null, ?, ?, ?, ?)&quot;;  //插入</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from actor where id = ?&quot;</span>;<br><br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//(1) 执行dml操作是使用queryRunner.update()</span><br>        <span class="hljs-comment">//(2) 返回值是 受影响的行数</span><br>        <span class="hljs-comment">//int affectedRow = queryRunner.update(connection, sql, &quot;张三丰&quot;, 2);</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">affectedRow</span> <span class="hljs-operator">=</span> queryRunner.update(connection,sql,<span class="hljs-number">3</span>);<br>        System.out.println(affectedRow&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;执行成功&quot;</span>:<span class="hljs-string">&quot;执行没有影响到表&quot;</span>);<br><br>        <span class="hljs-comment">//释放资源</span><br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h4 id="源码解读"><a href="#源码解读" class="headerlink" title="源码解读"></a>源码解读</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//分析 queryRunner.query方法:</span><br><span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">query</span><span class="hljs-params">(Connection conn, String sql, ResultSetHandler&lt;T&gt; rsh, Object... params)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//定义PreparedStatement</span><br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//接收返回的 ResultSet</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//返回ArrayList</span><br><br>    <span class="hljs-keyword">try</span> &#123;<br>        stmt = <span class="hljs-built_in">this</span>.prepareStatement(conn, sql);<span class="hljs-comment">//创建PreparedStatement</span><br>        <span class="hljs-built_in">this</span>.fillStatement(stmt, params);<span class="hljs-comment">//对sql 进行 ? 赋值</span><br>        rs = <span class="hljs-built_in">this</span>.wrap(stmt.executeQuery());<span class="hljs-comment">//执行sql,返回resultset</span><br>        result = rsh.handle(rs);<br>        <span class="hljs-comment">//返回的resultset --&gt; arrayList[result] [使用到反射，对传入class对象处理]</span><br>    &#125; <span class="hljs-keyword">catch</span> (SQLException var33) &#123;<br>        <span class="hljs-built_in">this</span>.rethrow(var33, sql, params);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-built_in">this</span>.close(rs);<span class="hljs-comment">//关闭resultset</span><br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-built_in">this</span>.close((Statement)stmt);<span class="hljs-comment">//关闭preparedstatement对象</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="表和-JavaBean-的类型映射关系"><a href="#表和-JavaBean-的类型映射关系" class="headerlink" title="表和 JavaBean 的类型映射关系"></a>表和 JavaBean 的类型映射关系</h4><p>int –&gt; Integer</p>
<p>char、varchar –&gt; String</p>
<p>date –&gt; Date</p>
<p> <img src="/2019/10/10/JavaNote/image-20221012221856652.png" srcset="/img/loading.gif" lazyload alt="image-20221012221856652"></p>
<h3 id="DAO-和增删改查通用方法-BasicDao"><a href="#DAO-和增删改查通用方法-BasicDao" class="headerlink" title="DAO 和增删改查通用方法-BasicDao"></a>DAO 和增删改查通用方法-BasicDao</h3><h4 id="分析问题"><a href="#分析问题" class="headerlink" title="分析问题"></a>分析问题</h4><p>先分析一个问题：apache-dbutils + Druid 简化了 JDBC 开发，但还有不足</p>
<ul>
<li><p>SQL 语句是固定的，不能通过参数传入，通用性不好，需要进行改进，使其更方便执行 增删改查</p>
</li>
<li><p>对于 select 操作，如果有返回值，返回类型不能固定，需要使用 泛型</p>
</li>
<li><p>将来的表很多，业务需求复杂，不可能只靠一个 Java 类完成</p>
</li>
<li><p>引出 &#x3D;&gt; BasicDAO 画出示意图，看看在实际开发中，应该如何处理</p>
 <img src="image-20221012232155204.png" srcset="/img/loading.gif" lazyload alt="image-20221012232155204" style="zoom: 43%;" /></li>
</ul>
<img src="image-20221012232238621.png" srcset="/img/loading.gif" lazyload alt="image-20221012232238621" style="zoom:43%;" />



<h4 id="基本说明-2"><a href="#基本说明-2" class="headerlink" title="基本说明"></a>基本说明</h4><ul>
<li><strong>DAO：data access object 数据访问对象</strong></li>
<li>这样的通用类，称为 BasicDao，是专门和数据库交互的，即完成对数据库（表）的 crud 操作</li>
<li>在 BaiscDao 的基础上，实现一张表 对应一个 Dao，更好的完成功能，比如 Customer 表 - Customer.java类（javabean）</li>
</ul>
<h4 id="BasicDAO-应用实例"><a href="#BasicDAO-应用实例" class="headerlink" title="BasicDAO 应用实例"></a>BasicDAO 应用实例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jdbcStudy.dao_.dao;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.utils.JDBCUtilsByDruid;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.QueryRunner;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 开发BasicDAO，是其它DAO的父类</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicDAO</span>&lt;T&gt; &#123; <span class="hljs-comment">//泛型指定具体的类型</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">QueryRunner</span> <span class="hljs-variable">qr</span> <span class="hljs-operator">=</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>    <span class="hljs-comment">//开发通用的 dml 方法，针对任意的表</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(String sql, Object... parameters)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> qr.update(connection, sql, parameters);<br>            <span class="hljs-keyword">return</span> update;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> sql sql语句，可以有 ?</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> clazz 传入一个类的class对象，比如Actor.class</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> parameters 传入 ? 的具体的值，可以是多个</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 根据具体的clazz类型返回对应的ArrayList集合</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-comment">//返回多个对象（即查询的结果是多行），针对任意表</span><br>    <span class="hljs-keyword">public</span> List&lt;T&gt; <span class="hljs-title function_">queryMylti</span><span class="hljs-params">(String sql, Class&lt;T&gt; clazz, Object... parameters)</span>&#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-keyword">return</span> qr.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;T&gt;(clazz), parameters);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//查询单行结果的通用方法</span><br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">querySingle</span><span class="hljs-params">(String sql, Class&lt;T&gt; clazz, Object... parameters)</span>&#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-keyword">return</span> qr.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanHandler</span>&lt;T&gt;(clazz),parameters);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//查询单行单列的方法，即返回单值的方法</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">queryScalar</span><span class="hljs-params">(String sql, Object... parameters)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JDBCUtilsByDruid.getConnection();<br>            <span class="hljs-keyword">return</span> qr.query(connection, sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScalarHandler</span>(), parameters);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JDBCUtilsByDruid.close(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,connection);<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.jdbcStudy.dao_.dao;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.domain.Actor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActorDAO</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BasicDAO</span>&lt;Actor&gt;&#123;<br><br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.jdbcStudy.dao_.test;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.dao.ActorDAO;<br><span class="hljs-keyword">import</span> com.jdbcStudy.dao_.domain.Actor;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDAO</span> &#123;<br><br>    <span class="hljs-comment">//测试ActorDAO 对actor表的crud操作</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testActorDAO</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">ActorDAO</span> <span class="hljs-variable">actorDAO</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActorDAO</span>();<br>        <span class="hljs-comment">//1.查询</span><br>        List&lt;Actor&gt; actors = actorDAO.queryMylti(<span class="hljs-string">&quot;select * from actor where id &gt;= ?&quot;</span>, Actor.class, <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span>(Actor actor:actors)&#123;<br>            System.out.println(actor);<br>        &#125;<br><br>        <span class="hljs-comment">//2.查询单行记录</span><br>        <span class="hljs-type">Actor</span> <span class="hljs-variable">actor</span> <span class="hljs-operator">=</span> actorDAO.querySingle(<span class="hljs-string">&quot;select * from actor where id = ?&quot;</span>, Actor.class, <span class="hljs-number">4</span>);<br>        System.out.println(<span class="hljs-string">&quot;查询单行结果：&quot;</span>);<br>        System.out.println(actor);<br><br>        <span class="hljs-comment">//3.查询单行单列</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> actorDAO.queryScalar(<span class="hljs-string">&quot;select name from actor where id = ?&quot;</span>, <span class="hljs-number">4</span>);<br>        System.out.println(<span class="hljs-string">&quot;查询单行单列：&quot;</span>);<br>        System.out.println(o);<br><br>        <span class="hljs-comment">//4.dml操作 insert, update, delete</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> actorDAO.update(<span class="hljs-string">&quot;insert into actor values(null, ?, ?, ?, ?)&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>, <span class="hljs-string">&quot;男&quot;</span>, <span class="hljs-string">&quot;2000-11-11&quot;</span>, <span class="hljs-string">&quot;999&quot;</span>);<br>        System.out.println(update&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;执行成功&quot;</span>:<span class="hljs-string">&quot;执行没有影响&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="正则表达式基本介绍"><a href="#正则表达式基本介绍" class="headerlink" title="正则表达式基本介绍"></a>正则表达式基本介绍</h3><ul>
<li>一个正则表达式，就是用某种模式去匹配字符串的一个公式。</li>
</ul>
<h3 id="正则表达式底层实现-重要"><a href="#正则表达式底层实现-重要" class="headerlink" title="正则表达式底层实现(重要)"></a>正则表达式底层实现(重要)</h3><p>给出一段字符串(文本),请找出所有四个数字连在一起的子串， 比如:  应该找到 1998 1999 3443 9889 </p>
<p>&#x3D;&#x3D;&#x3D;&gt; 分析底层实现 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.regexp;<br><span class="hljs-keyword">import</span> java.util.regex.Matcher;<br><span class="hljs-keyword">import</span> java.util.regex.Pattern;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 分析java的正则表达式的底层实现(重要.)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegTheory</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1998年12月8日，第二代Java平台的企业版J2EE发布。1999年6月，Sun公司发布了&quot;</span> +<br>                <span class="hljs-string">&quot;第二代Java平台（简称为Java2）的3个版本：J2ME（Java2 Micro Edition，Java2平台的微型&quot;</span> +<br>                <span class="hljs-string">&quot;版），应用于移动、无线及有限资源的环境；J2SE（Java 2 Standard Edition，Java 2平台的&quot;</span> +<br>                <span class="hljs-string">&quot;标准版），应用于桌面环境；J2EE（Java 2Enterprise Edition，Java 2平台的企业版），应&quot;</span> +<br>                <span class="hljs-string">&quot;用3443于基于Java的应用服务器。Java 2平台的发布，是Java发展过程中最重要的一个&quot;</span> +<br>                <span class="hljs-string">&quot;里程碑，标志着Java的应用开始普及9889 &quot;</span>;<br>        <span class="hljs-comment">//目标：匹配所有四个数字</span><br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">//1. \\d 表示一个任意的数字</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d\\d)(\\d\\d)&quot;</span>;<br>        <span class="hljs-comment">//2. 创建模式对象[即正则表达式对象]</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-comment">//3. 创建匹配器</span><br>        <span class="hljs-comment">//说明：创建匹配器matcher， 按照 正则表达式的规则 去匹配 content字符串</span><br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-comment">//4.开始匹配</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         * matcher.find() 完成的任务 （考虑分组）</span><br><span class="hljs-comment">         * 什么是分组，比如  (\d\d)(\d\d) ,正则表达式中有() 表示分组,第1个()表示第1组,第2个()表示第2组...</span><br><span class="hljs-comment">         * 1. 根据指定的规则 ,定位满足规则的子字符串(比如(19)(98))</span><br><span class="hljs-comment">         * 2. 找到后，将 子字符串的开始的索引记录到 matcher对象的属性 int[] groups;</span><br><span class="hljs-comment">         *    2.1 groups[0] = 0 , 把该子字符串的结束的索引+1的值记录到 groups[1] = 4</span><br><span class="hljs-comment">         *    2.2 记录1组()匹配到的字符串 groups[2] = 0  groups[3] = 2</span><br><span class="hljs-comment">         *    2.3 记录2组()匹配到的字符串 groups[4] = 2  groups[5] = 4</span><br><span class="hljs-comment">         *    2.4.如果有更多的分组.....</span><br><span class="hljs-comment">         * 3. 同时记录oldLast 的值为 子字符串的结束的 索引+1的值即4, 即下次执行find时，就从4开始匹配</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         * matcher.group(0) 源码分析:</span><br><span class="hljs-comment">         * public String group(int group) &#123;</span><br><span class="hljs-comment">         *         if (first &lt; 0)</span><br><span class="hljs-comment">         *             throw new IllegalStateException(&quot;No match found&quot;);</span><br><span class="hljs-comment">         *         if (group &lt; 0 || group &gt; groupCount())</span><br><span class="hljs-comment">         *             throw new IndexOutOfBoundsException(&quot;No group &quot; + group);</span><br><span class="hljs-comment">         *         if ((groups[group*2] == -1) || (groups[group*2+1] == -1))</span><br><span class="hljs-comment">         *             return null;</span><br><span class="hljs-comment">         *         return getSubSequence(groups[group * 2], groups[group * 2 + 1]).toString();</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         *  1. 根据 groups[0]=0 和 groups[1]=4 的记录的位置，从content开始截取子字符串返回</span><br><span class="hljs-comment">         *     就是 [0,4) 包含 0 但是不包含索引为 4的位置</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  如果再次指向 find方法.仍然按上面分析来执行</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            <span class="hljs-comment">//小结</span><br>            <span class="hljs-comment">//1. 如果正则表达式有() 即分组</span><br>            <span class="hljs-comment">//2. 取出匹配的字符串规则如下</span><br>            <span class="hljs-comment">//3. group(0) 表示匹配到的子字符串</span><br>            <span class="hljs-comment">//4. group(1) 表示匹配到的子字符串的第1组字串</span><br>            <span class="hljs-comment">//5. group(2) 表示匹配到的子字符串的第2组字串</span><br>            <span class="hljs-comment">//6. ... 但是分组的数不能越界.</span><br>            System.out.println(<span class="hljs-string">&quot;找到: &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(<span class="hljs-string">&quot;第1组()匹配到的值=&quot;</span> + matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(<span class="hljs-string">&quot;第2组()匹配到的值=&quot;</span> + matcher.group(<span class="hljs-number">2</span>));<br><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="正则表达式语法"><a href="#正则表达式语法" class="headerlink" title="正则表达式语法"></a>正则表达式语法</h3><h4 id="基本介绍-12"><a href="#基本介绍-12" class="headerlink" title="基本介绍"></a>基本介绍</h4><p>如果想灵活运用正则表达式，必须了解其中各种元字符的功能，元字符从功能上大致分为：</p>
<ul>
<li>限定符</li>
<li>选择匹配符</li>
<li>分组组合和反向引用符</li>
<li>特殊字符</li>
<li>字符匹配符</li>
<li>定位符</li>
</ul>
<h4 id="元字符-转义号"><a href="#元字符-转义号" class="headerlink" title="元字符 - 转义号 \\"></a>元字符 - 转义号 \\</h4><p>\\ 符号说明：在使用正则表达式去检索某些特殊字符的时候，需要用到转义符号，否则检索不到结果甚至报错。</p>
<p>需要使用转义符号的字符： <strong>. * + ( ) $ &#x2F; \ ? [ ] ^ { }</strong> </p>
<p><strong>提示：在 Java 的正则表达式中， \\ 代表 一个 \</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//案例演示</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc$(a.bc(123( )&quot;</span>;<br>        <span class="hljs-comment">//匹配( =&gt; \\(</span><br>        <span class="hljs-comment">//匹配. =&gt; \\.</span><br>        <span class="hljs-comment">//String regStr = &quot;\\.&quot;;</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d\\d\\d&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d&#123;3&#125;&quot;</span>;<br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到 &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="元字符-字符匹配符"><a href="#元字符-字符匹配符" class="headerlink" title="元字符-字符匹配符"></a>元字符-字符匹配符</h4><ul>
<li><img src="image-20221014150658309.png" srcset="/img/loading.gif" lazyload alt="image-20221014150658309" style="zoom:60%;" />
</li>
<li><p>\\d 表示可以匹配 0-9 的任意一个数字，相当于 [0-9]</p>
</li>
<li><p>\\D 表示可以匹配不是 0-9 的任意一个字符，相当于 [^0-9]</p>
</li>
<li><p>\\w 表示匹配任意英文字符、数字和下划线，相当于 [a-zAA-Z0-9_]</p>
</li>
<li><p>\\W 表示匹配任意不是英文字符、数字和下划线的字符，相当于 [^a-zAA-Z0-9_]</p>
</li>
<li><p>\\s 表示匹配任何空白字符（空格、制表符等）</p>
</li>
<li><p>\\S 表示匹配任何非空白字符</p>
</li>
<li><p>. 表示匹配除 \n 之外的所有字符，如果要匹配 . ，则需要使用 \\.</p>
</li>
<li><p>注意：[ ] 里面的 [. ? *]表示匹配就是. ? *本身</p>
</li>
<li><p><strong>附表：</strong></p>
<img src="image-20221014150738567.png" srcset="/img/loading.gif" lazyload alt="image-20221014150738567" style="zoom:54%;" /></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示字符匹配符 的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a11c8abc _ABCy @&quot;</span>;<br>        <span class="hljs-comment">//String regStr = &quot;[a-z]&quot;;		//匹配 a-z之间任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;[A-Z]&quot;;		//匹配 A-Z之间任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;abc&quot;;		//匹配 abc 字符串[默认区分大小写]</span><br>        <span class="hljs-comment">//String regStr = &quot;(?i)abc&quot;;	//匹配 abc 字符串[不区分大小写]</span><br>        <span class="hljs-comment">//String regStr = &quot;a(?i)bc&quot;;	//匹配 abc 字符串[只有bc不区分大小写]</span><br>        <span class="hljs-comment">//String regStr = &quot;a((?i)b)c&quot;;	//匹配 abc 字符串[只有b不区分大小写]</span><br>        <span class="hljs-comment">//String regStr = &quot;[0-9]&quot;;		//匹配 0-9 之间任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;[^a-z]&quot;;		//匹配 不在 a-z之间任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;[^0-9]&quot;;		//匹配 不在 0-9之间任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;[abcd]&quot;;		//匹配 在 abcd中任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;\\D&quot;;		//匹配 不在 0-9的任意一个字符</span><br>        <span class="hljs-comment">//String regStr = &quot;\\w&quot;;		//匹配 大小写英文字母, 数字，下划线</span><br>        <span class="hljs-comment">//String regStr = &quot;\\W&quot;;		//匹配 等价于 [^a-zA-Z0-9_]</span><br>        <br>        <span class="hljs-comment">//\\s 匹配任何空白字符(空格,制表符等)</span><br>        <span class="hljs-comment">//String regStr = &quot;\\s&quot;;</span><br>        <span class="hljs-comment">//\\S 匹配任何非空白字符 ,和\\s刚好相反</span><br>        <span class="hljs-comment">//String regStr = &quot;\\S&quot;;</span><br>        <br>        <span class="hljs-comment">//.  匹配出 \n 之外的所有字符,如果要匹配.本身则需要使用 \\.</span><br>        <span class="hljs-comment">//String regStr = &quot;.&quot;;</span><br><br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">//1. 当创建Pattern对象时，指定 Pattern.CASE_INSENSITIVE, 表示匹配是不区分字母大小写.</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr<span class="hljs-comment">/*, Pattern.CASE_INSENSITIVE*/</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到 &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="元字符-选择匹配符"><a href="#元字符-选择匹配符" class="headerlink" title="元字符-选择匹配符"></a>元字符-选择匹配符</h4> <img src="image-20221015094843440.png" srcset="/img/loading.gif" lazyload alt="image-20221015094843440" style="zoom: 50%;" />

<ul>
<li><p>| 表示匹配 “|” 之前或之后的表达式</p>
<p>示例：ab|cd 表示匹配 ab 或者 cd</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 选择匹配符</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liangyinghua 梁 leung&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liang|梁|leung&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr<span class="hljs-comment">/*, Pattern.CASE_INSENSITIVE*/</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到 &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="元字符-限定符"><a href="#元字符-限定符" class="headerlink" title="元字符-限定符"></a>元字符-限定符</h4><ul>
<li><p>用于指定其前面的字符和组合项连续出现多少次</p>
</li>
<li><p><strong>细节：</strong>java匹配默认<strong>贪婪匹配</strong>，即尽可能匹配多的</p>
</li>
</ul>
 <img src="image-20221015095634088.png" srcset="/img/loading.gif" lazyload alt="image-20221015095634088" style="zoom: 60%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示限定符的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp05</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a111111aaaaaahello&quot;</span>;<br><br>        <span class="hljs-comment">//a&#123;3&#125;,1&#123;4&#125;,\\d&#123;2&#125;</span><br>        <span class="hljs-comment">//String regStr = &quot;a&#123;3&#125;&quot;;// 表示匹配 aaa</span><br>        <span class="hljs-comment">//String regStr = &quot;1&#123;4&#125;&quot;;// 表示匹配 1111</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d&#123;2&#125;&quot;;// 表示匹配 两位的任意数字字符</span><br><br>        <span class="hljs-comment">//a&#123;3,4&#125;,1&#123;4,5&#125;,\\d&#123;2,5&#125;</span><br>        <span class="hljs-comment">//细节：java匹配默认贪婪匹配，即尽可能匹配多的</span><br>        <span class="hljs-comment">//String regStr = &quot;a&#123;3,4&#125;&quot;; //表示匹配 aaa 或者 aaaa</span><br>        <span class="hljs-comment">//String regStr = &quot;1&#123;4,5&#125;&quot;; //表示匹配 1111 或者 11111</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d&#123;2,5&#125;&quot;; //匹配2,3,4,5位数</span><br><br>        <span class="hljs-comment">//1+</span><br>        <span class="hljs-comment">//String regStr = &quot;1+&quot;; //匹配一个1或者多个1</span><br>        <span class="hljs-comment">//String regStr = &quot;\\d+&quot;; //匹配一个数字或者多个数字</span><br><br>        <span class="hljs-comment">//1*</span><br>        <span class="hljs-comment">//String regStr = &quot;1*&quot;; //匹配0个1或者多个1</span><br><br>        <span class="hljs-comment">//演示?的使用, 遵守贪婪匹配</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a1?&quot;</span>; <span class="hljs-comment">//匹配 a 或者 a1</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr<span class="hljs-comment">/*, Pattern.CASE_INSENSITIVE*/</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到 &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="元字符-定位符"><a href="#元字符-定位符" class="headerlink" title="元字符-定位符"></a>元字符-定位符</h4><p>定位符, 规定要匹配的字符串出现的位置，比如在字符串的开始还是在结束的位置</p>
 <img src="image-20221015101518508.png" srcset="/img/loading.gif" lazyload alt="image-20221015101518508" style="zoom:54%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示定位符的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp06</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liangyinglianghua yhliang ggliang&quot;</span>;<br>        <span class="hljs-comment">//String content = &quot;123-abc&quot;;</span><br>        <span class="hljs-comment">//以至少1个数字开头，后接任意个小写字母的字符串</span><br>        <span class="hljs-comment">//String regStr = &quot;^[0-9]+[a-z]*&quot;;</span><br>        <span class="hljs-comment">//以至少1个数字开头, 必须以至少一个小写字母结束</span><br>        <span class="hljs-comment">//String regStr = &quot;^[0-9]+[a-z]+$&quot;;</span><br>        <span class="hljs-comment">//以至少1个数字开头, 中间是 - ,必须以至少一个小写字母结束</span><br>        <span class="hljs-comment">//String regStr = &quot;^[0-9]+\\-[a-z]+$&quot;;</span><br><br>        <span class="hljs-comment">// liang\\b表示匹配边界的liang</span><br>        <span class="hljs-comment">// [这里的边界是指：被匹配的字符串最后,也可以是空格的子字符串的后面]</span><br>        <span class="hljs-comment">// String regStr = &quot;liang\\b&quot;;</span><br>        <span class="hljs-comment">// \\B和\\b的含义刚刚相反</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liang\\B&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="分组与捕获"><a href="#分组与捕获" class="headerlink" title="分组与捕获"></a>分组与捕获</h4> <img src="image-20221015104242065.png" srcset="/img/loading.gif" lazyload alt="image-20221015104242065" style="zoom:80%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 分组</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp07</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;liangyinghua s7789 nn1189liang&quot;</span>;<br><br>        <span class="hljs-comment">//非命名分组</span><br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">// 1. matcher.group(0) 得到匹配到的字符串</span><br>        <span class="hljs-comment">// 2. matcher.group(1) 得到匹配到的字符串的第1个分组内容</span><br>        <span class="hljs-comment">// 3. matcher.group(2) 得到匹配到的字符串的第2个分组内容</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d\\d)(\\d\\d)&quot;</span>;<span class="hljs-comment">//匹配4个数字的字符串</span><br><br>        <span class="hljs-comment">//命名分组（即可以给分组取名）</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(?&lt;g1&gt;\\d\\d)(?&lt;g2&gt;\\d\\d)&quot;</span>;<span class="hljs-comment">//匹配4个数字的字符串</span><br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr2);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(<span class="hljs-string">&quot;第1个分组内容=&quot;</span> + matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(<span class="hljs-string">&quot;第1个分组内容[通过组名]=&quot;</span> + matcher.group(<span class="hljs-string">&quot;g1&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;第2个分组内容=&quot;</span> + matcher.group(<span class="hljs-number">2</span>));<br>            System.out.println(<span class="hljs-string">&quot;第2个分组内容[通过组名]=&quot;</span> + matcher.group(<span class="hljs-string">&quot;g2&quot;</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示非捕获分组, 语法比较奇怪</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp08</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello韩顺平教育 jack韩顺平老师 韩顺平同学hello韩顺平学生&quot;</span>;<br>        <br>        <span class="hljs-comment">//找到 韩顺平教育 、韩顺平老师、韩顺平同学 子字符串</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr11</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平教育|韩顺平老师|韩顺平同学&quot;</span>;<br>        <span class="hljs-comment">//上面的写法可以等价非捕获分组, 注意：不能 matcher.group(1)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr12</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平(?:教育|老师|同学)&quot;</span>;<br><br>        <span class="hljs-comment">//找到 韩顺平 这个关键字,但是要求只是查找韩顺平教育和 韩顺平老师 中包含有的韩顺平</span><br>        <span class="hljs-comment">//下面也是非捕获分组，不能使用 matcher.group(1)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr22</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平(?=教育|老师)&quot;</span>;<br><br>        <span class="hljs-comment">//找到 韩顺平 这个关键字,但是要求只是查找 不是 (韩顺平教育 和 韩顺平老师) 中包含有的韩顺平</span><br>        <span class="hljs-comment">//下面也是非捕获分组，不能使用 matcher.group(1)</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr32</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平(?!教育|老师)&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr32);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到: &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="非贪婪匹配-“-”"><a href="#非贪婪匹配-“-”" class="headerlink" title="非贪婪匹配 “?”"></a>非贪婪匹配 “?”</h4><p><strong>当此字符（?）紧随任何其他限定符（*、+、?、{*n*}、{*n*,}、{*n*,*m*}）之后时，匹配模式是”非贪心的”。”非贪心的”模式匹配搜索到的、尽可能短的字符串，而默认的”贪心的”模式匹配搜索到的、尽可能长的字符串。例如，在字符串”oooo”中，”o+?”只匹配单个”o”，而”o+”匹配所有”o”。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 非贪婪匹配</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp09</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello111111 ok&quot;</span>;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d+&quot;</span>; <span class="hljs-comment">//默认是贪婪匹配</span><br>         <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d+?&quot;</span>; <span class="hljs-comment">//非贪婪匹配</span><br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr2);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到: &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="应用案例-1"><a href="#应用案例-1" class="headerlink" title="应用案例"></a>应用案例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 正则表达式的应用实例</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp10</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;13588889999&quot;</span>;<br><br>        <span class="hljs-comment">// 汉字</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[\u0391-\uffe5]+$&quot;</span>;<br><br>        <span class="hljs-comment">// 邮政编码</span><br>        <span class="hljs-comment">// 要求：1.是1-9开头的一个六位数.  比如：123890</span><br>        <span class="hljs-comment">//      2.</span><br>        <span class="hljs-comment">//      3.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[1-9]\\d&#123;5&#125;$&quot;</span>;<br><br>        <span class="hljs-comment">// QQ号码</span><br>        <span class="hljs-comment">// 要求:  是1-9开头的一个(5位数-10位数)  比如:  12389 , 1345687 , 187698765</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[1-9]\\d&#123;4,9&#125;$&quot;</span>;<br><br>        <span class="hljs-comment">// 手机号码</span><br>        <span class="hljs-comment">// 要求: 必须以13,14,15,18 开头的11位数 , 比如 13588889999</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^1[3|4|5|8]\\d&#123;9&#125;$&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr1);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">if</span>(matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;满足格式&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;不满足格式&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示正则表达式的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp11</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//String content = &quot;https://www.bilibili.com/video/BV1fh411y7R8?from=search&amp;seid=1831060912083761326&quot;;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://edu.3dsmax.tech/yg/bilibili/my6652/pc/qg/05-51/index.html#201211-1?track_id=jMc0jn-hm-yHrNfVad37YdhOUh41XYmjlss9zocM26gspY5ArwWuxb4wYWpmh2Q7GzR7doU0wLkViEhUlO1qNtukyAgake2jG1bTd23lR57XzV83E9bAXWkStcAh4j9Dz7a87ThGlqgdCZ2zpQy33a0SVNMfmJLSNnDzJ71TU68Rc-3PKE7VA3kYzjk4RrKU&quot;</span>;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * 思路</span><br><span class="hljs-comment">         * 1. 先确定 url 的开始部分 https:// | http://</span><br><span class="hljs-comment">         * 2.然后通过 ([\w-]+\.)+[\w-]+ 匹配 www.bilibili.com</span><br><span class="hljs-comment">         * 3. /video/BV1fh411y7R8?from=sear 匹配(\/[\w-?=&amp;/%.#]*)?</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^((http|https)://)?([\\w-]+\\.)+[\\w-]+(\\/[\\w-?=&amp;/%.#]*)?$&quot;</span>;<span class="hljs-comment">//注意：[. ? *]表示匹配就是.本身</span><br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">if</span>(matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;满足格式&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;不满足格式&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//这里如果使用Pattern的matches 整体匹配 比较简洁</span><br>        System.out.println(Pattern.matches(regStr, content));<span class="hljs-comment">//</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="正则表达式三个常用类"><a href="#正则表达式三个常用类" class="headerlink" title="正则表达式三个常用类"></a>正则表达式三个常用类</h3><p>java.util.regex 包主要包括一下三个类 <strong>Pattern 类</strong>、<strong>Matcher 类</strong> 和 <strong>PatternSyntaxException</strong></p>
<ul>
<li><p><strong>Pattern 类</strong></p>
<p>Pattern 对象是一个正则表达式对象。Pattern 类没有公共构造方法。要创建一个 Pattern 对象，调用其公共静态方法，它返回一个 Pattern 对象。该方法接受一个正则表达式作为它的第一个参数，比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Pattern pattern= Pattern.compile(regStr);<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>Pattern.matches() 方法</strong> ：用于整体匹配, 在验证输入的字符串是否满足条件使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示Pattern.matches方法，用于整体匹配, 在验证输入的字符串是否满足条件使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PatternMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello abc hello, 韩顺平教育&quot;</span>;<br>        <span class="hljs-comment">//String regStr = &quot;hello&quot;;  //false</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello.*&quot;</span>;  <span class="hljs-comment">//true</span><br><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">matches</span> <span class="hljs-operator">=</span> Pattern.matches(regStr, content);<br>        System.out.println(<span class="hljs-string">&quot;整体匹配：&quot;</span> + matches);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>Matcher 类</strong></p>
<p>Matcher 对象是对输入字符串进行解释和匹配的引擎。与 Pattern 类一样，Matcher 也没有公共构造方法。需要调用 Pattern 对象的 matcher 方法来获得一个 Matcher 对象，比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Matcher 类的常用方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MatcherMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello edu jack hspedutom hello smith hello hspedu hspedu&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br><br>        <span class="hljs-comment">//matcher.start() 返回找到匹配的起始索引</span><br>        <span class="hljs-comment">//matcher.end() 返回找到匹配的尾部索引加1</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;=================&quot;</span>);<br>            System.out.println(matcher.start());<br>            System.out.println(matcher.end());<br>            System.out.println(<span class="hljs-string">&quot;找到: &quot;</span> + content.substring(matcher.start(), matcher.end()));<br>        &#125;<br><br>        <span class="hljs-comment">//整体匹配方法，常用于，去校验某个字符串是否满足某个规则</span><br>        System.out.println(<span class="hljs-string">&quot;整体匹配=&quot;</span> + matcher.matches());<br><br>        <span class="hljs-comment">//完成如果content 有 hspedu 替换成 韩顺平教育</span><br>        regStr = <span class="hljs-string">&quot;hspedu&quot;</span>;<br>        pattern = Pattern.compile(regStr);<br>        matcher = pattern.matcher(content);<br>        <span class="hljs-comment">//注意：返回的字符串才是替换后的字符串 原来的 content 不变化</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">newContent</span> <span class="hljs-operator">=</span> matcher.replaceAll(<span class="hljs-string">&quot;韩顺平教育&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;newContent=&quot;</span> + newContent);<br>        System.out.println(<span class="hljs-string">&quot;content=&quot;</span> + content);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>PatternSyntaxException</strong></p>
<p>PatternSyntaxException 是一个非强制异常类，它表示一个正则表达式模式中的语法错误。</p>
</li>
</ul>
<h3 id="分组、捕获、反向引用"><a href="#分组、捕获、反向引用" class="headerlink" title="分组、捕获、反向引用"></a>分组、捕获、反向引用</h3><ul>
<li><p><strong>分组</strong></p>
<p>用圆括号组成一个比较复杂的匹配模式，那么一个圆括号的部分就可以看作是一个子表达式&#x2F;一个分组</p>
</li>
<li><p><strong>捕获</strong></p>
<p>把正则表达式中子表达式&#x2F;分组匹配的内容，保存到内存中以数字编号或显式命名的组里，方便后面引用，从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。组0代表整个表达式</p>
</li>
<li><p><strong>反向引用</strong></p>
<p>圆括号的内容被捕获后，可以在这个括号后被使用，从而写出一个比较实用的匹配模式，称为反向引用。</p>
<p>反向引用 可在正则表达式内部，也可在正则表达式外部，内部反向引用 <strong>\\</strong>分组号，外部反向引用 **$**分组号</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 反向引用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp12</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;h1234el9876lo33333 j12324-333999111a1551ck14 tom11 jack22 yyy12345 xxx&quot;</span>;<br><br>        <span class="hljs-comment">//要匹配两个连续的相同数字 :  (\\d)\\1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d)\\1&quot;</span>;<br><br>        <span class="hljs-comment">//要匹配五个连续的相同数字： (\\d)\\1&#123;4&#125;</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d)\\1&#123;4&#125;&quot;</span>;<br><br>        <span class="hljs-comment">//要匹配个位与千位相同，十位与百位相同的数 5225 , 1551  (\\d)(\\d)\\2\\1</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(\\d)(\\d)\\2\\1&quot;</span>;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * 请在字符串中检索商品编号,形式如:12321-333999111 这样的号码,</span><br><span class="hljs-comment">         * 要求满足前面是一个五位数,然后一个-号,然后是一个九位数,连续的每三位要相同</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\\d&#123;5&#125;-(\\d)\\1&#123;2&#125;(\\d)\\2&#123;2&#125;(\\d)\\3&#123;2&#125;&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr4);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到 &quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="结巴去重案例"><a href="#结巴去重案例" class="headerlink" title="结巴去重案例"></a>结巴去重案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegExp13</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;我....我要....学学学学....编程java!&quot;</span>;<br><br>        <span class="hljs-comment">//1. 去掉所有的.</span><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;\\.&quot;</span>);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br>        content = matcher.replaceAll(<span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-comment">//2. 去掉重复的字  我我要学学学学编程java!</span><br>        <span class="hljs-comment">// 思路</span><br>        <span class="hljs-comment">//(1) 使用 (.)\\1+ 匹配连续重复的字</span><br>        <span class="hljs-comment">//(2) 使用 反向引用$1 来替换匹配到的内容</span><br>        <span class="hljs-comment">// 注意：因为正则表达式变化，所以需要重置 matcher</span><br>        pattern = Pattern.compile(<span class="hljs-string">&quot;(.)\\1+&quot;</span>);<span class="hljs-comment">//分组的捕获内容记录到$1</span><br>        matcher = pattern.matcher(content);<br>        <span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;找到=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>        &#125;<br>        <span class="hljs-comment">//使用 反向引用$1 来替换匹配到的内容</span><br>        content = matcher.replaceAll(<span class="hljs-string">&quot;$1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;content=&quot;</span> + content);<br><br>        <span class="hljs-comment">//3. 可以使用一条语句 去掉重复的字 我我要学学学学编程java!</span><br>        content = Pattern.compile(<span class="hljs-string">&quot;(.)\\1+&quot;</span>).matcher(content).replaceAll(<span class="hljs-string">&quot;$1&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;content=&quot;</span> + content);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="String-类中使用正则表达式"><a href="#String-类中使用正则表达式" class="headerlink" title="String 类中使用正则表达式"></a>String 类中使用正则表达式</h3><h4 id="替换功能"><a href="#替换功能" class="headerlink" title="替换功能"></a>替换功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String 类 </span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">replaceAll</span><span class="hljs-params">(String regex,String replacement)</span><br></code></pre></td></tr></table></figure>

<h4 id="判断功能"><a href="#判断功能" class="headerlink" title="判断功能"></a>判断功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String 类 </span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String regex)</span>  <span class="hljs-comment">//最终使用的是Matcher的matches()方法（整体匹配）</span><br></code></pre></td></tr></table></figure>

<h4 id="分割功能"><a href="#分割功能" class="headerlink" title="分割功能"></a>分割功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String 类 </span><br><span class="hljs-keyword">public</span> String[] split(String regex)<br></code></pre></td></tr></table></figure>

<h4 id="案例演示"><a href="#案例演示" class="headerlink" title="案例演示"></a>案例演示</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringReg</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2000年5月，JDK1.3、JDK1.4和J2SE1.3相继发布，几周后其&quot;</span> +<br>                <span class="hljs-string">&quot;获得了Apple公司Mac OS X的工业标准的支持。2001年9月24日，J2EE1.3发&quot;</span> +<br>                <span class="hljs-string">&quot;布。&quot;</span> +<br>                <span class="hljs-string">&quot;2002年2月26日，J2SE1.4发布。自此Java的计算能力有了大幅提升&quot;</span>;<br><br>        <span class="hljs-comment">//使用正则表达式方式，将 JDK1.3 和 JDK1.4 替换成JDK</span><br>        content = content.replaceAll(<span class="hljs-string">&quot;JDK1\\.3|JDK1\\.4&quot;</span>, <span class="hljs-string">&quot;JDK&quot;</span>);<br>        System.out.println(content);<br><br>        <span class="hljs-comment">//要求 验证一个 手机号， 要求必须是以138 139 开头的</span><br>        content = <span class="hljs-string">&quot;13888889999&quot;</span>;<br>        <span class="hljs-keyword">if</span> (content.matches(<span class="hljs-string">&quot;1(38|39)\\d&#123;8&#125;&quot;</span>)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;验证成功&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;验证失败&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//要求按照 # 或者 - 或者 ~ 或者 数字 来分割</span><br>        System.out.println(<span class="hljs-string">&quot;===================&quot;</span>);<br>        content = <span class="hljs-string">&quot;hello#abc-jack12smith~北京&quot;</span>;<br>        String[] split = content.split(<span class="hljs-string">&quot;#|-|~|\\d+&quot;</span>);<br>        <span class="hljs-keyword">for</span> (String s : split) &#123;<br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="章节习题"><a href="#章节习题" class="headerlink" title="章节习题"></a>章节习题</h3> <img src="image-20221015155516327.png" srcset="/img/loading.gif" lazyload alt="image-20221015155516327" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//规定电子邮件规则为</span><br><span class="hljs-comment">//只能有一个@</span><br><span class="hljs-comment">//@前面是用户名,可以是a-z A-Z 0-9 _-字符</span><br><span class="hljs-comment">//@后面是域名,并且域名只能是英文字母， 比如 sohu.com 或者 tsinghua.org.cn</span><br><span class="hljs-comment">//        写出对应的正则表达式, 验证输入的字符串是否为满足规则</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hsp@tsinghua.org.cn kkk&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[\\w-]+@([a-zA-Z]+\\.)+[a-zA-Z]+$&quot;</span>;<br><br>        <span class="hljs-keyword">if</span> (content.matches(regStr)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;匹配成功&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;匹配失败&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//说明</span><br>        <span class="hljs-comment">//1. String 的 matches 是整体匹配</span><br>        <span class="hljs-comment">//2. 看看这个matches 底层</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * String 的 matches</span><br><span class="hljs-comment">         *  public boolean matches(String regex) &#123;</span><br><span class="hljs-comment">         *         return Pattern.matches(regex, this);</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  Pattern</span><br><span class="hljs-comment">         *  public static boolean matches(String regex, CharSequence input) &#123;</span><br><span class="hljs-comment">         *         Pattern p = Pattern.compile(regex);</span><br><span class="hljs-comment">         *         Matcher m = p.matcher(input);</span><br><span class="hljs-comment">         *         return m.matches();</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  Mather类 match</span><br><span class="hljs-comment">         *  Attempts to match the entire region against the pattern</span><br><span class="hljs-comment">         *  public boolean matches() &#123;</span><br><span class="hljs-comment">         *         return match(from, ENDANCHOR);</span><br><span class="hljs-comment">         *     &#125;</span><br><span class="hljs-comment">         */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



 <img src="image-20221015155540189.png" srcset="/img/loading.gif" lazyload alt="image-20221015155540189" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//要求验证是不是整数或者小数</span><br><span class="hljs-comment">//提示： 这个题要考虑正数和负数</span><br><span class="hljs-comment">//比如： 123 -345 34.89 -87.9 -0.01 0.45 等</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 思路:</span><br><span class="hljs-comment"> * 1. 先写出简单的正则表达式</span><br><span class="hljs-comment"> * 2. 再逐步的完善[根据各种情况来完善]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;-0.89&quot;</span>; <span class="hljs-comment">//</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^[-+]?([1-9]\\d*|0)(\\.\\d+)?$&quot;</span>;<br><br>        <span class="hljs-keyword">if</span>(content.matches(regStr)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;匹配成功 是整数或者小数&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;匹配失败&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



 <img src="image-20221015160631226.png" srcset="/img/loading.gif" lazyload alt="image-20221015160631226" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://www.sohu.com:8080/abc/xxx/yyy/////inde@#$%x.htm&quot;</span>;<br><br>        <span class="hljs-comment">//因为正则表达式是根据要求来编写的，所以，如果需求需要的话，可以改进.</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">regStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^([a-zA-Z]+)://([a-zA-Z.]+):(\\d+)[\\w-/]*/([\\w.@#$%]+)$&quot;</span>;<br><br>        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regStr);<br>        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(content);<br><br>        <span class="hljs-keyword">if</span>(matcher.matches()) &#123;<span class="hljs-comment">//整体匹配, 如果匹配成功，可以通过group(x), 获取对应分组的内容</span><br>            System.out.println(<span class="hljs-string">&quot;整体匹配=&quot;</span> + matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(<span class="hljs-string">&quot;协议: &quot;</span> + matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(<span class="hljs-string">&quot;域名: &quot;</span> + matcher.group(<span class="hljs-number">2</span>));<br>            System.out.println(<span class="hljs-string">&quot;端口: &quot;</span> + matcher.group(<span class="hljs-number">3</span>));<br>            System.out.println(<span class="hljs-string">&quot;文件: &quot;</span> + matcher.group(<span class="hljs-number">4</span>));<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;没有匹配成功&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


































































                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Java基础</div>
      <div>https://leung-yh.github.io/2019/10/10/JavaNote/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Leungyh</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2019年10月10日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/07/03/GitNote/" title="Git">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Git</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
