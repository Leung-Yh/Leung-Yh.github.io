

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon/myfavicon.png">
  <link rel="icon" href="/img/icon/myfavicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Leungyh">
  <meta name="keywords" content="">
  
    <meta name="description" content="XMLXML简介 xml 是可扩展的标记性语言。 xml 的主要作用有：  1、用来保存数据，而且这些数据具有自我描述性  2、它还可以做为项目或者模块的配置文件  3、还可以做为网络传输数据的格式（现在 JSON 为主）。    xml语法 文档声明。 元素（标签）  xml 属性  xml 注释  文本区域（CDATA 区）  文档声明我们先创建一个简单 XML 文件，用来描述图书信息。 12">
<meta property="og:type" content="article">
<meta property="og:title" content="Leungyh&#39;s blog">
<meta property="og:url" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/index.html">
<meta property="og:site_name" content="Leungyh&#39;s blog">
<meta property="og:description" content="XMLXML简介 xml 是可扩展的标记性语言。 xml 的主要作用有：  1、用来保存数据，而且这些数据具有自我描述性  2、它还可以做为项目或者模块的配置文件  3、还可以做为网络传输数据的格式（现在 JSON 为主）。    xml语法 文档声明。 元素（标签）  xml 属性  xml 注释  文本区域（CDATA 区）  文档声明我们先创建一个简单 XML 文件，用来描述图书信息。 12">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028163054477.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028163729119.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028164205884.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028164914910.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028165143092.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028165341263.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028165751067.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029102548240.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029102629505.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029102801538.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029102921564.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029103014865.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029103109131.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029103154911.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029152741709.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/cf041a1e6f0e6b855236aa4b2e31b5fe.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/2206227828f73048db229808d7bee5ac.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/3a94a5e374068aec558d76792f521597.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/55638a1fdc3fdff01e0c8dc4d3dad2a0.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029155009337.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029155335280.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029155525513.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029160235155.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029160449832.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029160748750.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029160813286.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029160918072.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029162622306.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221029162650394.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030094353203.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030094456238.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030094525077.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030095342744.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030104054342.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030105212354.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030105334396.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030105855998.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030113608300.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030172733704.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030173417744.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030204645742.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030205637753.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030205812087.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030221835187.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030225950922.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221030230007804.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221031215943947.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221031223248480.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103161912141.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103162329016.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103162436135.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103183549184.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103223305270.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103224325787.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103224905402.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221103234209781.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221104144654925.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221104214608243.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221104221644866.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221105092644045.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221105092714040.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221105092836621.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221105105607665.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221105112814881.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221105165555719.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106092646241.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106092817265.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106093217145.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106093227280.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106093748695.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106094417773.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106094631669.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106165954177.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221106192429369.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221107150829615.png">
<meta property="og:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221112143554038.png">
<meta property="article:published_time" content="2023-07-04T12:43:26.685Z">
<meta property="article:modified_time" content="2023-07-04T12:44:10.118Z">
<meta property="article:author" content="Leungyh">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://leung-yh.github.io/2023/07/04/JavaWebNote/image-20221028163054477.png">
  
  
  
  <title>Leungyh&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"leung-yh.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Leungyh&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text=""></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-07-04 20:43" pubdate>
          2023年7月4日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          99k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          827 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header"></h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2023年7月4日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><h2 id="XML简介"><a href="#XML简介" class="headerlink" title="XML简介"></a>XML简介</h2><ul>
<li>xml 是可扩展的标记性语言。</li>
<li>xml 的主要作用有： <ul>
<li>1、用来保存数据，而且这些数据具有自我描述性 </li>
<li>2、它还可以做为项目或者模块的配置文件 </li>
<li>3、还可以做为网络传输数据的格式（现在 JSON 为主）。</li>
</ul>
</li>
</ul>
<h2 id="xml语法"><a href="#xml语法" class="headerlink" title="xml语法"></a>xml语法</h2><ol>
<li>文档声明。</li>
<li>元素（标签） </li>
<li>xml 属性 </li>
<li>xml 注释 </li>
<li>文本区域（CDATA 区）</li>
</ol>
<h3 id="文档声明"><a href="#文档声明" class="headerlink" title="文档声明"></a>文档声明</h3><p>我们先创建一个简单 XML 文件，用来描述图书信息。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span> ?&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="hljs-comment">    以上内容就是xml文件的声明</span><br><span class="hljs-comment">    version=&quot;1.0&quot;       version 表示xml的版本</span><br><span class="hljs-comment">    encoding=&quot;utf-8&quot;    encoding 表示xml文件本身的编码</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">books</span>&gt;</span> <span class="hljs-comment">&lt;!-- books 表示多个图书信息 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12312344&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!-- book 表示单个图书信息，sn属性表示图书序列号 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>时间简史<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span> <span class="hljs-comment">&lt;!-- name标签表示图书名 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>霍金<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span> <span class="hljs-comment">&lt;!-- author标签表示作者 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>75<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span> <span class="hljs-comment">&lt;!-- price标签表示价格 --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12312398&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!-- book 表示单个图书信息，sn属性表示图书序列号 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>java教程<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span> <span class="hljs-comment">&lt;!-- name标签表示图书名 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>大佐<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span> <span class="hljs-comment">&lt;!-- author标签表示作者 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>99<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span> <span class="hljs-comment">&lt;!-- price标签表示价格 --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">books</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在浏览器中可以查看到文档</p>
<h3 id="xml注释"><a href="#xml注释" class="headerlink" title="xml注释"></a>xml注释</h3><p>html 和 XML 注释 一样 : </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- html 注释 --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="元素（标签）"><a href="#元素（标签）" class="headerlink" title="元素（标签）"></a>元素（标签）</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml">们先回忆一下:<br>html 标签：<br>    格式：<span class="hljs-tag">&lt;<span class="hljs-name">标签名</span>&gt;</span>封装的数据<span class="hljs-tag">&lt;/<span class="hljs-name">标签名</span>&gt;</span><br>    单标签: <span class="hljs-tag">&lt;<span class="hljs-name">标签名</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span> 换行 <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>水平线<br>    双标签 <span class="hljs-tag">&lt;<span class="hljs-name">标签名</span>&gt;</span>封装的数据<span class="hljs-tag">&lt;/<span class="hljs-name">标签名</span>&gt;</span><br>    标签名大小写不敏感<br>    标签有属性，有基本属性和事件属性<br>    标签要闭合（不闭合 ，html 中不报错。但我们要养成良好的书写习惯。闭合）<br></code></pre></td></tr></table></figure>



<h4 id="什么是xml元素"><a href="#什么是xml元素" class="headerlink" title="什么是xml元素"></a>什么是xml元素</h4> <img src="image-20221028163054477.png" srcset="/img/loading.gif" lazyload alt="image-20221028163054477" style="zoom: 67%;" />



<h4 id="xml命名规则"><a href="#xml命名规则" class="headerlink" title="xml命名规则"></a>xml命名规则</h4><ul>
<li>XML 元素必须遵循以下命名规则：<ul>
<li>名称可以含字母、数字以及其他的字符</li>
<li>名称不能以数字或标点符号开始</li>
<li>名称不能包含空格</li>
</ul>
</li>
</ul>
<h4 id="xml单标签-amp-双标签"><a href="#xml单标签-amp-双标签" class="headerlink" title="xml单标签&amp;双标签"></a>xml单标签&amp;双标签</h4><ul>
<li><p>单标签</p>
<ul>
<li><p>格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">标签名</span> <span class="hljs-attr">属性</span>=<span class="hljs-string">&quot;值&quot;</span> <span class="hljs-attr">属性</span>=<span class="hljs-string">&quot;值&quot;</span> <span class="hljs-attr">...</span> /&gt;</span> <br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>双标签</p>
<ul>
<li><p>格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">标签名</span> <span class="hljs-attr">属性</span>=<span class="hljs-string">&quot;值&quot;</span> <span class="hljs-attr">属性</span>=<span class="hljs-string">&quot;值&quot;</span> <span class="hljs-attr">...</span> &gt;</span>文本数据或子标签<span class="hljs-tag">&lt;/<span class="hljs-name">标签名</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><img src="image-20221028163729119.png" srcset="/img/loading.gif" lazyload alt="image-20221028163729119" style="zoom:80%;" /></li>
</ul>
<h3 id="xml属性"><a href="#xml属性" class="headerlink" title="xml属性"></a>xml属性</h3><ul>
<li><p>xml 的标签属性和 html 的标签属性是非常类似的，属性可以提供元素的额外信息。</p>
</li>
<li><p>在标签上可以书写属性：</p>
<ul>
<li>一个标签上可以书写多个属性</li>
<li>每个属性的值必须用 引号 包起来</li>
<li>规则和标签的书写规则一致。</li>
</ul>
</li>
</ul>
<img src="image-20221028164205884.png" srcset="/img/loading.gif" lazyload alt="image-20221028164205884" style="zoom:80%;" />



<h3 id="语法规则"><a href="#语法规则" class="headerlink" title="语法规则"></a>语法规则</h3><ul>
<li><p>所有 xml 元素都必须闭合（即要有开始标签和结束标签）</p>
</li>
<li><p>xml 标签对大小写敏感</p>
</li>
<li><p>xml 文档必须有根元素</p>
<ul>
<li>根元素就是顶级元素， 没有父标签的元素，叫顶级元素。 </li>
<li>根元素是没有父标签的顶级元素，而且是唯一一个才行。</li>
<li><img src="image-20221028164914910.png" srcset="/img/loading.gif" lazyload alt="image-20221028164914910" style="zoom: 67%;" /></li>
</ul>
</li>
<li><p>xml 的属性值必须用引号包含</p>
</li>
<li><p>xml 的特殊字符的使用</p>
<ul>
<li><img src="image-20221028165143092.png" srcset="/img/loading.gif" lazyload alt="image-20221028165143092" style="zoom:67%;" /></li>
</ul>
</li>
<li><p>文本区域（CDATA区）</p>
<ul>
<li><p>CDATA 语法可以告诉 xml 解析器，我 CDATA 里的文本内容，只是纯文本，不需要 xml 语法解析</p>
</li>
<li><p>CDATA 格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;![CDATA[ 这里可以把你输入的字符原样显示，不会解析 xml]]&gt;<br></code></pre></td></tr></table></figure>

<img src="image-20221028165341263.png" srcset="/img/loading.gif" lazyload alt="image-20221028165341263" style="zoom:67%;" /></li>
</ul>
</li>
</ul>
<h2 id="xml-解析技术介绍"><a href="#xml-解析技术介绍" class="headerlink" title="xml 解析技术介绍"></a>xml 解析技术介绍</h2><p>xml 是可扩展的标记语言。</p>
<p>不管是 html 文件还是 xml 文件，它们都是标记型文档，都可以使用 w3c 组织制定的 dom 技术来解析。</p>
<img src="image-20221028165751067.png" srcset="/img/loading.gif" lazyload alt="image-20221028165751067" style="zoom:80%;" />

<p>document 对象表示的是整个文档（可以是 html 文档，也可以是 xml 文档）</p>
<p>早期 JDK 为我们提供了两种 xml 解析技术 DOM 和 Sax 简介（已经过时，但我们需要知道这两种技术）</p>
<p>dom 解析技术是 W3C 组织制定的，而所有的编程语言都对这个解析技术使用了自己语言的特点进行实现。 </p>
<p>Java 对 dom 技术解析标记也做了实现。 </p>
<p>sun 公司在 JDK5 版本对 dom 解析技术进行升级：SAX（ Simple API for XML ） 。</p>
<p>SAX 解析：它跟 W3C 制定的解析不太一样。它是以类似事件机制通过回调告诉用户当前正在解析的内容。 它是一行一行的读取 xml 文件进行解析的。不会创建大量的 dom 对象。 所以它在解析 xml 的时候，在内存的使用上。和性能上。都优于 Dom 解析。 </p>
<p>第三方的解析： </p>
<ul>
<li>jdom 在 dom 基础上进行了封装 </li>
<li>dom4j 又对 jdom 进行了封装。 </li>
<li>pull 主要用在 Android 手机开发，是在跟 sax 非常类似都是事件机制解析 xml 文件。</li>
</ul>
<p>这个 Dom4j 它是第三方的解析技术。我们需要使用第三方给我们提供好的类库才可以解析 xml 文件。</p>
<h2 id="dom4j-解析技术（重点）"><a href="#dom4j-解析技术（重点）" class="headerlink" title="dom4j 解析技术（重点）"></a>dom4j 解析技术（重点）</h2><p>由于 dom4j 它不是 sun 公司的技术，而属于第三方公司的技术，我们需要使用 dom4j 就需要到 dom4j 官网下载 dom4j 的 jar 包。</p>
<h3 id="Dom4j-类库的使用"><a href="#Dom4j-类库的使用" class="headerlink" title="Dom4j 类库的使用"></a>Dom4j 类库的使用</h3> <img src="image-20221029102548240.png" srcset="/img/loading.gif" lazyload alt="image-20221029102548240" style="zoom: 67%;" />

<p>解压后：</p>
 <img src="image-20221029102629505.png" srcset="/img/loading.gif" lazyload alt="image-20221029102629505" style="zoom: 50%;" />



<h3 id="dom4j-目录的介绍"><a href="#dom4j-目录的介绍" class="headerlink" title="dom4j 目录的介绍"></a>dom4j 目录的介绍</h3><p>（1）docs 是文档目录</p>
 <img src="image-20221029102801538.png" srcset="/img/loading.gif" lazyload alt="image-20221029102801538" style="zoom: 50%;" />



<p>（2）如何查 Dom4j 的文档</p>
 <img src="image-20221029102921564.png" srcset="/img/loading.gif" lazyload alt="image-20221029102921564" style="zoom: 50%;" />



<p>（3）Dom4j 快速入门</p>
 <img src="image-20221029103014865.png" srcset="/img/loading.gif" lazyload alt="image-20221029103014865" style="zoom: 50%;" />



<p>（4）lib 目录</p>
 <img src="image-20221029103109131.png" srcset="/img/loading.gif" lazyload alt="image-20221029103109131" style="zoom:50%;" />



<p>（5）src 目录是第三方类库的源码目录</p>
 <img src="image-20221029103154911.png" srcset="/img/loading.gif" lazyload alt="image-20221029103154911" style="zoom:50%;" />



<h3 id="dom4j-编程步骤"><a href="#dom4j-编程步骤" class="headerlink" title="dom4j 编程步骤"></a>dom4j 编程步骤</h3><p>1）先加载xml文件创建 Document 对象</p>
<p>2）通过 Document 对象拿到根元素对象</p>
<p>3）通过根元素.elelemts(标签名);  可以返回一个集合，这个集合里放着所有自己指定的标签名的元素对象</p>
<p>4）找到想要修改、删除的子元素，进行相应的操作</p>
<p>5）保存到硬盘上</p>
<h3 id="获取-document-对象"><a href="#获取-document-对象" class="headerlink" title="获取 document 对象"></a>获取 document 对象</h3><p>创建一个 lib 目录，并添加 dom4j 的 jar 包。并添加到类路径。</p>
 <img src="image-20221029152741709.png" srcset="/img/loading.gif" lazyload alt="image-20221029152741709" style="zoom: 67%;" />

<p>案例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">books</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341232&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>辟邪剑谱<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>9.9<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>班主任<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341231&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>葵花宝典<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>99.99<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>班长<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">books</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">* dom4j 获取 Documet 对象</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> DocumentException &#123;<br><span class="hljs-comment">// 要创建一个 Document 对象，需要我们先创建一个 SAXReader 对象</span><br><span class="hljs-type">SAXReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SAXReader</span>();<br><span class="hljs-comment">// 这个对象用于读取 xml 文件，然后返回一个 Document。</span><br><span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> reader.read(<span class="hljs-string">&quot;src/books.xml&quot;</span>);<br><span class="hljs-comment">// 打印到控制台，看看是否创建成功</span><br>System.out.println(document);<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="遍历标签-amp-获取所有标签中的内容"><a href="#遍历标签-amp-获取所有标签中的内容" class="headerlink" title="遍历标签&amp;获取所有标签中的内容"></a>遍历标签&amp;获取所有标签中的内容</h3><ul>
<li><p>需要分四步操作:</p>
<ul>
<li>第一步，通过创建 SAXReader 对象。来读取 xml 文件，获取 Document 对象</li>
<li>第二步，通过 Document 对象。拿到 XML 的根元素对象</li>
<li>第三步，通过根元素对象。获取所有的 book 标签对象</li>
<li>第四步，遍历每个 book 标签对象。然后获取到 book 标签对象内的每一个元素，再通过 getText() 方法拿到起始标签和结束标签之间的文本内容</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">books</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341232&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>辟邪剑谱<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>9.9<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>班主任<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">book</span> <span class="hljs-attr">sn</span>=<span class="hljs-string">&quot;SN12341231&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>葵花宝典<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">price</span>&gt;</span>99.99<span class="hljs-tag">&lt;/<span class="hljs-name">price</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">author</span>&gt;</span>班长<span class="hljs-tag">&lt;/<span class="hljs-name">author</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">book</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">books</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> String sn;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> BigDecimal price;<br>    <span class="hljs-keyword">private</span> String author;<br>    <span class="hljs-comment">//... ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.javaWebStudy.pojo;<br><br><span class="hljs-keyword">import</span> org.dom4j.Document;<br><span class="hljs-keyword">import</span> org.dom4j.DocumentException;<br><span class="hljs-keyword">import</span> org.dom4j.Element;<br><span class="hljs-keyword">import</span> org.dom4j.io.SAXReader;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.math.BigDecimal;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dom4jTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> DocumentException &#123;<br>        <span class="hljs-comment">// 创建一个SAXReader输入流，去读取xml配置文件，生成Document对象</span><br>        <span class="hljs-type">SAXReader</span> <span class="hljs-variable">saxReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SAXReader</span>();<br>        <span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span>  saxReader.read(<span class="hljs-string">&quot;src/books.xml&quot;</span>);<br><br>        System.out.println(document);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 读取books.xml 文件生成 Book 类</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> DocumentException &#123;<br>        <span class="hljs-comment">//1. 读取 books.xml 文件</span><br>        <span class="hljs-type">SAXReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SAXReader</span>();<br>        <span class="hljs-comment">//注意：在Junit测试中，相对路径是从模块名开始算</span><br>        <span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> reader.read(<span class="hljs-string">&quot;src/books.xml&quot;</span>);<br>        <span class="hljs-comment">//2. 通过 Document 对象获取根元素</span><br>        <span class="hljs-type">Element</span> <span class="hljs-variable">rootElement</span> <span class="hljs-operator">=</span> document.getRootElement();<br><span class="hljs-comment">//        System.out.println(rootElement);</span><br>        <span class="hljs-comment">//3. 通过根元素获取 book 标签对象</span><br>        <span class="hljs-comment">//element() 和 elements() 都是通过标签名查找子元素</span><br>        List&lt;Element&gt; books = rootElement.elements(<span class="hljs-string">&quot;book&quot;</span>);<br>        <span class="hljs-comment">//4. 遍历，处理每个 book 标签，转换为 Book 类</span><br>        <span class="hljs-keyword">for</span>(Element book:books)&#123;<br>            <span class="hljs-comment">// asXML() 把标签对象，转换为标签字符串</span><br><span class="hljs-comment">//            System.out.println(book.asXML());</span><br>            <span class="hljs-type">Element</span> <span class="hljs-variable">nameElement</span> <span class="hljs-operator">=</span> book.element(<span class="hljs-string">&quot;name&quot;</span>);<br>            <span class="hljs-comment">// getText() ;  可以获取标签中的文本内容</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">nameText</span> <span class="hljs-operator">=</span> nameElement.getText();<br>            <span class="hljs-comment">// .elementText() 直接获取指定标签名的文本内容</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">priceText</span> <span class="hljs-operator">=</span> book.elementText(<span class="hljs-string">&quot;price&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">authorText</span> <span class="hljs-operator">=</span> book.elementText(<span class="hljs-string">&quot;author&quot;</span>);<br>            <span class="hljs-comment">// .attributeValue() 获取属性</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">snValue</span> <span class="hljs-operator">=</span> book.attributeValue(<span class="hljs-string">&quot;sn&quot;</span>);<br>            <span class="hljs-type">Book</span> <span class="hljs-variable">a_book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(snValue,nameText, BigDecimal.valueOf(Double.parseDouble(priceText)),authorText);<br>            System.out.println(a_book);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><h2 id="Tomcat-IDEA-控制台中文乱码问题"><a href="#Tomcat-IDEA-控制台中文乱码问题" class="headerlink" title="Tomcat IDEA 控制台中文乱码问题"></a>Tomcat IDEA 控制台中文乱码问题</h2><ul>
<li><p>IntelliJ IDEA 及项目配置</p>
<ul>
<li><p>将 IntelliJ IDEA 和项目均配置为 <code>UTF-8</code> 编码；</p>
<img src="cf041a1e6f0e6b855236aa4b2e31b5fe.png" srcset="/img/loading.gif" lazyload alt="img" style="zoom:45%;" />
</li>
<li><p>IntelliJ IDEA 启动项  追加以下配置：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">-Dfile.encoding</span>=UTF-<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure>

 <img src="2206227828f73048db229808d7bee5ac.png" srcset="/img/loading.gif" lazyload alt="img" style="zoom:45%;" />

 <img src="3a94a5e374068aec558d76792f521597.png" srcset="/img/loading.gif" lazyload alt="img" style="zoom:45%;" />
</li>
<li><p>Tomcat 配置</p>
<p>对 Tomcat 启动脚本 <code>catalina.bat</code> 中的环境变量 <code>JAVA_OPTIONS</code> 追加如下参数；</p>
 <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bat">-Dfile.encoding=UTF8 -Dsun.jnu.encoding=UTF8<br></code></pre></td></tr></table></figure>

 <img src="55638a1fdc3fdff01e0c8dc4d3dad2a0.png" srcset="/img/loading.gif" lazyload alt="img" style="zoom:45%;" /></li>
</ul>
</li>
</ul>
<h2 id="JavaWeb-的概念"><a href="#JavaWeb-的概念" class="headerlink" title="JavaWeb 的概念"></a>JavaWeb 的概念</h2><ul>
<li>JavaWeb 是指，所有通过 Java 语言编写可以通过浏览器访问的程序的总称，叫 JavaWeb。</li>
<li>JavaWeb 是基于<strong>请求</strong>和<strong>响应</strong>来开发的。<ul>
<li>请求 是指 客户端给服务器发送数据，叫请求 Request。</li>
<li>响应 是指 服务器给客户端回传数据，叫响应 Response。</li>
<li>请求和响应是成对出现的，有请求就有响应。</li>
</ul>
</li>
</ul>
<h2 id="Web-资源的分类"><a href="#Web-资源的分类" class="headerlink" title="Web 资源的分类"></a>Web 资源的分类</h2><ul>
<li>web 资源按实现的技术和呈现的效果的不同，又分为静态资源和动态资源两种。<ul>
<li><strong>静态资源</strong>： html、css、js、txt、mp4 视频、jpg 图片</li>
<li><strong>动态资源</strong>： jsp 页面、Servlet 程序</li>
</ul>
</li>
</ul>
<h2 id="常用的-Web-服务器"><a href="#常用的-Web-服务器" class="headerlink" title="常用的 Web 服务器"></a>常用的 Web 服务器</h2><ul>
<li><p>Tomcat：</p>
<p>由 Apache 组织提供的一种 Web 服务器，提供对 jsp 和 Servlet 的支持。它是一种轻量级的 javaWeb 容器（服务器），也是当前应用最广的 JavaWeb 服务器（免费）。</p>
</li>
<li><p>Jboss：</p>
<p>是一个遵从 JavaEE 规范的、开放源代码的、纯 Java 的 EJB 服务器，它支持所有的 JavaEE 规范（免费）。</p>
</li>
<li><p>GlassFish： </p>
<p>由 Oracle 公司开发的一款 JavaWeb 服务器，是一款强健的商业服务器，达到产品级质量（应用很少）。</p>
</li>
<li><p>Resin：</p>
<p>是 CAUCHO 公司的产品，是一个非常流行的服务器，对 servlet 和 JSP 提供了良好的支持，性能也比较优良，resin 自身采用 JAVA 语言开发（收费，应用比较多）。</p>
</li>
<li><p>WebLogic：</p>
<p>是 Oracle 公司的产品，是目前应用最广泛的 Web 服务器，支持 JavaEE 规范，而且不断的完善以适应新的开发要求，适合大型项目（收费，用的不多，适合大公司）。</p>
</li>
</ul>
<h2 id="Tomcat-服务器和-Servlet-版本的对应关系"><a href="#Tomcat-服务器和-Servlet-版本的对应关系" class="headerlink" title="Tomcat 服务器和 Servlet 版本的对应关系"></a>Tomcat 服务器和 Servlet 版本的对应关系</h2><p>当前企业常用的版本 7.*、8.*</p>
 <img src="image-20221029155009337.png" srcset="/img/loading.gif" lazyload alt="image-20221029155009337" style="zoom: 67%;" />

<p>Servlet 程序从 2.5 版本是现在世面使用最多的版本（xml 配置）</p>
<p>到了 Servlet3.0 之后。就是注解版本的 Servlet 使用。</p>
<p>以 2.5 版本为主线讲解 Servlet 程序。</p>
<h2 id="Tomcat-的使用"><a href="#Tomcat-的使用" class="headerlink" title="Tomcat 的使用"></a>Tomcat 的使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>找到你需要用的 Tomcat 版本对应的 zip 压缩包，解压到需要安装的目录即可。</p>
<h3 id="目录介绍"><a href="#目录介绍" class="headerlink" title="目录介绍"></a>目录介绍</h3><ul>
<li><p>bin              专门用来存放 Tomcat 服务器的<strong>可执行程序</strong></p>
</li>
<li><p>conf            专门用来存放 Tocmat 服务器的<strong>配置文件</strong></p>
</li>
<li><p>lib                专门用来存放 Tomcat 服务器的 <strong>jar 包</strong></p>
</li>
<li><p>logs             专门用来存放 Tomcat 服务器运行时输出的<strong>日记信息</strong></p>
</li>
<li><p>temp           专门用来存放 Tomcdat 运行时产生的<strong>临时数据</strong></p>
</li>
<li><p>webapps    专门用来存放<strong>部署的 Web 工程</strong>。</p>
</li>
<li><p>work            是 <strong>Tomcat 工作时的目录</strong>，</p>
<p>​                     用来存放 Tomcat 运行时 jsp 翻译为 Servlet 的源码，和 Session 钝化（序列化）的目录。</p>
</li>
</ul>
<h3 id="启动-Tomcat-服务器"><a href="#启动-Tomcat-服务器" class="headerlink" title="启动 Tomcat 服务器"></a>启动 Tomcat 服务器</h3><ul>
<li><p>如何启动 Tomcat 服务器？</p>
</li>
<li><p>找到 Tomcat 目录下的 bin 目录下的 startup.bat 文件，双击，就可以启动 Tomcat 服务器。</p>
</li>
<li><p>如何测试 Tomcat 服务器启动成功？？？</p>
<ul>
<li><p>打开浏览器，在浏览器地址栏中输入以下地址测试：</p>
</li>
<li><p>1、<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></p>
</li>
<li><p>2、<a target="_blank" rel="noopener" href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a></p>
</li>
<li><p>3、http:&#x2F;&#x2F;真实 ip:8080</p>
</li>
<li><p>当出现如下界面，说明 Tomcat 服务器启动成功！！！</p>
 <img src="image-20221029155335280.png" srcset="/img/loading.gif" lazyload alt="image-20221029155335280" style="zoom:50%;" /></li>
</ul>
</li>
<li><p>常见的启动失败的情况有，双击 startup.bat 文件，就会出现一个小黑窗口一闪而来。</p>
<p>这个时候，失败的原因基本上都是因为没有配置好 JAVA_HOME 环境变量。</p>
</li>
<li><p>配置 JAVA_HOME 环境变量：</p>
<img src="image-20221029155525513.png" srcset="/img/loading.gif" lazyload alt="image-20221029155525513" style="zoom:80%;" />


</li>
<li><p>另一种启动 另一种启动 tomcat 服务器的方式</p>
<ul>
<li><p>1、打开命令行</p>
</li>
<li><p>2、cd 到 你的 Tomcat 的 bin 目录下</p>
 <img src="image-20221029160235155.png" srcset="/img/loading.gif" lazyload alt="image-20221029160235155" style="zoom:80%;" />
</li>
<li><p>3、敲入启动命令： catalina run</p>
</li>
</ul>
</li>
</ul>
<h3 id="Tomcat-的停止"><a href="#Tomcat-的停止" class="headerlink" title="Tomcat 的停止"></a>Tomcat 的停止</h3><ul>
<li>1、点击 tomcat 服务器窗口的 x 关闭按钮</li>
<li>2、把 Tomcat 服务器窗口置为当前窗口，然后按快捷键 Ctrl+C</li>
<li><strong>3、</strong>找到 Tomcat 的 的 bin 目录下的 shutdown.bat 双击，就可以停止 Tomcat 服务器</li>
</ul>
<h3 id="修改-Tomcat-的端口号"><a href="#修改-Tomcat-的端口号" class="headerlink" title="修改 Tomcat 的端口号"></a>修改 Tomcat 的端口号</h3><ul>
<li><p>Mysql 默认的端口号是：3306</p>
</li>
<li><p>Tomcat 默认的端口号是：8080</p>
<ul>
<li><p>找到 Tomcat 目录下的 conf 目录，找到 server.xml 配置文件。</p>
 <img src="image-20221029160449832.png" srcset="/img/loading.gif" lazyload alt="image-20221029160449832" style="zoom:80%;" />
</li>
<li><p>平时上百度：<a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com:80</a></p>
</li>
<li><p><strong>HTTP 协议默认的端口号是：80</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="部暑-web-工程到-Tomcat"><a href="#部暑-web-工程到-Tomcat" class="headerlink" title="部暑 web 工程到 Tomcat"></a>部暑 web 工程到 Tomcat</h3><h4 id="第一种部署方法"><a href="#第一种部署方法" class="headerlink" title="第一种部署方法"></a>第一种部署方法</h4><p>第一种部署方法：只需要把 web 工程的目录拷贝到 Tomcat 的 的 webapps 目录下即可。</p>
<ul>
<li><p>1、在 webapps 目录下创建一个 book 工程：</p>
 <img src="image-20221029160748750.png" srcset="/img/loading.gif" lazyload alt="image-20221029160748750" style="zoom:67%;" />
</li>
<li><p>2 、把上午做的书城第一阶段的内容拷贝到里面：</p>
 <img src="image-20221029160813286.png" srcset="/img/loading.gif" lazyload alt="image-20221029160813286" style="zoom:67%;" />
</li>
<li><p>3 、访问 Tomcat 下的 web 工程：</p>
<p> 只需要在浏览器中输入访问地址格式如下：<a href="http://ip:port/工程名/目录下/文件名">http://ip:port/工程名/目录下/文件名</a></p>
</li>
</ul>
<h4 id="第二种部署方法"><a href="#第二种部署方法" class="headerlink" title="第二种部署方法"></a>第二种部署方法</h4><ul>
<li><p>找到 Tomcat 下的 conf 目录\Catalina\localhost\ 下，创建如下的配置文件</p>
 <img src="image-20221029160918072.png" srcset="/img/loading.gif" lazyload alt="image-20221029160918072" style="zoom:67%;" />
</li>
<li><p>abc.xml 配置文件内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Context 表示一个工程上下文</span><br><span class="hljs-comment">path 表示工程的访问路径:/abc</span><br><span class="hljs-comment">docBase 表示你的工程目录在哪里</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Context</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/abc&quot;</span> <span class="hljs-attr">docBase</span>=<span class="hljs-string">&quot;D:\book&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">&lt;Context path=&quot;/web03&quot; docBase=&quot;E:\IdeaProjects\JavaWeb\out\artifacts\web03_war_exploded&quot; /&gt;</span><br><span class="hljs-comment">--&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>访问这个工程的路径如下： <a href="http://ip:port/abc/">http://ip:port/abc/</a>  ，就表示访问 E:\book 目录</p>
</li>
</ul>
<h3 id="两种访问方式的区别"><a href="#两种访问方式的区别" class="headerlink" title="两种访问方式的区别"></a>两种访问方式的区别</h3><p>直接打开 html 页面到浏览器 和 在浏览器中输入 <a href="http://ip:端口号/">http://ip:端口号/</a> 工程名&#x2F;    访问的区别</p>
<ul>
<li><p>手托 html 页面的原理：</p>
 <img src="image-20221029162622306.png" srcset="/img/loading.gif" lazyload alt="image-20221029162622306" style="zoom:80%;" />
</li>
<li><p>输入访问地址访问的原理：</p>
 <img src="image-20221029162650394.png" srcset="/img/loading.gif" lazyload alt="image-20221029162650394" style="zoom:80%;" /></li>
</ul>
<h3 id="ROOT-工程-amp-默认-index-html-页面的访问"><a href="#ROOT-工程-amp-默认-index-html-页面的访问" class="headerlink" title="ROOT 工程&amp;默认 index.html 页面的访问"></a>ROOT 工程&amp;默认 index.html 页面的访问</h3><ul>
<li>当我们在浏览器地址栏中输入访问地址如下：<ul>
<li><a href="http://ip:port/">http://ip:port/</a>    &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt; 没有工程名的时候，默认访问的是 ROOT 工程。</li>
</ul>
</li>
<li>当我们在浏览器地址栏中输入的访问地址如下：<ul>
<li><a href="http://ip:port/工程名/">http://ip:port/工程名/</a>   &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt; 没有资源名，默认访问 index.html 页面</li>
</ul>
</li>
</ul>
<h2 id="Servlet-技术"><a href="#Servlet-技术" class="headerlink" title="Servlet 技术"></a>Servlet 技术</h2><h3 id="什么是Servlet"><a href="#什么是Servlet" class="headerlink" title="什么是Servlet"></a>什么是Servlet</h3><ul>
<li><p>1、Servlet 是 JavaEE 规范之一。规范就是<strong>接口</strong> </p>
</li>
<li><p>2、Servlet 就 JavaWeb 三大组件之一。</p>
<p>​       三大组件分别是：Servlet 程序、Filter 过滤器、Listener 监听器。 </p>
</li>
<li><p>3、Servlet 是运行在服务器上的一个小型 java 程序</p>
<p>​       它可以接收客户端发送过来的请求，并响应数据给客户端。</p>
</li>
</ul>
<h3 id="手动实现-Servlet-程序"><a href="#手动实现-Servlet-程序" class="headerlink" title="手动实现 Servlet 程序"></a>手动实现 Servlet 程序</h3><ul>
<li><p>1、编写一个类去实现 Servlet 接口</p>
</li>
<li><p>2、实现 service 方法，处理请求，并响应数据</p>
</li>
<li><p>3、到 web.xml 中去配置 servlet 程序的访问地址</p>
</li>
<li><p>Servlet 程序的示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.javaWebStudy.servlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ServletConfig <span class="hljs-title function_">getServletConfig</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * service 方法是专门用来处理请求和响应的，只要访问该类，就会执行该方法</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> servletRequest</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> servletResponse</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello Servlet 被访问了&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getServletInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- servlet 标签给Tomcat配置Servlet程序 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- servlet-name 标签用来给Servlet程序起别名（一般是类名）--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- servlet-class 是Servlet程序的全类名--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- servlet-mapping 标签给servlet程序配置访问地址 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- servlet-name标签的作用是告诉服务器，当前配置的地址给哪个Serclet程序使用 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- url-pattern标签配置访问地址</span><br><span class="hljs-comment">            / 斜杠在服务器解析的时候表示地址为 http://ip:port/工程路径</span><br><span class="hljs-comment">            /hello 表示地址为 http://ip:port/工程路径/hello</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h4><ul>
<li><p>常见的错误 1：url-pattern 中配置的路径没有以斜杠打头：</p>
 <img src="image-20221030094353203.png" srcset="/img/loading.gif" lazyload alt="image-20221030094353203" style="zoom: 50%;" />
</li>
<li><p>常见错误 2：servlet-name 配置的值不存在：（要和前面起别名时一致）</p>
 <img src="image-20221030094456238.png" srcset="/img/loading.gif" lazyload alt="image-20221030094456238" style="zoom:50%;" />
</li>
<li><p>常见错误 3：servlet-class 标签的全类名配置错误：（idea自动生成，不会出错）</p>
 <img src="image-20221030094525077.png" srcset="/img/loading.gif" lazyload alt="image-20221030094525077" style="zoom:50%;" /></li>
</ul>
<h4 id="原理说明"><a href="#原理说明" class="headerlink" title="原理说明"></a>原理说明</h4><p><img src="/2023/07/04/JavaWebNote/image-20221030095342744.png" srcset="/img/loading.gif" lazyload alt="image-20221030095342744"></p>
<h4 id="Servlet-的生命周期"><a href="#Servlet-的生命周期" class="headerlink" title="Servlet 的生命周期"></a>Servlet 的生命周期</h4><ul>
<li>1、执行 Servlet 构造器方法 </li>
<li>2、执行 init 初始化方法 <ul>
<li>第一、二步，是在第一次访问的时候创建 Servlet 程序会调用。</li>
</ul>
</li>
<li>3、执行 service 方法 <ul>
<li>第三步，每次访问都会调用。</li>
</ul>
</li>
<li>4、执行 destroy 销毁方法 <ul>
<li>第四步，在 web 工程停止的时候调用。</li>
</ul>
</li>
</ul>
<h4 id="GET-和-POST-请求的分发处理"><a href="#GET-和-POST-请求的分发处理" class="headerlink" title="GET 和 POST 请求的分发处理"></a>GET 和 POST 请求的分发处理</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello Servlet 被访问了&quot;</span>);<br>        <span class="hljs-comment">//类型转换（因为HttpServletRequest有getMethod()方法）</span><br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">httpServletRequest</span> <span class="hljs-operator">=</span> (HttpServletRequest) servletRequest;<br>        <span class="hljs-comment">//获取请求的方式</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> httpServletRequest.getMethod();<br><br>        <span class="hljs-keyword">if</span>(method.equals(<span class="hljs-string">&quot;GET&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;get请求&quot;</span>);<br>            <span class="hljs-comment">//GET方法需要做的事可以封装成函数，然后在这里调用</span><br>            doGet();<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(method.equals(<span class="hljs-string">&quot;POST&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;post请求&quot;</span>);<br>            <span class="hljs-comment">//POST方法需要做的事可以封装成函数，然后在这里调用</span><br>            doPost();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;doGet&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;doPost&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="通过继承-HttpServlet-实现-Servlet-程序"><a href="#通过继承-HttpServlet-实现-Servlet-程序" class="headerlink" title="通过继承 HttpServlet 实现 Servlet 程序"></a>通过继承 HttpServlet 实现 Servlet 程序</h4><p><strong>一般在实际项目开发中，都是使用继承 HttpServlet 类的方式去实现 Servlet 程序。</strong> </p>
<ul>
<li><p>1、编写一个类去继承 HttpServlet 类 </p>
</li>
<li><p>2、根据业务需要重写 doGet 或 doPost 方法 </p>
 <img src="image-20221030104054342.png" srcset="/img/loading.gif" lazyload alt="image-20221030104054342" style="zoom: 50%;" />
</li>
<li><p>3、到 web.xml 中的配置 Servlet 程序的访问地址</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet2<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.HelloServlet2<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet2<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello2<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-comment">//doGet()在get请求的时候调用</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doGet&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//doPost()在post请求的时候调用</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doPost&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="使用-IDEA-创建-Servlet-程序"><a href="#使用-IDEA-创建-Servlet-程序" class="headerlink" title="使用 IDEA 创建 Servlet 程序"></a>使用 IDEA 创建 Servlet 程序</h4><p>注意：2022版的 IDEA 好像没有这个功能</p>
<ul>
<li><p>菜单：new -&gt;Servlet 程序</p>
 <img src="image-20221030105212354.png" srcset="/img/loading.gif" lazyload alt="image-20221030105212354" style="zoom:50%;" />
</li>
<li><p>配置 Servlet 的信息</p>
 <img src="image-20221030105334396.png" srcset="/img/loading.gif" lazyload alt="image-20221030105334396" style="zoom:50%;" /></li>
</ul>
<h4 id="Servlet-类的继承体系"><a href="#Servlet-类的继承体系" class="headerlink" title="Servlet 类的继承体系"></a>Servlet 类的继承体系</h4><p><img src="/2023/07/04/JavaWebNote/image-20221030105855998.png" srcset="/img/loading.gif" lazyload alt="image-20221030105855998"></p>
<h3 id="ServletConfig-类"><a href="#ServletConfig-类" class="headerlink" title="ServletConfig 类"></a>ServletConfig 类</h3><ul>
<li><p>ServletConfig 类从类名上来看，就知道是 Servlet 程序的配置信息类。 </p>
</li>
<li><p>Servlet 程序和 ServletConfig 对象都是由 Tomcat 负责创建，我们负责使用。 </p>
</li>
<li><p>Servlet 程序默认是第一次访问的时候创建，ServletConfig 是每个 Servlet 程序创建时，就创建一个对应的 ServletConfig 对象。</p>
</li>
<li><p>只能得到自己的 ServletConfig 对象，不能的其他Servlet 程序的 ServletConfig 对象。</p>
</li>
<li><p>ServletConfig 类的三大作用：</p>
<ul>
<li>1、可以获取 Servlet 程序的别名 servlet-name 的值 </li>
<li>2、获取初始化参数 init-param </li>
<li>3、获取 ServletContext 对象</li>
</ul>
</li>
<li><p>案例代码：</p>
<ul>
<li><p>web.xml 中的配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- servlet 标签给Tomcat配置Servlet程序 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet-name 标签用来给Servlet程序起别名（一般是类名）--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet-class 是Servlet程序的全类名--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- init-param 是初始化参数，可以配置多组 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- param-name 是参数名 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- param-value 是参数值 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- servlet-mapping 标签给servlet程序配置访问地址 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet-name标签的作用是告诉服务器，当前配置的地址给哪个Serclet程序使用 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- url-pattern标签配置访问地址</span><br><span class="hljs-comment">            / 斜杠在服务器解析的时候表示地址为 http://ip:port/工程路径</span><br><span class="hljs-comment">            /hello 表示地址为 http://ip:port/工程路径/hello</span><br><span class="hljs-comment">        --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>Servlet 中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">HelloServlet</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;构造器方法&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>        <span class="hljs-comment">//super.init(config); //实现接口的方式没有该操作</span><br>        System.out.println(<span class="hljs-string">&quot;init初始化方法&quot;</span>);<br>        <span class="hljs-comment">//- 1、可以获取 Servlet 程序的别名 servlet-name 的值</span><br>        System.out.println(<span class="hljs-string">&quot;HelloServlet程序的别名是：&quot;</span>+servletConfig.getServletName());<br>        <span class="hljs-comment">//- 2、获取初始化参数 init-param</span><br>        System.out.println(<span class="hljs-string">&quot;初始化参数username的值为：&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;初始化参数url的值为：&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>));<br>        <span class="hljs-comment">//- 3、获取 ServletContext 对象</span><br>        System.out.println(<span class="hljs-string">&quot;ServletContext 对象为：&quot;</span>+servletConfig.getServletContext());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><img src="image-20221030113608300.png" srcset="/img/loading.gif" lazyload alt="image-20221030113608300" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig config)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>        <span class="hljs-comment">//重写init方法里面一定要调用父类的init(ServletConfig config)方法</span><br>        <span class="hljs-built_in">super</span>.init(config);<br>    &#125;<br><br>    <span class="hljs-comment">//doGet()在get请求的时候调用</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doGet&quot;</span>);<br>        <span class="hljs-type">ServletConfig</span> <span class="hljs-variable">servletConfig</span> <span class="hljs-operator">=</span> getServletConfig();<br>        <span class="hljs-comment">//- 1、可以获取 Servlet 程序的别名 servlet-name 的值</span><br>        System.out.println(<span class="hljs-string">&quot;HelloServlet程序的别名是：&quot;</span>+servletConfig.getServletName());<br>        <span class="hljs-comment">//- 2、获取初始化参数 init-param</span><br>        System.out.println(<span class="hljs-string">&quot;初始化参数username的值为：&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;初始化参数url的值为：&quot;</span>+servletConfig.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>));<br>        <span class="hljs-comment">//- 3、获取 ServletContext 对象</span><br>        System.out.println(<span class="hljs-string">&quot;ServletContext 对象：&quot;</span>+servletConfig.getServletContext());<br>    &#125;<br>    <span class="hljs-comment">//doPost()在post请求的时候调用</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;HelloServlet doPost&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="ServletContext-类"><a href="#ServletContext-类" class="headerlink" title="ServletContext 类"></a>ServletContext 类</h3><h4 id="什么是-ServletContext"><a href="#什么是-ServletContext" class="headerlink" title="什么是 ServletContext"></a>什么是 ServletContext</h4><ul>
<li><p>1、ServletContext 是一个接口，它表示 Servlet 上下文对象</p>
</li>
<li><p>2、<strong>一个 web 工程，只有一个 ServletContext 对象实例。</strong></p>
</li>
<li><p>3、ServletContext 对象是一个<strong>域对象</strong>。</p>
</li>
<li><p>4、ServletContext 是在 web 工程部署启动的时候创建。在 web 工程停止的时候销毁。</p>
</li>
<li><p>什么是域对象?</p>
<ul>
<li><p>域对象，是<strong>可以像 Map 一样存取数据</strong>的对象，叫域对象。</p>
</li>
<li><p>这里的<strong>域指的是存取数据的操作范围</strong>，整个 web 工程。</p>
<p>​						存数据 						取数据 					删除数据<br>Map 				put() 							get() 						remove()<br>域对象 		setAttribute() 			getAttribute() 		removeAttribute();</p>
</li>
</ul>
</li>
</ul>
<h4 id="ServletContext-类的四个作用"><a href="#ServletContext-类的四个作用" class="headerlink" title="ServletContext 类的四个作用"></a>ServletContext 类的四个作用</h4><ul>
<li><p>1、获取 web.xml 中配置的上下文参数 context-param</p>
</li>
<li><p>2、获取当前的工程路径，格式: &#x2F;工程路径</p>
</li>
<li><p>3、获取工程部署后在服务器硬盘上的绝对路径</p>
</li>
<li><p>4、像 Map 一样存取数据</p>
</li>
<li><p>前三点的案例：</p>
<ul>
<li><p>ServletContext 演示代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//- 1、获取 web.xml 中配置的上下文参数 context-param</span><br>        <span class="hljs-comment">//     注意：该方法不能得到 init-param 中的内容</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getServletConfig().getServletContext();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> context.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;context-param参数username的值是：&quot;</span>+username);<br>        System.out.println(<span class="hljs-string">&quot;context-param参数password的值是：&quot;</span>+context.getInitParameter(<span class="hljs-string">&quot;password&quot;</span>));<br>        <span class="hljs-comment">//- 2、获取当前的工程路径，格式: /工程路径</span><br>        System.out.println(<span class="hljs-string">&quot;当前工程路径：&quot;</span>+context.getContextPath());<br>        <span class="hljs-comment">//- 3、获取工程部署后在服务器硬盘上的绝对路径</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *  / 斜杆被服务器解析为地址：http://ip:port/工程名/</span><br><span class="hljs-comment">         *    映射到IDEA代码的web目录</span><br><span class="hljs-comment">         */</span><br>        System.out.println(<span class="hljs-string">&quot;工程部署的路径是：&quot;</span>+context.getRealPath(<span class="hljs-string">&quot;/&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;工程下css目录的绝对路径是：&quot;</span>+context.getRealPath(<span class="hljs-string">&quot;/css&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;工程下imgs目录的pic.jpg的绝对路径是：&quot;</span>+context.getRealPath(<span class="hljs-string">&quot;/imgs/pic.jpg&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>web.xml 中的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- context-param是上下文参数（它属于整个web工程），可配置多组 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>context<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>password<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ContextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.javaWebStudy.servlet.ContextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ContextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/contextServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>案例：ServletContext 像 Map 一样存取数据</p>
<ul>
<li><p>ContextServlet1 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextServlet1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//获取ServletContext对象</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getServletContext();<br>        System.out.println(context);<br>        System.out.println(<span class="hljs-string">&quot;保存之前：Context1 中获取域数据key1的值：&quot;</span>+context.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>        context.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;value1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;保存之后：Context1 中获取域数据key1的值：&quot;</span>+context.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>ContextServlet2 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//获取ServletContext对象</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getServletContext();<br>        System.out.println(context);<br>        System.out.println(<span class="hljs-string">&quot;保存之前：Context2 中获取域数据key1的值：&quot;</span>+context.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="Http-协议"><a href="#Http-协议" class="headerlink" title="Http 协议"></a>Http 协议</h2><h3 id="什么是-HTTP-协议"><a href="#什么是-HTTP-协议" class="headerlink" title="什么是 HTTP 协议"></a>什么是 HTTP 协议</h3><ul>
<li>什么是协议?<ul>
<li>协议是指双方，或多方，相互约定好，大家都需要遵守的规则，叫协议。</li>
<li>所谓 HTTP 协议，就是指，客户端和服务器之间通信时，发送的数据，需要遵守的规则，叫 HTTP 协议。</li>
<li>HTTP 协议中的数据又叫报文。</li>
</ul>
</li>
</ul>
<h3 id="请求的-HTTP-协议格式"><a href="#请求的-HTTP-协议格式" class="headerlink" title="请求的 HTTP 协议格式"></a>请求的 HTTP 协议格式</h3><p>客户端给服务器发送数据叫<strong>请求</strong>。服务器给客户端回传数据叫<strong>响应</strong>。</p>
<p>请求又分为 <strong>GET 请求</strong>，和 <strong>POST 请求</strong>两种：</p>
<h4 id="GET-请求"><a href="#GET-请求" class="headerlink" title="GET 请求"></a>GET 请求</h4><ul>
<li>1、请求行<ul>
<li>(1) 请求的方式 						GET</li>
<li>(2) 请求的资源路径                  [+?+请求参数]</li>
<li>(3) 请求的协议的版本号          HTTP&#x2F;1.1</li>
</ul>
</li>
<li>2、请求头<ul>
<li><strong>key : value</strong> 	组成 	<strong>不同的键值对，表示不同的含义</strong>。</li>
</ul>
</li>
</ul>
<p><img src="/2023/07/04/JavaWebNote/image-20221030172733704.png" srcset="/img/loading.gif" lazyload alt="image-20221030172733704"></p>
<h4 id="POST-请求"><a href="#POST-请求" class="headerlink" title="POST 请求"></a>POST 请求</h4><ul>
<li>1、请求行<ul>
<li>(1) 请求的方式 						POST</li>
<li>(2) 请求的资源路径                 [+?+请求参数]</li>
<li>(3) 请求的协议的版本号         HTTP&#x2F;1.1</li>
</ul>
</li>
<li>2、请求头<ul>
<li><ol>
<li>key : value 			不同的请求头，有不同的含义</li>
</ol>
</li>
</ul>
</li>
<li>请求头和请求体之间有一空行</li>
<li>3、请求体 &#x3D;&#x3D;&#x3D;&gt;&gt;&gt; 就是发送给服务器的数据</li>
</ul>
<p><img src="/2023/07/04/JavaWebNote/image-20221030173417744.png" srcset="/img/loading.gif" lazyload alt="image-20221030173417744"></p>
<h4 id="常用请求头的说明"><a href="#常用请求头的说明" class="headerlink" title="常用请求头的说明"></a>常用请求头的说明</h4><ul>
<li>Accept:     表示客户端可以接收的数据类型</li>
<li>Accpet-Languege:     表示客户端可以接收的语言类型</li>
<li>User-Agent:     表示客户端浏览器的信息</li>
<li>Host：   表示请求时的服务器 ip 和端口号</li>
</ul>
<h4 id="哪些是-GET-请求，哪些是-POST-请求"><a href="#哪些是-GET-请求，哪些是-POST-请求" class="headerlink" title="哪些是 GET 请求，哪些是 POST 请求"></a>哪些是 GET 请求，哪些是 POST 请求</h4><ul>
<li><strong>GET 请求：</strong><ul>
<li>1、form 标签 method&#x3D;get</li>
<li>2、a 标签</li>
<li>3、link 标签引入 css</li>
<li>4、Script 标签引入 js 文件</li>
<li>5、img 标签引入图片</li>
<li>6、iframe 引入 html 页面</li>
<li>7、在浏览器地址栏中输入地址后敲回车</li>
</ul>
</li>
<li><strong>POST 请求：</strong><ul>
<li>8、form 标签 method&#x3D;post</li>
</ul>
</li>
</ul>
<h4 id="响应的-HTTP-协议格式"><a href="#响应的-HTTP-协议格式" class="headerlink" title="响应的 HTTP 协议格式"></a>响应的 HTTP 协议格式</h4><ul>
<li>1、响应行<ul>
<li>(1) 响应的协议和版本号</li>
<li>(2) 响应状态码</li>
<li>(3) 响应状态描述符</li>
</ul>
</li>
<li>2、响应头<ul>
<li>(1) key : value      不同的响应头，有其不同含义</li>
</ul>
</li>
<li><em>空行</em></li>
<li>3、响应体 —-&gt;&gt;&gt; 就是回传给客户端的数据</li>
</ul>
<p><img src="/2023/07/04/JavaWebNote/image-20221030204645742.png" srcset="/img/loading.gif" lazyload alt="image-20221030204645742"></p>
<h4 id="常用的响应码说明"><a href="#常用的响应码说明" class="headerlink" title="常用的响应码说明"></a>常用的响应码说明</h4><ul>
<li>200 表示请求成功</li>
<li>302 表示请求重定向（明天讲）</li>
<li>404 表示请求服务器已经收到了，但是你要的数据不存在（请求地址错误）</li>
<li>500 表示服务器已经收到请求，但是服务器内部错误（代码错误）</li>
</ul>
<h4 id="MIME-类型说明-类型说明"><a href="#MIME-类型说明-类型说明" class="headerlink" title="MIME 类型说明 类型说明"></a>MIME 类型说明 类型说明</h4><p><strong>MIME 是 HTTP 协议中数据类型。</strong></p>
<p>MIME 的英文全称是”Multipurpose Internet Mail Extensions” 多功能 Internet 邮件扩充服务。</p>
<p>MIME 类型的格式是“大类型&#x2F;小类型”，并与某一种文件的扩展名相对应。</p>
<ul>
<li><p>常见的 MIME 类型：</p>
 <img src="image-20221030205637753.png" srcset="/img/loading.gif" lazyload alt="image-20221030205637753" style="zoom:80%;" /></li>
</ul>
<p>谷歌浏览器如何查看 HTTP 协议：</p>
 <img src="image-20221030205812087.png" srcset="/img/loading.gif" lazyload alt="image-20221030205812087" style="zoom:80%;" />



<h2 id="HttpServletRequest-类"><a href="#HttpServletRequest-类" class="headerlink" title="HttpServletRequest 类"></a>HttpServletRequest 类</h2><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>每次只要有请求进入 Tomcat 服务器，Tomcat 服务器就会把请求过来的 HTTP 协议信息解析好封装到 Request 对象中。</p>
<p>然后传递到 service 方法（doGet 和 doPost）中给我们使用。我们<strong>可以通过 HttpServletRequest 对象，获取到所有请求的信息</strong>。</p>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li><p>getRequestURI() 						获取请求的资源路径</p>
</li>
<li><p>getRequestURL()                        获取请求的统一资源定位符（绝对路径）</p>
</li>
<li><p>getRemoteHost()                        获取客户端的 ip 地址</p>
</li>
<li><p>getHeader()                                 获取请求头</p>
</li>
<li><p>getParameter()                           获取请求的参数</p>
</li>
<li><p>getParameterValues()                获取请求的参数（多个值的时候使用）</p>
</li>
<li><p>getMethod()                                获取请求的方式 GET 或 POST</p>
</li>
<li><p>setAttribute(key, value)             设置域数据</p>
</li>
<li><p>getAttribute(key)                         获取域数据</p>
</li>
<li><p>getRequestDispatcher()            获取请求转发对象</p>
</li>
<li><p>常用 API 示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestAPIServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//- getRequestURI() 获取请求的资源路径</span><br>        System.out.println(<span class="hljs-string">&quot;URI =&gt; &quot;</span>+req.getRequestURI());<br>        <span class="hljs-comment">//- getRequestURL() 获取请求的统一资源定位符（绝对路径）</span><br>        System.out.println(<span class="hljs-string">&quot;URL =&gt; &quot;</span>+req.getRequestURL());<br>        <span class="hljs-comment">//- getRemoteHost() 获取客户端的 ip 地址</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * 在IDEA中，使用localhost访问时，得到的客户端ip地址时 ==&gt;&gt; 0:0:0:0:0:0:0:1（ipv6）</span><br><span class="hljs-comment">         * 在IDEA中，使用127.0.0.1访问时，得到的客户端ip地址时 ==&gt;&gt; 127.0.0.1</span><br><span class="hljs-comment">         * 在IDEA中，使用 真实ip 访问时，得到的客户端ip地址时 ==&gt;&gt; 真实的客户端ip地址</span><br><span class="hljs-comment">         */</span><br>        System.out.println(<span class="hljs-string">&quot;客户端 ip地址 =&gt; &quot;</span>+req.getRemoteHost());<br>        <span class="hljs-comment">//- getHeader() 获取请求头</span><br>        System.out.println(<span class="hljs-string">&quot;请求头 User-Agent =&gt; &quot;</span>+req.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>));<br>        <span class="hljs-comment">//- getMethod() 获取请求的方式 GET 或 POST</span><br>        System.out.println(<span class="hljs-string">&quot;请求的方式 =&gt; &quot;</span>+req.getMethod());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="如何获取请求参数"><a href="#如何获取请求参数" class="headerlink" title="如何获取请求参数"></a>如何获取请求参数</h3><ul>
<li><p>表单：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:8080/07_servlet/parameterServlet&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br>        用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        密码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        兴趣爱好：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;cpp&quot;</span>&gt;</span>C++<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;java&quot;</span>&gt;</span>Java<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>java 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// 获取请求参数</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        String[] hobby = req.getParameterValues(<span class="hljs-string">&quot;hobby&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; 用户名：&quot;</span> + username);<br>        System.out.println(<span class="hljs-string">&quot; 密码：&quot;</span> + password);<br>        System.out.println(<span class="hljs-string">&quot; 兴趣爱好：&quot;</span> + Arrays.asList(hobby));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="POST-中文乱码解决"><a href="#POST-中文乱码解决" class="headerlink" title="POST 中文乱码解决"></a>POST 中文乱码解决</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-comment">// 设置请求体的字符集为 UTF-8 ，从而解决 post 请求的中文乱码问题</span><br>    <span class="hljs-comment">//需要在获取请求参数之前调用才有效</span><br>    req.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    <br>    System.out.println(<span class="hljs-string">&quot;-------------doPost------------&quot;</span>);<br>    <span class="hljs-comment">// 获取请求参数</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>    String[] hobby = req.getParameterValues(<span class="hljs-string">&quot;hobby&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot; 用户名：&quot;</span> + username);<br>    System.out.println(<span class="hljs-string">&quot; 密码：&quot;</span> + password);<br>    System.out.println(<span class="hljs-string">&quot; 兴趣爱好：&quot;</span> + Arrays.asList(hobby));<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="请求的转发"><a href="#请求的转发" class="headerlink" title="请求的转发"></a>请求的转发</h2><p>请求的转发是指，服务器收到请求后，从一个资源跳转到另一个资源的操作叫请求转发。</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221030221835187.png" srcset="/img/loading.gif" lazyload alt="image-20221030221835187"></p>
<ul>
<li><p><strong>请求转发的特点：</strong></p>
<ul>
<li>1、浏览器地址栏没有变化</li>
<li>2、他们是一次请求</li>
<li>3、他们共享Request域中的数据</li>
<li>4、可以转发到WEB-INF目录下（浏览器不能直接通过地址访问WEB-INF目录）</li>
<li>5、不可以访问工程以外的资源</li>
</ul>
</li>
<li><p>示例代码：</p>
<ul>
<li><p>Servlet1 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Servlet1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// 获取请求的参数（办事的材料）查看</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;在 在 Servlet1 （柜台 1 ）中查看参数（材料）：&quot;</span> + username);<br>        <span class="hljs-comment">// 给材料 盖一个章，并传递到 Servlet2 （柜台 2 ）去查看</span><br>        req.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot; 柜台 1 的章&quot;</span>);<br>        <span class="hljs-comment">// 问路： Servlet2 （柜台 2 ）怎么走</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">* 请求转发必须要以斜杠打头， / 斜杠表示地址为： http://ip:port/ 工程名 / , 映射到 IDEA 代码的 web 目录</span><br><span class="hljs-comment">&lt;br/&gt;</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">*/</span><br>        <span class="hljs-type">RequestDispatcher</span> <span class="hljs-variable">requestDispatcher</span> <span class="hljs-operator">=</span> req.getRequestDispatcher(<span class="hljs-string">&quot;/servlet2&quot;</span>);<br>        <span class="hljs-comment">// RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;http://www.baidu.com&quot;);</span><br>        <span class="hljs-comment">// 走向 Sevlet2 （柜台 2 ）</span><br>        requestDispatcher.forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>Servlet2 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Servlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// 获取请求的参数（办事的材料）查看</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;在 在 Servlet2 （柜台 2 ）中查看参数（材料）：&quot;</span> + username);<br>        <span class="hljs-comment">// 查看 柜台 1 是否有盖章</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">key1</span> <span class="hljs-operator">=</span> req.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; 柜台 1 是否有章：&quot;</span> + key1);<br>        <span class="hljs-comment">// 处理自己的业务</span><br>        System.out.println(<span class="hljs-string">&quot;Servlet2 务 处理自己的业务 &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="base-标签的作用"><a href="#base-标签的作用" class="headerlink" title="base 标签的作用"></a>base 标签的作用</h2><p><strong>base标签可以设置当前页面中所有相对路径工作时，参照哪个路径来进行跳转</strong></p>
 <img src="image-20221030225950922.png" srcset="/img/loading.gif" lazyload alt="image-20221030225950922" style="zoom: 80%;" />

 <img src="image-20221030230007804.png" srcset="/img/loading.gif" lazyload alt="image-20221030230007804" style="zoom:80%;" />

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- c.html --&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh_CN&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- base 标签设置页面相对路径工作时参照的地址</span><br><span class="hljs-comment">			 href 属性就是参数的地址值 --&gt;</span><br>        <span class="hljs-comment">&lt;!-- 补充说明 c.html 可省略 </span><br><span class="hljs-comment">		&lt;base href=&quot;http://localhost:8080/study_07_servlet/a/b/&quot;&gt;</span><br><span class="hljs-comment">		--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">base</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://localhost:8080/study_07_servlet/a/b/c.html&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        这是 a 下的 b 下的 c.html 页面<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../../index.html&quot;</span>&gt;</span>跳回首页<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="Web-中的相对路径和绝对路径"><a href="#Web-中的相对路径和绝对路径" class="headerlink" title="Web 中的相对路径和绝对路径"></a>Web 中的相对路径和绝对路径</h2><ul>
<li>在 javaWeb 中，路径分为相对路径和绝对路径两种：</li>
<li>相对路径是：<ul>
<li>. 							表示当前目录</li>
<li>..                            表示上一级目录</li>
<li>资源名                   表示当前目录&#x2F;资源名</li>
</ul>
</li>
<li>绝对路径：<ul>
<li><a href="http://ip:port/工程路径/资源路径">http://ip:port/工程路径/资源路径</a></li>
</ul>
</li>
<li><strong>在JavaWeb实际开发中，路径都使用绝对路径，而不简单的使用相对路径</strong>。<ul>
<li>1、绝对路径</li>
<li>2、base + 相对</li>
</ul>
</li>
</ul>
<h2 id="web中-x2F-斜杠的不同意义"><a href="#web中-x2F-斜杠的不同意义" class="headerlink" title="web中 &#x2F; 斜杠的不同意义"></a>web中 &#x2F; 斜杠的不同意义</h2><ul>
<li><p>在 web 中 &#x2F; 斜杠 是一种<strong>绝对路径</strong>。</p>
</li>
<li><p>&#x2F; 斜杠 如果被浏览器解析，得到的地址是：<a href="http://ip:port/">http://ip:port/</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>斜杠<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>&#x2F; 斜杠 如果被服务器解析，得到的地址是：<a href="http://ip:port/工程路径">http://ip:port/工程路径</a>   (Web目录下)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/servlet1<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">servletContext.getRealPath(“/”);<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">request.getRequestDispatcher(“/”);<br></code></pre></td></tr></table></figure>
</li>
<li><p>特殊情况： response.sendRediect(“&#x2F;”);       把斜杠发送给浏览器解析。得到 <a href="http://ip:port/">http://ip:port/</a></p>
</li>
</ul>
<h2 id="HttpServletResponse-类"><a href="#HttpServletResponse-类" class="headerlink" title="HttpServletResponse 类"></a>HttpServletResponse 类</h2><h3 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h3><p>HttpServletResponse 类和 HttpServletRequest 类一样。每次请求进来，Tomcat 服务器都会创建一个 Response 对象传递给 Servlet 程序去使用。</p>
<p>HttpServletRequest 表示请求过来的信息，HttpServletResponse 表示所有响应的信息，我们如果需要设置返回给客户端的信息，都可以通过 HttpServletResponse 对象来进行设置</p>
<h3 id="两个输出流的说明"><a href="#两个输出流的说明" class="headerlink" title="两个输出流的说明"></a>两个输出流的说明</h3><ul>
<li><p>字节流 		getOutputStream(); 		  常用于下载（传递二进制数据）</p>
</li>
<li><p>字符流         getWriter();                          常用于回传字符串（常用）</p>
</li>
<li><p>注意：两个流同时只能使用一个，使用了字节流，就不能再使用字符流，反之亦然，否则就会报错。</p>
 <img src="image-20221031215943947.png" srcset="/img/loading.gif" lazyload alt="image-20221031215943947" style="zoom:80%;" /></li>
</ul>
<h3 id="如何往客户端回传数据"><a href="#如何往客户端回传数据" class="headerlink" title="如何往客户端回传数据"></a>如何往客户端回传数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseIOServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>    IOException &#123;<br>        <span class="hljs-comment">// 要求 ： 往客户端回传 字符串 数据。</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> resp.getWriter();<br>        writer.write(<span class="hljs-string">&quot;response&#x27;s content!!!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="响应的乱码解决"><a href="#响应的乱码解决" class="headerlink" title="响应的乱码解决"></a>响应的乱码解决</h3><ul>
<li><p>解决响应中文乱码方案一（不推荐使用）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 设置服务器字符集为 UTF-8</span><br>resp.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br><span class="hljs-comment">// 通过响应头，设置浏览器也使用 UTF-8 字符集</span><br>resp.setHeader(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>);<br></code></pre></td></tr></table></figure>
</li>
<li><p>解决响应中文乱码方案二（推荐）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 它会同时设置服务器和客户端都使用 UTF-8 字符集，还设置了响应头</span><br><span class="hljs-comment">// 此方法一定要在获取流对象之前调用才有效</span><br>resp.setContentType(<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>);<br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>案例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseIOServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(resp.getCharacterEncoding());  <span class="hljs-comment">//默认ISO-8859-1</span><br><br>        <span class="hljs-comment">//设置服务器字符集为UTF-8</span><br><span class="hljs-comment">//        resp.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><br>        <span class="hljs-comment">//通过响应头，设置浏览器也是用UTF-8字符集</span><br><span class="hljs-comment">//        resp.setHeader(&quot;Content-Type&quot;,&quot;text/html;charset=UTF-8&quot;);</span><br><br>        <span class="hljs-comment">//setContentType()方法 会同时设置服务器和客户端都使用UTF-8字符集，还设置了响应头</span><br>        <span class="hljs-comment">//该方法一定要在获取流对象之前调用才有效</span><br>        resp.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        System.out.println(resp.getCharacterEncoding());<br><br>        <span class="hljs-comment">//要求：往客户端回传字符串数据</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> resp.getWriter();<br>        writer.write(<span class="hljs-string">&quot;响应信息&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="请求重定向"><a href="#请求重定向" class="headerlink" title="请求重定向"></a>请求重定向</h3><h4 id="请求重定向的理解"><a href="#请求重定向的理解" class="headerlink" title="请求重定向的理解"></a>请求重定向的理解</h4><p>请求重定向，是指客户端给服务器发请求，然后服务器告诉客户端说。我给你一些地址。你去新地址访问。叫请求重定向（因为之前的地址可能已经被废弃）</p>
<img src="image-20221031223248480.png" srcset="/img/loading.gif" lazyload alt="image-20221031223248480" style="zoom:80%;" />



<h4 id="请求重定向的特点"><a href="#请求重定向的特点" class="headerlink" title="请求重定向的特点"></a>请求重定向的特点</h4><ul>
<li><p>1、浏览器地址栏会发生变化</p>
</li>
<li><p>2、两次请求</p>
</li>
<li><p>3、不共享Request域中数据</p>
<p>（Tomcat每次收到请求，就会把请求过来的数据解析好，封装成为一个req对象）</p>
</li>
<li><p>4、不能访问WEB-INF下的资源  (WEB-INF不能直接通过浏览器访问)</p>
</li>
<li><p>5、可以访问工程外的资源</p>
</li>
<li><p>请求重定向的第一种方案：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 设置响应状态码 302 ，表示重定向，（已搬迁）</span><br>resp.setStatus(<span class="hljs-number">302</span>);<br><span class="hljs-comment">// 设置响应头，说明 新的地址在哪里</span><br>resp.setHeader(<span class="hljs-string">&quot;Location&quot;</span>, <span class="hljs-string">&quot;http://localhost:8080&quot;</span>);<br></code></pre></td></tr></table></figure>
</li>
<li><p>请求重定向的第二种方案（<strong>推荐使用</strong>）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">resp.sendRedirect(<span class="hljs-string">&quot;http://localhost:8080&quot;</span>);<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><h3 id="JSP介绍"><a href="#JSP介绍" class="headerlink" title="JSP介绍"></a>JSP介绍</h3><ul>
<li><p>jsp 的全称是 java server pages。 Java 的服务器页面。</p>
</li>
<li><p>jsp 的主要作用是代替 Servlet 程序回传 html 页面的数据，因为 Servlet 程序回传 html 页面数据是一件非常繁琐的事情，开发成本和维护成本都极高。</p>
</li>
<li><p>jsp 简单小结：</p>
<ul>
<li><p>1、如何创建 jsp 的页面?</p>
  <img src="image-20221103161912141.png" srcset="/img/loading.gif" lazyload alt="image-20221103161912141" style="zoom:80%;" />
</li>
<li><p>2、jsp 如何访问：</p>
</li>
<li><p>jsp 页面和 html 页面一样，都是存放在 web 目录下。访问也跟访问 html 页面一样。<br>比如：<br>在 web 目录下有如下的文件：<br>web 目录<br>a.html 页面 访问地址是 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt;&gt;&gt; <a href="http://ip:port/工程路径/a.html">http://ip:port/工程路径/a.html</a><br>b.jsp 页面 访问地址是 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt;&gt;&gt; <a href="http://ip:port/工程路径/b.jsp">http://ip:port/工程路径/b.jsp</a></p>
</li>
</ul>
</li>
</ul>
<h3 id="jsp-的本质"><a href="#jsp-的本质" class="headerlink" title="jsp 的本质"></a>jsp 的本质</h3><ul>
<li><p><strong>jsp 页面本质上是一个 Servlet 程序</strong>。</p>
</li>
<li><p>当我们第一次访问 jsp 页面的时候。Tomcat 服务器会帮我们把 jsp 页面翻译成为一个 java 源文件。并且对它进行编译成为.class 字节码程序。我们打开 java 源文件不难发现其里面的内容是：</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221103162329016.png" srcset="/img/loading.gif" lazyload alt="image-20221103162329016"></p>
</li>
<li><p>我们跟踪原代码发现，HttpJspBase 类，它直接地继承了 HttpServlet 类。也就是说。jsp 翻译出来的 java 类，它间接继承了 HttpServlet 类。也就是说，翻译出来的是一个 Servlet 程序。</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221103162436135.png" srcset="/img/loading.gif" lazyload alt="image-20221103162436135"></p>
</li>
<li><p>总结：通过翻译的 java 源代码我们就可以得到结果：jsp 就是 Servlet 程序。</p>
</li>
<li><p>观察翻译出来的 Servlet 程序的源代码，不难发现：其底层实现，也是通过输出流 把 html 页面数据回传给客户端。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">_jspService</span><span class="hljs-params">(<span class="hljs-keyword">final</span> javax.servlet.http.HttpServletRequest request, <span class="hljs-keyword">final</span></span><br><span class="hljs-params">javax.servlet.http.HttpServletResponse response)</span><br>        <span class="hljs-keyword">throws</span> java.io.IOException, javax.servlet.ServletException &#123;<br>    <span class="hljs-keyword">final</span> java.lang.<span class="hljs-type">String</span> <span class="hljs-variable">_jspx_method</span> <span class="hljs-operator">=</span> request.getMethod();<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-string">&quot;GET&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="hljs-string">&quot;POST&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="hljs-string">&quot;HEAD&quot;</span>.equals(_jspx_method)<br>            &amp;&amp; !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) &#123;<br>        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, <span class="hljs-string">&quot;JSPs only permit GET POST or</span><br><span class="hljs-string">                HEAD&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">final</span> javax.servlet.jsp.PageContext pageContext;<br>    javax.servlet.http.<span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">final</span> javax.servlet.ServletContext application;<br>    <span class="hljs-keyword">final</span> javax.servlet.ServletConfig config;<br>    javax.servlet.jsp.<span class="hljs-type">JspWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">final</span> java.lang.<span class="hljs-type">Object</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>;<br>    javax.servlet.jsp.<span class="hljs-type">JspWriter</span> <span class="hljs-variable">_jspx_out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    javax.servlet.jsp.<span class="hljs-type">PageContext</span> <span class="hljs-variable">_jspx_page_context</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>        pageContext = _jspxFactory.getPageContext(<span class="hljs-built_in">this</span>, request, response,<br>                <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">8192</span>, <span class="hljs-literal">true</span>);<br>        _jspx_page_context = pageContext;<br>        application = pageContext.getServletContext();<br>        config = pageContext.getServletConfig();<br>        session = pageContext.getSession();<br>        out = pageContext.getOut();<br>        _jspx_out = out;<br>        out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;html&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;head&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot; &lt;title&gt;Title&lt;/title&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;/head&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;body&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot; a.jsp 页面\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;/body&gt;\r\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;&lt;/html&gt;\r\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (java.lang.Throwable t) &#123;<br>        <span class="hljs-keyword">if</span> (!(t <span class="hljs-keyword">instanceof</span> javax.servlet.jsp.SkipPageException))&#123;<br>            out = _jspx_out;<br>            <span class="hljs-keyword">if</span> (out != <span class="hljs-literal">null</span> &amp;&amp; out.getBufferSize() != <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-keyword">if</span> (response.isCommitted()) &#123;<br>                        out.flush();<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        out.clearBuffer();<br>                    &#125;<br>                &#125; <span class="hljs-keyword">catch</span> (java.io.IOException e) &#123;&#125;<br>            <span class="hljs-keyword">if</span> (_jspx_page_context != <span class="hljs-literal">null</span>) _jspx_page_context.handlePageException(t);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(t);<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        _jspxFactory.releasePageContext(_jspx_page_context);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="jsp-的三种语法"><a href="#jsp-的三种语法" class="headerlink" title="jsp 的三种语法"></a>jsp 的三种语法</h3><h4 id="jap-头部的-page-指令"><a href="#jap-头部的-page-指令" class="headerlink" title="jap 头部的 page 指令"></a>jap 头部的 page 指令</h4><p>jap 的 page 指令可以修改 jap 页面中一些重要的属性或者行为。</p>
<p>说明：一般不推荐修改。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>1、language 属性 </p>
<p>​		表示 jsp 翻译后是什么语言文件。暂时只支持 java。</p>
</li>
<li><p>2、contentType 属性 </p>
<p>​		表示 jsp 返回的数据类型是什么。也是源码中 response.setContentType()参数值</p>
</li>
<li><p>3、pageEncoding 属性 </p>
<p>​		表示当前 jsp 页面文件本身的字符集。</p>
</li>
<li><p>4、import 属性 </p>
<p>​		跟 java 源代码中一样。用于导包，导类。</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;两个属性是给 out 输出流使用&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
</li>
<li><p>5、autoFlush 属性 </p>
<p>​		设置当 out 输出流缓冲区满了之后，是否自动刷新冲级区。默认值是 true。</p>
</li>
<li><p>6、buffer 属性 </p>
<p>​		设置 out 缓冲区的大小。默认是 8kb</p>
<p>缓冲区溢出错误：</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221103183549184.png" srcset="/img/loading.gif" lazyload alt="image-20221103183549184"></p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;两个属性是给 out 输出流使用&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
</li>
<li><p>7、errorPage 属性 </p>
<p>​		设置当 jsp 页面运行时出错，自动跳转去的错误页面路径。</p>
<!--
errorPage 表示错误后自动跳转去的路径 <br/>
这个路径一般都是以斜杠打头，它表示请求地址为 http://ip:port/工程路径/
映射到代码的 Web 目录
-->
</li>
<li><p>8、isErrorPage 属性 </p>
<p>​		设置当前 jsp 页面是否是错误信息页面，默认是 false。如果是 true 可以获取异常信息。</p>
</li>
<li><p>9、session 属性 </p>
<p>​		设置访问当前 jsp 页面，是否会创建 HttpSession 对象。默认是 true。</p>
</li>
<li><p>10、extends 属性 </p>
<p>​		设置 jsp 翻译出来的 java 类默认继承谁。</p>
</li>
</ul>
<h4 id="jsp-中的常用脚本"><a href="#jsp-中的常用脚本" class="headerlink" title="jsp 中的常用脚本"></a>jsp 中的常用脚本</h4><h5 id="声明脚本（极少使用）"><a href="#声明脚本（极少使用）" class="headerlink" title="声明脚本（极少使用）"></a>声明脚本（极少使用）</h5><ul>
<li><p>声明脚本的格式是：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%! 声明 java 代码 %&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>作用：可以给 jsp 翻译出来的 java 类定义属性和方法，甚至是静态代码块、内部类等。</p>
</li>
<li><p>练习：<br>1、声明类属性<br>2、声明 static 静态代码块<br>3、声明类方法<br>4、声明内部类</p>
</li>
<li><p>代码示例</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--<span class="hljs-number">1</span> 、声明类属性 --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String,Object&gt; map;<br>%&gt;<br>&lt;%--<span class="hljs-number">2</span> 、声明 <span class="hljs-keyword">static</span> 静态代码块 --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">static</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String,Object&gt;();<br>    map.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>&#125;<br>%&gt;<br>&lt;%--<span class="hljs-number">3</span> 、声明类方法 --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">abc</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">12</span>;<br>&#125;<br>%&gt;<br>&lt;%--<span class="hljs-number">4</span> 、声明内部类 --%&gt;<br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">abc</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc&quot;</span>;<br>    &#125;<br>%&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>声明脚本代码翻译对照：</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221103223305270.png" srcset="/img/loading.gif" lazyload alt="image-20221103223305270"></p>
</li>
</ul>
<h5 id="表达式脚本（常用）"><a href="#表达式脚本（常用）" class="headerlink" title="表达式脚本（常用）"></a>表达式脚本（常用）</h5><ul>
<li><p>表达式脚本的格式</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%=表达式%&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>表达式脚本的作用：在 jsp 页面上输出数据</p>
</li>
<li><p>表达式脚本的特点：</p>
<ul>
<li><p>所有的表达式脚本都会被翻译到 _jspService() 方法中</p>
</li>
<li><p>表达式脚本都会被翻译成为 out.print() 输出到页面上</p>
</li>
<li><p>由于表达式脚本翻译的内容都在 _jspService() 方法中，所以 <strong>_jspService()方法中的对象都可以直接使用</strong>。</p>
</li>
<li><p><strong>表达式脚本中的表达式不能以分号结束</strong>。</p>
</li>
<li><p>翻译对照：</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221103224325787.png" srcset="/img/loading.gif" lazyload alt="image-20221103224325787"></p>
</li>
</ul>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%=<span class="hljs-number">12</span> %&gt; &lt;br&gt;<br>&lt;%=<span class="hljs-number">12.12</span> %&gt; &lt;br&gt;<br>&lt;%=<span class="hljs-string">&quot; 我是字符串&quot;</span> %&gt; &lt;br&gt;<br>&lt;%=map%&gt; &lt;br&gt;<br>&lt;%=request.getParameter(<span class="hljs-string">&quot;username&quot;</span>)%&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h5 id="代码脚本"><a href="#代码脚本" class="headerlink" title="代码脚本"></a>代码脚本</h5><ul>
<li><p>代码脚本的格式</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br>	java 语句<br>%&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>代码脚本的作用是：可以在 jsp 页面中，编写我们自己需要的功能（写的是 java 语句）。</p>
</li>
<li><p>代码脚本的特点是：</p>
<ul>
<li>代码脚本翻译之后都在 _jspService 方法中</li>
<li>代码脚本由于翻译到 _jspService() 方法中，所以在 _jspService() 方法中的现有对象都可以直接使用。</li>
<li>还<strong>可以由多个代码脚本块组合完成一个完整的 java 语句</strong>。</li>
<li>代码脚本还<strong>可以和表达式脚本一起组合使用</strong>，在 jsp 页面上输出数据</li>
</ul>
</li>
<li><p>翻译之后的对比</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221103224905402.png" srcset="/img/loading.gif" lazyload alt="image-20221103224905402"></p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>	&lt;%-- 练习： --%&gt;<br>    &lt;%--<span class="hljs-number">1.</span> 代码脚本 ----<span class="hljs-keyword">if</span> 语句 --%&gt;<br>    &lt;%<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">13</span> ;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">12</span>) &#123;<br>    %&gt;<br>    &lt;h1&gt;国哥好帅&lt;/h1&gt;<br>    &lt;%<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>    %&gt;<br>    &lt;h1&gt;国哥又骗人了！&lt;/h1&gt;<br>    &lt;%<br>        &#125;<br>    %&gt;<br>    &lt;br&gt;<br>    &lt;%--<span class="hljs-number">2.</span> 代码脚本 ----<span class="hljs-keyword">for</span> 循环语句 --%&gt;<br>    &lt;table border=<span class="hljs-string">&quot;1&quot;</span> cellspacing=<span class="hljs-string">&quot;0&quot;</span>&gt;<br>        &lt;%<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++) &#123;<br>        %&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;第 &lt;%=j + <span class="hljs-number">1</span>%&gt;行&lt;/td&gt;<br>        &lt;/tr&gt;<br>        &lt;%<br>            &#125;<br>        %&gt;<br>    &lt;/table&gt;<br>    &lt;%--<span class="hljs-number">3.</span> 翻译后 java 文件中 _jspService 方法内的代码都可以写 --%&gt;<br>    &lt;%<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; 用户名的请求参数值是：&quot;</span> + username);<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="jsp-中的三种注释"><a href="#jsp-中的三种注释" class="headerlink" title="jsp 中的三种注释"></a>jsp 中的三种注释</h4><ul>
<li><p>html 注释</p>
<p>html 注释会被翻译到 java 源代码中。在_jspService 方法里，以 out.writer 输出到客户端。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- 这是 html 注释 --&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>java 注释</p>
</li>
</ul>
<p>  java 注释会被翻译到 java 源代码中。</p>
  <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br><span class="hljs-comment">// 单行 java 注释</span><br><span class="hljs-comment">/* 多行 java 注释 */</span><br>%&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>jsp 注释</li>
</ul>
<p>  jsp 注释可以注掉 jsp 页面中所有代码。</p>
  <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%-- 这是 jsp 注释 --%&gt;<br></code></pre></td></tr></table></figure>

<h3 id="jsp-九大内置对象"><a href="#jsp-九大内置对象" class="headerlink" title="jsp 九大内置对象"></a>jsp 九大内置对象</h3><p>jsp 中的内置对象，是指 Tomcat 在翻译 jsp 页面成为 Servlet 源代码后，内部提供的九个对象，叫内置对象。</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221103234209781.png" srcset="/img/loading.gif" lazyload alt="image-20221103234209781"></p>
<ul>
<li>request 									请求对象</li>
<li>response                                   响应对象</li>
<li>pageContext                             jsp 的上下文对象</li>
<li>session                                      会话对象</li>
<li>application                                ServletContext 对象</li>
<li>config                                         ServletConfig 对象</li>
<li>out                                               jsp 输出流对象</li>
<li>page                                            指向当前jsp的对象</li>
<li>exception                                   异常对象</li>
</ul>
<h3 id="jsp-四大域对象"><a href="#jsp-四大域对象" class="headerlink" title="jsp 四大域对象"></a>jsp 四大域对象</h3><ul>
<li><p>四个域对象分别是：</p>
<ul>
<li><strong>pageContext</strong> （<strong>PageContextImpl</strong> 类）：当前 jsp 页面范围内有效</li>
<li><strong>request</strong> （<strong>HttpServletRequest</strong> 类）：一次请求内有效</li>
<li><strong>session</strong> （<strong>HttpSession</strong> 类）：一个会话范围内有效（打开浏览器访问服务器，直到关闭浏览器）</li>
<li><strong>application</strong> （<strong>ServletContext</strong> 类）：整个 web 工程范围内有效（只要 web 工程不停止，数据都在）</li>
</ul>
</li>
<li><p>域对象是可以像 Map 一样存取数据的对象。四个域对象功能一样。不同的是它们对数据的存取范围。</p>
</li>
<li><p>虽然四个域对象都可以存取数据。在使用上它们是有优先顺序的。</p>
</li>
<li><p>四个域在使用的时候，优先顺序分别是，它们从小到大的范围的顺序（优先使用范围小的）。</p>
</li>
<li><p>pageContext &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt; request &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt; session &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt; application</p>
</li>
<li><p>示例代码：</p>
<ul>
<li><p>scope.jsp 页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;h1&gt;scope.jap页面&lt;/h1&gt;<br>    &lt;%<br>        pageContext.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;pageContext&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;request&quot;</span>);<br>        session.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;session&quot;</span>);<br>        application.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;application&quot;</span>);<br>    %&gt;<br>    pageContext域是否有值：&lt;%=pageContext.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    request域是否有值：&lt;%=request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    session域是否有值：&lt;%=session.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    application域是否有值：&lt;%=application.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    &lt;%<br>        <span class="hljs-comment">//请求转发</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/scope2.jsp&quot;</span>).forward(request,response);<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>scope2.jap 页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;h1&gt;scope2.jap页面&lt;/h1&gt;<br>    pageContext域是否有值：&lt;%=pageContext.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    request域是否有值：&lt;%=request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    session域是否有值：&lt;%=session.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>    application域是否有值：&lt;%=application.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="jsp-中的-out-输出和-response-getWriter-输出的区别"><a href="#jsp-中的-out-输出和-response-getWriter-输出的区别" class="headerlink" title="jsp 中的 out 输出和 response.getWriter 输出的区别"></a>jsp 中的 out 输出和 response.getWriter 输出的区别</h3><ul>
<li><p>response 中表示响应，我们经常用于设置返回给客户端的内容（输出）</p>
</li>
<li><p>out 也是给用户做输出使用的。</p>
</li>
<li><p><img src="/2023/07/04/JavaWebNote/image-20221104144654925.png" srcset="/img/loading.gif" lazyload alt="image-20221104144654925"></p>
</li>
<li><p>当 jsp 页面中所有代码执行完成后会做以下两个操作：</p>
<ul>
<li>1、执行 <strong>out.flush()</strong> 操作，<strong>会把 out 缓冲区中的数据追加写入到 response 缓冲区末尾</strong></li>
<li>2、会执行 response 的刷新操作，把全部数据写给客户端</li>
<li>因此，如果 out 和 response.getWriter 混用，会先执行 response 的操作</li>
</ul>
</li>
<li><p>由于 jsp 翻译之后，底层源代码都是使用 out 来进行输出。所以一般情况下，我们在 jsp 页面中统一使用 out 来进行输出，避免打乱页面输出内容的顺序。</p>
</li>
<li><p>out.write()   输出字符串没有问题（数值会按acll码值存储到缓存数组再输出）</p>
</li>
<li><p>out.print()   输出任意数据都没有问题（会转换成为字符串后调用 write 输出）</p>
</li>
<li><p><strong>深入源码，浅出结论：在 jsp 页面中，可以统一使用 out.print()来进行输出</strong></p>
</li>
<li><p>代码示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        out.write(<span class="hljs-string">&quot;out输出1&lt;br/&gt;&quot;</span>);<br>        out.flush();<br>        out.write(<span class="hljs-string">&quot;out输出2&lt;br/&gt;&quot;</span>);<br>        response.getWriter().write(<span class="hljs-string">&quot;response输出1&lt;br/&gt;&quot;</span>);<br>        response.getWriter().write(<span class="hljs-string">&quot;response输出2&lt;br/&gt;&quot;</span>);<br>    %&gt;<br>    &lt;%<br>        out.write(<span class="hljs-number">12</span>);<br>        out.print(<span class="hljs-number">12</span>);<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="jsp-的常用标签"><a href="#jsp-的常用标签" class="headerlink" title="jsp 的常用标签"></a>jsp 的常用标签</h3><h4 id="jsp-静态包含"><a href="#jsp-静态包含" class="headerlink" title="jsp 静态包含"></a>jsp 静态包含</h4><p>示例说明：</p>
<ul>
<li><p><strong>&lt;%@ include file&#x3D;””%&gt;   就是静态包含</strong></p>
</li>
<li><p>file 属性指定你要包含的 jsp 页面的路径</p>
</li>
<li><p>地址中第一个斜杠 &#x2F; 表示为 <a href="http://ip:port/工程路径/（映射到代码的">http://ip:port/工程路径/（映射到代码的</a> web 目录）</p>
</li>
<li><p>静态包含的特点：</p>
<ul>
<li>1 、静态包含不会翻译被包含的 jsp 页面代码（即&lt;%@ include file&#x3D;”…”%&gt;）</li>
<li>2 、静态包含其实是把被包含的 jsp 页面的代码拷贝到包含的位置执行输出。</li>
</ul>
</li>
<li><p>代码示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    主题内容&lt;br/&gt;<br>    &lt;%@ include file=<span class="hljs-string">&quot;/include/footer.jsp&quot;</span>%&gt;  &lt;!--另一个jsp页面--&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="jsp-动态包含"><a href="#jsp-动态包含" class="headerlink" title="jsp 动态包含"></a>jsp 动态包含</h4><p>示例说明：</p>
<ul>
<li><p>&lt;jsp:include page&#x3D;””&gt;&lt;&#x2F;jsp:include&gt;   这是动态包含</p>
</li>
<li><p>page 属性是指定你要包含的jsp页面的路径</p>
</li>
<li><p>动态包含也可以像静态包含一样，把被包含的内容执行输出到包含位置</p>
</li>
<li><p>动态包含的特点：</p>
<ul>
<li><p>1、动态包含把包含的 jsp 页面也翻译成为 java 代码</p>
</li>
<li><p>2、动态包含底层代码使用如下代码去调用被包含的 jsp 页面执行输出</p>
<p>​		JspRuntimeLibrary.include(request, response, “&#x2F;include&#x2F;footer.jsp”, out, false);</p>
</li>
<li><p>3、动态包含，还可以传递参数</p>
</li>
</ul>
</li>
<li><p>代码示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--main 页面--&gt;<br>&lt;jsp:include page=<span class="hljs-string">&quot;/include/footer.jsp&quot;</span>&gt;<br>    &lt;jsp:param name=<span class="hljs-string">&quot;username&quot;</span> value=<span class="hljs-string">&quot;bbj&quot;</span>/&gt;<br>    &lt;jsp:param name=<span class="hljs-string">&quot;password&quot;</span> value=<span class="hljs-string">&quot;root&quot;</span>/&gt;<br>&lt;/jsp:include&gt;<br><br>&lt;!--footer页面--&gt;<br>&lt;body&gt;<br>    页脚信息&lt;br&gt;<br>    改一下&lt;br&gt;<br>    &lt;%=request.getParameter(<span class="hljs-string">&quot;username&quot;</span>)%&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>动态包含的底层原理：</p>
 <img src="image-20221104214608243.png" srcset="/img/loading.gif" lazyload alt="image-20221104214608243" style="zoom: 70%;" /></li>
</ul>
<h4 id="jsp-标签-转发"><a href="#jsp-标签-转发" class="headerlink" title="jsp 标签-转发"></a>jsp 标签-转发</h4><p>示例说明：</p>
<ul>
<li><p>&lt;jsp:forward page&#x3D;””&gt;&lt;&#x2F;jsp:forward&gt; 是请求转发标签，它的功能就是请求转发</p>
</li>
<li><p>page 属性设置请求转发的路径</p>
</li>
<li><p>代码示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;jsp:forward page=<span class="hljs-string">&quot;/scope2.jsp&quot;</span>&gt;&lt;/jsp:forward&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="jsp-练习题"><a href="#jsp-练习题" class="headerlink" title="jsp 练习题"></a>jsp 练习题</h3><p>练习一：在 jsp 页面中输出九九乘法口诀表</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;title&gt;Title&lt;/title&gt;<br>        &lt;style type=<span class="hljs-string">&quot;text/css&quot;</span>&gt;<br>            table&#123;<br>                width: 650px;<br>            &#125;<br>        &lt;/style&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%-- 练习一：在 jsp 页面中输出九九乘法口诀表 --%&gt;<br>        &lt;h1 align=<span class="hljs-string">&quot;center&quot;</span>&gt;九九乘法口诀表&lt;/h1&gt;<br>        &lt;table align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>            &lt;%-- 外层循环遍历行 --%&gt;<br>            &lt;% <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">9</span>; i++) &#123; %&gt;<br>            &lt;tr&gt;<br>                &lt;%-- 内层循环遍历单元格 --%&gt;<br>                &lt;% <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= i ; j++) &#123; %&gt;<br>                &lt;td&gt;&lt;%=j + <span class="hljs-string">&quot;x&quot;</span> + i + <span class="hljs-string">&quot;=&quot;</span> + (i*j)%&gt;&lt;/td&gt;<br>                &lt;% &#125; %&gt;<br>            &lt;/tr&gt;<br>            &lt;% &#125; %&gt;<br>        &lt;/table&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>



<p>练习二：jsp 输出一个表格，里面有 10 个学生信息。</p>
<p>Student 类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String phone;<br>    <span class="hljs-comment">//... ... </span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>SearchStudentServlet 程序：</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221104221644866.png" srcset="/img/loading.gif" lazyload alt="image-20221104221644866"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchStudentServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">// 获取请求的参数</span><br>        <span class="hljs-comment">// 发 sql 语句查询学生的信息</span><br>        <span class="hljs-comment">// 使用 for 循环生成查询到的数据做模拟</span><br>        List&lt;Student&gt; studentList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Student&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>            studentList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(t,<span class="hljs-string">&quot;name&quot;</span>+t, <span class="hljs-number">18</span>+t,<span class="hljs-string">&quot;phone&quot;</span>+t));<br>        &#125;<br>        <span class="hljs-comment">// 保存查询到的结果（学生信息）到 request 域中</span><br>        req.setAttribute(<span class="hljs-string">&quot;stuList&quot;</span>, studentList);<br>        <span class="hljs-comment">// 请求转发到 showStudent.jsp 页面</span><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;/test/showStudent.jsp&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>showStudent.jsp 页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.List&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;com.atguigu.pojo.Student&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.ArrayList&quot;</span> %&gt;<br>&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;title&gt;Title&lt;/title&gt;<br>        &lt;style&gt;<br>            table&#123;<br>                border: 1px blue solid;<br>                width: 600px;<br>                border-collapse: collapse;<br>            &#125;<br>            td,th&#123;<br>                border: 1px blue solid;<br>            &#125;<br>        &lt;/style&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%-- 练习二： jsp 输出一个表格，里面有 <span class="hljs-number">10</span> 个学生信息。 --%&gt;<br>        &lt;%<br>        List&lt;Student&gt; studentList = (List&lt;Student&gt;) request.getAttribute(<span class="hljs-string">&quot;stuList&quot;</span>);<br>        %&gt;<br>        &lt;table&gt;<br>            &lt;tr&gt;<br>                &lt;td&gt;编号&lt;/td&gt;<br>                &lt;td&gt;姓名&lt;/td&gt;<br>                &lt;td&gt;年龄&lt;/td&gt;<br>                &lt;td&gt;电话&lt;/td&gt;<br>                &lt;td&gt;操作&lt;/td&gt;<br>            &lt;/tr&gt;<br>            &lt;% <span class="hljs-keyword">for</span> (Student student : studentList) &#123; %&gt;<br>            &lt;tr&gt;<br>                &lt;td&gt;&lt;%=student.getId()%&gt;&lt;/td&gt;<br>                &lt;td&gt;&lt;%=student.getName()%&gt;&lt;/td&gt;<br>                &lt;td&gt;&lt;%=student.getAge()%&gt;&lt;/td&gt;<br>                &lt;td&gt;&lt;%=student.getPhone()%&gt;&lt;/td&gt;<br>                &lt;td&gt;删除、修改&lt;/td&gt;<br>            &lt;/tr&gt;<br>            &lt;% &#125; %&gt;<br>        &lt;/table&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>





<h2 id="Listener-监听器"><a href="#Listener-监听器" class="headerlink" title="Listener 监听器"></a>Listener 监听器</h2><ul>
<li><p>1、Listener 监听器它是 JavaWeb 的三大组件之一。</p>
<p>​		JavaWeb 的三大组件分别是：Servlet 程序、Filter 过滤器、Listener 监听器。</p>
</li>
<li><p>2、Listener 它是 JavaEE 的规范，就是接口。</p>
</li>
<li><p>3、监听器的作用是，监听某种事物的变化，然后通过回调函数，反馈给客户（程序）去做一些相应的处理。</p>
</li>
</ul>
<h3 id="ServletContextListener-监听器"><a href="#ServletContextListener-监听器" class="headerlink" title="ServletContextListener 监听器"></a>ServletContextListener 监听器</h3><ul>
<li><p>ServletContextListener 它可以监听 ServletContext 对象的创建和销毁。</p>
</li>
<li><p>ServletContext 对象在 web 工程启动的时候创建，在 web 工程停止的时候销毁。</p>
</li>
<li><p>监听到创建和销毁之后都会分别调用 ServletContextListener 监听器的方法反馈。</p>
</li>
<li><p>两个方法分别是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ServletContextListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">EventListener</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">	* 在 ServletContext 对象创建之后马上调用，做初始化</span><br><span class="hljs-comment">	*/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextInitialized</span><span class="hljs-params">(ServletContextEvent sce)</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">	* 在 ServletContext 对象销毁之后调用</span><br><span class="hljs-comment">	*/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextDestroyed</span><span class="hljs-params">(ServletContextEvent sce)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>如何使用 ServletContextListener 监听器监听 ServletContext 对象？</p>
<p>使用步骤如下：</p>
<ul>
<li>1、编写一个类去实现 ServletContextListener</li>
<li>2、实现其两个回调方法</li>
<li>3、到 web.xml 中去配置监听器</li>
</ul>
<p>示例代码：</p>
<p>监听器实现类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServletContextListenerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletContextListener</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextInitialized</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ServletContext 对象被创建了&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextDestroyed</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ServletContext 对象被销毁了&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>web.xml 中的配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 配置监听器 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>com.atguigu.listener.MyServletContextListenerImpl<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="EL-表达式"><a href="#EL-表达式" class="headerlink" title="EL 表达式"></a>EL 表达式</h2><h3 id="EL-表达式的介绍"><a href="#EL-表达式的介绍" class="headerlink" title="EL 表达式的介绍"></a>EL 表达式的介绍</h3><ul>
<li><p>EL 表达式的全称是 Expression Language，是表达式语言。</p>
</li>
<li><p>EL 表达式的作用：EL 表达式主要是代替 jsp 页面中的表达式脚本，在 jsp 页面中进行数据的输出。</p>
</li>
<li><p>因为 EL 表达式在输出数据的时候，要比 jsp 的表达式脚本要简洁得多。</p>
</li>
<li><p><strong>EL 表达式的格式是：${表达式}</strong></p>
</li>
<li><p>EL 表达式在输出 null 值的时候，输出的是空串。jsp 表达式脚本输出 null 值的时候，输出的是 null 字符串。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>    	request.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot; 值&quot;</span>);<br>    %&gt;<br>    表达式脚本输出 key 的值是：<br>    &lt;%=request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)==<span class="hljs-literal">null</span>?<span class="hljs-string">&quot;&quot;</span>:request.getAttribute(<span class="hljs-string">&quot;key&quot;</span>)%&gt;&lt;br/&gt;<br>    EL 表达式输出 key 的值是：$&#123;key&#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="EL-表达式搜索域数据的顺序"><a href="#EL-表达式搜索域数据的顺序" class="headerlink" title="EL 表达式搜索域数据的顺序"></a>EL 表达式搜索域数据的顺序</h3><p>EL 表达式主要是在jsp页面中输出数据（主要是输出域对象中的数据）</p>
<p>当四个域中都有相同的key的数据的时候，EL 表达式会按照<strong>四个域的从小到大的顺序</strong>去进行搜索，找到就输出。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>    <span class="hljs-comment">// 往四个域中都保存了相同的 key 的数据。</span><br>    request.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;request&quot;</span>);<br>    session.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;session&quot;</span>);<br>    application.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;application&quot;</span>);<br>    pageContext.setAttribute(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;pageContext&quot;</span>);<br>    %&gt;<br>    $&#123; key &#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>





<h3 id="EL-表达式输出-Bean-的属性"><a href="#EL-表达式输出-Bean-的属性" class="headerlink" title="EL 表达式输出 Bean 的属性"></a>EL 表达式输出 Bean 的属性</h3><p>需求——输出 Person 类中普通属性，数组属性。list 集合属性和 map 集合属性</p>
<p>注意：EL表达式 获取值时不是直接通过类中属性获取，而是通过类中的 getXXX() 方法获取到对应的属性</p>
<p>示例代码：</p>
<p>Person类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-comment">// i. 需求 —— 输出 Person 类中普通属性，数组属性。 list 集合属性和 map 集合属性。</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String[] phones;<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; cities;<br>    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; map;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">18</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>jap页面（输出信息）</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>        person.setName(<span class="hljs-string">&quot; 国哥好帅！&quot;</span>);<br>        person.setPhones(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;18610541354&quot;</span>,<span class="hljs-string">&quot;18688886666&quot;</span>,<span class="hljs-string">&quot;18699998888&quot;</span>&#125;);<br>        List&lt;String&gt; cities = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        cities.add(<span class="hljs-string">&quot; 北京&quot;</span>);<br>        cities.add(<span class="hljs-string">&quot; 上海&quot;</span>);<br>        cities.add(<span class="hljs-string">&quot; 深圳&quot;</span>);<br>        person.setCities(cities);<br>        Map&lt;String,Object&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;value1&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;key2&quot;</span>,<span class="hljs-string">&quot;value2&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;key3&quot;</span>,<span class="hljs-string">&quot;value3&quot;</span>);<br>        person.setMap(map);<br>        pageContext.setAttribute(<span class="hljs-string">&quot;p&quot;</span>, person);<br>    %&gt;<br>    输出 Person：$&#123; p &#125;&lt;br/&gt;<br>    输出 Person 的 name 属性：$&#123;p.name&#125; &lt;br&gt;<br>    输出 Person 的 pnones 数组属性值：$&#123;p.phones[<span class="hljs-number">2</span>]&#125; &lt;br&gt;<br>    输出 Person 的 cities 集合中的元素值：$&#123;p.cities&#125; &lt;br&gt;<br>    输出 Person 的 List 集合中个别元素值：$&#123;p.cities[<span class="hljs-number">2</span>]&#125; &lt;br&gt;<br>    输出 Person 的 Map 集合: $&#123;p.map&#125; &lt;br&gt;<br>    输出 Person 的 Map 集合中某个 key 的值: $&#123;p.map.key3&#125; &lt;br&gt;<br>    输出 Person 的 age 属性：$&#123;p.age&#125; &lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>



<h3 id="EL-表达式——运算"><a href="#EL-表达式——运算" class="headerlink" title="EL 表达式——运算"></a>EL 表达式——运算</h3><ul>
<li><p>语法：${ 运算表达式 } </p>
</li>
<li><p>EL 表达式支持如下运算符：</p>
<ul>
<li><p>1）关系运算</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221105092644045.png" srcset="/img/loading.gif" lazyload alt="image-20221105092644045"></p>
</li>
<li><p>2）逻辑运算</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221105092714040.png" srcset="/img/loading.gif" lazyload alt="image-20221105092714040"></p>
</li>
<li><p>3）算数运算</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221105092836621.png" srcset="/img/loading.gif" lazyload alt="image-20221105092836621"></p>
</li>
</ul>
</li>
<li><p>empty 运算</p>
<ul>
<li><p>empty 运算可以判断一个数据是否为空，如果为空则输出 true，不为空则输出 false。</p>
<p>以下几种情况为空：</p>
</li>
<li><p>1、值为 null 值的时候，为空</p>
</li>
<li><p>2、值为 空串 的时候，为空</p>
</li>
<li><p>3、值是 Object 类型数组，长度为零的时候</p>
</li>
<li><p>4、list 集合，元素个数为零</p>
</li>
<li><p>5、map 集合，元素个数为零</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        <span class="hljs-comment">// 1 、值为 null 值的时候，为空</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyNull&quot;</span>, <span class="hljs-literal">null</span>);<br>        <span class="hljs-comment">// 2 、值为空串的时候，为空</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyStr&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-comment">// 3 、值是 Object 类型数组，长度为零的时候</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyArr&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;&#125;);<br>        <span class="hljs-comment">// 4 、 list 集合，元素个数为零</span><br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-comment">// list.add(&quot;abc&quot;);</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyList&quot;</span>, list);<br>        <span class="hljs-comment">// 5 、 map 集合，元素个数为零</span><br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br>        <span class="hljs-comment">// map.put(&quot;key1&quot;, &quot;value1&quot;);</span><br>        request.setAttribute(<span class="hljs-string">&quot;emptyMap&quot;</span>, map);<br>    %&gt;<br>    $&#123; empty emptyNull &#125; &lt;br/&gt;<br>    $&#123; empty emptyStr &#125; &lt;br/&gt;<br>    $&#123; empty emptyArr &#125; &lt;br/&gt;<br>    $&#123; empty emptyList &#125; &lt;br/&gt;<br>    $&#123; empty emptyMap &#125; &lt;br/&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>三元运算</p>
</li>
<li><p>表达式 1 ？表达式 2：表达式 3</p>
</li>
<li><p>如果表达式 1 的值为真，返回表达式 2 的值，如果表达式 1 的值为假，返回表达式 3 的值。</p>
</li>
<li><p>示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">$&#123; <span class="hljs-number">12</span> != <span class="hljs-number">12</span> ? <span class="hljs-string">&quot;国哥帅呆&quot;</span> : <span class="hljs-string">&quot;国哥又骗人啦&quot;</span> &#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>“ . ” 点运算符 和 [] 中括号运算符</p>
</li>
<li><p>. 点运算，可以输出 Bean 对象中某个属性的值。</p>
</li>
<li><p>[] 中括号运算，可以输出有序集合中某个元素的值。</p>
<p>并且[]中括号运算，还可以输出 map 集合中 key 里含有特殊字符的 key 的值。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br>        map.put(<span class="hljs-string">&quot;a.a.a&quot;</span>, <span class="hljs-string">&quot;aaaValue&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;b+b+b&quot;</span>, <span class="hljs-string">&quot;bbbValue&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;c-c-c&quot;</span>, <span class="hljs-string">&quot;cccValue&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;map&quot;</span>, map);<br>    %&gt;<br>    $&#123; map[<span class="hljs-string">&#x27;a.a.a&#x27;</span>] &#125; &lt;br&gt;<br>    $&#123; map[<span class="hljs-string">&quot;b+b+b&quot;</span>] &#125; &lt;br&gt;<br>    $&#123; map[<span class="hljs-string">&#x27;c-c-c&#x27;</span>] &#125; &lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="EL-表达式的11个隐含对象"><a href="#EL-表达式的11个隐含对象" class="headerlink" title="EL 表达式的11个隐含对象"></a>EL 表达式的11个隐含对象</h3><p>EL 表达式中的11个隐含对象，是EL表达式自己定义的，可以直接使用</p>
<table>
<thead>
<tr>
<th align="center">变量</th>
<th align="center">类型</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">pageContext</td>
<td align="center">PageContextImpl</td>
<td align="center">可以获取jsp中的九大内置对象</td>
</tr>
<tr>
<td align="center">pageScope</td>
<td align="center">Map&lt;String, Object&gt;</td>
<td align="center">可以获取 pageContext 域中的数据</td>
</tr>
<tr>
<td align="center">requestScope</td>
<td align="center">Map&lt;String, Object&gt;</td>
<td align="center">可以获取 Request 域中的数据</td>
</tr>
<tr>
<td align="center">sessionScope</td>
<td align="center">Map&lt;String, Object&gt;</td>
<td align="center">可以获取 Session 域中的数据</td>
</tr>
<tr>
<td align="center">applicationScope</td>
<td align="center">Map&lt;String, Object&gt;</td>
<td align="center">可以获取 ServletContext 域中的数据</td>
</tr>
<tr>
<td align="center">param</td>
<td align="center">Map&lt;String, String&gt;</td>
<td align="center">可以获取请求参数的值</td>
</tr>
<tr>
<td align="center">paramValues</td>
<td align="center">Map&lt;String,String[]&gt;</td>
<td align="center">可以获取请求参数的值，获取多个值的时候使用</td>
</tr>
<tr>
<td align="center">header</td>
<td align="center">Map&lt;String, String&gt;</td>
<td align="center">它可以获取请求头的信息</td>
</tr>
<tr>
<td align="center">headerValues</td>
<td align="center">Map&lt;String,String[]&gt;</td>
<td align="center">可以获取请求头的信息，它可以获取多个值的情况</td>
</tr>
<tr>
<td align="center">cookie</td>
<td align="center">Map&lt;String, Cookie&gt;</td>
<td align="center">它可以获取当前请求的 Cookie 信息</td>
</tr>
<tr>
<td align="center">initParam</td>
<td align="center">Map&lt;String, String&gt;</td>
<td align="center">可获取在 web.xml 中配置的&lt;context-param&gt;上下文参数</td>
</tr>
</tbody></table>
<h4 id="EL-获取四个特定域中的属性"><a href="#EL-获取四个特定域中的属性" class="headerlink" title="EL 获取四个特定域中的属性"></a>EL 获取四个特定域中的属性</h4><p>pageScope 					&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 					pageContext 域<br>requestScope			    &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 					Request 域<br>sessionScope 			   &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 					 Session 域<br>applicationScope 		 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 					ServletContext 域</p>
<p>代码示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        pageContext.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;pageContext1&quot;</span>);<br>        pageContext.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;pageContext2&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;request&quot;</span>);<br>        session.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;session&quot;</span>);<br>        application.setAttribute(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;application&quot;</span>);<br>    %&gt;<br>    $&#123; key2 &#125; &lt;!-- 会输出pageContext的key2 --&gt;<br>    $&#123; applicationScope.key2 &#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>



<h4 id="pageContext-对象的使用"><a href="#pageContext-对象的使用" class="headerlink" title="pageContext 对象的使用"></a>pageContext 对象的使用</h4><ol>
<li>协议：${ req.scheme }</li>
<li>服务器 ip：${ pageContext.request.serverName }</li>
<li>服务器端口：${ pageContext.request.serverPort }</li>
<li>获取工程路径：${ pageContext.request.contextPath }</li>
<li>获取请求方法：${ pageContext.request.method }</li>
<li>获取客户端 ip 地址：${ pageContext.request.remoteHost }</li>
<li>获取会话的 id 编号：${ pageContext.session.id }</li>
</ol>
<p>代码示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%--<br>    	JSP 方式获取相关信息：<br>        request.getScheme() 	 它可以获取请求的协议<br>        request.getServerName()  获取请求的服务器 ip 或域名<br>        request.getServerPort()  获取请求的服务器端口号<br>        request.getContextPath() 获取当前工程路径<br>        request.getMethod() 	 获取请求的方式（ GET 或 POST ）<br>        request.getRemoteHost()  获取客户端的 ip 地址<br>        session.getId() 		 获取会话的唯一标识<br>    --%&gt;<br>    &lt;%<br>    	<span class="hljs-comment">//设置，简化代码</span><br>    	pageContext.setAttribute(<span class="hljs-string">&quot;req&quot;</span>, request);  <br>    %&gt;<br>    <span class="hljs-number">1.</span>协议： $&#123; req.scheme &#125; 或 &lt;%=request.getScheme() %&gt;&lt;br&gt;<br>    <span class="hljs-number">2.</span>服务器 ip：$&#123; pageContext.request.serverName &#125;&lt;br&gt;<br>    <span class="hljs-number">3.</span>服务器端口：$&#123; pageContext.request.serverPort &#125;&lt;br&gt;<br>    <span class="hljs-number">4.</span>获取工程路径：$&#123; pageContext.request.contextPath &#125;&lt;br&gt;<br>    <span class="hljs-number">5.</span>获取请求方法：$&#123; pageContext.request.method &#125;&lt;br&gt;<br>    <span class="hljs-number">6.</span>获取客户端 ip 地址：$&#123; pageContext.request.remoteHost &#125;&lt;br&gt;<br>    <span class="hljs-number">7.</span>获取会话的 id 编号：$&#123; pageContext.session.id &#125;&lt;br&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>



<h4 id="EL-表达式其他隐含对象的使用"><a href="#EL-表达式其他隐含对象的使用" class="headerlink" title="EL 表达式其他隐含对象的使用"></a>EL 表达式其他隐含对象的使用</h4><ul>
<li><p>param 						Map&lt;String,String&gt;    			它可以获取请求参数的值</p>
</li>
<li><p>paramValues             Map&lt;String,String[]&gt;              它也可以获取请求参数的值，获取多个值的时候使用。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- <br>请求地址为：http:<span class="hljs-comment">//localhost:8080/09_EL_JSTL/other_el_obj.jsp?username=wzg168&amp;password=666666&amp;hobby=java&amp;hobby=cpp </span><br>--&gt;<br>输出请求参数 username 的值：$&#123; param.username &#125; &lt;br&gt;<br>输出请求参数 password 的值：$&#123; param.password &#125; &lt;br&gt;<br>输出请求参数 username 的值：$&#123; paramValues.username[<span class="hljs-number">0</span>] &#125; &lt;br&gt;<br>输出请求参数 hobby 的值：$&#123; paramValues.hobby[<span class="hljs-number">0</span>] &#125; &lt;br&gt;<br>输出请求参数 hobby 的值：$&#123; paramValues.hobby[<span class="hljs-number">1</span>] &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>header                      Map&lt;String,String&gt;                 它可以获取请求头的信息</p>
</li>
<li><p>headerValues          Map&lt;String,String[]&gt;               它可以获取请求头的信息，它可以获取多个值的情况</p>
<img src="image-20221105105607665.png" srcset="/img/loading.gif" lazyload alt="image-20221105105607665" style="zoom:80%;" />

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">输出请求头信息：$&#123; header &#125;&lt;br&gt;<br>输出请求头【User-Agent】的值：$&#123; header[<span class="hljs-string">&#x27;User-Agent&#x27;</span>] &#125; &lt;br&gt;<br>输出请求头【Connection】的值：$&#123; header.Connection &#125; &lt;br&gt;<br>输出请求头【User-Agent】的值：$&#123; headerValues[<span class="hljs-string">&#x27;User-Agent&#x27;</span>][<span class="hljs-number">0</span>] &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>cookie                       Map&lt;String,Cookie&gt;                它可以获取当前请求的 Cookie 信息</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsp">获取 Cookie 的名称：$&#123; cookie.JSESSIONID.name &#125; &lt;br&gt;<br>获取 Cookie 的值：$&#123; cookie.JSESSIONID.value &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>initParam           Map&lt;String,String&gt;        它可以获取在 web.xml 中配置的&lt;context-param&gt;上下文参数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- xml中的配置 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql:///test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- 示例代码 --&gt;<br>输出&amp;lt;Context-param&amp;gt;username 的值：$&#123; initParam.username &#125; &lt;br&gt;<br>输出&amp;lt;Context-param&amp;gt;url 的值：$&#123; initParam.url &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="JSTL-标签库（次重点）"><a href="#JSTL-标签库（次重点）" class="headerlink" title="JSTL 标签库（次重点）"></a>JSTL 标签库（次重点）</h2><h3 id="简要介绍"><a href="#简要介绍" class="headerlink" title="简要介绍"></a>简要介绍</h3><p>JSTL 标签库 全称是指 JSP Standard Tag Library JSP 标准标签库。是一个不断完善的开放源代码的 JSP 标签库。<br>EL 表达式主要是为了替换 jsp 中的表达式脚本，而标签库则是为了替换代码脚本。这样使得整个 jsp 页面变得更佳简洁。</p>
<ul>
<li><p>JSTL 由五个不同功能的标签库组成。</p>
<table>
<thead>
<tr>
<th>功能范围</th>
<th>URI</th>
<th>前缀</th>
</tr>
</thead>
<tbody><tr>
<td>核心 标签库（重点）</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a></td>
<td>c</td>
</tr>
<tr>
<td>格式化</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a></td>
<td>fmt</td>
</tr>
<tr>
<td>函数</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a></td>
<td>fn</td>
</tr>
<tr>
<td>数据库（不使用）</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a></td>
<td>sql</td>
</tr>
<tr>
<td>XML（不使用）</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a></td>
<td>x</td>
</tr>
</tbody></table>
</li>
<li><p>在 jsp 标签库中使用 taglib 指令引入标签库</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsp">CORE 标签库<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;c&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;<br>XML 标签库<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;x&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/xml&quot;</span> %&gt;<br>FMT 标签库<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;fmt&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;<br>SQL 标签库<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;sql&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/sql&quot;</span> %&gt;<br>FUNCTIONS 标签库<br>&lt;%@ taglib prefix=<span class="hljs-string">&quot;fn&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="JSTL-标签库的使用步骤"><a href="#JSTL-标签库的使用步骤" class="headerlink" title="JSTL 标签库的使用步骤"></a>JSTL 标签库的使用步骤</h3><ul>
<li><p>1、先导入 jstl 标签库的 jar 包。</p>
<ul>
<li>taglibs-standard-impl-1.2.1.jar</li>
<li>taglibs-standard-spec-1.2.1.jar</li>
</ul>
<p> <img src="/2023/07/04/JavaWebNote/image-20221105112814881.png" srcset="/img/loading.gif" lazyload alt="image-20221105112814881"></p>
</li>
<li><p>2、第二步，使用 taglib 指令引入标签库。</p>
<ul>
<li>&lt;%@ taglib prefix&#x3D;”c” uri&#x3D;”<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a>“ %&gt;</li>
</ul>
</li>
</ul>
<h3 id="core-核心库使用"><a href="#core-核心库使用" class="headerlink" title="core 核心库使用"></a>core 核心库使用</h3><ul>
<li><p>&lt;c:set &#x2F;&gt; （使用很少）</p>
<p>作用：set 标签可以往域中保存数据</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<br>    i.&lt;c:set /&gt;<br>    作用： set 标签可以往域中保存数据<br>        <br>    域对象.setAttribute(key,value);<br>	scope 属性设置保存到哪个域<br>        page 表示 PageContext 域（默认值）<br>        request 表示 Request 域<br>        session 表示 Session 域<br>        application 表示 ServletContext 域<br>    <span class="hljs-keyword">var</span> 属性设置 key<br>    value 属性设置 值<br>--&gt;<br>保存之前：$&#123; sessionScope.abc &#125; &lt;br&gt;<br>&lt;c:set scope=<span class="hljs-string">&quot;session&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;abc&quot;</span> value=<span class="hljs-string">&quot;abcValue&quot;</span>/&gt;<br>保存之后：$&#123; sessionScope.abc &#125; &lt;br&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>&lt;c:if &#x2F;&gt;</p>
</li>
</ul>
<p>  if 标签用来做 if 判断。(注：没有else标签)</p>
  <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<br>    ii.&lt;c:<span class="hljs-keyword">if</span> /&gt;<br>        <span class="hljs-keyword">if</span> 标签用来做 <span class="hljs-keyword">if</span> 判断。<br>        test 属性表示判断的条件（使用 EL 表达式输出）<br>--&gt;<br>&lt;c:<span class="hljs-keyword">if</span> test=<span class="hljs-string">&quot;$&#123; 12 == 12 &#125;&quot;</span>&gt;<br>    &lt;h1&gt;<span class="hljs-number">12</span> 等于 <span class="hljs-number">12</span>&lt;/h1&gt;<br>&lt;/c:<span class="hljs-keyword">if</span>&gt;<br>&lt;c:<span class="hljs-keyword">if</span> test=<span class="hljs-string">&quot;$&#123; 12 != 12 &#125;&quot;</span>&gt;<br>    &lt;h1&gt;<span class="hljs-number">12</span> 不等于 <span class="hljs-number">12</span>&lt;/h1&gt;<br>&lt;/c:<span class="hljs-keyword">if</span>&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt; 标签</p>
<p>作用：多路判断。跟 switch … case …. default 非常接近</p>
<p>​			不同之处，不需要break</p>
<p>注意：标签里不能使用 html 注释，要使用 jsp 注释</p>
<p>​			when 标签的父标签一定要是 choose 标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<br>    iii.&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt; 标签<br>        作用：多路判断。跟 <span class="hljs-keyword">switch</span> ... <span class="hljs-keyword">case</span> .... <span class="hljs-keyword">default</span> 非常接近<br>            <br>        choose 标签开始选择判断<br>        when 标签表示每一种判断情况<br>        test 属性表示当前这种判断情况的值<br>        otherwise 标签表示剩下的情况<br>        &lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt; 标签使用时需要注意的点：<br>            <span class="hljs-number">1</span>、标签里不能使用 html 注释，要使用 jsp 注释<br>            <span class="hljs-number">2</span>、when 标签的父标签一定要是 choose 标签<br>--&gt;<br>&lt;%<br>request.setAttribute(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-number">180</span>);<br>%&gt;<br>&lt;c:choose&gt;<br>    &lt;%--（标签里不能使用 html 注释，要使用 jsp 注释）--%&gt;  <br>    &lt;c:when test=<span class="hljs-string">&quot;$&#123; requestScope.height &gt; 190 &#125;&quot;</span>&gt;<br>        &lt;h2&gt;小巨人&lt;/h2&gt;<br>    &lt;/c:when&gt;<br>    &lt;c:when test=<span class="hljs-string">&quot;$&#123; requestScope.height &gt; 180 &#125;&quot;</span>&gt;<br>        &lt;h2&gt;很高&lt;/h2&gt;<br>    &lt;/c:when&gt;<br>    &lt;c:when test=<span class="hljs-string">&quot;$&#123; requestScope.height &gt; 170 &#125;&quot;</span>&gt;<br>        &lt;h2&gt;还可以&lt;/h2&gt;<br>    &lt;/c:when&gt;<br>    &lt;c:otherwise&gt;<br>        &lt;c:choose&gt;  &lt;%-- when 标签的父标签一定要是 choose 标签 --%&gt; <br>            &lt;c:when test=<span class="hljs-string">&quot;$&#123;requestScope.height &gt; 160&#125;&quot;</span>&gt;<br>                &lt;h3&gt;大于 <span class="hljs-number">160</span>&lt;/h3&gt;<br>            &lt;/c:when&gt;<br>            &lt;c:when test=<span class="hljs-string">&quot;$&#123;requestScope.height &gt; 150&#125;&quot;</span>&gt;<br>                &lt;h3&gt;大于 <span class="hljs-number">150</span>&lt;/h3&gt;<br>            &lt;/c:when&gt;<br>            &lt;c:when test=<span class="hljs-string">&quot;$&#123;requestScope.height &gt; 140&#125;&quot;</span>&gt;<br>                &lt;h3&gt;大于 <span class="hljs-number">140</span>&lt;/h3&gt;<br>            &lt;/c:when&gt;<br>            &lt;c:otherwise&gt;<br>                其他小于 <span class="hljs-number">140</span><br>            &lt;/c:otherwise&gt;<br>        &lt;/c:choose&gt;<br>    &lt;/c:otherwise&gt;<br>&lt;/c:choose&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>&lt;c:forEach &#x2F;&gt;</strong></p>
</li>
</ul>
<p>  作用：遍历输出使用。</p>
<ul>
<li><p>1）遍历 1 到 10，输出</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!--<span class="hljs-number">1.</span> 遍历 <span class="hljs-number">1</span> 到 <span class="hljs-number">10</span> ，输出<br>    begin 属性设置开始的索引<br>    end 属性设置结束的索引<br>    <span class="hljs-keyword">var</span> 属性表示循环的变量 ( 也是当前正在遍历到的数据 )<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++)<br>--&gt;<br>&lt;table border=<span class="hljs-string">&quot;1&quot;</span>&gt;<br>    &lt;c:forEach begin=<span class="hljs-string">&quot;1&quot;</span> end=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;i&quot;</span>&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;第$&#123;i&#125;行&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/c:forEach&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>2）遍历 Object 数组</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- <span class="hljs-number">2.</span> 遍历 Object 数组<br>    <span class="hljs-keyword">for</span> (Object item: arr)<br>    items 表示遍历的数据源（遍历的集合）<br>    <span class="hljs-keyword">var</span> 表示当前遍历到的数据<br>--&gt;<br>&lt;%<br>	request.setAttribute(<span class="hljs-string">&quot;arr&quot;</span>, <br>			<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;18610541354&quot;</span>,<span class="hljs-string">&quot;18688886666&quot;</span>,<span class="hljs-string">&quot;18699998888&quot;</span>&#125;);<br>%&gt;<br>&lt;c:forEach items=<span class="hljs-string">&quot;$&#123; requestScope.arr &#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;<br>    $&#123; item &#125; &lt;br&gt;<br>&lt;/c:forEach&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>3）遍历 Map 集合</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br>    Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br>    map.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;key3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br><span class="hljs-comment">//  for ( Map.Entry&lt;String,Object&gt; entry : map.entrySet()) &#123;</span><br><span class="hljs-comment">//  &#125;</span><br>    request.setAttribute(<span class="hljs-string">&quot;map&quot;</span>, map);<br>%&gt;<br>&lt;c:forEach items=<span class="hljs-string">&quot;$&#123; requestScope.map &#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;entry&quot;</span>&gt;<br>    &lt;h1&gt;$&#123;entry.key&#125; = $&#123;entry.value&#125;&lt;/h1&gt;<br>&lt;/c:forEach&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>4）遍历 List 集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Student 类：</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">//4. 编号，用户名，密码，年龄，电话信息</span><br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String phone;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;!-- 示例代码 --&gt;<br>&lt;!--<br>	遍历 List 集合 ---list 中存放 Student 类，有属性：编号，用户名，密码，年龄，电话信息 <br>--&gt;<br>&lt;%<br>    List&lt;Student&gt; studentList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Student&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>        studentList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(i,<span class="hljs-string">&quot;username&quot;</span>+i ,<span class="hljs-string">&quot;pass&quot;</span>+i,<span class="hljs-number">18</span>+i,<span class="hljs-string">&quot;phone&quot;</span>+i));<br>    &#125;<br>    request.setAttribute(<span class="hljs-string">&quot;stus&quot;</span>, studentList);<br>%&gt;<br>&lt;table&gt;<br>    &lt;tr&gt;<br>        &lt;th&gt;编号&lt;/th&gt;<br>        &lt;th&gt;用户名&lt;/th&gt;<br>        &lt;th&gt;密码&lt;/th&gt;<br>        &lt;th&gt;年龄&lt;/th&gt;<br>        &lt;th&gt;电话&lt;/th&gt;<br>        &lt;th&gt;操作&lt;/th&gt;<br>    &lt;/tr&gt;<br>    &lt;!--<br>        items 表示遍历的集合<br>        <span class="hljs-keyword">var</span> 表示遍历到的数据<br>        begin 表示遍历的开始索引值<br>        end 表示结束的索引值<br>        step 属性表示遍历的步长值<br>        varStatus 属性表示当前遍历到的数据的状态<br>        <span class="hljs-keyword">for</span> （ <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i+=<span class="hljs-number">2</span> ）<br>    --&gt;<br>    &lt;c:forEach begin=<span class="hljs-string">&quot;2&quot;</span> end=<span class="hljs-string">&quot;7&quot;</span> step=<span class="hljs-string">&quot;2&quot;</span> varStatus=<span class="hljs-string">&quot;status&quot;</span> items=<span class="hljs-string">&quot;$&#123;requestScope.stus&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;stu&quot;</span>&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;$&#123;stu.id&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.username&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.password&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.age&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;stu.phone&#125;&lt;/td&gt;<br>            &lt;td&gt;$&#123;status.index&#125;&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/c:forEach&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="文件的上传和下载"><a href="#文件的上传和下载" class="headerlink" title="文件的上传和下载"></a>文件的上传和下载</h2><p>文件的上传和下载，是非常常见的功能。很多的系统中，或者软件中都经常使用文件的上传和下载。</p>
<p>比如：QQ头像，使用了上传；邮箱中也有附件的上传和下载功能；QA系统中审批有附件材料的上传。</p>
<h3 id="文件的上传介绍"><a href="#文件的上传介绍" class="headerlink" title="文件的上传介绍"></a>文件的上传介绍</h3><ul>
<li><p>1、要有一个 form 标签，method&#x3D;post 请求</p>
</li>
<li><p>2、form标签的 encType 属性值必须为 myltipart&#x2F;form-data 值</p>
</li>
<li><p>3、在 form 标签中使用 input type&#x3D;file 添加上传的文件</p>
</li>
<li><p>4、编写服务器代码（Servlet 程序）接收，处理上传的数据</p>
</li>
<li><p>encType&#x3D;multipart&#x2F;form-data 表示提交的数据，</p>
<p>以多段（每一个表单项一个数据段）的形式进行拼接，然后以二进制流的形式发送给服务器。</p>
</li>
</ul>
<h4 id="文件上传，HTTP-协议内容的说明"><a href="#文件上传，HTTP-协议内容的说明" class="headerlink" title="文件上传，HTTP 协议内容的说明"></a>文件上传，HTTP 协议内容的说明</h4><p><img src="/2023/07/04/JavaWebNote/image-20221105165555719.png" srcset="/img/loading.gif" lazyload alt="image-20221105165555719"></p>
<p>如何解析上传的数据？</p>
<h4 id="commons-fileupload-jar-常用-API-介绍说明"><a href="#commons-fileupload-jar-常用-API-介绍说明" class="headerlink" title="commons-fileupload.jar 常用 API 介绍说明"></a>commons-fileupload.jar 常用 API 介绍说明</h4><p>commons-fileupload.jar 赖 需要依赖 commons-io.jar 这个包，所以两个包我们都要引入。</p>
<p>第一步，就是需要导入两个 jar 包：commons-fileupload-1.2.1.jar 和 commons-io-1.4.jar</p>
<ul>
<li><p>commons-fileupload.jar 和 和 commons-io.jar 包中，我们常用的类有哪些？</p>
<ul>
<li><p>ServletFileUpload 类</p>
<p>​		用于解析上传的数据。</p>
</li>
<li><p>FileItem 类</p>
<p>​		表示每一个表单项。</p>
</li>
<li><p>boolean ServletFileUpload.isMultipartContent(HttpServletRequest request);</p>
<p>​		判断当前上传的数据格式是否是多段的格式。</p>
<p>​		若返回值为true则是带文件上传的表单；返回值为false则是普通表单。</p>
</li>
<li><p>public List&lt;FileItem&gt; parseRequest(HttpServletRequest request)</p>
<p>​		解析上传的数据</p>
</li>
<li><p>boolean FileItem.isFormField()</p>
<p>​		判断当前这个表单项，是否是普通的表单项。还是上传的文件类型。</p>
<p>​				true 表示普通类型的表单项</p>
<p>​				false 表示上传的是文件类型</p>
</li>
<li><p>String FileItem.getFieldName()</p>
<p>​		获取表单项的 name 属性值</p>
</li>
<li><p>String FileItem.getString()</p>
<p>​		获取当前表单项的值。</p>
</li>
<li><p>String FileItem.getName();</p>
<p>​		获取上传的文件名</p>
</li>
<li><p>void FileItem.write( file );</p>
<p>​		将上传的文件写到 参数 file 所指向的硬盘位置 。</p>
</li>
</ul>
</li>
</ul>
<h4 id="fileupload-类库的使用"><a href="#fileupload-类库的使用" class="headerlink" title="fileupload 类库的使用"></a>fileupload 类库的使用</h4><p>上传文件的表单：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;form action=<span class="hljs-string">&quot;http://192.168.31.74:8080/09_EL_JSTL/uploadServlet&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span><br>      enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>    用户名：&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span> /&gt; &lt;br&gt;<br>    头像：&lt;input type=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;photo&quot;</span> &gt; &lt;br&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot; 上传&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure>

<p>解析上传的数据的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 用来处理上传的数据</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">//1 先判断上传的数据是否多段数据（只有是多段的数据，才是文件上传的）</span><br>    <span class="hljs-keyword">if</span> (ServletFileUpload.isMultipartContent(req)) &#123;<br>        <span class="hljs-comment">// 创建 FileItemFactory 工厂实现类</span><br>        <span class="hljs-type">FileItemFactory</span> <span class="hljs-variable">fileItemFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();<br>        <span class="hljs-comment">// 创建用于解析上传数据的工具类 ServletFileUpload 类</span><br>        <span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">servletFileUpload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(fileItemFactory);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 解析上传的数据，得到每一个表单项 FileItem</span><br>            List&lt;FileItem&gt; list = servletFileUpload.parseRequest(req);<br>            <span class="hljs-comment">// 循环判断，每一个表单项，是普通类型，还是上传的文件</span><br>            <span class="hljs-keyword">for</span> (FileItem fileItem : list) &#123;<br>                <span class="hljs-keyword">if</span> (fileItem.isFormField()) &#123;<br>                    <span class="hljs-comment">// 普通表单项</span><br>                    System.out.println(<span class="hljs-string">&quot; 表单项的 name 属性值：&quot;</span> + fileItem.getFieldName());<br>                    <span class="hljs-comment">// 参数 UTF-8. 解决乱码问题</span><br>                    System.out.println(<span class="hljs-string">&quot; 表单项的 value 属性值：&quot;</span> + fileItem.getString(<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-comment">// 上传的文件</span><br>                    System.out.println(<span class="hljs-string">&quot; 表单项的 name 属性值：&quot;</span> + fileItem.getFieldName());<br>                    System.out.println(<span class="hljs-string">&quot; 上传的文件名：&quot;</span> + fileItem.getName());<br>                    fileItem.write(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;e:\\&quot;</span> + fileItem.getName()));<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><p>下载的常用API说明：</p>
<ul>
<li>response.getOutputStream();</li>
<li>servletContext.getResourceAsStream();</li>
<li>servletContext.getMimeType();</li>
<li>response.setContentType();</li>
</ul>
<p>response.setHeader(“Content-Disposition”, “attachment; fileName&#x3D;1.jpg”);</p>
<p>这个响应头告诉浏览器。这是需要下载的。而 attachment 表示附件，也就是下载的一个文件。fileName&#x3D;后面，表示下载的文件名。</p>
<p>完成上面的两个步骤，下载文件是没问题了。但是如果我们要下载的文件是中文名的话。你会发现，下载无法正确显示出正确的中文名。</p>
<p>原因是在响应头中，不能包含有中文字符，只能包含 ASCII 码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Download</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1、获取要下载的文件名</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">downloadFileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;duolaAmeng.png&quot;</span>;<br><br>        <span class="hljs-comment">//2、读取要下载的文件内容（通过ServletContext对象可以读取）</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> getServletContext();<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> servletContext.getResourceAsStream(<span class="hljs-string">&quot;/file/&quot;</span> + downloadFileName);<br><br>        <span class="hljs-comment">//3、在回传前，通过响应头告诉客户端返回的数据类型</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">mimeType</span> <span class="hljs-operator">=</span> servletContext.getMimeType(<span class="hljs-string">&quot;/file/&quot;</span> + downloadFileName);<br>        <span class="hljs-comment">//  / 斜杆被服务器解析表示为 http://ip:port/工程名/   映射到代码的Web目录</span><br>        System.out.println(<span class="hljs-string">&quot;下载的文件类型：&quot;</span>+mimeType);<br>        resp.setContentType(mimeType);<br><br>        <span class="hljs-comment">///4、还要告诉客户端收到的数据是用于下载使用（还是使用响应头）</span><br>        <span class="hljs-comment">//解决 下载文件名（中文） 乱码问题</span><br>        <span class="hljs-keyword">if</span>(req.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>).contains(<span class="hljs-string">&quot;Firefox&quot;</span>))&#123;<br><span class="hljs-comment">//            resp.setHeader(&quot;attachment; fileName=&quot; + &quot;=?utf-8?B?&quot;</span><br><span class="hljs-comment">//                + new BASE64Encoder().encode(&quot;中文.jpg&quot;.getBytes(&quot;utf-8&quot;)) + &quot;?=&quot;);</span><br>            <span class="hljs-comment">// jdk9 以后就没有BASE64Encoder的包了，所以使用不了</span><br>        &#125; <span class="hljs-keyword">else</span>&#123;<br>            resp.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>,<span class="hljs-string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;中文.png&quot;</span>,<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>            <span class="hljs-comment">// Content-Disposition 响应头，表示收到的数据怎么处理</span><br>            <span class="hljs-comment">// attachment 表示附件，表示下载使用</span><br>            <span class="hljs-comment">// filename 表示指定下载的文件名</span><br>        &#125;<br><br>        <span class="hljs-comment">//5、把下载的文件内容回传给客户端</span><br>        <span class="hljs-comment">//获取响应的输出流</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> resp.getOutputStream();<br>        <span class="hljs-comment">//读取输入流中全部的数据，复制给输出流，输出给客户端</span><br>        IOUtils.copy(resourceAsStream,outputStream);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="附件中文名乱码问题解决方案："><a href="#附件中文名乱码问题解决方案：" class="headerlink" title="附件中文名乱码问题解决方案："></a>附件中文名乱码问题解决方案：</h4><p><strong>方案一：URLEncoder 决 解决 IE 和谷歌浏览器的 和谷歌浏览器的 附件中文名问题。</strong></p>
<p>如果客户端浏览器是 IE 浏览器 或者 是谷歌浏览器。我们需要使用 URLEncoder 类先对中文名进行 UTF-8 的编码操作。因为 IE 浏览器 和 谷歌浏览器 收到含有编码后的字符串后会以 UTF-8 字符集进行解码显示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 把中文名进行 UTF-8 编码操作。</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;中文.jpg&quot;</span>, <span class="hljs-string">&quot;UTF-8&quot;</span>);<br><span class="hljs-comment">// 然后把编码后的字符串设置到响应头中</span><br>response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br></code></pre></td></tr></table></figure>



<p><strong>方案二：BASE64 编解码 编解码 决 解决 火狐浏览器的附件中文名问题</strong></p>
<p>如果客户端浏览器是火狐浏览器。 那么我们需要对中文名进行 BASE64 的编码操作。</p>
<p>这时候需要把请求头 Content-Disposition: attachment; filename&#x3D;中文名</p>
<p>编码成为：Content-Disposition: attachment; filename&#x3D;&#x3D;?charset?B?xxxxx?&#x3D;</p>
<p>&#x3D;?charset?B?xxxxx?&#x3D;   现在我们对这段内容进行一下说明。<br>&#x3D;?									表示编码内容的开始<br>charset						   表示字符集<br>B									  表示 BASE64编码<br>xxxx								表示文件名 BASE64编码后的内容<br>?&#x3D;									表示编码内容的结束</p>
<p>BASE64 编解码操作：</p>
<p>因为 火狐 使用的是 BASE64 的编解码 方式还原响应中的汉字。所以需要使用 BASE64Encoder 类进行编码操作</p>
<p>import sun.misc.BASE64Decoder; </p>
<p>import sun.misc.BASE64Encoder; </p>
<p>jdk9以后就没有这几个包了，所以使用不了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 使用下面的格式进行 BASE64 编码后</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + <span class="hljs-string">&quot;=?utf-8?B?&quot;</span><br>	+ <span class="hljs-keyword">new</span> <span class="hljs-title class_">BASE64Encoder</span>().encode(<span class="hljs-string">&quot;中文.jpg&quot;</span>.getBytes(<span class="hljs-string">&quot;utf-8&quot;</span>)) + <span class="hljs-string">&quot;?=&quot;</span>;<br><span class="hljs-comment">// 设置到响应头中</span><br>response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br></code></pre></td></tr></table></figure>



<p><strong>那么我们如何解决上面两种不同编解码方式呢。</strong></p>
<p>我们只需要通过判断请求头中 User-Agent 这个请求头携带过来的浏览器信息即可判断出是什么浏览器。</p>
<p>如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">ua</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>);<br><span class="hljs-comment">// 判断是否是火狐浏览器</span><br><span class="hljs-keyword">if</span> (ua.contains(<span class="hljs-string">&quot;Firefox&quot;</span>)) &#123;<br>    <span class="hljs-comment">// 使用下面的格式进行 BASE64 编码后</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + <span class="hljs-string">&quot;=?utf-8?B?&quot;</span><br>        + <span class="hljs-keyword">new</span> <span class="hljs-title class_">BASE64Encoder</span>().encode(<span class="hljs-string">&quot;中文.jpg&quot;</span>.getBytes(<span class="hljs-string">&quot;utf-8&quot;</span>)) + <span class="hljs-string">&quot;?=&quot;</span>;<br>    <span class="hljs-comment">// 设置到响应头中</span><br>    response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// 把中文名进行 UTF-8 编码操作。</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;attachment; fileName=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;中文.jpg&quot;</span>, <span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    <span class="hljs-comment">// 然后把编码后的字符串设置到响应头中</span><br>    response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, str);<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="Cookie简介"><a href="#Cookie简介" class="headerlink" title="Cookie简介"></a>Cookie简介</h3><ul>
<li>Cookie 翻译过来就是饼干的意思</li>
<li>Cookie 是服务器通知客户端保存键值对的一种技术</li>
<li>客户端有了 Cookie 后，每次请求都发送给服务器</li>
<li><strong>每个 Cookie 的大小不能超过 4kb</strong></li>
</ul>
<h3 id="如何创建-Cookie"><a href="#如何创建-Cookie" class="headerlink" title="如何创建 Cookie"></a>如何创建 Cookie</h3><p><img src="/2023/07/04/JavaWebNote/image-20221106092646241.png" srcset="/img/loading.gif" lazyload alt="image-20221106092646241"></p>
<p>Servlet 程序中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createCookie</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">//1 创建 Cookie 对象</span><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;key4&quot;</span>, <span class="hljs-string">&quot;value4&quot;</span>);<br>    <span class="hljs-comment">//2 通知客户端保存 Cookie</span><br>    resp.addCookie(cookie);<br>    <span class="hljs-comment">//1 创建 Cookie 对象</span><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;key5&quot;</span>, <span class="hljs-string">&quot;value5&quot;</span>);<br>    <span class="hljs-comment">//2 通知客户端保存 Cookie</span><br>    resp.addCookie(cookie1);<br>    <br>    resp.getWriter().write(<span class="hljs-string">&quot;Cookie 创建成功&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="服务器如何获取-Cookie"><a href="#服务器如何获取-Cookie" class="headerlink" title="服务器如何获取 Cookie"></a>服务器如何获取 Cookie</h3><p>服务器获取客户端的 Cookie 只需要一行代码: req.getCookies():Cookie[]</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221106092817265.png" srcset="/img/loading.gif" lazyload alt="image-20221106092817265"></p>
<p>Cookie 的工具类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CookieUtils</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* 查找指定名称的 Cookie 对象</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> name</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> cookies</span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Cookie <span class="hljs-title function_">findCookie</span><span class="hljs-params">(String name , Cookie[] cookies)</span>&#123;<br>        <span class="hljs-keyword">if</span> (name == <span class="hljs-literal">null</span> || cookies == <span class="hljs-literal">null</span> || cookies.length == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (Cookie cookie : cookies) &#123;<br>            <span class="hljs-keyword">if</span> (name.equals(cookie.getName())) &#123;<br>                <span class="hljs-keyword">return</span> cookie;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Servlet 程序中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getCookie</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    Cookie[] cookies = req.getCookies();<br>    <span class="hljs-keyword">for</span> (Cookie cookie : cookies) &#123;<br>        <span class="hljs-comment">// getName 方法返回 Cookie 的 key （名）</span><br>        <span class="hljs-comment">// getValue 方法返回 Cookie 的 value 值</span><br>        resp.getWriter().write(<span class="hljs-string">&quot;Cookie[&quot;</span> + cookie.getName() + <span class="hljs-string">&quot;=&quot;</span> + cookie.getValue() + <span class="hljs-string">&quot;] &lt;br/&gt;&quot;</span>);<br>    &#125;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">iWantCookie</span> <span class="hljs-operator">=</span> CookieUtils.findCookie(<span class="hljs-string">&quot;key1&quot;</span>, cookies);<br>    <span class="hljs-comment">// for (Cookie cookie : cookies) &#123;</span><br>    <span class="hljs-comment">// if (&quot;key2&quot;.equals(cookie.getName())) &#123;</span><br>    <span class="hljs-comment">// iWantCookie = cookie;</span><br>    <span class="hljs-comment">// break;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// 如果不等于 null ，说明赋过值，也就是找到了需要的 Cookie</span><br>    <span class="hljs-keyword">if</span> (iWantCookie != <span class="hljs-literal">null</span>) &#123;<br>        resp.getWriter().write(<span class="hljs-string">&quot; 找到了需要的 Cookie&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Cookie-值的修改"><a href="#Cookie-值的修改" class="headerlink" title="Cookie 值的修改"></a>Cookie 值的修改</h3><p>注意：对于 Version 0 cookie，值不应包含空格、方括号、圆括号、等号、逗号、双引号、斜杠、问号、at符号、冒号和分号。控制在不同浏览器上的行为不一定相同。</p>
<p>方案一：</p>
<ul>
<li><p>1、先创建一个要修改的同名（指的就是 key）的 Cookie 对象</p>
</li>
<li><p>2、在构造器，同时赋于新的 Cookie 值。</p>
</li>
<li><p>3、调用 response.addCookie( Cookie );</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 方案一：</span><br><span class="hljs-comment">// 1 、先创建一个要修改的同名的 Cookie 对象</span><br><span class="hljs-comment">// 2 、在构造器，同时赋于新的 Cookie 值。</span><br><span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;newValue1&quot;</span>);<br><span class="hljs-comment">// 3 、调用 response.addCookie( Cookie ); 通知 客户端 保存修改</span><br>resp.addCookie(cookie);<br></code></pre></td></tr></table></figure></li>
</ul>
<p>方案二：</p>
<ul>
<li><p>1、先查找到需要修改的 Cookie 对象</p>
</li>
<li><p>2、调用 setValue()方法赋于新的 Cookie 值。</p>
</li>
<li><p>3、调用 response.addCookie()通知客户端保存修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 方案二：</span><br><span class="hljs-comment">// 1 、先查找到需要修改的 Cookie 对象</span><br><span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> CookieUtils.findCookie(<span class="hljs-string">&quot;key2&quot;</span>, req.getCookies());<br><span class="hljs-keyword">if</span> (cookie != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-comment">// 2 、调用 setValue() 方法赋于新的 Cookie 值。</span><br>    cookie.setValue(<span class="hljs-string">&quot;newValue2&quot;</span>);<br>    <span class="hljs-comment">// 3 、调用 response.addCookie() 通知客户端保存修改</span><br>    resp.addCookie(cookie);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="浏览器查看-Cookie"><a href="#浏览器查看-Cookie" class="headerlink" title="浏览器查看 Cookie"></a>浏览器查看 Cookie</h3><ul>
<li><p>谷歌浏览器如何查看 Cookie：</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221106093217145.png" srcset="/img/loading.gif" lazyload alt="image-20221106093217145"></p>
</li>
<li><p>火狐浏览器如何查看 Cookie：</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221106093227280.png" srcset="/img/loading.gif" lazyload alt="image-20221106093227280"></p>
</li>
</ul>
<h3 id="Cookie-生命控制"><a href="#Cookie-生命控制" class="headerlink" title="Cookie 生命控制"></a>Cookie 生命控制</h3><ul>
<li><p>Cookie 的生命控制指的是如何管理 Cookie 什么时候被销毁（删除）</p>
</li>
<li><p>setMaxAge()</p>
<ul>
<li>正数，表示在指定的秒数后过期</li>
<li>负数，表示浏览器一旦关闭，Cookie 就会被删除（默认值是-1）</li>
<li>零，表示马上删除 Cookie</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 设置存活 1 个小时的 Cooie</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">life3600</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;life3600&quot;</span>, <span class="hljs-string">&quot;life3600&quot;</span>);<br>    cookie.setMaxAge(<span class="hljs-number">60</span> * <span class="hljs-number">60</span>); <span class="hljs-comment">// 设置 Cookie 一小时之后被删除。无效</span><br>    resp.addCookie(cookie);<br>    resp.getWriter().write(<span class="hljs-string">&quot; 已经创建了一个存活一小时的 Cookie&quot;</span>);<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 马上删除一个 Cookie</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteNow</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-comment">// 先找到你要删除的 Cookie 对象</span><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> CookieUtils.findCookie(<span class="hljs-string">&quot;key4&quot;</span>, req.getCookies());<br>    <span class="hljs-keyword">if</span> (cookie != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// 调用 setMaxAge(0);</span><br>        cookie.setMaxAge(<span class="hljs-number">0</span>); <span class="hljs-comment">// 表示马上删除，都不需要等待浏览器关闭</span><br>        <span class="hljs-comment">// 调用 response.addCookie(cookie);</span><br>        resp.addCookie(cookie);<br>        resp.getWriter().write(<span class="hljs-string">&quot;key4 的 的 Cookie 已经被删除&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 默认的会话级别的 Cookie</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultLife</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;defalutLife&quot;</span>,<span class="hljs-string">&quot;defaultLife&quot;</span>);<br>    cookie.setMaxAge(-<span class="hljs-number">1</span>);<span class="hljs-comment">// 设置存活时间</span><br>    resp.addCookie(cookie);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="Cookie-有效路径-Path-的设置"><a href="#Cookie-有效路径-Path-的设置" class="headerlink" title="Cookie 有效路径 Path 的设置"></a>Cookie 有效路径 Path 的设置</h3><p>Cookie 的path属性可以有效地过滤哪些 Cookie 可以发送给服务器，哪些不发</p>
<p>path 属性是通过请求的地址来进行有效的过滤，默认path是工程路径</p>
<ul>
<li><p>CookieA path&#x3D;&#x2F;工程路径</p>
</li>
<li><p>CookieB path&#x3D;&#x2F;工程路径&#x2F;abc</p>
</li>
<li><p>请求地址如下：</p>
<ul>
<li><a href="http://ip:port/工程路径/a.html">http://ip:port/工程路径/a.html</a><ul>
<li>CookieA 发送</li>
<li>CookieB 不发送</li>
</ul>
</li>
<li><a href="http://ip:port/工程路径/abc/a.html">http://ip:port/工程路径/abc/a.html</a><ul>
<li>CookieA 发送</li>
<li>CookieB 发送</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPath</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;path1&quot;</span>, <span class="hljs-string">&quot;path1&quot;</span>);<br>    <span class="hljs-comment">// getContextPath() ===&gt;&gt;&gt;&gt; 得到工程路径</span><br>    cookie.setPath( req.getContextPath() + <span class="hljs-string">&quot;/abc&quot;</span> ); <span class="hljs-comment">// ===&gt;&gt;&gt;&gt; / 工程路径 /abc</span><br>    resp.addCookie(cookie);<br>    resp.getWriter().write(<span class="hljs-string">&quot; 创建了一个带有 Path 路径的 Cookie&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="Cookie-练习—免输入用户名登录"><a href="#Cookie-练习—免输入用户名登录" class="headerlink" title="Cookie 练习—免输入用户名登录"></a>Cookie 练习—免输入用户名登录</h3><p><img src="/2023/07/04/JavaWebNote/image-20221106093748695.png" srcset="/img/loading.gif" lazyload alt="image-20221106093748695"></p>
<ul>
<li><p>login.jsp 页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;form action=<span class="hljs-string">&quot;http://localhost:8080/13_cookie_session/loginServlet&quot;</span> method=<span class="hljs-string">&quot;get&quot;</span>&gt;<br>    用户名：&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span> value=<span class="hljs-string">&quot;$&#123;cookie.username.value&#125;&quot;</span>&gt; &lt;br&gt;<br>    密码：&lt;input type=<span class="hljs-string">&quot;password&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>&gt; &lt;br&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot; 登录&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>LoginServlet 程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;wzg168&quot;</span>.equals(username) &amp;&amp; <span class="hljs-string">&quot;123456&quot;</span>.equals(password)) &#123;<br>        <span class="hljs-comment">// 登录 成功</span><br>        <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;username&quot;</span>, username);<br>        cookie.setMaxAge(<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> * <span class="hljs-number">7</span>);<span class="hljs-comment">// 当前 Cookie 一周内有效</span><br>        resp.addCookie(cookie);<br>        System.out.println(<span class="hljs-string">&quot;录 登录 成功&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 登录 失败</span><br>        System.out.println(<span class="hljs-string">&quot;录 登录 失败&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="Session-会话"><a href="#Session-会话" class="headerlink" title="Session 会话"></a>Session 会话</h2><h3 id="什么是-Session-会话"><a href="#什么是-Session-会话" class="headerlink" title="什么是 Session 会话"></a>什么是 Session 会话</h3><ul>
<li>1、Session 就一个接口（HttpSession接口）。</li>
<li>2、Session 就是会话。它是用来维护一个客户端和服务器之间关联的一种技术。</li>
<li>3、每个客户端都有自己的一个 Session 会话。</li>
<li>4、Session 会话中，我们经常用来保存用户登录之后的信息。</li>
</ul>
<h3 id="如何创建-Session-和获取-id-号-是否为新"><a href="#如何创建-Session-和获取-id-号-是否为新" class="headerlink" title="如何创建 Session 和获取(id 号, 是否为新)"></a>如何创建 Session 和获取(id 号, 是否为新)</h3><ul>
<li><p>如何创建和获取 Session？它们的 API 是一样的。</p>
</li>
<li><p>request.getSession()</p>
<ul>
<li>第一次调用是： 创建 Session 会话</li>
<li>之后调用都是： 获取前面创建好的 Session 会话对象。</li>
<li>isNew();   判断到底是不是刚创建出来的（新的）<ul>
<li>true 表示刚创建</li>
<li>false 表示获取之前创建</li>
</ul>
</li>
<li>每个会话都有一个身份证号。也就是 ID 值。而且这个 ID 是唯一的。</li>
<li>getId() 得到 Session 的会话 id 值。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionServlet</span> <span class="hljs-keyword">extends</span>  <span class="hljs-title class_">BaseServlet</span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrGetSession</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//创建和获取Session会话对象</span><br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>        <span class="hljs-comment">//判断当前Session会话，是否是新创建出来的</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">isNew</span> <span class="hljs-operator">=</span> session.isNew();<br>        <span class="hljs-comment">//获取Session会话的唯一标识（id）</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> session.getId();<br><br>        resp.getWriter().write(<span class="hljs-string">&quot;得到的Session的id值为：&quot;</span>+id+<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span>);<br>        resp.getWriter().write(<span class="hljs-string">&quot;这个Session是否是新创建的：&quot;</span>+isNew+<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="Session-域数据的存取"><a href="#Session-域数据的存取" class="headerlink" title="Session 域数据的存取"></a>Session 域数据的存取</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 往 Session 中保存数据</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAttribute</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    req.getSession().setAttribute(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    resp.getWriter().write(<span class="hljs-string">&quot; 已经往 Session 中保存了数据&quot;</span>);<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 获取 Session 域中的数据</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getAttribute</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException,<br>IOException &#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">attribute</span> <span class="hljs-operator">=</span> req.getSession().getAttribute(<span class="hljs-string">&quot;key1&quot;</span>);<br>    resp.getWriter().write(<span class="hljs-string">&quot;从 Session 中获取出 key1 的数据是：&quot;</span> + attribute);<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="Session-生命周期控制"><a href="#Session-生命周期控制" class="headerlink" title="Session 生命周期控制"></a>Session 生命周期控制</h3><ul>
<li><p>public void setMaxInactiveInterval(int interval) </p>
<p>​		设置 Session 的超时时间（以秒为单位），超过指定的时长，Session就会被销毁。</p>
<p>​		值为正数的时候，设定 Session 的超时时长</p>
<p>​		值为负数的时候，表示永不超时（极少使用，会使服务器不断堆积数据）</p>
</li>
<li><p>public int getMaxInactiveInterval()   </p>
<p>​		获取 Session 的超时时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultLife</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">maxInactiveInterval</span> <span class="hljs-operator">=</span> req.getSession().getMaxInactiveInterval();<br>    resp.getWriter().write(<span class="hljs-string">&quot;Session的默认超时时长为：&quot;</span>+maxInactiveInterval+<span class="hljs-string">&quot;秒&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>public void invalidate()   </p>
<p>​		让当前 Session 会话马上超时无效。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteNow</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">// 先获取 Session 对象</span><br>    <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>    <span class="hljs-comment">// 让 Session 会话马上超时</span><br>    session.invalidate();<br>    resp.getWriter().write(<span class="hljs-string">&quot;Session 已经设置为超时（无效）&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
<li><p>Session 默认的超时时间长为 30 分钟。</p>
<ul>
<li><p>因为在Tomcat服务器的配置文件web.xml中默认有以下的配置，它就表示配置了当前Tomcat服务器下所有的Session超时配置默认时长为：30 分钟。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>如果说，你希望你的 web 工程，默认的 Session 的超时时长为其他时长，你可以在你自己的 web.xml 配置文件中做以上相同的配置，就可以修改你的 web 工程所有 Seession 的默认超时时长。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 表示当前 web 工程。创建出来 的所有 Session 默认是 20 分钟 超时时长 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br>&lt;/session-config<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>如果你想只修改个别 Session 的超时时长。就可以使用上面的 API。setMaxInactiveInterval(int interval)来进行单独的设置。</p>
<ul>
<li><p>session.setMaxInactiveInterval(int interval);		单独设置超时时长。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">life3</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-comment">// 先获取 Session 对象</span><br>    <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>    <span class="hljs-comment">// 设置当前 Session3 秒后超时</span><br>    session.setMaxInactiveInterval(<span class="hljs-number">3</span>);<br>    resp.getWriter().write(<span class="hljs-string">&quot; 当前 Session 已经设置为 3 秒后超时&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>Session 超时的概念介绍：</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221106094417773.png" srcset="/img/loading.gif" lazyload alt="image-20221106094417773"></p>
</li>
</ul>
</li>
</ul>
<h3 id="浏览器和-Session-之间关联的技术内幕"><a href="#浏览器和-Session-之间关联的技术内幕" class="headerlink" title="浏览器和 Session 之间关联的技术内幕"></a>浏览器和 Session 之间关联的技术内幕</h3><p>Session 技术，底层其实是基于 Cookie 技术来实现的。</p>
<p><img src="/2023/07/04/JavaWebNote/image-20221106094631669.png" srcset="/img/loading.gif" lazyload alt="image-20221106094631669"></p>
<h2 id="Filter-过滤器"><a href="#Filter-过滤器" class="headerlink" title="Filter 过滤器"></a>Filter 过滤器</h2><h3 id="Filter-过滤器介绍"><a href="#Filter-过滤器介绍" class="headerlink" title="Filter 过滤器介绍"></a>Filter 过滤器介绍</h3><ul>
<li>Filter 过滤器是 javaWeb 的三大组件之一。三大组件分别是：Servlet 程序、Listener 监听器、filter 过滤器</li>
<li>Filter 过滤器是 JavaEE 的规范，也就是接口</li>
<li>Filter 过滤器的作用是：<strong>拦截请求</strong>，过滤响应</li>
<li>拦截请求的常见的应用场景有：<ul>
<li>权限检查</li>
<li>日记操作</li>
<li>事务管理</li>
<li>… … 等等</li>
</ul>
</li>
</ul>
<h3 id="Filter-的初体验"><a href="#Filter-的初体验" class="headerlink" title="Filter 的初体验"></a>Filter 的初体验</h3><p>要求：在你的 web 工程下，有一个 admin 目录。这个 admin 目录下的所有资源（html 页面、jpg 图片、jsp 文件、等等）都必须是用户登录之后才允许访问。</p>
<p>思考：根据之前我们学过内容。我们知道，用户登录之后都会把用户登录的信息保存到 Session 域中。所以要检查用户是否登录，可以判断 Session 中是否包含有用户登录的信息即可！！！</p>
<p><strong>Filter 的工作流程图：</strong></p>
<p><img src="/2023/07/04/JavaWebNote/image-20221106165954177.png" srcset="/img/loading.gif" lazyload alt="image-20221106165954177"></p>
<p><strong>Filter 过滤器的使用步骤：</strong></p>
<ul>
<li>1、编写一个类去实现 Filter 接口</li>
<li>2、实现过滤方法 doFilter()</li>
<li>3、到 web.xml 中去配置 Filter 的拦截路径</li>
</ul>
<p><strong>完整的用户登录</strong></p>
<ul>
<li><p>Filter 的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* doFilter 方法，专门用于拦截请求。可以做权限检查</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">httpServletRequest</span> <span class="hljs-operator">=</span> (HttpServletRequest) servletRequest;<br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> httpServletRequest.getSession();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> session.getAttribute(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-comment">// 如果等于 null ，说明还没有登录</span><br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) &#123;<br>			servletRequest.getRequestDispatcher(<span class="hljs-string">&quot;/login.jsp&quot;</span>)<br>    				.forward(servletRequest,servletResponse);<br>            <span class="hljs-keyword">return</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// 让程序继续往下访问用户的目标资源</span><br>            filterChain.doFilter(servletRequest,servletResponse);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>web.xml 中的配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- filter 标签用于配置一个 Filter 过滤器 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 给 filter 起一个别名 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 配置 filter 的全类名 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.atguigu.filter.AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- filter-mapping 配置 Filter 过滤器的拦截路径 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--filter-name 表示当前的拦截路径给哪个 filter 使用 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        url-pattern 配置拦截路径</span><br><span class="hljs-comment">        / 表示请求地址为： http://ip:port/ 工程路径 / 映射到 IDEA 的 web 目录</span><br><span class="hljs-comment">        /admin/* 表示请求地址为： http://ip:port/ 工程路径 /admin/*</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/admin/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>login.jsp 页面 &#x3D;&#x3D; 登录表单</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">这是登录页面。login.jsp 页面 &lt;br&gt;<br>&lt;form action=<span class="hljs-string">&quot;http://localhost:8080/15_filter/loginServlet&quot;</span> method=<span class="hljs-string">&quot;get&quot;</span>&gt;<br>    用户名：&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span>/&gt; &lt;br&gt;<br>    密 码：&lt;input type=<span class="hljs-string">&quot;password&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>/&gt; &lt;br&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> /&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>LoginServlet 程序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        resp.setContentType(<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;wzg168&quot;</span>.equals(username) &amp;&amp; <span class="hljs-string">&quot;123456&quot;</span>.equals(password)) &#123;<br>            req.getSession().setAttribute(<span class="hljs-string">&quot;user&quot;</span>,username);<br>            resp.getWriter().write(<span class="hljs-string">&quot;录 登录 成功！！！&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/login.jsp&quot;</span>).forward(req,resp);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="Filter-的生命周期"><a href="#Filter-的生命周期" class="headerlink" title="Filter 的生命周期"></a>Filter 的生命周期</h3><p>Filter 的生命周期包含几个方法</p>
<ul>
<li><p>1、构造器方法</p>
</li>
<li><p>2、init 初始化方法</p>
<p>​			第1、2步，在 web 工程启动的时候执行（Filter 已经创建）</p>
</li>
<li><p>3、doFilter 过滤方法</p>
<p>​			第3步，每次拦截到请求，就会执行</p>
</li>
<li><p>4、destory 销毁</p>
<p>​			第 4 步，停止web工程的时候，就会执行（停止 web 工程，也会销毁 Filter 过滤器）</p>
</li>
</ul>
<h3 id="FilterConfig-类"><a href="#FilterConfig-类" class="headerlink" title="FilterConfig 类"></a>FilterConfig 类</h3><ul>
<li><p>FilterConfig 类见名知义，它是 Filter 过滤器的配置文件类。</p>
</li>
<li><p>Tomcat 每次创建 Filter 的时候，也会同时创建一个 FilterConfig 类，这里包含了 Filter 配置文件的配置信息。</p>
</li>
<li><p>FilterConfig 类的作用是  获取 filter 过滤器的配置内容</p>
<ul>
<li>1、获取 Filter 的名称 filter-name 的内容</li>
<li>2、获取在 Filter 中配置的 <strong>init-param 初始化参数</strong></li>
<li>3、获取 ServletContext 对象</li>
</ul>
</li>
<li><p>java 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>    System.out.println(<span class="hljs-string">&quot;2.Filter 的 的 init(FilterConfig filterConfig) 初始化&quot;</span>);<br>    <br>    <span class="hljs-comment">// 1 、获取 Filter 的名称 filter-name 的内容</span><br>    System.out.println(<span class="hljs-string">&quot;filter-name 的值是：&quot;</span> + filterConfig.getFilterName());<br>    <br>    <span class="hljs-comment">// 2 、获取在 web.xml 中配置的 init-param 初始化参数</span><br>    System.out.println(<span class="hljs-string">&quot; 初始化参数 username 的值是 ：&quot;</span> +   <br>                       filterConfig.getInitParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>    System.out.println(<span class="hljs-string">&quot; 初始化参数 url 的值是：&quot;</span> + <br>                       filterConfig.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>));<br>    <br>    <span class="hljs-comment">// 3 、获取 ServletContext 对象</span><br>    System.out.println(filterConfig.getServletContext());<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>web.xml 配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--filter 标签用于配置一个 Filter 过滤器 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 给 filter 起一个别名 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 配置 filter 的全类名 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.atguigu.filter.AdminFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost3306/test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="FilterChain-过滤器链"><a href="#FilterChain-过滤器链" class="headerlink" title="FilterChain 过滤器链"></a>FilterChain 过滤器链</h3><p><img src="/2023/07/04/JavaWebNote/image-20221106192429369.png" srcset="/img/loading.gif" lazyload alt="image-20221106192429369"></p>
<ul>
<li><p>Filter1 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>    System.out.println(<span class="hljs-string">&quot;Filter1 前置代码&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;Filter1 线程：&quot;</span>+Thread.currentThread().getName());<br>    servletRequest.setAttribute(<span class="hljs-string">&quot;key1&quot;</span>,<span class="hljs-string">&quot;value1&quot;</span>);<br>    filterChain.doFilter(servletRequest,servletResponse);<br>    System.out.println(<span class="hljs-string">&quot;Filter1 后置代码&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>Filter2 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>    System.out.println(<span class="hljs-string">&quot;Filter2 前置代码&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;Filter2 线程：&quot;</span>+Thread.currentThread().getName());<br>    System.out.println(<span class="hljs-string">&quot;Filter2 取 Filter1 中保存的 key1 的值为：&quot;</span>+servletRequest.getAttribute(<span class="hljs-string">&quot;key1&quot;</span>));<br>    filterChain.doFilter(servletRequest,servletResponse);<br>    System.out.println(<span class="hljs-string">&quot;Filter2 后置代码&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>target.jsp 页面：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;%<br>        System.out.println(<span class="hljs-string">&quot;target&quot;</span>);<br>    	System.out.println(<span class="hljs-string">&quot;target 线程：&quot;</span>+Thread.currentThread().getName());<br>    %&gt;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>web.xml 文件配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter1<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.stuyd.filter.Filter1<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter1<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/target.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter2<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.stuyd.filter.Filter2<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>Filter2<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/target.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>访问 target.jsp 页面后的输出为：</p>
<p>Filter1 前置代码<br>Filter1 线程：http-nio-8080-exec-23<br>Filter2 前置代码<br>Filter2 线程：http-nio-8080-exec-23<br>Filter2 取 Filter1 中保存的 key1 的值为：value1<br>target<br>target 线程：http-nio-8080-exec-23<br>Filter2 后置代码<br>Filter1 后置代码</p>
</li>
</ul>
<h3 id="Filter-的拦截路径"><a href="#Filter-的拦截路径" class="headerlink" title="Filter 的拦截路径"></a>Filter 的拦截路径</h3><p><strong>说明：Filter 过滤器它只关心请求的地址是否匹配，不关心请求的资源是否存在！！！</strong></p>
<h4 id="–精确匹配"><a href="#–精确匹配" class="headerlink" title="–精确匹配"></a>–精确匹配</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/target.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 以上配置的路径，表示请求地址必须为：http://ip:port/工程路径/target.jsp --&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="–目录匹配"><a href="#–目录匹配" class="headerlink" title="–目录匹配"></a>–目录匹配</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/admin/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 以上配置的路径，表示请求地址必须为：http://ip:port/工程路径/admin/* --&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="–后缀名匹配"><a href="#–后缀名匹配" class="headerlink" title="–后缀名匹配"></a>–后缀名匹配</h4><p>注意：后缀名匹配，不关心后缀名是否有意义，只关心能否匹配到</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.html<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 以上配置的路径，表示请求地址必须以.html 结尾才会拦截到 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 以上配置的路径，表示请求地址必须以.do 结尾才会拦截到 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.action<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 以上配置的路径，表示请求地址必须以.action 结尾才会拦截到 --&gt;</span><br></code></pre></td></tr></table></figure>





<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><h3 id="JSON-介绍"><a href="#JSON-介绍" class="headerlink" title="JSON 介绍"></a>JSON 介绍</h3><p>JSON (JavaScript Object Notation) 是一种轻量级的数据交换格式。易于人阅读和编写。同时也易于机器解析和生成。JSON采用完全独立于语言的文本格式，而且很多语言都提供了对 json 的支持（包括 C, C++, C#, Java, JavaScript, Perl, Python等）。 这样就使得 JSON 成为理想的数据交换格式。</p>
<ul>
<li>JSON 是一种<strong>轻量级</strong>的<strong>数据交换格式</strong>。</li>
<li><strong>轻量级</strong>指的是跟 xml 做比较。</li>
<li><strong>数据交换</strong>指的是客户端和服务器之间业务数据的传递格式。</li>
</ul>
<h3 id="JSON-在-JavaScript-中的使用（客户端）"><a href="#JSON-在-JavaScript-中的使用（客户端）" class="headerlink" title="JSON 在 JavaScript 中的使用（客户端）"></a>JSON 在 JavaScript 中的使用（客户端）</h3><h4 id="json-的定义"><a href="#json-的定义" class="headerlink" title="json 的定义"></a>json 的定义</h4><p>json 是由键值对组成，并且由<strong>花括号</strong>包围。每个键由<strong>引号</strong>引起来，键和值之间使用<strong>冒号</strong>进行分隔，多组键值对之间进行<strong>逗号</strong>进行分隔。</p>
<p>json 定义示例：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// json的定义</span><br>var json = <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;key1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">12</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//整型</span><br>    <span class="hljs-attr">&quot;key2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;abc&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//字符串</span><br>    <span class="hljs-attr">&quot;key3&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//布尔值</span><br>    <span class="hljs-attr">&quot;key4&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">11</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;arr&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//数组</span><br>    <span class="hljs-attr">&quot;key5&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span>  <span class="hljs-comment">// JSON对象</span><br>        <span class="hljs-attr">&quot;key5_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">551</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key5_2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;key5_2_value&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;key6&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span>  <span class="hljs-comment">// JSON数组</span><br>        <span class="hljs-attr">&quot;key6_1_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">6611</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key6_1_2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;key6_1_2_value&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;key6_2_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">6621</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key6_2_2&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;key6_2_2_value&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span>;<br></code></pre></td></tr></table></figure>



<h4 id="json-的访问"><a href="#json-的访问" class="headerlink" title="json 的访问"></a>json 的访问</h4><ul>
<li><p>json 本身是一个对象。</p>
</li>
<li><p>json 中的 key 我们可以理解为是对象中的一个属性。</p>
</li>
<li><p>json 中的 key 访问就跟访问对象的属性一样： json 对象.key</p>
</li>
<li><p>json 中的 key 访问 还可以通过 json对象[“key”] 来访问</p>
</li>
<li><p>json 访问示例：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json">alert(typeof(jsonObj)); <span class="hljs-comment">// object json 就是一个对象</span><br>alert(jsonObj.key1); <span class="hljs-comment">//12</span><br>alert(jsonObj.key2); <span class="hljs-comment">// abc</span><br>alert(jsonObj.key3); <span class="hljs-comment">// true</span><br>alert(jsonObj.key4);<span class="hljs-comment">// 得到数组 [11,&quot;arr&quot;,false]</span><br><br><span class="hljs-comment">// json 中 数组值的遍历</span><br>for(var i = <span class="hljs-number">0</span>; i &lt; jsonObj.key4.length; i++) <span class="hljs-punctuation">&#123;</span><br>    alert(jsonObj.key4<span class="hljs-punctuation">[</span>i<span class="hljs-punctuation">]</span>);<br><span class="hljs-punctuation">&#125;</span><br>alert(jsonObj.key5.key5_1);<span class="hljs-comment">//551</span><br>alert(jsonObj.key5.key5_2);<span class="hljs-comment">//key5_2_value</span><br><br>alert( jsonObj.key6 );<br><span class="hljs-comment">// 得到 json 数组，取出来每一个元素都是 json 对象</span><br>var jsonItem = jsonObj.key6<span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span>;<br><span class="hljs-comment">// alert( jsonItem.key6_1_1 ); //6611</span><br>alert( jsonItem.key6_1_2 ); <span class="hljs-comment">//key6_1_2_value</span><br><br>alert(json<span class="hljs-punctuation">[</span><span class="hljs-string">&quot;key6&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;key6_2_2&quot;</span><span class="hljs-punctuation">]</span>); <span class="hljs-comment">//key6_2_2_value</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="json-的两个常用方法"><a href="#json-的两个常用方法" class="headerlink" title="json 的两个常用方法"></a>json 的两个常用方法</h4><ul>
<li><p>json 的存在有两种形式。</p>
<ul>
<li>1）以对象的形式存在，我们叫它 json 对象。</li>
<li>2）以字符串的形式存在，我们叫它 json 字符串。</li>
<li>一般我们要<strong>操作 json 中的数据</strong>的时候，需要 <strong>json 对象</strong>的格式。</li>
<li>一般我们要在客户端和服务器之间进行<strong>数据交换</strong>的时候，使用 <strong>json 字符串</strong>。</li>
<li><strong>JSON.stringify()</strong>        把 json 对象转换成为 json 字符串</li>
<li><strong>JSON.parse()</strong>            把 json 字符串转换成为 json 对象</li>
</ul>
</li>
<li><p>示例代码：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// 把 json 对象转换成为 json 字符串</span><br>var jsonObjString = JSON.stringify(jsonObj); <span class="hljs-comment">// 特别像 Java 中对象的 toString</span><br>alert(jsonObjString)<br><br><span class="hljs-comment">// 把 json 字符串。转换成为 json 对象</span><br>var jsonObj2 = JSON.parse(jsonObjString);<br>alert(jsonObj2.key1);<span class="hljs-comment">// 12</span><br>alert(jsonObj2.key2);<span class="hljs-comment">// abc</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="JSON-在-java-中的使用-（服务器端）"><a href="#JSON-在-java-中的使用-（服务器端）" class="headerlink" title="JSON 在 java 中的使用 （服务器端）"></a>JSON 在 java 中的使用 （服务器端）</h3><p>注意：在Java中，如果要操作JSON，要先导入JSON的jar包</p>
<p> <img src="/2023/07/04/JavaWebNote/image-20221107150829615.png" srcset="/img/loading.gif" lazyload alt="image-20221107150829615"></p>
<h4 id="javaBean-和-json-的互转"><a href="#javaBean-和-json-的互转" class="headerlink" title="javaBean 和 json 的互转"></a>javaBean 和 json 的互转</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot; 国哥好帅!&quot;</span>);<br>    <span class="hljs-comment">// 创建 Gson 对象实例</span><br>    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>    <span class="hljs-comment">// toJson 方法可以把 java 对象转换成为 json 字符串</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>    System.out.println(personJsonString);<br>    <span class="hljs-comment">// fromJson 把 json 字符串转换回 Java 对象</span><br>    <span class="hljs-comment">// 第一个参数是 json 字符串</span><br>    <span class="hljs-comment">// 第二个参数是转换回去的 Java 对象类型</span><br>    <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> gson.fromJson(personJsonString, Person.class);<br>    System.out.println(person1);<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="List-和-json-的互转"><a href="#List-和-json-的互转" class="headerlink" title="List 和 json 的互转"></a>List 和 json 的互转</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 1.2.2 、 List 和 json 的互转</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>    List&lt;Person&gt; personList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;国哥&quot;</span>));<br>    personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;康师傅&quot;</span>));<br>    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>    <span class="hljs-comment">// 把 List 转换为 json 字符串</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">personListJsonString</span> <span class="hljs-operator">=</span> gson.toJson(personList);<br>    System.out.println(personListJsonString);<br><br>    <span class="hljs-comment">// 把 json 字符串转换回 List</span><br>    <span class="hljs-comment">//方法一：需要单独创建一个类，该类要继承TypeToken&lt;List&lt;类&gt;&gt;，里面可以什么都不填</span><br>    <span class="hljs-comment">//        List&lt;Person&gt; list = gson.fromJson(personListJsonString,</span><br>    <span class="hljs-comment">//                          new PersonListType().getType());</span><br>    <span class="hljs-comment">//方法二：使用匿名内部类，就不需要单独创建一个类</span><br>    List&lt;Person&gt; list = gson.fromJson(personListJsonString,<br>                                <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeToken</span>&lt;ArrayList&lt;Person&gt;&gt;()&#123;&#125;.getType());<br><br>    System.out.println(list);<br>    <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> list.get(<span class="hljs-number">0</span>);<br>    System.out.println(person);<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 把 json 字符串转换回 List</span><br><span class="hljs-comment">// 需要为成功转换回原来的 List&lt;类&gt; 创建一个类，继承TypeToken&lt;List&lt;类&gt;&gt;，里面可以什么都不填</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonListType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TypeToken</span>&lt;ArrayList&lt;Person&gt;&gt; &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="map-和-json-的互转"><a href="#map-和-json-的互转" class="headerlink" title="map 和 json 的互转"></a>map 和 json 的互转</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 1.2.3 、 map 和 json 的互转</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>    Map&lt;Integer,Person&gt; personMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    personMap.put(<span class="hljs-number">1</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot; 国哥好帅&quot;</span>));<br>    personMap.put(<span class="hljs-number">2</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot; 康师傅也好帅&quot;</span>));<br>    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>    <br>    <span class="hljs-comment">// 把 map 集合转换成为 json 字符串</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">personMapJsonString</span> <span class="hljs-operator">=</span> gson.toJson(personMap);<br>    System.out.println(personMapJsonString);<br>    <br>    <span class="hljs-comment">// 把 json 字符串转换为 map 集合</span><br>    <span class="hljs-comment">// 创建一个类继承TypeToken的方法</span><br>    <span class="hljs-comment">// Map&lt;Integer,Person&gt; personMap2 = gson.fromJson(personMapJsonString, new</span><br>    <span class="hljs-comment">//												PersonMapType().getType());</span><br>    <span class="hljs-comment">// 不需要单独创建一个类的方法（使用匿名内部类）</span><br>    Map&lt;Integer,Person&gt; personMap2 = gson.fromJson(personMapJsonString, <br>                     	<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeToken</span>&lt;HashMap&lt;Integer,Person&gt;&gt;()&#123;&#125;.getType());<br>    System.out.println(personMap2);<br>    <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> personMap2.get(<span class="hljs-number">1</span>);<br>    System.out.println(p);<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="AJAX-请求"><a href="#AJAX-请求" class="headerlink" title="AJAX 请求"></a>AJAX 请求</h2><h3 id="什么是-AJAX-请求"><a href="#什么是-AJAX-请求" class="headerlink" title="什么是 AJAX 请求"></a>什么是 AJAX 请求</h3><ul>
<li>AJAX 即“Asynchronous Javascript And XML”（异步 JavaScript 和 XML），是指一种创建交互式网页应用的网页开发技术。</li>
<li>AJAX 是一种浏览器通过 <strong>js 异步</strong>发起请求，<strong>局部更新</strong>页面的技术。</li>
<li>Ajax 请求的局部更新，浏览器地址栏不会发生变化，局部更新不会舍弃原来页面的内容</li>
</ul>
<h3 id="原生-AJAX-请求的示例"><a href="#原生-AJAX-请求的示例" class="headerlink" title="原生 AJAX 请求的示例"></a>原生 AJAX 请求的示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- html页面（前端） --&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;pragma&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;cache-control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Expires&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;0&quot;</span> /&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Insert title here<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">			<span class="hljs-comment">// 在这里使用javaScript语言发起Ajax请求，</span></span><br><span class="language-javascript">			<span class="hljs-comment">// 访问AjaxServlet中的javaScriptAjax</span></span><br><span class="language-javascript">			<span class="hljs-keyword">function</span> <span class="hljs-title function_">ajaxRequest</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-comment">// 				1、我们首先要创建XMLHttpRequest </span></span><br><span class="language-javascript">				<span class="hljs-keyword">var</span> xmlHttpRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</span><br><span class="language-javascript"><span class="hljs-comment">// 				2、调用open方法设置请求参数</span></span><br><span class="language-javascript">				xmlHttpRequest.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;http://localhost:8080/&quot;</span> +</span><br><span class="language-javascript">				<span class="hljs-string">&quot;study_16_json_ajax_i18n/ajaxServlet?action=javaScriptAjax&quot;</span>,<span class="hljs-literal">true</span>);</span><br><span class="language-javascript"><span class="hljs-comment">// 				3、在send方法前绑定onreadystatechange事件，处理请求完成后的操作。</span></span><br><span class="language-javascript">				xmlHttpRequest.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">					<span class="hljs-keyword">if</span>(xmlHttpRequest.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span> </span><br><span class="language-javascript">                       &amp;&amp; xmlHttpRequest.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>)&#123;</span><br><span class="language-javascript">						<span class="hljs-comment">// alert(xmlHttpRequest.responseText);</span></span><br><span class="language-javascript">						<span class="hljs-comment">// 把响应返回的数据显示在页面上</span></span><br><span class="language-javascript">						<span class="hljs-keyword">var</span> jsonObj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xmlHttpRequest.<span class="hljs-property">responseText</span>);</span><br><span class="language-javascript">						<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;div01&quot;</span>).<span class="hljs-property">innerHTML</span> =</span><br><span class="language-javascript">								<span class="hljs-string">&quot;编号：&quot;</span>+ jsonObj.<span class="hljs-property">id</span> + <span class="hljs-string">&quot;&lt;br/&gt; 姓名：&quot;</span> + jsonObj.<span class="hljs-property">name</span>;</span><br><span class="language-javascript">					&#125;</span><br><span class="language-javascript">				&#125;</span><br><span class="language-javascript"><span class="hljs-comment">// 				4、调用send方法发送请求</span></span><br><span class="language-javascript">				xmlHttpRequest.<span class="hljs-title function_">send</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">			&#125;</span><br><span class="language-javascript">		</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>	<br>		<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;ajaxRequest()&quot;</span>&gt;</span>ajax request<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div01&quot;</span>&gt;</span><br>		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>不会变化<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// AjaxServlet 程序（后端）</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AjaxServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">javaScriptAjax</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;Ajax请求过来了&quot;</span>);<br><br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- web.xml配置 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>AjaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.study.servlet.AjaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>AjaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/ajaxServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>





<h3 id="jQuery-中的-AJAX-请求"><a href="#jQuery-中的-AJAX-请求" class="headerlink" title="jQuery 中的 AJAX 请求"></a>jQuery 中的 AJAX 请求</h3><ul>
<li><p>$.ajax 方法</p>
<ul>
<li>url                       表示请求的地址</li>
<li>type                    表示请求的类型 GET 或 POST 请求</li>
<li>data                    表示发送给服务器的数据<ul>
<li>data 的格式有两种：</li>
<li>一：name&#x3D;value&amp;name&#x3D;value</li>
<li>二：{key:value}</li>
</ul>
</li>
<li>success              请求成功，响应的回调函数</li>
<li>dataType           响应的数据类型（预期服务器返回的数据类型）<ul>
<li>常用的数据类型有：</li>
<li>text      表示纯文本</li>
<li>xml      表示 xml 数据</li>
<li>json     表示 json 对象</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;#ajaxBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br><br>    $.<span class="hljs-title function_">ajax</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;http://localhost:8080/study_16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>        <span class="hljs-comment">// data:&quot;action=jQueryAjax&quot;,</span><br>        <span class="hljs-attr">data</span>:&#123;<span class="hljs-attr">action</span>:<span class="hljs-string">&quot;jQueryAjax&quot;</span>&#125;,<br>        <span class="hljs-attr">type</span>:<span class="hljs-string">&quot;GET&quot;</span>,<br>        <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>            <span class="hljs-comment">// 函数括号里需要填上一个参数，该参数用来接收服务器返回的数据</span><br>            <span class="hljs-comment">// alert(&quot;服务器返回的数据是：&quot;+data);</span><br>            <span class="hljs-comment">// var jsonObj = JSON.parse(data);</span><br>            $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot;编号：&quot;</span>+ data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot;&lt;br/&gt;姓名：&quot;</span> + data.<span class="hljs-property">name</span>);<br>        &#125;,<br>        <span class="hljs-comment">// dataType:&quot;text&quot;</span><br>        <span class="hljs-attr">dataType</span>:<span class="hljs-string">&quot;json&quot;</span><br>    &#125;);<br><br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li><p>$.get 方法 和 $.post 方法</p>
<ul>
<li>url               请求的 url 地址</li>
<li>data            发送的数据</li>
<li>callback      成功的回调函数</li>
<li>type             返回的数据类型</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ajax--get 请求</span><br>$(<span class="hljs-string">&quot;#getBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    $.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>          <span class="hljs-string">&quot;action=jQueryGet&quot;</span>,<br>          <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        	$(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; get 编号：&quot;</span> + data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot; , 姓名：&quot;</span> + data.<span class="hljs-property">name</span>);<br>    	  &#125;,<br>          <span class="hljs-string">&quot;json&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// ajax--post 请求</span><br>$(<span class="hljs-string">&quot;#postBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    $.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>        	<span class="hljs-string">&quot;action=jQueryPost&quot;</span>,<br>            <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        		$(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; post 编号：&quot;</span> + data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot; , 姓名：&quot;</span> + data.<span class="hljs-property">name</span>);<br>    		&#125;,<br>            <span class="hljs-string">&quot;json&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li><p>$.getJSON 方法</p>
<ul>
<li>url              请求的 url 地址</li>
<li>data           发送给服务器的数据</li>
<li>callback     成功的回调函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ajax--getJson 请求</span><br>$(<span class="hljs-string">&quot;#getJSONBtn&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    $.<span class="hljs-title function_">getJSON</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>              					<span class="hljs-string">&quot;action=jQueryGetJSON&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) &#123;<br>        $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; getJSON 编号：&quot;</span> + data.<span class="hljs-property">id</span> + <span class="hljs-string">&quot; , 姓名：&quot;</span> + data.<span class="hljs-property">name</span>);<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li><p>表单序列化 serialize()</p>
<p>serialize() 可以把表单中所有表单项的内容都获取到，并以 name&#x3D;value&amp;name&#x3D;value 的形式进行拼接</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-comment">// ajax 请求</span><br>$(<span class="hljs-string">&quot;#submit&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// 把参数序列化</span><br>    $.<span class="hljs-title function_">getJSON</span>(<span class="hljs-string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<br>        	  <span class="hljs-string">&quot;action=jQuerySerialize&amp;&quot;</span> + $(<span class="hljs-string">&quot;#form01&quot;</span>).<span class="hljs-title function_">serialize</span>(),<br>              <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        		 $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot; Serialize 编号：&quot;</span> + data.<span class="hljs-property">id</span> + <br>                                <span class="hljs-string">&quot; , 姓名：&quot;</span> + data.<span class="hljs-property">name</span>);<br>    		  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="AjaxServlet-后端-java-程序"><a href="#AjaxServlet-后端-java-程序" class="headerlink" title="AjaxServlet 后端 java 程序"></a>AjaxServlet 后端 java 程序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AjaxServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">javaScriptAjax</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;Ajax请求过来了&quot;</span>);<br><br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryAjax</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryAjax == 方法调用了&quot;</span>);<br><br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryGet == 方法调用了&quot;</span>);<br><br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryPost == 方法调用了&quot;</span>);<br><br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQueryGetJSON</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQueryGetJSON == 方法调用了&quot;</span>);<br><br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jQuerySerialize</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        <span class="hljs-comment">// 报错：No &#x27;Access-Control-Allow-Origin&#x27; header 解决方法：</span><br>        resp.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="hljs-string">&quot;*&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot; jQuerySerialize == 方法调用了&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;用户名:&quot;</span>+req.getParameter(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;密码：&quot;</span>+req.getParameter(<span class="hljs-string">&quot;password&quot;</span>));<br>        <span class="hljs-comment">// 响应，回传数据（假设要回传 person 对象）</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;国哥&quot;</span>);<br>        <span class="hljs-comment">// 交互传输需要 json格式的字符串</span><br>        <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJsonString</span> <span class="hljs-operator">=</span> gson.toJson(person);<br>        <span class="hljs-comment">// 响应</span><br>        resp.getWriter().write(personJsonString);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="i18n-国际化"><a href="#i18n-国际化" class="headerlink" title="i18n 国际化"></a>i18n 国际化</h2><h3 id="什么是-i18n-国际化"><a href="#什么是-i18n-国际化" class="headerlink" title="什么是 i18n 国际化"></a>什么是 i18n 国际化</h3><ul>
<li>国际化（Internationalization）指的是同一个网站可以支持多种不同的语言，以方便不同国家，不同语种的用户访问。</li>
<li>关于国际化我们想到的最简单的方案就是为不同的国家创建不同的网站，比如苹果公司，他的英文官网是：<br><a target="_blank" rel="noopener" href="http://www.apple.com/">http://www.apple.com</a> 而中国官网是 <a target="_blank" rel="noopener" href="http://www.apple.com/cn">http://www.apple.com/cn</a></li>
<li>苹果公司这种方案并不适合全部公司，而我们希望相同的一个网站，而不同人访问的时候可以根据用户所在的区域显示不同的语言文字，而网站的布局样式等不发生改变。</li>
<li>于是就有了我们说的国际化，国际化总的来说就是同一个网站不同国家的人来访问可以显示出不同的语言。但实际上这种需求并不强烈，一般真的有国际化需求的公司，主流采用的依然是苹果公司的那种方案，为不同的国家创建不同的页面。所以国际化的内容我们了解一下即可。</li>
<li>国际化的英文 Internationalization，但是由于拼写过长，老外想了一个简单的写法叫做 I18N，代表的是 Internationalization这个单词，以 I 开头，以 N 结尾，而中间是 18 个字母，所以简写为 I18N。以后我们说 I18N 和国际化是一个意思。</li>
</ul>
<h3 id="国际化相关要素介绍"><a href="#国际化相关要素介绍" class="headerlink" title="国际化相关要素介绍"></a>国际化相关要素介绍</h3><p><img src="/2023/07/04/JavaWebNote/image-20221112143554038.png" srcset="/img/loading.gif" lazyload alt="image-20221112143554038"></p>
<h3 id="国际化资源-properties-测试-测试"><a href="#国际化资源-properties-测试-测试" class="headerlink" title="国际化资源 properties 测试 测试"></a>国际化资源 properties 测试 测试</h3><ul>
<li><p>配置两个语言的配置文件：</p>
<ul>
<li><p>i18n_en_US.properties 英文</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">username</span>=<span class="hljs-string">username</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">password</span><br><span class="hljs-attr">sex</span>=<span class="hljs-string">sex</span><br><span class="hljs-attr">age</span>=<span class="hljs-string">age</span><br><span class="hljs-attr">regist</span>=<span class="hljs-string">regist</span><br><span class="hljs-attr">boy</span>=<span class="hljs-string">boy</span><br><span class="hljs-attr">email</span>=<span class="hljs-string">email</span><br><span class="hljs-attr">girl</span>=<span class="hljs-string">girl</span><br><span class="hljs-attr">reset</span>=<span class="hljs-string">reset</span><br><span class="hljs-attr">submit</span>=<span class="hljs-string">submit</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>i18n_zh_CN.properties 中文</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">username</span>= <span class="hljs-string">用户名</span><br><span class="hljs-attr">password</span>= <span class="hljs-string">密码</span><br><span class="hljs-attr">sex</span>= <span class="hljs-string">性别</span><br><span class="hljs-attr">age</span>= <span class="hljs-string">年龄</span><br><span class="hljs-attr">regist</span>= <span class="hljs-string">注册</span><br><span class="hljs-attr">boy</span>= <span class="hljs-string">男</span><br><span class="hljs-attr">girl</span>= <span class="hljs-string">女</span><br><span class="hljs-attr">email</span>= <span class="hljs-string">邮箱</span><br><span class="hljs-attr">reset</span>= <span class="hljs-string">重置</span><br><span class="hljs-attr">submit</span>= <span class="hljs-string">提交</span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>国际化测试代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">I18nTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLocale</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// 获取你系统默认的语言。国家信息</span><br>        <span class="hljs-comment">// Locale locale = Locale.getDefault();</span><br>        <span class="hljs-comment">// System.out.println(locale);</span><br>        <span class="hljs-comment">// for (Locale availableLocale : Locale.getAvailableLocales()) &#123;</span><br>        <span class="hljs-comment">// System.out.println(availableLocale);</span><br>        <span class="hljs-comment">// &#125;</span><br>        <span class="hljs-comment">// 获取中文，中文的常量的 Locale 对象</span><br>        System.out.println(Locale.CHINA);<br>        <span class="hljs-comment">// 获取英文，美国的常量的 Locale 对象</span><br>        System.out.println(Locale.US);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testI18n</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// 得到我们需要的 Locale 对象</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> Locale.CHINA;<br>        <span class="hljs-comment">// 通过指定的 basename 和 Locale 对象，读取 相应的配置文件</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">bundle</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;i18n&quot;</span>, locale);<br>        <br>        System.out.println(<span class="hljs-string">&quot;username ：&quot;</span> + bundle.getString(<span class="hljs-string">&quot;username&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;password ：&quot;</span> + bundle.getString(<span class="hljs-string">&quot;password&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;Sex ：&quot;</span> + bundle.getString(<span class="hljs-string">&quot;sex&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;age ：&quot;</span> + bundle.getString(<span class="hljs-string">&quot;age&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="通过请求头国际化页面"><a href="#通过请求头国际化页面" class="headerlink" title="通过请求头国际化页面"></a>通过请求头国际化页面</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.Locale&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.ResourceBundle&quot;</span> %&gt;<br>&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;!DOCTYPE html PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;pragma&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;cache-control&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Expires&quot;</span> content=<span class="hljs-string">&quot;0&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Content-Type&quot;</span> content=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;<br>        &lt;title&gt;Insert title here&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%<br>        <span class="hljs-comment">// 从请求头中获取 Locale 信息（语言）</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> request.getLocale();<br>        System.out.println(locale);<br>        <span class="hljs-comment">// 获取读取包（根据 指定的 baseName 和 Locale 读取 语言信息）</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">i18n</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;i18n&quot;</span>, locale);<br>        %&gt;<br>        &lt;a href=<span class="hljs-string">&quot;&quot;</span>&gt;中文&lt;/a&gt;|<br>        &lt;a href=<span class="hljs-string">&quot;&quot;</span>&gt;english&lt;/a&gt;<br>        &lt;center&gt;<br>            &lt;h1&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;regist&quot;</span>)%&gt;&lt;/h1&gt;<br>            &lt;table&gt;<br>                &lt;form&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;username&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input name=<span class="hljs-string">&quot;username&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;password&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;sex&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;boy&quot;</span>)%&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;girl&quot;</span>)%&gt;<br>                        &lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;email&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td colspan=<span class="hljs-string">&quot;2&quot;</span> align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;reset&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>reset<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;<br>                            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>submit<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                &lt;/form&gt;<br>            &lt;/table&gt;<br>            &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt;<br>        &lt;/center&gt;<br>        国际化测试：<br>        &lt;br /&gt; <span class="hljs-number">1</span>、访问页面，通过浏览器设置，请求头信息确定国际化语言。<br>        &lt;br /&gt; <span class="hljs-number">2</span>、通过左上角，手动切换语言<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>



<h3 id="通过显示的选择语言类型进行国际化"><a href="#通过显示的选择语言类型进行国际化" class="headerlink" title="通过显示的选择语言类型进行国际化"></a>通过显示的选择语言类型进行国际化</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.Locale&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.ResourceBundle&quot;</span> %&gt;<br>&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;!DOCTYPE html PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;pragma&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;cache-control&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Expires&quot;</span> content=<span class="hljs-string">&quot;0&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Content-Type&quot;</span> content=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;<br>        &lt;title&gt;Insert title here&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%<br>        <span class="hljs-comment">// 从请求头中获取 Locale 信息（语言）</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">country</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;country&quot;</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;cn&quot;</span>.equals(country)) &#123;<br>            locale = Locale.CHINA;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;usa&quot;</span>.equals(country)) &#123;<br>            locale = Locale.US;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            locale = request.getLocale();<br>        &#125;<br>        System.out.println(locale);<br>        <span class="hljs-comment">// 获取读取包（根据 指定的 baseName 和 Locale 读取 语言信息）</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">i18n</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;i18n&quot;</span>, locale);<br>        %&gt;<br>        &lt;a href=<span class="hljs-string">&quot;i18n.jsp?country=cn&quot;</span>&gt;中文&lt;/a&gt;|<br>        &lt;a href=<span class="hljs-string">&quot;i18n.jsp?country=usa&quot;</span>&gt;english&lt;/a&gt;<br>        &lt;center&gt;<br>            &lt;h1&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;regist&quot;</span>)%&gt;&lt;/h1&gt;<br>            &lt;table&gt;<br>                &lt;form&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;username&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input name=<span class="hljs-string">&quot;username&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;password&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;sex&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;boy&quot;</span>)%&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;girl&quot;</span>)%&gt;<br>                        &lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;%=i18n.getString(<span class="hljs-string">&quot;email&quot;</span>)%&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td colspan=<span class="hljs-string">&quot;2&quot;</span> align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;reset&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>reset<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;<br>                            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;&lt;%=i18n.getString(&quot;</span>submit<span class="hljs-string">&quot;)%&gt;&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                &lt;/form&gt;<br>            &lt;/table&gt;<br>            &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt;<br>        &lt;/center&gt;<br>        国际化测试：<br>        &lt;br /&gt; <span class="hljs-number">1</span>、访问页面，通过浏览器设置，请求头信息确定国际化语言。<br>        &lt;br /&gt; <span class="hljs-number">2</span>、通过左上角，手动切换语言<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>



<h3 id="JSTL-标签库实现国际化"><a href="#JSTL-标签库实现国际化" class="headerlink" title="JSTL 标签库实现国际化"></a>JSTL 标签库实现国际化</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--<span class="hljs-number">1</span> 使用标签设置 Locale 信息 --%&gt;<br>&lt;fmt:setLocale value=<span class="hljs-string">&quot;&quot;</span> /&gt;<br>&lt;%--<span class="hljs-number">2</span> 使用标签设置 baseName--%&gt;<br>&lt;fmt:setBundle basename=<span class="hljs-string">&quot;&quot;</span>/&gt;<br>&lt;%--<span class="hljs-number">3</span> 使用标签输出指定 key 的国际化信息 --%&gt;<br>&lt;fmt:message key=<span class="hljs-string">&quot;&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ taglib prefix=<span class="hljs-string">&quot;fmt&quot;</span> uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;<br>&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;!DOCTYPE html PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;pragma&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;cache-control&quot;</span> content=<span class="hljs-string">&quot;no-cache&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Expires&quot;</span> content=<span class="hljs-string">&quot;0&quot;</span> /&gt;<br>        &lt;meta http-equiv=<span class="hljs-string">&quot;Content-Type&quot;</span> content=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;<br>        &lt;title&gt;Insert title here&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;%--<span class="hljs-number">1</span> 使用标签设置 Locale 信息 --%&gt;<br>        &lt;fmt:setLocale value=<span class="hljs-string">&quot;$&#123;param.locale&#125;&quot;</span> /&gt;<br>        &lt;%--<span class="hljs-number">2</span> 使用标签设置 baseName--%&gt;<br>        &lt;fmt:setBundle basename=<span class="hljs-string">&quot;i18n&quot;</span>/&gt;<br>        &lt;a href=<span class="hljs-string">&quot;i18n_fmt.jsp?locale=zh_CN&quot;</span>&gt;中文&lt;/a&gt;|<br>        &lt;a href=<span class="hljs-string">&quot;i18n_fmt.jsp?locale=en_US&quot;</span>&gt;english&lt;/a&gt;<br>        &lt;center&gt;<br>            &lt;h1&gt;&lt;fmt:message key=<span class="hljs-string">&quot;regist&quot;</span> /&gt;&lt;/h1&gt;<br>            &lt;table&gt;<br>                &lt;form&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;username&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input name=<span class="hljs-string">&quot;username&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;password&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;sex&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;fmt:message key=<span class="hljs-string">&quot;boy&quot;</span> /&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;radio&quot;</span> /&gt;&lt;fmt:message key=<span class="hljs-string">&quot;girl&quot;</span> /&gt;<br>                        &lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td&gt;&lt;fmt:message key=<span class="hljs-string">&quot;email&quot;</span> /&gt;&lt;/td&gt;<br>                        &lt;td&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                    &lt;tr&gt;<br>                        &lt;td colspan=<span class="hljs-string">&quot;2&quot;</span> align=<span class="hljs-string">&quot;center&quot;</span>&gt;<br>                            &lt;input type=<span class="hljs-string">&quot;reset&quot;</span> value=<span class="hljs-string">&quot;&lt;fmt:message key=&quot;</span>reset<span class="hljs-string">&quot; /&gt;&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;<br>                            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;&lt;fmt:message key=&quot;</span>submit<span class="hljs-string">&quot; /&gt;&quot;</span> /&gt;&lt;/td&gt;<br>                    &lt;/tr&gt;<br>                &lt;/form&gt;<br>            &lt;/table&gt;<br>            &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt;<br>        &lt;/center&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>




























































                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div></div>
      <div>https://leung-yh.github.io/2023/07/04/JavaWebNote/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Leungyh</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年7月4日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/07/03/GitNote/" title="Git">
                        <span class="hidden-mobile">Git</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
